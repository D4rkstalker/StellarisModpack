namespace = esap

# Adds Unity bonus to robots when built. 
pop_event = {
	id = esap.1
	hide_window = yes
	is_triggered_only = yes
	
	trigger = {	
		owner = {
			has_ascension_perk = ap_esap_cyber_1
		}
	}
	
	immediate = {
		switch = {
			trigger = pop_has_trait			
			trait_robotic_1 = { add_modifier = {modifier = "mod_cyber_1_robot" days = -1}}
			trait_robotic_2 = { add_modifier = {modifier = "mod_cyber_1_droid" days = -1} }
			trait_robotic_3 = { add_modifier = {modifier = "mod_cyber_1_synthetic" days = -1} }
		}
	}
}

# Adds Unity bonus to robots when conquered. 
planet_event = {
	id = esap.2
	hide_window = yes
	is_triggered_only = yes
	
	trigger = {	
		owner = {
			has_ascension_perk = ap_esap_cyber_1		
		}
	}
	
	immediate = {
		every_owned_pop = {
			limit = {
				is_robot_pop = yes
				NOR = {
					has_modifier = mod_cyber_1_robot
					has_modifier = mod_cyber_1_droid
					has_modifier = mod_cyber_1_synthetic
				}
			}
			switch = {
				trigger = pop_has_trait			
				trait_robotic_1 = { add_modifier = {modifier = "mod_cyber_1_robot" days = -1} }
				trait_robotic_2 = { add_modifier = {modifier = "mod_cyber_1_droid" days = -1} }
				trait_robotic_3 = { add_modifier = {modifier = "mod_cyber_1_synthetic" days = -1} }
			}			
		}
	}
}

# Adds Unity bonus to robots when upgraded by tech. 
country_event = {
	id = esap.3
	hide_window = yes
	is_triggered_only = yes
	
	trigger = {	
		has_ascension_perk = ap_esap_cyber_1				
	}
	
	immediate = {
		if = {
			limit = {
				last_increased_tech = "tech_droid_workers"
			}
			every_owned_pop = {
				limit = {
					pop_has_trait = trait_robotic_1
				}
				if = {
					limit = {
						Not = {
							has_modifier = mod_cyber_1_droid			
						}
					}
					add_modifier = {
						modifier = "mod_cyber_1_droid" 
						days = -1 
					}
				}
				if = {
					limit = {
						has_modifier = mod_cyber_1_robot
					}
					remove_modifier = "mod_cyber_1_robot"
				}
				if = {
					limit = {
						has_modifier = mod_cyber_1_synthetic
					}
					remove_modifier = "mod_cyber_1_synthetic"
				}
			}			
		}
		if = {
			limit = {
				last_increased_tech = "tech_synthetic_workers"
			}
			every_owned_pop = {
				limit = {
					pop_has_trait = trait_robotic_2
				}
				if = {
					limit = {
						Not = {
							has_modifier = mod_cyber_1_synthetic
						}
					}
					add_modifier = {
						modifier = "mod_cyber_1_synthetic" 
						days = -1 
					}
				}
				if = {
					limit = {
						has_modifier = mod_cyber_1_robot
					}
					remove_modifier = "mod_cyber_1_robot"
				}
				if = {
					limit = {
						has_modifier = mod_cyber_1_droid
					}
					remove_modifier = "mod_cyber_1_droid"
				}
			}			
		}	
	}
}

# Updates Unity bonus to robots in countries (yearly). 
event = {
	id = esap.4
	hide_window = yes
	is_triggered_only = yes
	
	trigger = {	
		any_country = {
			has_ascension_perk = ap_esap_cyber_1	
		}
	}
	
	immediate = {
		every_country = {
			limit = {
				has_ascension_perk = ap_esap_cyber_1
			}		
			every_owned_pop = {
				limit = {
					Or = {
						pop_has_trait = trait_robotic_1
						pop_has_trait = trait_robotic_2
						pop_has_trait = trait_robotic_3
					}				
				}
				if = {
					limit = {
						pop_has_trait = trait_robotic_1
					}
					if = {
						limit = {
							Not = {
								has_modifier = mod_cyber_1_robot
							}
						}
						add_modifier = {
							modifier = "mod_cyber_1_robot" 
							days = -1 
						}
					}
					if = {
						limit = {
							has_modifier = mod_cyber_1_synthetic
						}
						remove_modifier = "mod_cyber_1_synthetic"
					}
					if = {
						limit = {
							has_modifier = mod_cyber_1_droid
						}
						remove_modifier = "mod_cyber_1_droid"
					}					
				}
				if = {
					limit = {
						pop_has_trait = trait_robotic_2
					}
					if = {
						limit = {
							Not = {
								has_modifier = mod_cyber_1_droid
							}
						}
						add_modifier = {
							modifier = "mod_cyber_1_droid" 
							days = -1 
						}
					}
					if = {
						limit = {
							has_modifier = mod_cyber_1_synthetic
						}
						remove_modifier = "mod_cyber_1_synthetic"
					}
					if = {
						limit = {
							has_modifier = mod_cyber_1_robot
						}
						remove_modifier = "mod_cyber_1_robot"
					}					
				}
				if = {
					limit = {
						pop_has_trait = trait_robotic_3
					}
					if = {
						limit = {
							Not = {
								has_modifier = mod_cyber_1_synthetic
							}
						}
						add_modifier = {
							modifier = "mod_cyber_1_synthetic" 
							days = -1 
						}
					}
					if = {
						limit = {
							has_modifier = mod_cyber_1_robot
						}
						remove_modifier = "mod_cyber_1_robot"
					}
					if = {
						limit = {
							has_modifier = mod_cyber_1_droid
						}
						remove_modifier = "mod_cyber_1_droid"
					}					
				}
			}
		}
	}
}

# Building robots yields unity
pop_event = {
	id = esap.5
	hide_window = yes
	is_triggered_only = yes
	
	trigger = {	
		owner = {
			has_ascension_perk = ap_esap_cyber_1
		}
		Or = {
			is_robot_pop = yes		
		}
	}
	
	immediate = {
		owner = {
			add_monthly_resource_mult = {
				resource = unity
				value = 2
				min = 5
				max = 250
			}
		}
	}
}

# Gives penalty to rivals. (yearly)
event = {
	id = esap.6
	hide_window = yes
	is_triggered_only = yes
	
	trigger = {	
		any_country = {
			has_ascension_perk = ap_esap_psi_1
		}
	}
	
	immediate = {
		every_country = {
			if = {
				limit = {
					has_country_flag = has_psi_rival				
				}
				remove_country_flag = has_psi_rival
			}
			every_country = {				
				limit = {
					has_ascension_perk = ap_esap_psi_1			
					is_rival = prev				
				}
				prev = {
					if = {
						limit = {
							Not = {
								has_country_flag = has_psi_rival									
							}
						}
						set_country_flag = has_psi_rival
					}
				}
			}			
		}	
		every_country = {
			if = {
				limit = {
					has_country_flag = has_psi_rival				
				}			
				if = {
					limit = {
						Not = {
							has_modifier = mod_psi_1	
						}						
					}			
					add_modifier = {
						modifier = "mod_psi_1"
					}
				}
				else = {
					if = {
						limit = {
							has_modifier = mod_psi_1
						}
						remove_modifier = "mod_psi_1"
					}
				}
			}
		}
	}
}

# Gives latent psionic leader psionic trait
country_event = {
	id = esap.7
	hide_window = yes
	is_triggered_only = yes


	trigger = {
		has_ascension_perk = ap_esap_bio_cyber_psi	
		from = {
			species = { has_trait = trait_latent_psionic }
		}
		Not = {
			has_trait = leader_trait_admiral_psionic
			has_trait = leader_trait_general_psionic
			has_trait = leader_trait_governor_psionic
			has_trait = leader_trait_scientist_psionic
		}
	}

	immediate = {
		random_list = {
			3 = { break = yes }
			1 = { }
		}
		from = {
			if = {
				limit = { leader_class = admiral }
				add_trait = leader_trait_admiral_psionic
				add_ruler_trait = leader_trait_ruler_psionic
				break = yes
			}
			if = {
				limit = { leader_class = general }
				add_trait = leader_trait_general_psionic
				add_ruler_trait = leader_trait_ruler_psionic
				break = yes
			}
			if = {
				limit = { leader_class = governor }
				add_trait = leader_trait_governor_psionic
				add_ruler_trait = leader_trait_ruler_psionic
				break = yes
			}
			if = {
				limit = { leader_class = scientist }
				add_trait = leader_trait_scientist_psionic
				add_ruler_trait = leader_trait_ruler_psionic
				break = yes
			}
			if = {
				limit = { leader_class = ruler }
				add_trait = leader_trait_ruler_psionic
				break = yes
			}
		}
	}
}

#Goverment perks, update government perks count flag.
country_event = {
	id = esap.8
	hide_window = yes
	is_triggered_only = yes
	
	immediate = {
		if = {
		limit = {
				Nor = {
					has_country_flag = gov_ap_1
					has_country_flag = gov_ap_2
					has_country_flag = gov_ap_3
					has_country_flag = gov_ap_4
					has_country_flag = gov_ap_5
				}
			}
			set_country_flag = gov_ap_1
			else = {
				if = {
					limit = {
						has_country_flag = gov_ap_1					
					}
					set_country_flag = gov_ap_2
					remove_country_flag = gov_ap_1
					else = {					
						if = {
							limit = {
								has_country_flag = gov_ap_2					
							}
							set_country_flag = gov_ap_3
							remove_country_flag = gov_ap_2
							else = {
								if = {
									limit = {
										has_country_flag = gov_ap_3					
									}
									set_country_flag = gov_ap_4
									remove_country_flag = gov_ap_3
									else = {
										set_country_flag = gov_ap_5
										remove_country_flag = gov_ap_4
									}
								}
							}
						}
					}
				}
			}
		}	
	}
	
	immediate = {
		switch = {
			trigger = has_modifier
			
			mod_gov_1_1 = {remove_modifier = "mod_gov_1_1"}
			mod_gov_1_2 = {remove_modifier = "mod_gov_1_2"}
			mod_gov_1_3 = {remove_modifier = "mod_gov_1_3"}
			mod_gov_1_4 = {remove_modifier = "mod_gov_1_4"}
			mod_gov_1_5 = {remove_modifier = "mod_gov_1_5"}
		}
		switch = {
			trigger = has_modifier
			
			mod_gov_2_1 = {remove_modifier = "mod_gov_2_1"}
			mod_gov_2_2 = {remove_modifier = "mod_gov_2_2"}
			mod_gov_2_3 = {remove_modifier = "mod_gov_2_3"}
			mod_gov_2_4 = {remove_modifier = "mod_gov_2_4"}
			mod_gov_2_5 = {remove_modifier = "mod_gov_2_5"}
		}
		switch = {
			trigger = has_modifier
			
			mod_gov_3_1 = {remove_modifier = "mod_gov_3_1"}
			mod_gov_3_2 = {remove_modifier = "mod_gov_3_2"}
			mod_gov_3_3 = {remove_modifier = "mod_gov_3_3"}
			mod_gov_3_4 = {remove_modifier = "mod_gov_3_4"}
			mod_gov_5_5 = {remove_modifier = "mod_gov_3_5"}
		}
		switch = {
			trigger = has_modifier
			
			mod_gov_5_1 = {remove_modifier = "mod_gov_5_1"}
			mod_gov_5_2 = {remove_modifier = "mod_gov_5_2"}
			mod_gov_5_3 = {remove_modifier = "mod_gov_5_3"}
			mod_gov_5_4 = {remove_modifier = "mod_gov_5_4"}
			mod_gov_3_5 = {remove_modifier = "mod_gov_5_5"}
		}
		if = {
			limit = {
				has_ascension_perk = ap_esap_gov_1			
			}
			switch = {
				trigger = has_country_flag
				
				gov_ap_1 = {
					add_modifier = {
						modifier = mod_gov_1_1
						days = -1
					}
				}
				gov_ap_2 = {
					add_modifier = {
						modifier = mod_gov_1_2
						days = -1
					}
				}
				gov_ap_3 = {
					add_modifier = {
						modifier = mod_gov_1_3
						days = -1
					}
				}
				gov_ap_4 = {
					add_modifier = {
						modifier = mod_gov_1_4
						days = -1
					}
				}
				gov_ap_5 = {
					add_modifier = {
						modifier = mod_gov_1_5
						days = -1
					}
				}
			}
		}
		if = {
			limit = {
				has_ascension_perk = ap_esap_gov_2		
			}
			switch = {
				trigger = has_country_flag
				
				gov_ap_1 = {
					add_modifier = {
						modifier = mod_gov_2_1
						days = -1
					}
				}
				gov_ap_2 = {
					add_modifier = {
						modifier = mod_gov_2_2
						days = -1
					}
				}
				gov_ap_3 = {
					add_modifier = {
						modifier = mod_gov_2_3
						days = -1
					}
				}
				gov_ap_4 = {
					add_modifier = {
						modifier = mod_gov_2_4
						days = -1
					}
				}
				gov_ap_5 = {
					add_modifier = {
						modifier = mod_gov_2_5
						days = -1
					}
				}
			
			
			}
		}
		if = {
			limit = {
				has_ascension_perk = ap_esap_gov_3			
			}
			switch = {
				trigger = has_country_flag
				
				gov_ap_1 = {
					add_modifier = {
						modifier = mod_gov_3_1
						days = -1
					}
				}
				gov_ap_2 = {
					add_modifier = {
						modifier = mod_gov_3_2
						days = -1
					}
				}
				gov_ap_3 = {
					add_modifier = {
						modifier = mod_gov_3_3
						days = -1
					}
				}
				gov_ap_4 = {
					add_modifier = {
						modifier = mod_gov_3_4
						days = -1
					}
				}
				gov_ap_5 = {
					add_modifier = {
						modifier = mod_gov_3_5
						days = -1
					}
				}
			
			
			}
		}
		if = {
			limit = {
				has_ascension_perk = ap_esap_gov_1			
			}
			switch = {
				trigger = has_country_flag
				
				gov_ap_1 = {	
					every_pop_faction = {
						add_modifier = {
							modifier = "mod_gov_4_1"
							days = -1
						}
					}
				}
				gov_ap_2 = {
					every_pop_faction = {
						remove_modifier = "mod_gov_4_1"
						add_modifier = {
							modifier = "mod_gov_4_2"
							days = -1
						}
					}
				}
				gov_ap_3 = {
					every_pop_faction = {
						remove_modifier = "mod_gov_4_2"
						add_modifier = {
							modifier = "mod_gov_4_3"
							days = -1
						}
					}
				}
				gov_ap_4 = {
					every_pop_faction = {
						remove_modifier = "mod_gov_4_3"
						add_modifier = {
							modifier = "mod_gov_4_4"
							days = -1
						}
					}
				}
				gov_ap_5 = {
					every_pop_faction = {
						remove_modifier = "mod_gov_4_4"
						add_modifier = {
							modifier = "mod_gov_4_5"
							days = -1
						}
					}
				}			
			}
		}
		if = {
			limit = {
				has_ascension_perk = ap_esap_gov_5		
			}
			switch = {
				trigger = has_country_flag
				
				gov_ap_1 = {
					add_modifier = {
						modifier = mod_gov_5_1
						days = -1
					}
				}
				gov_ap_2 = {
					add_modifier = {
						modifier = mod_gov_5_2
						days = -1
					}
				}
				gov_ap_3 = {
					add_modifier = {
						modifier = mod_gov_5_3
						days = -1
					}
				}
				gov_ap_4 = {
					add_modifier = {
						modifier = mod_gov_5_4
						days = -1
					}
				}
				gov_ap_5 = {
					add_modifier = {
						modifier = mod_gov_5_5
						days = -1
					}
				}
			}
		}
		if = {
			limit = {
				has_ascension_perk = ap_esap_gov_5_corp		
			}
			switch = {
				trigger = has_country_flag
				
				gov_ap_1 = {
					add_modifier = {
						modifier = mod_gov_5_1
						days = -1
					}
				}
				gov_ap_2 = {
					add_modifier = {
						modifier = mod_gov_5_2
						days = -1
					}
				}
				gov_ap_3 = {
					add_modifier = {
						modifier = mod_gov_5_3
						days = -1
					}
				}
				gov_ap_4 = {
					add_modifier = {
						modifier = mod_gov_5_4
						days = -1
					}
				}
				gov_ap_5 = {
					add_modifier = {
						modifier = mod_gov_5_5
						days = -1
					}
				}
			}
		}
	}
}

#Goverment perks, update pop faction happiness
event = {
	id = esap.9
	hide_window = yes
	is_triggered_only = yes
	
	trigger = {
		any_country = {
			has_ascension_perk = ap_esap_gov_4
		}
	}
	
	immediate = {
		every_country = {
			limit = {
				has_ascension_perk = ap_esap_gov_4
			}
			switch = {
				trigger = has_country_flag
				
				gov_ap_1 = {	
					every_pop_faction = {
						limit = {
							Not = {
								has_modifier = mod_gov_4_1
							}
						}
						add_modifier = {
							modifier = "mod_gov_4_1"
							days = -1
						}
					}
				}
				gov_ap_2 = {
					every_pop_faction = {
						limit = {
							Not = {
								has_modifier = mod_gov_4_2
							}
						}
						add_modifier = {
							modifier = "mod_gov_4_2"
							days = -1
						}
					}
				}
				gov_ap_3 = {
					every_pop_faction = {
						limit = {
							Not = {
								has_modifier = mod_gov_4_3
							}
						}
						add_modifier = {
							modifier = "mod_gov_4_3"
							days = -1
						}
					}
				}
				gov_ap_4 = {
					every_pop_faction = {
						limit = {
							Not = {
								has_modifier = mod_gov_4_4
							}
						}
						add_modifier = {
							modifier = "mod_gov_4_4"
							days = -1
						}
					}
				}
				gov_ap_5 = {
					every_pop_faction = {
						limit = {
							Not = {
								has_modifier = mod_gov_4_5
							}
						}
						add_modifier = {
							modifier = "mod_gov_4_5"
							days = -1
						}
					}
				}			
			}			
		}	
	}
}

# Creates additional colonizer whenever one is created.
ship_event = {
	id = esap.11
	hide_window = yes
	is_triggered_only = yes
	
	trigger = {
		owner = {
			has_ascension_perk = ap_esap_colony
		}		
		is_ship_size = colonizer	
	}
	
	immediate = {
		create_fleet = {
			#name = "Colonizer"
			#name = random
			#settings = { spawn_debris = no }
			effect = {
				set_owner = root.owner
				create_ship = {
					name = random
					design = random_existing_design
					random_existing_design = colonizer
					prefix = yes
				}
				set_location = root
			}
		}
	}
}

#Adds modifier to battleship
ship_event = {
	id = esap.12
	hide_window = yes
	is_triggered_only = yes
	
	trigger = {
		owner = {
			has_ascension_perk = ap_esap_battleship
		}	
		is_ship_size = battleship
	}
	
	immediate = {
		add_modifier = {
			modifier = "mod_esap_battleship"
			days = -1
		}
	}
}

# Adds research bonus when researching repeatable techs
event = {
	id = esap.13
	hide_window = yes
	is_triggered_only = yes
	
	trigger = {
		any_country = {
			has_ascension_perk = ap_esap_repeat_tech
		}	
	}
	
	immediate = {
		every_country = {
			limit =  {
				has_ascension_perk = ap_esap_repeat_tech			
			}
			if = {
				limit = {	
					Or = {
						is_researching_technology = tech_repeatable_improved_tile_mineral_output
						is_researching_technology = tech_repeatable_improved_military_station_damage
						is_researching_technology = tech_repeatable_improved_military_station_health
						is_researching_technology = tech_repeatable_improved_armor_output
						is_researching_technology = tech_repeatable_weapon_type_explosive_damage
						is_researching_technology = tech_repeatable_weapon_type_explosive_fire_rate
						is_researching_technology = tech_repeatable_weapon_type_kinetic_damage
						is_researching_technology = tech_repeatable_weapon_type_kinetic_fire_rate
						is_researching_technology = tech_repeatable_weapon_type_strike_craft_fire_damage
						is_researching_technology = tech_repeatable_weapon_type_strike_craft_fire_rate
						is_researching_technology = tech_repeatable_reduced_building_time							
					}
				}
				if = {
					limit = {
						Not = {
							has_modifier = mod_ap_esap_repeat_tech_engi
						}
					}
					add_modifier = {
						modifier = "mod_ap_esap_repeat_tech_engi"
						days = -1
					}
				}				
				else = {
					if = {
						limit = {
							has_modifier = mod_ap_esap_repeat_tech_engi
						}
						remove_modifier = "mod_ap_esap_repeat_tech_engi"
					}				
				}
			}
			if = {
				limit = {	
					Or = {
						is_researching_technology = tech_repeatable_improved_tile_food_output
						is_researching_technology = tech_repeatable_improved_core_system_cap
						is_researching_technology = tech_repeatable_improved_edict_length
						is_researching_technology = tech_repeatable_improved_army_damage
						is_researching_technology = tech_repeatable_improved_army_health
						is_researching_technology = tech_repeatable_improved_leader_life_span					
					}
				}
				if = {
					limit = {
						Not = {
							has_modifier = mod_ap_esap_repeat_tech_soc
						}
					}
					add_modifier = {
						modifier = "mod_ap_esap_repeat_tech_soc"
						days = -1
					}
				}				
				else = {
					if = {
						limit = {
							has_modifier = mod_ap_esap_repeat_tech_soc
						}
						remove_modifier = "mod_ap_esap_repeat_tech_soc"
					}				
				}
			}
			if = {
				limit = {	
					Or = {								
						is_researching_technology = tech_repeatable_improved_tile_energy_output
						is_researching_technology = tech_repeatable_improved_shield_output
						is_researching_technology = tech_repeatable_weapon_type_energy_damage
						is_researching_technology = tech_repeatable_weapon_type_energy_fire_rate
						is_researching_technology = tech_repeatable_reduced_building_cost			
					}
				}
				if = {
					limit = {
						Not = {
							has_modifier = mod_ap_esap_repeat_tech_phys
						}
					}
					add_modifier = {
						modifier = "mod_ap_esap_repeat_tech_phys"
						days = -1
					}
				}				
				else = {
					if = {
						limit = {
							has_modifier = mod_ap_esap_repeat_tech_phys
						}
						remove_modifier = "mod_ap_esap_repeat_tech_phys"
					}				
				}
			}
		
		}
	}
}

# Gain influence and unity on planet conquest
planet_event = {
	id = esap.14
	hide_window = yes
	is_triggered_only = yes
	
	trigger = {
		owner = {
			has_ascension_perk = ap_esap_border_n_war
		}	
	}
	
	immediate = {
		every_owned_pop = {
			root.owner = {			
				add_monthly_resource_mult = {
					resource = unity
					value = 0.20
					min = 1
					max = 10
				}
				add_influence = 3
			}			
		}
	}
}

#Remove?
ship_event = {
	id = esap.15
	hide_window = yes
	is_triggered_only = yes

	immediate = {
	}
}

# Bonus while at war
event = {
	id = esap.17
	hide_window = yes
	is_triggered_only = yes
	
	trigger = {
		any_country = {
			has_ascension_perk = ap_esap_unity_n_war
		}	
	}
	
	immediate = {
		every_country = {
			limit = {
				has_ascension_perk = ap_esap_unity_n_war
			}
			if = {
				limit = {
					is_at_war = yes
				}
				if = {
					limit = {
						Not = {
							has_modifier = mod_esap_unity_n_war
						}
					}
					add_modifier = {
						modifier = "mod_esap_unity_n_war"
						days = -1
					}
				} 
				else = {
					if = {
						limit = {
								has_modifier = mod_esap_unity_n_war
						}
						remove_modifier = "mod_esap_unity_n_war"
					}
				}
			}
			
		}
	}
}

# Converst ethic of conquered pops
planet_event = {
	id = esap.18
	hide_window = yes
	is_triggered_only = yes
	
	trigger = {
		owner = {
			has_ascension_perk = ap_esap_unity_n_war
		}	
	}
	
	immediate = {
		every_owned_pop = {			
			random_list = {
				0 = {
					modifier = {
						factor = 1
						owner = {
							has_ethic = ethic_materialist
						}
					}
					modifier = {
						factor = 2
						owner = {
							has_ethic = ethic_fanatic_materialist
						}
					}
					pop_change_ethic = ethic_materialist
				}
				0 = {
					modifier = {
						factor = 1
						owner = {
							has_ethic = ethic_spiritualist
						}
					}
					modifier = {
						factor = 2
						owner = {
							has_ethic = ethic_fanatic_spiritualist
						}
					}
					pop_change_ethic = ethic_spiritualist
				}
				0 = {
					modifier = {
						factor = 1
						owner = {
							has_ethic = ethic_xenophobe
						}
					}
					modifier = {
						factor = 2
						owner = {
							has_ethic = ethic_fanatic_xenophobe
						}
					}
					pop_change_ethic = ethic_xenophobe
				}
				0 = {
					modifier = {
						factor = 1
						owner = {
							has_ethic = ethic_xenophile
						}
					}
					modifier = {
						factor = 2
						owner = {
							has_ethic = ethic_fanatic_xenophile
						}
					}
					pop_change_ethic = ethic_xenophile
				}
				0 = {
					modifier = {
						factor = 1
						owner = {
							has_ethic = ethic_militarist
						}
					}
					modifier = {
						factor = 2
						owner = {
							has_ethic = ethic_fanatic_militarist
						}
					}
					pop_change_ethic = ethic_militarist
				}
				0 = {
					modifier = {
						factor = 1
						owner = {
							has_ethic = ethic_pacifist
						}
					}
					modifier = {
						factor = 2
						owner = {
							has_ethic = ethic_fanatic_pacifist
						}
					}
					pop_change_ethic = ethic_pacifist
				}
				0 = {
					modifier = {
						factor = 1
						owner = {
							has_ethic = ethic_egalitarian
						}
					}
					modifier = {
						factor = 2
						owner = {
							has_ethic = ethic_fanatic_egalitarian
						}
					}
					pop_change_ethic = ethic_egalitarian
				}
				0 = {
					modifier = {
						factor = 1
						owner = {
							has_ethic = ethic_authoritarian
						}
					}
					modifier = {
						factor = 2
						owner = {
							has_ethic = ethic_fanatic_authoritarian
						}
					}
					pop_change_ethic = ethic_authoritarian
				}
			}
		}
	}
}	

# Resources to new planet
planet_event = {
	id = esap.19
	hide_window = yes
	is_triggered_only = yes
	
	trigger = {
		owner = {
			has_ascension_perk = ap_esap_nature_1
		}	
		Not = {
			has_planet_flag = esap_nature_1
		}
	}
	
	immediate = {
		#set_planet_flag = esap_nature_1
		#planet_event = {
		#	id = esap.20
		#	days = 360
		#}
		#planet_event = {
		#	id = esap.20
		#	days = 720
		#}
		#planet_event = {
		#	id = esap.20
		#	days = 1080
		#}
		#planet_event = {
		#	id = esap.20
		#	days = 1440
		#}
		#planet_event = {
		#	id = esap.20
		#	days = 1800
		#}
		#planet_event = {
		#	id = esap.20
		#	days = 2160
		#}
		#planet_event = {
		#	id = esap.20
		#	days = 2520
		#}
		#planet_event = {
		#	id = esap.20
		#	days = 2880
		#}
		#planet_event = {
		#	id = esap.20
		#	days = 3240
		#}
		#planet_event = {
		#	id = esap.20
		#	days = 3600
		#}
	}
}

# Resources to new planet
#planet_event = {
#	id = esap.20
#	hide_window = yes
#	is_triggered_only = yes
#	
#	trigger = {
#		Nor = {
#			has_modifier = mod_esap_mining_2
#			has_modifier = mod_esap_ecumenopolis
#		}
#	}	
#
#	immediate = {
#		every_tile = {		
#			random_list = {
#				80 = { }
#				20 = {
#					if = {
#						limit = {
#							has_resource = { type = minerals amount > 0 }
#						}
#						add_deposit = d_mineral_deposit
#					}
#					if = {
#						limit = {
#							has_resource = { type = energy amount > 0 }
#							Not = {
#								has_resource = { type = minerals amount > 0 }						
#							}
#						}
#						add_deposit = d_energy_deposit
#					}
#					if = {
#						limit = {
#							has_resource = { type = food amount > 0 }
#							Not = {
#								has_resource = { type = minerals amount > 0 }		
#								has_resource = { type = energy amount > 0 }				
#							}
#						}
#						add_deposit = d_farmland_deposit
#					}
#					if = {
#						limit = {
#							has_resource = { type = society_research amount > 0 }
#							Not = {
#								has_resource = { type = minerals amount > 0 }	
#								has_resource = { type = energy amount > 0 }		
#								has_resource = { type = food amount > 0 }					
#							}
#						}
#						add_deposit = d_society_deposit
#					}
#					if = {
#						limit = {
#							has_resource = { type = physics_research amount > 0 }
#							Not = {
#								has_resource = { type = minerals amount > 0 }		
#								has_resource = { type = energy amount > 0 }		
#								has_resource = { type = food amount > 0 }	
#								has_resource = { type = society_research amount > 0 }				
#							}
#						}
#						add_deposit = d_physics_deposit
#					}
#					if = {
#						limit = {
#							has_resource = { type = engineering_research amount > 0 }
#							Not = {
#								has_resource = { type = minerals amount > 0 }	
#								has_resource = { type = energy amount > 0 }	
#								has_resource = { type = food amount > 0 }	
#								has_resource = { type = society_research amount > 0 }	
#								has_resource = { type = physics_research amount > 0 }						
#							}
#						}
#						add_deposit = d_engineering_deposit
#					}				
#					if = {
#						limit = {
#							And = {
#								has_resource = { type = minerals amount < 1 }
#								has_resource = { type = energy amount < 1 }
#								has_resource = { type = food amount < 1 }
#								has_resource = { type = society_research amount < 1 }
#								has_resource = { type = physics_research amount < 1 }
#								has_resource = { type = engineering_research amount < 1 }										
#							}
#						}
#						random_list = {
#							1 = {add_deposit = d_mineral_deposit }
#							1 = {add_deposit = d_energy_deposit }
#							1 = {add_deposit = d_farmland_deposit }
#							1 = {add_deposit = d_society_deposit }
#							1 = {add_deposit = d_physics_deposit }
#							1 = {add_deposit = d_engineering_deposit }
#						}
#					}								
#				}			
#			}
#		}
#	}
#}
	
planet_event = {
	id = esap.22
	#hide_window = yes
	is_triggered_only = yes
	title = "esap.22.name"
	desc = "esap.22.desc"
	picture = GFX_evt_smugglers_in_bar
	
	option = {
		name = "esap.22.option1"
		trigger = {
			exists = event_target:esap_assylum_spec_1.species
		}
		random_tile = {
			limit = {
				has_pop = no
				has_blocker = no
			}
			create_pop = {
				species = event_target:esap_assylum_spec_1.species
				ethos = {
					ethic = "ethic_xenophile"
				}
			} 
			change_species = event_target:esap_assylum_spec_1.species
			hidden_effect = {
				pop = {
					pop_change_ethic = ethic_xenophile
				}
				pop = {
					pop_event = {
						id = esap_general.3
					}
				}
			}
		}		
		owner = {
			add_energy = -250
		}
	}
	
	option = {
		name = "esap.22.option1"
		trigger = {
			exists = event_target:esap_assylum_spec_2.species
		}
		random_tile = {
			limit = {
				has_pop = no
				has_blocker = no
			}
			create_pop = {
				species = event_target:esap_assylum_spec_2.species
				ethos = {
					ethic = "ethic_xenophile"
				}
			} 
			change_species = event_target:esap_assylum_spec_2.species
			hidden_effect = {
				pop = {
					pop_change_ethic = ethic_xenophile
				}
				pop = {
					pop_event = {
						id = esap_general.3
					}
				}
			}
		}		
		owner = {
			add_energy = -250
		}
	}
	
	option = {
		name = "esap.22.option1"	
		trigger = {
			exists = event_target:esap_assylum_spec_3.species
		}
		random_tile = {
			limit = {
				has_pop = no
				has_blocker = no
			}
			create_pop = {
				species = event_target:esap_assylum_spec_3.species
				ethos = {
					ethic = "ethic_xenophile"
				}
			} 
			change_species = event_target:esap_assylum_spec_3.species
			hidden_effect = {
				pop = {
					pop_change_ethic = ethic_xenophile
				}
			}
		}		
		owner = {
			add_energy = -250
		}
	}
	
	option = {
		name = "esap.22.option1"
		trigger = {
			exists = event_target:esap_assylum_spec_4.species
		}
		random_tile = {
			limit = {
				has_pop = no
				has_blocker = no
			}
			create_pop = {
				species = event_target:esap_assylum_spec_4
				ethos = {
					ethic = "ethic_xenophile"
				}
			} 
			change_species = event_target:esap_assylum_spec_4
			hidden_effect = {
				pop = {
					pop_change_ethic = ethic_xenophile
				}
				pop = {
					pop_event = {
						id = esap_general.3
					}
				}
			}
		}		
		owner = {
			add_energy = -250
		}
	}	
	
	option = {
		name = "esap.22.option1"
		trigger = {
			exists = event_target:esap_assylum_spec_5.species
		}
		
		random_tile = {
			limit = {
				has_pop = no
				has_blocker = no
			}
			create_pop = {
				species = event_target:esap_assylum_spec_5
				ethos = {
					ethic = "ethic_xenophile"
				}
			} 
			change_species = event_target:esap_assylum_spec_5
			hidden_effect = {
				pop = {
					pop_change_ethic = ethic_xenophile
				}
				pop = {
					pop_event = {
						id = esap_general.3
					}
				}
			}
		}		
		owner = {
			add_energy = -250
		}
	}	
	
	option = {
		name = "esap.22.option2"
	}
}
	
# Converts Pops when planet Conquered.	
planet_event = {
	id = esap.25
	hide_window = yes
	is_triggered_only = yes
	
	trigger = {
		owner = {
			has_ascension_perk = ap_esap_unity_n_war
		}
	}
	
	immediate = {	
		every_pop = {
			random_list = {
				1 = {
					owner = {
						switch = {
							trigger = has_ethic
							
							ethic_fanatic_authoritarian = { prev = { pop_change_ethic = ethic_fanatic_authoritarian } }
							ethic_authoritarian = { prev = { pop_change_ethic = ethic_authoritarian } }
							ethic_fanatic_egalitarian = { prev = { pop_change_ethic = ethic_fanatic_egalitarian } }
							ethic_egalitarian = { prev = { pop_change_ethic = ethic_egalitarian } }
							ethic_fanatic_xenophobe = { prev = { pop_change_ethic = ethic_fanatic_xenophobe } }
							ethic_xenophobe = { prev = { pop_change_ethic = ethic_xenophobe } }
							ethic_fanatic_xenophile = { prev = { pop_change_ethic = ethic_fanatic_xenophile } }
							ethic_xenophile = { prev = { pop_change_ethic = ethic_xenophile } }
							ethic_fanatic_militarist = { prev = { pop_change_ethic = ethic_fanatic_militarist } }
							ethic_militarist = { prev = { pop_change_ethic = ethic_militarist } }
							ethic_fanatic_pacifist = { prev = { pop_change_ethic = ethic_fanatic_pacifist } }
							ethic_pacifist = { prev = { pop_change_ethic = ethic_pacifist } }
							ethic_fanatic_spiritualist = { prev = { pop_change_ethic = ethic_fanatic_spiritualist } }
							ethic_spiritualist = { prev = { pop_change_ethic = ethic_spiritualist } }
							ethic_fanatic_materialist = { prev = { pop_change_ethic = ethic_fanatic_materialist } }
							ethic_materialist = { prev = { pop_change_ethic = ethic_materialist } }				
						}
					}
				}
				1 = {
					owner = {
						switch = {
							trigger = has_ethic
							
							ethic_xenophobe = { prev = { pop_change_ethic = ethic_xenophobe } }
							ethic_fanatic_xenophile = { prev = { pop_change_ethic = ethic_fanatic_xenophile } }
							ethic_fanatic_authoritarian = { prev = { pop_change_ethic = ethic_fanatic_authoritarian } }
							ethic_authoritarian = { prev = { pop_change_ethic = ethic_authoritarian } }
							ethic_fanatic_egalitarian = { prev = { pop_change_ethic = ethic_fanatic_egalitarian } }
							ethic_egalitarian = { prev = { pop_change_ethic = ethic_egalitarian } }
							ethic_materialist = { prev = { pop_change_ethic = ethic_materialist } }				
							ethic_militarist = { prev = { pop_change_ethic = ethic_militarist } }
							ethic_spiritualist = { prev = { pop_change_ethic = ethic_spiritualist } }
							ethic_fanatic_materialist = { prev = { pop_change_ethic = ethic_fanatic_materialist } }
							ethic_fanatic_spiritualist = { prev = { pop_change_ethic = ethic_fanatic_spiritualist } }
							ethic_fanatic_pacifist = { prev = { pop_change_ethic = ethic_fanatic_pacifist } }
							ethic_pacifist = { prev = { pop_change_ethic = ethic_pacifist } }
							ethic_fanatic_xenophobe = { prev = { pop_change_ethic = ethic_fanatic_xenophobe } }
							ethic_xenophile = { prev = { pop_change_ethic = ethic_xenophile } }
							ethic_fanatic_militarist = { prev = { pop_change_ethic = ethic_fanatic_militarist } }
						}
					}
				}
				1 = {
					owner = {
						switch = {
							trigger = has_ethic
							
							ethic_fanatic_materialist = { prev = { pop_change_ethic = ethic_fanatic_materialist } }
							ethic_materialist = { prev = { pop_change_ethic = ethic_materialist } }				
							ethic_fanatic_militarist = { prev = { pop_change_ethic = ethic_fanatic_militarist } }
							ethic_fanatic_spiritualist = { prev = { pop_change_ethic = ethic_fanatic_spiritualist } }
							ethic_spiritualist = { prev = { pop_change_ethic = ethic_spiritualist } }
							ethic_fanatic_authoritarian = { prev = { pop_change_ethic = ethic_fanatic_authoritarian } }
							ethic_fanatic_xenophobe = { prev = { pop_change_ethic = ethic_fanatic_xenophobe } }
							ethic_militarist = { prev = { pop_change_ethic = ethic_militarist } }
							ethic_fanatic_pacifist = { prev = { pop_change_ethic = ethic_fanatic_pacifist } }
							ethic_pacifist = { prev = { pop_change_ethic = ethic_pacifist } }
							ethic_fanatic_egalitarian = { prev = { pop_change_ethic = ethic_fanatic_egalitarian } }
							ethic_egalitarian = { prev = { pop_change_ethic = ethic_egalitarian } }
							ethic_fanatic_xenophile = { prev = { pop_change_ethic = ethic_fanatic_xenophile } }
							ethic_xenophobe = { prev = { pop_change_ethic = ethic_xenophobe } }
							ethic_authoritarian = { prev = { pop_change_ethic = ethic_authoritarian } }
							ethic_xenophile = { prev = { pop_change_ethic = ethic_xenophile } }
						}
					}
				}
				1 = {
					owner = {
						switch = {
							trigger = has_ethic
							
							ethic_fanatic_spiritualist = { prev = { pop_change_ethic = ethic_fanatic_spiritualist } }
							ethic_fanatic_egalitarian = { prev = { pop_change_ethic = ethic_fanatic_egalitarian } }
							ethic_egalitarian = { prev = { pop_change_ethic = ethic_egalitarian } }
							ethic_fanatic_xenophobe = { prev = { pop_change_ethic = ethic_fanatic_xenophobe } }
							ethic_spiritualist = { prev = { pop_change_ethic = ethic_spiritualist } }
							ethic_xenophobe = { prev = { pop_change_ethic = ethic_xenophobe } }
							ethic_fanatic_materialist = { prev = { pop_change_ethic = ethic_fanatic_materialist } }
							ethic_militarist = { prev = { pop_change_ethic = ethic_militarist } }
							ethic_fanatic_authoritarian = { prev = { pop_change_ethic = ethic_fanatic_authoritarian } }
							ethic_fanatic_xenophile = { prev = { pop_change_ethic = ethic_fanatic_xenophile } }
							ethic_xenophile = { prev = { pop_change_ethic = ethic_xenophile } }
							ethic_fanatic_militarist = { prev = { pop_change_ethic = ethic_fanatic_militarist } }
							ethic_fanatic_pacifist = { prev = { pop_change_ethic = ethic_fanatic_pacifist } }
							ethic_pacifist = { prev = { pop_change_ethic = ethic_pacifist } }
							ethic_authoritarian = { prev = { pop_change_ethic = ethic_authoritarian } }
							ethic_materialist = { prev = { pop_change_ethic = ethic_materialist } }				
						}
					}
				}
			}		
		}
	}
}
	
# Bonus while war leader
event = {
	id = esap.26
	hide_window = yes
	is_triggered_only = yes
	
	trigger = {
		any_country = {
			has_ascension_perk = ap_esap_border_n_war
		}	
	}
	
	immediate = {
		every_country = {
			limit = {
				has_ascension_perk = ap_esap_border_n_war
			}
			save_event_target_as = empwithperk
			if = {
				limit = {
					is_at_war = yes
					is_war_leader = yes
					any_war = {
						any_attacker = {
							is_same_empire = event_target:empwithperk
						}
					}
				}
				if = {
					limit = {
						Not = {
							has_modifier = mod_esap_border_n_war
						}
					}
					add_modifier = {
						modifier = "mod_esap_border_n_war"
						days = -1
					}
				}
				else = {
					if = {
						limit = {
							has_modifier = mod_esap_border_n_war							
						}
						remove_modifier = "mod_esap_border_n_war"
					}
				}
			}
		}
	}
}

#Bonus to Science Ship when built.
ship_event = {
	id = esap.27
	hide_window = yes
	is_triggered_only = yes
	
	trigger = {
		owner = {
			has_ascension_perk = ap_esap_materialist_1
		}	
		is_ship_size = science
	}
	
	immediate = {
		add_modifier = {
			modifier = "mod_esap_materialist"
			days = -1
		}
	}
}

# Upgrades Spaceport
event = {
	id = esap.28
	hide_window = yes
	is_triggered_only = yes
	
	trigger = {
		any_country = {
			has_ascension_perk = ap_esap_militarist_1
		}	
	}
	
	immediate = {
		every_country = {
			limit = {
				has_ascension_perk = ap_esap_militarist_1
			}	
			every_spaceport = {
				limit = {
					Or = {
						And = {
							num_free_spaceport_module_slots < 2
							num_spaceport_modules < 1
						}
						And = {
							num_free_spaceport_module_slots < 1
							num_spaceport_modules < 2
						}
					}
				}
				set_spaceport_level = 4
				if = {
					limit = {	
						Not = {
							has_spaceport_module = solar_panel_network 
						}
						can_build_spaceport_module = solar_panel_network 
						is_spaceport_module_slot_free = 2						
					}
					set_spaceport_module = { slot = 2 module = solar_panel_network }					
				}
				if = {
					limit = {	
						Not = {
							has_spaceport_module = crew_quarters
						}
						can_build_spaceport_module = crew_quarters 
						is_spaceport_module_slot_free = 3						
					}
					set_spaceport_module = { slot = 3 module = crew_quarters }					
				}
				if = {
					limit = {	
						Not = {
							has_spaceport_module = corvette_assembly_yards 
						}
						can_build_spaceport_module = corvette_assembly_yards  
						is_spaceport_module_slot_free = 4						
					}
					set_spaceport_module = { slot = 4 module = corvette_assembly_yards  }					
				}
			}
		}
	}
}
	
# Egalitarian, bonus while all pops under utopian living conditions
event = {
	id = esap.29
	hide_window = yes
	is_triggered_only = yes
	
	trigger = {
		any_country = {
			has_ascension_perk = ap_esap_egalitarian_1
		}	
	}
	
	immediate = {
		every_country = {
			limit = {
				has_ascension_perk = ap_esap_egalitarian_1
			}
			save_event_target_as = empwithperk
			if = {
				limit = {
					Not = {
						any_owned_pop_species = {
							Nor = {
								has_living_standard = {
									country = event_target:empwithperk
									type = living_standard_utopian
								}
								has_living_standard = {
									country = event_target:empwithperk
									type = living_standard_chemical_bliss
								}
								Or = {
									has_trait = trait_machine_unit
									has_trait = trait_mechanical
								}
							}
						}					
					}
				}
				if = {
					limit = {
						Not = {
							has_modifier = mod_esap_egalitarian_1
						}
					}
					add_modifier = {
						modifier = "mod_esap_egalitarian_1"
						days = -1
					}
				}
				else = {
					if = {
						limit = {
							has_modifier = mod_esap_egalitarian_1							
						}
						remove_modifier = "mod_esap_egalitarian_1"
					}
				}
			}
		}
	}
}
	
# Upates spaceport modules Spaceport
event = {
	id = esap.30
	hide_window = yes
	is_triggered_only = yes
	
	trigger = {
		any_country = {
			has_ascension_perk = ap_esap_militarist_1
		}	
	}
	
	immediate = {
		every_country = {
			limit = {
				has_ascension_perk = ap_esap_militarist_1
			}	
			every_spaceport = {
				limit = {
					has_spaceport_module = esap_assembly_yards
				}
				if = {
					limit = {
						has_spaceport_module = corvette_assembly_yards				
					}
					remove_spaceport_module = corvette_assembly_yards
				}
				if = {
					limit = {
						has_spaceport_module = destroyer_assembly_yards	
					}
					remove_spaceport_module = destroyer_assembly_yards
				}
				if = {
					limit = {
						has_spaceport_module = cruiser_assembly_yards		
					}
					remove_spaceport_module = cruiser_assembly_yards
				}
				if = {
					limit = {
						has_spaceport_module = 	battleship_assembly_yards				
					}
					remove_spaceport_module = battleship_assembly_yards
				}
			}
			every_spaceport = {
				limit = {
					has_spaceport_module = esap_logistics
				}
				if = {
					limit = {
						has_spaceport_module = engineering_bay				
					}
					remove_spaceport_module = engineering_bay
				}
				if = {
					limit = {
						has_spaceport_module = crew_quarters
					}
					remove_spaceport_module = crew_quarters
				}
			}
		}
	}
}
	
# Removes resources from ecumenopolises
event = {
	id = esap.31
	hide_window = yes
	is_triggered_only = yes
	
	trigger = {
		any_country = {
			has_ascension_perk = ap_esap_ecumenopolis 
		}	
	}
	
	immediate = {
		every_country = {
			limit = {
				has_ascension_perk = ap_esap_ecumenopolis 
			}	
			every_owned_planet = {
				limit = {
					has_modifier = mod_esap_ecumenopolis
				}
				every_tile = {
					clear_deposits = yes
				}
			}
		}
	}
}	

#The Endless Swarm, gain an additional ship
ship_event = {
	id = esap.32
	hide_window = yes
	is_triggered_only = yes

	trigger = {
		owner = {
			has_ascension_perk = ap_esap_hive_swarm_2
		}	
		is_ship_size = corvette
	}
	
	immediate = {
		fleet = {
			create_ship = {
				name = random
				design = random_existing_design
				random_existing_design = corvette
				prefix = yes
			}
		}
	}
}

#The Endless Swarm, create pop.
pop_event = {
	id = esap.33
	hide_window = yes
	is_triggered_only = yes

	trigger = {
		owner = {
			has_ascension_perk = ap_esap_hive_swarm_2
		}	
		is_robot_pop = no
	}
	
	immediate = {
		planet = {	
			create_pop = {
				species = root.species
			}
		}
	}
}

#Devouring, more resources from purging pops.
planet_event = {
	id = esap.35
	hide_window = yes
	is_triggered_only = yes
	
	trigger = {
		FROM = {
			has_valid_civic = civic_hive_devouring_swarm
			has_ascension_perk = ap_esap_hive_devouring
		}
		FROMFROM = {
			is_robot_pop = no
			NOT = {
				is_same_species = owner_species
			}
		}
		is_controlled_by = FROM
	}
	
	immediate = {
		FROM = {
			add_monthly_resource_mult = {
				resource = society_research
				value = 1.5
				min = 3
				max = 75
			}
			add_monthly_resource_mult = {
				resource = food
				value = 2
				min = 4
				max = 100
			}
		}
	}
}

# Give faction happiness
event = {
	id = esap.37
	hide_window = yes
	is_triggered_only = yes
	
	trigger = {
		any_country = {
			has_ascension_perk = ap_esap_not_unity
		}
	}
	
	immediate = {
		every_country = {
			limit = {
				has_ascension_perk =  ap_esap_not_unity			
			}
			every_pop_faction = {
				limit = {
					Not = {
						has_modifier = mod_esap_not_unity_faction
					}
				}
				add_modifier = {
					modifier = "mod_esap_not_unity_faction"
					days = -1
				}
			}
		}
	}
}

# Give penalty while at war
event = {
	id = esap.38
	hide_window = yes
	is_triggered_only = yes
	
	trigger = {
		any_country = {
			has_ascension_perk = ap_esap_not_border
		}
	}
	
	immediate = {
		every_country = {
			limit = {
				has_ascension_perk = ap_esap_not_border		
			}
			if = {
				limit = {
					has_country_flag = esap_addon_active
				}
				if = {
					limit = {
						has_modifier = mod_esap_not_border
					}
					remove_modifier = "mod_esap_not_border"
				}
			}
			if = {
				limit = {
					any_war = {
						any_attacker = {
							is_same_empire = prevprev
						}
					}
				}
				if = {
					limit = {
						Not = {
							has_modifier = mod_esap_not_border
						}
					}
					add_modifier = {
						modifier = "mod_esap_not_border"
						days = -1
					}
				}	
				else = {
					if = {
						limit = {
							has_modifier = mod_esap_not_border
						}
						remove_modifier = "mod_esap_not_border"
					}					
				}			
			}
		}
	}
}

# Give planet bonus depending on ethics variation.
event = {
	id = esap.39
	hide_window = yes
	is_triggered_only = yes
	
	trigger = {
		any_country = {
			has_ascension_perk = ap_esap_not_unity
		}
	}
	
	immediate = {
		every_country = {
			limit = {
				has_ascension_perk = ap_esap_not_unity
			}
			every_owned_planet = {
				switch = {
					trigger = has_modifier 
					
					mod_esap_not_unity_planet_0 = { remove_modifier = "mod_esap_not_unity_planet_0" }
					mod_esap_not_unity_planet_1 = { remove_modifier = "mod_esap_not_unity_planet_1" }
					mod_esap_not_unity_planet_2 = { remove_modifier = "mod_esap_not_unity_planet_2" }
					mod_esap_not_unity_planet_3 = { remove_modifier = "mod_esap_not_unity_planet_3" }
					mod_esap_not_unity_planet_4 = { remove_modifier = "mod_esap_not_unity_planet_4" }
					mod_esap_not_unity_planet_5 = { remove_modifier = "mod_esap_not_unity_planet_5" }
					mod_esap_not_unity_planet_6 = { remove_modifier = "mod_esap_not_unity_planet_6" }
					mod_esap_not_unity_planet_7 = { remove_modifier = "mod_esap_not_unity_planet_7" }
					mod_esap_not_unity_planet_8 = { remove_modifier = "mod_esap_not_unity_planet_8" }
				}
				add_modifier = {
					modifier = "mod_esap_not_unity_planet_0"
					days = -1
				}
				every_owned_pop = {
					switch = {
						trigger = pop_has_ethic
						
						ethic_spiritualist = {
							if = {
								limit = {
									planet = {
										Not = {
											has_planet_flag = esap_no_unity_got_spiritualist
										}
									}
								}
								planet = {
									set_timed_planet_flag = {
										flag = esap_no_unity_got_spiritualist
										days = 2
									}
								}
								planet = {
									planet_event = {
										id = esap.40
									}
								}
							}
						}
						ethic_materialist = {
							if = {
								limit = {
									planet = {
										Not = {
											has_planet_flag = esap_no_unity_got_materialist
										}
									}
								}
								planet = {
									set_timed_planet_flag = {
										flag = esap_no_unity_got_materialist
										days = 2
									}
								}
								planet = {
									planet_event = {
										id = esap.40
									}
								}
							}
						}
						ethic_xenophobe = {
							if = {
								limit = {
									planet = {
										Not = {
											has_planet_flag = esap_no_unity_got_xenophobe
										}
									}
								}
								planet = {
									set_timed_planet_flag = {
										flag = esap_no_unity_got_xenophobe
										days = 2
									}
								}
								planet = {
									planet_event = {
										id = esap.40
									}
								}
							}
						}
						ethic_xenophile = {
							if = {
								limit = {
									planet = {
										Not = {
											has_planet_flag = esap_no_unity_got_xenophile
										}
									}
								}
								planet = {
									set_timed_planet_flag = {
										flag = esap_no_unity_got_xenophile
										days = 2
									}
								}
								planet = {
									planet_event = {
										id = esap.40
									}
								}
							}
						}
						ethic_militarist = {
							if = {
								limit = {
									planet = {
										Not = {
											has_planet_flag = esap_no_unity_got_militarist
										}
									}
								}
								planet = {
									set_timed_planet_flag = {
										flag = esap_no_unity_got_militarist
										days = 2
									}
								}
								planet = {
									planet_event = {
										id = esap.40
									}
								}
							}
						}
						ethic_pacifist = {
							if = {
								limit = {
									planet = {
										Not = {
											has_planet_flag = esap_no_unity_got_pacifist
										}
									}
								}
								planet = {
									set_timed_planet_flag = {
										flag = esap_no_unity_got_pacifist
										days = 2
									}
								}
								planet = {
									planet_event = {
										id = esap.40
									}
								}
							}
						}
						ethic_authoritarian = {
							if = {
								limit = {
									planet = {
										Not = {
											has_planet_flag = esap_no_unity_got_authoritarian
										}
									}
								}
								planet = {
									set_timed_planet_flag = {
										flag = esap_no_unity_got_authoritarian
										days = 2
									}
								}
								planet = {
									planet_event = {
										id = esap.40
									}
								}
							}
						}
						ethic_egalitarian = {
							if = {
								limit = {
									planet = {
										Not = {
											has_planet_flag = esap_no_unity_got_egalitarian
										}
									}
								}
								planet = {
									set_timed_planet_flag = {
										flag = esap_no_unity_got_egalitarian
										days = 2
									}
								}
								planet = {
									planet_event = {
										id = esap.40
									}
								}
							}
						}					
					}					
				}
			}
		}
	}
}

# Updates modifier, called from previous event.
planet_event = {
	id = esap.40
	hide_window = yes
	is_triggered_only = yes
	
	immediate = {
		if = {
			limit = {
				has_modifier = mod_esap_not_unity_planet_7
			}
			remove_modifier = "mod_esap_not_unity_planet_7"
			add_modifier = {
				modifier = "mod_esap_not_unity_planet_8"
				days = -1
			}
		}
		if = {
			limit = {
				has_modifier = mod_esap_not_unity_planet_6
			}
			remove_modifier = "mod_esap_not_unity_planet_6"
			add_modifier = {
				modifier = "mod_esap_not_unity_planet_7"
				days = -1
			}
		}
		if = {
			limit = {
				has_modifier = mod_esap_not_unity_planet_5
			}
			remove_modifier = "mod_esap_not_unity_planet_5"
			add_modifier = {
				modifier = "mod_esap_not_unity_planet_6"
				days = -1
			}
		}
		if = {
			limit = {
				has_modifier = mod_esap_not_unity_planet_4
			}
			remove_modifier = "mod_esap_not_unity_planet_4"
			add_modifier = {
				modifier = "mod_esap_not_unity_planet_5"
				days = -1
			}
		}
		if = {
			limit = {
				has_modifier = mod_esap_not_unity_planet_3
			}
			remove_modifier = "mod_esap_not_unity_planet_3"
			add_modifier = {
				modifier = "mod_esap_not_unity_planet_4"
				days = -1
			}
		}
		if = {
			limit = {
				has_modifier = mod_esap_not_unity_planet_2
			}
			remove_modifier = "mod_esap_not_unity_planet_2"
			add_modifier = {
				modifier = "mod_esap_not_unity_planet_3"
				days = -1
			}
		}
		if = {
			limit = {
				has_modifier = mod_esap_not_unity_planet_1
			}
			remove_modifier = "mod_esap_not_unity_planet_1"
			add_modifier = {
				modifier = "mod_esap_not_unity_planet_2"
				days = -1
			}
		}
		if = {
			limit = {
				has_modifier = mod_esap_not_unity_planet_0
			}
			remove_modifier = "mod_esap_not_unity_planet_0"
			add_modifier = {
				modifier = "mod_esap_not_unity_planet_1"
				days = -1
			}
		}	
	}
}
	
#Purity government: purging pops yields unity
planet_event = {
	id = esap.42
	hide_window = yes
	is_triggered_only = yes
	
	trigger = {
		FROM = {
			has_valid_civic = civic_fanatic_purifiers
			has_ascension_perk = ap_esap_civic_fanatic_purifiers
		}
		FROMFROM = {
			is_robot_pop = no
			NOT = {
				is_same_species = owner_species
			}
		}
		is_controlled_by = FROM
	}
	
	immediate = {
		FROM = {
			add_monthly_resource_mult = {
				resource = unity
				value = 3
				min = 15
				max = 150
			}
		}
	}
}	
	
#Not energy, removes upkeep moodifiers
event = {
	id = esap.43
	hide_window = yes
	is_triggered_only = yes
	
	trigger = {
		any_country = {
			has_ascension_perk = ap_esap_not_energy
		}
	}
	
	immediate = {
		every_country = {
			limit = {
				has_ascension_perk = ap_esap_not_energy			
			}
			if = {
				limit = {
					has_tradition = tr_prosperity_administrative_operations
					Not = {
						has_modifier = mod_esap_not_energy_prosp_ship_comp
					}
				}
				add_modifier = {
					modifier = mod_esap_not_energy_prosp_ship_comp
					days = -1
				}
			}
			if = {
				limit = {
					has_tradition = tr_est_militarism_4
					Not = {
						has_modifier = mod_esap_not_energy_militarism_comp
					}
				}
				add_modifier = {
					modifier = mod_esap_not_energy_militarism_comp
					days = -1
				}
			}
			if = {
				limit = {
					has_ascension_perk = ap_esap_hive_swarm_1
					Not = {
						has_modifier = mod_esap_not_energy_swarm_comp
					}
				}
				add_modifier = {
					modifier = mod_esap_not_energy_swarm_comp
					days = -1
				}
			}
			every_owned_ship = {
				switch = {
					trigger = has_modifier
					
					mod_confederacy_3 = { remove_modifier = "mod_confederacy_3" }
					mod_mechanicum_1 = { remove_modifier = "mod_mechanicum_1" }
					mod_purity_2_ship = { remove_modifier = "mod_purity_2_ship" }
				}
				if = {
					limit = {
						has_modifier = mod_esap_materialist
						Not = {
							has_modifier = mod_esap_not_energy_materialist_comp
						}
					}
					add_modifier = {
						modifier = "mod_esap_not_energy_materialist_comp"
						days = -1
					}
				}
			}
		}
	}
}	

# Materialist 2, unity from researching techs
country_event = {
	id = esap.44
	hide_window = yes
	is_triggered_only = yes
	
	trigger = {
		has_ascension_perk = ap_esap_materialist_2
	}
	
	immediate = {
		add_monthly_resource_mult = {
			resource = unity
			value = 12
			min = 15
			max = 10000
		}
	}
}	

# Militaristt 2, penalty from not fighting.
event = {
	id = esap.45
	hide_window = yes
	is_triggered_only = yes
	
	trigger = {
		any_country = {
			has_ascension_perk = ap_esap_militarist_2
		}
	}
	
	immediate = {
		every_country = {
			limit = {
				has_ascension_perk = ap_esap_militarist_2		
			}
			if = {
				limit = {
					is_at_war = yes
				}
				if = {
					limit = {
						has_modifier = mod_esap_militarist_2_1
					}
					remove_modifier = "mod_esap_militarist_2_1"
				}
				if = {
					limit = {
						has_modifier = mod_esap_militarist_2_2
					}
					remove_modifier = "mod_esap_militarist_2_2"
				}
				if = {
					limit = {
						has_modifier = mod_esap_militarist_2_3
					}
					remove_modifier = "mod_esap_militarist_2_3"
					add_modifier = {
						modifier = "mod_esap_militarist_2_1"
						days = -1
					}
				}
				if = {
					limit = {
						has_modifier = mod_esap_militarist_2_4
					}
					remove_modifier = "mod_esap_militarist_2_4"
					add_modifier = {
						modifier = "mod_esap_militarist_2_2"
						days = -1
					}
				}
				if = {
					limit = {
						has_modifier = mod_esap_militarist_2_5
					}
					remove_modifier = "mod_esap_militarist_2_5"
					add_modifier = {
						modifier = "mod_esap_militarist_2_3"
						days = -1
					}
				}
				if = {
					limit = {
						has_modifier = mod_esap_militarist_2_6
					}
					remove_modifier = "mod_esap_militarist_2_6"
					add_modifier = {
						modifier = "mod_esap_militarist_2_4"
						days = -1
					}
				}
				if = {
					limit = {
						has_modifier = mod_esap_militarist_2_7
					}
					remove_modifier = "mod_esap_militarist_2_7"
					add_modifier = {
						modifier = "mod_esap_militarist_2_5"
						days = -1
					}
				}
				if = {
					limit = {
						has_modifier = mod_esap_militarist_2_8
					}
					remove_modifier = "mod_esap_militarist_2_8"
					add_modifier = {
						modifier = "mod_esap_militarist_2_6"
						days = -1
					}
				}
				if = {
					limit = {
						has_modifier = mod_esap_militarist_2_9
					}
					remove_modifier = "mod_esap_militarist_2_9"
					add_modifier = {
						modifier = "mod_esap_militarist_2_7"
						days = -1
					}
				}
				if = {
					limit = {
						has_modifier = mod_esap_militarist_2_10
					}
					remove_modifier = "mod_esap_militarist_2_10"
					add_modifier = {
						modifier = "mod_esap_militarist_2_8"
						days = -1
					}
				}
				else = {
					if = {
						limit = {
							has_modifier = mod_esap_militarist_2_9
						}
						remove_modifier = "mod_esap_militarist_2_9"
						add_modifier = {
							modifier = "mod_esap_militarist_2_10"
							days = -1
						}
					}
					if = {
						limit = {
							has_modifier = mod_esap_militarist_2_8
						}
						remove_modifier = "mod_esap_militarist_2_8"
						add_modifier = {
							modifier = "mod_esap_militarist_2_9"
							days = -1
						}
					}
					if = {
						limit = {
							has_modifier = mod_esap_militarist_2_7
						}
						remove_modifier = "mod_esap_militarist_2_7"
						add_modifier = {
							modifier = "mod_esap_militarist_2_8"
							days = -1
						}
					}
					if = {
						limit = {
							has_modifier = mod_esap_militarist_2_6
						}
						remove_modifier = "mod_esap_militarist_2_6"
						add_modifier = {
							modifier = "mod_esap_militarist_2_7"
							days = -1
						}
					}
					if = {
						limit = {
							has_modifier = mod_esap_militarist_2_5
						}
						remove_modifier = "mod_esap_militarist_2_5"
						add_modifier = {
							modifier = "mod_esap_militarist_2_6"
							days = -1
						}
					}
					if = {
						limit = {
							has_modifier = mod_esap_militarist_2_4
						}
						remove_modifier = "mod_esap_militarist_2_4"
						add_modifier = {
							modifier = "mod_esap_militarist_2_5"
							days = -1
						}
					}
					if = {
						limit = {
							has_modifier = mod_esap_militarist_2_3
						}
						remove_modifier = "mod_esap_militarist_2_3"
						add_modifier = {
							modifier = "mod_esap_militarist_2_4"
							days = -1
						}
					}
					if = {
						limit = {
							has_modifier = mod_esap_militarist_2_2
						}
						remove_modifier = "mod_esap_militarist_2_2"
						add_modifier = {
							modifier = "mod_esap_militarist_2_3"
							days = -1
						}
					}
					if = {
						limit = {
							has_modifier = mod_esap_militarist_2_1
						}
						remove_modifier = "mod_esap_militarist_2_1"
						add_modifier = {
							modifier = "mod_esap_militarist_2_2"
							days = -1
						}
					}	
					if = {
						limit = {
							Nor = {
								has_modifier = mod_esap_militarist_2_1
								has_modifier = mod_esap_militarist_2_2
								has_modifier = mod_esap_militarist_2_3
								has_modifier = mod_esap_militarist_2_4
								has_modifier = mod_esap_militarist_2_5
								has_modifier = mod_esap_militarist_2_6
								has_modifier = mod_esap_militarist_2_7
								has_modifier = mod_esap_militarist_2_8
								has_modifier = mod_esap_militarist_2_9
								has_modifier = mod_esap_militarist_2_10
							}
						}
						add_modifier = {
							modifier = "mod_esap_militarist_2_1"
							days = -1
						}
					}	
				}
			}
		}
	}
}	

#esap.46 unsued
		
planet_event = {
	id = esap.47
	#hide_window = yes
	is_triggered_only = yes
	title = "esap.47.name"
	desc = "esap.47.desc"
	picture = GFX_evt_smugglers_in_bar
	
	option = {
		name = "esap.47.option1"	
		trigger = {
			exists = event_target:esap_slave_raid_spec_1
		}
		random_tile = {
			limit = {
				has_pop = no
				has_blocker = no
			}
			create_pop = {
				species = event_target:esap_slave_raid_spec_1.species
			} 
			change_species = event_target:esap_slave_raid_spec_1.species
			hidden_effect = {
				pop = {
					pop_event = {
						id = esap_general.3
					}
				}				
			}
		}		
		owner = {
			add_energy = -50
		}
		hidden_effect = {
			owner = {
				if = {
					limit = {
						has_country_flag = esap_raided_for_slaves
					}
					remove_country_flag = esap_raided_for_slaves
				}
				set_timed_country_flag = { 
					flag =  esap_raided_for_slaves
					days = 5400
				}
			}
		}
		random_country = {
			limit = {
				is_neighbor_of = root.owner
				any_owned_pop = {
					is_same_species = event_target:esap_slave_raid_spec_1
				}
			}
			hidden_effect = {
				add_threat = { 
					who = root.owner
					amount = 0.15
				}
			}
			random_owned_planet = {
				limit = {
					any_owned_pop = {
						is_same_species = event_target:esap_slave_raid_spec_1
					}			
					Not = {
						has_modifier = "mod_esap_xenophobe_1"
					}				
				}
				add_modifier = {
					modifier = mod_esap_xenophobe_1
					days = 360
				}
			}
		}
	}

	option = {
		name = "esap.47.option1"
		trigger = {
			exists = event_target:esap_slave_raid_spec_2
		}
		
		random_tile = {
			limit = {
				has_pop = no
				has_blocker = no
			}
			create_pop = {
				species = event_target:esap_slave_raid_spec_2.species
			} 
			change_species = event_target:esap_slave_raid_spec_2.species
			hidden_effect = {
				pop = {
					pop_event = {
						id = esap_general.3
					}
				}				
			}
		}		
		owner = {
			add_energy = -50
		}
		hidden_effect = {
			owner = {
				if = {
					limit = {
						has_country_flag = esap_raided_for_slaves
					}
					remove_country_flag = esap_raided_for_slaves
				}
				set_timed_country_flag = { 
					flag =  esap_raided_for_slaves
					days = 5400
				}
			}
		}
		random_country = {
			limit = {
				is_neighbor_of = root.owner
				any_owned_pop = {
					is_same_species = event_target:esap_slave_raid_spec_2
				}
			}
			hidden_effect = {
				add_threat = { 
					who = root.owner
					amount = 0.15
				}
			}
			random_owned_planet = {
				limit = {
					any_owned_pop = {
						is_same_species = event_target:esap_slave_raid_spec_2
					}		
					Not = {
						has_modifier = "mod_esap_xenophobe_1"
					}					
				}
				add_modifier = {
					modifier = mod_esap_xenophobe_1
					days = 360
				}
			}
		}
	}
	
	option = {
		name = "esap.47.option1"
		trigger = {
			exists = event_target:esap_slave_raid_spec_3
		}
		random_tile = {
			limit = {
				has_pop = no
				has_blocker = no
			}
			create_pop = {
				species = event_target:esap_slave_raid_spec_3.species
			} 
			change_species = event_target:esap_slave_raid_spec_3.species
			hidden_effect = {
				pop = {
					pop_event = {
						id = esap_general.3
					}
				}				
			}
		}		
		owner = {
			add_energy = -50
		}
		hidden_effect = {
			owner = {
				if = {
					limit = {
						has_country_flag = esap_raided_for_slaves
					}
					remove_country_flag = esap_raided_for_slaves
				}
				set_timed_country_flag = { 
					flag =  esap_raided_for_slaves
					days = 5400
				}
			}
		}
		random_country = {
			limit = {
				is_neighbor_of = root.owner
				any_owned_pop = {
					is_same_species = event_target:esap_slave_raid_spec_3
				}
			}
			hidden_effect = {
				add_threat = { 
					who = root.owner
					amount = 0.15
				}
			}
			random_owned_planet = {
				limit = {
					any_owned_pop = {
						is_same_species = event_target:esap_slave_raid_spec_3
					}				
					Not = {
						has_modifier = "mod_esap_xenophobe_1"
					}			
				}
				add_modifier = {
					modifier = mod_esap_xenophobe_1
					days = 360
				}
			}
		}
	}
	
	option = {
		name = "esap.47.option1"
		trigger = {
			exists = event_target:esap_slave_raid_spec_4
		}
		random_tile = {
			limit = {
				has_pop = no
				has_blocker = no
			}
			create_pop = {
				species = event_target:esap_slave_raid_spec_4.species
			} 
			change_species = event_target:esap_slave_raid_spec_4.species
			hidden_effect = {
				pop = {
					pop_event = {
						id = esap_general.3
					}
				}				
			}
		}		
		owner = {
			add_energy = -50
		}
		hidden_effect = {
			owner = {
				if = {
					limit = {
						has_country_flag = esap_raided_for_slaves
					}
					remove_country_flag = esap_raided_for_slaves
				}
				set_timed_country_flag = { 
					flag =  esap_raided_for_slaves
					days = 5400
				}
			}
		}
		random_country = {
			limit = {
				is_neighbor_of = root.owner
				any_owned_pop = {
					is_same_species = event_target:esap_slave_raid_spec_4
				}
			}
			hidden_effect = {
				add_threat = { 
					who = root.owner
					amount = 0.15
				}
			}
			random_owned_planet = {
				limit = {
					any_owned_pop = {
						is_same_species = event_target:esap_slave_raid_spec_4
					}				
					Not = {
						has_modifier = "mod_esap_xenophobe_1"
					}			
				}
				add_modifier = {
					modifier = mod_esap_xenophobe_1
					days = 360
				}
			}
		}
	}
	
	option = {
		name = "esap.47.option1"
		trigger = {
			exists = event_target:esap_slave_raid_spec_5
		}
		random_tile = {
			limit = {
				has_pop = no
				has_blocker = no
			}
			create_pop = {
				species = event_target:esap_slave_raid_spec_5.species
			} 
			change_species = event_target:esap_slave_raid_spec_5.species
			hidden_effect = {
				pop = {
					pop_event = {
						id = esap_general.3
					}
				}				
			}
		}		
		owner = {
			add_energy = -50
		}
		hidden_effect = {
			owner = {
				if = {
					limit = {
						has_country_flag = esap_raided_for_slaves
					}
					remove_country_flag = esap_raided_for_slaves
				}
				set_timed_country_flag = { 
					flag =  esap_raided_for_slaves
					days = 5400
				}
			}
		}
		random_country = {
			limit = {
				is_neighbor_of = root.owner
				any_owned_pop = {
					is_same_species = event_target:esap_slave_raid_spec_5
				}
			}
			hidden_effect = {
				add_threat = { 
					who = root.owner
					amount = 0.15
				}
			}
			random_owned_planet = {
				limit = {
					any_owned_pop = {
						is_same_species = event_target:esap_slave_raid_spec_5
					}				
					Not = {
						has_modifier = "mod_esap_xenophobe_1"
					}
				}
				add_modifier = {
					modifier = "mod_esap_xenophobe_1"
					days = 360
				}
			}
		}
	}	
	
	option = {
		name = "esap.47.option2"
	}
}
		
event = {
	id = esap.48
	hide_window = yes
	is_triggered_only = yes
	
	trigger = {
		any_country = {
			has_ascension_perk = ap_esap_xenophile_2
		}			
	}
	
	immediate = {
		every_country = {
			limit = {
				has_country_flag = esap_receive_mod_xenophile_2
			}
			remove_country_flag = esap_receive_mod_xenophile_2
		}
		every_country = {
			limit = {
				any_country = {
					And = {
						has_ascension_perk = ap_esap_xenophile_2
						is_in_federation_with = prev
					}
				}
			}
			if = {
				limit = {
					Not = {
						has_country_flag = esap_receive_mod_xenophile_2
					}
				}
				set_country_flag = esap_receive_mod_xenophile_2
			}
		}
		every_country = {
			limit = {
				has_country_flag = esap_receive_mod_xenophile_2
			}
			every_subject = {
				limit = {
					Not = {
						has_country_flag = esap_receive_mod_xenophile_2
					}
				}
				set_country_flag = esap_receive_mod_xenophile_2			
			}
		}
		every_country = {
			limit = {
				has_country_flag = esap_receive_mod_xenophile_2
				Not = {
					has_modifier = mod_esap_xenophile_2
				}
			}
			add_modifier = {
				modifier = "mod_esap_xenophile_2"
				days = -1
			}
		}
		every_country = {
			limit = {
				has_modifier = mod_esap_xenophile_2
				Not = {
					has_country_flag = esap_receive_mod_xenophile_2
				}
			}
			remove_modifier = "mod_esap_xenophile_2"
		}
	}
}
		
#Habitat Expansion, adds the trait
planet_event = {
	id = esap.49
	hide_window = yes
	is_triggered_only = yes
	
	immediate = {	
		change_planet_size = 1
	}
}
		
planet_event = {
	id = esap.50
	hide_window = yes
	is_triggered_only = yes
	
	trigger = {
		NOT = {
			is_planet_class = pc_habitat 
		}		
		is_ringworld = no
		owner = {
			has_ascension_perk = ap_esap_smallworld
		}
	}
	
	immediate = {	
		while = { 
			limit = { 
				planet_size < 16
			} 
			change_planet_size = 1			
		}
	}
}
























