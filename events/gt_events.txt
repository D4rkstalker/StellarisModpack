namespace = gt_events

# generic add the modifier event!  
ship_event = {
    id = gt_events.1
    hide_window = yes
	
	is_triggered_only = yes
	
    trigger = {
		owner = { has_technology = GT_shipsize_mining_station_hull_add }
		OR = {
			is_ship_class = shipclass_mining_station
			is_ship_class = shipclass_research_station
		}
		NOT = { has_modifier = gt_shield_bonus_1 }
    }
    immediate = {
        add_modifier = { modifier = gt_shield_bonus_1 }
    }
}

# when system changes owner 1
# From = system
# FromFrom = country (new owner)
# This = country (previous owner)
event = {
    id = gt_events.2
    hide_window = yes
	
	is_triggered_only = yes
	
    trigger = {
		FromFrom = { has_technology = GT_shipsize_mining_station_hull_add }
    }
    immediate = {
		FromFrom = {
			every_owned_ship = {
				ship_event = { id = gt_events.1 }
			}
		}
    }
}

# when system changes owner 2
# From = system
# FromFrom = country (previous owner)
# This = country (new owner)
event = {
    id = gt_events.3
    hide_window = yes
	
	is_triggered_only = yes
	
    trigger = {
		This = { has_technology = GT_shipsize_mining_station_hull_add }
    }
    immediate = {
		This = {
			every_owned_ship = {
				ship_event = { id = gt_events.1 }
			}
		}
    }
}

# This = construction ship
# From = planet it is built on
# Fires when construction is complete,
# immediately before station is created
event = {
    id = gt_events.4
    hide_window = yes
	
	is_triggered_only = yes
	
    trigger = {
		this.owner = { has_technology = GT_shipsize_mining_station_hull_add }
    }
    immediate = {
		this.owner = {
			every_owned_ship = {
				ship_event = { id = gt_events.1 days = 1 }
			}
		}
    }
}