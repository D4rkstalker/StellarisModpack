namespace = realspace

### sets global flag “has_real_space_mod”
event = {
	id = realspace.1
	hide_window = yes
	is_triggered_only = yes
	
	immediate = {
		set_global_flag = "has_real_space_mod"
	}
}

#Set new star space
event = {
	id = realspace.200
	title = OK
	desc = OK
	hide_window = yes
	#is_triggered_only = yes
	fire_only_once = yes
	
	immediate = {
		every_planet = {
			limit = {
				is_planet_class = pc_w_azure_star
				solar_system = { NOT = { has_star_flag = w_azure } }
			}
			create_w_azure_space = yes
		}
		every_planet = {
			limit = {
				is_planet_class = pc_w_red_star
				solar_system = { NOT = { has_star_flag = w_red } }
			}
			create_w_red_space = yes
		}
		every_planet = {
			limit = {
				is_planet_class = pc_w_green_star
				solar_system = { NOT = { has_star_flag = w_green } }
			}
			create_w_green_space = yes
		}
		every_planet = {
			limit = {
				is_planet_class = pc_w_purple_star
				solar_system = { NOT = { has_star_flag = w_purple } }
			}
			create_w_purple_space = yes
		}
		every_planet = {
			limit = {
				is_planet_class = pc_nova_1
				solar_system = { NOT = { has_star_flag = nova_1 } }
			}
			create_nova_1_space = yes
			#create_nova_1_accreation = yes
		}
		every_planet = {
			limit = {
				is_planet_class = pc_nova_2
				solar_system = { NOT = { has_star_flag = nova_2 } }
			}
			create_nova_2_space = yes
			#create_nova_2_accreation = yes
		}
		every_planet = {
			limit = {
				is_planet_class = pc_collapsar
				solar_system = { NOT = { has_star_flag = collapsar } }
			}
			create_collapsar_space = yes
		}
		every_planet = {
			limit = {
				is_planet_class = pc_protostar
				solar_system = { NOT = { has_star_flag = protostar } }
			}
			create_protostar_space = yes
		}
		every_planet = {
			limit = {
				is_planet_class = pc_lbv_blue_star
				solar_system = { NOT = { has_star_flag = lbv_blue } }
			}
			create_lbv_blue_space = yes
		}
		every_planet = {
			limit = {
				is_planet_class = pc_lbv_green_star
				solar_system = { NOT = { has_star_flag = lbv_green } }
			}
			create_lbv_green_space = yes
		}
		every_planet = {
			limit = {
				is_planet_class = pc_lbv_red_star
				solar_system = { NOT = { has_star_flag = lbv_red } }
			}
			create_lbv_red_space = yes
		}
		every_planet = {
			limit = {
				is_planet_class = pc_tt_red_star
				solar_system = { NOT = { has_star_flag = tt_red } }
			}
			create_tt_red_space = yes
		}
		every_planet = {
			limit = {
				is_planet_class = pc_tt_orange_star
				solar_system = { NOT = { has_star_flag = tt_orange } }
			}
			create_tt_orange_space = yes
		}
		every_planet = {
			limit = {
				is_planet_class = pc_tt_white_star
				solar_system = { NOT = { has_star_flag = tt_white } }
			}
			create_tt_white_space = yes
		}
		every_planet = {
			limit = {
				is_planet_class = pc_ae_star
				solar_system = { NOT = { has_star_flag = herbig_star } }
			}
			create_ae_space = yes
		}
		every_planet = {
			limit = {
				is_planet_class = pc_d_star
				solar_system = { 
					NOT = { has_star_flag = p_purple }
					is_star_class = sc_p_purple
				}
			}
			create_p_purple_space = yes
		}
		every_planet = {
			limit = {
				is_planet_class = pc_d_star
				solar_system = { 
					NOT = { has_star_flag = p_green }
					is_star_class = sc_p_green
				}
			}
			create_p_green_space = yes
		}
		every_planet = {
			limit = {
				is_planet_class = pc_d_star
				solar_system = { 
					NOT = { has_star_flag = p_red }
					is_star_class = sc_p_red
				}
			}
			create_p_red_space = yes
		}
		every_planet = {
			limit = {
				is_planet_class = pc_magnetar
				solar_system = { NOT = { has_star_flag = magnetar } }
			}
			create_magnetar_space = yes
		}
	}
}

#Set nebula space
event = {
	id = realspace.201
	title = OK
	desc = OK
	hide_window = yes
	#is_triggered_only = yes
	fire_only_once = yes
	
	immediate = {
		every_planet = { 
			limit = { 
				AND = {
					is_primary_star = yes
					is_inside_nebula = yes
					solar_system = {
						NOT = {
							OR = {
								is_star_class = sc_p_purple
								is_star_class = sc_p_green
								is_star_class = sc_p_red
							}
						}
					}
					OR = {
						is_planet_class = pc_a_star
						is_planet_class = pc_a_super_star
						is_planet_class = pc_f_star
						is_planet_class = pc_d_star
						is_planet_class = pc_pulsar
						is_planet_class = pc_neutron_star
						is_planet_class = pc_magnetar
						is_planet_class = pc_ae_star
						is_planet_class = pc_tt_white_star
						is_planet_class = pc_microquasar_2
						is_planet_class = pc_w_azure_star
						is_planet_class = pc_w_green_star
					}
				}
			}
			create_blue_nebula_space = yes
		}
		every_planet = { 
			limit = { 
				AND = {
					is_primary_star = yes
					is_inside_nebula = yes
					OR = {
						is_planet_class = pc_g_star
						is_planet_class = pc_g_giant_star
						is_planet_class = pc_g_super_star
						is_planet_class = pc_k_star
						is_planet_class = pc_k_giant_star
						is_planet_class = pc_k_super_star
						is_planet_class = pc_s_giant_star
						is_planet_class = pc_tt_orange_star
						is_planet_class = pc_protostar
					}
				}
			}
			create_orange_nebula_space = yes
		}
		every_planet = { 
			limit = { 
				AND = {
					is_primary_star = yes
					is_inside_nebula = yes
					OR = {
						is_planet_class = pc_m_star
						is_planet_class = pc_m_giant_star
						is_planet_class = pc_m_super_star
						is_planet_class = pc_m_hyper_star
						is_planet_class = pc_c_giant_star
						is_planet_class = pc_l_star
						is_planet_class = pc_tt_red_star
						is_planet_class = pc_microquasar_1
						is_planet_class = pc_w_red_star
					}
				}
			}
			create_red_nebula_space = yes
		}
		every_planet = { 
			limit = { 
				AND = {
					is_primary_star = yes
					is_inside_nebula = yes
					OR = {
						is_planet_class = pc_o_star
						is_planet_class = pc_o_super_star
						is_planet_class = pc_o_hyper_star
						is_planet_class = pc_b_star
						is_planet_class = pc_b_super_star
						is_planet_class = pc_t_star
						is_planet_class = pc_y_star
						is_planet_class = pc_w_purple_star
					}
				}
			}
			create_purple_nebula_space = yes
		}
		every_planet = { 
			limit = { 
				AND = {
					is_primary_star = yes
					is_inside_nebula = yes
					OR = {
						is_planet_class = pc_black_hole
						is_planet_class = pc_collapsar
						solar_system = {
							OR = {
								is_star_class = sc_p_purple
								is_star_class = sc_p_green
								is_star_class = sc_p_red
							}
						}
						is_planet_class = pc_lbv_blue_star
						is_planet_class = pc_lbv_green_star
						is_planet_class = pc_lbv_red_star
					}
				}
			}
			random_list = {
				25 = { create_blue_nebula_space = yes }
				25 = { create_orange_nebula_space = yes }
				25 = { create_red_nebula_space = yes }
				25 = { create_purple_nebula_space = yes }
			}
		}
	}
}

#The creation of civilizations in the Sol cluster
event = {
	id = realspace.202
	title = OK
	desc = OK
	hide_window = yes
	#is_triggered_only = yes
	fire_only_once = yes
	
	immediate = {
		every_planet = {
			limit = {
				AND = {
					is_colonizable = yes
					solar_system = { has_star_flag = sol_sector }
				}
			}
			create_random_civilization = yes
		}
	}
}

#Rings
event = {
	id = realspace.203
	title = OK
	desc = OK
	hide_window = yes
	#is_triggered_only = yes
	fire_only_once = yes
	
	immediate = {
		# Sol System 
		every_planet = {
			limit = { has_planet_flag = saturn }
			save_event_target_as = planet_location_rings
			create_ambient_object = {
				type = gas_giant_rings_01_large
				location = this
			}
			last_created_ambient_object = {
				set_location = {
					target = event_target:planet_location_rings
				}
			}
			set_planet_flag = has_rings_01_large
		}
		every_planet = {
			limit = { has_planet_flag = uranus }
			save_event_target_as = planet_location_rings
			create_ambient_object = {
				type = uranus_rings
				location = this
			}
			last_created_ambient_object = {
				set_location = {
					target = event_target:planet_location_rings
				}
			}
			set_planet_flag = has_rings_02_low
		}
		# Gas Giant
		every_planet = {
			limit = {
				AND = {
					is_planet_class = "pc_gas_giant"
					has_ring = yes
					solar_system = { NOT = { has_star_flag = sol } }
					planet_size >= 25
				}
			}
			if = {
				limit = {
					is_hot_zone = no
				}
				set_gas_giant_big_rings = yes
			}
			else = {
				set_ring = no
			}
		}
		every_planet = {
			limit = {
				AND = {
					is_planet_class = "pc_gas_giant"
					has_ring = yes
					solar_system = { NOT = { has_star_flag = sol } }
					planet_size < 25
				}
			}
			if = {
				limit = {
					is_hot_zone = no
				}
				set_gas_giant_small_rings = yes
			}
			else = {
				set_ring = no
			}
		}
		# Small Planet
		every_planet = {
			limit = {
				AND = {
					NOT = { is_planet_class = "pc_gas_giant" }
					has_ring = yes
					planet_size >= 20
				}
			}
			if = {
				limit = {
					is_hot_zone = no
				}
				set_small_planet_big_rings = yes
			}
			else = {
				set_ring = no
			}
		}
		every_planet = {
			limit = {
				AND = {
					NOT = { is_planet_class = "pc_gas_giant" }
					has_ring = yes
					planet_size < 20
				}
			}
			if = {
				limit = {
					is_hot_zone = no
				}
				set_small_planet_thin_rings = yes
			}
			else = {
				set_ring = no
			}
		}
	}
}

#Menu
event = {
	id = realspace.204
	title = OK
	desc = OK
	hide_window = yes
	#is_triggered_only = yes
	fire_only_once = yes
	
	immediate = {
		every_country = {
			limit = { is_ai = no }
			country_event = { id = realspace.206 }
		}
	}
}

country_event = {
	id = realspace.206
	title = "realspace.206.name"
	desc = "realspace.206.desc"
	picture = GFX_evt_real_space_news
	show_sound = event_radio_chatter
	location = ROOT
	
	is_triggered_only = yes

	option = {
		name = "OK"
		country_event = { id = realspace.208 }
	}
}

#Menu
event = {
	id = realspace.207
	hide_window = yes
	
	is_triggered_only = yes
	
	trigger = {
		FROM = { is_megastructure_type = ring_world_2_intermediate }
	}
	
	immediate = {
		FROMFROM = {
			every_system_ambient_object = { 
				limit = { is_rs_rings_ambient_object = yes } 
				destroy_ambient_object = this
			}
		}
	}
}

country_event = {
	id = realspace.208
	title = "realspace.208.name"
	desc = "realspace.208.desc"
	picture = GFX_evt_real_space_news
	show_sound = event_radio_chatter
	location = ROOT
	
	is_triggered_only = yes

	option = {
		name = "realspace.208.no_changes"
		hidden_effect = {
			
		}
	}
	
	option = {
		name = "realspace.208.10_percent_reduction"
		hidden_effect = {
			every_planet = {
				limit = {
					is_colonizable = yes
					is_capital = no
					is_colony = no
					is_homeworld = no
					NOR = {
						is_ringworld = yes
						is_planet_class = pc_habitat
						is_planet_class = pc_relic
						has_planet_flag = colony_event
						has_planet_flag = ratling_planet
						has_planet_flag = prescripted_ideal
					}
				}
				random_list = {
					10 = {
						change_pc = rl_unhabitable_planets
						reset_planet = yes
					}
					90 = { 
						#Null
					}
				}
			}
		}
	}
	
	option = {
		name = "realspace.208.20_percent_reduction"
		hidden_effect = {
			every_planet = {
				limit = {
					is_colonizable = yes
					is_capital = no
					is_colony = no
					is_homeworld = no
					NOR = {
						is_ringworld = yes
						is_planet_class = pc_habitat
						is_planet_class = pc_relic
						has_planet_flag = colony_event
						has_planet_flag = ratling_planet
						has_planet_flag = prescripted_ideal
					}
				}
				random_list = {
					20 = {
						change_pc = rl_unhabitable_planets
						reset_planet = yes
					}
					80 = { 
						#Null
					}
				}
			}
		}
	}
	
	option = {
		name = "realspace.208.30_percent_reduction"
		hidden_effect = {
			every_planet = {
				limit = {
					is_colonizable = yes
					is_capital = no
					is_colony = no
					is_homeworld = no
					NOR = {
						is_ringworld = yes
						is_planet_class = pc_habitat
						is_planet_class = pc_relic
						has_planet_flag = colony_event
						has_planet_flag = ratling_planet
						has_planet_flag = prescripted_ideal
					}
				}
				random_list = {
					30 = {
						change_pc = rl_unhabitable_planets
						reset_planet = yes
					}
					70 = { 
						#Null
					}
				}
			}
		}
	}
	
	option = {
		name = "realspace.208.40_percent_reduction"
		hidden_effect = {
			every_planet = {
				limit = {
					is_colonizable = yes
					is_capital = no
					is_colony = no
					is_homeworld = no
					NOR = {
						is_ringworld = yes
						is_planet_class = pc_habitat
						is_planet_class = pc_relic
						has_planet_flag = colony_event
						has_planet_flag = ratling_planet
						has_planet_flag = prescripted_ideal
					}
				}
				random_list = {
					40 = {
						change_pc = rl_unhabitable_planets
						reset_planet = yes
					}
					60 = { 
						#Null
					}
				}
			}
		}
	}
	
	option = {
		name = "realspace.208.50_percent_reduction"
		hidden_effect = {
			every_planet = {
				limit = {
					is_colonizable = yes
					is_capital = no
					is_colony = no
					is_homeworld = no
					NOR = {
						is_ringworld = yes
						is_planet_class = pc_habitat
						is_planet_class = pc_relic
						has_planet_flag = colony_event
						has_planet_flag = ratling_planet
						has_planet_flag = prescripted_ideal
					}
				}
				random_list = {
					50 = {
						change_pc = rl_unhabitable_planets
						reset_planet = yes
					}
					50 = { 
						#Null
					}
				}
			}
		}
	}
	
	option = {
		name = "realspace.208.60_percent_reduction"
		hidden_effect = {
			every_planet = {
				limit = {
					is_colonizable = yes
					is_capital = no
					is_colony = no
					is_homeworld = no
					NOR = {
						is_ringworld = yes
						is_planet_class = pc_habitat
						is_planet_class = pc_relic
						has_planet_flag = colony_event
						has_planet_flag = ratling_planet
						has_planet_flag = prescripted_ideal
					}
				}
				random_list = {
					60 = {
						change_pc = rl_unhabitable_planets
						reset_planet = yes
					}
					40 = { 
						#Null
					}
				}
			}
		}
	}
	
	option = {
		name = "realspace.208.80_percent_reduction"
		hidden_effect = {
			every_planet = {
				limit = {
					is_colonizable = yes
					is_capital = no
					is_colony = no
					is_homeworld = no
					NOR = {
						is_ringworld = yes
						is_planet_class = pc_habitat
						is_planet_class = pc_relic
						has_planet_flag = colony_event
						has_planet_flag = ratling_planet
						has_planet_flag = prescripted_ideal
					}
				}
				random_list = {
					80 = {
						change_pc = rl_unhabitable_planets
						reset_planet = yes
					}
					20 = { 
						#Null
					}
				}
			}
		}
	}
}

