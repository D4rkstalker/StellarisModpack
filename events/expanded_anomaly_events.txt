############################
#
# Anomaly Events
#
############################

namespace = anomalymod

# ROOT = ship scope
# FROM = planet scope

##################################
# Simple Anomaly Events
# Reserved 1 - 19
##################################

# discover recovered tomb world
ship_event = {
	id = anomalymod.1
	title = "anomalymod.1.name"
	desc = "anomalymod.1.desc"
	picture = "GFX_evt_ship_in_orbit_3"
	show_sound = event_ship_bridge
	location = FROM
	
	is_triggered_only = yes
	
	trigger = {
		FROM = { has_modifier = recovered_tomb_world }
	}
			
	immediate = {
		FROM = {
			if = {
				limit = { NOT = { has_deposit = d_radioactive_wasteland } }
				add_deposit = d_radioactive_wasteland
			}
		}
		hidden_effect = {
			owner = {
				country_event = { id = story.5 days = 30 }
			}
		}
	}

	option = {
		name = REMARKABLE
		owner = {
			add_monthly_resource_mult = {
				resource = physics_research
				value = @tier1researchreward
				min = @tier1researchmin
				max = @tier1researchmax
			}
			add_monthly_resource_mult = {
				resource = society_research
				value = @tier1researchreward
				min = @tier1researchmin
				max = @tier1researchmax
			}
		}
	}
}

# Discover closed wormhole
ship_event = {
	id = anomalymod.2
	title = "anomalymod.2.name"
	desc = "anomalymod.2.desc"
	picture = GFX_evt_wormhole
	show_sound = event_radio_chatter
	location = FROM
	
	is_triggered_only = yes
	
	immediate = {
		owner = {
			add_seen_bypass_type = wormhole
		}
	}
			
	option = {
		name = REMARKABLE
		leader = {
			add_experience = 200
		}
		owner = {
			if = {
				limit = { NOT = { has_technology = tech_wormhole_stabilization } }
				add_research_option = tech_wormhole_stabilization
				add_tech_progress = {
					tech = tech_wormhole_stabilization
					progress = 0.15
				}
			}
			else = {
				add_monthly_resource_mult = {
					resource = physics_research
					value = @tier5researchreward
					min = @tier5researchmin
					max = @tier5researchmax
				}
			}
		}
	}
}

# Discover merged black hole
ship_event = {
	id = anomalymod.3
	title = "anomalymod.3.name"
	desc = "anomalymod.3.desc"
	picture = GFX_evt_black_hole
	location = FROM
	
	is_triggered_only = yes
	
	immediate = { from = { clear_deposits = yes } }
			
	option = {
		name = FASCINATING
		leader = {
			add_experience = 200
		}
		from = {
			set_deposit = d_physics_6
		}
	}
}

# Discover dark matter
ship_event = {
	id = anomalymod.4
	title = "anomalymod.4.name"
	desc = "anomalymod.4.desc"
	picture = GFX_evt_black_hole
	location = FROM
	
	is_triggered_only = yes
	
	immediate = { from = { clear_deposits = yes } }
			
	option = {
		name = FASCINATING
		leader = {
			add_experience = 200
		}
		from = {
			add_dark_matter = yes
		}
	}
}

# Robotic miners
ship_event = {
	id = anomalymod.5
	title = "anomalymod.5.name"
	desc = "anomalymod.5.desc"
	picture = GFX_evt_mining_operations
	show_sound = event_construction
	location = FROM
	
	is_triggered_only = yes
	
	immediate = {
		hidden_effect = {
			owner = {
				country_event = { id = story.5 days = 30 }
			}
		}
	}
			
	option = {
		name = anomalymod.5.a
		trigger = {
			owner = {
				OR = {
					has_authority = auth_hive_mind
					has_origin = origin_clones
				}
			}
		}
		owner = {
			if = {
				limit = { NOT = { has_technology = tech_powered_exoskeletons } }
				give_technology = { tech = tech_powered_exoskeletons }
			}
			else_if = {
				add_monthly_resource_mult = {
					resource = engineering_research
					value = @tier3researchreward
					min = @tier3researchmin
					max = @tier3researchmax
				}
			}
		}
	}
	option = {
		name = anomalymod.5.a
		trigger = {
			owner = { has_authority = auth_machine_intelligence }
		}
		owner = {
			if = {
				limit = {
					NOT = { has_technology = tech_robomodding_m }
				}
				add_research_option = tech_robomodding_m
				add_tech_progress = {
					tech = tech_robomodding_m
					progress = 0.25
				}
			}
			else = {
				add_monthly_resource_mult = {
					resource = engineering_research
					value = @tier3researchreward
					min = @tier3researchmin
					max = @tier3researchmax
				}
			}
		}
	}
	option = {
		name = anomalymod.5.a
		trigger = {
			owner = {
				NOR = {
					has_authority = auth_hive_mind
					has_authority = auth_machine_intelligence
					has_origin = origin_clones
				}
			}
		}
		owner = {
			if = {
				limit = { NOT = { has_technology = tech_powered_exoskeletons } }
				give_technology = { tech = tech_powered_exoskeletons }
			}
			else_if = {
				limit = {
					NOT = { has_technology = tech_robotic_workers }
				}
				add_research_option = tech_robotic_workers
				add_tech_progress = {
					tech = tech_robotic_workers
					progress = 0.33
				}
			}
			else_if = {
				limit = {
					NOT = { has_technology = tech_robomodding }
				}
				add_research_option = tech_robomodding
				add_tech_progress = {
					tech = tech_robomodding
					progress = 0.25
				}
			}
			else = {
				add_monthly_resource_mult = {
					resource = engineering_research
					value = @tier3researchreward
					min = @tier3researchmin
					max = @tier3researchmax
				}
			}
		}
	}
	option = {
		name = anomalymod.5.b
		trigger = {
			leader = {
				NOR = {
					has_trait = leader_trait_expertise_materials
					has_trait = leader_trait_expertise_industry
				}
			}
		}
		allow = {
			owner = {
				resource_stockpile_compare = { resource = minerals value >= 250 }
			}
		}
		owner = {
			add_resource = { minerals = -250 }
		}
		from = {
			hidden_effect = { clear_deposits = yes }
			add_deposit = d_minerals_3
			add_deposit = d_alloys_1
			create_mining_station = {
				owner = root.owner
			}
		}
	}
	option = {
		name = anomalymod.5.b
		trigger = {
			leader = {
				OR = {
					has_trait = leader_trait_expertise_materials
					has_trait = leader_trait_expertise_industry
				}
			}
		}
		allow = {
			owner = {
				resource_stockpile_compare = { resource = minerals value >= 250 }
			}
		}
		owner = {
			add_resource = { minerals = -250 }
		}
		from = {
			hidden_effect = { clear_deposits = yes }
			add_deposit = d_minerals_3
			add_deposit = d_alloys_1
			add_deposit = d_volatile_motes_1
			create_mining_station = {
				owner = root.owner
			}
		}
	}
}

# mineral processing facility
ship_event = {
	id = anomalymod.6
	title = "anomalymod.6.name"
	desc = "anomalymod.6.desc"
	picture = GFX_evt_mining_operations
	show_sound = event_construction
	location = FROM
	
	is_triggered_only = yes
	
	immediate = {
		hidden_effect = {
			owner = {
				country_event = { id = story.5 days = 30 }
			}
		}
	}
			
	option = {
		name = INTERESTING
		owner = {
			if = {
				limit = {
					NOT = { has_technology = tech_mineral_purification_1 }
				}
				add_research_option = tech_mineral_purification_1
				add_tech_progress = {
					tech = tech_mineral_purification_1
					progress = 0.25
				}
			}
			else_if = {
				limit = {
					has_technology = tech_mineral_purification_1
					NOT = { has_technology = tech_mineral_purification_2 }
				}
				add_research_option = tech_mineral_purification_2
				add_tech_progress = {
					tech = tech_mineral_purification_2
					progress = 0.15
				}
			}
			else = {
				add_monthly_resource_mult = {
					resource = engineering_research
					value = @tier3researchreward
					min = @tier3researchmin
					max = @tier3researchmax
				}
			}
			hidden_effect = {
				set_country_flag = lcluster_clue_mineral_processing
				pop_lcluster_event = yes
			}
		}
	}
}

# strategic resource
ship_event = {
	id = anomalymod.7
	title = "anomalymod.7.name"
	desc = "anomalymod.7.desc"
	picture = GFX_evt_mining_operations
	show_sound = event_construction
	location = FROM
	
	is_triggered_only = yes
	
	immediate = {
		from = {
			clear_deposits = yes
		}
		hidden_effect = { owner = { country_event = { id = story.5 days = 30 } } }
	}
			
	option = {
		name = INTRIGUING
		custom_tooltip = anomalymod.7.a.tooltip
		hidden_effect = {
			from = {
				random_list = {
					5 = { set_deposit = d_volatile_motes_1 }
					3 = { set_deposit = d_volatile_motes_2 }
					1 = { set_deposit = d_volatile_motes_3 }
					2 = { set_deposit = d_rare_crystals_1 }
					1 = { set_deposit = d_rare_crystals_2 }
				}
			}
			ship_event = { id = distar.305 days = 1 }
		}
	}
}

# Friendly Wildlife
ship_event = {
	id = anomalymod.8
	title = "anomalymod.8.name"
	desc = "anomalymod.8.desc"
	picture = GFX_evt_animal_wildlife
	show_sound = event_alien_nature
	location = FROM
	
	is_triggered_only = yes
	
	immediate = {
		owner = { set_country_flag = anomalymod_8_happened }
		hidden_effect = { owner = { country_event = { id = story.5 days = 30 } } }
		from = {
			every_deposit = {
				limit = { is_deposit_type = d_dangerous_wildlife_blocker }
				clear_blocker = yes
			}
			if = {
				limit = { has_modifier = dangerous_wildlife }
				remove_modifier = dangerous_wildlife
			}
			add_deposit = d_alien_pets_deposit
			add_deposit = d_alien_pets_deposit
		}
	}

	option = {
		name = INTERESTING
		custom_tooltip = anomalymod.8.a.tooltip
		owner = {
			add_monthly_resource_mult = {
				resource = society_research
				value = @tier3researchreward
				min = @tier3researchmin
				max = @tier3researchmax
			}
		}
	}
	option = {
		name = anomalymod.8.b
		trigger = {
			leader = {
				OR = {
					has_trait = leader_trait_spark_of_genius
					has_trait = leader_trait_maniacal
					has_trait = leader_trait_expertise_biology
					has_trait = leader_trait_meticulous
					has_trait = leader_trait_cataloger
					has_skill > 9
				}
			}
		}
		custom_tooltip = anomalymod.8.a.tooltip
		FROM = {
			enable_special_project = {
				name = "ENGINEERED_FRIENDLY_WILDLIFE_PROJECT"
				location = this
				owner = root.owner
			}
		}
	}
}

# Food rich planet
ship_event = {
	id = anomalymod.9
	title = "anomalymod.9.name"
	desc = "anomalymod.9.desc"
	picture = GFX_evt_tropical
	show_sound = event_alien_nature
	location = FROM
	
	is_triggered_only = yes
	
	immediate = {
		owner = { set_country_flag = anomalymod_9_happened }
		from = {
			add_modifier = {
				modifier = "lush_planet"
				days = -1
			}
			add_deposit = d_black_soil
			save_event_target_as = fungal_planet
		}
	}

	option = {
		name = EXCELLENT
		custom_tooltip = "anomaly.4095.a.tooltip"
		owner = {
			add_monthly_resource_mult = {
				resource = society_research
				value = @tier3researchreward
				min = @tier3researchmin
				max = @tier3researchmax
			}
		}
	}
	option = {
		name = anomalymod.9.b
		trigger = {
			leader = {
				OR = {
					has_trait = leader_trait_expertise_biology
					has_trait = leader_trait_expertise_new_worlds
					has_trait = leader_trait_meticulous
					has_trait = leader_trait_cataloger
					has_skill > 9
				}
			}
		}
		allow = {
			owner = { country_uses_food = yes }
		}
		custom_tooltip = "anomaly.4095.a.tooltip"
		owner = {
			capital_scope = {
				enable_special_project = {
					name = "FUNGAL_SAMPLE_PROJECT"
					location = this
					owner = root.owner
				}
			}
		}
	}
}

# Food poor planet
ship_event = {
	id = anomalymod.10
	title = "anomalymod.10.name"
	desc = "anomalymod.10.desc"
	picture = GFX_evt_desert
	show_sound = event_alien_nature
	location = FROM
	
	is_triggered_only = yes

	option = {
		name = UNFORTUNATE
		from = {
			add_modifier = {
				modifier = "bleak_planet"
				days = -1
			}
			hidden_effect = {
				random_deposit = {
					limit = {
						OR = {
							is_deposit_type = d_lichen_fields
							is_deposit_type = d_bountiful_plains
							is_deposit_type = d_rugged_woods
							is_deposit_type = d_green_hills
							is_deposit_type = d_forgiving_tundra
							is_deposit_type = d_boggy_fens
							is_deposit_type = d_nutritious_mudland
							is_deposit_type = d_great_river
							is_deposit_type = d_fungal_caves
							is_deposit_type = d_lush_jungle
							is_deposit_type = d_fertile_lands
						}
					}
					remove_deposit = yes
				}
			}
		}
		owner = {
			add_monthly_resource_mult = {
				resource = society_research
				value = @tier2researchreward
				min = @tier2researchmin
				max = @tier2researchmax
			}
		}
	}
}

# Sand Worms
ship_event = {
	id = anomalymod.11
	title = "anomalymod.11.name"
	desc = "anomalymod.11.desc"
	picture = GFX_evt_unspeakable_horror
	show_sound = event_alien_nature
	location = FROM
	
	is_triggered_only = yes

	option = {
		name = FASCINATING
		from = {
			add_deposit = d_dangerous_wildlife_blocker
			add_deposit = d_sand_worms
		}
	}
}

# Pitharan Moon
ship_event = {
	id = anomalymod.12
	title = "anomalymod.12.name"
	desc = "anomalymod.12.desc"
	picture = GFX_evt_ship_in_orbit
	show_sound = event_alien_nature
	location = FROM
	
	is_triggered_only = yes
	
	immediate = {
		from = {
			random_moon = {
				limit = { uninhabitable_regular_planet = yes }
				save_event_target_as = pitharan_moon
			}
		}
	}

	option = {
		name = EXCELLENT
		custom_tooltip = "anomaly.4095.a.tooltip"
		hidden_effect = {
			from = {
				add_modifier = {
					modifier = "lush_planet"
					days = -1
				}
				add_deposit = d_pitharan_fields
			}
		}
		event_target:pitharan_moon = {
			hidden_effect = {
				set_surveyed = { surveyed = yes surveyor = root.owner }
			}
			set_deposit = d_exotic_gases_3
		}
	}
}

# Przybylski's Star
ship_event = {
	id = anomalymod.13
	title = "anomalymod.13.name"
	desc = "anomalymod.13.desc"
	picture = GFX_evt_ship_in_orbit_2
	show_sound = event_ship_bridge
	location = FROM
	
	is_triggered_only = yes
	
	immediate = {
		leader = {
			save_event_target_as = przybylski_star_leader
		}
	}
	
	option = {
		name = PECULIAR
		FROM = {
			enable_special_project = {
				name = "PRZYBZLSKI_STAR_PROJECT"
				location = this
				owner = root.owner
			}
		}
	}
}
# Special Project Complete
ship_event = {
	id = anomalymod.14
	title = "PROJECT_COMPLETE"
	desc = "anomalymod.14.desc"
	picture = GFX_evt_ship_in_orbit_2
	show_sound = event_ship_bridge
	location = FROM
	
	is_triggered_only = yes
	
	immediate = {
		FROMFROM = {
			clear_deposits = yes
		}
	}
	
	option = {
		name = REMARKABLE
		custom_tooltip = anomalymod.14.a.tooltip
		hidden_effect = {
			FROMFROM = {
				set_deposit = d_physics_9
			}
		}
		owner = {
			if = {
				limit = { NOT = { has_technology = tech_physics_1 } }
				give_technology = { tech = tech_physics_1 }
			}
			else_if = {
				limit = { NOT = { has_technology = tech_physics_2 } }
				add_research_option = tech_physics_2
				add_tech_progress = {
					tech = tech_physics_2
					progress = 0.75
				}
			}
			else_if = {
				limit = { NOT = { has_technology = tech_physics_3 } }
				add_research_option = tech_physics_3
				add_tech_progress = {
					tech = tech_physics_3
					progress = 0.5
				}
			}
			else = {
				add_monthly_resource_mult = {
					resource = physics_research
					value = @tier5researchreward
					min = @tier5researchmin
					max = @tier5researchmax
				}
			}
		}
	}
}

# Dissected Gateway
ship_event = {
	id = anomalymod.15
	title = "anomalymod.15.name"
	desc = "anomalymod.15.desc"
	picture = GFX_evt_drifting_gateway
	show_sound = event_mystic_reveal
	location = FROM
	
	is_triggered_only = yes
	
	immediate = {
		FROM = {
			clear_deposits = yes
		}
		hidden_effect = {
			owner = {
				country_event = { id = story.5 days = 30 }
			}
		}
	}
	
	option = {
		name = FASCINATING
		FROM = {
			add_deposit = d_physics_5
			add_deposit = d_engineering_5
		}
		owner = {
			generate_lcluster_clue = yes
		}
	}
}

# Giant Pearls
ship_event = {
	id = anomalymod.16
	title = "anomalymod.16.name"
	desc = "anomalymod.16.desc"
	picture = GFX_evt_ocean
	show_sound = event_alien_nature
	location = FROM
	
	is_triggered_only = yes
	
	immediate = {
		hidden_effect = {
			owner = {
				country_event = { id = story.3 days = 30 }
			}
		}
	}
	
	option = {
		name = FASCINATING
		FROM = {
			add_deposit = d_giant_pearls
		}
	}
}

# Diamond Rings
ship_event = {
	id = anomalymod.17
	title = "anomalymod.17.name"
	desc = "anomalymod.17.desc"
	picture = GFX_evt_gas_giant
	show_sound = event_scanner
	location = FROM
	
	is_triggered_only = yes
	
	option = {
		name = EXCELLENT
		FROM = {
			add_modifier = { modifier = "diamond_rings" days = -1 }
			if = {
				limit = { from = { is_colonizable = no } }
				from = {
					hidden_effect = { clear_deposits = yes }
					add_deposit = d_energy_8
				}
			}
			else_if = {
				limit = {
					from = {
						OR = {
							is_cold = yes
							is_desert = yes
							is_arid = yes
						}
					}
				}
				from = {
					add_deposit = d_geothermal_vent
					add_deposit = d_geothermal_vent
				}
			}
			else_if = {
				limit = {
					from = {
						OR = {
							is_ocean = yes
							is_gaia = yes
						}
					}
				}
				from = {
					add_deposit = d_underwater_vent
					add_deposit = d_underwater_vent
				}
			}
			else = {
				from = {
					add_deposit = d_tempestous_mountain
					add_deposit = d_tempestous_mountain
				}
			}
		}
	}
}

# Strong Magnetic Field
ship_event = {
	id = anomalymod.18
	title = "anomaly.6004.name"
	desc = "anomaly.6004.desc"
	picture = GFX_evt_ship_in_orbit
	show_sound = event_sensor_ping
	location = FROM
	
	is_triggered_only = yes
	
	option = {
		name = EXCELLENT
		FROM = {
			add_modifier = { modifier = strong_magnetic_field days = -1 }
			if = {
				limit = {
					OR = {
						is_cold = yes
						is_continental = yes
						is_desert = yes
						is_arid = yes
						is_gaia = yes
					}
				}
				add_deposit = d_rich_mountain
			}
			else = {
				add_deposit = d_submerged_ore_veins
			}
		}
	}
}

# Ancient Failed Colony
ship_event = {
	id = anomalymod.19
	title = "anomaly.715.name"
	desc = "anomaly.715.desc"
	picture = "GFX_evt_relic_world_street"
	show_sound = event_wind_ruins
	location = FROM
	
	is_triggered_only = yes
	
	immediate = {
		hidden_effect = {
			owner = {
				country_event = { id = story.5 days = 30 }
			}
		}
	}
	
	option = {
		name = INTERESTING
		small_artifact_reward = yes
		owner = {
			add_monthly_resource_mult = {
				resource = society_research
				value = @tier1researchreward
				min = @tier1researchmin
				max = @tier1researchmax
			}
		}
		FROM = {
			add_deposit = d_abandoned_colony
		}
	}
}

##################################
# Vanilla Anomalies Follow-Up Events
# Reserved 20 - 199
##################################
##################################
# Lost Amoeba Events
# Reserved 20 - 29
##################################
# Amoeba dies, lose modifier
country_event = {
	id = anomalymod.20
	hide_window = yes
	
	is_triggered_only = yes

	trigger = {
		fromfrom.fleet = {
			OR = {
				has_fleet_flag = lost_amoeba_fleet@root
				has_fleet_flag = lost_amoeba_adult_fleet@root
				has_fleet_flag = lost_amoeba_centenarian_fleet@root
				has_fleet_flag = lost_amoeba_offspring_fleet@root
				has_fleet_flag = lost_amoeba_offspring_adult_fleet@root
				has_fleet_flag = lost_amoeba_offspring_centenarian_fleet@root
			}
		}
	}

	immediate = {
		change_variable = { which = amoebas_owned value = -1 }
		if = {
			limit = {
				NOT = {
					any_owned_fleet = {
						OR = {
							has_fleet_flag = lost_amoeba_fleet@root
							has_fleet_flag = lost_amoeba_adult_fleet@root
							has_fleet_flag = lost_amoeba_centenarian_fleet@root
							has_fleet_flag = lost_amoeba_offspring_fleet@root
							has_fleet_flag = lost_amoeba_offspring_adult_fleet@root
							has_fleet_flag = lost_amoeba_offspring_centenarian_fleet@root
						}
					}
				}
			}
			set_variable = { which = amoebas_owned value = 0 }
			remove_modifier = "adopted_amoeba"
		}
	}
}

##################################
# New Anomaly Follow-Up
# Reserved 30 - 39
##################################

# Friendly Wildlife: Special Project Complete
ship_event = {
	id = anomalymod.30
	title = "PROJECT_COMPLETE"
	desc = "anomalymod.30.desc"
	picture = GFX_evt_animal_wildlife
	show_sound = event_alien_nature
	location = FROMFROM
	
	is_triggered_only = yes
	
	immediate = {
		owner = { set_country_flag = unlock_friendly_wildlife_decision }
	}
	
	option = {
		name = EXCELLENT
		custom_tooltip = anomalymod.30.a.tooltip
	}
}

# Fungus: Special Project Complete
country_event = {
	id = anomalymod.31
	title = "PROJECT_COMPLETE"
	desc = "anomalymod.31.desc"
	picture = GFX_evt_animal_wildlife
	show_sound = event_alien_nature
	location = ROOT.capital_scope
	
	is_triggered_only = yes
	
	immediate = { set_country_flag = decision_mycorrhiza_unlocked }
	
	option = {
		name = EXCELLENT
		custom_tooltip = anomalymod.31.a.tooltip
	}
}

# Anomaly Failure: Pirates
country_event = {
	id = anomalymod.32
	title = "anomalymod.32.name"
	desc = anomalymod.32.desc
	picture = GFX_evt_mining_station
	show_sound = event_space_battle
	
	is_triggered_only = yes
	
	trigger = {
		FromFromFrom = {
			has_fleet_flag = failure_405_pirates
		}
	}
	
	option = {
		name = anomaly.5.a
		if = {
			limit = { is_gestalt = no }
			add_monthly_resource_mult = {
				resource = energy
				value = @tier1materialreward
				min = @tier1materialmin
				max = @tier1materialmax
			}
			add_monthly_resource_mult = {
				resource = consumer_goods
				value = @tier2materialreward
				min = @tier2materialmin
				max = @tier2materialmax
			}
		}
		else = {
			add_monthly_resource_mult = {
				resource = energy
				value = @tier3materialreward
				min = @tier3materialmin
				max = @tier3materialmax
			}
		}
		small_artifact_reward = yes
	}
}

# Anomaly Failure: Smugglers
country_event = {
	id = anomalymod.33
	title = "anomalymod.33.name"
	desc = anomalymod.33.desc
	picture = GFX_evt_small_space_battle
	show_sound = event_space_battle
	
	is_triggered_only = yes
	
	trigger = {
		FromFromFrom = {
			has_fleet_flag = failure_903_smugglers
		}
	}
	
	option = {
		name = anomaly.5.a
		if = {
			limit = { is_gestalt = no }
			add_monthly_resource_mult = {
				resource = consumer_goods
				value = @tier2materialreward
				min = @tier2materialmin
				max = @tier2materialmax
			}
		}
		else = {
			add_monthly_resource_mult = {
				resource = energy
				value = @tier2materialreward
				min = @tier2materialmin
				max = @tier2materialmax
			}
		}
		small_artifact_reward = yes
	}
}

fleet_event = {
	id = anomalymod.34
	hide_window = yes
	is_triggered_only = yes
	
	immediate = {
		if = {
			limit = { is_in_combat = yes }
			fleet_event = { id = anomalymod.34 days = 360 } # repeat
		}
		else = {
			create_ship = {
				name = "NAME_Hatchling"
				design = "NAME_Tiyanki_Hatchling"
			}
			create_ship = {
				name = "NAME_Hatchling"
				design = "NAME_Tiyanki_Hatchling"
			}
			create_ship = {
				name = "NAME_Hatchling"
				design = "NAME_Tiyanki_Hatchling"
			}
			create_ship = {
				name = "NAME_Hatchling"
				design = "NAME_Tiyanki_Hatchling"
			}
			owner = {
				set_faction_hostility = {
					set_hostile = no
					set_neutral = yes
					target = event_target:failure_1404_country
				}
			}
		}
	}
}

# Anomaly Failure: Dark Matter Smugglers
country_event = {
	id = anomalymod.35
	title = "anomalymod.33.name"
	desc = anomalymod.35.desc
	picture = GFX_evt_small_space_battle
	show_sound = event_space_battle
	
	is_triggered_only = yes
	
	trigger = {
		FromFromFrom = {
			has_fleet_flag = failure_2655_smugglers
		}
	}
	
	option = {
		name = anomalymod.35.a
		owner = {
			add_resource = { sr_dark_matter = 200 }
		}
	}
}

ship_event = {
	id = anomalymod.36
	title = "PROJECT_COMPLETE"
	desc = "anomalymod.36.desc"
	picture = GFX_evt_microscopic_life
	show_sound = event_alien_nature
	location = FROMFROM
	
	is_triggered_only = yes
	
	immediate = {
	}
	
	option = {
		name = EXCELLENT
		hidden_effect = {
			FROMFROM = {
				add_modifier = {
					modifier = "atmospheric_ecosystem"
					days = -1
				}
			}
		}
		FROMFROM = {
			set_deposit = d_society_2
		}
		leader = { add_experience = 50 }
	}
}

country_event = {
	id = anomalymod.37
	title = "PROJECT_FAILURE"
	desc = "anomalymod.37.desc"
	picture = GFX_evt_gas_giant
	show_sound = event_sensor_ping
	location = FROMFROM
	
	is_triggered_only = yes
	
	immediate = {
	}
	
	option = {
		name = UNFORTUNATE
		FROM = {
			leader = { add_experience = 100 }
		}
	}
}

ship_event = {
	id = anomalymod.38
	title = "PROJECT_COMPLETE"
	desc = {
		text = "anomalymod.38.desc"
		trigger = {
			owner = { NOT = { has_technology = tech_decryption_3 } }
		}
	}
	desc = {
		text = "anomalymod.38.desc_b"
		trigger = {
			owner = { has_technology = tech_decryption_3 }
		}
	}
	picture = GFX_evt_gas_giant_station
	show_sound = event_ship_bridge
	location = FROMFROM
	
	is_triggered_only = yes
	
	immediate = {
	}
	
	option = {
		name = INTRIGUING
		owner = {
			if = {
				limit = { NOT = { has_technology = tech_decryption_1 } }
				give_technology = { tech = tech_decryption_1 }
			}
			else_if = {
				limit = { NOT = { has_technology = tech_decryption_2 } }
				add_research_option = tech_decryption_2
				add_tech_progress = { tech = tech_decryption_2 progress = 0.66 }
			}
			else_if = {
				limit = { NOT = { has_technology = tech_decryption_3 } }
				add_research_option = tech_decryption_3
				add_tech_progress = { tech = tech_decryption_3 progress = 0.33 }
			}
			else = {
				add_monthly_resource_mult = {
					resource = physics_research
					value = @tier4researchreward
					min = @tier4researchmin
					max = @tier4researchmax
				}
			}
		}
	}
}

country_event = {
	id = anomalymod.39
	title = "PROJECT_FAILURE"
	desc = "anomalymod.39.desc"
	picture = GFX_evt_gas_giant_station
	show_sound = event_sensor_ping
	location = FROMFROM
	
	is_triggered_only = yes
	
	immediate = {
	}
	
	option = {
		name = UNFORTUNATE
		FROM = {
			leader = { add_experience = 100 }
		}
	}
}


##################################
# Brainslug Events
# Reserved 40 - 59
##################################

# Xenophobe brain slugs shift ethic
country_event = {
	id = anomalymod.40
	hide_window = yes
	
	is_triggered_only = yes
	
	trigger = {
		OR = {
			is_country_type = default
			is_country_type = ascended_empire
			is_country_type = lost_empire
		}
		is_xenophobe = no
		any_owned_pop = {
			has_trait = trait_brainslug
			has_ethic = ethic_xenophobe
		}
	}

	immediate = {
		random_owned_pop = {
			limit = {
				has_trait = trait_brainslug
				has_ethic = ethic_xenophobe
			}
			random_list = {
				1 = { pop_change_ethic = ethic_xenophile }
				1 = {
					pop_change_ethic = ethic_egalitarian
					modifier = {
						factor = 0
						exists = owner
						owner = { is_authoritarian = yes }
					}
				}
				1 = {
					pop_change_ethic = ethic_authoritarian
					modifier = {
						factor = 0
						exists = owner
						owner = { is_egalitarian = yes }
					}
				}
				1 = {
					pop_change_ethic = ethic_pacifist
					modifier = {
						factor = 0
						exists = owner
						owner = { is_militarist = yes }
					}
				}
				1 = {
					pop_change_ethic = ethic_militarist
					modifier = {
						factor = 0
						exists = owner
						owner = { is_pacifist = yes }
					}
				}
				1 = {
					pop_change_ethic = ethic_spiritualist
					modifier = {
						factor = 0
						exists = owner
						owner = { is_materialist = yes }
					}
				}
				1 = {
					pop_change_ethic = ethic_materialist
					modifier = {
						factor = 0
						exists = owner
						owner = { is_spiritualist = yes }
					}
				}
			}
		}
	}
}

country_event = {
	id = anomalymod.41
	title = "anomalymod.41.name"
	desc = "anomalymod.41.desc"
	picture = GFX_evt_hive_mind
	show_sound = event_alien_nature
	location = root
	
	is_triggered_only = yes
	
	trigger = {
		OR = {
			is_country_type = default
			is_country_type = ascended_empire
			is_country_type = lost_empire
		}
		has_country_flag = brainslug_offer_rejected
		NOT = { has_country_flag = brainslug_offer_rejected_again }
		any_owned_leader  = {
			leader_class = ruler
			has_trait = leader_trait_ruler_brainslug
		}
		is_xenophobe = no
	}

	option = {
		trigger = {
			NOR = {
				has_ethic = ethic_xenophobe
				has_ethic = ethic_fanatic_xenophobe
			}
		}
		name = "distar.172.a"
		while = {
			count = 3
			random_owned_pop = {
				limit = {
					is_sapient = yes
					species = {
						NOR = {
							has_trait = trait_cybernetic
							has_trait = trait_mechanical
							has_trait = trait_machine_unit
							is_species_class = ROBOT
						}
					}
				}
				modify_species = {
					species = this
					add_trait = trait_brainslug
					add_traits_at_start_of_list = yes
					hidden_effect = {
						set_citizenship_type = {
							country = root
							type = citizenship_full
							cooldown = no
						}
					}
				}
			}
		}
		hidden_effect = {
			remove_country_flag = brainslug_offer_rejected
			while = {
				count = 2
				random_owned_leader = {
					LIMIT = {
						leader_class = scientist
						species = {
							NOR = {
								has_trait = trait_cybernetic
								has_trait = trait_mechanical
								has_trait = trait_machine_unit
								is_species_class = ROBOT
							}
						}
					}
					add_trait = leader_trait_scientist_brainslug
				}
			}
			random_owned_leader = {
				LIMIT = {
					leader_class = governor
					species = {
						NOR = {
							has_trait = trait_cybernetic
							has_trait = trait_mechanical
							has_trait = trait_machine_unit
							is_species_class = ROBOT
						}
					}
				}
				add_trait = leader_trait_governor_brainslug
			}
			country_event = { id = distar.174 } #Pool leaders get trait
			country_event = { id = distar.175 } #Unrest is generated
		}
	}

	option = {
		trigger = {
			hidden_trigger = {
				has_ethic = ethic_xenophobe
				has_ethic = ethic_fanatic_xenophobe
				any_owned_pop = {
					NOR = {
						has_ethic = ethic_xenophobe
						has_ethic = ethic_fanatic_xenophobe
					}
				}
			}
		}
		name = "distar.172.a"
		while = {
			count = 3
			random_owned_pop = {
				LIMIT = {
					NOR = {
						has_ethic = ethic_xenophobe
						has_ethic = ethic_fanatic_xenophobe
					}
					species = {
						NOR = {
							has_trait = trait_cybernetic
							has_trait = trait_mechanical
							has_trait = trait_machine_unit
							is_species_class = ROBOT
						}
					}
					is_sapient = yes
				}
				modify_species = {
					species = this
					add_trait = trait_brainslug
					add_traits_at_start_of_list = yes
					hidden_effect = {
						set_citizenship_type = {
							country = root
							type = citizenship_full
							cooldown = no
						}
					}
				}
			}
		}
		hidden_effect = {
			remove_country_flag = brainslug_offer_rejected
			country_event = { id = distar.174 } #Pool leaders get trait
			country_event = { id = distar.175 } #Unrest is generated
		}
	}

	option = {
		name = "distar.172.b"
		custom_tooltip = "distar.172.b.tooltip"
		set_timed_country_flag = { flag = brainslug_offer_rejected_again days = 18000 } 
	}
}

# New pops get brain slugs
country_event = {
	id = anomalymod.42
	hide_window = yes
	
	is_triggered_only = yes
	
	trigger = {
		OR = {
			NOT = { has_global_flag = expanded_pops_active }
			NOT = { has_origin = origin_symbiote } # has their own event
		}
		any_owned_pop = { has_trait = trait_brainslug }
		any_owned_planet = {
			any_owned_pop = {
				is_enslaved = no
				is_being_purged = no
				NOR = {
					has_trait = trait_brainslug
					has_trait = trait_cybernetic
					has_trait = trait_mechanical
					has_trait = trait_machine_unit
					is_species_class = ROBOT
					has_ethic = ethic_xenophobe
				}
			}
		}
	}
	immediate = {
		random_list = {
			2 = {
			}
			1 = {
				random_owned_pop = {
					limit = {
						is_enslaved = no
						is_being_purged = no
						NOR = {
							has_trait = trait_brainslug
							has_trait = trait_cybernetic
							has_trait = trait_mechanical
							has_trait = trait_machine_unit
							is_species_class = ROBOT
							has_ethic = ethic_xenophobe
						}
					}
					weights = {
						base = 1
						modifier = {
							add = 10
							has_ethic = ethic_xenophile
						}
					}
					modify_species = {
						species = this
						add_trait = trait_brainslug
						add_traits_at_start_of_list = yes
					}
				}
			}
		}
	}
}

#Happy Little Brainslugs (colony event)
planet_event = {
	id = anomalymod.43
	title = anomalymod.43.name
	desc = anomalymod.43.desc
	picture = GFX_evt_alien_nature
	show_sound = event_alien_nature
	location = root
	
	is_triggered_only = yes
	
	trigger = {
		has_distar = yes
		NOT = { has_global_flag = distar_170_happened }
		exists = owner
		owner = { is_ai = no }
		OR = {
			has_deposit = d_dangerous_wildlife_blocker
			has_planet_modifier = pm_dangerous_wildlife
			has_planet_flag = has_dangerous_wildlife
		}
	}
	
	immediate = {
		set_global_flag = distar_170_happened
		owner = { set_country_flag = found_presapients }
		owner = { country_event = { id = tutorial.57 days = 5 } }
		owner = { country_event = { id = story.4 days = 30 } }
		add_deposit = d_abandoned_primitive_homesteads
	}
	
	option = {
		name = anomalymod.43.a
		enable_special_project = {
			name = "BROKEN_UNION_PROJECT"
			location = this
			owner = root.owner
		}
	}
	
	option = {
		name = NOTIME
	}
}


ship_event = {
	id = anomalymod.44
	title = "distar.170.name"
	desc = {
		trigger = {
			owner = {
				NOT = { has_authority = auth_machine_intelligence }
			}
		}
		text = "anomalymod.44.desc"
	}
	desc = {
		trigger = {
			owner = {
				has_authority = auth_machine_intelligence
			}
		}
		text = "anomalymod.44.desc.machi"
	}
	picture = GFX_evt_alien_nature
	show_sound = event_alien_nature
	location = FROMFROM
	
	is_triggered_only = yes
	
	immediate = {
		FROMFROM = {
			create_species = {
				name = random
				class = "PRE_REP"
				portrait = random
				traits = {
					trait = random_presapient_trait
				}
				homeworld = FROMFROM
				sapient = no
			}
			while = {
				count = 3
				create_pop = { species = last_created }
			}
		}
	}

	option = {
		trigger = {
			owner = {
				NOT = { has_authority = auth_machine_intelligence }
				any_owned_pop = {
					species = {
						NOR = {
							has_trait = trait_cybernetic
							has_trait = trait_mechanical
							has_trait = trait_machine_unit
						}
					}
				}
			}
		}
		name = "distar.170.a"
		FROMFROM = {
			enable_special_project = {
				name = "BRAINSLUG_PROJECT"
				location = this
				owner = root.owner
			}
		}
	}

	option = {
		trigger = {
			owner = {
				NOT = { has_authority = auth_machine_intelligence }
			}
		}
		name = NOTIME
		owner = {
			add_monthly_resource_mult = {
				resource = society_research
				value = @tier4researchreward
				min = @tier4researchmin
				max = @tier4researchmax
			}
		}
	}

	option = {
		trigger = {
			owner = {
				has_authority = auth_machine_intelligence
			}
		}
		name = "distar.170.machi"
		owner = {
			add_monthly_resource_mult = {
				resource = society_research
				value = @tier4researchreward
				min = @tier4researchmin
				max = @tier4researchmax
			}
		}
	}
	
	after = {
		small_artifact_reward = yes
	}
}

##################################
# Dead God Events
# Reserved 60 - 79
##################################

# Dead God
country_event = {
	id = anomalymod.60
	hide_window = yes
	
	mean_time_to_happen = {
		months = 12
	}
	
	trigger = {
		is_country_type = primitive
		NOT = { has_ethic = ethic_gestalt_consciousness }
		has_country_flag = dead_god_original_primitives
		capital_scope = {
			OR = {
				has_modifier = dead_god_planet_hidden
				has_modifier = dead_god_planet
			}
			NOT = { has_planet_flag = dead_god_has_awaken }
			has_observation_outpost = yes
			observation_outpost_owner = {
				NOT = { has_country_flag = dead_god_religion_reveal }
			}
			solar_system = {
				NOT = { has_star_flag = sol }
			}
		}
	}
	
	immediate = {
		capital_scope = {
			save_event_target_as = the_planet
			observation_outpost_owner = {
				set_country_flag = dead_god_religion_reveal				
				country_event = {
					id = anomalymod.61
				}
			}
		}
	}
}

#Notification
country_event = {
	id = anomalymod.61
	title = anomalymod.61.name
	desc = anomalymod.61.desc
	
	picture = GFX_evt_unspeakable_horror
	show_sound = event_mystic_reveal
	
	location = FROM
	
	is_triggered_only = yes
	
	option = {
		name = FASCINATING
		
		trigger = {
			NOR = {
				has_ethic = ethic_spiritualist
				has_ethic = ethic_fanatic_spiritualist
				has_ethic = ethic_materialist
				has_ethic = ethic_fanatic_materialist
			}
		}
	}
	
	option = {
		name = mem_primitives.401a.mat
		
		trigger = {
			OR = {
				has_ethic = ethic_materialist
				has_ethic = ethic_fanatic_materialist
			}
		}
	}
	
	option = {
		name = mem_primitives.401a.sp
		
		trigger = {
			OR = {
				has_ethic = ethic_spiritualist
				has_ethic = ethic_fanatic_spiritualist
			}
			NOR = {
				has_ethic = ethic_xenophile
				has_ethic = ethic_fanatic_xenophile
				has_ethic = ethic_xenophobe
				has_ethic = ethic_fanatic_xenophobe
			}
		}
	}
	
	option = {
		name = mem_primitives.401a.sphile
		
		trigger = {
			OR = {
				has_ethic = ethic_spiritualist
				has_ethic = ethic_fanatic_spiritualist
			}
			OR = {
				has_ethic = ethic_xenophile
				has_ethic = ethic_fanatic_xenophile
			}
		}
		
		add_monthly_resource_mult = {
			resource = unity
			value = @tier1researchreward
			min = @tier1researchmin
			max = @tier1researchmax 
		}
	}
	
	option = {
		name = mem_primitives.401a.sphobe
		
		trigger = {
			OR = {
				has_ethic = ethic_spiritualist
				has_ethic = ethic_fanatic_spiritualist
			}
			OR = {
				has_ethic = ethic_xenophobe
				has_ethic = ethic_fanatic_xenophobe
			}
		}
		
		add_monthly_resource_mult = {
			resource = unity
			value = @tier1researchreward
			min = @tier1researchmin
			max = @tier1researchmax 
		}
	}
	
	after = {
		add_monthly_resource_mult = {
			resource = society_research
			value = @tier1researchreward
			min = @tier1researchmin
			max = @tier1researchmax 
		}
	}
}

# Dead God Psyonics
country_event = {
	id = anomalymod.62
	hide_window = yes
	
	mean_time_to_happen = {
		months = 3000
		modifier = {
			factor = 0.5
			has_ethic = ethic_fanatic_spiritualist
		}
		modifier = {
			factor = 0.75
			has_ethic = ethic_spiritualist
		}
	}
	
	trigger = {
		NOT = { has_country_flag = dead_god_psionics }
		NOT = { has_ascension_perk = ap_mind_over_matter }
		NOT = { has_ethic = ethic_gestalt_consciousness }
		has_country_flag = dead_god_original_primitives
		has_country_flag = dead_god_is_real
		capital_scope = {
			OR = {
				has_modifier = dead_god_planet_hidden
				has_modifier = dead_god_planet
			}
			NOT = { has_planet_flag = dead_god_has_awaken }
		}
	}
	
	immediate = {
		set_country_flag = dead_god_psionics
		set_country_flag = acquired_tech # advanced to space age faster
		give_technology = { tech = tech_psionic_theory }
		give_technology = { tech = tech_telepathy }
		every_owned_pop = {
			limit = {
				is_same_species = root
				NOT = { species = { has_trait = trait_latent_psionic } }
			}
			modify_species = {
				species = this
				add_trait = trait_latent_psionic
			}
		}
		shift_ethic = ethic_spiritualist
		random_owned_pop = { pop_change_ethic = ethic_spiritualist }
		random_owned_pop = { pop_change_ethic = ethic_spiritualist }
		capital_scope = {
			save_event_target_as = the_planet
			observation_outpost_owner = {
				country_event = {
					id = anomalymod.63
				}
			}
		}
	}
}

#Notification
country_event = {
	id = anomalymod.63
	title = anomalymod.63.name
	desc = anomalymod.63.desc
	
	picture = GFX_evt_psionics
	show_sound = event_mind_over_matter
	
	location = FROM
	
	is_triggered_only = yes
	
	option = {
		name = REMARKABLE
		add_monthly_resource_mult = {
			resource = society_research
			value = @tier1researchreward
			min = @tier1researchmin
			max = @tier1researchmax 
		}
	}
}

# Dead God Full Psionic Awakening
country_event = {
	id = anomalymod.64
	hide_window = yes
	
	mean_time_to_happen = {
		months = 500
		modifier = {
			factor = 0.5
			has_ethic = ethic_fanatic_spiritualist
		}
	}
	
	trigger = {
		OR = {
			has_country_flag = dead_god_psionics
			has_ascension_perk = ap_mind_over_matter
		}
		NOT = { has_country_flag = dead_god_fully_psionic }
		NOT = { has_ascension_perk = ap_transcendence }
		NOT = { has_ethic = ethic_gestalt_consciousness }
		has_country_flag = dead_god_original_primitives
		has_country_flag = dead_god_is_real
		capital_scope = {
			OR = {
				has_modifier = dead_god_planet_hidden
				has_modifier = dead_god_planet
			}
			NOT = { has_planet_flag = dead_god_has_awaken }
		}
	}
	
	immediate = {
		set_country_flag = dead_god_psionics
		set_country_flag = dead_god_fully_psionic
		give_technology = { tech = tech_precognition_interface }
		every_owned_pop = {
			limit = {
				is_same_species = root
				has_trait = trait_latent_psionic
			}
			modify_species = {
				species = this
				remove_trait = trait_latent_psionic
				add_trait = trait_psionic
			}
			species = { save_event_target_as = psionic_species }
		}
		change_dominant_species = { species = event_target:psionic_species change_all = yes }
		random_owned_pop = { pop_change_ethic = ethic_spiritualist }
		every_country = {
			limit = {
				OR = {
					is_country_type = primitive
					is_country_type = default
					is_country_type = ascended_empire
					is_country_type = lost_empire
					is_country_type = fallen_empire
					is_country_type = awakened_fallen_empire
				}
			}
			every_owned_leader = {
				limit = {
					is_same_species = root
					#species = { 
					#	has_trait = trait_psionic
					#	is_same_value = event_target:psionic_species
					#}
					NOR = {
						has_trait =	leader_trait_admiral_psionic
						has_trait =	leader_trait_general_psionic
						has_trait =	leader_trait_governor_psionic
						has_trait =	leader_trait_scientist_psionic
						has_trait =	leader_trait_ruler_psionic
					}
				}
				if = {
					limit = { leader_class = admiral }
					add_trait = leader_trait_admiral_psionic
					add_ruler_trait = leader_trait_ruler_psionic
				}
				if = {
					limit = { leader_class = general }
					add_trait = leader_trait_general_psionic
					add_ruler_trait = leader_trait_ruler_psionic
				}
				if = {
					limit = { leader_class = governor }
					add_trait = leader_trait_governor_psionic
					add_ruler_trait = leader_trait_ruler_psionic
				}
				if = {
					limit = { leader_class = scientist }
					add_trait = leader_trait_scientist_psionic
					add_ruler_trait = leader_trait_ruler_psionic
				}
				if = {
					limit = { leader_class = ruler }
					add_trait = leader_trait_ruler_psionic
					add_ruler_trait = leader_trait_ruler_psionic
				}
			}
			every_pool_leader = {
				limit = {
					is_same_species = root
					#species = { 
					#	has_trait = trait_psionic
					#	is_same_value = event_target:psionic_species
					#}
					NOR = {
						has_trait = leader_trait_admiral_psionic
						has_trait = leader_trait_general_psionic
						has_trait = leader_trait_governor_psionic
						has_trait = leader_trait_scientist_psionic
						has_trait = leader_trait_ruler_psionic
					}
				}
				if = {
					limit = { leader_class = admiral }
					add_trait = leader_trait_admiral_psionic
					add_ruler_trait = leader_trait_ruler_psionic
				}
				if = {
					limit = { leader_class = general }
					add_trait = leader_trait_general_psionic
					add_ruler_trait = leader_trait_ruler_psionic
				}
				if = {
					limit = { leader_class = governor }
					add_trait = leader_trait_governor_psionic
					add_ruler_trait = leader_trait_ruler_psionic
				}
				if = {
					limit = { leader_class = scientist }
					add_trait = leader_trait_scientist_psionic
					add_ruler_trait = leader_trait_ruler_psionic
				}
				if = {
					limit = { leader_class = ruler }
					add_trait = leader_trait_ruler_psionic
					add_ruler_trait = leader_trait_ruler_psionic
				}
			}
		}
		every_country = {
			limit = { 
				is_ai = no
				has_communications = root
				NOT = { is_same_value = root }
			}
			country_event = { id = utopia.2652 }
		}
		country_event = { id = utopia.2655 days = 30 random = 20 }
		capital_scope = {
			save_event_target_as = the_planet
			observation_outpost_owner = {
				country_event = {
					id = anomalymod.65
				}
			}
		}
	}
}

#Notification
country_event = {
	id = anomalymod.65
	title = anomalymod.65.name
	desc = anomalymod.65.desc
	
	picture = GFX_evt_psionics
	show_sound = event_mind_over_matter
	
	location = FROM
	
	is_triggered_only = yes
	
	option = {
		name = REMARKABLE
		add_monthly_resource_mult = {
			resource = society_research
			value = @tier1researchreward
			min = @tier1researchmin
			max = @tier1researchmax 
		}
	}
}

# Dead God Moon Landing
country_event = {
	id = anomalymod.66
	hide_window = yes
	
	mean_time_to_happen = {
		months = 300
		modifier = {
			factor = 0.5
			has_country_flag = acquired_tech
		}
	}
	
	trigger = {
		NOT = { has_country_flag = dead_god_moon_landing }
		NOT = { has_ethic = ethic_gestalt_consciousness }
		has_country_flag = dead_god_original_primitives
		has_country_flag = early_space_age
		capital_scope = {
			has_moon = yes # make sure it hasn't been blown up or something.
			OR = {
				has_modifier = dead_god_planet_hidden
				has_modifier = dead_god_planet
			}
			NOT = { has_planet_flag = dead_god_has_awaken }
		}
	}
	
	immediate = {
		set_country_flag = dead_god_moon_landing
		random_list = {
			1 = {
				modifier = {
					factor = 0
					NOT = { has_country_flag = dead_god_is_real }
				}
				# psionics
				set_country_flag = dead_god_moon_landing_psionic
				if = {
					limit = {
						OR = {
							has_country_flag = dead_god_psionics
							has_ascension_perk = ap_mind_over_matter
						}
						NOR = {
							has_country_flag = dead_god_fully_psionic
							has_ascension_perk = ap_transcendence
						}
					}
					country_event = { id = anomalymod.64 days = 30 random = 30 }
				}
				else_if = {
					limit = {
						NOR = {
							has_country_flag = dead_god_fully_psionic
							has_ascension_perk = ap_transcendence
						}
					}
					country_event = { id = anomalymod.62 days = 30 random = 30 }
				}
			}
			1 = {
				modifier = {
					factor = 0
					has_country_flag = dead_god_is_real
				}
				# materialist
				set_country_flag = dead_god_moon_landing_materialist
				random_list = {
					1 = {
						shift_ethic = ethic_materialist
						random_owned_pop = { pop_change_ethic = ethic_materialist }
						random_owned_pop = { pop_change_ethic = ethic_materialist }
					}
					1 = {
					}
				}
				random_owned_pop = { pop_change_ethic = ethic_materialist }
				random_owned_pop = { pop_change_ethic = ethic_materialist }
			}
			2 = {
				# normal
				set_country_flag = dead_god_moon_landing_normal
			}
		}
		capital_scope = {
			save_event_target_as = the_planet
			observation_outpost_owner = {
				country_event = {
					id = anomalymod.67
				}
			}
		}
	}
}

#Notification
country_event = {
	id = anomalymod.67
	title = anomalymod.67.name
	desc = {
		trigger = {
			from = { has_country_flag = dead_god_moon_landing_psionic }
		}
		text = anomalymod.67.psionic.desc
	}
	desc = {
		trigger = {
			from = { has_country_flag = dead_god_moon_landing_materialist }
		}
		text = anomalymod.67.materialist.desc
	}
	desc = {
		trigger = {
			from = { has_country_flag = dead_god_moon_landing_normal }
		}
		text = anomalymod.67.default.desc
	}
	
	
	picture = GFX_evt_psionics
	show_sound = event_mind_over_matter
	
	location = FROM
	
	is_triggered_only = yes
	
	option = {
		name = FASCINATING
		add_monthly_resource_mult = {
			resource = society_research
			value = @tier1researchreward
			min = @tier1researchmin
			max = @tier1researchmax 
		}
	}
}

# Dead god lashes out psionically at invaders
planet_event = {
	id = anomalymod.68
	title = "anomalymod.68.name"
	desc = "anomalymod.68.desc"
	picture = GFX_evt_unspeakable_horror
	show_sound = event_mystic_reveal
	location = root
	
	pre_triggers = {
		has_owner = yes
		has_ground_combat = no
		is_occupied_flag = no
	}
	
	trigger = {
		has_moon = yes # make sure it hasn't been blown up or something.
		OR = {
			has_modifier = dead_god_planet_hidden
			has_modifier = dead_god_planet
		}
		has_planet_flag = dead_god_is_real_planet
		NOT = { has_planet_flag = dead_god_has_awaken }
		NOT = { has_planet_flag = dead_god_angry }
		exists = owner
		owner = {
			NOT = { has_country_flag = dead_god_original_primitives }
		}
		any_owned_pop = {
			species = { has_species_flag = is_worshipper_species }
			OR = {
				is_enslaved = yes
				is_being_purged = yes
			}
		}
	}
	
	mean_time_to_happen = {
		months = 600
		modifier = {
			factor = 0.01
			any_owned_pop = {
				is_being_purged = yes
			}
		}
	}
	
	immediate = {
		if = {
			limit = {
				any_owned_pop = {
					species = { has_species_flag = is_worshipper_species }
					NOT = { pop_has_trait = trait_psionic }
				}
			}
			# natives awake psionically
			planet_event = { id = anomalymod.69 days = 30 random = 90 }
		}
		# Dead God awakens
		planet_event = { id = anomalymod.70 days = 180 random = 180 }
		set_planet_flag = dead_god_angry
	}
	
	option = {
		name = anomalymod.68.a
		if = {
			limit = {
				any_owned_pop = {
					NOT = {
						species = { has_species_flag = is_worshipper_species }
					}
				}
			}
			random_owned_pop = {
				limit = {
					NOT = {
						species = { has_species_flag = is_worshipper_species }
					}
				}
				kill_pop = yes
			}
			random_owned_pop = {
				limit = {
					NOT = {
						species = { has_species_flag = is_worshipper_species }
					}
				}
				kill_pop = yes
			}
		}
		else = {
			sector = {
				leader = { kill_leader = { show_notification = no } }
			}
		}
	}
}

planet_event = {
	id = anomalymod.69
	title = "anomalymod.69.name"
	desc = "anomalymod.69.desc"
	picture = "GFX_evt_psionic_battle"
	show_sound = event_mind_over_matter
	
	is_triggered_only = yes
	
	trigger = {
		exists = owner
		owner = {
			any_owned_pop = {
				species = { has_species_flag = is_worshipper_species }
				OR = {
					is_enslaved = yes
					is_being_purged = yes
				}
			}
		}
	}
	
	immediate = {
		owner = {
			every_owned_pop = {
				limit = {
					species = { has_species_flag = is_worshipper_species }
				}
				modify_species = {
					species = this
					remove_trait = trait_latent_psionic
					add_trait = trait_psionic
				}
			}
		}
	}
	
	option = {
		name = anomalymod.69.a
		owner = {
			every_owned_planet = {
				limit = {
					any_owned_pop = {
						species = { has_species_flag = is_worshipper_species }
					}
				}
				add_modifier = {
					modifier = spiritualist_unrest
					days = 7200 # 20 years
				}
			}
		}
	}
}

planet_event = {
	id = anomalymod.70
	title = "anomalymod.70.name"
	desc = "anomalymod.70.desc"
	picture = GFX_evt_unspeakable_horror
	show_sound = event_mystic_reveal
	
	is_triggered_only = yes
	
	trigger = {
		exists = owner
		any_owned_pop = {
			species = { has_species_flag = is_worshipper_species }
			OR = {
				is_enslaved = yes
				is_being_purged = yes
			}
		}
	}
	
	immediate = {
		remove_modifier = spiritualist_unrest
		random_owned_pop = {
			limit = {
				species = { has_species_flag = is_worshipper_species }
			}
			save_event_target_as = worshiper_species
		}
		owner = {
			save_event_target_as = dead_god_invaders
		}
	}
	
	option = {
		name = anomalymod.70.a
		set_planet_flag = dead_god_has_awaken
		hidden_effect = {
			create_country = {
				name = random
				authority = random
				civics = random
				species = event_target:worshiper_species
				ignore_initial_colony_error = yes
				ethos = {
					ethic = "ethic_militarist"
					ethic = "ethic_fanatic_spiritualist"
				}
				flag = random
				type = default
			}
			last_created_country = {
				set_country_flag = dead_god_psionics
				set_country_flag = dead_god_fully_psionic
				set_country_flag = dead_god_original_primitives
				add_resource = {
					minerals = 5000
					energy = 5000
					food = 200
					influence = 250
					alloys = 500
				}
				add_100_unity_per_year_passed = yes # scripted effect
				establish_communications_no_message = event_target:dead_god_invaders
				add_opinion_modifier = { 
					who = event_target:dead_god_invaders
					modifier = opinion_insult
				}
				create_fleet = {
					effect = {
						set_owner = prev

						create_ship = {
							name = random
							random_existing_design = science
						}

						set_fleet_stance = evasive				
						set_location = ROOT
						
						owner = {
							create_leader = {
								class = scientist
								sub_type = survey
								name = random
								skill = 4
								species = owner_main_species
							}
						}
						set_leader = last_created_leader
					}			
				}
					
				#constructor
				create_fleet = {
					effect = {
						set_owner = prev
						
						create_ship = {
							name = random
							random_existing_design = constructor
						}
						
						set_fleet_stance = evasive
						set_location = ROOT
					}
				}
				
				#military
				create_fleet = {
					set_take_point = yes
					effect = {
						set_owner = prev
						
						while = {
							count = 6
							create_ship = {
								name = random
								random_existing_design = corvette
							}
						}
						while = {
							count = 2
							create_ship = {
								name = random
								random_existing_design = destroyer
							}
						}
						create_ship = {
							name = random
							random_existing_design = cruiser
						}
						
						set_location = ROOT
						
						owner = {
							create_leader = {
								class = admiral
								species = owner_main_species
								name = random
								skill = 4
							}
						}
						set_leader = last_created_leader
					}
				}
				create_leader = {
					class = scientist
					species = owner_main_species
					name = random
					skill = 3
				}
				create_leader = {
					class = scientist
					species = owner_main_species
					name = random
					skill = 3
				}
				create_leader = {
					class = scientist
					species = owner_main_species
					name = random
					skill = 3
				}
				create_leader = {
					class = governor
					species = owner_main_species
					name = random
					skill = 3
				}
				save_event_target_as = dead_god_country
			}
			solar_system = {
				starbase = {
					set_owner = event_target:dead_god_country
				}
				every_neighbor_system = {
					limit = {
						exists = space_owner
						space_owner = { is_same_value = event_target:dead_god_invaders }
						NOT = {
							any_system_planet  = {
								is_colony = yes
							}
						}
					}
					starbase = {
						set_owner = event_target:dead_god_country
					}
				}
			}
			set_owner = event_target:dead_god_country
			set_capital = yes
			create_fleet = {
				name = "NAME_Death_God"
				settings = {
					can_upgrade = no
					can_disband = no
					can_change_composition = no
					can_change_leader = no
					uses_naval_capacity = no
					spawn_debris = no
					is_boss = yes
				}				
				effect = {					
					set_owner = event_target:dead_god_country
					create_ship = {
						name = "NAME_Camazotz"
						design = "NAME_Shroud_Avatar"
					}
					set_location = root
					set_fleet_stance = aggressive
					set_aggro_range_measure_from = return_point
					set_aggro_range = 3000
					add_modifier = {
						modifier = "absorbed_consciousness_2"
						days = -1
					}
				}
			}
			random_country = {
				limit = {
					OR = {
						is_country_type = default
						is_country_type = ascended_empire
						is_country_type = lost_empire
					}
				}
				event_target:dead_god_country = {
					copy_techs_from = {
						target = prev
					}
				}
			}
		}
	}
}

# Dead god awakens due to psionic awakening
country_event = {
	id = anomalymod.71
	hide_window = yes
	
	mean_time_to_happen = {
		months = 3000
		modifier = {
			factor = 0.5
			has_ethic = ethic_fanatic_spiritualist
		}
		modifier = {
			factor = 0.75
			has_ethic = ethic_spiritualist
		}
	}
	
	trigger = {
		NOT = { has_ethic = ethic_gestalt_consciousness }
		has_country_flag = dead_god_original_primitives
		has_country_flag = dead_god_is_real
		OR = {
			is_country_type = default
			is_country_type = ascended_empire
			is_country_type = lost_empire
		}
		OR = {
			has_country_flag = dead_god_fully_psionic
			has_ascension_perk = ap_transcendence
		}
		capital_scope = {
			has_moon = yes # make sure it hasn't been blown up or something.
			OR = {
				has_modifier = dead_god_planet_hidden
				has_modifier = dead_god_planet
			}
			NOT = { has_planet_flag = dead_god_has_awaken }
		}
	}
	
	immediate = {
		add_resource = {
			minerals = 5000
			energy = 5000
			food = 200
			influence = 250
			alloys = 500
			unity = 5000
		}
		create_fleet = {
			name = "NAME_Death_God"
			settings = {
				can_upgrade = no
				can_disband = no
				can_change_composition = no
				can_change_leader = no
				uses_naval_capacity = no
				spawn_debris = no
				is_boss = yes
			}				
			effect = {				
				set_owner = root
				create_ship = {
					name = "NAME_Camazotz"
					design = "NAME_Shroud_Avatar"
				}
				set_location = root.capital_scope
				set_fleet_stance = aggressive
				set_aggro_range_measure_from = return_point
				set_aggro_range = 3000
				add_modifier = {
					modifier = "absorbed_consciousness_2"
					days = -1
				}
			}
		}
		if = {
			limit = { exists = overlord }
			overlord = {
				ROOT = {
					copy_techs_from = {
						target = prev
					}
				}
			}
			set_subject_of = { who = none }
		}
		else = {
			random_country = {
				limit = {
					OR = {
						is_country_type = default
						is_country_type = ascended_empire
						is_country_type = lost_empire
					}
				}
				ROOT = {
					copy_techs_from = {
						target = prev
					}
				}
			}
		}
		capital_scope = {
			save_event_target_as = the_planet
			set_planet_flag = dead_god_has_awaken
		}
		every_country = {
			limit = { is_ai = no }
			country_event = { id = anomalymod.72 }
		}
	}
}

country_event = {
	id = anomalymod.72
	title = "anomalymod.72.name"
	desc = "anomalymod.72.desc"
	picture = GFX_evt_unspeakable_horror
	show_sound = event_mystic_reveal
	
	is_triggered_only = yes

	option = {
		name = anomalymod.72.a
	}
}

planet_event = {
	id = anomalymod.73
	hide_window = yes
	is_triggered_only = yes
	
	trigger = {
		NOT = { has_planet_flag = dead_god_has_awaken }
		has_planet_flag = dead_god_is_real_planet
		has_moon = yes # make sure it hasn't been blown up or something.
		OR = {
			has_modifier = dead_god_planet_hidden
			has_modifier = dead_god_planet
		}
	}
	
	immediate = {
		set_planet_flag = dead_god_has_awaken
		from = {
			owner = {
				country_event = { id = anomalymod.74 days = 14 random = 14 }
			}
		}
	}
}

country_event = {
	id = anomalymod.74
	title = "anomalymod.72.name"
	desc = "anomalymod.74.desc"
	picture = GFX_evt_unspeakable_horror
	show_sound = event_mystic_reveal
	
	is_triggered_only = yes
	
	immediate = {
		if = {
			limit = { NOT = { exists = event_target:shroud_country } }
			create_country = {
				name = "NAME_Creatures_of_the_Shroud"
				type = shroud_spirits
				flag = {
					icon = {
						category = "special"
						file = "the_shroud.dds"
					}
					background= {
						category = "backgrounds"
						file = "00_solid.dds"
					}
					colors={
						"dark_purple"
						"black"
						"null"
						"null"
					}
				}
			}
			last_created_country = {
				establish_communications_no_message = root
				save_global_event_target_as = shroud_country
			}
		}
		create_fleet = {
			name = "NAME_Death_God"
			settings = {
				can_upgrade = no
				can_disband = no
				can_change_composition = no
				can_change_leader = no
				uses_naval_capacity = no
				spawn_debris = no
				is_boss = yes
			}				
			effect = {				
				set_owner = event_target:shroud_country
				create_ship = {
					name = "NAME_Camazotz"
					design = "NAME_Shroud_Avatar"
				}
				set_location = from
				set_fleet_stance = aggressive
				set_aggro_range_measure_from = return_point
				set_aggro_range = 3000
				add_modifier = {
					modifier = "absorbed_consciousness_2"
					days = -1
				}
			}
		}
	}

	option = {
		name = anomalymod.70.a
	}
}

##################################
# Various Distant Stars Events
# Reserved 80 - 99
##################################

### Bunker-Bot ###
country_event = {
	id = anomalymod.80
	title = anomalymod.80.name
	desc = anomalymod.80.desc
	
	picture = GFX_evt_sapient_AI
	show_sound = event_alien_signal
	
	location = event_target:closest_l_gate
	
	is_triggered_only = yes
	
	trigger = {
		NOR = { 
			has_country_flag = encountered_first_lgate
			has_event_chain = "l_cluster_chain"
		}
	}
	
	immediate = {
		FROM = {
			solar_system = {
				closest_system = {
					limit = {
						has_star_flag = lgate
						any_system_megastructure = { is_megastructure_type = lgate_base }
					}
					save_event_target_as = closest_l_gate
					every_system_planet = {
						set_surveyed = {
							surveyed = yes
							surveyor = root
						}
					}
				}
			}
		}
		if = {
			limit = { has_event_chain = mandate_explore_system_chain }
			add_event_chain_counter = { 
				event_chain = mandate_explore_system_chain 
				counter = systems_explored
				amount = 1
			}
			if = {
				limit = {
					has_completed_event_chain_counter = {
						event_chain = mandate_explore_system_chain
						counter = systems_explored
					}
				}
				country_event = { id = moremandate.72  }
			}
		}
	}
	
	option = {
		name = INTRIGUING
		custom_tooltip = anomalymod.80.a.tooltip
		start_lcluster_chain = yes
		generate_lcluster_clue = yes
	}
}

country_event = {
	id = anomalymod.81
	title = anomalymod.80.name
	desc = anomalymod.81.desc
	
	picture = GFX_evt_sapient_AI
	show_sound = event_alien_signal
	
	location = FROMFROM
	
	is_triggered_only = yes
	
	option = {
		name = INTRIGUING
		if = {
			limit = { NOT = { has_technology = tech_engineering_1 } }
			give_technology = { tech = tech_engineering_1 }
		}
		else_if = {
			limit = { NOT = { has_technology = tech_assembly_pattern } }
			give_technology = { tech = tech_assembly_pattern }
		}
		else_if = {
			limit = { NOT = { has_technology = tech_construction_templates } }
			add_research_option = tech_construction_templates
			add_tech_progress = {
				tech = tech_construction_templates
				progress = 0.75
			}
		}
		else_if = {
			limit = { has_technology = tech_construction_templates }
			add_research_option = tech_repeatable_reduced_building_time
			add_tech_progress = {
				tech = tech_repeatable_reduced_building_time
				progress = 0.66
			}
		}
		generate_lcluster_clue = yes
	}
}

### THIRSTY ROCKS ###
ship_event = {
	id = anomalymod.83
	title = "PROJECT_COMPLETE"
	desc = "anomalymod.83.desc"
	picture = GFX_evt_arid
	show_sound = event_ship_bridge
	location = from

	is_triggered_only = yes
	
	immediate = {
		FROMFROM = {
			change_pc = pc_arid
			reroll_planet = yes
			add_modifier = { modifier = mineral_rich days = -1 }
			add_modifier = { modifier = bleak_planet days = -1 }
			add_deposit = d_prosperous_mesa
		}
	}

	option = {
		name = EXCELLENT
		tooltip = {
			FROMFROM = {
				change_pc = pc_arid
				add_modifier = { modifier = mineral_rich days = -1 }
				add_modifier = { modifier = bleak_planet days = -1 }
			}
		}
	}
}
ship_event = {
	id = anomalymod.84
	title = "PROJECT_FAILURE"
	desc = "anomalymod.84.desc"
	picture = GFX_evt_warm_barren
	show_sound = event_ship_bridge
	location = from

	is_triggered_only = yes
	
	option = {
		name = OK
		FROMFROM = {
			hidden_effect = {
				if = {
					limit = { has_deposit_for = shipclass_research_station }
					clear_deposits = yes
				}
				add_modifier = { modifier = mineral_rich days = -1 }
			}
			add_deposit = d_minerals_5
		}
		owner = {
			if = {
				limit = { NOT = { has_technology = tech_terrestrial_sculpting } }
				add_research_option = tech_terrestrial_sculpting
				add_tech_progress = {
					tech = tech_terrestrial_sculpting
					progress = 0.25
				}
			}
			else = {
				add_monthly_resource_mult = {
					resource = society_research
					value = @tier2researchreward
					min = @tier2researchmin
					max = @tier2researchmax
				}
			}
		}
	}
}

### Exofungus ###
planet_event = {
	id = anomalymod.85
	hide_window = yes
	
	is_triggered_only = yes
	
	trigger = {
		has_modifier = "exofungus"
		is_colony = yes
		is_under_colonization = no
		free_district_slots > 0
	}
	
	immediate = {
		random_list = {
			4 = { }
			1 = { planet_event = { id = anomalymod.86 days = 30 random = 720 } }
		}
	}
}

planet_event = {
	id = anomalymod.86
	title = "anomalymod.86.name"
	desc = "anomalymod.86.desc"
	picture = GFX_evt_alien_nature
	show_sound = event_alien_nature
	location = root
	
	is_triggered_only = yes
	
	trigger = {
		free_district_slots > 0
	}

	option = {
		name = UNFORTUNATE
		add_deposit = d_exofungus_blocker
	}
}

ship_event = {
	id = anomalymod.87
	title = "PROJECT_FAILURE"
	desc = "anomalymod.87.desc"
	picture = GFX_evt_alien_nature
	show_sound = event_alien_nature
	location = from

	is_triggered_only = yes

	option = {
		name = UNFORTUNATE
		FROMFROM = {
			while = {
				count = 4
				add_deposit = d_exofungus_blocker
			}
		}
	}
}

### ORBITAL SPEED DEMON ###
country_event = { # Genetic modifications applied to neighbor
	id = anomalymod.89
	title = "anomalymod.89.name"
	desc = {
		trigger = {
			hidden:owner = {
				switch = {
					trigger = has_country_flag
					modification_stronger = { text = anomalymod.89.desc.stronger }
					modification_adaptive = { text = anomalymod.89.desc.adaptive }
					modification_longlived = { text = anomalymod.89.desc.longlived }
					default = { text = anomalymod.89.desc }
				}
			}
		}
	}
	picture = GFX_evt_genetic_modification
	show_sound = event_scanner
	location = from

	is_triggered_only = yes
	
	option = {
		name = OK
	}
}

##### WETWARE COMPUTER #####
planet_event = {
	id = anomalymod.90
	hide_window = yes
	
	is_triggered_only = yes
	
	trigger = {
		has_deposit = d_wetware_computer
		NOT = { has_planet_flag = distar_wetware_computer_translation }
		is_colony = yes
		is_under_colonization = no
		exists = owner
		owner = {
			has_technology = tech_society_1
			has_technology = tech_self_aware_logic
		}
	}
	
	immediate = {
		random_list = {
			1 = {
				planet_event = { id = anomalymod.91 days = 30 random = 360 }
			}
			1 = {
			}
		}
	}
}

planet_event = {
	id = anomalymod.91
	title = "distar.2010.name"
	desc = "anomalymod.91.desc"
	picture = GFX_evt_ocean
	show_sound = event_alien_nature
	location = ROOT
	
	is_triggered_only = yes
	
	immediate = {
		set_planet_flag = distar_wetware_computer_translation
	}
	
	option = {
		name = "OK"
		enable_special_project = {
			name = "WETWARE_COMPUTER_PROJECT"
			location = this
			owner = root.owner
		}
	}
}

planet_event = {
	id = anomalymod.92
	title = "PROJECT_COMPLETE"
	desc = "anomalymod.92.desc"
	picture = GFX_evt_ocean
	show_sound = event_alien_nature
	location = ROOT
	
	is_triggered_only = yes
	
	option = {
		name = "EXCELLENT"
		add_modifier = { modifier = wetware_computer days = -1 }
		owner = {
			add_monthly_resource_mult = {
				resource = engineering_research
				value = @tier2researchreward
				min = @tier2researchmin
				max = @tier2researchmax
			}
		}
	}
}

### Breathing Rift ###
country_event = {
	id = anomalymod.93
	title = "anomalymod.93.name"
	desc = "anomalymod.93.desc"
	picture = GFX_evt_voidspawn
	show_sound = event_red_alert
	location = event_target:breathing_rift_object

	is_triggered_only = yes
	
	immediate = {
		event_target:breathing_rift_object = {
			solar_system = {
				random_system_planet = {
					limit = { is_star = no }
					save_event_target_as = new_location
				}
			}
		}
		save_global_event_target_as = breathing_rift_owner
		create_country = {
			name = "NAME_Portalspawn"
			type = guardian_hatchling
			flag = {
				icon = {
					category = "spherical"
					file = "flag_spherical_6.dds"
				}
				background = {
					category = "backgrounds"
					file = "00_solid.dds"
				}
				colors = {
					"red"
					"red"
					"null"
					"null"
				}
			}
			effect = {
				if = {
					limit = {
						NOT = {
							has_modifier = hatchling_power
						}
					}
					add_modifier = {
						modifier = hatchling_power
						days = -1
					}
				}
				save_global_event_target_as = breathing_rift_country
				set_country_flag = breathing_rift_country
				every_playable_country = {
					establish_communications_no_message = event_target:breathing_rift_country
				}
				create_fleet = {
					name = "NAME_Portalspawn"
					settings = {
						spawn_debris = no
						is_boss = yes
					}
					effect = {
						#set_owner = event_target:breathing_rift_country
						set_owner = prev
						create_ship = {
							name = "NAME_Portalspawn"
							design = "NAME_Voidspawn"
							effect = {
								set_ship_flag = breathing_rift_ship
								save_global_event_target_as = breathing_rift
								set_disabled = no
							}
						}
						save_global_event_target_as = breathing_rift_fleet
						set_location = {
							target = event_target:breathing_rift_object
							distance = 0
							angle = 90
							direction = in_system
						}
						set_fleet_stance = aggressive
						set_aggro_range_measure_from = self #or return_point
						set_aggro_range = 300
						auto_move_to_planet = {
							target = event_target:new_location
							clear_auto_move_on_arrival = no	# anomalymod.94 sets a new auto move target
						}
					}
				}
			}
		}
	}

	option = { # Unfortunate.
		name = BATTLESTATIONS
		custom_tooltip = anomalymod.93.a.tooltip
		add_monthly_resource_mult = {
			resource = society_research
			value = @tier2researchreward
			min = @tier2researchmin
			max = @tier2researchmax
		}
		hidden_effect = {
			country_event = { id = distar.3064 days = 100 random = 50 }
		}
	}
}

# Hatchling Moves
country_event = {
	id = anomalymod.94
	hide_window = yes

	is_triggered_only = yes

	trigger = {
		exists = event_target:breathing_rift_country
		exists = event_target:breathing_rift
		is_same_value = event_target:breathing_rift_country
		from = {
			is_same_value = event_target:breathing_rift_fleet
		}
	}

	immediate = {
		from.solar_system = {
			random_system_planet = {
				limit = {
					NOT = { is_same_value = root.from.orbit }
				}
				save_event_target_as = new_location
			}
		}
		from = {
			auto_move_to_planet = {
				target = event_target:new_location
				clear_auto_move_on_arrival = no		# anomalymod.94 sets a new auto move target
			}
		}
	}
}

# Killed Hatchling
country_event = {
	id = anomalymod.95
	title = anomalymod.95.name
	desc = anomalymod.95.desc
	picture = GFX_evt_voidspawn
	show_sound = event_space_whale
	location = event_target:slain_guardian_system
	trackable = yes

	is_triggered_only = yes

	trigger = {
		from = { has_country_flag = breathing_rift_country }
	}

	immediate = {
		set_country_flag = killed_breathing_rift
		fromfrom.solar_system = {
			save_event_target_as = slain_guardian_system
		}
	}

	option = {
		name = EXCELLENT
		add_monthly_resource_mult = {
			resource = unity
			value = 72
			min = 600
			max = 6000
		}
		add_monthly_resource_mult = {
			resource = physics_research
			value = @tier5researchreward
			min = @tier5researchmin
			max = @tier5researchmax
		}
	}
}

### ZONE A ###
planet_event = {
	id = anomalymod.96
	title = "distar.220.name"
	desc = {
		trigger = {
			owner = {
				NOT = { has_authority = auth_machine_intelligence }
			}
		}
		text = "anomalymod.96.desc"
	}
	desc = {
		trigger = {
			owner = {
				has_authority = auth_machine_intelligence
			}
		}
		text = "anomalymod.96.desc.machi"
	}
	picture = GFX_evt_alien_ruins
	show_sound = event_ghost_town
	location = from
	
	is_triggered_only = yes
	
	trigger = {
		has_distar = yes
		exists = owner
		owner = {
			is_ai = no
			NOT = { has_country_flag = the_zone_spawned }
		}
		habitable_planet = yes
		is_city = no
		is_nuked = no
		NOR = {
			has_modifier = ancient_world
			has_modifier = ancient_cities
		}
	}

	immediate = {
		add_deposit = d_the_zone
		owner = {
			set_country_flag = the_zone_spawned
			country_event = { id = story.5 days = 30 }
		}
	}

	option = {
		name = FASCINATING
		custom_tooltip = "distar.220.a.tooltip"
		owner = {
			small_artifact_reward = yes
			add_monthly_resource_mult = {
				resource = engineering_research
				value = @tier1researchreward
				min = @tier1researchmin
				max = @tier1researchmax
			}
			add_monthly_resource_mult = {
				resource = physics_research
				value = @tier1researchreward
				min = @tier1researchmin
				max = @tier1researchmax
			}
			add_monthly_resource_mult = {
				resource = unity
				value = @tier1unityreward
				min = @tier1unitymin
				max = @tier1unitymax
			}
			hidden_effect = { pop_lcluster_event = yes }
		}
	}
}

##################################
# Atomic Clock Events
# Reserved 100 - 119
##################################
# clock stuck
country_event = {
	id = anomalymod.100
	title = "distar.311.name"
	desc = "anomalymod.100.desc"
	picture = GFX_evt_clocks
	show_sound = event_scanner
	
	is_triggered_only = yes
	
	option = {
		name = anomalymod.100.a
		event_target:atomic_clock_planet = {
			enable_special_project = {
				name = "ATOMIC_CLOCK_OPEN_PROJECT"
				location = this
				owner = root
			}
		}
	}
	option = {
		name = anomalymod.100.b
		add_monthly_resource_mult = {
			resource = engineering_research
			value = @tier4researchreward
			min = @tier4researchmin
			max = @tier4researchmax
		}
	}
	after = {
		small_artifact_reward = yes
	}
}

# Clock Stuck: Project Complete
ship_event = {
	id = anomalymod.101
	title = "PROJECT_COMPLETE"
	desc = "anomalymod.101.desc"
	picture = GFX_evt_clocks
	show_sound = event_mystic_reveal
	
	is_triggered_only = yes
	
	option = {
		name = INTRIGUING
		owner = {
			generate_lcluster_clue = yes
			if = {
				limit = { NOT = { has_technology = tech_assembly_pattern } }
				give_technology = { tech = tech_assembly_pattern }
			}
			else_if = {
				limit = { has_tech_option = tech_construction_templates }
				add_tech_progress = {
					tech = tech_construction_templates
					progress = 0.5
				}
			}
			else_if = {
				limit = { NOT = { has_technology = tech_construction_templates } }
				add_research_option = tech_construction_templates
				add_tech_progress = {
					tech = tech_construction_templates
					progress = 0.2
				}
			}
			add_resource = { nanites = 300 }
		}
	}
}

ship_event = {
	id = anomalymod.102
	title = "PROJECT_COMPLETE"
	desc = "anomalymod.102.desc"
	picture = GFX_evt_clocks
	show_sound = event_super_explosion
	
	is_triggered_only = yes
	
	option = {
		name = TERRIBLE
		leader = {
			kill_leader = { show_notification = no } 
		}
		event_target:atomic_clock_planet = {
			create_ambient_object = {
				type = "large_debris_object"
			}
			last_created_ambient_object = { 
				set_location = {
					target = PREV
					distance = 0
					angle = random
				}
			}
			clear_deposits = yes
			add_deposit = d_nanites_deposit
		}
		owner = {
			generate_lcluster_clue = yes
		}
	}
}

# Sends out powerful signal, attracts one random crisis
country_event = {
	id = anomalymod.103
	title = "distar.311.name"
	desc = {
		text = "anomalymod.103.a.desc"
		trigger = {
			has_global_flag = atomic_clock_swarm
		}
	}
	desc = {
		text = "anomalymod.103.b.desc"
		trigger = {
			has_global_flag = atomic_clock_invader
		}
	}
	desc = {
		text = "anomalymod.103.c.desc"
		trigger = {
			has_global_flag = atomic_clock_synth
		}
	}
	picture = GFX_evt_clocks
	show_sound = event_mystic_reveal
	
	is_triggered_only = yes
	
	immediate = {
		random_list = {
			33 = {
				set_global_flag = atomic_clock_swarm
				modifier = {
					factor = 0
					OR = {
						allowed_crisis_type = unbidden
						allowed_crisis_type = contingency
					}
				}

			}
			33 = {
				set_global_flag = atomic_clock_invader
				modifier = {
					factor = 0
					OR = {
						allowed_crisis_type = prethoryn
						allowed_crisis_type = contingency
					}
				}

			}
			33 = {
				set_global_flag = atomic_clock_synth
				modifier = {
					factor = 0
					OR = {
						allowed_crisis_type = prethoryn
						allowed_crisis_type = unbidden
					}
				}
			}
		}
	}
	
	option = {
		name = anomalymod.103.a
		small_artifact_chance = yes
		if = {
			limit = { NOT = { has_technology = tech_sensors_2 } }
			give_technology = { tech = tech_sensors_2 }
		}
		else_if = {
			limit = { has_tech_option = tech_sensors_3 }
			add_tech_progress = {
				tech = tech_sensors_3
				progress = 0.75
			}
		}
		else_if = {
			limit = { NOT = { has_technology = tech_sensors_3 } }
			add_research_option = tech_sensors_3
			add_tech_progress = {
				tech = tech_sensors_3
				progress = 0.375
			}
		}
		else = {
			add_monthly_resource_mult = {
				resource = physics_research
				value = @tier3researchreward
				min = @tier3researchmin
				max = @tier3researchmax
			}
		}
	}
}

# warns of spectral wraith (pulsars only)
country_event = {
	id = anomalymod.104
	title = "distar.311.name"
	desc = "anomalymod.104.desc"
	picture = GFX_evt_clocks
	show_sound = event_mystic_reveal
	
	is_triggered_only = yes

	immediate = {
		event_target:atomic_clock_planet = {
			solar_system = {
				random_system_planet = {
					limit = {
						OR = {
							is_planet_class = pc_pulsar
							is_planet_class = pc_neutron_star
							is_planet_class = pc_magnetar
						}
					}
					add_modifier = {
						modifier = germinating_wraith_clock
						days = -1
					}
					planet_event = { id = anomalymod.105 days = 7200 }
				}
			}
		}
	}
	
	option = {
		name = anomalymod.104.a
		event_target:atomic_clock_planet = {
			enable_special_project = {
				name = "ATOMIC_CLOCK_WARNING_PROJECT"
				location = this
				owner = root
			}
		}
	}
	option = {
		name = anomalymod.104.b
	}
}
# Wraith is born
planet_event = {
	id = anomalymod.105
	hide_window = yes

	is_triggered_only = yes

	trigger = {
		has_modifier = germinating_wraith_clock
	}

	immediate = {
		save_event_target_as = wraith_star
		remove_modifier = germinating_wraith
		create_country = {
			name = "NAME_Wraith"
			type = guardian_wraith
			flag = {
				icon = {
					category = "zoological"
					file = "flag_zoological_5.dds"
				}
				background= {
					category = "backgrounds"
					file = "00_solid.dds"
				}
				colors={
					"red"
					"red"
					"null"
					"null"
				}
			}
		}
		last_created_country = {
			set_country_flag = wraith_country
			save_global_event_target_as = wraith_country
			create_fleet = {
				name = "NAME_Specter"
				settings = {
					spawn_debris = no
					is_boss = yes
				}
				effect = {
					set_owner = event_target:wraith_country
					random_list = {
						33 = {
							create_ship = {
								name = "NAME_Wraith_650THz"
								design = "NAME_Spectral_Wraith_650THz"
								effect = {
									set_ship_flag = wraith_ship
									set_ship_flag = wraith_freq_blue
								}
							}
						}
						33 = {
							create_ship = {
								name = "NAME_Wraith_450THz"
								design = "NAME_Spectral_Wraith_450THz"
								effect = {
									set_ship_flag = wraith_ship
									set_ship_flag = wraith_freq_red
								}
							}
						}
						33 = {
							create_ship = {
								name = "NAME_Wraith_520THz"
								design = "NAME_Spectral_Wraith_520THz"
								effect = {
									set_ship_flag = wraith_ship
									set_ship_flag = wraith_freq_yellow
								}
							}
						}
					}
					save_global_event_target_as = wraith_fleet
					set_fleet_flag = wraith_fleet
					set_location = event_target:wraith_star
					set_fleet_stance = aggressive
					set_aggro_range_measure_from = self
					set_aggro_range = 20
					queue_actions = {
						repeat = {
							find_closest_system = {
								trigger = {
									id = wraith.1.trigger.1
									NOR = {
										exists = space_owner
										any_fleet_in_system = {
											is_same_value = event_target:wraith_fleet
										}
										has_star_flag = guardians_wraith_visited
									}
								}
								found_system = {
									move_to = this
									find_closest_planet = {
										trigger = {
											id = wraith.1.trigger.2
											is_star = yes
										}
										found_planet = {
											move_to = this
											#orbit_planet = this
											wait = {
												duration = 10
											}
										}
									}
								}
							}
						}
					}
				}
			}
		}
		solar_system = {
			if = {
				limit = { exists = space_owner }
				space_owner = {
					country_event = { id = leviathans.2012 }
				}
			}
		}
	}
}
# Warning Translated
ship_event = {
	id = anomalymod.106
	title = "PROJECT_COMPLETE"
	desc = "anomalymod.106.desc"
	picture = GFX_evt_star_pulsar
	show_sound = event_mystic_reveal
	
	is_triggered_only = yes
	
	option = {
		name = anomalymod.106.a
		owner = {
			add_monthly_resource_mult = {
				resource = physics_research
				value = @tier5researchreward
				min = @tier5researchmin
				max = @tier5researchmax
			}
		}
	}
}

# Broken Nanites
country_event = {
	id = anomalymod.107
	title = "distar.311.name"
	desc = "anomalymod.107.desc"
	picture = GFX_evt_clocks
	show_sound = event_mystic_reveal
	
	is_triggered_only = yes
	
	option = {
		name = anomalymod.107.a
		small_artifact_reward = yes
		if = {
			limit = { NOT = { has_technology = tech_assembly_pattern } }
			give_technology = { tech = tech_assembly_pattern }
		}
		else_if = {
			limit = { has_tech_option = tech_construction_templates }
			add_tech_progress = {
				tech = tech_construction_templates
				progress = 0.5
			}
		}
		else_if = {
			limit = { NOT = { has_technology = tech_construction_templates } }
			add_research_option = tech_construction_templates
			add_tech_progress = {
				tech = tech_construction_templates
				progress = 0.2
			}
		}
		else = {
			add_monthly_resource_mult = {
				resource = engineering_research
				value = @tier3researchreward
				min = @tier3researchmin
				max = @tier3researchmax
			}
		}
		generate_lcluster_clue = yes
		add_resource = { nanites = 300 }
	}
}

# Bomb, destroys everything in system
country_event = {
	id = anomalymod.108
	title = "distar.311.name"
	desc = {
		trigger = { NOT = { has_country_flag = the_gods_are_angry } }
		text = "anomalymod.108.desc"
	}
	desc = {
		trigger = { has_country_flag = the_gods_are_angry }
		text = "anomalymod.108.desc.you_are_screwed"
	}
	picture = GFX_evt_clocks
	show_sound = event_super_explosion
	
	is_triggered_only = yes
	
	immediate = {
		event_target:atomic_clock_planet = {
			solar_system = {
				every_fleet_in_system  = {
					destroy_fleet = this
				}
				every_system_planet  = {
					limit = { colonizeable_planet = yes }
					if = {
						limit = { is_colony = yes }
						destroy_colony = yes
					}
					if = {
						limit = { has_modifier = holy_planet }
						ROOT = { set_country_flag = the_gods_are_angry }
						save_event_target_as = nuked_planet
					}
					if = {
						limit = {
							is_planet_class = pc_habitat
						}
						spawn_habitat_cracker_effect = yes
						remove_planet = yes
					}
					else_if = {
						limit = {
							is_planet_class = pc_ringworld_habitable
						}
						spawn_ringworld_cracker_effect = yes
						change_pc = pc_ringworld_habitable_damaged
					}
					else = {
						change_pc = pc_barren
						reset_planet = yes
						add_modifier = {
							modifier = terraforming_candidate
							days = -1
						}
					}
				}
			}
			remove_planet = yes
		}
	}
	
	option = {
		name = TERRIBLE
		trigger = {
			NOT = { has_country_flag = the_gods_are_angry }
		}
		custom_tooltip = anomalymod.108.a.tooltip
		random_owned_leader = {
			limit = {
				is_researching_area = engineering
			}
			kill_leader = { show_notification = no }
		}
	}
	
	option = {
		name = distar.335.c
		trigger = {
			has_country_flag = the_gods_are_angry
		}
		custom_tooltip = anomalymod.109.a.tooltip
		random_owned_leader = {
			limit = {
				is_researching_area = engineering
			}
			kill_leader = { show_notification = no }
		}
		custom_tooltip = distar.335.c.tooltip
	}
	
	after = {
		hidden_effect = {
			if = {
				limit = {
					has_country_flag = the_gods_are_angry
					any_country = {
						has_ai_personality_behaviour = holy_planets # not awakened
					}
				}
				remove_country_flag = the_gods_are_angry
				random_country = {
					limit = {
						has_ai_personality_behaviour = holy_planets # not awakened
					}
					save_event_target_as = outraged_FE
				}
				save_event_target_as = FE_outrager
				country_event = { id = anomalymod.110 days = 5 }
			}
		}
	}
}


# Dark matter bomb, destroys everything 3 system away, star becomes black hole
country_event = {
	id = anomalymod.109
	title = "distar.311.name"
	desc = {
		trigger = { NOT = { has_country_flag = the_gods_are_angry } }
		text = "anomalymod.109.desc"
	}
	desc = {
		trigger = { has_country_flag = the_gods_are_angry }
		text = "anomalymod.109.desc.you_are_screwed"
	}
	picture = GFX_evt_clocks
	show_sound = event_super_explosion
	
	is_triggered_only = yes
	
	immediate = {
		event_target:atomic_clock_planet = {
			solar_system = {
				every_fleet_in_system  = {
					destroy_fleet = this
				}
				every_system_planet  = {
					limit = { is_colony = yes }
					destroy_colony = yes
				}
				every_system_planet  = {
					limit = {
						is_star = no
						is_asteroid = no
						NOT = { is_gas_giant = yes }
					}
					# destroy habitats and ringworlds
					if = {
						limit = {
							is_planet_class = pc_habitat
						}
						spawn_habitat_cracker_effect = yes
						remove_planet = yes
					}
					else_if = {
						limit = {
							is_planet_class = pc_ringworld_habitable
						}
						spawn_ringworld_cracker_effect = yes
						change_pc = pc_ringworld_habitable_damaged
					}
					else_if = {
						limit = { colonizeable_planet = yes }
						change_pc = pc_shattered
						clear_deposits = yes
						random_list = {
							1 = {
								add_deposit = d_minerals_4
								add_deposit = d_minerals_4
								add_deposit = d_minerals_4
								add_deposit = d_minerals_4
							}
							1 = {
								add_deposit = d_minerals_4
								add_deposit = d_minerals_4
								add_deposit = d_minerals_4
							}
							1 = {
								add_deposit = d_minerals_4
								add_deposit = d_minerals_4
							}
							1 = {
								add_deposit = d_minerals_4
							}
						}
						if = {
							limit = { has_modifier = holy_planet }
							ROOT = { set_country_flag = the_gods_are_angry }
							save_event_target_as = nuked_planet
						}
					}
					else = {
						change_pc = pc_shattered
						clear_deposits = yes
						random_list = {
							1 = {
								add_deposit = d_minerals_4
								add_deposit = d_minerals_4
								add_deposit = d_minerals_4
							}
							1 = {
								add_deposit = d_minerals_4
								add_deposit = d_minerals_4
							}
							1 = {
								add_deposit = d_minerals_4
							}
						}
					}
				}
				every_system_planet  = {
					limit = {
						is_gas_giant = yes
					}
					change_pc = pc_barren_cold
					reset_planet = yes
					add_modifier = {
						modifier = chthonian_planet
						days = -1
					}
				}
				every_system_planet  = {
					limit = {
						is_star = yes
						NOR = {
							is_planet_class = pc_black_hole
							is_planet_class = pc_pulsar
							is_planet_class = pc_neutron_star
							is_planet_class = pc_magnetar
							is_planet_class = pc_t_star
							is_planet_class = pc_l_star
							is_planet_class = pc_y_star
							is_planet_class = pc_d_star
							is_planet_class = pc_nova_1
							is_planet_class = pc_nova_2
							is_planet_class = pc_collapsar
							is_planet_class = pc_protostar
						}
					}
					change_pc = pc_black_hole
					reset_planet = yes
					clear_deposits = yes
					set_deposit = d_dark_matter_deposit_2
				}
				every_neighbor_system = {
					every_fleet_in_system  = {
						destroy_fleet = this
					}
					every_system_planet  = {
						limit = { colonizeable_planet = yes }
						if = {
							limit = { is_colony = yes }
							destroy_colony = yes
						}
						if = {
							limit = { has_modifier = holy_planet }
							ROOT = { set_country_flag = the_gods_are_angry }
							save_event_target_as = nuked_planet
						}
						if = {
							limit = {
								is_planet_class = pc_habitat
							}
							spawn_habitat_cracker_effect = yes
							remove_planet = yes
						}
						else_if = {
							limit = {
								is_planet_class = pc_ringworld_habitable
							}
							spawn_ringworld_cracker_effect = yes
							change_pc = pc_ringworld_habitable_damaged
						}
						else = {
							change_pc = pc_barren
							reset_planet = yes
							add_modifier = {
								modifier = terraforming_candidate
								days = -1
							}
						}
					}
					every_neighbor_system = {
						every_fleet_in_system  = {
							destroy_fleet = this
						}
						every_system_planet  = {
							limit = { colonizeable_planet = yes }
							if = {
								limit = { is_colony = yes }
								destroy_colony = yes
							}
							if = {
								limit = { has_modifier = holy_planet }
								ROOT = { set_country_flag = the_gods_are_angry }
								save_event_target_as = nuked_planet
							}
							if = {
								limit = {
									is_planet_class = pc_habitat
								}
								spawn_habitat_cracker_effect = yes
								remove_planet = yes
							}
							else_if = {
								limit = {
									is_planet_class = pc_ringworld_habitable
								}
								spawn_ringworld_cracker_effect = yes
								change_pc = pc_ringworld_habitable_damaged
							}
							else = {
								change_pc = pc_barren
								reset_planet = yes
								add_modifier = {
									modifier = terraforming_candidate
									days = -1
								}
							}
						}
						every_neighbor_system = {
							every_fleet_in_system  = {
								destroy_fleet = this
							}
							every_system_planet  = {
								limit = { colonizeable_planet = yes }
								if = {
									limit = { is_colony = yes }
									destroy_colony = yes
								}
								if = {
									limit = { has_modifier = holy_planet }
									ROOT = { set_country_flag = the_gods_are_angry }
									save_event_target_as = nuked_planet
								}
								if = {
									limit = {
										is_planet_class = pc_habitat
									}
									spawn_habitat_cracker_effect = yes
									remove_planet = yes
								}
								else_if = {
									limit = {
										is_planet_class = pc_ringworld_habitable
									}
									spawn_ringworld_cracker_effect = yes
									change_pc = pc_ringworld_habitable_damaged
								}
								else = {
									change_pc = pc_barren
									reset_planet = yes
									add_modifier = {
										modifier = terraforming_candidate
										days = -1
									}
								}
							}
						}
					}
				}
			}
			remove_planet = yes
		}
	}
	
	option = {
		name = anomalymod.109.a
		trigger = {
			NOT = { has_country_flag = the_gods_are_angry }
		}
		custom_tooltip = anomalymod.109.a.tooltip
		random_owned_leader = {
			limit = {
				is_researching_area = engineering
			}
			kill_leader = { show_notification = no }
		}
	}
	
	option = {
		name = distar.335.c
		trigger = {
			has_country_flag = the_gods_are_angry
		}
		custom_tooltip = anomalymod.109.a.tooltip
		random_owned_leader = {
			limit = {
				is_researching_area = engineering
			}
			kill_leader = { show_notification = no }
		}
		custom_tooltip = distar.335.c.tooltip
	}
	
	after = {
		hidden_effect = {
			if = {
				limit = {
					has_country_flag = the_gods_are_angry
					any_country = {
						has_ai_personality_behaviour = holy_planets # not awakened
					}
				}
				remove_country_flag = the_gods_are_angry
				random_country = {
					limit = {
						has_ai_personality_behaviour = holy_planets # not awakened
					}
					save_event_target_as = outraged_FE
				}
				save_event_target_as = FE_outrager
				country_event = { id = anomalymod.110 days = 5 }
			}
		}
	}
}

country_event = {
	id = anomalymod.110
	title = planet_destruction.610.name
	desc = anomalymod.110.desc
	show_sound = event_ship_bridge
	location = event_target:outraged_FE.capital_scope

	is_triggered_only = yes

	diplomatic = yes

	picture_event_data = {
		portrait = event_target:outraged_FE
		planet_background = event_target:outraged_FE
		graphical_culture = event_target:outraged_FE
		city_level = event_target:outraged_FE
		room = event_target:outraged_FE.ruler
	}

	after = {
		hidden_effect = {
			# wake up FE and make it start a war
			event_target:outraged_FE = {
				set_country_flag = holy_world_killed
				country_event = { id = fallen_empires_awakening.1 }
			}
		}
	}
	
	option = {
		name = anomalymod.110.a
		response_text = anomalymod.110.a.response
	}
	
	option = {
		name = anomalymod.110.b
		response_text = anomalymod.110.a.response
	}


	option = {
		name = planet_destruction.610.mater
		trigger = {
			OR = {
				has_ethic = ethic_materialist
				has_ethic = ethic_fanatic_materialist
			}
			#is_materialist = yes
		}
	}

	option = {
		name = anomalymod.110.phile
		response_text = anomalymod.110.a.response
		trigger = {
			OR = {
				has_ethic = ethic_xenophile
				has_ethic = ethic_fanatic_xenophile
			}
			#is_xenophile = yes
		}
	}

	option = {
		name = planet_destruction.610.gesta # What is a single planet?
		trigger = {
			has_ethic = ethic_gestalt_consciousness
		}
	}

	option = {
		name = planet_destruction.610.devou # HAK
		exclusive_trigger = {
			has_valid_civic = civic_hive_devouring_swarm
		}
	}

	option = {
		name = planet_destruction.610.termi
		exclusive_trigger = {
			has_valid_civic = civic_machine_terminator
		}
	}

	option = {
		name = planet_destruction.610.purif
		exclusive_trigger = {
			has_valid_civic = civic_fanatic_purifiers
		}
	}
}

# Clock destroyed, full of nanites that eat planet
ship_event = {
	id = anomalymod.116
	title = "anomalymod.116.name"
	desc = "anomalymod.116.desc"
	picture = GFX_evt_clocks
	show_sound = event_super_explosion
	
	is_triggered_only = yes
	
	option = {
		name = TERRIBLE
		leader = {
			kill_leader = { show_notification = no } 
		}
		event_target:atomic_clock_planet = {
			create_ambient_object = {
				type = "large_debris_object"
			}
			last_created_ambient_object = { 
				set_location = {
					target = PREV
					distance = 0
					angle = random
				}
			}
			clear_deposits = yes
			add_deposit = d_nanites_deposit
		}
		owner = {
			generate_lcluster_clue = yes
		}
	}
}

# Clock destroyed, full of nanites
ship_event = {
	id = anomalymod.117
	title = "anomalymod.117.name"
	desc = "anomalymod.117.desc"
	picture = GFX_evt_clocks
	show_sound = event_super_explosion
	
	is_triggered_only = yes
	
	option = {
		name = anomalymod.117.a
		owner = {
			if = {
				limit = { NOT = { has_technology = tech_assembly_pattern } }
				give_technology = { tech = tech_assembly_pattern }
			}
			else_if = {
				limit = { has_tech_option = tech_construction_templates }
				add_tech_progress = {
					tech = tech_construction_templates
					progress = 0.5
				}
			}
			else_if = {
				limit = { NOT = { has_technology = tech_construction_templates } }
				add_research_option = tech_construction_templates
				add_tech_progress = {
					tech = tech_construction_templates
					progress = 0.2
				}
			}
			else = {
				add_monthly_resource_mult = {
					resource = engineering_research
					value = @tier3researchreward
					min = @tier3researchmin
					max = @tier3researchmax
				}
			}
			generate_lcluster_clue = yes
			add_resource = { nanites = 300 }
		}
	}
}

# Clock destroyed, was a bomb
ship_event = {
	id = anomalymod.118
	title = "anomalymod.117.name"
	desc = "anomalymod.118.desc"
	picture = GFX_evt_clocks
	show_sound = event_super_explosion
	
	is_triggered_only = yes
	
	option = {
		name = anomalymod.118.a
	}
}

# attempt fails, bomb goes off
ship_event = {
	id = anomalymod.119
	title = "anomalymod.119.name"
	desc = "anomalymod.119.desc"
	picture = GFX_evt_clocks
	show_sound = event_super_explosion
	
	is_triggered_only = yes
	
	option = {
		name = "TERRIBLE"
		hidden_effect = {
			leader = {
				kill_leader = { show_notification = no } 
			}
		}
		destroy_ship = ROOT
		event_target:atomic_clock_planet = {
			create_ambient_object = {
				type = "large_debris_object"
			}
			last_created_ambient_object = { 
				set_location = {
					target = PREV
					distance = 0
					angle = random
				}
			}
			remove_planet = yes
		}
	}
}

##################################
# Locusts Events
# Reserved 120 - 129
##################################

# locusts arrive in system
planet_event = {
	id = anomalymod.120
	hide_window = yes
	is_triggered_only = yes
	
	immediate = {
		every_system = {
			limit = { has_star_flag = space_locusts_current_location }
			remove_star_flag = space_locusts_current_location
		}
		solar_system = {
			set_star_flag = space_locusts_current_location
			if = {
				limit = { exists = space_owner }
				space_owner = {
					country_event = { id = anomalymod.124 }
				}
			}
			if = {
				limit = {
					NOR = {
						has_star_flag = hostile_system
						has_star_flag = collapse_system
						has_star_flag = elderly_tiyanki_system
						has_star_flag = sealed_system
					}
					any_system_planet = {
						OR = {
							is_gaia = yes
							is_continental = yes
							is_savannah = yes
							is_alpine = yes
							is_tropical = yes
						}
						is_terraforming = no
						NOR = {
							has_building = building_planetary_shield_generator
							has_building = building_mem_planetary_shield_generator
							has_building = building_mem_planetary_shield_generator_heavy
							has_building = building_mem_planetary_shield_generator_orila
						}
					}
				}
				every_system_planet = {
					limit = {
						OR = {
							is_gaia = yes
							is_continental = yes
							is_savannah = yes
							is_alpine = yes
							is_tropical = yes
						}
						is_terraforming = no
						NOR = {
							has_building = building_planetary_shield_generator
							has_building = building_mem_planetary_shield_generator
							has_building = building_mem_planetary_shield_generator_heavy
							has_building = building_mem_planetary_shield_generator_orila
						}
					}
					set_planet_flag = next_locusts_target
				}
				random_system_planet = {
					limit = {
						OR = {
							is_gaia = yes
							is_continental = yes
							is_savannah = yes
							is_alpine = yes
							is_tropical = yes
						}
						is_terraforming = no
						NOR = {
							has_building = building_planetary_shield_generator
							has_building = building_mem_planetary_shield_generator
							has_building = building_mem_planetary_shield_generator_heavy
							has_building = building_mem_planetary_shield_generator_orila
						}
					}
					planet_event = { id = anomalymod.121 days = 720 random = 180 }
				}
			}
			else = {
				random_system = {
					limit = {
						OR = {
							NOT = { exists = space_owner }
							AND = {
								exists = space_owner
								space_owner = {
									OR = {
										is_country_type = default
										is_country_type = ascended_empire
										is_country_type = lost_empire
									}
								}
							}
						}
						any_neighbor_system = { has_star_flag = space_locusts_current_location }
					}
					random_system_planet = {
						limit = { is_star = yes }
						planet_event = { id = anomalymod.120 days = 10800 random = 10800 }
					}
				}
			}
		}
	}
}

# locusts arrive at planet
planet_event = {
	id = anomalymod.121
	hide_window = yes
	is_triggered_only = yes
	
	immediate = {
		if = {
			limit = {
				OR = {
					is_terraforming = yes
					has_building = building_planetary_shield_generator
					has_building = building_mem_planetary_shield_generator
					has_building = building_mem_planetary_shield_generator_heavy
					has_building = building_mem_planetary_shield_generator_orila
				}
			}
			remove_planet_flag = next_locusts_target
			if = {
				limit = {
					solar_system = {
						any_system_planet = {
							has_planet_flag = next_locusts_target
							NOT = { is_same_value = ROOT }
						}
					}
				}
				solar_system = {
					random_system_planet = {
						limit = {
							has_planet_flag = next_locusts_target
							NOT = { is_same_value = ROOT }
						}
						planet_event = { id = anomalymod.121 days = 720 random = 180 }
					}
				}
			}
			else = {
				random_system = {
					limit = {
						OR = {
							NOT = { exists = space_owner }
							AND = {
								exists = space_owner
								space_owner = {
									OR = {
										is_country_type = default
										is_country_type = ascended_empire
										is_country_type = lost_empire
									}
								}
							}
						}
						any_neighbor_system = { has_star_flag = space_locusts_current_location }
					}
					random_system_planet = {
						limit = { is_star = yes }
						planet_event = { id = anomalymod.120 days = 10800 random = 10800 }
					}
				}
			}
		}
		else = {
			if = {
				limit = { exists = owner }
				planet_event = { id = anomalymod.122 }
			}
			else = {
				add_modifier = {
					modifier = ravenous_locusts
					days = -1
				}
				planet_event = { id = anomalymod.123 days = 360 random = 720 }
			}
		}
	}
}

# locusts begin eating
planet_event = {
	id = anomalymod.122
	title = "anomalymod.122.name"
	desc = "anomalymod.122.desc"
	picture = GFX_evt_burning_settlement
	show_sound = event_air_raid_siren
	location = ROOT
	
	is_triggered_only = yes
	
	option = {
		name = "TERRIBLE"
		add_modifier = {
			modifier = ravenous_locusts
			days = -1
		}
		hidden_effect = {
			planet_event = { id = anomalymod.123 days = 360 random = 720 }
			random_owned_pop = { kill_pop = yes }
		}
	}
}

# planet eaten
planet_event = {
	id = anomalymod.123
	title = "anomalymod.123.name"
	desc = "anomalymod.123.desc"
	picture = GFX_evt_burning_settlement
	show_sound = event_air_raid_siren
	location = ROOT
	
	is_triggered_only = yes
	
	immediate = {
		remove_modifier = "ravenous_locusts"
		remove_planet_flag = next_locusts_target
		change_pc = pc_barren
		add_modifier = {
			modifier = "terraforming_candidate"
			days = -1
		}
		if = {
			limit = {
				solar_system = {
					any_system_planet = {
						has_planet_flag = next_locusts_target
						NOT = { is_same_value = ROOT }
					}
				}
			}
			solar_system = {
				random_system_planet = {
					limit = {
						has_planet_flag = next_locusts_target
						NOT = { is_same_value = ROOT }
					}
					planet_event = { id = anomalymod.121 days = 720 random = 180 }
				}
			}
		}
		else = {
			random_system = {
				limit = {
					OR = {
						NOT = { exists = space_owner }
						AND = {
							exists = space_owner
							space_owner = {
								OR = {
									is_country_type = default
									is_country_type = ascended_empire
									is_country_type = lost_empire
								}
							}
						}
					}
					any_neighbor_system = { has_star_flag = space_locusts_current_location }
				}
				random_system_planet = {
					limit = { is_star = yes }
					planet_event = { id = anomalymod.120 days = 10800 random = 10800 }
				}
			}
		}
	}
	
	option = {
		name = "anomalymod.123.a"
	}
}

# space owner informed
country_event = {
	id = anomalymod.124
	title = "anomalymod.124.name"
	desc = {
		text = "anomalymod.124.a.desc"
		trigger = { has_country_flag = seen_space_locusts }
	}
	desc = {
		text = "anomalymod.124.b.desc"
		trigger = { NOT = { has_country_flag = seen_space_locusts } }
	}
	picture = GFX_evt_alien_nature
	show_sound = event_alien_nature
	location = FROM
	
	is_triggered_only = yes
	
	option = {
		name = anomalymod.124.a
		trigger = { NOT = { has_country_flag = seen_space_locusts } }
		hidden_effect = { set_country_flag = seen_space_locusts }
		capital_scope = {
			enable_special_project = {
				name = "INVESTIGATING_LOCUSTS_PROJECT"
				location = this
				owner = root
			}
		}
	}
	option = {
		name = DISCONCERTING
		trigger = { has_country_flag = seen_space_locusts }
		if = {
			limit = {
				NOR = {
					has_country_flag = protect_against_locusts_project_complete
					has_special_project  = INVESTIGATING_LOCUSTS_PROJECT
					has_special_project  = PROTECT_AGAINST_LOCUSTS_PROJECT
				}
			}
			capital_scope = {
				enable_special_project = {
					name = "PROTECT_AGAINST_LOCUSTS_PROJECT"
					location = this
					owner = root
				}
			}
		}
	}
}

# special projects
planet_event = {
	id = anomalymod.125
	title = "PROJECT_COMPLETE"
	desc = "anomalymod.125.desc"
	picture = GFX_evt_alien_nature
	show_sound = event_alien_nature
	
	is_triggered_only = yes
	
	option = {
		name = anomalymod.125.a
		enable_special_project = {
			name = "PROTECT_AGAINST_LOCUSTS_PROJECT"
			location = this
			owner = root.owner
		}
	}
}
planet_event = {
	id = anomalymod.126
	title = "PROJECT_COMPLETE"
	desc = "anomalymod.126.desc"
	picture = GFX_evt_alien_nature
	show_sound = event_alien_nature
	
	is_triggered_only = yes
	
	immediate = {
		owner = {
			set_country_flag = protect_against_locusts_project_complete
		}
	}
	
	option = {
		name = anomalymod.126.a
		trigger = {
			owner = { has_technology = tech_planetary_shield_generator }
		}
	}
	option = {
		name = anomalymod.126.b
		trigger = {
			owner = { NOT = { has_technology = tech_planetary_shield_generator } }
		}
		owner = { add_research_option = tech_planetary_shield_generator }
	}
}


##################################
# Vanilla Category Events
# Reserved 200 - 399
##################################

# Ammonia Biosphere
ship_event = {
	id = anomalymod.200
	title = "anomalymod.200.name"
	desc = "anomalymod.200.desc"
	picture = GFX_evt_alien_nature
	show_sound = event_ship_bridge
	location = FROM
	
	is_triggered_only = yes

	immediate = {
		from = { clear_deposits = yes }
		owner = { country_event = { id = story.1 days = 2 } }
		owner = {
			set_timed_country_flag = { flag = found_recent_toxic_life days = 1800 }
		}
		FROM = {
			if = {
				limit = { is_planetary_diversity_active = yes }
				change_pc = pc_methane
				reset_planet = yes
			}
		}
	}
	
	option = {
		name = FASCINATING
		hidden_effect = {
			FROM = {
				add_modifier = {
					modifier = "methane_biosphere"
					days = -1
				}
			}
		}
		FROM = { 
			set_deposit = d_society_3
		}
	}
}

# Strategic Aerostat Mines
ship_event = {
	id = anomalymod.201
	title = "anomalymod.201.name"
	desc = "anomalymod.201.desc"
	picture = GFX_evt_gas_giant_station
	show_sound = event_ship_bridge
	location = FROM
	
	is_triggered_only = yes
	
	immediate = {
		from = { clear_deposits = yes }
		hidden_effect = { owner = { country_event = { id = story.5 days = 30 } } }
	}

	option = {
		name = INTRIGUING
		from = {
			random_list = {
				5 = { set_deposit = d_exotic_gases_1 }
				3 = { set_deposit = d_exotic_gases_2 }
				1 = { set_deposit = d_exotic_gases_3 }
			}
		}
		FROM = {
			create_mining_station = {
				owner = root.owner
			}
		}
	}
}

# Crashed Colony Ship
ship_event = {
	id = anomalymod.202
	title = "anomalymod.202.name"
	desc = "anomalymod.202.desc"
	picture = GFX_evt_crashed_station
	show_sound = event_ship_bridge
	location = FROM
	
	is_triggered_only = yes

	immediate = { owner = { country_event = { id = story.5 days = 30 } } }
	
	option = {
		name = anomaly.35.a
		owner = {
			add_resource = { alloys = 25 }
			add_monthly_resource_mult = {
				resource = society_research
				value = @tier1researchreward
				min = @tier1researchmin
				max = @tier1researchmax
			}
			add_monthly_resource_mult = {
				resource = engineering_research
				value = @tier1researchreward
				min = @tier1researchmin
				max = @tier1researchmax
			}
			small_artifact_reward = yes
		}
	}
}

# Kinetic Weapons Testing
ship_event = {
	id = anomalymod.203
	title = "anomalymod.203.name"
	desc = "anomalymod.203.desc"
	picture = GFX_evt_ship_in_orbit
	show_sound = event_ship_bridge
	location = FROM
	
	is_triggered_only = yes
	
	immediate = {
		hidden_effect = { owner = { country_event = { id = story.5 days = 30 } } }
	}
	
	option = {
		name = DISCONCERTING
		owner = {
			add_monthly_resource_mult = {
				resource = engineering_research
				value = @tier3researchreward
				min = @tier3researchmin
				max = @tier3researchmax
			}
		}
	}
	
	option = {
		name = anomalymod.203.b
		trigger = {
			owner = { NOT = { has_technology = tech_mass_drivers_4 } }
			leader = {
				has_trait = leader_trait_expertise_propulsion
			}
		}
		owner = {
			if = {
				limit = { NOT = { has_technology = tech_mass_drivers_2 } }
				give_technology = { tech = tech_mass_drivers_2 }
			}
			else_if = {
				limit = { NOT = { has_technology = tech_mass_drivers_3 } }
				add_research_option = tech_mass_drivers_3
				add_tech_progress = {
					tech = tech_mass_drivers_3
					progress = 0.5
				}
			}
			else_if = {
				limit = { NOT = { has_technology = tech_mass_drivers_4 } }
				add_research_option = tech_mass_drivers_4
				add_tech_progress = {
					tech = tech_mass_drivers_4
					progress = 0.25
				}
			}
		}
	}
	option = {
		name = anomalymod.203.c
		trigger = {
			owner = { NOT = { has_technology = tech_ship_armor_4 } }
			leader = {
				has_trait = leader_trait_expertise_materials
			}
		}
		owner = {
			if = {
				limit = { NOT = { has_technology = tech_ship_armor_2 } }
				give_technology = { tech = tech_ship_armor_2 }
			}
			else_if = {
				limit = { NOT = { has_technology = tech_ship_armor_3 } }
				add_research_option = tech_ship_armor_3
				add_tech_progress = {
					tech = tech_ship_armor_3
					progress = 0.5
				}
			}
			else_if = {
				limit = { NOT = { has_technology = tech_ship_armor_4 } }
				add_research_option = tech_ship_armor_4
				add_tech_progress = {
					tech = tech_ship_armor_4
					progress = 0.25
				}
			}
		}
	}
}

# Extinction Event - Massive Impact
ship_event = {
	id = anomalymod.204
	title = "anomalymod.204.name"
	desc = "anomalymod.204.desc"
	picture = "GFX_evt_nuclear_explosion"
	show_sound = event_ship_bridge
	location = FROM
	
	is_triggered_only = yes
	
	immediate = {
		hidden_effect = {
			owner = {
				country_event = { id = story.1 days = 30 }
			}
		}
	}
	
	option = {
		name = INTRIGUING
		owner = {
			add_monthly_resource_mult = {
				resource = society_research
				value = @tier1researchreward
				min = @tier1researchmin
				max = @tier1researchmax
			}
		}
	}
}

#Colonial Failure, rework of anomaly.280
ship_event = {
	id = anomalymod.205
	title = "anomaly.280.name"
	desc = "anomaly.280.desc"
	picture = GFX_evt_archaeological_dig
	show_sound = event_ship_bridge
	location = FROM
	
	is_triggered_only = yes
	
	immediate = {
		hidden_effect = { owner = { country_event = { id = story.5 days = 30 } } }
	}
	
	option = {
		name = anomaly.280.a
		trigger = {
			owner = {
				NOT = { has_technology = tech_colonization_3 }
			}
		}
		small_artifact_reward = yes

		if = {
			limit = {
				from = {
					can_be_terraforming_candidate = yes
				}
			}
			custom_tooltip = TERRAFORMING_CANDIDATE_EFFECT
			hidden_effect = {
				from = {
					add_modifier = {
						modifier = "terraforming_candidate"
						days = -1
					}
				}		
			}
		}
		if = {
			limit = {
				owner = {
					NOT = { has_technology = tech_colonization_2 }
				}
			}
			owner = {
				add_research_option = tech_colonization_2
				add_tech_progress = {
					tech = tech_colonization_2
					progress = 0.20
				}
			}
		}
		else_if = {
			limit = {
				owner = {
					NOT = { has_technology = tech_colonization_3 }
				}
			}
			owner = {
				add_research_option = tech_colonization_3
				add_tech_progress = {
					tech = tech_colonization_3
					progress = 0.10
				}
			}
		}
	}
	option = {
		name = anomaly.280.b
		trigger = {
			owner = {
				is_xenophobe = no
				has_technology = tech_colonization_3
			}
		}
		small_artifact_reward = yes

		if = {
			limit = {
				from = {
					can_be_terraforming_candidate = yes
				}
			}
			custom_tooltip = TERRAFORMING_CANDIDATE_EFFECT
			hidden_effect = {
				from = {
					add_modifier = {
						modifier = "terraforming_candidate"
						days = -1
					}
				}		
			}
		}
		owner = {
			add_monthly_resource_mult = {
				resource = society_research
				value = @tier3researchreward
				min = @tier3researchmin
				max = @tier3researchmax
			}
		}
	}
	option = {
		name = anomaly.280.c
		trigger = {
			owner = { is_xenophobe = yes }
		}
		small_artifact_reward = yes

		if = {
			limit = {
				from = {
					can_be_terraforming_candidate = yes
				}
			}
			custom_tooltip = TERRAFORMING_CANDIDATE_EFFECT
			hidden_effect = {
				from = {
					add_modifier = {
						modifier = "terraforming_candidate"
						days = -1
					}
				}		
			}
		}
		owner = {
			add_monthly_resource_mult = {
				resource = society_research
				value = @tier3researchreward
				min = @tier3researchmin
				max = @tier3researchmax
			}
		}
	}
}

# Prison Planet
ship_event = {
	id = anomalymod.206
	title = "anomalymod.206.name"
	desc = "anomalymod.206.desc"
	picture = GFX_evt_archaeological_dig
	show_sound = event_ship_bridge
	location = FROM
	
	is_triggered_only = yes
	
	immediate = {
		from = { clear_deposits = yes }
		hidden_effect = { owner = { country_event = { id = story.5 days = 30 } } }
	}
	
	option = {
		name = INTRIGUING
		trigger = {
			NAND = {
				owner = {
					NOT = { has_tech_option = tech_penal_colonies }
					NOT = { has_technology = tech_penal_colonies }
					is_egalitarian = no
				}
				leader = {
					OR = {
						has_trait = leader_trait_meticulous
						has_trait = leader_trait_cataloger
						has_trait = leader_trait_expertise_statecraft
					}
				}
			}
		}
		from = {
			add_deposit = d_society_2
			add_deposit = d_engineering_2
		}
		small_artifact_reward = yes
	}
	option = {
		name = anomaly.280.a
		trigger = {
			owner = {
				NOT = { has_tech_option = tech_penal_colonies }
				NOT = { has_technology = tech_penal_colonies }
			}
			leader = {
				OR = {
					has_trait = leader_trait_meticulous
					has_trait = leader_trait_cataloger
					has_trait = leader_trait_expertise_statecraft
				}
			}
		}
		allow = {
			owner = { is_egalitarian = no }
			leader = {
				OR = {
					has_trait = leader_trait_meticulous
					has_trait = leader_trait_cataloger
					has_trait = leader_trait_expertise_statecraft
				}
			}
		}
		from = {
			add_deposit = d_society_2
			add_deposit = d_engineering_2
		}
		owner = { add_research_option = tech_penal_colonies }
	}
}

# Betharian Stone
ship_event = {
	id = anomalymod.207
	title = "anomalymod.207.name"
	desc = "anomalymod.207.desc"
	picture = GFX_evt_arid
	show_sound = event_scanner
	location = FROM
	
	is_triggered_only = yes
	
	option = {
		name = EXCELLENT
		from = {
			add_deposit = d_betharian_deposit
			add_deposit = d_betharian_deposit
		}
	}
}
### Extrasolar Asteroid ###
ship_event = {
	id = anomalymod.208
	title = "anomalymod.208.name"
	desc = "anomalymod.208.desc"
	picture = GFX_evt_mining_station
	show_sound = event_ship_bridge
	location = FROM
	
	is_triggered_only = yes
	
	immediate = {
		FROM = {
			clear_deposits = yes
		}
	}
	
	option = {
		name = FASCINATING
		hidden_effect = {
			owner = {
				begin_event_chain = {
					event_chain = "extrasolar_asteroid_chain"
					target = ROOT.owner
				}
			}
		}
		FROM = {
			add_deposit = d_minerals_3
			add_deposit = d_minerals_3
		}
		FROM = {
			enable_special_project = {
				name = "EXTRASOLAR_ASTEROID_PROJECT"
				location = this
				owner = root.owner
			}
		}
	}
}
# Locate Host System
ship_event = {
	id = anomalymod.209
	title = "PROJECT_COMPLETE"
	picture = GFX_evt_star_chart
	show_sound = event_sensor_ping
	desc = {
		text = "anomalymod.209.a.desc"
		trigger = {
			OR = {
				has_ship_flag = host_system_rich
				has_ship_flag = host_system_broken
			}
		}
	}
	desc = {
		text = "anomalymod.209.c.desc"
		trigger = {
			has_ship_flag = host_system_sensors
		}
	}
	desc = {
		text = "anomalymod.209.d.desc"
		trigger = {
			has_ship_flag = host_system_sensors
		}
	}
	
	is_triggered_only = yes

	immediate = {
		leader = {
			save_event_target_as = asteroid_leader
		}
		random_list = {
			5 = {
				set_ship_flag = host_system_rich
				solar_system = {
					spawn_system = {
						min_distance >= 3
						max_distance <= 10
						initializer = "rich_host_system"
					}
				}
				add_extra_hyperlane_to_spawned_system_effect = yes
				random_system = {
					limit = { has_star_flag = rich_host_system }
					save_event_target_as = host_system
				}
			}
			4 = {
				set_ship_flag = host_system_broken
				solar_system = {
					spawn_system = {
						min_distance >= 3
						max_distance <= 10
						initializer = "broken_host_system"
					}
				}
				add_extra_hyperlane_to_spawned_system_effect = yes
				random_system = {
					limit = { has_star_flag = broken_host_system }
					save_event_target_as = host_system
				}
			}
			3 = {
				set_ship_flag = host_system_sensors
				modifier = {
					factor = 0
					owner = { has_technology = tech_sensors_4 }
				}
			}
			1 = {
				set_ship_flag = host_system_supernova
			}
		}
	}
	
	option = {
		name = anomalymod.209.a
		trigger = {
			has_ship_flag = host_system_rich
		}
		create_point_of_interest = {
			id = extrasolar_asteroid_poi.1
			name = "extrasolar_asteroid_poi"
			desc = "extrasolar_asteroid_poi_desc"
			event_chain = "extrasolar_asteroid_chain"
			location = event_target:host_system
		}
	}
	
	option = {
		name = anomalymod.209.a
		trigger = {
			has_ship_flag = host_system_broken
		}
		create_point_of_interest = {
			id = extrasolar_asteroid_poi.2
			name = "extrasolar_asteroid_poi"
			desc = "extrasolar_asteroid_poi_desc"
			event_chain = "extrasolar_asteroid_chain"
			location = event_target:host_system
		}
	}
	
	option = {
		name = INTERESTING
		trigger = {
			has_ship_flag = host_system_sensors
		}
		owner = {
			end_event_chain = "extrasolar_asteroid_chain"
			if = {
				limit = { NOT = { has_technology = tech_sensors_2 } }
				add_research_option = tech_sensors_2
				add_tech_progress = {
					tech = tech_sensors_2
					progress = 0.5
				}
			}
			else_if = {
				limit = { NOT = { has_technology = tech_sensors_3 } }
				add_research_option = tech_sensors_3
				add_tech_progress = {
					tech = tech_sensors_3
					progress = 0.4
				}
			}
			else_if = {
				limit = { NOT = { has_technology = tech_sensors_4 } }
				add_research_option = tech_sensors_4
				add_tech_progress = {
					tech = tech_sensors_4
					progress = 0.3
				}
			}
		}
	}
	
	option = {
		name = INTRIGUING
		trigger = {
			has_ship_flag = host_system_supernova
		}
		owner = {
			end_event_chain = "extrasolar_asteroid_chain"
			add_monthly_resource_mult = {
				resource = physics_research
				value = @tier3researchreward
				min = @tier3researchmin
				max = @tier3researchmax
			}
			hidden_effect = { set_country_flag = host_system_supernova_country } # follow-up anomaly
		}
	}
	
	after = {
		hidden_effect = {
			remove_ship_flag = host_system_rich
			remove_ship_flag = host_system_broken
			remove_ship_flag = host_system_sensors
			remove_ship_flag = host_system_supernova
		}
	}
}

# Find rich asteroid system
ship_event = {
	id = anomalymod.210
	title = "PROJECT_COMPLETE"
	desc = anomalymod.210.desc
	picture = GFX_evt_mining_station
	show_sound = event_ship_bridge
	
	is_triggered_only = yes
	
	trigger = {
		owner = {
			has_event_chain = "extrasolar_asteroid_chain" 
		}
		FROM = {
			is_point_of_interest = {
				id = extrasolar_asteroid_poi.1
				event_chain = extrasolar_asteroid_chain
				owner = root.owner
			}
		}
	}
	
	option = {
		name = EXCELLENT
		hidden_effect = {
			owner = { remove_point_of_interest = extrasolar_asteroid_poi.1 }
		}
		owner = { end_event_chain = "extrasolar_asteroid_chain" }
		hidden_effect = {
			solar_system = {
				every_system_planet = {
					limit = { is_asteroid = yes }
					set_surveyed = { surveyed = yes surveyor = root.owner } 
				}
			}
		}
	}
}

# Find broken world system
ship_event = {
	id = anomalymod.211
	title = "PROJECT_COMPLETE"
	desc = anomalymod.211.desc
	picture = GFX_evt_mining_station
	show_sound = event_ship_bridge
	
	is_triggered_only = yes
	
	trigger = {
		owner = {
			has_event_chain = "extrasolar_asteroid_chain" 
		}
		FROM = {
			is_point_of_interest = {
				id = extrasolar_asteroid_poi.2
				event_chain = extrasolar_asteroid_chain
				owner = root.owner
			}
		}
	}
	
	option = {
		name = EXCELLENT
		hidden_effect = {
			owner = { remove_point_of_interest = extrasolar_asteroid_poi.2 }
		}
		owner = { end_event_chain = "extrasolar_asteroid_chain" }
		solar_system = {
			every_system_planet = {
				limit = { has_planet_flag = host_broken_planet }
				set_surveyed = { surveyed = yes surveyor = root.owner } 
			}
		}
	}
}

# Another Extrasolar Asteroid
ship_event = {
	id = anomalymod.212
	title = anomalymod.208.name
	desc = anomalymod.212.desc
	picture = GFX_evt_mining_station
	show_sound = event_ship_bridge
	
	is_triggered_only = yes
	
	immediate = {
		FROM = {
			clear_deposits = yes
		}
	}
	
	option = {
		name = INTRIGUING
		FROM = {
			add_deposit = d_minerals_3
			add_deposit = d_minerals_3
		}
	}
}

# Living Metal Spaceborn Entity
ship_event = {
	id = anomalymod.213
	title = "PROJECT_COMPLETE"
	desc = "anomalymod.213.desc"
	picture = GFX_evt_ship_in_orbit
	show_sound = event_scanner
	location = FROMFROM
	
	is_triggered_only = yes
	
	immediate = {
		FROMFROM = {
			clear_deposits = yes
		}
	}
	
	option = {
		name = INCREDIBLE
		FROMFROM = { 
			set_deposit = d_living_metal_deposit
			hidden_effect = {
				add_modifier = {
					modifier = "living_metal_spaceborn_alien"
					days = -1
				}
			}
		}
		owner = {
			if = {
				limit = {
					has_tech_option = tech_mine_living_metal
				}
				add_tech_progress = {
					tech = tech_mine_living_metal
					progress = 0.25
				}
			}
			else = {
				add_research_option = tech_mine_living_metal
			}
			add_monthly_resource_mult = {
				resource = society_research
				value = @tier4researchreward
				min = @tier4researchmin
				max = @tier4researchmax
			}
		}
		leader = { add_experience = 200 }
	}
}

### Giant Skeleton transdimensional being follow-up ###
event = {
	id = anomalymod.214
	hide_window = yes
	
	is_triggered_only = yes
	
	trigger = {
		any_country = {
			any_planet_within_border = { has_modifier = "transdimensional_being" }
			NOT = { has_country_flag = transdimensional_being_event }
			OR = {
				AND = {
					has_event_chain = l_cluster_chain
					NOT = {
						has_completed_event_chain_counter = {
							event_chain = l_cluster_chain
							counter = clues
						}
					}
				}
				AND = {
					OR = {
						has_seen_any_bypass = gateway
						any_relation = {
							OR = {
								is_country_type = default
								is_country_type = ascended_empire
								is_country_type = lost_empire
							}
							has_communications = ROOT
							has_technology = tech_gateway_activation
						}
					}
					NOT = { has_technology = tech_gateway_construction }
				}
			}
		}
	}
	
	immediate = {
		random_country = {
			limit = {
				any_planet_within_border = { has_modifier = "transdimensional_being" }
				NOT = { has_country_flag = transdimensional_being_event }
				OR = {
					AND = {
						has_event_chain = l_cluster_chain
						NOT = {
							has_completed_event_chain_counter = {
								event_chain = l_cluster_chain
								counter = clues
							}
						}
					}
					AND = {
						OR = { 
							has_seen_any_bypass = gateway
							any_relation = {
								OR = {
									is_country_type = default
									is_country_type = ascended_empire
									is_country_type = lost_empire
								}
								has_communications = ROOT
								has_technology = tech_gateway_activation
							}
						}
						NOT = { has_technology = tech_gateway_construction }
					}
				}
			}
			random_list = {
				1 = {
					country_event = { id = anomalymod.215 days = 360 random = 720 }
				}
				9 = {
				}
			}
		}
	}
}
country_event = {
	id = anomalymod.215
	title = "anomalymod.215.name"
	desc = "anomalymod.215.desc"
	picture = "GFX_evt_wormhole"
	show_sound = event_scanner
	
	is_triggered_only = yes
	
	trigger = {
		any_planet_within_border = { has_modifier = "transdimensional_being" }
	}
	
	immediate = {
		set_country_flag = transdimensional_being_event
		random_galaxy_planet = {
			limit = {
				has_modifier = "transdimensional_being"
				exists = space_owner
				space_owner = {
					is_same_value = ROOT
				}
			}
			save_event_target_as = transdimensional_being_planet
		}
	}
	
	option = {
		name = "INTRIGUING"
		event_target:transdimensional_being_planet = {
			enable_special_project = {
				name = "TRANSDIMENSIONAL_BEING_PROJECT"
				location = this
				owner = root
			}
		}
	}
}
# Complete special project
ship_event = {
	id = anomalymod.216
	title = "PROJECT_COMPLETE"
	desc = "anomalymod.216.desc"
	picture = "GFX_evt_drifting_gateway"
	show_sound = event_alien_signal
	
	is_triggered_only = yes
	
	immediate = {
		random_galaxy_planet = {
			limit = {
				has_modifier = "transdimensional_being"
				exists = space_owner
				space_owner = {
					is_same_value = root.owner
				}
			}
			save_event_target_as = transdimensional_being_planet
		}
	}
	
	option = {
		name = "FASCINATING"
		owner = {
			add_monthly_resource_mult = {
				resource = physics_research
				value = @tier3researchreward
				min = @tier3researchmin
				max = @tier3researchmax
			}
			generate_lcluster_clue = yes
		}
	}
}
ship_event = {
	id = anomalymod.217
	title = "PROJECT_COMPLETE"
	desc = "anomalymod.217.desc"
	picture = "GFX_evt_drifting_gateway"
	show_sound = event_alien_signal
	
	is_triggered_only = yes
	
	immediate = {
		random_galaxy_planet = {
			limit = {
				has_modifier = "transdimensional_being"
				exists = space_owner
				space_owner = {
					is_same_value = root.owner
				}
			}
			save_event_target_as = transdimensional_being_planet
		}
	}
	
	option = {
		name = "FASCINATING"
		owner = {
			if = {
				limit = { NOT = { has_technology = tech_gateway_activation } }
				add_research_option = tech_gateway_activation
				add_tech_progress = {
					tech = tech_gateway_activation
					progress = 0.1
				}
			}
			else = {
				add_research_option = tech_gateway_construction
				add_tech_progress = {
					tech = tech_gateway_construction
					progress = 0.1
				}
			}
		}
	}
}

# Barren lakes
ship_event = {
	id = anomalymod.218
	title = "anomalymod.218.name"
	desc = "anomalymod.218.desc"
	picture = GFX_evt_microscopic_life
	show_sound = event_ship_bridge
	location = ROOT
	
	is_triggered_only = yes

	immediate = {
		from = { clear_deposits = yes }
		owner = { country_event = { id = story.1 days = 2 } }
	}
	
	option = {
		name = FASCINATING
		FROM = {
			set_deposit = d_society_3
		}
		if = {
			limit = {
				from = {
					can_be_terraforming_candidate = yes
				}
			}
			custom_tooltip = TERRAFORMING_CANDIDATE_EFFECT
			hidden_effect = {
				from = {
					add_modifier = {
						modifier = "terraforming_candidate"
						days = -1
					}
				}		
			}
		}
	}
}

# Asteroid is gateway
ship_event = {
	id = anomalymod.219
	title = "anomalymod.219.name"
	desc = {
		text = anomalymod.219.a.desc
		trigger = {
			NOT = { 
				owner = { has_country_flag = encountered_first_lgate }
			}
		}
	}
	desc = {
		text = anomalymod.219.b.desc
		trigger = {
			owner = { has_country_flag = encountered_first_lgate }
		}
	}
	picture = GFX_evt_drifting_gateway
	show_sound = event_radio_chatter
	location = FROM
	
	is_triggered_only = yes
	
	option = {
		name = "ASTOUNDING"
		solar_system = {
			save_event_target_as = asteroid_gate
			spawn_megastructure = {
				type = "gateway_ruined" 
				planet = FROM
				orbit_distance = 0
			}
		}
		hidden_effect = {
			FROM = { remove_planet = yes }
			owner = {
				set_country_flag = encountered_first_gateway
				add_seen_bypass_type = gateway
				set_country_flag = lcluster_clue_asteroid_gate
				pop_lcluster_event = yes
			}
		}
	}
}

# gas bags
ship_event = {
	id = anomalymod.220
	title = "anomalymod.220.name"
	desc = "anomalymod.220.desc"
	picture = GFX_evt_animal_wildlife
	show_sound = event_alien_nature
	location = FROM
	
	is_triggered_only = yes
	
	option = {
		name = INTERESTING
		trigger = {
			owner = {
				is_xenophobe = no
				is_homicidal = no
			}
		}
		FROM = {
			add_deposit = d_alien_pets_deposit
		}
		if = {
			limit = {
				owner = { is_gestalt = no }
			}
			custom_tooltip = anomalymod.220.a.tooltip
			hidden_effect = {
				leader = {
					add_trait = leader_trait_gasbag_pet
					add_ruler_trait = trait_ruler_gasbag_pet
				}
			}
		}
	}
	option = {
		name = primitivesexpanded.68.a
		trigger = {
			owner = {
				OR = {
					is_xenophobe = yes
					is_homicidal = yes
				}
				NOT = { has_valid_civic = civic_hive_devouring_swarm }
			}
		}
		FROM = {
			add_deposit = d_alien_pets_deposit
		}
	}
	option = {
		name = TASTY
		trigger = {
			owner = {
				has_valid_civic = civic_hive_devouring_swarm
			}
		}
		FROM = {
			add_deposit = d_alien_pets_deposit
		}
	}
}

# Attacked ore freighter
ship_event = {
	id = anomalymod.221
	title = "anomaly.65.name"
	desc = "anomalymod.221.desc"
	picture = GFX_evt_mining_station
	show_sound = event_ship_bridge
	location = FROM
	
	is_triggered_only = yes

	immediate = { owner = { country_event = { id = story.5 days = 30 } } }
	
	option = {
		name = INTERESTING
		owner = {
			add_monthly_resource_mult = {
				resource = engineering_research
				value = @tier2researchreward
				min = @tier2researchmin
				max = @tier2researchmax
			}
		}
	}
}

# Crashed Titan
ship_event = {
	id = anomalymod.222
	title = "anomalymod.222.name"
	desc = "anomalymod.222.desc"
	picture = "GFX_evt_relic_shipyard"
	show_sound = event_ship_bridge
	location = FROM
	
	is_triggered_only = yes

	immediate = { owner = { country_event = { id = story.5 days = 30 } } }
	
	option = {
		name = "anomaly.35.a"
		trigger = {
			NAND = {
				owner = { NOT = { has_technology = tech_reactor_boosters_3 } }
				leader = {
					OR = {
						has_trait = leader_trait_expertise_field_manipulation
						has_trait = leader_trait_expertise_particles
						has_trait = leader_trait_spark_of_genius
						has_trait = leader_trait_maniacal
					}
				}
			}
		}
		FROM = {
			set_deposit = d_engineering_8
		}
	}
	option = {
		name = "anomaly.280.a"
		trigger = {
			owner = { NOT = { has_technology = tech_reactor_boosters_3 } }
			leader = {
				OR = {
					has_trait = leader_trait_expertise_field_manipulation
					has_trait = leader_trait_expertise_particles
					has_trait = leader_trait_spark_of_genius
					has_trait = leader_trait_maniacal
				}
			}
		}
		FROM = {
			set_deposit = d_engineering_8
		}
		owner = {
			if = {
				limit = { NOT = { has_technology = tech_reactor_boosters_2 } }
				add_research_option = tech_reactor_boosters_2
				add_tech_progress = {
					tech = tech_reactor_boosters_2
					progress = 0.50
				}
			}
			else_if = {
				limit = { NOT = { has_technology = tech_reactor_boosters_3 } }
				add_research_option = tech_reactor_boosters_3
				add_tech_progress = {
					tech = tech_reactor_boosters_3
					progress = 0.25
				}
			}
		}
	}
}

# Volcanic microbes
ship_event = {
	id = anomalymod.223
	title = "anomalymod.223.name"
	desc = "anomalymod.223.desc"
	picture = GFX_evt_microscopic_life
	show_sound = event_ship_bridge
	location = FROM
	
	is_triggered_only = yes

	immediate = {
		from = { clear_deposits = yes }
		owner = { country_event = { id = story.1 days = 2 } }
	}
	
	option = {
		name = FASCINATING
		from = {
			add_deposit = d_energy_3_society_3
		}
	}
}

# Tiyanki nesting grounds
ship_event = {
	id = anomalymod.224
	title = "anomalymod.224.name"
	desc = "anomalymod.224.desc"
	picture = GFX_evt_fleet_evil
	show_sound = event_alien_nature
	location = FROM
	
	is_triggered_only = yes

	immediate = {
		solar_system = {
			create_tiyanki_country = yes
			FROM = {
				save_event_target_as = giant
				event_target:tiyanki_country = {
					save_event_target_as = tiyanki_country2
					create_tiyanki_fleet_1 = yes
					create_tiyanki_fleet_1 = yes
				}
			}
		}
	}
	
	option = {
		name = FASCINATING
		owner = {
			add_monthly_resource_mult = {
				resource = society_research
				value = @tier2researchreward
				min = @tier2researchmin
				max = @tier2researchmax
			}
			if = {
				limit = { NOT = { has_country_flag = tiyanki_encountered } }
				hidden_effect = { set_country_flag = tiyanki_encountered }
				if = {
					limit = {
						has_tech_option = tech_space_whale_weapon_1
					}
					add_tech_progress = {
						tech = tech_space_whale_weapon_1
						progress = 0.6
					}
				}
				else = {
					add_research_option = tech_space_whale_weapon_1
					add_tech_progress = {
						tech = tech_space_whale_weapon_1
						progress = 0.2
					}
				}
			}
		}
	}
}

# Ancient Canals
ship_event = {
	id = anomalymod.225
	title = "anomalymod.225.name"
	desc = "anomalymod.225.desc"
	picture = GFX_evt_warm_barren
	show_sound = event_ship_bridge
	location = FROM
	
	is_triggered_only = yes
	
	immediate = {
		hidden_effect = {
			owner = {
				country_event = { id = story.5 days = 30 }
			}
		}
	}
	
	option = {
		name = anomalymod.225.a
		owner = {
			if = {
				limit = { NOT = { has_technology = tech_hydroponics } }
				add_research_option = tech_hydroponics
				add_tech_progress = {
					tech = tech_hydroponics
					progress = 0.20
				}
			}
			else_if = {
				limit = { NOT = { has_technology = tech_gene_crops } }
				add_research_option = tech_gene_crops
				add_tech_progress = {
					tech = tech_gene_crops
					progress = 0.15
				}
			}
			else = {
				add_monthly_resource_mult = {
					resource = society_research
					value = @tier2researchreward
					min = @tier2researchmin
					max = @tier2researchmax
				}
			}
			if = {
				limit = { NOT = { has_technology = tech_food_processing_1 } }
				add_research_option = tech_food_processing_1
				add_tech_progress = {
					tech = tech_food_processing_1
					progress = 0.20
				}
			}
			else_if = {
				limit = { NOT = { has_technology = tech_food_processing_2 } }
				add_research_option = tech_food_processing_2
				add_tech_progress = {
					tech = tech_food_processing_2
					progress = 0.15
				}
			}
			else = {
				add_monthly_resource_mult = {
					resource = society_research
					value = @tier2researchreward
					min = @tier2researchmin
					max = @tier2researchmax
				}
			}
		}
		if = {
			limit = {
				from = {
					can_be_terraforming_candidate = yes
				}
			}
			custom_tooltip = TERRAFORMING_CANDIDATE_EFFECT
			hidden_effect = {
				from = {
					add_modifier = {
						modifier = "terraforming_candidate"
						days = -1
					}
				}		
			}
		}
	}
}

# Bubbling oceans
ship_event = {
	id = anomalymod.226
	title = "anomalymod.226.name"
	desc = "anomalymod.226.desc"
	picture = GFX_evt_ocean_planet
	show_sound = event_ship_bridge
	location = FROM
	
	is_triggered_only = yes
	
	option = {
		name = FASCINATING
		FROM = {
			add_deposit = d_bubbling_swamp
			add_deposit = d_bubbling_swamp
		}
	}
}

# mineral rich caverns
ship_event = {
	id = anomalymod.227
	title = "anomalymod.227.name"
	desc = "anomalymod.227.desc"
	picture = GFX_evt_arid
	show_sound = event_ship_bridge
	location = FROM
	
	is_triggered_only = yes
	
	option = {
		name = EXCELLENT
		FROM = {
			add_deposit = d_ore_rich_caverns
			add_deposit = d_dust_caverns
		}
	}
}

# ejected microbes
ship_event = {
	id = anomalymod.228
	title = "anomalymod.228.name"
	desc = "anomalymod.228.desc"
	picture = GFX_evt_microscopic_life
	show_sound = event_scanner
	location = FROM
	
	is_triggered_only = yes
	
	immediate = {
		hidden_effect = {
			owner = {
				country_event = { id = story.1 days = 30 }
			}
			FROM = {
				add_modifier = {
					modifier = "asteroid_microbes"
					days = -1
				}
			}
			solar_system = {
				random_system_planet = {
					limit = {
						OR = {
							habitable_planet = yes
							is_nuked = yes
						}
					}
					save_event_target_as = asteroid_microbes_source
					add_modifier = {
						modifier = "asteroid_impacts"
						days = -1
					}
				}
			}
		}
	}
	
	option = {
		name = FASCINATING
		FROM = {
			set_deposit = d_society_4
		}
	}
}

# Discovers strange life-like crystals
ship_event = {
	id = anomalymod.229
	title = "anomalymod.229.name"
	desc = {
		trigger = {
			exists = owner
			owner = { is_gestalt = no }
		}
		text = anomalymod.229.desc
	}
	desc = {
		trigger = {
			exists = owner
			owner = { is_gestalt = yes }
		}
		text = anomalymod.229.desc.gestalt
	}
	picture = GFX_evt_frozen
	show_sound = event_scanner
	location = FROM
	
	is_triggered_only = yes
	
	option = {
		name = anomalymod.229.a
		trigger = { owner = { is_xenophobe = no } }
		FROM = {
			set_deposit = d_rare_crystals_2
		}
		hidden_effect = {
			if = {
				limit = {
					owner = { is_gestalt = no }
				}
				leader = {
					random_list = {
						2 = {  }
						1 = {
							add_trait = leader_trait_substance_abuser
						}
					}
				}
			}
		}
	}
	option = {
		name = anomalymod.229.phobe
		trigger = { owner = { is_xenophobe = yes } }
		FROM = {
			set_deposit = d_rare_crystals_2
		}
		hidden_effect = {
			leader = {
				random_list = {
					4 = {  }
					1 = {
						add_trait = leader_trait_substance_abuser
					}
				}
			}
		}
	}
	option = {
		name = anomalymod.229.b
		FROM = {
			enable_special_project = {
				name = "CRYSTAL_LIFE_PROJECT"
				location = this
				owner = root.owner
			}
		}
	}
}

# special project complete: living crystal corals
ship_event = {
	id = anomalymod.230
	title = "anomalymod.230.name"
	desc = "anomalymod.230.desc"
	picture = GFX_evt_alien_nature
	show_sound = event_ship_bridge
	location = FROMFROM
	
	is_triggered_only = yes
	
	immediate = {
		hidden_effect = {
			owner = {
				country_event = { id = story.2 days = 30 }
			}
		}
	}
	
	option = {
		name = FASCINATING
		FROMFROM = {
			set_deposit = d_exotic_gases_2
			hidden_effect = {
				add_modifier = {
					modifier = "living_crystals"
					days = -1
				}
			}
		}
		owner = {
			add_monthly_resource_mult = {
				resource = society_research
				value = @tier2researchreward
				min = @tier2researchmin
				max = @tier2researchmax
			}
		}
	}
}

# special project complete: inert crystals
ship_event = {
	id = anomalymod.231
	title = "anomalymod.231.name"
	desc = "anomalymod.231.desc"
	picture = GFX_evt_frozen
	show_sound = event_ship_bridge
	location = FROMFROM
	
	is_triggered_only = yes
	
	immediate = {
		FROMFROM = {
			clear_deposits = yes
		}
	}

	option = {
		name = INTERESTING
		trigger = { owner = { is_xenophobe = no } }
		FROMFROM = {
			add_deposit = d_rare_crystals_2
			add_deposit = d_energy_2
		}
	}
	option = {
		name = anomalymod.231.a
		trigger = { owner = { is_xenophobe = yes } }
		FROMFROM = {
			add_deposit = d_rare_crystals_2
			add_deposit = d_energy_2
		}
		owner = {
			add_monthly_resource_mult = {
				resource = physics_research
				value = @tier1researchreward
				min = @tier1researchmin
				max = @tier1researchmax
			}
		}
	}
}

# More oceans under ice
ship_event = {
	id = anomalymod.232
	title = "anomaly.2510.name"
	desc = "anomalymod.232.desc"
	picture = GFX_evt_frozen
	show_sound = event_ship_bridge
	location = FROM
	
	is_triggered_only = yes
	
	immediate = {
		hidden_effect = {
			owner = {
				country_event = { id = story.1 days = 30 }
			}
		}
		FROM = {
			clear_deposits = yes
		}
	}
	option = {
		name = FASCINATING
		FROM = {
			set_deposit = d_society_3
		}
		hidden_effect = {
			FROM = {
				set_planet_flag = underwater_ocean_microbes
				add_modifier = {
					modifier = "subterranean_ocean"
					days = -1
				}
			}
		}
	}
}

# potential ocean follow-up
ship_event = {
	id = anomalymod.233
	hide_window = yes
	is_triggered_only = yes
	
	trigger = {
		from = {
			has_modifier = subterranean_ocean
			has_planet_flag = underwater_ocean_microbes
		}
		exists = owner
		owner = {
			NOT = { has_country_flag = underwater_ocean_microbes_event_fired }
		}
	}
	
	immediate = {
		random_list = {
			1 = {
				FROM = {
					planet_event = { id = anomalymod.234 days = 360 random = 720 }
				}
			}
			1 = {
				# nothing happens
				from = { remove_planet_flag = underwater_ocean_microbes }
			}
		}
	}
}
planet_event = {
	id = anomalymod.234
	hide_window = yes
	is_triggered_only = yes
	
	trigger = {
		has_research_station = yes
		has_modifier = subterranean_ocean
		has_planet_flag = underwater_ocean_microbes
		exists = space_owner
		space_owner = {
			NOT = {
				has_country_flag = underwater_ocean_microbes_event_fired
			}
		}
	}
	
	immediate = {
		space_owner = {
			set_country_flag = underwater_ocean_microbes_event_fired
			country_event = { id = anomalymod.235 }
		}
	}
}
country_event = {
	id = anomalymod.235
	title = "anomalymod.235.name"
	desc = "anomalymod.235.desc"
	picture = GFX_evt_microscopic_life
	show_sound = event_alien_nature
	location = FROM
	
	is_triggered_only = yes
	
	immediate = {
		FROM = { clear_deposits = yes }
	}
	
	option = {
		name = REMARKABLE
		FROM = { add_deposit = d_exotic_gases_1 }
		add_monthly_resource_mult = {
			resource = society_research
			value = @tier2researchreward
			min = @tier2researchmin
			max = @tier2researchmax
		}
	}
}

# Engineering Soil
ship_event = {
	id = anomalymod.236
	title = "anomalymod.236.name"
	desc = "anomalymod.236.desc"
	picture = GFX_evt_arid
	show_sound = event_ship_bridge
	location = FROM
	
	is_triggered_only = yes
	
	immediate = {
		FROM = {
			clear_deposits = yes
		}
	}
	option = {
		name = INTERESTING
		FROM = {
			set_deposit = d_engineering_4
		}
		hidden_effect = {
			FROM = {
				set_planet_flag = engineering_soil_flag
			}
		}
	}
}

# potential mineral follow-up
ship_event = {
	id = anomalymod.237
	hide_window = yes
	is_triggered_only = yes
	
	trigger = {
		from = {
			has_planet_flag = engineering_soil_flag
		}
		exists = owner
		owner = {
			NOT = { has_country_flag = engineering_soil_event_fired }
		}
	}
	
	immediate = {
		FROM = {
			planet_event = { id = anomalymod.238 days = 3600 random = 3600 }
		}
	}
}
planet_event = {
	id = anomalymod.238
	hide_window = yes
	is_triggered_only = yes
	
	trigger = {
		has_research_station = yes
		has_planet_flag = engineering_soil_flag
		space_owner = {
			NOT = {
				has_country_flag = engineering_soil_event_fired
			}
		}
	}
	
	immediate = {
		remove_planet_flag = engineering_soil_flag
		space_owner = {
			set_country_flag = engineering_soil_event_fired
			country_event = { id = anomalymod.239 }
		}
	}
}
country_event = {
	id = anomalymod.239
	title = "anomalymod.239.name"
	desc = "anomalymod.239.desc"
	picture = GFX_evt_physics_research
	show_sound = event_sensor_ping
	location = FROM
	
	is_triggered_only = yes
	
	option = {
		name = EXCELLENT
		if = {
			limit = { NOT = { has_technology = tech_engineering_1 } }
			give_technology = { tech = tech_engineering_1 }
		}
		else_if = {
			limit = { NOT = { has_technology = tech_assembly_pattern } }
			add_research_option = tech_assembly_pattern
			add_tech_progress = {
				tech = tech_assembly_pattern
				progress = 0.5
			}
		}
		else_if = {
			limit = { NOT = { has_technology = tech_construction_templates } }
			add_research_option = tech_construction_templates
			add_tech_progress = {
				tech = tech_construction_templates
				progress = 0.33
			}
		}
		else_if = {
			limit = { has_technology = tech_construction_templates }
			add_research_option = tech_repeatable_reduced_building_time
			add_tech_progress = {
				tech = tech_repeatable_reduced_building_time
				progress = 0.25
			}
		}
	}
}

# Dangerous Purple Rain
ship_event = {
	id = anomalymod.240
	title = "anomalymod.240.name"
	desc = {
		trigger = { has_ship_flag = no_injury }
		text = "anomalymod.240.desc"
	}
	desc = {
		trigger = { has_ship_flag = yes_injury }
		text = "anomalymod.240.desc.alt"
	}
	desc = {
		trigger = { has_ship_flag = yes_death }
		text = "anomalymod.240.desc.dead"
	}
	picture = GFX_evt_toxic
	show_sound = event_scanner
	location = FROM
	force_open = yes
	
	is_triggered_only = yes
	
	immediate = {
		FROM = {
			clear_deposits = yes
		}
		random_list = {
			1 = { set_ship_flag = no_injury }
			1 = { set_ship_flag = yes_injury }
			1 = {
				set_ship_flag = yes_death
				owner = {
					create_leader = {
						class = scientist
						sub_type = survey
						name = random
						species = owner_main_species
					}
					last_created_leader = {
						save_event_target_as = second_in_command
					}
				}
			}
		}
	}
	option = {
		name = FASCINATING
		trigger = { has_ship_flag = no_injury }
	}
	option = {
		name = UNFORTUNATE
		trigger = { has_ship_flag = yes_injury }
		leader = {
			if = {
				limit = {
					NOR = {
						has_trait = trait_machine_unit
						has_trait = trait_mechanical
						has_trait = leader_trait_maimed
					}
				}
				add_trait = leader_trait_maimed
			}
			else = {
				add_trait = leader_trait_paranoid
			}
		}
	}
	option = {
		name = UNFORTUNATE
		trigger = { has_ship_flag = yes_death }
		custom_tooltip = anomaly_failure.400.a.tooltip
		hidden_effect = {
			kill_leader = {
				type = scientist
				show_notification = no
			}
			fleet = { set_leader = event_target:second_in_command }
		}
	}
	after = {
		FROM = {
			add_deposit = d_physics_4
			add_deposit = d_society_4
		}
		hidden_effect = {
			remove_ship_flag = no_injury
			remove_ship_flag = yes_injury
			remove_ship_flag = yes_death
		}
	}
}

# Close Black Hole Encounter
ship_event = {
	id = anomalymod.241
	title = "anomalymod.241.name"
	desc = "anomalymod.241.desc"
	picture = GFX_evt_black_hole
	show_sound = event_scanner
	location = FROM
	
	is_triggered_only = yes
	
	option = {
		name = INTRIGUING
		owner = {
			add_monthly_resource_mult = {
				resource = physics_research
				value = @tier3researchreward
				min = @tier3researchmin
				max = @tier3researchmax
			}
		}
		FROM = {
			solar_system = {
				spawn_system = {
					min_distance = 15
					max_distance = 65
					initializer = "dark_mater_black_hole_system"
				}
			}
			add_extra_hyperlane_to_spawned_system_effect = yes
		}
	}
}

# Elderly Star
ship_event = {
	id = anomalymod.242
	title = "anomalymod.242.name"
	desc = "anomalymod.242.desc"
	picture = GFX_evt_star_yellow
	show_sound = event_scanner
	location = FROM
	
	is_triggered_only = yes
	
	immediate = {
		FROM = {
			clear_deposits = yes
		}
	}
	option = {
		name = INTERESTING
		FROM = {
			add_deposit = d_energy_5
		}
	}
}

# Toxic Soup
ship_event = {
	id = anomalymod.243
	title = "distar.2015.name"
	desc = "anomalymod.243.desc"
	picture = "GFX_evt_toxic"
	show_sound = event_ship_bridge
	location = FROM
	
	is_triggered_only = yes
	
	immediate = {
		FROM = {
			clear_deposits = yes
		}
	}
	option = {
		name = INTERESTING
		FROM = {
			add_deposit = d_energy_3_society_3
		}
	}
}

# Titanic Marine Life
ship_event = {
	id = anomalymod.244
	title = "anomalymod.244.name"
	desc = "anomalymod.244.desc"
	picture = GFX_evt_ocean_planet
	show_sound = event_ship_bridge
	location = FROM
	
	is_triggered_only = yes
	
	option = {
		name = REMARKABLE
		owner = {
			add_monthly_resource_mult = {
				resource = society_research
				value = @tier4researchreward
				min = @tier4researchmin
				max = @tier4researchmax
			}
		}
		FROM = {
			hidden_effect = {
				random_deposit = {
					limit = { is_blocker = yes }
					clear_blocker = yes
				}
			}
			add_modifier = { modifier = titanic_marine_life days = -1 }
			add_deposit = d_titanic_marine_life_blocker
		}
	}
}

planet_event = {
	id = anomalymod.245
	hide_window = yes
	is_triggered_only = yes
	
	trigger = {
		has_modifier = titanic_marine_life
	}
	
	immediate = {
		if = {
			limit = { has_modifier = titanic_marine_life }
			planet_event = { id = anomalymod.246 days = 30 random = 90 }
		}
	}
}

#Titanic Marine Life
planet_event = {
	id = anomalymod.246
	title = "colony_mod.2.name"
	desc = "colony_mod.2.desc"
	picture = GFX_evt_alien_nature
	show_sound = event_air_raid_siren
	location = ROOT
	trackable = yes
	
	trigger = {
		has_owner = yes
		original_owner = yes
		is_homeworld = no
		owner = { is_ai = no }
		has_modifier = "titanic_life"
		NOT = { has_planet_flag = titanic_life_colony_flag }
		has_ground_combat = no
		num_pops > 0
		is_capital = no
	}
	
	immediate = {
		set_planet_flag = titanic_life_colony_flag
	}
	
	is_triggered_only = yes
	
	option = {
		name = colony_mod.2.a# yes
		# study them, may have bad outcome, such as a hostile unit spawning
		enable_special_project = {
			name = "titanic_marine_life_study_normal"
			location = this
			owner = root.owner
		}
	}
	
	option = {
		name = colony_mod.2.b# no
		#no effect, don't bother them
	}
	
	option = {
		name = colony_mod.2.c
		trigger = {
			owner = { OR = { has_ethic = ethic_xenophile has_ethic = ethic_fanatic_xenophile } #nice, for xenophiles
			}
		}
		# study them, bad outcome less likely but takes longer.
		# Remove blockers in success result
		enable_special_project = {
			name = "titanic_marine_life_study_nice"
			location = this
			owner = root.owner
		}
		hidden_effect = {
			set_planet_flag = nice_titan_study
		}
	}
	
	option = {
		name = colony_mod.2.d
		trigger = {
			owner = { 
				OR = { 
					has_ethic = ethic_xenophobe 
					has_ethic = ethic_fanatic_xenophobe 
					has_authority = auth_hive_mind
				} #mean, for xenophobe
			}
		}
		# study them, takes less time but you will likely get a bad effect too
		# huge food output increase
		enable_special_project = {
			name = "titanic_marine_life_study_mean"
			location = this
			owner = root.owner
		}
		add_modifier = {
			modifier = "eat_the_titans"
			days = -1
		}
	}

}

# Titanic Life Study: Good
planet_event = {
	id = anomalymod.247
	title = "colony_mod.101.name"
	desc = {
		trigger = {
			NOT = { has_planet_flag = nice_titan_study }
		}
		text = anomalymod.247.desc
	}
	desc = {
		trigger = {
			has_planet_flag = nice_titan_study
		}
		text = anomalymod.247.desc.phile
	}
	picture = GFX_evt_ocean_planet
	show_sound = event_air_raid_siren
	location = ROOT
	
	is_triggered_only = yes
	
	option = {
		name = EXCELLENT
		owner = {
			if = {
				limit = { NOT = { has_technology = tech_society_1 } }
				add_research_option = tech_society_1
				add_tech_progress = {
					tech = tech_society_1
					progress = 0.25
				}
			}
			else_if = {
				limit = { NOT = { has_technology = tech_society_2 } }
				add_research_option = tech_society_2
				add_tech_progress = {
					tech = tech_society_2
					progress = 0.20
				}
			}
			else_if = {
				limit = { NOT = { has_technology = tech_society_3 } }
				add_research_option = tech_society_3
				add_tech_progress = {
					tech = tech_society_3
					progress = 0.15
				}
			}
			else = {
				add_monthly_resource_mult = {
					resource = society_research
					value = @tier4researchreward
					min = @tier4researchmin
					max = @tier4researchmax
				}
			}
		}
		add_modifier = {
			modifier = "lush_planet"
			days = -1
		}
		add_deposit = d_teeming_reef
		if = {
			limit = { has_planet_flag = nice_titan_study }
			hidden_effect = {
				every_deposit = {
					limit = { is_deposit_type = d_titanic_marine_life_blocker }
					clear_blocker = yes
				}
			}
			custom_tooltip = titanic_marine_phile_tooltip
		}
	}
}

# Titanic Life Study: Bad
planet_event = {
	id = anomalymod.248
	title = "colony_mod.102.name"
	desc = "anomalymod.248.desc"
	picture = GFX_evt_ground_combat
	show_sound = event_air_raid_siren
	location = ROOT
	
	is_triggered_only = yes
	
	option = {
		name = TERRIBLE
		add_planet_devastation = 75
		add_deposit = d_titanic_marine_life_blocker
		add_deposit = d_dangerous_wildlife_blocker
	}
}

# organic starship follow-up
ship_event = {
	id = anomalymod.249
	hide_window = yes
	is_triggered_only = yes
	
	trigger = {
		from = {
			has_modifier = organic_starship
		}
		exists = owner
		owner = {
			NOT = { has_country_flag = organic_starship_event_fired }
			OR = {
				NOT = { has_global_flag = TechAscendant_active }
				NOR = {
					has_tech_option = tech_voidcraft_breakthrough
					has_technology = tech_voidcraft_breakthrough
				}
			}
		}
	}
	
	immediate = {
		random_list = {
			1 = {
				FROM = {
					planet_event = { id = anomalymod.250 days = 3600 random = 3600 }
				}
			}
			1 = {
				# nothing happens
				owner = {
					set_country_flag = organic_starship_event_fired
				}
			}
		}
	}
}
planet_event = {
	id = anomalymod.250
	hide_window = yes
	is_triggered_only = yes
	
	trigger = {
		has_research_station = yes
		has_modifier = organic_starship
		exists = space_owner
		space_owner = {
			NOT = { has_country_flag = organic_starship_event_fired }
			OR = {
				NOT = { has_global_flag = TechAscendant_active }
				NOR = {
					has_tech_option = tech_voidcraft_breakthrough
					has_technology = tech_voidcraft_breakthrough
				}
			}
		}
	}
	
	immediate = {
		space_owner = {
			set_country_flag = organic_starship_event_fired
			country_event = { id = anomalymod.251 }
		}
	}
}
country_event = {
	id = anomalymod.251
	title = "anomalymod.251.name"
	desc = "anomalymod.251.desc"
	picture = GFX_evt_crashed_station
	show_sound = event_scanner
	location = FROM
	
	is_triggered_only = yes
	
	option = {
		name = anomalymod.251.a
		FROM = {
			enable_special_project = {
				name = "ORGANIC_STARHIP_PROJECT"
				location = this
				owner = root
			}
		}
	}
	option = {
		name = anomalymod.251.b
		trigger = { is_ai = no }
	}
}
ship_event = {
	id = anomalymod.252
	title = "PROJECT_COMPLETE"
	desc = "anomalymod.252.desc"
	picture = GFX_evt_crashed_station
	show_sound = event_scanner
	location = ROOT
	
	is_triggered_only = yes
	
	option = {
		name = EXCELLENT
		owner = {
			if = {
				limit = { has_global_flag = TechAscendant_active }
				add_research_option = tech_voidcraft_breakthrough
				add_tech_progress = {
					tech = tech_voidcraft_breakthrough
					progress = 0.15
				}
			}
			else = { add_resource = { society_research = 5000 engineering_research = 5000 } }
		}
	}
}

# Dead Remains
ship_event = {
	id = anomalymod.253
	title = "anomaly.2500.name"
	desc = "anomaly.2500.desc"
	picture = GFX_evt_fleet_evil
	show_sound = event_space_amoeba
	location = FROM
	
	is_triggered_only = yes
	option = {
		name = CURIOUS
		FROM = {
			enable_special_project = {
				name = "DEAD_REMAINS_PROJECT"
				location = this
				owner = root.owner
			}
		}
	}
}
ship_event = {
	id = anomalymod.254
	title = "PROJECT_COMPLETE"
	desc = "anomaly.2501.desc"
	picture = GFX_evt_fleet_evil
	show_sound = event_space_amoeba
	location = FROM
	
	is_triggered_only = yes
	
	immediate = {
		FROMFROM = { clear_deposits = yes }
	}
	option = {
		name = FASCINATING
		FROMFROM = {
			add_modifier = { modifier = spaceborn_alien_graveyard days = -1 }
			set_deposit = d_society_5
		}
		leader = {
			add_experience = 200
			add_trait = leader_trait_expertise_biology
		}
	}
}

# The Slaver's Fate
ship_event = {
	id = anomalymod.255
	title = "anomaly.4145.name"
	desc = {
		text = anomaly.4145.desc
		trigger = {
			owner = {
				is_authoritarian = no
				is_xenophobe = no
				NOT = { has_policy_flag = slavery_allowed }
			}
		}
	}
	desc = {
		text = anomaly.4145.slaver.desc
		trigger = {
			owner = { has_policy_flag = slavery_allowed }
		}
	}
	desc = {
		text = anomaly.4145.soon.desc
		trigger = {
			owner = {
				OR = {
					is_authoritarian = yes
					is_xenophobe = yes
				}
				NOT = { has_policy_flag = slavery_allowed }
			}
		}
	}
	picture = GFX_evt_alien_ruins
	show_sound = event_scanner
	location = FROM
	
	is_triggered_only = yes
	
	option = {
		name = anomaly.4145.a
		trigger = {
			owner = {
				is_authoritarian = no
				is_xenophobe = no
			}
		}
		custom_tooltip = anomaly.4145.a.tooltip
		hidden_effect = {
			owner = {
				add_modifier = { modifier = slavery_bad_juju days = -1 }
			}
		}
		owner = {
			if = {
				limit = { has_policy_flag = slavery_allowed }
				gain_negative_media_coverage = yes
			}
			small_artifact_reward = yes
		}
	}
	option = {
		name = anomaly.4145.b
		trigger = {
			owner = {
				OR = {
					is_authoritarian = yes
					is_xenophobe = yes
				}
			}
		}
		custom_tooltip = anomaly.4145.b.tooltip
		hidden_effect = {
			owner = {
				add_modifier = { modifier = slavery_very_bad_juju days = -1 }
			}
		}
		owner = {
			if = {
				limit = { has_policy_flag = slavery_allowed }
				gain_negative_media_coverage = yes
			}
			small_artifact_reward = yes
		}
	}
}

# Gama-Ray Burst
ship_event = {
	id = anomalymod.256
	title = "anomaly.680.name"
	desc = "anomaly.680.desc"
	picture = GFX_evt_nuclear_explosion
	show_sound = event_super_explosion
	location = FROM
	
	is_triggered_only = yes
	
	option = {
		name = DISCONCERTING
		FROM = {
			add_modifier = { modifier = irradiated_planet days = -1 }
		}
		owner = {
			add_monthly_resource_mult = {
				resource = physics_research
				value = @tier3researchreward
				min = @tier3researchmin
				max = @tier3researchmax
			}
			add_monthly_resource_mult = {
				resource = society_research
				value = @tier3researchreward
				min = @tier3researchmin
				max = @tier3researchmax
			}
		}
	}
}

# Atmospheric Ecosystem
ship_event = {
	id = anomalymod.257
	title = "anomaly.300.name"
	desc = {
		trigger = { NOT = { has_country_flag = new_baldarak_settled } }
		text = "anomalymod.257.desc"
	}
	desc = {
		trigger = { has_country_flag = new_baldarak_settled }
		text = "anomalymod.257.desc.alt"
	}
	picture = GFX_evt_atmospheric_flight
	show_sound = event_ship_bridge
	location = FROM

	is_triggered_only = yes

	immediate = {
		from = { clear_deposits = yes }
		owner = { country_event = { id = story.2 days = 30 } }
	}

	option = {
		name = FASCINATING
		hidden_effect = {
			FROM = {
				add_modifier = {
					modifier = "atmospheric_ecosystem"
					days = -1
				}
			}
		}
		FROM = {
			set_deposit = d_society_4
		}
	}
}

# Covered in Debris (Asteroid)
ship_event = {
	id = anomalymod.258
	title = "anomalymod.258.name"
	desc = "anomalymod.258.desc"
	picture = GFX_evt_mining_station
	show_sound = event_ship_thrusters
	location = FROM
	
	immediate = {
		owner = { country_event = { id = story.5 days = 30 } }
	}
	
	is_triggered_only = yes
			
	option = {
		name = "SCRAPIT"
		owner = { add_resource = { alloys = 100 } }
	}
}

# Atmospheric Object (Gas Giant)
ship_event = {
	id = anomalymod.259
	title = "anomalymod.259.name"
	desc = "anomalymod.259.desc"
	picture = GFX_evt_mining_station
	show_sound = event_ship_thrusters
	location = FROM
	
	is_triggered_only = yes
			
	option = {
		name = "UNFORTUNATE"
		custom_tooltip = anomalymod.259.a.tooltip
		owner = {
			add_monthly_resource_mult = {
				resource = physics_research
				value = @tier1researchreward
				min = @tier1researchmin
				max = @tier1researchmax
			}
		}
	}
}

# Promising Moon (Gas Giant)
ship_event = {
	id = anomalymod.260
	title = "anomalymod.260.name"
	desc = "anomalymod.260.desc"
	picture = GFX_evt_mining_station
	show_sound = event_ship_thrusters
	location = FROM
	
	is_triggered_only = yes
	
	immediate = {
		owner = { country_event = { id = story.5 days = 30 } }
		from = {
			if = {
				limit = { has_deposit_for = shipclass_mining_station }
				clear_deposits = yes
			}
		}
	}
			
	option = {
		name = "anomalymod.260.a"
		from = {
			add_deposit = d_engineering_2
		}
	}
}

# Gas Giant Ship (Gas Giant)
ship_event = {
	id = anomalymod.261
	title = "anomalymod.261.name"
	desc = "anomalymod.261.desc"
	picture = GFX_evt_debris
	show_sound = event_scanner
	location = FROM
	
	is_triggered_only = yes
			
	option = {
		name = "UNFORTUNATE"
		owner = {
			add_monthly_resource_mult = {
				resource = engineering_research
				value = @tier1researchreward
				min = @tier1researchmin
				max = @tier1researchmax
			}
		}
	}
}

# Crashed Cruiser (asteroid)
ship_event = {
	id = anomalymod.262
	title = "anomalymod.262.name"
	desc = "anomalymod.262.desc"
	picture = GFX_evt_debris
	show_sound = event_scanner
	location = FROM
	
	is_triggered_only = yes
	
	immediate = {
		owner = {
			country_event = { id = story.5 days = 30 }
		}
	}
			
	option = {
		name = "FASCINATING"
		owner = {
			add_resource = { alloys = 200 }
		}
	}
}

# Singing Crystals
ship_event = {
	id = anomalymod.263
	title = "anomalymod.263.name"
	desc = "anomalymod.263.desc"
	picture = GFX_evt_mining_station
	show_sound = event_sensor_ping
	location = FROM
	
	is_triggered_only = yes
	
	immediate = {
		owner = {
			set_country_flag = anomaly_failure_400_happened
		}
	}
			
	option = {
		name = "FASCINATING"
		FROM = {
			add_deposit = d_rare_crystals_1
		}
	}
}

# Lost in Space
ship_event = {
	id = anomalymod.264
	title = "anomalymod.264.name"
	desc = "anomalymod.264.desc"
	picture = GFX_evt_scanning_remains
	show_sound = event_ship_bridge
	location = FROM

	is_triggered_only = yes

	immediate = { owner = { country_event = { id = story.5 days = 30 } } }

	option = {
		name = anomalymod.264.a
		small_artifact_reward = yes
		owner = {
			add_monthly_resource_mult = {
				resource = physics_research
				value = @tier1researchreward
				min = @tier1researchmin
				max = @tier1researchmax
			}
		}
	}
}

ship_event = {
	id = anomalymod.265
	title = "anomalymod.265.name"
	desc = "anomalymod.265.desc"
	picture = GFX_evt_asteroid_approaching_planet
	show_sound = event_mystic_reveal
	location = FROM

	is_triggered_only = yes
	
	immediate = {
		owner = { country_event = { id = story.5 days = 30 } }
		FROM = { clear_deposits = yes }
	}
	
	option = {
		name = CURIOUS
		FROM = {
			add_deposit = d_society_5
			if = {
				limit = { has_global_flag = expanded_pops_active }
				add_modifier = { modifier = old_god_shrine days = -1 }
			}
		}
	}
}

##################################
# New Anomaly Category Events
# Reserved 400 - 499
##################################

# Old colony of your species
ship_event = {
	id = anomalymod.400
	title = "anomaly.710.name"
	desc = "anomaly.710.desc"
	picture = GFX_evt_colony_settlement
	show_sound = event_sensor_ping
	location = FROM
	
	is_triggered_only = yes
	
	immediate = {
		owner = {
			random_owned_planet = {
				limit = { habitability = { who = root.owner.owner_species value > 0.70 } }
				weights = {
					base = 1
					modifier = {
						mult = 2
						free_housing >= 2
					}
					modifier = {
						mult = 10
						free_housing >= 4
					}
				}
				save_event_target_as = former_colonist_refuge_planet
			}
		}
	}
	
	option = {
		name = anomaly.710.a
		custom_tooltip = anomaly.710.a.tooltip
		hidden_effect = {
			event_target:former_colonist_refuge_planet = {
				while = {
					count = 8
					create_pop = {
						species = ROOT.owner.owner_species
					}
				}
			}
		}
	}
	option = {
		name = anomaly.710.b
		custom_tooltip = anomaly.710.b.tooltip
		hidden_effect = {
			create_country = {
				name = random
				authority = random
				ethos = random
				civics = {
					civic = civic_increasing_urbanization
					civic = civic_atmospheric_pollution
				}
				origin = "origin_lost_colony"
				species = root.owner.owner_species
				flag = {
					icon = {
						category = "spherical"
						file = "flag_spherical_22.dds"
					}
					background= {
						category = "backgrounds"
						file = "new_dawn.dds"
					}
					colors={
						"turquoise"
						"green"
						"null"
						"null"
					}
				}
				type = primitive
			}
			last_created_country = {
				set_graphical_culture = industrial_01
				set_country_flag = acquired_tech
				set_country_flag = early_space_age 
				set_primitive_age = early_space_age
				set_country_flag = abandoned_primitives
				set_relation_flag = { who = root.owner flag = abandoned_us }
				change_country_flag = {
					icon = {
						category = "special"
						file = "primitive.dds"
					}
					background= {
						category = "backgrounds"
						file = "new_dawn.dds"
					}
					colors={
						"grey"
						"dark_grey"
						"null"
						"null"
					}
				}
			}
			FROM = {
				create_colony = {
					owner = last_created_country
					species = root.owner.owner_species
					ethos = owner
				}
				while = {
					count = 15
					create_pop = {
						species = root.owner.owner_species
					}					
				}
				add_building = building_primitive_farm
				add_building = building_primitive_factory
				add_building = building_primitive_mine

				add_building = building_primitive_power_plant
				add_building = building_primitive_capital
				add_building = building_urban_dwellings
				remove_building = building_colony_shelter
				create_primitive_blockers = yes
			}
		}
	}
}

# Neutronium Armor
ship_event = {
	id = anomalymod.401
	title = "anomalymod.401.name"
	desc = "anomalymod.401.desc"
	picture = GFX_evt_star_pulsar
	show_sound = event_sensor_ping
	location = FROM
	
	is_triggered_only = yes
	
	option = {
		name = FASCINATING
		owner = {
			if = {
				limit = { NOT = { has_technology = tech_ship_armor_2 } }
				give_technology = { tech = tech_ship_armor_2 }
			}
			else_if = {
				limit = { has_tech_option = tech_ship_armor_3 }
				give_technology = { tech = tech_ship_armor_3 }
			}
			else_if = {
				limit = { NOT = { has_technology = tech_ship_armor_3 } }
				add_research_option = tech_ship_armor_3
				add_tech_progress = {
					tech = tech_ship_armor_3
					progress = 0.5
				}
			}
			else_if = {
				limit = { has_tech_option = tech_ship_armor_4 }
				add_tech_progress = {
					tech = tech_ship_armor_4
					progress = 0.5
				}
			}
			else_if = {
				limit = { NOT = { has_technology = tech_ship_armor_4 } }
				add_research_option = tech_ship_armor_4
				add_tech_progress = {
					tech = tech_ship_armor_4
					progress = 0.2
				}
			}
			else_if = {
				limit = { has_tech_option = tech_ship_armor_5 }
				add_tech_progress = {
					tech = tech_ship_armor_5
					progress = 0.25
				}
			}
			else_if = {
				limit = { NOT = { has_technology = tech_ship_armor_5 } }
				add_research_option = tech_ship_armor_5
				add_tech_progress = {
					tech = tech_ship_armor_5
					progress = 0.1
				}
			}
			else_if = {
				add_research_option = tech_repeatable_improved_armor_output
				add_tech_progress = {
					tech = tech_repeatable_improved_armor_output
					progress = 0.1
				}
			}
		}
	}
}

# Prath Stellar Bubble
ship_event = {
	id = anomalymod.402
	title = "anomalymod.402.name"
	desc = "anomalymod.402.desc"
	picture = GFX_evt_metropolis
	show_sound = event_mystic_reveal
	location = FROM
	
	is_triggered_only = yes

	option = {
		name = anomalymod.402.a
		event_target:bubble_world_hab = {
			enable_special_project = {
				name = "THE_BUBBLE_PROJECT"
				location = this
				owner = root.owner
			}
		}
	}
	option = {
		name = anomalymod.402.b
		trigger = {
			owner = { is_ai = yes }
		}
		owner = {
			add_resource = { influence = 200 }
		}
	}
}
ship_event = {
	id = anomalymod.403
	title = "anomalymod.403.name"
	desc = "anomalymod.403.desc"
	picture = GFX_evt_metropolis
	show_sound = event_mystic_reveal
	location = FROM
	
	is_triggered_only = yes

	immediate = {
		owner = {
			set_country_flag = researched_bubble_world_project
		}
	}
	
	option = {
		name = anomalymod.403.a
		owner = {
			if = {
				limit = {
					has_country_flag = colossus_project
					NOT = { has_technology = tech_pk_shielder }
				}
				add_research_option = tech_pk_shielder
				add_tech_progress = {
					tech = tech_pk_shielder
					progress = 0.2
				}
			}
			else_if = {
				limit = {
					NOT = { has_technology = tech_planetary_shield_generator }
				}
				add_research_option = tech_planetary_shield_generator
				add_tech_progress = {
					tech = tech_planetary_shield_generator
					progress = 0.5
				}
			}
			else = {
				add_monthly_resource_mult = {
					resource = physics_research
					value = @tier3researchreward
					min = @tier3researchmin
					max = @tier3researchmax
				}
				add_monthly_resource_mult = {
					resource = society_research
					value = @tier3researchreward
					min = @tier3researchmin
					max = @tier3researchmax
				}
			}
		}
		hidden_effect = {
			owner = {
				country_event = { id = anomalymod.404 days = 15 random = 30 }
			}
		}
	}
}
country_event = {
	id = anomalymod.404
	title = "anomalymod.404.name"
	desc = "anomalymod.404.desc"
	picture = GFX_evt_star_chart
	show_sound = event_alien_signal
	
	is_triggered_only = yes
	
	option = {
		name = ONSCREEN
		country_event = { id = anomalymod.405 }
	}
}
country_event = {
	id = anomalymod.405
	title = action.11.name
	desc = anomalymod.405.desc
	
	diplomatic = yes
	
	is_triggered_only = yes
	
	picture_event_data = {
		room = no_video_feed_room
	}
	
	option = {
		name = CURIOUS
	}
	option = {
		name = anomalymod.405.phobe
		exclusive_trigger = { is_xenophobe = yes }
	}
	option = {
		name = TASTY
		exclusive_trigger = { has_valid_civic = civic_hive_devouring_swarm }
	}
	option = {
		name = EXTERMINATE
		exclusive_trigger = { has_valid_civic = civic_machine_terminator }
	}
}

# Ancient Star
ship_event = {
	id = anomalymod.406
	title = "anomalymod.406.name"
	desc = "anomalymod.406.desc"
	picture = GFX_evt_star_yellow
	show_sound = event_mystic_reveal
	location = FROM
	
	is_triggered_only = yes
	
	immediate = {
		FROM = { clear_deposits = yes }
	}

	option = {
		name = INCREDIBLE
	}
	option = {
		name = anomalymod.406.mat
		exclusive_trigger = { owner = { is_materialist = yes } }
	}
	option = {
		name = anomalymod.406.spir
		exclusive_trigger = { owner = { is_spiritualist = yes } }
	}
	
	after = {
		FROM = {
			set_deposit = d_physics_9
		}
		owner = {
			add_modifier = { modifier = theoretical_upheaval days = 3600 }
		}
	}
}

# Metal Jupiter
ship_event = {
	id = anomalymod.407
	title = "anomalymod.407.name"
	desc = "anomalymod.407.desc"
	picture = GFX_evt_gas_giant
	show_sound = event_scanner
	location = FROM
	
	is_triggered_only = yes
	
	immediate = {
		FROM = { clear_deposits = yes }
	}

	option = {
		name = FASCINATING
		FROM = {
			add_deposit = d_alloys_3
		}
	}
}

# Nuclear Wasteland
ship_event = {
	id = anomalymod.408
	title = "anomaly.675.name"
	desc = {
		trigger = { FROM = { is_cold = yes } }
		text = "anomaly.675.desc_01"
	}
	desc = {
		trigger = { FROM = { is_dry = yes } }
		text = "anomaly.675.desc_02"
	}
	picture = GFX_evt_nuclear_explosion
	show_sound = event_super_explosion
	location = FROM
	
	is_triggered_only = yes
	
	option = {
		name = UNFORTUNATE
		FROM = {
			add_modifier = { modifier = irradiated_planet days = -1 }
			add_deposit = d_irradiated_wasteland_anomaly
			add_deposit = d_city_ruins
			add_deposit = d_bomb_crater
			add_deposit = d_bomb_crater
			add_deposit = d_radioactive_wasteland
			add_deposit = d_radioactive_wasteland
		}
	}
}

# Primitive Probe
ship_event = {
	id = anomalymod.409
	title = "anomalymod.409.name"
	desc = "anomalymod.409.desc"
	picture = GFX_evt_satellite_in_orbit
	show_sound = event_radio_chatter
	location = FROM
	
	is_triggered_only = yes
	
	immediate = {
		solar_system = {
			closest_system = {
				limit = {
					any_system_planet = {
						OR = {
							NOT = { exists = space_owner }
							AND = {
								exists = space_owner
								space_owner = { is_same_value = from.owner }
							}
						}
						OR = {
							AND = {
								is_planet_class = pc_nuked
								NOT = { exists = owner }
							}
							AND = {
								exists = owner
								owner = {
									is_primitive = yes
									has_country_flag = early_space_age
								}
							}
						}
					}
				}
				random_system_planet = {
					limit = {
						OR = {
							NOT = { exists = space_owner }
							AND = {
								exists = space_owner
								space_owner = { is_same_value = from.owner }
							}
						}
						OR = {
							AND = {
								is_planet_class = pc_nuked
								NOT = { exists = owner }
							}
							AND = {
								exists = owner
								owner = {
									is_primitive = yes
									has_country_flag = early_space_age
								}
							}
						}
					}
					save_event_target_as = primitive_probe_planet
					set_planet_flag = primitive_probe_planet
				}
			}
		}
	}

	option = {
		name = anomalymod.409.a
		small_artifact_chance = yes
		event_target:primitive_probe_planet = {
			enable_special_project = {
				name = "PRIMITIVE_PROBE_PROJECT"
				location = this
				owner = root.owner
			}
		}
	}
}
ship_event = {
	id = anomalymod.410
	title = "PROJECT_COMPLETE"
	desc = {
		text = "anomalymod.410.desc.primitive"
		trigger = {
			event_target:primitive_probe_planet = {
				NOT = { is_planet_class = pc_nuked }
			}
		}
	}
	desc = {
		text = "anomalymod.410.desc.nuked"
		trigger = {
			event_target:primitive_probe_planet = {
				is_planet_class = pc_nuked
			}
		}
	}
	picture = {
		trigger = {
			event_target:primitive_probe_planet = {
				NOT = { is_planet_class = pc_nuked }
			}
		}
		picture = GFX_evt_medieval_alien_civilization
	}
	picture = {
		trigger = {
			event_target:primitive_probe_planet = {
				is_planet_class = pc_nuked
			}
		}
		picture = GFX_evt_tomb_world
	}
	show_sound = event_scanner
	location = event_target:primitive_probe_planet
	
	is_triggered_only = yes
	
	immediate = {
		solar_system = {
			random_system_planet = {
				limit = { has_planet_flag = primitive_probe_planet }
				save_event_target_as = primitive_probe_planet
				remove_planet_flag = primitive_probe_planet
			}
		}
	}
	
	option = {
		name = FASCINATING
		trigger = {
			event_target:primitive_probe_planet = {
				NOT = { is_planet_class = pc_nuked }
			}
		}
		owner = {
			add_monthly_resource_mult = {
				resource = unity
				value = 36
				min = 300
				max = 3000
			}
			add_monthly_resource_mult = {
				resource = society_research
				value = @tier4researchreward
				min = @tier4researchmin
				max = @tier4researchmax
			}
		}
	}
	option = {
		name = UNFORTUNATE
		trigger = {
			event_target:primitive_probe_planet = {
				is_planet_class = pc_nuked
			}
		}
		owner = {
			add_monthly_resource_mult = {
				resource = unity
				value = 72
				min = 600
				max = 6000
			}
			add_monthly_resource_mult = {
				resource = society_research
				value = @tier3researchreward
				min = @tier3researchmin
				max = @tier3researchmax
			}
		}
	}
}