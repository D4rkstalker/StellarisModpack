namespace = confrontations_xenoist_militancy_peaceful

pop_faction_event = {

    id = confrontations_xenoist_militancy_peaceful.1
    hide_window = yes

    is_triggered_only = yes

    immediate = {
        random_list = {
            15 = {
                # Xenophile policy wording
                pop_faction_event = { id = confrontations_xenoist_militancy_peaceful.2 }
            }
            15 = {
                # Inspiring speech
                pop_faction_event = { id = confrontations_xenoist_militancy_peaceful.3 }
            }
            15 = {
                # New leader
                pop_faction_event = { id = confrontations_xenoist_militancy_peaceful.4 }
            }
            15 = {
                # Leader got owned
                pop_faction_event = { id = confrontations_xenoist_militancy_peaceful.5 }
            }
            15 = {
                # Faction trade deal
                pop_faction_event = { id = confrontations_xenoist_militancy_peaceful.6 }
            }
            15 = {
                # Faction leader in debt
                pop_faction_event = { id = confrontations_xenoist_militancy_peaceful.7 }
            }
            15 = {
                # Gift
                pop_faction_event = { id = confrontations_xenoist_militancy_peaceful.8 }
            }
        }
    }
}

# Political debate
pop_faction_event = {
    id = confrontations_xenoist_militancy_peaceful.2
    title = confrontations_xenoist_militancy_peaceful.2
    desc = confrontations_xenoist_militancy_peaceful.2.desc
    hide_window = no

    is_triggered_only = yes

    picture = GFX_evt_assembly_fight
    show_sound = event_factions

    immediate = {
        owner = { country_event = { id = confrontations_xenoist.2 } }
    }

    option = {
        name = confrontations_xenoist_militancy_peaceful.2.a

        owner = {
            add_monthly_resource_mult = {
                resource = consumer_goods
                value = 6
                max = 1000
                min = 30
            }
            add_modifier = {
                modifier = xenoist_debates_continue_modifier
                years = 3
            }
        }
    }
    option = {
        name = confrontations_xenoist_militancy_peaceful.2.b

        owner = {
            add_modifier = {
                modifier = xenoist_debates_stopped_modifier
                years = 3
            }
        }
    }
}

# Inspiring Speech
pop_faction_event = {
    id = confrontations_xenoist_militancy_peaceful.3
    title = confrontations_xenoist_militancy_peaceful.3
    desc = confrontations_xenoist_militancy_peaceful.3.desc
    hide_window = no

    is_triggered_only = yes

    picture = GFX_evt_assembly_fight
    show_sound = event_factions

    trigger = {
        owner = {
            count_owned_leader = {
                limit = {
                    leader_of_faction = prevprev
                }
                count = 1
            }
        }
    }

    immediate = {
        owner = { country_event = { id = confrontations_xenoist.2 } }
    }

    option = {
        name = confrontations_xenoist_militancy_peaceful.3.a

        owner = {
            random_owned_pop = {
                limit = {
                    OR = {
                        is_pop_category = ruler
                        is_pop_category = specialist
                    }
                    NOT = {
                        pop_has_ethic = ethic_xenophile
                    }
                }
                pop_change_ethic = ethic_xenophile
            }
            random_owned_pop = {
                limit = {
                    OR = {
                        is_pop_category = ruler
                        is_pop_category = specialist
                    }
                    NOT = {
                        pop_has_ethic = ethic_xenophile
                    }
                }
                pop_change_ethic = ethic_xenophile
            }
        }
    }
    option = {
        name = confrontations_xenoist_militancy_peaceful.3.b

        owner = {
            add_modifier = {
                modifier = xenoist_speech_stopped_modifier
                years = 3
            }
        }
    }
}

# New leader
pop_faction_event = {
    id = confrontations_xenoist_militancy_peaceful.4
    title = confrontations_xenoist_militancy_peaceful.4
    desc = confrontations_xenoist_militancy_peaceful.4.desc
    hide_window = no

    is_triggered_only = yes

    picture = GFX_evt_acquire_asset
    show_sound = event_factions

    immediate = {
        owner = { country_event = { id = confrontations_xenoist.2 } }
    }

    option = {
        name = confrontations_xenoist_militancy_peaceful.4.a
        trigger = {
            NOT = {
                is_pop_faction_type = imperialist
                is_pop_faction_type = gov_imperialist
                is_pop_faction_type = imperialist_radicals
            }
        }
        owner = {
            create_leader = {
                name = random
                class = governor
                skill = 2
                species = owner_main_species
                traits = {
                    trait = random_trait
                }
            }
        }
    }
    option = {
        name = confrontations_xenoist_militancy_peaceful.4.b
        trigger = {
            NOR = {
                is_pop_faction_type = traditionalist
                is_pop_faction_type = gov_traditionalist
                is_pop_faction_type = traditionalist_radicals
            }
        }
        owner = {
            create_leader = {
                name = random
                class = scientist
                skill = 2
                species = owner_main_species
                traits = {
                    trait = random_trait
                }
            }
        }
    }
    option = {
        name = confrontations_xenoist_militancy_peaceful.4.c
        trigger = {
            NOR = {
                is_pop_faction_type = prosperity
                is_pop_faction_type = gov_prosperity
                is_pop_faction_type = prosperity_radicals
            }
        }
        owner = {
            create_leader = {
                name = random
                class = admiral
                skill = 2
                species = owner_main_species
                traits = {
                    trait = random_trait
                }
            }
        }
    }
    option = {
        name = confrontations_xenoist_militancy_peaceful.4.d
        trigger = {
            NOT = {
                is_pop_faction_type = prosperity
                is_pop_faction_type = gov_prosperity
                is_pop_faction_type = prosperity_radicals
            }
        }
        owner = {
            create_leader = {
                name = random
                class = general
                skill = 2
                species = owner_main_species
                traits = {
                    trait = random_trait
                }
            }
        }
    }
}

# Leader get owned!
pop_faction_event = {
    id = confrontations_xenoist_militancy_peaceful.5
    title = confrontations_xenoist_militancy_peaceful.5
    desc = confrontations_xenoist_militancy_peaceful.5.desc
    hide_window = no

    is_triggered_only = yes

    picture = GFX_evt_acquire_asset
    show_sound = event_factions

    trigger = {
        owner = {
            count_pop_faction = {
                limit = {
                    NOT = {
                        is_same_value = root
                    }
                    NOR = {
                        is_pop_faction_type = gov_imperialist
                        is_pop_faction_type = gov_supremacist
                        is_pop_faction_type = gov_progressive
                        is_pop_faction_type = gov_technologist
                        is_pop_faction_type = gov_prosperity
                        is_pop_faction_type = gov_xenoist
                        is_pop_faction_type = gov_totalitarian
                        is_pop_faction_type = gov_traditionalist
                    }
                    owner = {
                        count_owned_leader = {
                            limit = {
                                leader_of_faction = prevprev
                                NOT = {
                                    leader_class = ruler
                                }
                            }

                            count = 1
                        }
                    }
                }
                count > 0
            }
        }
    }

    immediate = {
        owner = {
            random_pop_faction = {
                limit = {
                    NOT = {
                        is_same_value = root
                    }
                    NOR = {
                        is_pop_faction_type = gov_imperialist
                        is_pop_faction_type = gov_supremacist
                        is_pop_faction_type = gov_progressive
                        is_pop_faction_type = gov_technologist
                        is_pop_faction_type = gov_prosperity
                        is_pop_faction_type = gov_xenoist
                        is_pop_faction_type = gov_totalitarian
                        is_pop_faction_type = gov_traditionalist
                    }
                    owner = {
                        count_owned_leader = {
                            limit = {
                                NOT = {
                                    leader_class = ruler
                                }
                                leader_of_faction = prevprev
                            }
                            count = 1
                        }
                    }
                }
                weights = {
                    base = 1
                    modifier = {
                        add = 1
                        is_pop_faction_type = supremacist
                    }
                    modifier = {
                        add = 3
                        is_pop_faction_type = supremacist_radicals
                    }
                }
                save_event_target_as = confronted_leader_faction

                owner = {
                    every_owned_leader = {
                        limit = {
                            leader_of_faction = event_target:confronted_leader_faction
                        }
                        save_event_target_as = confronted_leader
                    }
                }
            }
            country_event = { id = confrontations_xenoist.2 }
        }
    }

    option = {
        name = confrontations_xenoist_militancy_peaceful.5.a
        trigger = {
            owner = {
                count_owned_leader = {
                    count > 0
                    limit = {
                        leader_of_faction = root
                        NOT = {
                            has_trait = leader_trait_substance_abuser
                        }
                    }
                }
            }
        }
        owner = {
            every_owned_leader = {
                limit = {
                    leader_of_faction = root
                }
                add_trait = leader_trait_substance_abuser
            }
        }
    }
    option = {
        name = confrontations_xenoist_militancy_peaceful.5.b
        trigger = {
            owner = {
                count_owned_leader = {
                    count > 0
                    limit = {
                        leader_of_faction = root
                        has_trait = leader_trait_substance_abuser
                    }
                }
            }
        }
        owner = {
            every_owned_leader = {
                limit = {
                    leader_of_faction = root
                }
                kill_leader = {}
            }
        }
    }

    option = {
        name = confrontations_xenoist_militancy_peaceful.5.c
        trigger = {
            NOT = {
                event_target:confronted_leader = {
                    has_trait = leader_trait_substance_abuser
                }
            }
        }
        event_target:confronted_leader = {
            add_trait = leader_trait_substance_abuser
        }
    }
    option = {
        name = confrontations_xenoist_militancy_peaceful.5.d
        trigger = {
            event_target:confronted_leader = {
                has_trait = leader_trait_substance_abuser
            }
        }
        event_target:confronted_leader = {
            kill_leader = {}
        }
    }
}

# Faction trade deal
pop_faction_event = {
    id = confrontations_xenoist_militancy_peaceful.6
    title = confrontations_xenoist_militancy_peaceful.6
    desc = confrontations_xenoist_militancy_peaceful.6.desc
    hide_window = no

    is_triggered_only = yes

    picture = GFX_evt_tradedeal
    show_sound = event_factions

    trigger = {
        owner = {
            count_owned_leader = {
                count > 0
                limit = {
                    leader_of_faction = root
                    NOT = {
                        has_trait = leader_trait_arrested_development
                    }
                }
            }
        }
    }

    immediate = {
        owner = { country_event = { id = confrontations_xenoist.2 } }
    }

    option = {
        name = confrontations_xenoist_militancy_peaceful.6.a

        owner = {
            add_monthly_resource_mult = {
                resource = consumer_goods
                value = 6
                max = 1000
                min = 30
            }
            add_monthly_resource_mult = {
                resource = energy
                value = -9
                max = -30
                min = -1000
            }
        }
    }
    option = {
        name = confrontations_xenoist_militancy_peaceful.6.b

        owner = {
            add_modifier = {
                modifier = xenoist_deal_stopped_modifier
                years = 3
            }
        }
    }
}

# Faction leader in debt
pop_faction_event = {
    id = confrontations_xenoist_militancy_peaceful.7
    title = confrontations_xenoist_militancy_peaceful.7
    desc = confrontations_xenoist_militancy_peaceful.7.desc
    hide_window = no

    is_triggered_only = yes

    picture = GFX_evt_cover_blown
    show_sound = event_factions

    immediate = {
        owner = { country_event = { id = confrontations_xenoist.2 } }
    }

    option = {
        name = confrontations_xenoist_militancy_peaceful.7.a

        owner = {
            add_monthly_resource_mult = {
                resource = energy
                value = -6
                min = -300
                max = -900
            }
        }
    }
    option = {
        name = confrontations_xenoist_militancy_peaceful.7.b

        owner = {
            every_owned_leader = {
                limit = {
                    leader_of_faction = root
                    NOT = {
                        has_trait = leader_trait_arrested_development
                    }
                }
                add_trait = leader_trait_arrested_development
            }

            add_modifier = {
                modifier = xenoist_debt_stopped_modifier
                years = 3
            }
        }
    }
}

# Gift
pop_faction_event = {
    id = confrontations_xenoist_militancy_peaceful.8
    title = confrontations_xenoist_militancy_peaceful.8
    desc = confrontations_xenoist_militancy_peaceful.8.desc
    hide_window = no

    is_triggered_only = yes

    picture = GFX_evt_ship_offloading_cargo
    show_sound = event_factions

    immediate = {
        owner = { country_event = { id = confrontations_xenoist.2 } }
    }

    option = {
        name = confrontations_xenoist_militancy_peaceful.8.a

        owner = {
            add_monthly_resource_mult = {
                resource = consumer_goods
                value = 6
                max = 1000
                min = 25
            }
            add_monthly_resource_mult = {
                resource = energy
                value = 6
                max = 1000
                min = 25
            }
            add_modifier = {
                modifier = xenoist_gift_continue_modifier
                years = 3
            }
        }
    }
}