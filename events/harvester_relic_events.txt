namespace = harvester_relic
@triumph_duration = 3600
@activation_cost = 3000

# Captured SHI-VA AI relic interaction
country_event = {
	id = harvester_relic.1
	title = TRANSMISSION
	desc = {
		text = "harvester_relic.1.a.desc"
		trigger = {	has_country_flag = used_shiva_relic	}
	}
	desc = {
		text = "harvester_relic.1.b.desc"
		trigger = {	has_country_flag = used_shiva_relic	}
	}
	desc = {
		text = "harvester_relic.1.c.desc"
		trigger = {	has_country_flag = used_shiva_relic	}
	}	
	desc = {
		text = "harvester_relic.1.d.desc"
		trigger = {	NOT = { has_country_flag = used_shiva_relic	} }
	}

	diplomatic = yes

	picture_event_data = {
		room = crisis_room
		portrait = event_target:shiva_relic_ai
	}

	is_triggered_only = yes

	# Spawn a small harvest drone fleet with submind admiral
	option = {
		name = harvester_relic.1.option.a
		response_text = harvester_relic.1.option.a.response
		custom_tooltip = shiva_relic_a
		hidden_effect = {
			if = {
				limit = {
					NOT = {
						has_country_flag = used_shiva_relic
					}
				}
				set_country_flag = "used_shiva_relic"
			}
			create_harvester_relic_fleet = yes
			add_modifier = {
				modifier = "relic_activation_cooldown"
				days = @triumph_duration
			}
		}
	}
	
	# Create a Submind Governor
	option = {
		name = harvester_relic.1.option.b
		response_text = harvester_relic.1.option.b.response
		custom_tooltip = shiva_relic_b
		hidden_effect = {
			if = {
				limit = {
					NOT = {
						has_country_flag = used_shiva_relic
					}
				}
				set_country_flag = "used_shiva_relic"
			}
			create_harvester_subai_governor = yes
			add_modifier = {
				modifier = "relic_activation_cooldown"
				days = @triumph_duration
			}
		}		
	}
	
	# Harvest a planet
	option = {
		name = harvester_relic.1.option.c
		response_text = harvester_relic.1.option.c.response
		custom_tooltip = shiva_relic_c
		hidden_effect = {
			if = {
				limit = {
					NOT = {
						has_country_flag = used_shiva_relic
					}
				}
				set_country_flag = "used_shiva_relic"
			}
			set_country_flag = "harvest_relic_decision"
			add_modifier = {
				modifier = "relic_activation_cooldown"
				days = @triumph_duration
			}
		}		
	}

	# Do nothing
	option = {
		name = harvester_relic.1.option.d
		response_text = harvester_relic.1.option.d.response
		custom_tooltip = shiva_relic_d
		hidden_effect = {
			if = {
				limit = {
					NOT = {
						has_country_flag = used_shiva_relic
					}
				}
				set_country_flag = "used_shiva_relic"
			}
			add_resource = { unity = 3000 }
		}
	}
}
