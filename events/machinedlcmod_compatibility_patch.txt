namespace = machinedlc_builtintrigger
#global flag for compatibility patch to check if this mod is activated
event = {
	id = machinedlc_builtintrigger.1
    hide_window = yes
	is_triggered_only = yes
	
	immediate = {
		set_global_flag = xvcv_machinedlcmod_enabled
	}
}
#trigger for district compatibility patch
planet_event = {
    id = machinedlc_builtintrigger.2
    hide_window = yes
	is_triggered_only = yes
	
    trigger = {
		NOT = { has_planet_flag = xvcv_machinedlcmod_planet }
	}
    immediate = {
		set_planet_flag = xvcv_machinedlcmod_planet
    }
}
#compatibility for 'Animated Synthetics Portraits Expanded: Reborn' mod
country_event = {
    id = machinedlc_builtintrigger.3
    hide_window = yes
	is_triggered_only = yes

    trigger = {
		NOT = { is_species_class = EXTSYNTH_BIO }
		has_valid_civic = civic_synth_ascended
	}

	immediate = {
		country_event = { id = machinedlc.4 }
	}
}
country_event = {
    id = machinedlc_builtintrigger.4
    hide_window = yes
	is_triggered_only = yes

    trigger = {
        has_valid_civic = civic_synth_ascended
        has_global_flag = extended_synths_on
	}

	immediate = {
		owner_species = {
			create_species = {
				is_mod = yes
				name = this
				namelist = this.prev
				plural = this
				class = "EXTSYNTH"
				portrait = this
				traits = this
			}
		}
		every_owned_pop = {
			limit = {
				species = { has_trait = trait_mechanical }
			}
			change_species = last_created
		}
		change_dominant_species = { species = last_created }
		
		owner_species = {
			rename_species = {
				prompt_country = prev #If targeted country is a player they will get a popup asking for a name/plural/adjective combo. Otherwise the species will get a random name from the specified name_list
				name_list = ascension_list
			}
		}

		every_owned_ship = {
			limit = {
				is_ship_class = shipclass_colonizer
				species = {
					has_trait = trait_mechanical
				}
			}
			change_species = last_created
		}

		every_owned_army = {
			limit = {
				exists = species
				exists = planet
				species = {
					has_trait = trait_mechanical
				}
				army_type = assault_army
			}
			modify_army = {
				name = random
				type = "robotic_army"
				species = last_created_species
			}
		}

		every_owned_army = {
			limit = {
				exists = species
				exists = planet
				species = {
					has_trait = trait_mechanical
				}
				army_type = defense_army
			}
			modify_army = {
				name = random
				type = "robotic_defense_army"
				species = last_created_species
			}
		}
		
		every_owned_leader = {
			change_species = last_created
			change_leader_portrait = species
		}
		every_pool_leader = {
			change_species = last_created
			change_leader_portrait = species
		}
	}
}
#compatibility patch notification for starnet mod
country_event = {
	id = machinedlc_builtintrigger.5
	title = "machinedlc_builtintrigger.5.name"
	desc = "machinedlc_builtintrigger.5.desc"
	picture = GFX_evt_machinedlc
	is_triggered_only = yes

    trigger = {
		has_global_flag = str_enabled_flag
		NOT = { has_global_flag = machinedlc_starnet_patch_enabled }
	}

	option = {
		name = machinedlc_builtintrigger.5.a
	}
}
#compatibility patch notification for nsc season 4 mod
country_event = {
	id = machinedlc_builtintrigger.6
	title = "machinedlc_builtintrigger.6.name"
	desc = "machinedlc_builtintrigger.6.desc"
	picture = GFX_evt_machinedlc
	is_triggered_only = yes

    trigger = {
		has_global_flag = has_nsc_active
		NOT = { has_global_flag = machinedlc_nsc_patch_enabled }
	}

	option = {
		name = machinedlc_builtintrigger.5.a
	}
}