namespace = pop_merge_event

event = {
	id = pop_merge_event.0
	hide_window = yes
	is_triggered_only = yes
	immediate = {
		every_country = {
			limit = {
				is_ai = no
			}

			country_event = { id = pop_merge_event.1 }
		}

	}
}
country_event = {
	id = pop_merge_event.1
	hide_window = yes
	is_triggered_only = yes
	immediate = {
		every_owned_pop_species = {
			limit = {
				
				has_trait = trait_assimilation_target				
				OR = {
					has_trait = trait_mechanical
					has_trait = trait_machine_unit
				}

			}
			save_event_target_as = species_merge_target
						
		}
		while = {
			count = 50
			random_owned_pop = {
				limit = {
					OR = {
						has_trait = trait_mechanical
						has_trait = trait_machine_unit
					}
					has_trait = trait_assimilate
				}
				change_species = event_target:species_merge_target
			}
		}

	}	
}
