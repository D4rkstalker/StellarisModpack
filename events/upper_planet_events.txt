namespace = planetupper

#Class 4 Singularity Demolish
planet_event = {
	id = planetupper.1001
	is_triggered_only = yes
	title = "class_4_singularity_demolish"
	picture = GFX_evt_alien_city
	show_sound = event_activating_unknown_technology
	location = root

	trigger = {
		last_building_changed = building_class_4_singularity
	}

	desc = {
		trigger = {
			owner = {
				NAND = {
					has_technology = tech_extreme_energies 
					has_technology = tech_special_materials
				}
			}
			text = "ee_sm_NAND_knowledge"
		}
	}
	desc = {
		trigger = {
			owner = {
				OR = {
					has_technology = tech_extreme_energies 
					has_technology = tech_special_materials
				}
			}
			text = "ee_sm_NOR_knowledge"
		}
	}
	desc = {
		trigger = {
			owner = {
				has_technology = tech_extreme_energies 
				has_technology = tech_special_materials
			}
			text = "ee_sm_has_knowledge"
		}
	}

	option = {
		name = "ee_sm_excellent"
			trigger = {
				owner = {
					has_technology = tech_extreme_energies 
					has_technology = tech_special_materials
				}
			}
			allow = {
				owner = {
					NOT = {
						has_country_flag = ee_sm_opinion
					}
				} 
			}
			owner = {
				add_resource = {
					resource_starcore = 50
					resource_illunia = 50
				}
			}
		}

	option = {
		name = "ee_sm_work_on_it"
		custom_tooltip = "ee_sm_are_lost"
		custom_tooltip = "ee_sm_get_bonus_weight"
		trigger = {
			owner = {
				NOR = {
					has_technology = tech_extreme_energies 
					has_technology = tech_special_materials
				}
			}
		}
		allow = {
			owner = {
				NOT = {
					has_country_flag = ee_sm_opinion
				}
			} 
		}
		hidden_effect = {
			owner = {
				set_country_flag = ee_sm_bonus_weight
			}
		}
	}

	option = {
		name = "ee_sm_ignore"
		custom_tooltip = "ee_sm_are_lost"
	}

	option = {
		name = "ee_sm_heresy"
		custom_tooltip = "ee_sm_are_lost"
		custom_tooltip = "ee_sm_get_reduced_weight"
		allow = {
			owner = {
				NOT = {
					has_country_flag = ee_sm_do_not_repeat
				}
			}
		}
		trigger = {
			owner = {
				OR = {
					has_ethic = ethic_spiritualist
					has_ethic = ethic_fanatic_spiritualist
				}
			}
		}
		owner = {
			add_resource = {
				unity = 500
				influence = 25
			}
		}
		hidden_effect = {
			owner = {
				set_timed_country_flag = {
					flag = ee_sm_reduced_weight
					months = 6
				}
				set_timed_country_flag = {
					flag = ee_sm_do_not_repeat
					months = 12
				}
				set_timed_country_flag = {
					flag = ee_sm_opinion
					months = 24
				}
			}
		}
	}
}