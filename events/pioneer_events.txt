namespace = pioneer

#Spawns PoIs and rolls initial event chances
country_event = {
	id = pioneer.2
	is_triggered_only = yes
	hide_window = yes
	
	trigger = {
		has_origin = origin_pioneer
	}

	immediate = {
		begin_event_chain = {
			event_chain = "pioneer_chain"
			target = ROOT
		}
		capital_scope.solar_system = {
			closest_system = {
				limit = { has_star_flag = neighbor_t1_first_colony }
				max_steps = 3
				save_event_target_as = pioneer_bad_ideal
#				set_star_flag = pioneer_system_bad
			}
			closest_system = {
				limit = { has_star_flag = neighbor_t2_second_colony }
				max_steps = 6
				save_event_target_as = pioneer_good_ideal
#				set_star_flag = pioneer_system_good
				if = {
					limit = { has_star_flag = precursor_zroni_1 }
					remove_star_flag = precursor_zroni_1
				}
				if = {
					limit = { has_star_flag = precursor_baol_1 }
					remove_star_flag = precursor_baol_1
				}
			}
		}
		hidden_effect = {
			create_point_of_interest = {
				id = pioneer_poi.1
				name = "pioneer_search_1_poi"
				desc = "pioneer_search_1_poi_desc"
				event_chain = "pioneer_chain"
				location = event_target:pioneer_bad_ideal
			}
			create_point_of_interest = {
				id = pioneer_poi.2
				name = "pioneer_search_2_poi"
				desc = "pioneer_search_2_poi_desc"
				event_chain = "pioneer_chain"
				location = event_target:pioneer_good_ideal
			}
		}
		random_list = {
			# Primitive Colony
			10 = { set_country_flag = pioneer_result_1 }
			# Crystalline Entity
			10 = { set_country_flag = pioneer_result_2 }
		}
	}
}

#Fires first Missing Event and splits the path.
ship_event = {
	id = pioneer.3
	is_triggered_only = yes
	
	title = "pioneer.3.name"
	desc = "pioneer.3.desc"
	
	picture = GFX_evt_star_chart
	show_sound = event_default
	location = root
	
	trigger = {
		owner = { has_event_chain = "pioneer_chain" }
		from = { has_planet_flag = prescripted_ideal }
		solar_system = {
			is_point_of_interest = {
				id = pioneer_poi.1
				event_chain = pioneer_chain
				owner = root.owner
			}
		}
	}
	
	immediate = {
		owner = { remove_point_of_interest = pioneer_poi.1 }
		if = {
			limit = { num_marauder_empires_to_spawn > 0 }
			random_list = {
				10 = { owner = { country_event = { id = pioneer.4 days = 1800 random = 360 } } }
				10 = { owner = { country_event = { id = pioneer.5 days = 3600 random = 360 } } }
			}
		}
		else = {
			owner = { country_event = { id = pioneer.5 days = 3600 random = 360  } } 
		}
		hidden_effect = {
			create_point_of_interest = {
				id = pioneer_poi.1.lost
				name = "pioneer_search_1_lost_poi"
				desc = "pioneer_search_1_lost_poi_desc"
#				location = event_target:pioneer_bad_ideal
				event_chain = "pioneer_chain"
			}
		}
	}
	
	option = {
		name = pioneer.3.a
	}
}

#Starts Pioneer Warp Event
country_event = {
	id = pioneer.5
	is_triggered_only = yes
	
	title = "pioneer.5.name"
	desc = "pioneer.5.desc"
	
	picture = "GFX_evt_wormhole"
	show_sound = event_default
	location = event_target:pioneer_bad_ideal
	
	immediate = {
		remove_point_of_interest = pioneer_poi.1.lost
		create_ambient_object = {
			type = pioneer_warp_object
			location = fromfrom
		}
		fromfrom = {
			solar_system = {
				random_system_ambient_object = {
					limit = { is_same_value = last_created_ambient_object }
					set_location = {
						target = fromfrom.solar_system.star
						distance = 200
						angle = random
					}
				}
			}
		}
		last_created_ambient_object = {
			save_event_target_as = pioneer_warp
			enable_special_project = {
				name = "PIONEER_WARP"
				location = this
				owner = root
			}
		}
		last_created_ambient_object = {
			save_event_target_as = pioneer_warp_probe
		}
	}
	option = {
		name = pioneer.5.a
	}
}

#Project completion.
ship_event = {
	id = pioneer.6
	is_triggered_only = yes
	
	title = "pioneer.6.name"
	desc = "pioneer.6.desc"
	
	picture = "GFX_evt_ship_in_orbit"
	show_sound = event_default
	location = root
	
	immediate = {
		fromfrom = { destroy_ambient_object = this }
		root.owner = { save_event_target_as = pioneer_warp_owner }
		root.solar_system = { save_event_target_as = pioneer_warp_system }
	}
	
	option = {
		name = pioneer.6.a
		root.fromfromfromfrom = {
			if = {
				limit = { is_owned_by = event_target:pioneer_warp_owner }
				while = {
					count = 2
					create_pop = {
						species = owner_main_species
					}
				}
			}
			else_if = {
				limit = { has_owner = no }
				start_colony = { species = owner_main_species owner = event_target:pioneer_warp_owner }
			}
			else_if = {
				limit = { NOT = { is_owned_by = event_target:pioneer_warp_owner } }
				capital_scope = {
					create_pop = { species = owner_main_species }
				}
			}
		}
	}
	option = {
		name = pioneer.6.b
		owner = { set_country_flag = pioneer_warp_colony }
		hidden_effect = {
			owner = { country_event = { id = pioneer.7 days = 3600 random = 360 } }
			create_point_of_interest = {
				id = pioneer_poi.1.system
				name = "pioneer_search_1_system_poi"
				desc = "pioneer_search_1_system_poi_desc"
				event_chain = "pioneer_chain"
			}
		}		
		custom_tooltip = pioneer.6.col
	}
}

#Whisper 1
country_event = {
	id = pioneer.7
	
	title = pioneer.7.name
	desc = pioneer.7.desc
	
	picture = "GFX_evt_wormhole"
	show_sound = event_default
	
	is_triggered_only = yes
	
	immediate = {
		hidden_effect = {
			remove_point_of_interest = pioneer_poi.1.system		
		
			create_point_of_interest = {
				id = pioneer_poi.1.whispers
				name = "pioneer_search_1_whispers_poi"
				desc = "pioneer_search_1_whispers_poi_desc"
				event_chain = "pioneer_chain"
			}
		}
	}
	
	option = {
		name = pioneer.7.a
		hidden_effect = {
			country_event = { id = pioneer.8 days = 7200 random = 360 }
		}
	}
}

#Whisper 2
country_event = {
	id = pioneer.8
	
	title = pioneer.8.name
	desc = pioneer.8.desc
	
	picture = "GFX_evt_wormhole"
	show_sound = event_default
	
	is_triggered_only = yes
	
	option = {
		name = pioneer.8.a
		hidden_effect = {
			country_event = { id = pioneer.9 days = 7200 random = 360 }
		}
	}
}

#Whispers 3
country_event = {
	id = pioneer.9
	
	title = pioneer.9.name
	desc = pioneer.9.desc
	
	picture = "GFX_evt_wormhole"
	show_sound = event_ship_bridge
	
	is_triggered_only = yes
	
	option = {
		name = pioneer.9.a
		hidden_effect = {
			country_event = { id = pioneer.10 days = 7200 random = 360 }
		}
	}
}

#Communication Start
country_event = {
	id = pioneer.10
	
	title = pioneer.10.name
	desc = pioneer.10.desc
	
	diplomatic = yes	
	is_triggered_only = yes
	
	picture_event_data = {
		portrait = root.owner.ruler
		room = ethic_spaceship_room
	}
	
	immediate = {
		remove_point_of_interest = pioneer_poi.1.whispers
	}

	option = {
		name = pioneer.10.a
		hidden_effect = {
			country_event = { id = pioneer.800 }
		}
	}
}

#Communication 2
country_event = {
	id = pioneer.800
	
	title = pioneer.10.name
	desc = pioneer.800.desc
	
	diplomatic = yes
	is_triggered_only = yes
	
	picture_event_data = {
		portrait = from.owner.ruler
		room = ethic_spaceship_room
	}
	
	option = {
		name = pioneer.800.a
		is_dialog_only = yes
		response_text = pioneer.800.ar
	}
	option = {
		name = pioneer.800.b
		hidden_effect = {
			country_event = { id = pioneer.801 }
		}
	}
}

#Communications 3
country_event = {
	id = pioneer.801
	
	title = pioneer.10.name
	desc = pioneer.801.desc
	
	diplomatic = yes
	is_triggered_only = yes
	
	picture_event_data = {
		portrait = root.from.owner.ruler
		room = ethic_spaceship_room
	}
	
	option = {
		name = pioneer.800.a
		is_dialog_only = yes
		response_text = pioneer.800.ar
	}
	option = {
		name = pioneer.801.a
		is_dialog_only = yes
		response_text = pioneer.801.ar
	}
	option = {
		name = pioneer.801.b
		trigger = { has_country_flag = encountered_first_wormhole }
		is_dialog_only = yes
		response_text = pioneer.801.br
	}
	option = {
		name = pioneer.801.c
		trigger = { owner = { NOT = { has_technology = tech_wormhole_stabilization } } }
		response_text = pioneer.801.cr
		hidden_effect = {
			capital_scope.solar_system = {
				closest_system = {
					limit = { has_star_flag = neighbor_t1_first_colony }
					max_steps = 3
					create_ambient_object = {
						type = pioneer_warp_object
						location = this
					}
					solar_system = {
						random_system_ambient_object = {
							limit = { is_same_value = last_created_ambient_object }
							set_location = {
								target = this.solar_system.star
								distance = 200
								angle = random
							}
						}
					}
				}
			}
			last_created_ambient_object = {
				save_event_target_as = pioneer_warp
				enable_special_project = {
					name = "PIONEER_NOWORMHOLE"
					location = this
					owner = root
				}
			}
		}
	}
	option = {
		name = pioneer.801.d
		trigger = { owner = { has_technology = tech_wormhole_stabilization } }
		response_text = pioneer.801.dr
		hidden_effect = {
			capital_scope.solar_system = {
				closest_system = {
					limit = { has_star_flag = neighbor_t1_first_colony }
					max_steps = 3
					create_ambient_object = {
						type = pioneer_warp_object
						location = this
					}
					solar_system = {
						random_system_ambient_object = {
							limit = { is_same_value = last_created_ambient_object }
							set_location = {
								target = this.solar_system.star
								distance = 200
								angle = random
							}
						}
					}
				}
			}
			last_created_ambient_object = {
				save_event_target_as = pioneer_warp
				enable_special_project = {
					name = "PIONEER_WORMHOLE"
					location = this
					owner = root
				}
			}
		}
	}
}

country_event = {
	id = pioneer.11

	hide_window = yes
	location = prev
	
	is_triggered_only = yes

	immediate = {
		fromfrom = { destroy_ambient_object = this }
#		root.owner = { save_event_target_as = pioneer_warp_owner }
		
		capital_scope.solar_system = {
			closest_system = {
				limit = { has_star_flag = neighbor_t1_first_colony }
				max_steps = 3
				save_event_target_as = pioneer_warp_spawn
			}
		}
		hidden_effect = {
			root = { remove_point_of_interest = pioneer_poi.1.system }
			event_target:pioneer_warp_spawn = {
				spawn_system = {
					min_distance >= 20
					max_distance <= 30
					max_jumps = 30
					initializer = "pioneer_warp_init"
				}
			}
		}
		if = {
			limit = { exists = event_target:pioneer_warp_system }
			event_target:pioneer_warp_system = {
				isolate_system = yes
			}
		}
		event_target:pioneer_warp_system = {
			event_target:pioneer_warp_spawn = {
				prev = {
					spawn_natural_wormhole = {
						bypass_type = wormhole
						random_pos = no
						orbit_angle = 360
					}
				}
				spawn_natural_wormhole = {
					bypass_type = wormhole
					random_pos = no
					orbit_angle = 270
				}
				link_wormholes = prev
			}
		}
		country_event = { id = pioneer.12 days = 1 }
	}
}

country_event = {
	id = pioneer.12
	is_triggered_only = yes
	
	hide_window = yes

	location = from
	
	immediate = {
		event_target:pioneer_warp_system = {
			random_system_planet = { limit = { is_colonizable = yes is_colony = no }
				create_country = {
					name = random
					type = default
					authority = random
					species = root.owner_species
					ethos = random
					origin = "origin_pioneer_npc"
				}
				
				set_owner = last_created_country
				set_capital = yes

				last_created_country = {
					add_resource = {
						minerals = 500
					}
					add_resource = {
						energy = 500
					}
					add_resource = {
						food = 500
					}
					add_resource = {
						consumer_goods = 200
					}
					add_resource = {
						alloys = 200
					}
					copy_techs_from = {
						target = root
						except = {
							tech_akx_worm_1
							tech_akx_worm_2
							tech_akx_worm_3
						}
					}
					give_technology = { tech = tech_wormhole_stabilization message = no }
					set_country_flag = encountered_first_wormhole
					add_seen_bypass_type = wormhole
					prev = {
						while = {
							count = 25
							create_pop = {
								species = owner_main_species
							}
						}
						add_district = district_city
						add_district = district_city
						add_district = district_generator
						add_district = district_generator
						add_district = district_mining
						add_district = district_mining
						add_district = district_farming
						add_district = district_farming
						add_building = building_capital
						add_building = building_bureaucratic_1
						add_building = building_foundry_1
						add_building = building_factory_1
						add_building = building_research_lab_1
					}
					establish_communications_no_message = root
					set_subject_of = { who = root subject_type = vassal }
					add_opinion_modifier = { modifier = opinion_pioneer_colony who = root }
					add_trust = { amount = 50 who = root }
					root = { add_opinion_modifier = { modifier = opinion_pioneer_colony who = prev } }
					root = { add_trust = { amount = 50 who = prev } }
				}
			}
			random_system_planet = {
				limit = { has_deposit_for = shipclass_mining_station }
				create_mining_station = { owner = last_created_country }
			}
			random_system_planet = {
				limit = { has_deposit_for = shipclass_research_station }
				create_research_station = { owner = last_created_country }
			}
			create_starbase = {
				size = starbase_starport
				module = shipyard
				owner = last_created_country
			}
		}
		country_event = { id = pioneer.13 days = 1 }
	}
}

country_event = {
	id = pioneer.13
	
	title = pioneer.13.name
	desc = {
		text = pioneer.13.desc
		trigger = { owner = { has_technology = tech_wormhole_stabilization } }
	}
	desc = {
		text = pioneer.13.worm.desc
		trigger = { owner = { NOT = { has_technology = tech_wormhole_stabilization } } }
	}
	picture = "GFX_evt_partition"
	show_sound = event_default
	
	is_triggered_only = yes
	
	option = {
		name = pioneer.13.a
		trigger = {
			owner = { has_technology = tech_wormhole_stabilization }
		}
	}
	option = {
		name = pioneer.13.b
		trigger = {
			owner = { NOT = { has_technology = tech_wormhole_stabilization } }
		}
		owner = { 
			give_technology = { tech = tech_wormhole_stabilization message = yes }
			set_country_flag = encountered_first_wormhole
			add_seen_bypass_type = wormhole
		}
	}
}

#Destroyed Arkship path.
country_event = {
	id = pioneer.4
	is_triggered_only = yes
	
	title = pioneer.4.name
	desc = pioneer.4.desc
	
	picture = "GFX_evt_debris"
	show_sound = event_default
	location = event_target:pioneer_bad_ideal
	
	immediate = {
		remove_point_of_interest = pioneer_poi.1.lost
	}
	after = {
		create_ambient_object = {
			type = "pioneer_destroyed_object"
			location = fromfrom.solar_system

		}
		hidden_effect = {
			create_point_of_interest = {
				id = pioneer_poi.1.destroyed
				name = "pioneer_search_1_destroyed_poi"
				desc = "pioneer_search_1_destroyed_poi_desc"
				event_chain = "pioneer_chain"
				location = last_created_ambient_object
			}
		}
		last_created_ambient_object = {
			save_event_target_as = pioneer_destroyed
			enable_special_project = {
				name = "PIONEER_DESTROYED"
				location = this
				owner = root
			}
		}
	}
	option = {
		name = pioneer.4.a
	}
}

country_event = {
	id = pioneer.200
	is_triggered_only = yes
	
	title = "pioneer.200.name"
	desc = "pioneer.200.desc"
	
	picture = GFX_evt_derelict_interior
	show_sound = event_scanner
	location = from
	
	immediate = {
		remove_point_of_interest = pioneer_poi.1.destroyed
		from = {
			closest_system = {
				limit = { has_star_flag = marauder_system }
				max_steps = 100
				space_owner = { 
					set_country_flag = pioneer_marauder_of@root 
					save_event_target_as = pioneer_marauder
					root = { set_country_flag = pioneer_victim_of@event_target:pioneer_marauder }
				}
			}
		}
	}
	after = {
		hidden_effect = {
			create_point_of_interest = {
				id = pioneer_poi.1.abducted
				name = "pioneer_search_1_abducted_poi"
				desc = "pioneer_search_1_abducted_poi_desc"
				event_chain = "pioneer_chain"
			}
			country_event = { id = pioneer.201 days = 7 }
		}
	}
	option = {
		name = pioneer.200.a
	}
	option = {
		name = pioneer.200.b
		trigger = { NOR = { has_ethic = ethic_xenophobe has_ethic = ethic_fanatic_xenophobe } }
		shift_ethic = "ethic_xenophobe"
		hidden_effect = {
			while = {
				count = 6
				random_owned_pop = {
					limit = {
						NOT = { has_ethic = "ethic_xenophobe" }
					}
					pop_change_ethic = "ethic_xenophobe"
				}
			}
		}
	}
	option = {
		name = pioneer.200.c
		trigger = { OR = { has_ethic = ethic_xenophobe has_ethic = ethic_fanatic_xenophobe } }
		add_monthly_resource_mult = {
			resource = unity
			value = @tier2unityreward
			min = @tier2unitymin
			max = @tier2unitymax
		}
	}
}

country_event = {
	id = pioneer.201
	is_triggered_only = yes
	
	title = "pioneer.201.name"
	desc = "pioneer.201.desc"
	
	picture = GFX_evt_derelict_interior
	show_sound = event_default
	location = fromfrom
	
	immediate = {
		fromfrom = {
			solar_system = {
				random_system_planet = { 
					limit = { has_planet_flag = prescripted_ideal }
					save_event_target_as = pioneer_memorial_target
				}
			}
		}
	}
	
	option = {
		name = pioneer.201.memp
		trigger = { OR = { has_ethic = ethic_spiritualist has_ethic = ethic_fanatic_spiritualist has_civic = civic_memorialist } }
		event_target:pioneer_memorial_target = {
			add_deposit = d_pioneer_memorial_plus
		}
	}
	option = {
		name = pioneer.201.war
		trigger = { OR = { has_ethic = ethic_militarist has_ethic = ethic_fanatic_militarist } }
		event_target:pioneer_memorial_target = {
			add_deposit = d_pioneer_memorial_mil
		}
	}
	option = {
		name = pioneer.201.xen
		trigger = { OR = { has_ethic = ethic_xenophobe has_ethic = ethic_fanatic_xenophobe } }
		event_target:pioneer_memorial_target = {
			add_deposit = d_pioneer_memorial_xen
		}
	}
	option = {
		name = pioneer.201.mem
		trigger = { NOR = { has_ethic = ethic_spiritualist has_ethic = ethic_fanatic_spiritualist has_civic = civic_memorialist } }
		event_target:pioneer_memorial_target = {
			add_deposit = d_pioneer_memorial
		}
	}
	option = {
		name =pioneer.201.sal
		trigger = { has_ethic = ethic_fanatic_materialist }
		add_resource = { alloys = 100 }
		add_resource = { consumer_goods = 100 }
	}
	option = {
		name = pioneer.201.sal
		trigger = { NOT = { has_ethic = ethic_fanatic_materialist } }
		add_resource = { alloys = 100 }
		add_resource = { consumer_goods = 100 }
		add_modifier = { modifier = pioneer_tombraiding days = 1800 }
	}
}

country_event = {
	id = pioneer.202
	mean_time_to_happen = { months = 2 }  
	title = pioneer.202.name
	desc = pioneer.202.desc

	picture = "GFX_evt_machine_space_battle"
	show_sound = event_default

	trigger = {
		has_point_of_interest = {
			poi = pioneer_poi.1.abducted
		}
		any_country = {
			has_country_flag = pioneer_marauder_of@root
			has_communications = root
		}
	}

	immediate = {
		remove_point_of_interest = pioneer_poi.1.abducted
		every_country = {
			limit = { has_country_flag = pioneer_marauder_of@root }
			save_event_target_as = pioneer_marauder
		}
	}

	after = {
		create_point_of_interest = {
			id = pioneer_poi.1.marauder
			name = "pioneer_search_1_marauder_poi"
			desc = "pioneer_search_1_marauder_poi_desc"
			event_chain = "pioneer_chain"
			location = fromfrom
		}
	}
	option = {
		name = pioneer.202.a
		hidden_effect = {
			country_event = {
				id = pioneer.203
			}
		}
	}
}

country_event = {
	id = pioneer.203
	title = "pioneer_marauder_header"
	# Marauder 1
	desc = {
		text = marauder.20.1.desc_01
		trigger = {
			event_target:pioneer_marauder = { has_country_flag = marauder_1 }
			NOT = { has_modifier = marauder_1_tribute }
		}
	}
	desc = {
		text = marauder.20.1.desc_02
		trigger = {
			event_target:pioneer_marauder = { has_country_flag = marauder_1 }
			NOT = { has_modifier = marauder_1_tribute }
		}
	}
	desc = {
		text = marauder.20.1.desc_03
		trigger = {
			event_target:pioneer_marauder = { has_country_flag = marauder_1 }
			NOT = { has_modifier = marauder_1_tribute }
		}
	}
	desc = {
		text = marauder.20.1.desc_04
		trigger = {
			event_target:pioneer_marauder = { has_country_flag = marauder_1 }
			NOT = { has_modifier = marauder_1_tribute }
		}
	}
	desc = {
		text = marauder.20.1.desc_05
		trigger = {
			has_valid_civic = civic_warrior_culture
			event_target:pioneer_marauder = { has_country_flag = marauder_1 }
		}
	}
	desc = {
		text = marauder.20.1.desc_06
		trigger = {
			event_target:pioneer_marauder = { has_country_flag = marauder_1 }
			has_modifier = marauder_1_tribute
		}
	}
	desc = {
		text = marauder.20.1.desc_07
		trigger = {
			event_target:pioneer_marauder = { has_country_flag = marauder_1 }
			has_modifier = marauder_1_tribute
		}
	}

	# Marauder 2
	desc = {
		text = marauder.20.2.desc_01
		trigger = {
			event_target:pioneer_marauder = { has_country_flag = marauder_2 }
			NOT = { has_modifier = marauder_2_tribute }
		}
	}
	desc = {
		text = marauder.20.2.desc_02
		trigger = {
			event_target:pioneer_marauder = { has_country_flag = marauder_2 }
			NOT = { has_modifier = marauder_2_tribute }
		}
	}
	desc = {
		text = marauder.20.2.desc_03
		trigger = {
			event_target:pioneer_marauder = { has_country_flag = marauder_2 }
			NOT = { has_modifier = marauder_2_tribute }
		}
	}
	desc = {
		text = marauder.20.2.desc_04
		trigger = {
			event_target:pioneer_marauder = { has_country_flag = marauder_2 }
			NOT = { has_modifier = marauder_2_tribute }
		}
	}

	# Marauder 3
	desc = {
		text = marauder.20.3.desc_01
		trigger = {
			event_target:pioneer_marauder = { has_country_flag = marauder_3 }
			NOT = { has_modifier = marauder_3_tribute }
		}
	}
	desc = {
		text = marauder.20.3.desc_02
		trigger = {
			event_target:pioneer_marauder = { has_country_flag = marauder_3 }
			NOT = { has_modifier = marauder_3_tribute }
		}
	}
	desc = {
		text = marauder.20.3.desc_03
		trigger = {
			event_target:pioneer_marauder = { has_country_flag = marauder_3 }
			NOT = { has_modifier = marauder_3_tribute }
		}
	}
	desc = {
		text = marauder.20.3.desc_04
		trigger = {
			event_target:pioneer_marauder = { has_country_flag = marauder_3 }
			NOT = { has_modifier = marauder_3_tribute }
		}
	}

	picture_event_data = {
		portrait = event_target:pioneer_marauder
		room = ethic_spaceship_room
	}

	is_triggered_only = yes
	diplomatic = yes

	#Ask them about the attack
	option = {
		name = pioneer.203.a
		trigger = {
			event_target:pioneer_marauder = {
				has_country_flag = marauder_1
			}
			NOR = {
				has_ethic = ethic_militarist has_ethic = ethic_fanatic_militarist
			}
		}
		is_dialog_only = yes
		response_text = pioneer.203.attack.1
	}
	option = {
		name = pioneer.203.a
		trigger = {
			event_target:pioneer_marauder = {
				has_country_flag = marauder_1
			}
			OR = {
				has_ethic = ethic_militarist has_ethic = ethic_fanatic_militarist
			}
		}
		is_dialog_only = yes
		response_text = pioneer.203.attack.1mil
	}
	option = {
		name = pioneer.203.a
		trigger = {
			event_target:pioneer_marauder = {
				has_country_flag = marauder_2
			}
		}
		is_dialog_only = yes
		response_text = pioneer.203.attack.2
	}
	option = {
		name = pioneer.203.a
		trigger = {
			event_target:pioneer_marauder = {
				has_country_flag = marauder_3
			}
		}
		is_dialog_only = yes
		response_text = pioneer.203.attack.
	}

	#Demand return of your people
	option = {
		name = pioneer.203.b
		trigger = {
			event_target:pioneer_marauder = {
				has_country_flag = marauder_1
			}
			NOT = { has_valid_civic = civic_warrior_culture }
		}
		is_dialog_only = yes
		response_text = pioneer.203.demand.1a
	}
	option = {
		name = pioneer.203.b
		trigger = {
			event_target:pioneer_marauder = {
				has_country_flag = marauder_1
			}
			has_valid_civic = civic_warrior_culture
		}
		is_dialog_only = yes
		response_text = pioneer.203.demand.1b
	}
	option = {
		name = pioneer.203.b
		trigger = {
			event_target:pioneer_marauder = {
				has_country_flag = marauder_2
			}
		}
		is_dialog_only = yes
		response_text = pioneer.203.demand.2
	}
	option = {
		name = pioneer.203.b
		trigger = {
			event_target:pioneer_marauder = {
				has_country_flag = marauder_2
			}
		}
		is_dialog_only = yes
		response_text = pioneer.203.demand.3
	}
	option = {
		name = pioneer.203.c

	}
}

country_event = {
	id = pioneer.204
	hide_window = yes
	is_triggered_only = yes

	location = fromfromfrom

	trigger = {
		this = { has_point_of_interest = { poi = pioneer_poi.1.marauder } }
		this = { has_country_flag = pioneer_marauder_attacked }
		from = { has_country_flag = pioneer_marauder_of@root }
		fromfromfrom = { is_ship_size = marauder_void_dwelling }
	}

	immediate = {
		random_planet_within_border = {
			limit = { is_colony = yes }
			save_event_target_as = pioneer_rescue_planet
			create_pop = { species = owner_main_species }
		}
		create_message = {
			type = MESSAGE_TYPE_REFUGEES_ARRIVED
			localization = MESSAGE_PIONEERS_RESCUED
			days = 30
			target = fromfromfrom
			variable = {
				type = name
				localization = SPECIES
				scope = owner_main_species
			}
			variable = {
				type = name
				localization = PLANET
				scope = event_target:pioneer_rescue_planet
			}
			variable = {
				type = name
				localization = COUNTRY
				scope = fromfromfrom.owner
			}
		}
	}
}

country_event = {
	id = pioneer.205
	title = pioneer.205.name
	desc = pioneer.205.desc
	is_triggered_only = yes

	picture = "GFX_evt_federation_fleet"
	show_sound = event_space_battle
	location = fromfromfrom

	trigger = {
		this = { has_point_of_interest = { poi = pioneer_poi.1.marauder } }
		this = { NOT = { has_country_flag = pioneer_marauder_attacked } }
		from = { has_country_flag = pioneer_marauder_of@root }
		fromfromfrom = { is_ship_size = marauder_void_dwelling }
	}

	immediate = {
		set_country_flag = pioneer_marauder_attacked
		random_planet_within_border = {
			limit = { is_colony = yes }
			create_pop = { species = owner_main_species }
		}
	}
	option = {
		name = pioneer.205.a
	}
}

country_event = {
	id = pioneer.206
	is_triggered_only = yes
	hide_window = yes

	trigger = {
		OR = {
			is_country_type = dormant_marauders
			is_country_type = ruined_marauders
			is_country_type = awakened_marauders
		}
		any_country = {
			has_point_of_interest = {
				poi = pioneer_poi.1.marauder
			}
		}
	}

	immediate = {
		every_country = {
			limit = {
				has_point_of_interest = {
					poi = pioneer_poi.1.marauder
				}
				has_country_flag = pioneer_victim_of@root
			}
			country_event = {
				id = pioneer.207 days = 30 random = 7
			}
		}
	}
}

country_event = {
	id = pioneer.207
	is_triggered_only = yes

	picture = "GFX_evt_announcement"
	show_sound = event_radio_chatter

	title = pioneer.207.name
	desc = {
		text = pioneer.207.desc.rescuer
		trigger = {
			has_country_flag = pioneer_marauder_attacked
		}
	}
	desc = {
		text = pioneer.207.desc.neglected
		trigger = {
			NOT = { has_country_flag = pioneer_marauder_attacked }
		}
	}

	after = {
		if = {
			limit = { has_point_of_interest = { poi = pioneer_poi.1.marauder } }
			remove_point_of_interest = pioneer_poi.1.marauder
		}
		if = {
			limit = { has_point_of_interest = { poi = pioneer_poi.1.khan } }
			remove_point_of_interest = pioneer_poi.1.khan
		}

#		if = {
#			limit = {
#				has_modifier = pioneer_marauder_vengeance
#			}
#			remove_modifier = pioneer_marauder_vengeance
#		}
	}
	option = {
		name = pioneer.207.a
		trigger = { has_country_flag = pioneer_marauder_attacked }
		add_modifier = {
			modifier = pioneer_marauder_campaign
			days = 3600
		}
	}
	option = {
		name = pioneer.207.b
		trigger = { NOT = { has_country_flag = pioneer_marauder_attacked } }
	}
}

#Pops escape to Empire
planet_event = {
	id = pioneer.208
	mean_time_to_happen = {	months = 240 }

	title = pioneer.208.name
	desc = pioneer.208.desc

	picture = "GFX_evt_cargoship_caravan"
	show_sound = event_cityscape

	trigger = {
		is_colony = yes
		owner = {
			has_point_of_interest = {
				poi = pioneer_poi.1.marauder
			}
			NOT = { has_country_flag = pioneer_had_refugees }
		}
	}

	immediate = {
		every_country = { 
			limit = { has_country_flag = pioneer_marauder_of@root }
			save_event_target_as = pioneer_marauder
		}
		owner = { set_country_flag = pioneer_had_refugees }
	}
	
	option = {
		name = pioneer.208.a
		custom_tooltip = pioneer.208.a.tooltip
		hidden_effect = {
			while = {
				count = 2
				create_pop = { species = owner_main_species }
			}
		}
		owner = {
			random_list = {
				10 = { add_resource = { energy = -200 } }
				10 = { add_resource = { minerals = -200 } }
				10 = { add_resource = { food = -200 } }
			}
		}
	}
}

#Pops Being Sold
country_event = {
	id = pioneer.209
	mean_time_to_happen = {	months = 360 }

	title = pioneer.209.name
	desc = pioneer.209.desc

	picture = "GFX_evt_tradestation_interior"
	show_sound = event_factions

	trigger = {
		owner = {
			has_point_of_interest = {
				poi = pioneer_poi.1.marauder
			}
			NOT = { has_country_flag = pioneer_marauder_attacked }
		}
	}

	immediate = {
		every_country = { 
			limit = { has_country_flag = pioneer_marauder_of@root }
			save_event_target_as = pioneer_marauder
		}
	}
	
	option = {
		name = pioneer.209.a
		allow = { has_resource = { type = energy amount > 1000 } }
		capital_scope = {
			create_pop = {
				species = owner_main_species
			}
		}
	}
	option = {
		name = pioneer.209.b
		allow = { has_resource = { type = energy amount > 2000 } }
		custom_tooltip = pioneer.209.b.tooltip
		hidden_effect = {
			capital_scope = { 
				while = {
					count = 2
					create_pop = { 
						species = owner_main_species
					}
				}
			}
		}
	}
	option = {
		name = pioneer.209.c
	}
}

#Leak Technology to Empire
country_event = {
	id = pioneer.210
	mean_time_to_happen = { months = 240 }

	title = pioneer.210.name
	desc = pioneer.210.desc

	picture = "GFX_evt_ancient_databank"
	show_sound = event_laboratory_sound

	trigger = {
		has_point_of_interest = {
			poi = pioneer_poi.1.marauder
		}
		NOT = { has_country_flag = pioneer_marauder_technology }
	}

	immediate = {
		every_country = { 
			limit = { has_country_flag = pioneer_marauder_of@root }
			save_event_target_as = pioneer_marauder
		}
	}

	option = {
		name = pioneer.210.a
		hidden_effect = {
			set_country_flag = pioneer_marauder_technology
		}
		if = {
			limit = { NOT = { has_technology = tech_starbase_3 } }
			add_research_option = tech_starbase_3
			add_tech_progress = {
				tech = tech_starbase_3
				progress = 0.25
			}
		}
		else_if = {
			limit = { NOT = { has_technology = tech_habitat_1 } }
			add_research_option = tech_habitat_1
			add_tech_progress = {
				tech = tech_habitat_1
				progress = 0.25
			}
		}
		else_if = {
			limit = { NOT = { has_technology = tech_starbase_4 } }
			add_research_option = tech_starbase_4
			add_tech_progress = {
				tech = tech_starbase_4
				progress = 0.25
			}
		}
		else_if = {
			limit = { NOT = { has_technology = tech_habitat_2 } }
			add_research_option = tech_habitat_2
			add_tech_progress = {
				tech = tech_habitat_2
				progress = 0.25
			}
		}
		else_if = {
			limit = { NOT = { has_technology = tech_starbase_5 } }
			add_research_option = tech_starbase_5
			add_tech_progress = {
				tech = tech_starbase_5
				progress = 0.25
			}
		}
		else_if = {
			limit = { NOT = { has_technology = tech_habitat_3 } }
			add_research_option = tech_habitat_3
			add_tech_progress = {
				tech = tech_habitat_3
				progress = 0.25
			}
		}
		else = {
			add_monthly_resource_mult = {
				resource = engineering_research
				value = @tier5researchreward
				min = @tier5researchmin
				max = @tier5researchmax
			}
		}

	}
}

#General Wins Freedom
country_event = {
	id = pioneer.211
	mean_time_to_happen = { 
		months = 360 
		modifier = {
			factor = 0.75
			has_valid_civic = civic_warrior_culture
		}
		modifier = {
			factor = 0.75
			any_country = {
				has_country_flag = pioneer_marauder_of@root
			}
		}
	}

	title = pioneer.211.name
	desc = pioneer.211.desc

	picture = "GFX_evt_gladiators"
	show_sound = event_radio_chatter

	trigger = {
		has_point_of_interest = {
			poi = pioneer_poi.1.marauder
		}
		NOT = { has_country_flag = pioneer_marauder_general }
	}

	immediate = {
		every_country = { 
			limit = { has_country_flag = pioneer_marauder_of@root }
			save_event_target_as = pioneer_marauder
		}
	}

	option = {
		name = pioneer.211.a
		trigger = {
			has_civic = civic_warrior_culture
		}
		add_monthly_resource_mult = {
			resource = unity
			value = @tier3unityreward
			min = @tier3unitymin
			max = @tier3unitymax
		}
		create_leader = {
			class = general
			species = owner_main_species
			name = random
			skill = 5
			traits = {
				trait = leader_trait_glory_seeker
				trait = leader_trait_mercenary_warrior
			}
			event_leader = yes
		}
		hidden_effect = {
			set_country_flag = pioneer_marauder_general
		}
	}
	option = {
		name = pioneer.211.b
		trigger = {
			OR = { has_ethic = ethic_xenophobe has_ethic = ethic_fanatic_xenophobe }
		}
		create_leader = {
			class = general
			species = owner_main_species
			name = random
			skill = 5
			traits = {
				trait = leader_trait_glory_seeker
				trait = leader_trait_mercenary_warrior
			}
			event_leader = yes
		}
		hidden_effect = {
			set_country_flag = pioneer_marauder_general
		}
	}
	option = {
		name = pioneer.211.c
		trigger = {
			NOT = { has_civic = civic_warrior_culture }
		}
		create_leader = {
			class = general
			species = owner_main_species
			name = random
			skill = 5
			traits = {
				trait = leader_trait_glory_seeker
				trait = leader_trait_mercenary_warrior
			}
			event_leader = yes
		}
		hidden_effect = {
			set_country_flag = pioneer_marauder_general
		}
	}
	option = {
		name = pioneer.211.d
		trigger = {
			OR = { has_ethic = ethic_pacifist has_ethic = ethic_fanatic_pacifist }
		}
		add_monthly_resource_mult = {
			resource = unity
			value = @tier4unityreward
			min = @tier4unitymin
			max = @tier4unitymax
		}
		hidden_effect = {
			set_country_flag = pioneer_marauder_general
		}
	}
	option = {
		name = pioneer.211.e
		trigger = { NOR = { has_ethic = ethic_pacifist has_ethic = ethic_fanatic_pacifist } }
	}
}

country_event = {
	id = pioneer.299
	is_triggered_only = yes

	trigger = {
		has_origin = origin_pioneer
		has_point_of_interest = { poi = pioneer_poi.1.marauder }
		has_global_flag = marauder_crisis_started
		event_target:raider_khanate = {
			has_country_flag = pioneer_marauder_of@root
		}
	}

	picture = "GFX_evt_khan_throne_room"
	show_sound = event_airlock

	title = pioneer.299.name
	desc = {
		text = pioneer.299.attack
		trigger = {
			has_country_flag = pioneer_marauder_attacked
		}
	}
	desc = {
		text = pioneer.299.desc
		trigger = {
			NOT = { has_country_flag = pioneer_marauder_attacked }
		}
	}

	after = {
		hidden_effect = {
			remove_point_of_interest = pioneer_poi.1.marauder
		}
	}
	
	option = {
		name = pioneer.299.a
		trigger = {
			has_country_flag = pioneer_marauder_attacked
		}
#		add_modifier = {
#			modifier = pioneer_marauder_vengeance
#			days = -1
#		}
	}
	option = {
		name = pioneer.299.b
		trigger = {
			has_country_flag = pioneer_marauder_attacked
		}
	}
	option = {
		name = pioneer.299.c
		trigger = {
			NOT = { has_country_flag = pioneer_marauder_attacked }
		}
	}
	option = {
		name = pioneer.299.d
		trigger = {
			NOT = { has_country_flag = pioneer_marauder_attacked }
		}
	}
}

#### Pioneer 2 ####

#Primitive colony
ship_event = {
	id = pioneer.16
	is_triggered_only = yes
	
	title = pioneer.16.name
	desc = pioneer.16.desc
	
	picture = "GFX_evt_medieval_alien_civilization"
	show_sound = event_primitive_civilization
	location = from
	
	trigger = {
		owner = { has_event_chain = "pioneer_chain" }
		owner = { has_country_flag = pioneer_result_1 }
		from = { has_planet_flag = prescripted_ideal }
		solar_system = {
			is_point_of_interest = {
				id = pioneer_poi.2
				event_chain = pioneer_chain
				owner = root.owner
			}
		}
	}
	
	immediate = {
		from = {
#			set_planet_name = "NAME_random"
			create_country = {
				name = random
				authority = random
				civics = {
					civic = civic_landed_nobility
					civic = civic_flat_world_theory
				}
				species = root.owner_species
				ethos = random
				flag = {
					icon = {
						category = "special"
						file = "primitive.dds"
					}
					background = {
						category = "backgrounds"
						file = "new_dawn.dds"
					}
					colors = {
						"turquoise"
						"green"
						"null"
						"null"
					}
				}
				origin = "origin_enlightened"
				type = primitive
			}
			last_created_country = {
				set_graphical_culture = preindustrial_01
				set_country_flag = renaissance_age
				set_primitive_age = renaissance_age
				change_country_flag = {
					icon = {
						category = "special"
						file = "primitive.dds"
					}
					background = {
						category = "backgrounds"
						file = "new_dawn.dds"
					}
					colors = {
						"pink"
						"burgundy"
						"null"
						"null"
					}
				}
			}
			set_owner = last_created_country
			set_capital = yes
			last_created_country = {
				prev = {
					while = {
						count = 6
						create_pop = {
							species = root.owner_species
						}
					}
					add_building = building_primitive_dwellings
					add_building = building_stone_palace
					remove_building = building_colony_shelter
				}
			}
		}
	}
	
	after = {
		hidden_effect = {
			owner = { remove_point_of_interest = pioneer_poi.2 }
			owner = { create_point_of_interest = {
				id = pioneer_poi.2.primitive
				name = "pioneer_search_2_primitive_poi"
				desc = "pioneer_search_2_primitive_poi_desc"
				location = from
				event_chain = "pioneer_chain"
				}
			}
		}
	}
	
	option = {
		name = pioneer.16.a
		from = { create_archaeological_site = pioneer_primitive_colony_1 }
		custom_tooltip = pioneer.16.a.tooltip
	}
	option = {
		name = pioneer.16.b
		trigger = { owner = { NOR = { has_ethic = ethic_pacifist has_ethic = ethic_fanatic_pacifist } } }
	}
	option = {
		name = pioneer.16.c
		trigger = { owner = { has_civic = civic_media_conglomerate } }
		owner = { add_modifier = { modifier = pioneer_truman_show days = -1 } }
		custom_tooltip = pioneer.16.c.tooltip
		hidden_effect = {
			from = { set_planet_flag = pioneer_truman_world }
			owner = { country_event = { id = pioneer.706 days = 7200 random = 360 } }
		}
	}
}

fleet_event = {
	id = pioneer.700
	title = pioneer.700.name
	desc = pioneer.700.desc
	picture = "GFX_evt_medieval_alien_civilization"
	show_sound = event_primitive_civilization
	
	archaeology = yes
	is_triggered_only = yes
	
	immediate = {
		from = { set_site_progress_locked = yes }
	}
	
	after = {
		from = { set_site_progress_locked = no }
	}
	
	option = {
		name = pioneer.700.a
		owner = {
			add_monthly_resource_mult = {
				resource = society_research
				value = @tier1researchreward
				min = @tier1researchmin
				max = @tier1researchmax
			}
		}
	}
}

fleet_event = {
	id = pioneer.701
	title = pioneer.701.name
	desc = pioneer.701.desc
	picture = "GFX_evt_medieval_alien_civilization"
	show_sound = event_primitive_civilization
	
	archaeology = yes
	is_triggered_only = yes
	
	immediate = {
		from = { set_site_progress_locked = yes }
	}
	
	after = {
		from = { set_site_progress_locked = no }
	}
	
	option = {
		name = pioneer.701.a
#		small_artifiact_reward = yes
	}
}

fleet_event = {
	id = pioneer.702
	title = pioneer.702.name
	desc = pioneer.702.desc
	picture = "GFX_evt_medieval_alien_civilization"
	show_sound = event_primitive_civilization
	
	archaeology = yes
	is_triggered_only = yes
	
	immediate = {
		from = { set_site_progress_locked = yes }
	}
	
	after = {
		from = { set_site_progress_locked = no }
	}
	
	option = {
		name = pioneer.702.a
		owner = {
			add_monthly_resource_mult = {
				resource = unity
				value = @tier2unityreward
				min = @tier2unitymin
				max = @tier2unitymax
			}
		}
	}
}

fleet_event = {
	id = pioneer.703
	title = pioneer.703.name
	desc = pioneer.703.desc
	picture = "GFX_evt_crashed_station"
	show_sound = event_primitive_civilization
	
	archaeology = yes
	is_triggered_only = yes
	
	immediate = {
		from = { set_site_progress_locked = yes }
	}
	
	after = {
		from = { set_site_progress_locked = no }
	}
	
	option = {
		name = pioneer.703.a
#		small_artifiact_reward = yes
	}
}

fleet_event = {
	id = pioneer.704
	title = pioneer.704.name
	desc = pioneer.704.desc
	picture = "GFX_evt_medieval_alien_civilization"
	show_sound = event_primitive_civilization
	
	archaeology = yes
	is_triggered_only = yes
	
	immediate = {
		from = { set_site_progress_locked = yes }
	}
	
	after = {
		from = { set_site_progress_locked = no }
	}
	
	option = {
		name = pioneer.704.a
#		small_artifiact_reward = yes
	}
	option = {
		name = pioneer.704.b
		owner = { add_resource = { influence = 100 } }
		destroy_archaeological_site = from
#		from = { finish_site = root.owner }
#		owner = { set_country_flag = pioneer_spoiled_opportunity }
	}
}

fleet_event = {
	id = pioneer.705
	title = pioneer.705.name
	desc = pioneer.705.desc
	picture = "GFX_evt_medieval_alien_civilization"
	show_sound = event_radio_chatter
	
	archaeology = yes
	is_triggered_only = yes
	
	
	option = {
		name = pioneer.705.a
		owner = { remove_point_of_interest = pioneer_poi.2.primitive }
		from = { planet = { set_owner = root.owner } }
		from = { 
			planet = {
				add_district = district_city
				add_district = district_farming
				every_owned_pop = {
					clear_pop_category = yes
				}
			}
		}
	}
}

#Truman Line
country_event = {
	id = pioneer.706
	title = pioneer.706.name
	desc = pioneer.706.desc
	picture = "GFX_evt_medieval_alien_civilization"
	show_sound = event_default

	is_triggered_only = yes
	
	option = {
		name = pioneer.706.a
		remove_modifier = pioneer_truman_show
	}
	option = {
		name = pioneer.706.b
		hidden_effect = {
			country_event = { id = pioneer.707 days = 3600 random = 360 }
		}
	}
}

country_event = {
	id = pioneer.707
	title = pioneer.707.name
	desc = pioneer.707.desc
	picture = "GFX_evt_medieval_alien_civilization"
	show_sound = event_default
	
	is_triggered_only = yes
	
	option = {
		name = pioneer.707.a
		remove_modifier = pioneer_truman_show
	}
}

#System Lost
country_event = {
	id = pioneer.708
	title = pioneer.708.name
	desc = pioneer.708.desc
	picture = "GFX_evt_medieval_alien_civilization"
	show_sound = event_default
	
	is_triggered_only = yes
	
	trigger = {
		from = {
			any_planet = {
				archaeological_site = {
					is_site_type = pioneer_primitive_colony_1
					is_site_completed = no
				}	
			}
		}
	}
	
	immediate = {
		from = {
			every_planet = {
				limit = {
					archaeological_site = {
						is_site_type = pioneer_primitive_colony_1
						NOT = { is_site_completed = yes }
					}
				}
				archaeological_site = {
					destroy_archaeological_site = this
				}
#				archaeological_site = {
#					finish_site = yes
#				}
			}
		}
	}
	
	option = {
		name = OK
	}
}

#Dirty Dirty Cheater
planet_event = {
	id = pioneer.709
	title = pioneer.709.name
	desc = pioneer.709.desc
	picture = "GFX_evt_medieval_alien_civilization"
	show_sound = event_default
	
	is_triggered_only = yes
	
	trigger = {
		from = { has_modifier = pioneer_truman_show }
		has_planet_flag = pioneer_truman_world
	}
	
	immediate = {
		from = { remove_modifier = pioneer_truman_show }
	}
	
	option = {
		name = OK
	}
}

country_event = {
	id = pioneer.711
	is_triggered_only = yes

	hide_window = yes
	
	trigger = {
		fromfrom = {
			exists = archaeological_site
			archaeological_site = {
				is_site_type = pioneer_primitive_colony_1
			}
		}
	}
	
	immediate = {
#		destroy_archaeological_site = fromfrom
		fromfrom = {
			archaeological_site = {
#				finish_site = yes
				destroy_archaeological_site = this
			}
		}
	}
}

country_event = {
	id = pioneer.710
	title = pioneer.710.name
	desc = pioneer.710.desc
	picture = "GFX_evt_medieval_alien_civilization"
	show_sound = event_default
	
	is_triggered_only = yes
	
	trigger = {
		has_modifier = pioneer_truman_show
		from = { any_planet = { has_planet_flag = pioneer_truman_world } }
	}
	
	immediate = {
		from = { remove_modifier = pioneer_truman_show }
	}
	
	option = {
		name = OK
	}
}

#Crystalline Entity
ship_event = {
	id = pioneer.300
	is_triggered_only = yes

	location = from

	title = pioneer.300.name
	desc = pioneer.300.desc
	picture = "GFX_evt_colony_settlement"
	show_sound = event_ghost_town

	trigger = {
		owner = { has_event_chain = "pioneer_chain" }
		owner = { has_country_flag = pioneer_result_2 }
		from = { has_planet_flag = prescripted_ideal }
		solar_system = {
			is_point_of_interest = {
				id = pioneer_poi.2
				event_chain = pioneer_chain
				owner = root.owner
			}
		}		
	}

	immediate = {
		hidden_effect = {
			owner = { remove_point_of_interest = pioneer_poi.2 }
			owner = { create_point_of_interest = {
				id = pioneer_poi.2.silent
				name = "pioneer_search_2_silent_poi"
				desc = "pioneer_search_2_silent_poi_desc"
				location = from
				event_chain = "pioneer_chain"
				}
			}
		}
		from = {
#			set_planet_name = "NAME_random"
			add_district = district_generator
			add_district = district_farming
			add_district = district_mining
			add_modifier = {
				modifier = bleak_planet
				days = -1
			}
		}
	}
	after = {
		from = { 
			hidden_effect = {
				planet_event = {
					id = pioneer.306
					days = 32400
				}
			}
		}
	}
	option = {
		name = pioneer.300.a
		from = { create_archaeological_site = pioneer_bleak_colony }
	}
}

fleet_event = {
	id = pioneer.301
	title = pioneer.301.name
	desc = pioneer.301.desc
	picture = "GFX_evt_excavation_team"
	show_sound = event_ghost_town
	
	archaeology = yes
	is_triggered_only = yes
	
	immediate = {
		from = { set_site_progress_locked = yes }
	}
	
	after = {
		from = { set_site_progress_locked = no }
	}
	
	option = {
		name = pioneer.301.a
	}
	option = {
		name = pioneer.301.b
		trigger = {
			owner = {
				OR = {
					has_ethic = ethic_spiritualist has_ethic = ethic_fanatic_spiritualist
				}
			}
		}
		owner = {
			add_monthly_resource_mult = {
				resource = unity
				value = @tier2unityreward
				min = @tier2unitymin
				max = @tier2unitymax
			}
		}
		add_modifier = {
			modifier = pioneer_crystal_burial
			days = 360
		}
	}
}

fleet_event = {
	id = pioneer.302
	title = pioneer.302.name
	desc = pioneer.302.desc
	picture = "GFX_evt_excavation_team"
	show_sound = event_ghost_town
	
	archaeology = yes
	is_triggered_only = yes
	
	immediate = {
		from = { set_site_progress_locked = yes }
	}
	
	after = {
		from = { set_site_progress_locked = no }
	}
	
	option = {
		name = pioneer.302.a
		from = { planet = { add_deposit = d_crystalline_caverns } }
	}
}

fleet_event = {
	id = pioneer.303
	title = pioneer.303.name
	desc = pioneer.303.desc
	picture = "GFX_evt_animal_wildlife"
	show_sound = event_ghost_town
	
	archaeology = yes
	is_triggered_only = yes
	
	immediate = {
		from = { set_site_progress_locked = yes }
	}
	
	after = {
		from = { set_site_progress_locked = no }
	}
	
	option = {
		name = pioneer.303.a
	}
}

fleet_event = {
	id = pioneer.304
	title = pioneer.304.name
	desc = pioneer.304.desc
	picture = "GFX_evt_crashed_station"
	show_sound = event_scanner

	archaeology = yes
	is_triggered_only = yes

	immediate = {
		from = { set_site_progress_locked = yes }
	}

	after = {
		from = { set_site_progress_locked = no }
	}
	option = {
		name = pioneer.304.a
	}
}

fleet_event = {
	id = pioneer.305
	title = pioneer.305.name
	desc = pioneer.305.desc
	picture = "GFX_evt_in_the_dark"
	show_sound = event_crystal_ship

	archaeology = yes
	is_triggered_only = yes

	immediate = {
		hidden_effect = {
			owner = { remove_point_of_interest = pioneer_poi.2.silent }
			owner = { create_point_of_interest = {
				id = pioneer_poi.2.crystal
				name = "pioneer_search_2_crystal_poi"
				desc = "pioneer_search_2_crystal_poi_desc"
				location = from
				event_chain = "pioneer_chain"
				}
			}
		}
	}

	after = {
		hidden_effect = { from = { planet = { owner = { country_event = { id = pioneer.316 days = 10800 random = 3600 } } } } }
	}
	option = {
		name = pioneer.305.a
		from = { planet = { add_deposit = d_pioneer_crystal } }
	}
	option = {
		name = pioneer.305.b
		trigger = { owner = { OR = { has_ethic = ethic_pacifist has_ethic = ethic_fanatic_pacifist has_ethic = ethic_xenophile has_ethic = ethic_fanatic_xenophile } } }
		from = { planet = { add_deposit = d_pioneer_crystal } }
	}
	option = {
		name = pioneer.305.c
		trigger = { owner = { has_civic = civic_shadow_council } }
		from = { planet = { add_deposit = d_pioneer_crystal_shadow } }

	}
}

country_event = {
	id = pioneer.316
	is_triggered_only = yes

	title = pioneer.316.name
	desc = pioneer.316.desc

	picture = "GFX_evt_in_the_dark"
	show_sound = event_crystal_ship
	
	location = fromfrom.planet

	option = {
		name = pioneer.316.a
		trigger = {
			OR = { has_ethic = ethic_materialist has_ethic = ethic_fanatic_materialist }
		}
		add_resource = {
			influence = 60
		}
	}
	option = {
		name = pioneer.316.b
		trigger = {
			has_ethic = ethic_fanatic_pacifist
		}
		add_monthly_resource_mult = {
			resource = unity
			value = @tier2unityreward
			min = @tier2unitymin
			max = @tier2unitymax
		}
	}
	option = {
		name = pioneer.316.c
		trigger = { NOT = { has_ethic = ethic_fanatic_materialist } }
		if = {
			limit = {
				NOT = { has_technology = tech_psionic_theory }
			}
			add_research_option = tech_psionic_theory
		}
		else = {
			add_monthly_resource_mult = {
				resource = physics_research
				value = @tier2researchreward
				min = @tier2researchreward
				max = @tier2researchreward
			}
		}
	}
	option = {
		name = pioneer.316.d
		trigger = {
			OR = {
				NOT = { has_ethic = ethic_fanatic_materialist }
				has_technology = tech_psionic_theory
			}
			OR = { has_ethic = ethic_authoritarian has_ethic = ethic_fanatic_authoritarian has_ethic = ethic_xenophobe has_ethic = ethic_fanatic_xenophobe }
		}
		add_modifier = {
			modifier = pioneer_crystal_power
			days = -1
		}
	}
}

planet_event = {
	id = pioneer.306
	is_triggered_only = yes
	hide_window = yes

	immediate = {
		if = {
			limit = {
				owner = {
					has_ascension_perk = ap_mind_over_matter
				}
			}
			owner = { country_event = { id = pioneer.307 } }
		}
		else = {
			owner = { country_event = { id = pioneer.310 } }
		}
	}
	after = {
		planet_event = {
			id = pioneer.311 days = 3600
		}
	}
}

country_event = {
	id = pioneer.307
	is_triggered_only = yes

	title = pioneer.307.name
	desc = {
		text = pioneer.307.desc
		trigger = {
			NOR = { has_ethic = ethic_pacifist has_ethic = ethic_fanatic_pacifist has_ethic = ethic_xenophile has_ethic = ethic_fanatic_xenophile }
		}
	}
	desc = {
		text = pioneer.307.treehugger
		trigger = {
			OR = { has_ethic = ethic_pacifist has_ethic = ethic_fanatic_pacifist has_ethic = ethic_xenophile has_ethic = ethic_fanatic_xenophile }			
		}
	}
	picture = "GFX_evt_in_the_dark"
	show_sound = event_yellow_alert

	immediate = {
		from = { add_planet_devastation = 10 }
	}
	option = {
		name = pioneer.307.a
	}
	option = {
		name = pioneer.307.b
		from = { 
			enable_special_project = { 
				name = PIONEER_CRYSTAL_RAID
				location = this
			}
		}
	}
	option = {
		name = pioneer.307.c
		trigger = {
			OR = { has_ethic = ethic_pacifist has_ethic = ethic_fanatic_pacifist has_ethic = ethic_xenophile has_ethic = ethic_fanatic_xenophile }
			any_owned_leader = {
				leader_class = scientist
				has_trait = leader_trait_scientist_psionic
			} 
		}
		from = {
			enable_special_project = {
				name = PIONEER_CRYSTAL_PACIFY
				location = this
			}
		}
	}
	option = {
		name = pioneer.307.d
		trigger = {
			OR = { has_ethic = ethic_pacifist has_ethic = ethic_fanatic_pacifist has_ethic = ethic_xenophile has_ethic = ethic_fanatic_xenophile }
			NOT = {
				any_owned_leader = {
					leader_class = scientist
					has_trait = leader_trait_scientist_psionic
				}
			}
		}
		from = {
			enable_special_project = {
				name = PIONEER_CRYSTAL_PACIFY
				location = from
			}
		}
	}
}

ship_event = {
	id = pioneer.308
	is_triggered_only = yes
	title = pioneer.308.name
	desc = pioneer.308.desc
	picture = "GFX_evt_surreal_visions"
	show_sound = event_crystal_ship

	location = from

	option = {
		name = pioneer.308.a
		allow = { owner = { has_resource = { type = sr_zro amount > 100 } } }
		fromfrom = { 
			planet_event = {
				id = pioneer.309
			}
		}
	}
	option = {
		name = pioneer.308.b
		fromfrom = { set_planet_flag = pioneer_crystal_zro }
	}
}

planet_event = {
	id = pioneer.309
	is_triggered_only = yes
	title = pioneer.309.name
	desc = pioneer.309.desc
	picture = "GFX_evt_space_monster"
	show_sound = event_crystal_ship

	location = this

	immediate = {
		set_planet_flag = pioneer_crystal_pacified
		hidden_effect = {
			owner = { remove_point_of_interest = pioneer_poi.2.crystal }
		}
		if = {
			limit = { has_deposit = d_pioneer_crystal_shadow }
			remove_deposit = d_pioneer_crystal_shadow
		}
		else = {
			remove_deposit = d_pioneer_crystal
		}
	}

	after = {
		hidden_effect = {
			planet_event = {
				id = pioneer.314 days = 360
			}
		}
	}

	option = {
		name = pioneer.309.a
	}
}

country_event = {
	id = pioneer.310
	is_triggered_only = yes

	title = pioneer.310.name
	desc = pioneer.310.desc

	picture = "GFX_evt_in_the_dark"
	show_sound = event_yellow_alert

	immediate = {
		from = { add_planet_devastation = 10 }
	}
	option = {
		name = pioneer.310.a
	}
	option = {
		name = pioneer.310.b
		from = { 
			enable_special_project = { 
				name = PIONEER_CRYSTAL_RAID
				location = this
			}
		}
	}
}

planet_event = {
	id = pioneer.311
	is_triggered_only = yes

	title = pioneer.311.name
	desc = pioneer.311.desc

	picture = "GFX_evt_space_monster"
	show_sound = event_red_alert

	trigger = {
		NOR = {
			has_planet_flag = pioneer_crystal_pacified
			has_planet_flag = pioneer_crystal_attacked
		}
	}

	immediate = {
		owner = {
			abort_special_project = {
				type = PIONEER_CRYSTAL_RAID
				location = root
			}
			abort_special_project = {
				type = PIONEER_CRYSTAL_PACIFY
				location = root
			}
		}
		create_country = {
			name = "NAME_PIONEER_CRYSTAL"
			type = vol
			flag = {
				icon = {
					category = "zoological"
					file = "flag_zoological_1.dds"
				}
				background = {
					category = "backgrounds"
					file = "00_solid.dds"
				}
				colors = {
					"black"
					"black"
					"null"
					"null"
				}
			}
			effect = {
				set_faction_hostility = {
					target = root.owner
					set_hostile = yes
					set_neutral = no
					set_friendly = no
				}
				save_event_target_as = pioneer_crystal_country
				set_country_flag = pioneer_crystal_country
				every_playable_country = {
					establish_communications_no_message = event_target:pioneer_crystal_country
				}
				create_fleet = {
					name = "NAME_Crystal_Life_Form"
					settings = {
						spawn_debris = no
#						is_boss = yes
					}
					effect = {
						set_owner = event_target:pioneer_crystal_country
						create_ship = {
							name = "NAME_Crystal_Life_Form"
							design = "NAME_Crystal_Life_Form"
							effect = {
#								set_ship_flag = pioneer_crystal_ship
								set_disabled = no
							}
						}
						set_location = {
							target = root.planet
							distance = 10
							angle = 90
							direction = in_system
						}
						set_fleet_stance = passive
						set_fleet_bombardment_stance = indiscriminate
						set_aggro_range_measure_from = self
						set_aggro_range = 350
						auto_move_to_planet = {
							target = root.planet
							clear_auto_move_on_arrival = no
						}
						
					}
				}
			}
		}
	}
	option = {
		name = pioneer.311.a
	}
}

ship_event = {
	id = pioneer.312
	is_triggered_only = yes

	title = pioneer.312.name
	desc = pioneer.312.desc

	picture = "GFX_evt_nuclear_explosion"
	show_sound = event_ship_explosion

	trigger = {
		fromfrom = {
			NOR = {
				has_planet_flag = pioneer_crystal_pacified
				has_planet_flag = pioneer_crystal_attacked
			}
		}
	}

	immediate = {
		fromfrom = {
			set_planet_flag = pioneer_crystal_attacked
			create_country = {
				name = "pioneer_crystal"
				type = vol
				flag = {
					icon = {
						category = "zoological"
						file = "flag_zoological_1.dds"
					}
					background = {
						category = "backgrounds"
						file = "00_solid.dds"
					}
					colors = {
						"black"
						"black"
						"null"
						"null"
					}
				}
				effect = {
					set_faction_hostility = {
						target = root.owner
						set_hostile = yes
						set_neutral = no
						set_friendly = no
					}
					save_event_target_as = pioneer_crystal_country
					set_country_flag = pioneer_crystal_country
					every_playable_country = {
						establish_communications_no_message = event_target:pioneer_crystal_country
					}
					create_fleet = {
						name = "[FromFrom.GetName] Life Form"
						settings = {
							spawn_debris = no
#							is_boss = yes
						}
						effect = {
							set_owner = event_target:pioneer_crystal_country
							create_ship = {
								name = "[FromFrom.GetName] Life Form"
								design = "NAME_Crystal_Life_Form"
								effect = {
								set_disabled = no
								}
							}
							last_created_ship = {
								if = {
									limit = {
										owner = {
											has_technology = tech_missiles_5
										}
									}
									reduce_hp_percent = 0.5
								}
								else_if = {
									limit = {
										owner = {
											has_technology = tech_missiles_4
										}
									}
									reduce_hp_percent = 0.4
								}
								else_if = {
									limit = {
										owner = {
											has_technology = tech_missiles_3
										}
									}
									reduce_hp_percent = 0.3
								}
								else_if = {
									limit = {
										owner = {
											has_technology = tech_missiles_2
										}
									}
									reduce_hp_percent = 0.2
								}
								else = {
									reduce_hp_percent = 0.1
								}
							}
							set_location = {
								target = from
								distance = 10
								angle = 90
								direction = in_system
							}
							set_fleet_stance = passive
							set_fleet_bombardment_stance = indiscriminate
							set_aggro_range_measure_from = self
							set_aggro_range = 350
							auto_move_to_planet = {
								target = from
								clear_auto_move_on_arrival = no
							}
						}
					}
				}
			}
		}
	}
	option = {
		name = pioneer.312.a
		trigger = {
			solar_system = {
				any_fleet_in_system = {
					any_ship = {
						is_owned_by = root.owner
						is_ship_class = shipclass_military
					}
				}
			}
		}
	}
	option = {
		name = pioneer.312.a
		trigger = {
			solar_system = {
				NOT = {
					any_fleet_in_system = {
						any_ship = {
							is_owned_by = root.owner
							is_ship_class = shipclass_military
						}
					}
				}
			}
		}
	}
	option = {
		name = pioneer.312.c
		trigger = { owner = { OR = { has_ethic = ethic_militarist has_ethic = ethic_fanatic_militarist } } }
	}
}

country_event = {
	id = pioneer.313
	is_triggered_only = yes

	title = pioneer.313.name
	desc = pioneer.313.desc

	location = fromfrom

	picture = GFX_evt_large_explosion
	show_sound = event_mystic_reveal

	trigger = {
		fromfromfrom = { is_ship_size = pioneer_crystal_entity }
	}

	immediate = {
		fromfrom = {
			solar_system = {
				every_planet = {
					limit = {
						OR = {
							has_deposit = d_pioneer_crystal_shadow
							has_deposit = d_pioneer_crystal
						}
					}
					save_event_target_as = pioneer_crystal_planet
				}
			}
		}
	}

	after = {
		hidden_effect = {
			owner = { remove_point_of_interest = pioneer_poi.2.crystal }
		}
		event_target:pioneer_crystal_planet = {
			if = {
				limit = {
					has_deposit = d_pioneer_crystal_shadow
				}
				remove_deposit = d_pioneer_crystal_shadow
			}
			else = {
				remove_deposit = d_pioneer_crystal
			}
			add_deposit = d_crystalline_caverns
			add_deposit = d_crystalline_caverns
			hidden_effect = {
				planet_event = {
					id = pioneer.314 days = 360
				}
			}
		}
	}

	option = {
		name = pioneer.313.a
	}
	option = {
		name = pioneer.313.b
		trigger = {
			OR = { has_ethic = ethic_militarist has_ethic = ethic_fanatic_militarist }
		}
	}
	option = {
		name = pioneer.313.c
		trigger = {
			OR = { has_ethic = ethic_pacifist has_ethic = ethic_fanatic_pacifist has_ethic = ethic_xenophile has_ethic = ethic_fanatic_xenophile }
		}
	}
}

planet_event = {
	id = pioneer.314
	is_triggered_only = yes

	title = pioneer.314.name
	desc = pioneer.314.desc

	location = root

	picture = "GFX_evt_animal_wildlife"
	show_sound = event_alien_nature

	after = {
		enable_special_project = {
			name = PIONEER_CRYSTAL_REJUVENATE
			location = THIS
		}
	}
	option = {
		name = pioneer.314.a
	}
}

planet_event = {
	id = pioneer.315
	is_triggered_only = yes

	title = pioneer.315.name
	desc = pioneer.315.desc

	location = from

	picture = "GFX_evt_tomb_world"
	show_sound = event_mystic_reveal

	trigger = {
		planet_devastation >= 100
		from = { has_country_flag = pioneer_crystal_country }
		owner = {
			has_origin = origin_pioneer
		}
	}

	after = {
		destroy_colony = yes
		if = {
			limit = {
				OR = {
					is_planet_class = pc_tundra
					is_planet_class = pc_alpine
					is_planet_class = pc_arctic
				}
			}
			remove_deposit = d_pioneer_crystal
			remove_deposit = d_pioneer_crystal_shadow
			clear_planet_modifiers = yes
			remove_modifier = bleak_planet
			change_pc = pc_barren_cold
			reset_planet = yes
			add_modifier = {
				modifier = "terraforming_candidate"
				days = -1
			}
		}
		else = {
			remove_deposit = d_pioneer_crystal
			remove_deposit = d_pioneer_crystal_shadow
			clear_planet_modifiers = yes
			remove_modifier = bleak_planet
			change_pc = pc_barren
			reset_planet = yes
			add_modifier = {
				modifier = "terraforming_candidate"
				days = -1
			}
		}
		solar_system = {
			every_fleet_in_system = {
				limit = {
					is_ship_size = pioneer_crystal_entity
				}
				delete_fleet = this
			}
		}
	}
	option = {
		name = pioneer.315.a
	}
}

planet_event = {
	id = pioneer.317
	is_triggered_only = yes

	title = pioneer.317.name
	desc = pioneer.317.desc

	picture = "GFX_evt_alien_nature"
	show_sound = event_alien_nature

	after = {
		remove_modifier = bleak_planet 
		add_modifier = {
			modifier = lush_planet days = -1
		}
	}
	option = {
		name = pioneer.317.a
	}
}

#Clean Up Events

planet_event = {
	id = pioneer.999
	is_triggered_only = yes
	hide_window = yes

	trigger = {
		OR = {
			has_building = building_pioneer_elevator
			has_deposit = d_pioneer_elevator
		}
		from = { NOT = { has_origin = origin_pioneer } }
	}

	immediate = {
		from = {
			country_event = {
				id = pioneer.998
			}
		}
	}
}

country_event = {
	id = pioneer.998
	is_triggered_only = yes

	title = pioneer.998.name
	desc = pioneer.998.desc

	picture = "GFX_evt_megastructure_construction"
	show_sound = event_cityscape

	option = {
		name = pioneer.998.a
		from = { 
			add_modifier = {
				modifier = drone_space_elevator
				days = 3600
			}
			if = {
				limit = {
					has_deposit = d_pioneer_elevator
				}
				remove_deposit = d_pioneer_elevator
			}
		}
	}
	option = {
		name = pioneer.998.b
		from = { add_planet_devastation = 20 }
		from = {
			if = {
				limit = {
					has_deposit = d_pioneer_elevator
				}
				remove_deposit = d_pioneer_elevator
			}
		}
	}
	option = {
		name = pioneer.998.c
		hidden_effect = {
			from = {
				add_deposit = d_pioneer_elevator
			}
		}
	}
}

planet_event = {
	id = pioneer.997
	mean_time_to_happen = {
		months = 120
	}

	trigger = {
		has_deposit = d_pioneer_elevator
	}

	title = pioneer.997.name
	desc = pioneer.997.desc

	picture = "GFX_evt_megastructure_construction"
	show_sound = event_cityscape

	option = {
		name = pioneer.997.a
		add_planet_devastation = 20
		remove_deposit = d_pioneer_elevator
	}
}

planet_event = {
	id = pioneer.996
	is_triggered_only = yes

	title = pioneer.996.name
	desc = pioneer.996.desc

	picture = "GFX_evt_megastructure_construction"
	show_sound = event_cityscape

	trigger = {
		has_deposit = d_pioneer_elevator
		from = {
			has_origin = origin_pioneer
		}
	}

	option = {
		name = pioneer.996.a
		from = { remove_deposit = d_pioneer_elevator }
		from = { add_building = building_pioneer_elevator }
	}
}

planet_event = {
	id = pioneer.995
	is_triggered_only = yes
	hide_window = yes

	trigger = {
		OR = {
			has_deposit = d_pioneer_memorial
			has_deposit = d_pioneer_memorial_mil
			has_deposit = d_pioneer_memorial_xen
			has_deposit = d_pioneer_memorial_plus
		}
	}

	immediate = {
		if = {
			limit = {
				has_deposit = d_pioneer_memorial
			}
			remove_deposit = d_pioneer_memorial
			set_planet_flag = pioneer_had_memorial
		}
		else_if = {
			limit = {
				has_deposit = d_pioneer_memorial_mil
			}
			remove_deposit = d_pioneer_memorial_mil
			set_planet_flag = pioneer_had_memorial_mil
		}
		else_if = {
			limit = {
				has_deposit = d_pioneer_memorial_xen
			}
			remove_deposit = d_pioneer_memorial_xen
			set_planet_flag = pioneer_had_memorial_xen
		}
		else = {
			remove_deposit = d_pioneer_memorial_plus
			set_planet_flag = pioneer_had_memorial_plus
		}
	}
}

planet_event = {
	id = pioneer.994
	is_triggered_only = yes

	hide_window = yes

	trigger = {
		OR = {
			has_planet_flag = pioneer_had_memorial
			has_planet_flag = pioneer_had_memorial_mil
			has_planet_flag = pioneer_had_memorial_xen
			has_planet_flag = pioneer_had_memorial_plus
		}
		from = {
			has_origin = origin_pioneer
		}
	}

	immediate = {
		if = {
			limit = {
				has_planet_flag = pioneer_had_memorial
			}
			add_deposit = d_pioneer_memorial
		}
		else_if = {
			limit = {
				has_planet_flag = pioneer_had_memorial_mil
			}
			add_deposit = d_pioneer_memorial_mil
		}
		else_if = {
			limit = {
				has_planet_flag = pioneer_had_memorial_xen
			}
			add_deposit = d_pioneer_memorial_xen
		}
		else = {
			add_deposit = d_pioneer_memorial_plus
		}
	}
}