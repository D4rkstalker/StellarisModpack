namespace = aspetc

planet_event = {
	id = aspetc.1000
	hide_window = yes
	fire_only_once = yes
	
	trigger = {
		exists = archaeological_site
		archaeological_site = {
			is_site_type = site_ASP_dawn_star_is_coming
		}
	}

	immediate = {
		archaeological_site = {
			if = {
				limit = { is_site_at_stage = 2 }
				prev = {
					if = {
						limit = { has_planet_flag = ASP_DAWN_STAR_second }
						remove_planet_flag = ASP_DAWN_STAR_second
					}
					if = {
						limit = { has_planet_flag = ASP_DAWN_STAR_final }
						remove_planet_flag = ASP_DAWN_STAR_final
					}
					set_planet_flag = ASP_DAWN_STAR_first
					set_planet_flag = ASP_DAWN_STAR_first_a
				}
			}
			if = {
				limit = { is_site_at_stage = 3 }
				prev = {
					if = {
						limit = { has_planet_flag = ASP_DAWN_STAR_first }
						remove_planet_flag = ASP_DAWN_STAR_first
					}
					if = {
						limit = { has_planet_flag = ASP_DAWN_STAR_final }
						remove_planet_flag = ASP_DAWN_STAR_final
					}
					set_planet_flag = ASP_DAWN_STAR_second
					set_planet_flag = ASP_DAWN_STAR_second_a
				}
			}
			if = {
				limit = { is_site_at_stage = 4 }
				prev = {
					if = {
						limit = { has_planet_flag = ASP_DAWN_STAR_first }
						remove_planet_flag = ASP_DAWN_STAR_first
					}
					if = {
						limit = { has_planet_flag = ASP_DAWN_STAR_second }
						remove_planet_flag = ASP_DAWN_STAR_second
					}
					set_planet_flag = ASP_DAWN_STAR_final
					set_planet_flag = ASP_DAWN_STAR_final_a
				}
			}
		}
	}
}