namespace = eo_starship_graveyard

###Generate Starship Graveyard starships
planet_event = {
	id = eo_starship_graveyard.1
	title = eo_starship_graveyard.1.name
	picture = GFX_evt_engineering_bay
	show_sound = event_ship_thrusters
	location = root

	is_triggered_only = yes

	immediate = {
		owner = {
			save_event_target_as = "me"
		}
		hidden_effect = {
			create_fleet = {
				name = "NAME_Junkyard_Fleet"
				settings = {
					spawn_debris = no
				}				
				effect = {
					set_owner = event_target:me
					random_list = {
						15 = {
							generate_eo_starship_graveyard_ships = yes
							event_target:me = { set_country_flag = oneJunkyardShip }
						}
						35 = {
							while = {
								count = 2
								generate_eo_starship_graveyard_ships = yes
							}
							event_target:me = { set_country_flag = twoJunkyardShips }
						}
						35 = {
							while = {
								count = 3
								generate_eo_starship_graveyard_ships = yes
							}
							event_target:me = { set_country_flag = threeJunkyardShips }
						}
						15 = {
							while = {
								count = 4
								generate_eo_starship_graveyard_ships = yes
							}
							event_target:me = { set_country_flag = fourJunkyardShips }
						}
					}
					set_location = root
				}
			}
		}
	}

	desc = {
		text = eo_starship_graveyard.1.desc.a
		trigger = {
			NOT = {
				event_target:me = { has_country_flag = oneJunkyardShip }
			}
		}
	}
	desc = {
		text = eo_starship_graveyard.1.desc.b
		trigger = {
			event_target:me = { has_country_flag = oneJunkyardShip }
		}
	}

	option = {
		name = EXCELLENT
		if = {
			limit = {
				event_target:me = { has_country_flag = oneJunkyardShip }
			}
			custom_tooltip = eo_starship_graveyard.1.tooltipA
			event_target:me = { remove_country_flag = oneJunkyardShip }
		}
		else_if = {
			limit = {
				event_target:me = { has_country_flag = twoJunkyardShips }
			}
			custom_tooltip = eo_starship_graveyard.1.tooltipB
			event_target:me = { remove_country_flag = twoJunkyardShips }
		}
		else_if = {
			limit = {
				event_target:me = { has_country_flag = threeJunkyardShips }
			}
			custom_tooltip = eo_starship_graveyard.1.tooltipC
			event_target:me = { remove_country_flag = threeJunkyardShips }
		}
		else_if = {
			limit = {
				event_target:me = { has_country_flag = fourJunkyardShips }
			}
			custom_tooltip = eo_starship_graveyard.1.tooltipD
			event_target:me = { remove_country_flag = fourJunkyardShips }
		}
	}
}