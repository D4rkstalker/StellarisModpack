namespace = tears_sam_traits_leaders
country_event = {
	id = tears_sam_traits_leaders.1
	is_triggered_only = yes
	hide_window = yes
	###################################################
	#Update the leaders with new traits
	###################################################
	immediate = {
		every_owned_leader = {
			tears_sam_add_leader_traits_after_modification = yes
			tears_sam_remove_leader_traits_after_modification = yes
		}
		
		every_pool_leader = {
			tears_sam_add_leader_traits_after_modification = yes
			tears_sam_remove_leader_traits_after_modification = yes			
		}
	}		
}
country_event = {
	id = tears_sam_traits_leaders.2
	###################################################
	#Update INTELLIGENCE rulers
	###################################################
	is_triggered_only = yes
	hide_window = yes

	trigger = {
		from = {
			species = { 
				has_trait = tears_sam_trait_machine_intelligence 
			}
		}
	}

	immediate = {
		from = {
			if = {
				limit = { leader_class = admiral }
				add_trait = tears_sam_trait_admiral_machine_intelligence
				add_ruler_trait = tears_sam_trait_ruler_machine_intelligence
				break = yes
			}
			if = {
				limit = { leader_class = general }
				add_trait = tears_sam_trait_general_machine_intelligence
				add_ruler_trait = tears_sam_trait_ruler_machine_intelligence
				break = yes
			}
			if = {
				limit = { leader_class = governor }
				add_trait = tears_sam_trait_governor_machine_intelligence
				add_ruler_trait = tears_sam_trait_ruler_machine_intelligence
				break = yes
			}
			if = {
				limit = { leader_class = scientist }
				add_trait = tears_sam_trait_scientist_machine_intelligence
				add_ruler_trait = tears_sam_trait_ruler_machine_intelligence
				break = yes
			}
			if = {
				limit = { leader_class = ruler }
				add_trait = tears_sam_trait_ruler_machine_intelligence
				add_ruler_trait = tears_sam_trait_ruler_machine_intelligence
				break = yes
			}
		}
	}
}
country_event = {
	id = tears_sam_traits_leaders.3
	###################################################
	#Update MILITARY rulers
	###################################################
	is_triggered_only = yes
	hide_window = yes

	trigger = {
		from = {
			species = { 
				has_trait = tears_sam_trait_machine_military 
			}
		}
	}

	immediate = {
		from = {
			if = {
				limit = { leader_class = admiral }
				add_trait = tears_sam_trait_admiral_machine_military
				add_ruler_trait = tears_sam_trait_ruler_machine_military
				break = yes
			}
			if = {
				limit = { leader_class = general }
				add_trait = tears_sam_trait_general_machine_military
				add_ruler_trait = tears_sam_trait_ruler_machine_military
				break = yes
			}
			if = {
				limit = { leader_class = governor }
				add_trait = tears_sam_trait_governor_machine_military
				add_ruler_trait = tears_sam_trait_ruler_machine_military
				break = yes
			}
			if = {
				limit = { leader_class = scientist }
				add_trait = tears_sam_trait_scientist_machine_military
				add_ruler_trait = tears_sam_trait_ruler_machine_military
				break = yes
			}
			if = {
				limit = { leader_class = ruler }
				add_trait = tears_sam_trait_ruler_machine_military
				add_ruler_trait = tears_sam_trait_ruler_machine_military
				break = yes
			}
		}
	}
}
country_event = {
	id = tears_sam_traits_leaders.4
	is_triggered_only = yes
	hide_window = yes
	###################################################
	#Trying to update after a naval victory does not catch promising admirals. This is to fix that on monthly pulse
	#I think using traits = {} in leader.1 ignores the base traits of the species.
	###################################################
	immediate = {
		every_owned_leader = {
			limit = { 
				species = { 
					OR = {
						has_trait = tears_sam_trait_machine_intelligence 
						has_trait = tears_sam_trait_machine_military 
					}
				} 
			}	
			tears_sam_add_admiralonly_traits_intelligence = yes
			tears_sam_add_admiralonly_traits_military = yes		
		}
	}		
}