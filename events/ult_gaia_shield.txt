namespace = ult_gaia_shield

planet_event = {
	id = ult_gaia_shield.1
	
	hide_window = yes
	is_triggered_only = yes
	
	immediate = {
		root = { 
		    create_ambient_object = {
						type = "ult_gaia_shield"
						entity_scale_to_size = yes
						scale = 0.12
						location = this
						use_3d_location = yes
						duration = -1
			  }
			  last_created_ambient_object = {
						save_event_target_as = ult_gaia_shield_entity
			  }
			  planet_event = { id = ult_gaia_shield.4 days = 1 }
	  }
	}
}

planet_event = {
	id = ult_gaia_shield.2
	
	hide_window = yes
	is_triggered_only = yes
	
	immediate = {
		root = { 
		    create_ambient_object = {
						type = "ult_gaia_shield"
						entity_scale_to_size = yes
						scale = 0.13
						location = this
						use_3d_location = yes
						duration = -1
			  }
			  last_created_ambient_object = {
						save_event_target_as = ult_gaia_shield_entity
			  }
			  planet_event = { id = ult_gaia_shield.4 days = 1 }
	  }
	}
}

planet_event = {
	id = ult_gaia_shield.3
	
	hide_window = yes
	is_triggered_only = yes
	
	immediate = {
		root = { 
		    create_ambient_object = {
						type = "ult_gaia_shield"
						entity_scale_to_size = yes
						scale = 1.0
						location = this.star
						use_3d_location = yes
						duration = -1
			  }
			  last_created_ambient_object = {
						save_event_target_as = ult_gaia_shield_entity
			  }
			  planet_event = { id = ult_gaia_shield.4 days = 1 }
	  }
	}
}

planet_event = {
	id = ult_gaia_shield.4
	
	hide_window = yes
	is_triggered_only = yes
	
	immediate = {
		if = { 
				limit = {
				   not = { has_modifier = ult_gaia_shield_activating }
				}
				event_target:ult_gaia_shield_entity = { destroy_ambient_object = this }
	  }
	  else = { planet_event = { id = ult_gaia_shield.4 days = 1 } }
	}
}