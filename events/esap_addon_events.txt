namespace = esap_addon

# Adds addon flag
event = {
	id = esap_addon.1
	hide_window = yes
	is_triggered_only = yes
	

	immediate = {	
		every_country = {
			set_country_flag = esap_addon_active
		}
	}
}

# Check Planet for old Power Plants and replace with new.
planet_event = {
	id = esap_addon.2
	hide_window = yes
	is_triggered_only = yes
	
	trigger = {
		owner = {
			has_ascension_perk = ap_esap_energy_n_unity_addon		
		}
	}
	
	immediate = {
		every_tile = {
			switch = {
				trigger = has_building 
				
				building_basic_power_plant = { set_building =  building_basic_power_plant_esap_addon }
				building_power_plant_1 = { set_building =  building_power_plant_1_esap_addon }
				building_power_plant_2 = { set_building =  building_power_plant_2_esap_addon }
				building_power_plant_3 = { set_building =  building_power_plant_3_esap_addon }
				building_power_plant_4 = { set_building =  building_power_plant_4_esap_addon }
				building_power_plant_5 = { set_building =  building_power_plant_5_esap_addon }
				betharian_power_plant = { set_building =  betharian_power_plant_esap_addon }		
			}
		}
	}
}


# Resources when a planet is conquered.
planet_event = {
	id = esap_addon.4
	hide_window = yes
	is_triggered_only = yes
	
	trigger = {
		owner = {
			has_ascension_perk = ap_esap_border_n_war_addon		
		}
	}
	
	immediate = {
		every_tile = {
			owner = {
				add_monthly_resource_mult = {
					resource = unity
					value = 1
					min = 5
					max = 50
				}
				add_influence = 10
			}
		}
	}
}
