namespace = machinedlcpp #processing power

country_event = {
	id = machinedlcpp.1
	hide_window = yes
	is_triggered_only = yes

	trigger = {
		has_authority = auth_machine_intelligence
		NOT = { has_valid_civic = civic_machine_clockwork }
	}

	immediate = {
		capital_scope = {
			add_building = building_planet_processor_1
			while = { create_pop = { species = owner.species } count = 2 }
			#check machinedlcmod_event_pop_district_adjustment scripted effect
			if = {
				limit = {
					owner = {
						NOR = {
							has_valid_civic = civic_machine_trader
							has_valid_civic = civic_machine_heritage
							has_valid_civic = civic_machine_clockwork
							has_valid_civic = civic_machine_rock_body
							has_valid_civic = civic_machine_synth_skin
							has_valid_civic = civic_machine_emotion_emulator_intelligence
						}					
					}
				}
				remove_district = district_generator
				add_district = district_nexus
				create_pop = { species = owner.species }
			}
		}
	}
}
#processing power calculations
event = {
	id = machinedlcpp.2
	hide_window = yes
	is_triggered_only = yes

	trigger = {
		any_country = {
			has_authority = auth_machine_intelligence 
			NOT = { has_valid_civic = civic_machine_clockwork }
			has_global_flag = machinedlc_new_feature_1
		}
	}

	immediate = {
		every_country = {
			limit = { resource_income_compare = { resource = processing_power value > 0 } }
			add_resource = { processing_power = -50000 } #to hide resource storage full warning
		}
		every_country = {
			limit = {
				has_authority = auth_machine_intelligence
				NOT = { has_valid_civic = civic_machine_clockwork }
				has_global_flag = machinedlc_new_feature_1
			}
			clear_mod_processing_power = yes
			if = {
				limit = { resource_income_compare = { resource = processing_power value > 0 } }
				if = {
					limit = { empire_size >= 0 empire_size <= 50 }
					calculate_processing_power_admincap_1_plus = yes
				}
				if = {
					limit = { empire_size > 50 empire_size <= 100 }
					calculate_processing_power_admincap_2_plus = yes
				}
				if = {
					limit = { empire_size > 100 empire_size <= 150 }
					calculate_processing_power_admincap_3_plus = yes
				}
				if = {
					limit = { empire_size > 150 empire_size <= 200 }
					calculate_processing_power_admincap_4_plus = yes
				}
				if = {
					limit = { empire_size > 200 empire_size <= 250 }
					calculate_processing_power_admincap_5_plus = yes
				}
				if = {
					limit = { empire_size > 250 empire_size <= 300 }
					calculate_processing_power_admincap_6_plus = yes
				}
				if = {
					limit = { empire_size > 300 empire_size <= 350 }
					calculate_processing_power_admincap_6_plus = yes
				}
				if = {
					limit = { empire_size > 350 empire_size <= 400 }
					calculate_processing_power_admincap_7_plus = yes
				}
				if = {
					limit = { empire_size > 400 empire_size <= 450 }
					calculate_processing_power_admincap_8_plus = yes
				}
				if = {
					limit = { empire_size > 450 empire_size <= 500 }
					calculate_processing_power_admincap_9_plus = yes
				}
				if = {
					limit = { empire_size > 500 }
					calculate_processing_power_admincap_10_plus = yes
				}
			}
			if = {
				limit = { has_monthly_income = { resource = processing_power value >= 0 } has_monthly_income = { resource = processing_power value < 10 } }
				add_modifier = { modifier = processing_power_0 days = -1 }
			}
			if = {
				limit = { resource_income_compare = { resource = processing_power value < 0 } }
				if = {
					limit = { empire_size >= 0 empire_size <= 50 }
					calculate_processing_power_admincap_1_minus = yes
				}
				if = {
					limit = { empire_size > 50 empire_size <= 100 }
					calculate_processing_power_admincap_2_minus = yes
				}
				if = {
					limit = { empire_size > 100 empire_size <= 150 }
					calculate_processing_power_admincap_3_minus = yes
				}
				if = {
					limit = { empire_size > 150 empire_size <= 200 }
					calculate_processing_power_admincap_4_minus = yes
				}
				if = {
					limit = { empire_size > 200 empire_size <= 250 }
					calculate_processing_power_admincap_5_minus = yes
				}
				if = {
					limit = { empire_size > 250 empire_size <= 300 }
					calculate_processing_power_admincap_6_minus = yes
				}
				if = {
					limit = { empire_size > 300 empire_size <= 350 }
					calculate_processing_power_admincap_6_minus = yes
				}
				if = {
					limit = { empire_size > 350 empire_size <= 400 }
					calculate_processing_power_admincap_7_minus = yes
				}
				if = {
					limit = { empire_size > 400 empire_size <= 450 }
					calculate_processing_power_admincap_8_minus = yes
				}
				if = {
					limit = { empire_size > 450 empire_size <= 500 }
					calculate_processing_power_admincap_9_minus = yes
				}
				if = {
					limit = { empire_size > 500 }
					calculate_processing_power_admincap_10_minus = yes
				}
			}
		}
	}
}