namespace = nsc_headquarters

#headquarters Buildtime modifiers were removed because no penalties are needed now for second headquarters construction... the first only blows itself up if a new one is built.

# This event triggers whenever a new headquarters is built.
country_event = {
	id = nsc_headquarters.1
	hide_window = yes
	is_triggered_only = yes

	trigger = {
		any_owned_ship = {
			is_ship_size = headquarters 
		}
	}
	
	immediate = {
		owner = {
			add_modifier = {
				modifier = nsc_headquarters_bonus
				days = -1
			}
		}
		#set_country_flag = nsc_headquarters_exists
	}
}


# headquarters Destroyed/Dismissed
country_event = {
	id = nsc_headquarters.2
	hide_window = yes
	is_triggered_only = yes

	immediate = { 
		owner = {
			remove_modifier = nsc_headquarters_bonus
			#remove_country_flag = nsc_headquarters_exists
		}
	}
}


country_event = {
	id = nsc_headquarters.3
	hide_window = yes
	
	mean_time_to_happen = { days = 30 }
	
	trigger = {
		has_modifier = nsc_headquarters_bonus
		count_owned_ship = {
			limit = { is_ship_size = headquarters }
			count = 0
		}
	}
	
	immediate = { country_event = { id = nsc_headquarters.2 } }
}


country_event = {
	id = nsc_headquarters.4
	hide_window = yes
	
	mean_time_to_happen = { days = 30 }
	
	trigger = {
		count_owned_ship = {
			limit = { is_ship_size = headquarters }
			count > 0
		}
	}
	
	immediate = { country_event = { id = nsc_headquarters.1 } }
}


# The AI doesnt trigger the build event
#country_event = {
#	id = nsc_headquarters.4
#	hide_window = yes
#	
#	mean_time_to_happen = { days = 7 }
#	
#	trigger = {
#		NOT = { has_modifier = nsc_headquarters_bonus }
#		count_owned_ship = {
#			limit = { is_ship_size = headquarters }
#			count > 0
#		}
#	}
#	
#	immediate = {
#		add_modifier = {
#			modifier = nsc_headquarters_bonus
#			days = -1
#		}
#	}
#}

####################
# NAMESPACE CHANGE #
####################

#namespace = nsc_headquarters_check

# Prevents more than one
#ship_event = {
#	id = nsc_headquarters_check.1
#	hide_window = yes
#	is_triggered_only = yes
#
#	trigger = { is_ship_size = headquarters }
#
#	immediate = {
#		set_ship_flag = "nsc_keep"
#		owner = {
#			every_owned_ship = {
#				limit = {
#					is_ship_size = "headquarters"
#					NOT = { has_ship_flag = "nsc_keep" }
#				}
#				reduce_hp_percent = 100 #This allows for destruction of the headquarters(s) "not" just built to be destroyed without wiping out the fleet it is in.
#			}
#		}
#		remove_ship_flag = "nsc_keep"
#	}
#}

#country_event = {
#	# disbanded
#	id = nsc_headquarters_check.301
#	is_triggered_only = yes
#	hide_window = yes
#	
#	trigger = { from = { is_ship_size = headquarters } }
#	
#	immediate = { country_event = { id = nsc_headquarters.2 } }
#}

#country_event = {
#	# Destroyed (country is the victim)
#	id = nsc_headquarters_check.302
#	is_triggered_only = yes
#	hide_window = yes
#	
#	trigger = { fromfrom = { is_ship_size = headquarters } }
#
#	immediate = { country_event = { id = nsc_headquarters.2 } }
#}
