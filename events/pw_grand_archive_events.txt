namespace = pw_grand_archive

#Grand Archive Hub Event
country_event = {
	id = pw_grand_archive.1
	title = pw_grand_archive.1.name
	desc = pw_grand_archive.1.desc
	picture = GFX_evt_ancient_databank
	# show_sound = event_mystic_reveal_light
	is_triggered_only = yes

	trigger = {
		NOT = {
			has_country_flag = pw_is_in_grand_archive
		}
	}

	immediate = {
		set_country_flag = pw_is_in_grand_archive
		random_owned_planet = {
			limit = {
				has_active_building = pw_building_grand_archive
			}
			save_event_target_as = pw_grand_archive_planet
		}
	}

	#Society: ARK Project -> 100
	option = { #Access
		name = {
			trigger = {
				NOT = { has_country_flag = pw_grand_archive_ARK_project_completed }
			}
			text = pw_grand_archive.ARK_project.assemble
		}
		name = {
			trigger = {
				has_country_flag = pw_grand_archive_ARK_project_completed
				NOT = {
					has_country_flag = pw_grand_archive_ARK_project_secrets
				}
			}
			text = pw_grand_archive.ARK_project.delve
		}
		name = {
			trigger = {
				has_country_flag = pw_grand_archive_ARK_project_secrets
			}
			text = pw_grand_archive.ARK_project
		}
		custom_tooltip = pw_grand_archive.1.tooltip
		hidden_effect = {
			country_event = {
				id = pw_grand_archive.100
			}
		}
	}

	#Society: Library of Babel -> 200
	option = { #Access
		name = {
			trigger = {
				NOT = { has_country_flag = pw_grand_archive_library_of_babel_completed }
			}
			text = pw_grand_archive.library_of_babel.assemble
		}
		name = {
			trigger = {
				has_country_flag = pw_grand_archive_library_of_babel_completed
				NOT = {
					has_country_flag = pw_grand_archive_library_of_babel_secrets
				}
			}
			text = pw_grand_archive.library_of_babel.delve
		}
		name = {
			trigger = {
				has_country_flag = pw_grand_archive_library_of_babel_secrets
			}
			text = pw_grand_archive.library_of_babel
		}
		custom_tooltip = pw_grand_archive.1.tooltip
		hidden_effect = {
			country_event = {
				id = pw_grand_archive.200
			}
		}
	}

	#Society: Cradle Initiative -> 300
	option = { #Access
		name = {
			trigger = {
				NOT = { has_country_flag = pw_grand_archive_cradle_initiative_completed }
			}
			text = pw_grand_archive.cradle_initiative.assemble
		}
		name = {
			trigger = {
				has_country_flag = pw_grand_archive_cradle_initiative_completed
				NOT = {
					has_country_flag = pw_grand_archive_cradle_initiative_secrets
				}
			}
			text = pw_grand_archive.cradle_initiative.delve
		}
		name = {
			trigger = {
				has_country_flag = pw_grand_archive_cradle_initiative_secrets
			}
			text = pw_grand_archive.cradle_initiative
		}
		custom_tooltip = pw_grand_archive.1.tooltip
		hidden_effect = {
			country_event = {
				id = pw_grand_archive.300
			}
		}
	}

	#Physics: Particle Museum -> 400
	option = { #Access
		name = {
			trigger = {
				NOT = { has_country_flag = pw_grand_archive_particle_museum_completed }
			}
			text = pw_grand_archive.particle_museum.assemble
		}
		name = {
			trigger = {
				has_country_flag = pw_grand_archive_particle_museum_completed
				NOT = {
					has_country_flag = pw_grand_archive_particle_museum_secrets
				}
			}
			text = pw_grand_archive.particle_museum.delve
		}
		name = {
			trigger = {
				has_country_flag = pw_grand_archive_particle_museum_secrets
			}
			text = pw_grand_archive.particle_museum
		}
		custom_tooltip = pw_grand_archive.1.tooltip
		hidden_effect = {
			country_event = {
				id = pw_grand_archive.400
			}
		}
	}

	#Physics: Omnidatabase -> 500
	option = { #Access
		name = {
			trigger = {
				NOT = { has_country_flag = pw_grand_archive_omnidatabase_completed }
			}
			text = pw_grand_archive.omnidatabase.assemble
		}
		name = {
			trigger = {
				has_country_flag = pw_grand_archive_omnidatabase_completed
				NOT = {
					has_country_flag = pw_grand_archive_omnidatabase_secrets
				}
			}
			text = pw_grand_archive.omnidatabase.delve
		}
		name = {
			trigger = {
				has_country_flag = pw_grand_archive_omnidatabase_secrets
			}
			text = pw_grand_archive.omnidatabase
		}
		custom_tooltip = pw_grand_archive.1.tooltip
		hidden_effect = {
			country_event = {
				id = pw_grand_archive.500
			}
		}
	}

	#Physics: Stellarium -> 600
	option = { #Access
		name = {
			trigger = {
				NOT = { has_country_flag = pw_grand_archive_stellarium_completed }
			}
			text = pw_grand_archive.stellarium.assemble
		}
		name = {
			trigger = {
				has_country_flag = pw_grand_archive_stellarium_completed
				NOT = {
					has_country_flag = pw_grand_archive_stellarium_secrets
				}
			}
			text = pw_grand_archive.stellarium.delve
		}
		name = {
			trigger = {
				has_country_flag = pw_grand_archive_stellarium_secrets
			}
			text = pw_grand_archive.stellarium
		}
		custom_tooltip = pw_grand_archive.1.tooltip
		hidden_effect = {
			country_event = {
				id = pw_grand_archive.600
			}
		}
	}

	#Engineering: Zero-g Exposition -> 700
	option = { #Access
		name = {
			trigger = {
				NOT = { has_country_flag = pw_grand_archive_zero_g_exposition_completed }
			}
			text = pw_grand_archive.zero_g_exposition.assemble
		}
		name = {
			trigger = {
				has_country_flag = pw_grand_archive_zero_g_exposition_completed
				NOT = {
					has_country_flag = pw_grand_archive_zero_g_exposition_secrets
				}
			}
			text = pw_grand_archive.zero_g_exposition.delve
		}
		name = {
			trigger = {
				has_country_flag = pw_grand_archive_zero_g_exposition_secrets
			}
			text = pw_grand_archive.zero_g_exposition
		}
		custom_tooltip = pw_grand_archive.1.tooltip
		hidden_effect = {
			country_event = {
				id = pw_grand_archive.700
			}
		}
	}

	#Engineering: Mechanist Collection -> 800
	option = { #Access
		name = {
			trigger = {
				NOT = { has_country_flag = pw_grand_archive_mechanist_collection_completed }
			}
			text = pw_grand_archive.mechanist_collection.assemble
		}
		name = {
			trigger = {
				has_country_flag = pw_grand_archive_mechanist_collection_completed
				NOT = {
					has_country_flag = pw_grand_archive_mechanist_collection_secrets
				}
			}
			text = pw_grand_archive.mechanist_collection.delve
		}
		name = {
			trigger = {
				has_country_flag = pw_grand_archive_mechanist_collection_secrets
			}
			text = pw_grand_archive.mechanist_collection
		}
		custom_tooltip = pw_grand_archive.1.tooltip
		hidden_effect = {
			country_event = {
				id = pw_grand_archive.800
			}
		}
	}

	#Engineering: Meta-Architectural Complex -> 900
	option = { #Access
		name = {
			trigger = {
				NOT = { has_country_flag = pw_grand_archive_meta_architectural_complex_completed }
			}
			text = pw_grand_archive.meta_architectural_complex.assemble
		}
		name = {
			trigger = {
				has_country_flag = pw_grand_archive_meta_architectural_complex_completed
				NOT = {
					has_country_flag = pw_grand_archive_meta_architectural_complex_secrets
				}
			}
			text = pw_grand_archive.meta_architectural_complex.delve
		}
		name = {
			trigger = {
				has_country_flag = pw_grand_archive_meta_architectural_complex_secrets
			}
			text = pw_grand_archive.meta_architectural_complex
		}
		custom_tooltip = pw_grand_archive.1.tooltip
		hidden_effect = {
			country_event = {
				id = pw_grand_archive.900
			}
		}
	}

	#Final: Holoarchive -> 1000
	option = { #Access
		name = pw_grand_archive.holoarchive
		allow = {
			custom_tooltip = {
				fail_text = pw_grand_archive.holoarchive.requirements
				OR = {
					event_target:pw_grand_archive_planet = {
						has_deposit = pw_d_ark_project
						has_deposit = pw_d_cradle_initiative
						has_deposit = pw_d_library_of_babel
						has_deposit = pw_d_particle_museum
						has_deposit = pw_d_omnidatabase
						has_deposit = pw_d_stellarium
						has_deposit = pw_d_zero_g_exposition
						has_deposit = pw_d_mechanist_collection
						has_deposit = pw_d_meta_architectural_complex
					}
					has_country_flag = pw_grand_archive_holoarchive_unified
				}
			}
		}
		custom_tooltip = pw_grand_archive.1.tooltip
		hidden_effect = {
			country_event = {
				id = pw_grand_archive.1000
			}
		}
	}

	#Leave the archive
	option = {
		name = pw_grand_archive.leave
		pw_grand_archive_leave = yes
	}
}

#Society: ARK Project -> 100
#Access:
country_event = {
	id = pw_grand_archive.100
	title = pw_grand_archive.100.name
	desc = {
		trigger = {
			NOT = { has_country_flag = pw_grand_archive_ARK_project_completed }
		}
		text = pw_grand_archive.100.desc.not_assembled
	}
	desc = {
		trigger = {
			has_country_flag = pw_grand_archive_ARK_project_completed
		}
		text = pw_grand_archive.100.desc.assembled
	}

	picture = GFX_evt_society_research
	is_triggered_only = yes

	#Assemble
	option = {
		name = pw_grand_archive.ARK_project.assemble
		trigger = {
			NOT = {
				has_country_flag = pw_grand_archive_ARK_project_started
			}
		}
		allow = {
			pw_has_unity_to_assemble_archive = yes
		}
		pw_grand_archive_pay_assemble_cost = yes
		hidden_effect = {
			country_event = { id = pw_grand_archive.101 }
		}
	}

	#Delve
	option = {
		name = pw_grand_archive.ARK_project.delve
		trigger = {
			NOT = {
				has_country_flag = pw_grand_archive_ARK_project_secrets
			}
		}
		allow = {
			custom_tooltip = {
				fail_text = pw_grand_archive.ARK_project.delve.complete_project
				has_country_flag = pw_grand_archive_ARK_project_completed
			}
			resource_stockpile_compare = {
				resource = influence
				value >= @pw_grand_archive_secrets_cost_check
			}
		}
		add_resource = {
			influence = @pw_grand_archive_secrets_cost
		}
		hidden_effect = {
			country_event = { id = pw_grand_archive.120 }
		}
	}

	#Return
	option = {
		name = pw_grand_archive.return
		pw_grand_archive_return_to_hub = yes
	}
}

#Assemble Project:
country_event = {
	id = pw_grand_archive.101
	title = pw_grand_archive.101.name
	desc = pw_grand_archive.101.desc
	picture = GFX_evt_society_research
	show_sound = event_laboratory_sound
	is_triggered_only = yes

	immediate = {
		change_variable = {
			which = pw_archives_assembled_count
			value = 1
		}
		set_country_flag = pw_grand_archive_ARK_project_started
	}

	#Primary project
	option = {
		name = pw_grand_archive.continue_to_project

		trigger = {
			#Seed Bank
			any_owned_planet = {
				NOT = {
					has_active_building = pw_building_grand_archive
				}
				is_capital = no
			}
			#Frozen Specimens
			any_system = {
				any_system_planet = {
					is_surveyed = {
						who = root
						status = yes
					}
					OR = {
						merg_is_barren_cold = yes
						merg_is_frozen = yes
						is_planet_class = pc_ice_asteroid
					}
					solar_system = {
						OR = {
							NOT = { exists = space_owner }
							AND = {
								exists = space_owner
								space_owner = {
									is_country = root
								}
							}
						}
					}
				}
			}
			#Uncharted Biosphere
			any_system = {
				any_system_planet = {
					is_surveyed = {
						who = root
						status = yes
					}
					OR = {
						merg_is_continental = yes
						merg_is_ocean = yes
						merg_is_tropical = yes
						merg_is_gaia = yes
					}
					solar_system = {
						OR = {
							NOT = { exists = space_owner }
							AND = {
								exists = space_owner
								space_owner = {
									is_country = root
								}
							}
						}
					}
				}
			}
		}
		begin_event_chain = {
			event_chain = pw_assemble_ARK_project_chain
			target = root
		}
		pw_grand_archive_return_to_hub = yes
		hidden_effect = {
			#Seed Bank
			random_owned_planet = {
				limit = {
					NOT = {
						has_active_building = pw_building_grand_archive
					}
					is_capital = no
				}
				enable_special_project = {
					name = PW_ARK_PROJECT_SEED_BANK
					location = this
					owner = root
				}
			}
			#Frozen Specimens
			random_galaxy_planet = {
				limit = {
					is_surveyed = {
						who = root
						status = yes
					}
					OR = {
						merg_is_barren_cold = yes
						merg_is_frozen = yes
						is_planet_class = pc_ice_asteroid
					}
					solar_system = {
						OR = {
							NOT = { exists = space_owner }
							AND = {
								exists = space_owner
								space_owner = {
									is_country = root
								}
							}
						}
					}
				}
				enable_special_project = {
					name = PW_ARK_PROJECT_FROZEN_SPECIMEN
					location = this
					owner = root
				}
			}
			#Uncharted Biosphere
			random_galaxy_planet = {
				limit = {
					is_surveyed = {
						who = root
						status = yes
					}
					OR = {
						merg_is_continental = yes
						merg_is_ocean = yes
						merg_is_tropical = yes
						merg_is_gaia = yes
					}
					solar_system = {
						OR = {
							NOT = { exists = space_owner }
							AND = {
								exists = space_owner
								space_owner = {
									is_country = root
								}
							}
						}
					}
				}
				enable_special_project = {
					name = PW_ARK_PROJECT_UNCHARTED_BIOSPHERE
					location = this
					owner = root
				}
			}
		}
	}

	#Replacement project (not all conditions set)
	option = {
		name = pw_grand_archive.continue_to_project
		trigger = {
			NAND = { #Reverse of the above
				#Seed Bank
				any_owned_planet = {
					NOT = {
						has_active_building = pw_building_grand_archive
					}
					is_capital = no
				}
				#Frozen Specimens
				any_system = {
					any_system_planet = {
						is_surveyed = {
							who = root
							status = yes
						}
						OR = {
							merg_is_barren_cold = yes
							merg_is_frozen = yes
							is_planet_class = pc_ice_asteroid
						}
						solar_system = {
							OR = {
								NOT = { exists = space_owner }
								AND = {
									exists = space_owner
									space_owner = {
										is_country = root
									}
								}
							}
						}
					}
				}
				#Uncharted Biosphere
				any_system = {
					any_system_planet = {
						is_surveyed = {
							who = root
							status = yes
						}
						OR = {
							merg_is_continental = yes
							merg_is_ocean = yes
							merg_is_tropical = yes
							merg_is_gaia = yes
						}
						solar_system = {
							OR = {
								NOT = { exists = space_owner }
								AND = {
									exists = space_owner
									space_owner = {
										is_country = root
									}
								}
							}
						}
					}
				}
			}
		}
		pw_grand_archive_return_to_hub = yes
		enable_special_project = {
			name = PW_ARK_PROJECT
			location = event_target:pw_grand_archive_planet
			owner = root
		}
	}
}

#Complete seed bank:
planet_event = {
	id = pw_grand_archive.105
	title = pw_grand_archive.105.name
	desc = pw_grand_archive.105.desc
	picture = GFX_evt_society_research
	show_sound = event_alien_nature
	location = this

	is_triggered_only = yes

	option = {
		name = "EXCELLENT"
		owner = {
			add_event_chain_counter = {
				event_chain = pw_assemble_ARK_project_chain
				counter = pw_gene_sources_found
				amount = 1
			}
			random_owned_leader = {
				limit = {
					is_researching_area = society
				}
				add_experience = 300
			}
			hidden_effect = {
				if = {
					limit = {
						has_completed_event_chain_counter = {
							event_chain = pw_assemble_ARK_project_chain
							counter = pw_gene_sources_found
						}
					}
					country_event = { id = pw_grand_archive.110 }
				}
			}
		}
	}
}

#Completed Frozen Specimen:
ship_event = {
	id = pw_grand_archive.106
	title = pw_grand_archive.106.name
	desc = pw_grand_archive.106.desc
	picture = GFX_evt_frozen
	show_sound = event_alien_nature
	location = fromfrom

	is_triggered_only = yes

	option = {
		name = "EXCELLENT"
		owner = {
			add_event_chain_counter = {
				event_chain = pw_assemble_ARK_project_chain
				counter = pw_gene_sources_found
				amount = 1
			}
			add_monthly_resource_mult = {
				resource = society_research
				value = @tier2researchreward
				min = @tier2researchmin
				max = @tier2researchmax
			}
			hidden_effect = {
				if = {
					limit = {
						has_completed_event_chain_counter = {
							event_chain = pw_assemble_ARK_project_chain
							counter = pw_gene_sources_found
						}
					}
					country_event = { id = pw_grand_archive.110 }
				}
			}
		}
	}
}

#Completed Uncharted Biosphere:
ship_event = {
	id = pw_grand_archive.107
	title = pw_grand_archive.107.name
	desc = pw_grand_archive.107.desc
	picture = GFX_evt_aggressive_flora
	show_sound = event_alien_nature
	location = fromfrom

	is_triggered_only = yes

	option = {
		name = "EXCELLENT"
		owner = {
			add_event_chain_counter = {
				event_chain = pw_assemble_ARK_project_chain
				counter = pw_gene_sources_found
				amount = 1
			}
			add_monthly_resource_mult = {
				resource = society_research
				value = @tier2researchreward
				min = @tier2researchmin
				max = @tier2researchmax
			}
			hidden_effect = {
				if = {
					limit = {
						has_completed_event_chain_counter = {
							event_chain = pw_assemble_ARK_project_chain
							counter = pw_gene_sources_found
						}
					}
					country_event = { id = pw_grand_archive.110 }
				}
			}
		}
	}
}

#Completed Project:
country_event = {
	id = pw_grand_archive.110
	title = pw_grand_archive.110.name
	desc = pw_grand_archive.110.desc
	picture = GFX_evt_society_research
	show_sound = event_laboratory_sound
	is_triggered_only = yes

	option = {
		name = pw_grand_archive.OK

		if = {
			limit = {
				has_event_chain = pw_assemble_ARK_project_chain
			}
			end_event_chain = pw_assemble_ARK_project_chain
		}
		event_target:pw_grand_archive_planet = {
			if = {
				limit = { NOT = { has_deposit = pw_d_ark_project } }
				add_deposit = pw_d_ark_project
			}
		}
		hidden_effect = {
			set_country_flag = pw_grand_archive_ARK_project_completed
		}
	}
}

#Delve Into Secrets:
country_event = {
	id = pw_grand_archive.120
	title = pw_grand_archive.120.name
	desc = pw_grand_archive.120.desc
	picture = GFX_evt_society_research
	show_sound = event_laboratory_sound
	is_triggered_only = yes

	option = {
		name = pw_grand_archive.delve_into_secrets
		add_research_option = pw_tech_grand_archive_genetic_secrets
		hidden_effect = {
			set_country_flag = pw_grand_archive_ARK_project_secrets
		}
		pw_grand_archive_return_to_hub =yes
	}
}

#Society: Library of Babel -> 200
#Access:
country_event = {
	id = pw_grand_archive.200
	title = pw_grand_archive.200.name
	desc = {
		trigger = {
			NOT = { has_country_flag = pw_grand_archive_library_of_babel_completed }
		}
		text = pw_grand_archive.200.desc.not_assembled
	}
	desc = {
		trigger = {
			has_country_flag = pw_grand_archive_library_of_babel_completed
		}
		text = pw_grand_archive.200.desc.assembled
	}
	picture = GFX_evt_resource_cache
	is_triggered_only = yes

	#Assemble
	option = {
		name = pw_grand_archive.library_of_babel.assemble
		trigger = {
			NOT = {
				has_country_flag = pw_grand_archive_library_of_babel_started
			}
		}
		allow = {
			pw_has_unity_to_assemble_archive = yes
		}
		pw_grand_archive_pay_assemble_cost = yes
		hidden_effect = {
			country_event = { id = pw_grand_archive.201 }
		}
	}

	#Delve
	option = {
		name = pw_grand_archive.library_of_babel.delve
		trigger = {
			NOT = {
				has_country_flag = pw_grand_archive_library_of_babel_secrets
			}
		}
		allow = {
			custom_tooltip = {
				fail_text = pw_grand_archive.library_of_babel.delve.complete_project
				has_country_flag = pw_grand_archive_library_of_babel_completed
			}
			resource_stockpile_compare = {
				resource = influence
				value >= @pw_grand_archive_secrets_cost_check
			}
		}
		add_resource = {
			influence = @pw_grand_archive_secrets_cost
		}
		hidden_effect = {
			country_event = { id = pw_grand_archive.220 }
		}
	}

	#Return
	option = {
		name = pw_grand_archive.return
		pw_grand_archive_return_to_hub = yes
	}
}

#Assemble Project:
country_event = {
	id = pw_grand_archive.201
	title = pw_grand_archive.201.name
	desc = pw_grand_archive.201.desc
	picture = GFX_evt_resource_cache
	show_sound = event_laboratory_sound
	is_triggered_only = yes

	immediate = {
		change_variable = {
			which = pw_archives_assembled_count
			value = 1
		}
		set_country_flag = pw_grand_archive_library_of_babel_started
	}

	#Primary project
	option = {
		name = pw_grand_archive.continue_to_project
		event_target:pw_grand_archive_planet = {
			enable_special_project = {
				name = PW_LIBRARY_OF_BABEL
				location = this
				owner = root
			}
		}
		pw_grand_archive_return_to_hub = yes
	}
}

#Completed Project:
country_event = {
	id = pw_grand_archive.210
	title = pw_grand_archive.210.name
	desc = pw_grand_archive.210.desc
	picture = GFX_evt_resource_cache
	show_sound = event_laboratory_sound
	is_triggered_only = yes

	option = {
		name = pw_grand_archive.OK
		add_monthly_resource_mult = {
			resource = unity
			value = @tier3unityreward
			min = @tier3unitymin
			max = @tier3unitymax
		}
		event_target:pw_grand_archive_planet = {
			if = {
				limit = { NOT = { has_deposit = pw_d_library_of_babel } }
				add_deposit = pw_d_library_of_babel
			}
		}
		hidden_effect = {
			set_country_flag = pw_grand_archive_library_of_babel_completed
		}
	}
}

#Delve Into Secrets:
country_event = {
	id = pw_grand_archive.220
	title = pw_grand_archive.220.name
	desc = pw_grand_archive.220.desc
	picture = GFX_evt_resource_cache
	show_sound = event_laboratory_sound
	is_triggered_only = yes

	option = {
		name = pw_grand_archive.delve_into_secrets
		add_research_option = pw_tech_grand_archive_lost_state_secrets
		hidden_effect = {
			set_country_flag = pw_grand_archive_library_of_babel_secrets
		}
		pw_grand_archive_return_to_hub = yes
	}
}

#Society: Cradle Initiative -> 300
#Access:
country_event = {
	id = pw_grand_archive.300
	title = pw_grand_archive.300.name
	desc = {
		trigger = {
			NOT = { has_country_flag = pw_grand_archive_cradle_initiative_completed }
		}
		text = pw_grand_archive.300.desc.not_assembled
	}
	desc = {
		trigger = {
			has_country_flag = pw_grand_archive_cradle_initiative_completed
		}
		text = pw_grand_archive.300.desc.assembled
	}
	picture = GFX_evt_gaia
	is_triggered_only = yes

	#Assemble
	option = {
		name = pw_grand_archive.cradle_initiative.assemble
		trigger = {
			NOT = {
				has_country_flag = pw_grand_archive_cradle_initiative_started
			}
		}
		allow = {
			pw_has_unity_to_assemble_archive = yes
		}
		pw_grand_archive_pay_assemble_cost = yes
		hidden_effect = {
			country_event = { id = pw_grand_archive.301 }
		}
	}

	#Delve
	option = {
		name = pw_grand_archive.cradle_initiative.delve
		trigger = {
			NOT = {
				has_country_flag = pw_grand_archive_cradle_initiative_secrets
			}
		}
		allow = {
			custom_tooltip = {
				fail_text = pw_grand_archive.cradle_initiative.delve.complete_project
				has_country_flag = pw_grand_archive_cradle_initiative_completed
			}
			resource_stockpile_compare = {
				resource = influence
				value >= @pw_grand_archive_secrets_cost_check
			}
		}
		add_resource = {
			influence = @pw_grand_archive_secrets_cost
		}
		hidden_effect = {
			country_event = { id = pw_grand_archive.320 }
		}
	}

	#Return
	option = {
		name = pw_grand_archive.return
		pw_grand_archive_return_to_hub = yes
	}
}

#Assemble Project:
country_event = {
	id = pw_grand_archive.301
	title = pw_grand_archive.301.name
	desc = pw_grand_archive.301.desc
	picture = GFX_evt_gaia
	show_sound = event_alien_nature
	is_triggered_only = yes

	immediate = {
		change_variable = {
			which = pw_archives_assembled_count
			value = 1
		}
		set_country_flag = pw_grand_archive_cradle_initiative_started
	}

	option = {
		name = pw_grand_archive.continue_to_project
		begin_event_chain = {
			event_chain = pw_assemble_cradle_initiative_chain
			target = root
		}
		pw_grand_archive_return_to_hub = yes
		hidden_effect = {
			#Wet
			if = {
				limit = {
					any_planet_within_border = {
						is_wet = yes
						is_capital = no
					}
				}
				random_planet_within_border = {
					limit = {
						is_wet = yes
						is_capital = no
					}
					enable_special_project = {
						name = PW_CRADLE_INITIATIVE_WET_PLANET
						location = this
						owner = root
					}
				}
			}
			else = {
				event_target:pw_grand_archive_planet = {
					enable_special_project = {
						name = PW_CRADLE_INITIATIVE_WET_PLANET_REPLACED
						location = this
						owner = root
					}
				}
			}
			#Cold
			if = {
				limit = {
					any_planet_within_border = {
						is_cold = yes
						is_capital = no
					}
				}
				random_planet_within_border = {
					limit = {
						is_cold = yes
						is_capital = no
					}
					enable_special_project = {
						name = PW_CRADLE_INITIATIVE_COLD_PLANET
						location = this
						owner = root
					}
				}
			}
			else = {
				event_target:pw_grand_archive_planet = {
					enable_special_project = {
						name = PW_CRADLE_INITIATIVE_COLD_PLANET_REPLACED
						location = this
						owner = root
					}
				}
			}
			#Dry
			if = {
				limit = {
					any_planet_within_border = {
						is_dry = yes
						is_capital = no
					}
				}
				random_planet_within_border = {
					limit = {
						is_dry = yes
						is_capital = no
					}
					enable_special_project = {
						name = PW_CRADLE_INITIATIVE_DRY_PLANET
						location = this
						owner = root
					}
				}
			}
			else = {
				event_target:pw_grand_archive_planet = {
					enable_special_project = {
						name = PW_CRADLE_INITIATIVE_DRY_PLANET_REPLACED
						location = this
						owner = root
					}
				}
			}
			#Exotic
			if = {
				limit = {
					any_planet_within_border = {
						merg_is_nuked = yes
						merg_is_gaia = yes
						is_capital = no
					}
				}
				random_planet_within_border = {
					limit = {
						merg_is_nuked = yes
						merg_is_gaia = yes
						is_capital = no
					}
					enable_special_project = {
						name = PW_CRADLE_INITIATIVE_EXOTIC_PLANET
						location = this
						owner = root
					}
				}
			}
			else = {
				event_target:pw_grand_archive_planet = {
					enable_special_project = {
						name = PW_CRADLE_INITIATIVE_EXOTIC_PLANET_REPLACED
						location = this
						owner = root
					}
				}
			}
		}
	}
}

#Complete wet planet:
ship_event = {
	id = pw_grand_archive.305
	title = pw_grand_archive.305.name
	desc = pw_grand_archive.305.desc
	picture = GFX_evt_continental
	show_sound = event_alien_nature
	location = fromfrom

	is_triggered_only = yes

	option = {
		name = "EXCELLENT"
		owner = {
			add_event_chain_counter = {
				event_chain = pw_assemble_cradle_initiative_chain
				counter = pw_habitable_data_collected
				amount = 1
			}
			add_monthly_resource_mult = {
				resource = society_research
				value = @tier2researchreward
				min = @tier2researchmin
				max = @tier2researchmax
			}
			hidden_effect = {
				if = {
					limit = {
						has_completed_event_chain_counter = {
							event_chain = pw_assemble_cradle_initiative_chain
							counter = pw_habitable_data_collected
						}
					}
					country_event = { id = pw_grand_archive.315 }
				}
			}
		}
	}
}

#Complete wet planet (replaced):
planet_event = {
	id = pw_grand_archive.306
	title = pw_grand_archive.305.name
	desc = pw_grand_archive.305.desc
	picture = GFX_evt_continental
	show_sound = event_alien_nature
	location = this

	is_triggered_only = yes

	option = {
		name = "EXCELLENT"
		owner = {
			add_event_chain_counter = {
				event_chain = pw_assemble_cradle_initiative_chain
				counter = pw_habitable_data_collected
				amount = 1
			}
			add_monthly_resource_mult = {
				resource = unity
				value = @tier2unityreward
				min = @tier2unitymin
				max = @tier2unitymax
			}
			hidden_effect = {
				if = {
					limit = {
						has_completed_event_chain_counter = {
							event_chain = pw_assemble_cradle_initiative_chain
							counter = pw_habitable_data_collected
						}
					}
					country_event = { id = pw_grand_archive.315 }
				}
			}
		}
	}
}

#Complete cold planet:
ship_event = {
	id = pw_grand_archive.307
	title = pw_grand_archive.307.name
	desc = pw_grand_archive.307.desc
	picture = GFX_evt_tundra
	show_sound = event_alien_nature
	location = fromfrom

	is_triggered_only = yes

	option = {
		name = "EXCELLENT"
		owner = {
			add_event_chain_counter = {
				event_chain = pw_assemble_cradle_initiative_chain
				counter = pw_habitable_data_collected
				amount = 1
			}
			add_monthly_resource_mult = {
				resource = society_research
				value = @tier2researchreward
				min = @tier2researchmin
				max = @tier2researchmax
			}
			hidden_effect = {
				if = {
					limit = {
						has_completed_event_chain_counter = {
							event_chain = pw_assemble_cradle_initiative_chain
							counter = pw_habitable_data_collected
						}
					}
					country_event = { id = pw_grand_archive.315 }
				}
			}
		}
	}
}

#Complete cold planet (replaced):
planet_event = {
	id = pw_grand_archive.308
	title = pw_grand_archive.307.name
	desc = pw_grand_archive.307.desc
	picture = GFX_evt_tundra
	show_sound = event_alien_nature
	location = this

	is_triggered_only = yes

	option = {
		name = "EXCELLENT"
		owner = {
			add_event_chain_counter = {
				event_chain = pw_assemble_cradle_initiative_chain
				counter = pw_habitable_data_collected
				amount = 1
			}
			add_monthly_resource_mult = {
				resource = unity
				value = @tier2unityreward
				min = @tier2unitymin
				max = @tier2unitymax
			}
			hidden_effect = {
				if = {
					limit = {
						has_completed_event_chain_counter = {
							event_chain = pw_assemble_cradle_initiative_chain
							counter = pw_habitable_data_collected
						}
					}
					country_event = { id = pw_grand_archive.315 }
				}
			}
		}
	}
}

#Complete dry planet:
ship_event = {
	id = pw_grand_archive.309
	title = pw_grand_archive.309.name
	desc = pw_grand_archive.309.desc
	picture = GFX_evt_desert
	show_sound = event_alien_nature
	location = fromfrom

	is_triggered_only = yes

	option = {
		name = "EXCELLENT"
		owner = {
			add_event_chain_counter = {
				event_chain = pw_assemble_cradle_initiative_chain
				counter = pw_habitable_data_collected
				amount = 1
			}
			add_monthly_resource_mult = {
				resource = society_research
				value = @tier2researchreward
				min = @tier2researchmin
				max = @tier2researchmax
			}
			hidden_effect = {
				if = {
					limit = {
						has_completed_event_chain_counter = {
							event_chain = pw_assemble_cradle_initiative_chain
							counter = pw_habitable_data_collected
						}
					}
					country_event = { id = pw_grand_archive.315 }
				}
			}
		}
	}
}

#Complete dry planet (replaced):
planet_event = {
	id = pw_grand_archive.310
	title = pw_grand_archive.309.name
	desc = pw_grand_archive.309.desc
	picture = GFX_evt_desert
	show_sound = event_alien_nature
	location = this

	is_triggered_only = yes

	option = {
		name = "EXCELLENT"
		owner = {
			add_event_chain_counter = {
				event_chain = pw_assemble_cradle_initiative_chain
				counter = pw_habitable_data_collected
				amount = 1
			}
			add_monthly_resource_mult = {
				resource = unity
				value = @tier2unityreward
				min = @tier2unitymin
				max = @tier2unitymax
			}
			hidden_effect = {
				if = {
					limit = {
						has_completed_event_chain_counter = {
							event_chain = pw_assemble_cradle_initiative_chain
							counter = pw_habitable_data_collected
						}
					}
					country_event = { id = pw_grand_archive.315 }
				}
			}
		}
	}
}

#Complete exotic planet:
ship_event = {
	id = pw_grand_archive.311
	title = pw_grand_archive.311.name
	desc = pw_grand_archive.311.desc
	picture = GFX_evt_toxic
	show_sound = event_alien_nature
	location = fromfrom

	is_triggered_only = yes

	option = {
		name = "EXCELLENT"
		owner = {
			add_event_chain_counter = {
				event_chain = pw_assemble_cradle_initiative_chain
				counter = pw_habitable_data_collected
				amount = 1
			}
			add_monthly_resource_mult = {
				resource = society_research
				value = @tier3researchreward
				min = @tier3researchmin
				max = @tier3researchmax
			}
			hidden_effect = {
				if = {
					limit = {
						has_completed_event_chain_counter = {
							event_chain = pw_assemble_cradle_initiative_chain
							counter = pw_habitable_data_collected
						}
					}
					country_event = { id = pw_grand_archive.315 }
				}
			}
		}
	}
}

#Complete exotic planet (replaced):
planet_event = {
	id = pw_grand_archive.312
	title = pw_grand_archive.311.name
	desc = pw_grand_archive.311.desc
	picture = GFX_evt_toxic
	show_sound = event_alien_nature
	location = this

	is_triggered_only = yes

	option = {
		name = "EXCELLENT"
		owner = {
			add_event_chain_counter = {
				event_chain = pw_assemble_cradle_initiative_chain
				counter = pw_habitable_data_collected
				amount = 1
			}
			add_monthly_resource_mult = {
				resource = unity
				value = @tier2unityreward
				min = @tier2unitymin
				max = @tier2unitymax
			}
			hidden_effect = {
				if = {
					limit = {
						has_completed_event_chain_counter = {
							event_chain = pw_assemble_cradle_initiative_chain
							counter = pw_habitable_data_collected
						}
					}
					country_event = { id = pw_grand_archive.315 }
				}
			}
		}
	}
}

#Completed Project:
country_event = {
	id = pw_grand_archive.315
	title = pw_grand_archive.315.name
	desc = pw_grand_archive.315.desc
	picture = GFX_evt_gaia
	is_triggered_only = yes

	option = {
		name = pw_grand_archive.OK
		if = {
			limit = {
				has_event_chain = pw_assemble_cradle_initiative_chain
			}
			end_event_chain = pw_assemble_cradle_initiative_chain
		}
		event_target:pw_grand_archive_planet = {
			if = {
				limit = { NOT = { has_deposit = pw_d_cradle_initiative } }
				add_deposit = pw_d_cradle_initiative
			}
		}
		hidden_effect = {
			set_country_flag = pw_grand_archive_cradle_initiative_completed
		}
	}
}

#Delve Into Secrets:
country_event = {
	id = pw_grand_archive.320
	title = pw_grand_archive.320.name
	desc = pw_grand_archive.320.desc
	picture = GFX_evt_gaia
	show_sound = event_alien_nature
	is_triggered_only = yes

	option = {
		name = pw_grand_archive.delve_into_secrets
		add_research_option = pw_tech_grand_archive_crucible_of_worlds_secrets
		hidden_effect = {
			set_country_flag = pw_grand_archive_cradle_initiative_secrets
		}
		pw_grand_archive_return_to_hub = yes
	}
}

#After Researching the Crucible of worlds secrets:
country_event = {
	id = pw_grand_archive.321
	title = pw_grand_archive.321.name
	desc = pw_grand_archive.321.desc
	picture = GFX_evt_gaia
	show_sound = event_alien_nature
	is_triggered_only = yes
	location = event_target:PWNewTerraformingCandidate

	trigger = {
		last_increased_tech = pw_tech_grand_archive_crucible_of_worlds_secrets
		any_planet_within_border = {
			OR = {
				merg_is_barren_cold = yes
				merg_is_barren = yes
			}
			NOT = { has_modifier = terraforming_candidate }
		}
	}

	immediate = {
		random_planet_within_border = {
			limit = {
				OR = {
					merg_is_barren_cold = yes
					merg_is_barren = yes
				}
				NOT = { has_modifier = terraforming_candidate }
			}
			save_event_target_as = PWNewTerraformingCandidate
		}
	}

	option = {
		name = pw_grand_archive.321.a
		event_target:PWNewTerraformingCandidate = {
			add_modifier = {
				modifier = terraforming_candidate
			}
		}
	}
}

#Physics: Particle Museum -> 400
#Access:
country_event = {
	id = pw_grand_archive.400
	title = pw_grand_archive.400.name
	desc = {
		trigger = {
			NOT = { has_country_flag = pw_grand_archive_particle_museum_completed }
		}
		text = pw_grand_archive.400.desc.not_assembled
	}
	desc = {
		trigger = {
			has_country_flag = pw_grand_archive_particle_museum_completed
		}
		text = pw_grand_archive.400.desc.assembled
	}
	picture = GFX_evt_physics_research
	is_triggered_only = yes

	#Assemble
	option = {
		name = pw_grand_archive.particle_museum.assemble
		trigger = {
			NOT = {
				has_country_flag = pw_grand_archive_particle_museum_started
			}
		}
		allow = {
			pw_has_unity_to_assemble_archive = yes
		}
		pw_grand_archive_pay_assemble_cost = yes
		hidden_effect = {
			country_event = { id = pw_grand_archive.401 }
		}
	}

	#Delve
	option = {
		name = pw_grand_archive.particle_museum.delve
		trigger = {
			NOT = {
				has_country_flag = pw_grand_archive_particle_museum_secrets
			}
		}
		allow = {
			custom_tooltip = {
				fail_text = pw_grand_archive.particle_museum.delve.complete_project
				has_country_flag = pw_grand_archive_particle_museum_completed
			}
			resource_stockpile_compare = {
				resource = influence
				value >= @pw_grand_archive_secrets_cost_check
			}
		}
		add_resource = {
			influence = @pw_grand_archive_secrets_cost
		}
		hidden_effect = {
			country_event = { id = pw_grand_archive.420 }
		}
	}

	#Return
	option = {
		name = pw_grand_archive.return
		pw_grand_archive_return_to_hub = yes
	}
}

#Assemble Project:
country_event = {
	id = pw_grand_archive.401
	title = pw_grand_archive.401.name
	desc = pw_grand_archive.401.desc
	picture = GFX_evt_physics_research
	show_sound = event_laboratory_sound
	is_triggered_only = yes

	immediate = {
		change_variable = {
			which = pw_archives_assembled_count
			value = 1
		}
		set_country_flag = pw_grand_archive_particle_museum_started
	}

	#Primary project
	option = {
		name = pw_grand_archive.continue_to_project
		event_target:pw_grand_archive_planet = {
			enable_special_project = {
				name = PW_PARTICLE_MUSEUM
				location = this
				owner = root
			}
		}
		pw_grand_archive_return_to_hub = yes
	}
}

#Completed Project:
country_event = {
	id = pw_grand_archive.410
	title = pw_grand_archive.410.name
	desc = pw_grand_archive.410.desc
	picture = GFX_evt_physics_research
	show_sound = event_laboratory_sound
	is_triggered_only = yes

	option = {
		name = pw_grand_archive.OK
		add_monthly_resource_mult = {
			resource = unity
			value = @tier3unityreward
			min = @tier3unitymin
			max = @tier3unitymax
		}
		event_target:pw_grand_archive_planet = {
			if = {
				limit = { NOT = { has_deposit = pw_d_particle_museum } }
				add_deposit = pw_d_particle_museum
			}
		}
		hidden_effect = {
			set_country_flag = pw_grand_archive_particle_museum_completed
		}
	}
}

#Delve Into Secrets:
country_event = {
	id = pw_grand_archive.420
	title = pw_grand_archive.420.name
	desc = pw_grand_archive.420.desc
	picture = GFX_evt_physics_research
	show_sound = event_laboratory_sound
	is_triggered_only = yes

	option = {
		name = pw_grand_archive.delve_into_secrets
		add_research_option = pw_tech_grand_archive_subspace_particle_secrets
		hidden_effect = {
			set_country_flag = pw_grand_archive_particle_museum_secrets
		}
		pw_grand_archive_return_to_hub = yes
	}
}

#Physics: Omnidatabase -> 500
#Access:
country_event = {
	id = pw_grand_archive.500
	title = pw_grand_archive.500.name
	desc = {
		trigger = {
			NOT = { has_country_flag = pw_grand_archive_omnidatabase_completed }
		}
		text = pw_grand_archive.500.desc.not_assembled
	}
	desc = {
		trigger = {
			has_country_flag = pw_grand_archive_omnidatabase_completed
		}
		text = pw_grand_archive.500.desc.assembled
	}
	picture = GFX_evt_glitchy_matrix
	is_triggered_only = yes

	#Assemble
	option = {
		name = pw_grand_archive.omnidatabase.assemble
		trigger = {
			NOT = {
				has_country_flag = pw_grand_archive_omnidatabase_started
			}
		}
		allow = {
			pw_has_unity_to_assemble_archive = yes
		}
		pw_grand_archive_pay_assemble_cost = yes
		hidden_effect = {
			country_event = { id = pw_grand_archive.501 }
		}
	}

	#Delve
	option = {
		name = pw_grand_archive.omnidatabase.delve
		trigger = {
			NOT = {
				has_country_flag = pw_grand_archive_omnidatabase_secrets
			}
		}
		allow = {
			custom_tooltip = {
				fail_text = pw_grand_archive.omnidatabase.delve.complete_project
				has_country_flag = pw_grand_archive_omnidatabase_completed
			}
			resource_stockpile_compare = {
				resource = influence
				value >= @pw_grand_archive_secrets_cost_check
			}
		}
		add_resource = {
			influence = @pw_grand_archive_secrets_cost
		}
		hidden_effect = {
			country_event = { id = pw_grand_archive.520 }
		}
	}

	#Return
	option = {
		name = pw_grand_archive.return
		pw_grand_archive_return_to_hub = yes
	}
}

#Assemble Project:
country_event = {
	id = pw_grand_archive.501
	title = pw_grand_archive.501.name
	desc = pw_grand_archive.501.desc
	picture = GFX_evt_glitchy_matrix
	show_sound = event_ai_started
	is_triggered_only = yes

	immediate = {
		change_variable = {
			which = pw_archives_assembled_count
			value = 1
		}
		set_country_flag = pw_grand_archive_omnidatabase_started
	}

	#Primary project
	option = {
		name = pw_grand_archive.continue_to_project
		event_target:pw_grand_archive_planet = {
			enable_special_project = {
				name = PW_OMNIDATABASE
				location = this
				owner = root
			}
		}
		pw_grand_archive_return_to_hub = yes
	}
}

#Completed Project:
country_event = {
	id = pw_grand_archive.510
	title = pw_grand_archive.510.name
	desc = pw_grand_archive.510.desc
	picture = GFX_evt_glitchy_matrix
	show_sound = event_ai_started
	is_triggered_only = yes

	option = {
		name = pw_grand_archive.OK
		add_monthly_resource_mult = {
			resource = unity
			value = @tier3unityreward
			min = @tier3unitymin
			max = @tier3unitymax
		}
		event_target:pw_grand_archive_planet = {
			if = {
				limit = { NOT = { has_deposit = pw_d_omnidatabase } }
				add_deposit = pw_d_omnidatabase
			}
		}
		hidden_effect = {
			set_country_flag = pw_grand_archive_omnidatabase_completed
		}
	}
}

#Delve Into Secrets:
country_event = {
	id = pw_grand_archive.520
	title = pw_grand_archive.520.name
	desc = pw_grand_archive.520.desc
	picture = GFX_evt_glitchy_matrix
	show_sound = event_ai_started
	is_triggered_only = yes

	option = {
		name = pw_grand_archive.delve_into_secrets
		add_research_option = pw_tech_grand_archive_omnidatabase_secrets
		hidden_effect = {
			set_country_flag = pw_grand_archive_omnidatabase_secrets
		}
		pw_grand_archive_return_to_hub = yes
	}
}

#Further the security of the Omnidatabase
country_event = {
	id = pw_grand_archive.521
	title = pw_grand_archive.521.name
	desc = pw_grand_archive.521.desc
	picture = GFX_evt_glitchy_matrix
	show_sound = event_ai_started
	is_triggered_only = yes

	trigger = {
		last_increased_tech = pw_tech_grand_archive_omnidatabase_secrets
		any_owned_planet = {
			has_active_building = pw_building_grand_archive
		}
	}

	#enable project
	option = {
		name = pw_grand_archive.521.a
		random_owned_planet = {
			limit = {
				has_active_building = pw_building_grand_archive
			}
			enable_special_project = {
				name = PW_SECURE_OMNIDATABASE
				location = this
				owner = root
			}
		}
	}

	#No need for the project
	option = {
		name = pw_grand_archive.521.b
		add_resource = {
			influence = 25
		}
	}
}
country_event = {
	id = pw_grand_archive.522
	title = pw_grand_archive.522.name
	desc = pw_grand_archive.522.desc
	picture = GFX_evt_glitchy_matrix
	show_sound = event_ai_started
	is_triggered_only = yes

	option = {
		name = pw_grand_archive.522.a
		add_modifier = {
			modifier = pw_mod_grand_archive_omnidatabase_secured
		}
	}
}

#Physics: Stellarium -> 600
#Access:
country_event = {
	id = pw_grand_archive.600
	title = pw_grand_archive.600.name
	desc = {
		trigger = {
			NOT = { has_country_flag = pw_grand_archive_stellarium_completed }
		}
		text = pw_grand_archive.600.desc.not_assembled
	}
	desc = {
		trigger = {
			has_country_flag = pw_grand_archive_stellarium_completed
		}
		text = pw_grand_archive.600.desc.assembled
	}
	picture = GFX_evt_binary_stars
	is_triggered_only = yes

	#Assemble
	option = {
		name = pw_grand_archive.stellarium.assemble
		trigger = {
			NOT = {
				has_country_flag = pw_grand_archive_stellarium_started
			}
		}
		allow = {
			pw_has_unity_to_assemble_archive = yes
		}
		pw_grand_archive_pay_assemble_cost = yes
		hidden_effect = {
			country_event = { id = pw_grand_archive.601 }
		}
	}

	#Delve
	option = {
		name = pw_grand_archive.stellarium.delve
		trigger = {
			NOT = {
				has_country_flag = pw_grand_archive_stellarium_secrets
			}
		}
		allow = {
			custom_tooltip = {
				fail_text = pw_grand_archive.stellarium.delve.complete_project
				has_country_flag = pw_grand_archive_stellarium_completed
			}
			resource_stockpile_compare = {
				resource = influence
				value >= @pw_grand_archive_secrets_cost_check
			}
		}
		add_resource = {
			influence = @pw_grand_archive_secrets_cost
		}
		hidden_effect = {
			country_event = { id = pw_grand_archive.620 }
		}
	}

	#Return
	option = {
		name = pw_grand_archive.return
		pw_grand_archive_return_to_hub = yes
	}
}

#Assemble Project:
country_event = {
	id = pw_grand_archive.601
	title = pw_grand_archive.601.name
	desc = pw_grand_archive.601.desc
	picture = GFX_evt_binary_stars
	show_sound = event_solar_fusion
	is_triggered_only = yes

	immediate = {
		change_variable = {
			which = pw_archives_assembled_count
			value = 1
		}
		set_country_flag = pw_grand_archive_stellarium_started
	}

	#Project
	option = {
		name = pw_grand_archive.continue_to_project
		begin_event_chain = {
			event_chain = pw_assemble_stellarium_chain
			target = root
		}
		pw_grand_archive_return_to_hub = yes
		hidden_effect = {
			while = {
				count = 4
				if = {
					limit = {
						any_planet_within_border = {
							is_star = yes
							NOT = { has_planet_flag = pw_grand_archive_star_project }
						}
					}
					random_planet_within_border = {
						limit = {
							is_star = yes
							NOT = { has_planet_flag = pw_grand_archive_star_project }
						}
						set_planet_flag = pw_grand_archive_star_project
						enable_special_project = {
							name = PW_STELLARIUM_STAR
							location = this
							owner = root
						}
					}
				}
				else = {
					event_target:pw_grand_archive_planet = {
						enable_special_project = {
							name = PW_STELLARIUM_SIMULATION
							location = this
							owner = root
						}
					}
				}
			}
			event_target:pw_grand_archive_planet = {
				enable_special_project = {
					name = PW_STELLARIUM_SIMULATION
					location = this
					owner = root
				}
			}
		}
	}
}

#Complete Star analysis:
ship_event = {
	id = pw_grand_archive.605
	title = pw_grand_archive.605.name
	desc = pw_grand_archive.605.desc
	picture = GFX_evt_star_neutron
	show_sound = event_solar_fusion
	location = fromfrom

	is_triggered_only = yes

	option = {
		name = "EXCELLENT"
		owner = {
			add_event_chain_counter = {
				event_chain = pw_assemble_stellarium_chain
				counter = pw_stellar_data_collected
				amount = 1
			}
			add_monthly_resource_mult = {
				resource = physics_research
				value = @tier2researchreward
				min = @tier2researchmin
				max = @tier2researchmax
			}
			hidden_effect = {
				if = {
					limit = {
						has_completed_event_chain_counter = {
							event_chain = pw_assemble_stellarium_chain
							counter = pw_stellar_data_collected
						}
					}
					country_event = { id = pw_grand_archive.610 }
				}
			}
		}
	}
}

#Complete star simulation:
planet_event = {
	id = pw_grand_archive.606
	title = pw_grand_archive.606.name
	desc = pw_grand_archive.606.desc
	picture = GFX_evt_star_white
	show_sound = event_solar_fusion
	location = this

	is_triggered_only = yes

	option = {
		name = "EXCELLENT"
		owner = {
			add_event_chain_counter = {
				event_chain = pw_assemble_stellarium_chain
				counter = pw_stellar_data_collected
				amount = 1
			}
			add_monthly_resource_mult = {
				resource = unity
				value = @tier2unityreward
				min = @tier2unitymin
				max = @tier2unitymax
			}
			hidden_effect = {
				if = {
					limit = {
						has_completed_event_chain_counter = {
							event_chain = pw_assemble_stellarium_chain
							counter = pw_stellar_data_collected
						}
					}
					country_event = { id = pw_grand_archive.610 }
				}
			}
		}
	}
}

#Completed Project:
country_event = {
	id = pw_grand_archive.610
	title = pw_grand_archive.610.name
	desc = pw_grand_archive.610.desc
	picture = GFX_evt_binary_stars
	show_sound = event_solar_fusion
	is_triggered_only = yes

	option = {
		name = pw_grand_archive.OK
		add_monthly_resource_mult = {
			resource = unity
			value = @tier3unityreward
			min = @tier3unitymin
			max = @tier3unitymax
		}
		if = {
			limit = {
				has_event_chain = pw_assemble_stellarium_chain
			}
			end_event_chain = pw_assemble_stellarium_chain
		}
		event_target:pw_grand_archive_planet = {
			if = {
				limit = { NOT = { has_deposit = pw_d_stellarium } }
				add_deposit = pw_d_stellarium
			}
		}
		hidden_effect = {
			set_country_flag = pw_grand_archive_stellarium_completed
		}
	}
}

#Delve Into Secrets:
country_event = {
	id = pw_grand_archive.620
	title = pw_grand_archive.620.name
	desc = pw_grand_archive.620.desc
	picture = GFX_evt_binary_stars
	show_sound = event_solar_fusion
	is_triggered_only = yes

	option = {
		name = pw_grand_archive.delve_into_secrets
		add_research_option = pw_tech_grand_archive_stellar_secrets
		hidden_effect = {
			set_country_flag = pw_grand_archive_stellarium_secrets
		}
		pw_grand_archive_return_to_hub = yes
	}
}

#After Researching the Stellar secrets:
country_event = {
	id = pw_grand_archive.621
	title = pw_grand_archive.621.name
	desc = pw_grand_archive.621.desc
	picture = GFX_evt_star_pulsar
	show_sound = event_solar_fusion
	is_triggered_only = yes
	location = event_target:PWBonusStarResources

	trigger = {
		last_increased_tech = pw_tech_grand_archive_stellar_secrets
		any_planet_within_border = {
			is_star = yes
			has_deposit = no
		}
	}

	immediate = {
		random_planet_within_border = {
			limit = {
				is_star = yes
				has_deposit = no
			}
			save_event_target_as = PWBonusStarResources
		}
	}

	option = {
		name = pw_grand_archive.621.a
		event_target:PWBonusStarResources = {
			add_deposit = d_dark_matter_deposit_1
			add_deposit = d_energy_5
		}
	}
}

#Engineering: Zero-G Exposition -> 700
#Access:
country_event = {
	id = pw_grand_archive.700
	title = pw_grand_archive.700.name
	desc = {
		trigger = {
			NOT = { has_country_flag = pw_grand_archive_zero_g_exposition_completed }
		}
		text = pw_grand_archive.700.desc.not_assembled
	}
	desc = {
		trigger = {
			has_country_flag = pw_grand_archive_zero_g_exposition_completed
		}
		text = pw_grand_archive.700.desc.assembled
	}
	picture = GFX_evt_engineering_research
	is_triggered_only = yes

	#Assemble
	option = {
		name = pw_grand_archive.zero_g_exposition.assemble
		trigger = {
			NOT = {
				has_country_flag = pw_grand_archive_zero_g_exposition_started
			}
		}
		allow = {
			pw_has_unity_to_assemble_archive = yes
		}
		pw_grand_archive_pay_assemble_cost = yes
		hidden_effect = {
			country_event = { id = pw_grand_archive.701 }
		}
	}

	#Delve
	option = {
		name = pw_grand_archive.zero_g_exposition.delve
		trigger = {
			NOT = {
				has_country_flag = pw_grand_archive_zero_g_exposition_secrets
			}
		}
		allow = {
			custom_tooltip = {
				fail_text = pw_grand_archive.zero_g_exposition.delve.complete_project
				has_country_flag = pw_grand_archive_zero_g_exposition_completed
			}
			resource_stockpile_compare = {
				resource = influence
				value >= @pw_grand_archive_secrets_cost_check
			}
		}
		add_resource = {
			influence = @pw_grand_archive_secrets_cost
		}
		hidden_effect = {
			country_event = { id = pw_grand_archive.720 }
		}
	}

	#Return
	option = {
		name = pw_grand_archive.return
		pw_grand_archive_return_to_hub = yes
	}
}

#Assemble Project:
country_event = {
	id = pw_grand_archive.701
	title = pw_grand_archive.701.name
	desc = pw_grand_archive.701.desc
	picture = GFX_evt_engineering_research
	show_sound = event_ship_bridge
	is_triggered_only = yes

	immediate = {
		change_variable = {
			which = pw_archives_assembled_count
			value = 1
		}
		set_country_flag = pw_grand_archive_zero_g_exposition_started
	}

	#Project
	option = {
		name = pw_grand_archive.continue_to_project
		event_target:pw_grand_archive_planet = {
			enable_special_project = {
				name = PW_ZERO_G_EXPOSITION
				location = this
				owner = root
			}
		}
		pw_grand_archive_return_to_hub = yes
	}
}

#Completed Project:
ship_event = {
	id = pw_grand_archive.710
	title = pw_grand_archive.710.name
	desc = pw_grand_archive.710.desc
	picture = GFX_evt_engineering_research
	location = fromfrom

	is_triggered_only = yes

	option = {
		name = pw_grand_archive.710.a
		fleet = {
			delete_fleet = {
				target = this
				kill_leader = no
			}
		}
		owner = {
			add_monthly_resource_mult = {
				resource = alloys
				value = @tier2materialreward
				min = @tier2materialmin
				max = @tier2materialmax
			}
			add_monthly_resource_mult = {
				resource = engineering_research
				value = @tier2researchreward
				min = @tier2researchmin
				max = @tier2researchmax
			}
			event_target:pw_grand_archive_planet = {
				if = {
					limit = { NOT = { has_deposit = pw_d_zero_g_exposition } }
					add_deposit = pw_d_zero_g_exposition
				}
			}
			hidden_effect = {
				set_country_flag = pw_grand_archive_zero_g_exposition_completed
			}
		}
	}
}

#Delve Into Secrets:
country_event = {
	id = pw_grand_archive.720
	title = pw_grand_archive.720.name
	desc = pw_grand_archive.720.desc
	picture = GFX_evt_engineering_research
	show_sound = event_ship_bridge
	is_triggered_only = yes

	option = {
		name = pw_grand_archive.delve_into_secrets
		add_research_option = pw_tech_grand_archive_void_construction_secrets
		hidden_effect = {
			set_country_flag = pw_grand_archive_zero_g_exposition_secrets
		}
		pw_grand_archive_return_to_hub = yes
	}
}

#Engineering: Mechanist Collection -> 800
#Access:
country_event = {
	id = pw_grand_archive.800
	title = pw_grand_archive.800.name
	desc = {
		trigger = {
			NOT = { has_country_flag = pw_grand_archive_mechanist_collection_completed }
		}
		text = pw_grand_archive.800.desc.not_assembled
	}
	desc = {
		trigger = {
			has_country_flag = pw_grand_archive_mechanist_collection_completed
		}
		text = pw_grand_archive.800.desc.assembled
	}
	picture = GFX_evt_robot_assembly_plant
	is_triggered_only = yes

	#Assemble
	option = {
		name = pw_grand_archive.mechanist_collection.assemble
		trigger = {
			NOT = {
				has_country_flag = pw_grand_archive_mechanist_collection_started
			}
		}
		allow = {
			pw_has_unity_to_assemble_archive = yes
		}
		pw_grand_archive_pay_assemble_cost = yes
		hidden_effect = {
			country_event = { id = pw_grand_archive.801 }
		}
	}

	#Delve
	option = {
		name = pw_grand_archive.mechanist_collection.delve
		trigger = {
			NOT = {
				has_country_flag = pw_grand_archive_mechanist_collection_secrets
			}
		}
		allow = {
			custom_tooltip = {
				fail_text = pw_grand_archive.mechanist_collection.delve.complete_project
				has_country_flag = pw_grand_archive_mechanist_collection_completed
			}
			resource_stockpile_compare = {
				resource = influence
				value >= @pw_grand_archive_secrets_cost_check
			}
		}
		add_resource = {
			influence = @pw_grand_archive_secrets_cost
		}
		hidden_effect = {
			country_event = { id = pw_grand_archive.820 }
		}
	}

	#Return
	option = {
		name = pw_grand_archive.return
		pw_grand_archive_return_to_hub = yes
	}
}

#Assemble Project:
country_event = {
	id = pw_grand_archive.801
	title = pw_grand_archive.801.name
	desc = pw_grand_archive.801.desc
	picture = GFX_evt_robot_assembly_plant
	show_sound = event_robo
	is_triggered_only = yes

	immediate = {
		change_variable = {
			which = pw_archives_assembled_count
			value = 1
		}
		set_country_flag = pw_grand_archive_mechanist_collection_started
	}

	#Project
	option = {
		name = pw_grand_archive.continue_to_project
		event_target:pw_grand_archive_planet = {
			enable_special_project = {
				name = PW_MECHANIST_COLLECTION
				location = this
				owner = root
			}
		}
		pw_grand_archive_return_to_hub = yes
	}
}

#Completed Project:
country_event = {
	id = pw_grand_archive.810
	title = pw_grand_archive.810.name
	desc = pw_grand_archive.810.desc
	picture = GFX_evt_robot_assembly_plant
	show_sound = event_robo
	is_triggered_only = yes

	option = {
		name = EXCELLENT
		owner = {
			add_monthly_resource_mult = {
				resource = unity
				value = @tier2unityreward
				min = @tier2unitymin
				max = @tier2unitymax
			}
			event_target:pw_grand_archive_planet = {
				if = {
					limit = { NOT = { has_deposit = pw_d_mechanist_collection } }
					add_deposit = pw_d_mechanist_collection
				}
			}
			hidden_effect = {
				set_country_flag = pw_grand_archive_mechanist_collection_completed
			}
		}
	}
}

#Delve Into Secrets:
country_event = {
	id = pw_grand_archive.820
	title = pw_grand_archive.820.name
	desc = pw_grand_archive.820.desc
	picture = GFX_evt_robot_assembly_plant
	show_sound = event_robo
	is_triggered_only = yes

	option = {
		name = pw_grand_archive.delve_into_secrets
		add_research_option = pw_tech_grand_archive_mechanist_secrets
		hidden_effect = {
			set_country_flag = pw_grand_archive_mechanist_collection_secrets
		}
		pw_grand_archive_return_to_hub = yes
	}
}

#After Researching the Mechanist secrets:
country_event = {
	id = pw_grand_archive.821
	title = pw_grand_archive.821.name
	desc = pw_grand_archive.821.desc
	picture = GFX_evt_robot_assembly_plant
	show_sound = event_robo
	is_triggered_only = yes

	trigger = {
		last_increased_tech = pw_tech_grand_archive_mechanist_secrets
		has_origin = origin_mechanists
	}

	option = {
		name = pw_grand_archive.821.a
		add_research_option = pw_tech_grand_archive_original_mechanist_secrets
	}
}

#Engineering: Meta-Architectural Complex -> 900
#Access:
country_event = {
	id = pw_grand_archive.900
	title = pw_grand_archive.900.name
	desc = {
		trigger = {
			NOT = { has_country_flag = pw_grand_archive_meta_architectural_complex_completed }
		}
		text = pw_grand_archive.900.desc.not_assembled
	}
	desc = {
		trigger = {
			has_country_flag = pw_grand_archive_meta_architectural_complex_completed
		}
		text = pw_grand_archive.900.desc.assembled
	}
	picture = GFX_evt_busy_spaceport
	is_triggered_only = yes

	#Assemble
	option = {
		name = pw_grand_archive.meta_architectural_complex.assemble
		trigger = {
			NOT = {
				has_country_flag = pw_grand_archive_meta_architectural_complex_started
			}
		}
		allow = {
			pw_has_unity_to_assemble_archive = yes
		}
		pw_grand_archive_pay_assemble_cost = yes
		hidden_effect = {
			country_event = { id = pw_grand_archive.901 }
		}
	}

	#Delve
	option = {
		name = pw_grand_archive.meta_architectural_complex.delve
		trigger = {
			NOT = {
				has_country_flag = pw_grand_archive_meta_architectural_complex_secrets
			}
		}
		allow = {
			custom_tooltip = {
				fail_text = pw_grand_archive.meta_architectural_complex.delve.complete_project
				has_country_flag = pw_grand_archive_meta_architectural_complex_completed
			}
			resource_stockpile_compare = {
				resource = influence
				value >= @pw_grand_archive_secrets_cost_check
			}
		}
		add_resource = {
			influence = @pw_grand_archive_secrets_cost
		}
		hidden_effect = {
			country_event = { id = pw_grand_archive.920 }
		}
	}

	#Return
	option = {
		name = pw_grand_archive.return
		pw_grand_archive_return_to_hub = yes
	}
}

#Assemble Project:
country_event = {
	id = pw_grand_archive.901
	title = pw_grand_archive.901.name
	desc = pw_grand_archive.901.desc
	picture = GFX_evt_busy_spaceport
	show_sound = event_cityscape
	is_triggered_only = yes

	immediate = {
		change_variable = {
			which = pw_archives_assembled_count
			value = 1
		}
		set_country_flag = pw_grand_archive_meta_architectural_complex_started
	}

	#Primary project
	option = {
		name = pw_grand_archive.continue_to_project

		trigger = { #Has all three!
			#Space Elevator
			any_owned_planet = {
				has_active_building = pw_building_space_elevator
			}
			#Astronomical Model Bureau
			any_owned_planet = {
				OR = {
					has_active_building = pw_building_galactic_model
					has_active_building = pw_building_aligned_galactic_model
				}
			}
			#Guardian Angel
			any_owned_planet = {
				OR = {
					has_active_building = pw_building_guardian_angel
					has_active_building = pw_building_stellar_sentinel
				}
			}
		}

		begin_event_chain = {
			event_chain = pw_assemble_meta_architectural_complex_chain
			target = root
		}
		pw_grand_archive_return_to_hub = yes

		hidden_effect = {
			#Space Elevator
			random_owned_planet = {
				limit = {
					has_active_building = pw_building_space_elevator
				}
				enable_special_project = {
					name = PW_META_ARCHITECTURAL_COMPLEX_SPACE_ELEVATOR
					location = this
					owner = root
				}
			}
			#Astronomical Model Bureau
			random_owned_planet = {
				limit = {
					OR = {
						has_active_building = pw_building_galactic_model
						has_active_building = pw_building_aligned_galactic_model
					}
				}
				enable_special_project = {
					name = PW_META_ARCHITECTURAL_COMPLEX_GALACTIC_MODEL
					location = this
					owner = root
				}
			}
			#Guardian Angel
			random_owned_planet = {
				limit = {
					OR = {
						has_active_building = pw_building_guardian_angel
						has_active_building = pw_building_stellar_sentinel
					}
				}
				enable_special_project = {
					name = PW_META_ARCHITECTURAL_COMPLEX_GUARDIAN_ANGEL
					location = this
					owner = root
				}
			}
		}
	}

	#Replacement project (not all conditions set)
	option = {
		name = pw_grand_archive.continue_to_project
		trigger = {
			NAND = {#Reverse of the above
				#Space Elevator
				any_owned_planet = {
					has_active_building = pw_building_space_elevator
				}
				#Astronomical Model Bureau
				any_owned_planet = {
					OR = {
						has_active_building = pw_building_galactic_model
						has_active_building = pw_building_aligned_galactic_model
					}
				}
				#Guardian Angel
				any_owned_planet = {
					OR = {
						has_active_building = pw_building_guardian_angel
						has_active_building = pw_building_stellar_sentinel
					}
				}
			}
		}
		enable_special_project = {
			name = PW_META_ARCHITECTURAL_COMPLEX
			location = event_target:pw_grand_archive_planet
			owner = root
		}
		pw_grand_archive_return_to_hub = yes
	}
}

#Complete Space Elevator:
planet_event = {
	id = pw_grand_archive.905
	title = pw_grand_archive.905.name
	desc = pw_grand_archive.905.desc
	picture = GFX_evt_pw_space_elevator
	show_sound = event_cityscape
	location = this

	is_triggered_only = yes

	option = {
		name = "EXCELLENT"
		owner = {
			add_event_chain_counter = {
				event_chain = pw_assemble_meta_architectural_complex_chain
				counter = pw_architectural_data_collected
				amount = 1
			}
			add_monthly_resource_mult = {
				resource = unity
				value = @tier2unityreward
				min = @tier2unitymin
				max = @tier2unitymax
			}
			hidden_effect = {
				if = {
					limit = {
						has_completed_event_chain_counter = {
							event_chain = pw_assemble_meta_architectural_complex_chain
							counter = pw_architectural_data_collected
						}
					}
					country_event = { id = pw_grand_archive.910 }
				}
			}
		}
	}
}

#Complete Astronomical Model Bureau:
planet_event = {
	id = pw_grand_archive.906
	title = pw_grand_archive.906.name
	desc = pw_grand_archive.906.desc
	picture = GFX_evt_pw_galactic_model
	show_sound = event_cityscape
	location = this

	is_triggered_only = yes

	option = {
		name = "EXCELLENT"
		owner = {
			add_event_chain_counter = {
				event_chain = pw_assemble_meta_architectural_complex_chain
				counter = pw_architectural_data_collected
				amount = 1
			}
			add_monthly_resource_mult = {
				resource = influence
				value = @tier2influencereward
				min = @tier2influencemin
				max = @tier2influencemax
			}
			hidden_effect = {
				if = {
					limit = {
						has_completed_event_chain_counter = {
							event_chain = pw_assemble_meta_architectural_complex_chain
							counter = pw_architectural_data_collected
						}
					}
					country_event = { id = pw_grand_archive.910 }
				}
			}
		}
	}
}

#Complete Guardian Angel:
planet_event = {
	id = pw_grand_archive.907
	title = pw_grand_archive.907.name
	desc = pw_grand_archive.907.desc
	picture = GFX_evt_landing_ship_2
	show_sound = event_cityscape
	location = this

	is_triggered_only = yes

	option = {
		name = "EXCELLENT"
		owner = {
			add_event_chain_counter = {
				event_chain = pw_assemble_meta_architectural_complex_chain
				counter = pw_architectural_data_collected
				amount = 1
			}
			add_monthly_resource_mult = {
				resource = influence
				value = @tier2influencereward
				min = @tier2influencemin
				max = @tier2influencemax
			}
			hidden_effect = {
				if = {
					limit = {
						has_completed_event_chain_counter = {
							event_chain = pw_assemble_meta_architectural_complex_chain
							counter = pw_architectural_data_collected
						}
					}
					country_event = { id = pw_grand_archive.910 }
				}
			}
		}
	}
}

#Completed Project:
country_event = {
	id = pw_grand_archive.910
	title = pw_grand_archive.910.name
	desc = pw_grand_archive.910.desc
	picture = GFX_evt_busy_spaceport
	show_sound = event_cityscape
	is_triggered_only = yes

	option = {
		name = EXCELLENT
		owner = {
			add_monthly_resource_mult = {
				resource = unity
				value = @tier2unityreward
				min = @tier2unitymin
				max = @tier2unitymax
			}
			if = {
				limit = {
					has_event_chain = pw_assemble_meta_architectural_complex_chain
				}
				end_event_chain = pw_assemble_meta_architectural_complex_chain
			}
			event_target:pw_grand_archive_planet = {
				if = {
					limit = { NOT = { has_deposit = pw_d_meta_architectural_complex } }
					add_deposit = pw_d_meta_architectural_complex
				}
			}
			hidden_effect = {
				set_country_flag = pw_grand_archive_meta_architectural_complex_completed
			}
		}
	}
}

#Delve Into Secrets:
country_event = {
	id = pw_grand_archive.920
	title = pw_grand_archive.920.name
	desc = pw_grand_archive.920.desc
	picture = GFX_evt_busy_spaceport
	show_sound = event_cityscape
	is_triggered_only = yes

	option = {
		name = pw_grand_archive.delve_into_secrets
		add_research_option = pw_tech_grand_archive_architectural_secrets
		hidden_effect = {
			set_country_flag = pw_grand_archive_meta_architectural_complex_secrets
		}
		pw_grand_archive_return_to_hub = yes
	}
}

#Final: Holoarchive -> 1000
#Access:
country_event = {
	id = pw_grand_archive.1000
	title = pw_grand_archive.1000.name
	desc = pw_grand_archive.1000.desc
	picture = GFX_evt_ancient_databank
	is_triggered_only = yes

	#Unify
	option = {
		name = pw_grand_archive.holoarchive.unify
		trigger = {
			custom_tooltip = {
				fail_text = pw_grand_archive.holoarchive.requirements
				event_target:pw_grand_archive_planet = {
					has_deposit = pw_d_ark_project
					has_deposit = pw_d_cradle_initiative
					has_deposit = pw_d_library_of_babel
					has_deposit = pw_d_particle_museum
					has_deposit = pw_d_omnidatabase
					has_deposit = pw_d_stellarium
					has_deposit = pw_d_zero_g_exposition
					has_deposit = pw_d_mechanist_collection
					has_deposit = pw_d_meta_architectural_complex
				}
			}
		}
		allow = {
			resource_stockpile_compare = {
				resource = unity
				value >= 100000
			}
		}
		add_resource = {
			unity = -100000
		}
		hidden_effect = {
			country_event = { id = pw_grand_archive.1001 }
		}
	}

	#Appoint Master-Archivist
	option = {
		name = pw_grand_archive.holoarchive.appoint_master_archivist
		trigger = {
			NOT = {
				has_country_flag = pw_grand_archive_holoarchive_master_archivist_appointed
			}
		}
		allow = {
			resource_stockpile_compare = {
				resource = influence
				value >= 25
			}
		}
		add_resource = {
			influence = -25
		}
		hidden_effect = {
			country_event = { id = pw_grand_archive.1002 }
		}
	}

	#Delve
	option = {
		name = pw_grand_archive.holoarchive.delve
		trigger = {
			NOT = {
				has_country_flag = pw_grand_archive_holoarchive_secrets
			}
		}
		allow = {
			custom_tooltip = {
				fail_text = pw_grand_archive.holoarchive.delve.unified
				has_country_flag = pw_grand_archive_holoarchive_unified
			}
			resource_stockpile_compare = {
				resource = influence
				value >= @pw_grand_archive_secrets_cost_check
			}
		}
		add_resource = {
			influence = @pw_grand_archive_secrets_cost
		}
		hidden_effect = {
			country_event = { id = pw_grand_archive.1003 }
		}
	}

	#Return
	option = {
		name = pw_grand_archive.return
		pw_grand_archive_return_to_hub = yes
	}
}

#Unify
country_event = {
	id = pw_grand_archive.1001
	title = pw_grand_archive.1001.name
	desc = pw_grand_archive.1001.desc
	picture = GFX_evt_ancient_databank
	is_triggered_only = yes
	show_sound = event_mystic_reveal

	#OK/Return
	option = {
		name = pw_grand_archive.holoarchive.unify
		event_target:pw_grand_archive_planet = {
			remove_deposit = pw_d_ark_project
			remove_deposit = pw_d_particle_museum
			remove_deposit = pw_d_cradle_initiative
			remove_deposit = pw_d_library_of_babel
			remove_deposit = pw_d_omnidatabase
			remove_deposit = pw_d_stellarium
			remove_deposit = pw_d_zero_g_exposition
			remove_deposit = pw_d_mechanist_collection
			remove_deposit = pw_d_meta_architectural_complex
			if = {
				limit = {
					NOT = { has_deposit = pw_d_holoarchive }
				}
				add_deposit = pw_d_holoarchive
			}
		}
		custom_tooltip = pw_grand_archive.return
		hidden_effect = {
			country_event = { id = pw_grand_archive.1000 }
			set_country_flag = pw_grand_archive_holoarchive_unified
		}
	}
}

#Appoint Master-Archivist
country_event = {
	id = pw_grand_archive.1002
	title = pw_grand_archive.1002.name
	desc = pw_grand_archive.1002.desc
	picture = GFX_evt_ancient_databank
	is_triggered_only = yes
	show_sound = event_mystic_reveal

	#OK
	option = {
		name = pw_grand_archive.1002.a
		custom_tooltip = pw_grand_archive.1002.tooltip
		custom_tooltip = pw_grand_archive.return
		hidden_effect = {
			set_country_flag = pw_grand_archive_holoarchive_master_archivist_appointed
			country_event = { id = pw_grand_archive.1000 }
		}
	}

	#OK 2
	option = {
		name = pw_grand_archive.1002.b
		custom_tooltip = pw_grand_archive.1002.tooltip
		custom_tooltip = pw_grand_archive.return
		hidden_effect = {
			set_country_flag = pw_grand_archive_holoarchive_master_archivist_appointed
			country_event = { id = pw_grand_archive.1000 }
		}
	}

	#OK Technocracy
	option = {
		trigger = {
			has_valid_civic = civic_technocracy
		}
		name = pw_grand_archive.1002.c
		custom_tooltip = pw_grand_archive.1002.tooltip
		add_monthly_resource_mult = {
			resource = unity
			value = @tier3unityreward
			min = @tier3unitymin
			max = @tier3unitymax
		}
		custom_tooltip = pw_grand_archive.return
		hidden_effect = {
			set_country_flag = pw_grand_archive_holoarchive_master_archivist_appointed
			country_event = { id = pw_grand_archive.1000 }
		}
	}

	#Return
	option = {
		name = pw_grand_archive.1002.d
		custom_tooltip = pw_grand_archive.return
		hidden_effect = {
			country_event = { id = pw_grand_archive.1000 }
		}
	}
}

#Delve Into Secrets:
country_event = {
	id = pw_grand_archive.1003
	title = pw_grand_archive.1003.name
	desc = pw_grand_archive.1003.desc
	picture = GFX_evt_ancient_databank
	show_sound = event_mystic_reveal
	is_triggered_only = yes

	immediate = {
		set_country_flag = pw_grand_archive_holoarchive_secrets
	}

	option = {
		name = pw_grand_archive.delve_into_secrets
		add_research_option = pw_tech_grand_archive_our_lost_secrets
		custom_tooltip = pw_grand_archive.return
		hidden_effect = {
			country_event = { id = pw_grand_archive.1000 }
		}
	}
}

#Add deposits for AI -> 1101
planet_event = {
	id = pw_grand_archive.1101
	hide_window = yes
	is_triggered_only = yes

	pre_triggers = {
		is_ai = yes
	}

	immediate = {
		if = {
			limit = { NOT = { has_deposit = pw_d_ark_project }}
			add_deposit = pw_d_ark_project
		}

		planet_event = {
			id = pw_grand_archive.1102
			days = @pw_5years
		}
	}
}

planet_event = {
	id = pw_grand_archive.1102
	hide_window = yes
	is_triggered_only = yes

	pre_triggers = {
		is_ai = yes
	}

	immediate = {
		if = {
			limit = { NOT = { has_deposit = pw_d_cradle_initiative }}
			add_deposit = pw_d_cradle_initiative
		}

		planet_event = {
			id = pw_grand_archive.1103
			days = @pw_5years
		}
	}
}

planet_event = {
	id = pw_grand_archive.1103
	hide_window = yes
	is_triggered_only = yes

	pre_triggers = {
		is_ai = yes
	}

	immediate = {
		if = {
			limit = { NOT = { has_deposit = pw_d_library_of_babel }}
			add_deposit = pw_d_library_of_babel
		}

		planet_event = {
			id = pw_grand_archive.1104
			days = @pw_5years
		}
	}
}

planet_event = {
	id = pw_grand_archive.1104
	hide_window = yes
	is_triggered_only = yes

	pre_triggers = {
		is_ai = yes
	}

	immediate = {
		if = {
			limit = { NOT = { has_deposit = pw_d_particle_museum }}
			add_deposit = pw_d_particle_museum
		}

		planet_event = {
			id = pw_grand_archive.1105
			days = @pw_5years
		}
	}
}

planet_event = {
	id = pw_grand_archive.1105
	hide_window = yes
	is_triggered_only = yes

	pre_triggers = {
		is_ai = yes
	}

	immediate = {
		if = {
			limit = { NOT = { has_deposit = pw_d_omnidatabase }}
			add_deposit = pw_d_omnidatabase
		}

		planet_event = {
			id = pw_grand_archive.1106
			days = @pw_5years
		}
	}
}

planet_event = {
	id = pw_grand_archive.1106
	hide_window = yes
	is_triggered_only = yes

	pre_triggers = {
		is_ai = yes
	}

	immediate = {
		if = {
			limit = { NOT = { has_deposit = pw_d_stellarium }}
			add_deposit = pw_d_stellarium
		}

		planet_event = {
			id = pw_grand_archive.1107
			days = @pw_5years
		}
	}
}

planet_event = {
	id = pw_grand_archive.1107
	hide_window = yes
	is_triggered_only = yes

	pre_triggers = {
		is_ai = yes
	}

	immediate = {
		if = {
			limit = { NOT = { has_deposit = pw_d_zero_g_exposition }}
			add_deposit = pw_d_zero_g_exposition
		}

		planet_event = {
			id = pw_grand_archive.1108
			days = @pw_5years
		}
	}
}

planet_event = {
	id = pw_grand_archive.1108
	hide_window = yes
	is_triggered_only = yes

	pre_triggers = {
		is_ai = yes
	}

	immediate = {
		if = {
			limit = { NOT = { has_deposit = pw_d_mechanist_collection }}
			add_deposit = pw_d_mechanist_collection
		}

		planet_event = {
			id = pw_grand_archive.1109
			days = @pw_5years
		}
	}
}

planet_event = {
	id = pw_grand_archive.1109
	hide_window = yes
	is_triggered_only = yes

	pre_triggers = {
		is_ai = yes
	}

	immediate = {
		if = {
			limit = { NOT = { has_deposit = pw_d_meta_architectural_complex }}
			add_deposit = pw_d_meta_architectural_complex
		}

		planet_event = {
			id = pw_grand_archive.1110
			days = @pw_5years
		}
	}
}

planet_event = {
	id = pw_grand_archive.1110
	hide_window = yes
	is_triggered_only = yes

	pre_triggers = {
		is_ai = yes
	}

	immediate = {
		if = {
			limit = {
				has_deposit = pw_d_ark_project
				has_deposit = pw_d_cradle_initiative
				has_deposit = pw_d_library_of_babel
				has_deposit = pw_d_particle_museum
				has_deposit = pw_d_omnidatabase
				has_deposit = pw_d_stellarium
				has_deposit = pw_d_zero_g_exposition
				has_deposit = pw_d_mechanist_collection
				has_deposit = pw_d_meta_architectural_complex
			}
			remove_deposit = pw_d_ark_project
			remove_deposit = pw_d_particle_museum
			remove_deposit = pw_d_cradle_initiative
			remove_deposit = pw_d_library_of_babel
			remove_deposit = pw_d_omnidatabase
			remove_deposit = pw_d_stellarium
			remove_deposit = pw_d_zero_g_exposition
			remove_deposit = pw_d_mechanist_collection
			remove_deposit = pw_d_meta_architectural_complex
			if = {
				limit = { NOT = { has_deposit = pw_d_holoarchive }}
				add_deposit = pw_d_holoarchive
			}
		}
	}
}
