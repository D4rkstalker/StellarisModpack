namespace = ancrel


#The Last Baol system (hidden)
country_event = {
	id = ancrel.2014
	hide_window = yes
	
	fire_only_once = yes
	
	is_triggered_only = yes
	
	immediate = {
		set_global_flag = last_baol_system_discovered
		set_country_flag = last_baol_system
		if = {
			limit = {
				any_system_within_border = { has_star_flag = precursor_baol_1 }
			}
			random_system_within_border = {
				limit = { has_star_flag = precursor_baol_1 }
				spawn_system = {
					min_distance = 10
					max_distance = 30
					max_jumps = 0
					initializer = "last_baol_system"
				}
			}
		}
		else = {
			random_system = {
				limit = { has_star_flag = precursor_baol_1 }
				spawn_system = {
					min_distance = 10
					max_distance = 30
					max_jumps = 0
					initializer = "last_baol_system"
				}
			}
		}
		random_system = {
			limit = { has_star_flag = last_baol_system }
			random_system_planet = {
				limit = { has_planet_flag = grunur_prime }
				# Start -guilli
				# broken planet thus we give it a guaranteed shipyards and a deposit bonus
				if = {
					limit = {
						NOT = { has_global_flag = gpm_modifiers_precursor_disabled }
					}
					add_modifier = { days = -1 modifier = "gpm_precursor_shipyards" }
					solar_system = {
						set_star_flag = gpm_precursor_shipyards_star
					}
					gpm_set_shipyards_objects = yes
					set_planet_flag = "gpm_is_precursor_world"
				}
			}
			gpm_precursor_home_system_loop = yes
		}
		country_event = { id = ancrel.2015 days = 10 }
	}
}