############################
#
# Disasters Events
#
# Written by Annatar
#
############################

namespace = newfrontiers_disasters

# Gatekeeper - Disasters
event = {
	id = newfrontiers_disasters.1
	hide_window = yes
	is_triggered_only = yes
	
	trigger = {
		NOT = { has_global_flag = no_disaster_events }
	}
	
	immediate = {
		random_list = {
			#Disaster happens
			10 = {
				modifier = {
					factor = 2
					AND = {
						has_global_flag = anger_galaxy
						years_passed >= 150
					}
				}
				modifier = {
					factor = 3
					has_global_flag = anger_galaxy
					AND = {
						has_global_flag = anger_galaxy
						years_passed < 150
						years_passed >= 250
					}
				}
				modifier = {
					factor = 5
					has_global_flag = anger_galaxy
					AND = {
						has_global_flag = anger_galaxy
						years_passed < 250
						years_passed >= 300
					}
				}
				modifier = {
					factor = 8
					has_global_flag = anger_galaxy
					AND = {
						has_global_flag = anger_galaxy
						years_passed < 300
					}
				}
				random_list = {
					#Planetary Disaster
					50 = {
						random_planet = {
							limit = { planetary_catastrophe_is_possible = yes }
							random_list = {
								10 = {
									#Moon Collision - Collision of the moon
									modifier = {
										factor = 0
										OR = {
											is_moon = no
											is_ringworld = yes
											is_planet_class = pc_habitat
										}
									}
									modifier = {
										factor = 0.5
										owner = { has_modifier = monolith_whisper }
									}
									planet_event = { id = newfrontiers_disasters.2 days = 30 random = 90 }
								}
								10 = {
									#Moon Collision - The Fall of the moon
									modifier = {
										factor = 0
										OR = {
											has_moon = no
											is_ringworld = yes
											is_planet_class = pc_habitat
										}
									}
									modifier = {
										factor = 0.5
										owner = { has_modifier = monolith_whisper }
									}
									planet_event = { id = newfrontiers_disasters.7 days = 30 random = 90 }
								}
								10 = {
									#Orbit Offset - Orbit Reduction
									modifier = {
										factor = 0
										OR = {
											is_moon = yes
											has_moon = yes
											has_planet_modifier = "pm_underground_world"
											is_ringworld = yes
											is_planet_class = pc_habitat
											solar_system = {
												OR = {
													is_binary = no
													is_trinary = no
													is_paired = no
												}
											}
										}
									}
									modifier = {
										factor = 0.5
										owner = { has_modifier = monolith_whisper }
									}
									modifier = {
										factor = 1.5
										solar_system = {
											OR = {
												is_binary = yes
												is_trinary = yes
											}
										}
									}
									modifier = {
										factor = 2
										solar_system = {
											is_paired = yes
										}
									}
									planet_event = { id = newfrontiers_disasters.12 days = 30 random = 90 }
								}
								10 = {
									#Orbit Offset - Orbit Increase
									modifier = {
										factor = 0
										OR = {
											is_moon = yes
											has_moon = yes
											has_planet_modifier = "pm_ice_world"
											is_ringworld = yes
											is_planet_class = pc_habitat
											solar_system = {
												OR = {
													is_binary = no
													is_trinary = no
													is_paired = no
												}
											}
										}
									}
									modifier = {
										factor = 0.5
										owner = { has_modifier = monolith_whisper }
									}
									modifier = {
										factor = 1.5
										solar_system = {
											OR = {
												is_binary = yes
												is_trinary = yes
											}
										}
									}
									modifier = {
										factor = 2
										solar_system = {
											is_paired = yes
										}
									}
									planet_event = { id = newfrontiers_disasters.17 days = 30 random = 90 }
								}
								20 = {
									#Awakened Planet
									modifier = {
										factor = 0
										OR = {
											has_planet_modifier = "pm_ice_world"
											has_planet_modifier = "pm_underground_world"
											is_ringworld = yes
											is_planet_class = pc_habitat
										}
									}
									planet_event = { id = newfrontiers_disasters.20 days = 30 random = 90 }
								}
								20 = {
									modifier = {
										factor = 0
										solar_system = {
											any_neighbor_system = {
												NOR = {
													is_star_class = sc_pulsar
													is_star_class = sc_nova_1
													is_star_class = sc_nova_2
													is_star_class = sc_collapsar
													is_star_class = sc_magnetar
												}
											}
										}
									}
									modifier = {
										factor = 0.5
										owner = { has_modifier = monolith_whisper }
									}
									#Gamma-ray Burst
									random_list = {
										50 = { planet_event = { id = newfrontiers_disasters.27 days = 30 random = 90 } }
										50 = { planet_event = { id = newfrontiers_disasters.28 days = 30 random = 90 } }
									}
								}
								20 = {
									#Space Crash
									modifier = {
										factor = 0
										OR = {
											NOR = {
												is_ringworld = yes
												is_planet_class = pc_habitat
											}
											AND = {
												years_passed < 100
												owner = { num_owned_planets = 1 }
											}
										}
									}
									modifier = {
										factor = 0.5
										owner = { has_modifier = monolith_whisper }
									}
									planet_event = { id = newfrontiers_disasters.29 days = 30 random = 90 }
								}
							}
						}
					}
					#Star Disaster
					50 = {
						random_planet = {
							limit = { 
								star_catastrophe_is_possible = yes
								solar_system = { owner = { NOT = { has_modifier = monolith_whisper } } }
							}
							planet_event = { id = newfrontiers_disasters.30 days = 30 random = 90 }
						}
					}
				}
			}
			90 = {
				#Null
			}
		}
	}
}


### Moon Collision ###

# Collision of the moon - Beginning
planet_event = {
	id = newfrontiers_disasters.2
	title = "newfrontiers_disasters.2.name"
	desc = {
		trigger = {
			AND = {
				owner = { num_owned_planets = 1 }
				is_homeworld = yes
			}
		}
		text = "newfrontiers_disasters.2.desc.apocalypse"
	}
	desc = {
		trigger = {
			AND = {
				owner = { num_owned_planets > 1 }
				is_homeworld = yes
			}
		}
		text = "newfrontiers_disasters.2.desc.lost_home"
	}
	desc = {
		trigger = {
			AND = {
				owner = { num_owned_planets > 1 }
				is_homeworld = no
			}
		}
		text = "newfrontiers_disasters.2.desc"
	}
	picture = GFX_evt_moon_collision_1
	show_sound = event_air_raid_siren
	location = ROOT
	
	trigger = {
		is_moon = yes
		planetary_catastrophe_is_possible = yes 
	}
	
	is_triggered_only = yes
	
	immediate = {
		set_planet_flag = planetary_disaster
		set_planet_flag = moon_collision
		set_planet_flag = colony_event
		save_event_target_as = disaster_planet
		
		planet_event = { id = newfrontiers_disasters.3 days = 1800 random = 900 }
	}
	
	option = {
		name = "newfrontiers_disasters.keep_secret"
		trigger = {
			owner = {
				NOR = {
					has_authority = auth_hive_mind
					has_authority = auth_machine_intelligence
				}
			}
		}
		
		add_modifier = {
			modifier = "secret_disaster"
			days = -1
		}
	}
	
	option = {
		name = "newfrontiers_disasters.warn_settlements"
		trigger = {
			owner = {
				NOR = {
					has_authority = auth_hive_mind
					has_authority = auth_machine_intelligence
				}
			}
		}
		if = {
			limit = {
				owner = { num_owned_planets = 1 }
				is_homeworld = yes
			}
			add_modifier = {
				modifier = "apocalypse"
				days = -1
			}
		}
		else = {
			add_modifier = {
				modifier = "moon_collision"
				days = -1
			}
		}
		
		hidden_effect = {
			every_country = {
				limit = {
					AND = {
						is_country_type = default
						is_homicidal = no
						has_communications = prev.owner
					}
				}
				country_event = { id = newfrontiers_disasters.300 days = 1 }
			}
		}
	}
	
	option = {
		name = "newfrontiers_disasters.necessary_actions"
		trigger = {
			owner = {
				OR = {
					has_authority = auth_hive_mind
					has_authority = auth_machine_intelligence
				}
			}
		}
		add_modifier = {
			modifier = "moon_collision"
			days = -1
		}
		
		hidden_effect = {
			every_country = {
				limit = {
					AND = {
						is_country_type = default
						is_homicidal = no
						has_communications = prev.owner
					}
				}
				country_event = { id = newfrontiers_disasters.300 days = 1 }
			}
		}
	}
}

# Collision of the moon - Stage I
planet_event = {
	id = newfrontiers_disasters.3
	title = "newfrontiers_disasters.3.name"
	desc = "newfrontiers_disasters.3.desc"
	picture = GFX_evt_moon_collision_1
	show_sound = event_air_raid_siren
	location = ROOT
	
	trigger = {
		has_planet_flag = moon_collision
	}
	
	is_triggered_only = yes
	
	immediate = {
		if = {
			limit = { has_modifier = "orbit_stabilization" }
			random_list = {
				15 = {
					modifier = {
						factor = 0.5
						has_modifier = "doomsday_cult"
					}
					modifier = {
						factor = 1.5
						num_buildings = { type = building_orbit_stabilizer value = 2 }
					}
					modifier = {
						factor = 2
						num_buildings = { type = building_orbit_stabilizer value = 3 }
					}
					modifier = {
						factor = 3
						num_buildings = { type = building_orbit_stabilizer value = 4 }
					}
					modifier = {
						factor = 4
						num_buildings = { type = building_orbit_stabilizer value = 5 }
					}
					modifier = {
						factor = 5
						num_buildings = { type = building_orbit_stabilizer value = 6 }
					}
					modifier = {
						factor = 6
						num_buildings = { type = building_orbit_stabilizer value > 6 }
					}
					planet_event = { id = newfrontiers_disasters.46 days = 10 }
				}
				85 = {
					planet_event = { id = newfrontiers_disasters.4 days = 1800 random = 900 }
				}
			}
		}
		else = {
			planet_event = { id = newfrontiers_disasters.4 days = 1800 random = 900 }
		}
		
		if = {
			limit = { has_modifier = "secret_disaster" }
			random_list = {
				20 = {
					planet_event = { id = newfrontiers_disasters.100 days = 5 } #Secret revealed
				}
				80 = {
					#Null
				}
			}
		}
		else = {
			random_list = {
				20 = {
					planet_event = { id = newfrontiers_disasters.200 days = 5 } #Ahead of the Apocalypse
				}
				80 = {
					#Null
				}
			}
		}
	}
	
	option = {
		name = TERRIBLE
		
		add_deposit = d_active_volcano
		add_deposit = d_active_volcano
	}
}

# Collision of the moon - Stage II
planet_event = {
	id = newfrontiers_disasters.4
	title = "newfrontiers_disasters.4.name"
	desc = "newfrontiers_disasters.4.desc"
	picture = GFX_evt_moon_collision_1
	show_sound = event_air_raid_siren
	location = ROOT
	
	trigger = {
		has_planet_flag = moon_collision
	}
	
	is_triggered_only = yes
	
	immediate = {
		if = {
			limit = { has_modifier = "orbit_stabilization" }
			random_list = {
				15 = {
					modifier = {
						factor = 0.5
						has_modifier = "doomsday_cult"
					}
					modifier = {
						factor = 1.5
						num_buildings = { type = building_orbit_stabilizer value = 2 }
					}
					modifier = {
						factor = 2
						num_buildings = { type = building_orbit_stabilizer value = 3 }
					}
					modifier = {
						factor = 3
						num_buildings = { type = building_orbit_stabilizer value = 4 }
					}
					modifier = {
						factor = 4
						num_buildings = { type = building_orbit_stabilizer value = 5 }
					}
					modifier = {
						factor = 5
						num_buildings = { type = building_orbit_stabilizer value = 6 }
					}
					modifier = {
						factor = 6
						num_buildings = { type = building_orbit_stabilizer value > 6 }
					}
					planet_event = { id = newfrontiers_disasters.46 days = 10 }
				}
				85 = {
					planet_event = { id = newfrontiers_disasters.5 days = 1800 random = 900 }
				}
			}
		}
		else = {
			planet_event = { id = newfrontiers_disasters.5 days = 1800 random = 900 }
		}
		
		if = {
			limit = { has_modifier = "secret_disaster" }
			random_list = {
				35 = {
					planet_event = { id = newfrontiers_disasters.100 days = 5 } #Secret revealed
				}
				65 = {
					#Null
				}
			}
		}
		else = {
			random_list = {
				35 = {
					planet_event = { id = newfrontiers_disasters.200 days = 5 } #Ahead of the Apocalypse
				}
				65 = {
					#Null
				}
			}
		}
	}
	
	option = {
		name = TERRIBLE
		
		add_deposit = d_active_volcano
		add_deposit = d_active_volcano
		
		if = {
			limit = { NOT = { has_planet_modifier = "pm_hazardous_weather" } }
			add_modifier = {
				modifier = "hazardous_weather"
				days = -1
			}
		}
	}
}

# Collision of the moon - Stage III
planet_event = {
	id = newfrontiers_disasters.5
	title = "newfrontiers_disasters.5.name"
	desc = "newfrontiers_disasters.5.desc"
	picture = GFX_evt_moon_collision_1
	show_sound = event_air_raid_siren
	location = ROOT
	
	trigger = {
		has_planet_flag = moon_collision
	}
	
	is_triggered_only = yes
	
	immediate = {
		if = {
			limit = { has_modifier = "orbit_stabilization" }
			random_list = {
				15 = {
					modifier = {
						factor = 0.5
						has_modifier = "doomsday_cult"
					}
					modifier = {
						factor = 1.5
						num_buildings = { type = building_orbit_stabilizer value = 2 }
					}
					modifier = {
						factor = 2
						num_buildings = { type = building_orbit_stabilizer value = 3 }
					}
					modifier = {
						factor = 3
						num_buildings = { type = building_orbit_stabilizer value = 4 }
					}
					modifier = {
						factor = 4
						num_buildings = { type = building_orbit_stabilizer value = 5 }
					}
					modifier = {
						factor = 5
						num_buildings = { type = building_orbit_stabilizer value = 6 }
					}
					modifier = {
						factor = 6
						num_buildings = { type = building_orbit_stabilizer value > 6 }
					}
					planet_event = { id = newfrontiers_disasters.46 days = 10 }
				}
				85 = {
					planet_event = { id = newfrontiers_disasters.6 days = 1800 random = 900 }
				}
			}
		}
		else = {
			planet_event = { id = newfrontiers_disasters.6 days = 1800 random = 900 }
		}
		
		if = {
		limit = { has_modifier = "secret_disaster" }
		random_list = {
			50 = {
				planet_event = { id = newfrontiers_disasters.100 days = 5 } #Secret revealed
			}
			50 = {
				#Null
			}
		}
	}
	else = {
		random_list = {
			50 = {
				planet_event = { id = newfrontiers_disasters.200 days = 5 } #Ahead of the Apocalypse
			}
			50 = {
				#Null
			}
		}
	}
	}
	
	option = {
		name = TERRIBLE
		
		add_deposit = d_active_volcano
		add_deposit = d_active_volcano
		
		if = {
			limit = { NOT = { has_planet_modifier = "pm_unstable_tectonics" } }
			add_modifier = {
				modifier = "unstable_tectonics"
				days = -1
			}
		}
	}
}

# Collision of the moon - End
planet_event = {
	id = newfrontiers_disasters.6
	title = "newfrontiers_disasters.6.name"
	desc = {
		trigger = {
			AND = {
				owner = { num_owned_planets = 1 }
				is_homeworld = yes
			}
		}
		text = "newfrontiers_disasters.6.desc.apocalypse"
	}
	desc = {
		trigger = {
			AND = {
				owner = { num_owned_planets > 1 }
				is_homeworld = yes
			}
		}
		text = "newfrontiers_disasters.6.desc.lost_home"
	}
	desc = {
		trigger = {
			AND = {
				owner = { num_owned_planets > 1 }
				is_homeworld = no
			}
		}
		text = "newfrontiers_disasters.6.desc"
	}
	desc = {
		trigger = {
			owner = { has_country_flag = ark_project }
		}
		text = "newfrontiers_disasters.6.desc.ark"
	}
	picture = GFX_evt_colony_settlement
	show_sound = event_super_explosion
	location = ROOT
	
	is_triggered_only = yes
	
	immediate = {
	}
	
	option = {
		name = TERRIBLE
		custom_tooltip = newfrontiers_disasters.destroy_colony.tooltip
		hidden_effect = {
			solar_system = {
				every_planet = {
					limit = { any_moon = { has_planet_flag = moon_collision } }
					add_modifier = {
						modifier = "moon_shards"
						days = -1
					}
					set_deposit = d_society_5
					set_ring = yes
					if = {
						limit = {
							AND = {
								is_planet_class = "pc_gas_giant"
								planet_size >= 25
							}
						}
						set_gas_giant_big_rings = yes
					}
					else_if = {
						limit = {
							AND = {
								is_planet_class = "pc_gas_giant"
								planet_size < 25
							}
						}
						set_gas_giant_small_rings = yes
					}
					else_if = {
						limit = {
							AND = {
								NOT = { is_planet_class = "pc_gas_giant" }
								planet_size >= 20
							}
						}
						set_small_planet_big_rings = yes
					}
					else = {
						set_small_planet_thin_rings = yes
					}
				}
			}
			#Ark notification
			if = {
				limit = { exists = event_target:ark_empire }
				event_target:ark_empire = { country_event = { id = newfrontiers_disasters.39 days = 1 } }
			}
			else = {
				limit = { 
					owner = {
						AND = {
							has_country_flag = ark_project
							NOT = { exists = event_target:ark_empire }
						}
					} 
				}
				create_ark_country = yes
				last_created_country = {
					set_player = event_target:dying_empire
				}
				clear_global_event_target = dying_empire
				clear_global_event_target = ark_empire
			}
			remove_planet_flag = planetary_disaster
			remove_planet_flag = moon_collision
			remove_planet_flag = colony_event
			destroy_colony = yes
			remove_planet = yes
		}
	}
}


# The Fall of the moon - Beginning
planet_event = {
	id = newfrontiers_disasters.7
	title = "newfrontiers_disasters.7.name"
	desc = {
		trigger = {
			AND = {
				owner = { num_owned_planets = 1 }
				is_homeworld = yes
			}
		}
		text = "newfrontiers_disasters.7.desc.apocalypse"
	}
	desc = {
		trigger = {
			AND = {
				owner = { num_owned_planets > 1 }
				is_homeworld = yes
			}
		}
		text = "newfrontiers_disasters.7.desc.lost_home"
	}
	desc = {
		trigger = {
			AND = {
				owner = { num_owned_planets > 1 }
				is_homeworld = no
			}
		}
		text = "newfrontiers_disasters.7.desc"
	}
	picture = GFX_evt_moon_collision_2
	show_sound = event_air_raid_siren
	location = ROOT
	
	trigger = {
		has_moon = yes
		planetary_catastrophe_is_possible = yes 
	}
	
	is_triggered_only = yes
	
	immediate = {
		set_planet_flag = planetary_disaster
		set_planet_flag = moon_falling
		set_planet_flag = colony_event
		save_event_target_as = disaster_planet
		
		planet_event = { id = newfrontiers_disasters.8 days = 1800 random = 900 }
	}
	
	option = {
		name = "newfrontiers_disasters.keep_secret"
		trigger = {
			owner = {
				NOR = {
					has_authority = auth_hive_mind
					has_authority = auth_machine_intelligence
				}
			}
		}
		
		add_modifier = {
			modifier = "secret_disaster"
			days = -1
		}
	}
	
	option = {
		name = "newfrontiers_disasters.warn_settlements"
		trigger = {
			owner = {
				NOR = {
					has_authority = auth_hive_mind
					has_authority = auth_machine_intelligence
				}
			}
		}
		if = {
			limit = {
				owner = { num_owned_planets = 1 }
				is_homeworld = yes
			}
			add_modifier = {
				modifier = "apocalypse"
				days = -1
			}
		}
		else = {
			add_modifier = {
				modifier = "moon_fall"
				days = -1
			}
		}
		
		hidden_effect = {
			every_country = {
				limit = {
					AND = {
						is_country_type = default
						is_homicidal = no
						has_communications = prev.owner
					}
				}
				country_event = { id = newfrontiers_disasters.300 days = 1 }
			}
		}
	}
	
	option = {
		name = "newfrontiers_disasters.necessary_actions"
		trigger = {
			owner = {
				OR = {
					has_authority = auth_hive_mind
					has_authority = auth_machine_intelligence
				}
			}
		}
		add_modifier = {
			modifier = "moon_fall"
			days = -1
		}
		
		hidden_effect = {
			every_country = {
				limit = {
					AND = {
						is_country_type = default
						is_homicidal = no
						has_communications = prev.owner
					}
				}
				country_event = { id = newfrontiers_disasters.300 days = 1 }
			}
		}
	}
}

# The Fall of the moon - Stage I
planet_event = {
	id = newfrontiers_disasters.8
	title = "newfrontiers_disasters.8.name"
	desc = "newfrontiers_disasters.8.desc"
	picture = GFX_evt_moon_collision_2
	show_sound = event_air_raid_siren
	location = ROOT
	
	trigger = {
		has_planet_flag = moon_falling
	}
	
	is_triggered_only = yes
	
	immediate = {
		if = {
			limit = { has_modifier = "orbit_stabilization" }
			random_list = {
				15 = {
					modifier = {
						factor = 0.5
						has_modifier = "doomsday_cult"
					}
					modifier = {
						factor = 1.5
						num_buildings = { type = building_orbit_stabilizer value = 2 }
					}
					modifier = {
						factor = 2
						num_buildings = { type = building_orbit_stabilizer value = 3 }
					}
					modifier = {
						factor = 3
						num_buildings = { type = building_orbit_stabilizer value = 4 }
					}
					modifier = {
						factor = 4
						num_buildings = { type = building_orbit_stabilizer value = 5 }
					}
					modifier = {
						factor = 5
						num_buildings = { type = building_orbit_stabilizer value = 6 }
					}
					modifier = {
						factor = 6
						num_buildings = { type = building_orbit_stabilizer value > 6 }
					}
					planet_event = { id = newfrontiers_disasters.47 days = 10 }
				}
				85 = {
					planet_event = { id = newfrontiers_disasters.9 days = 1800 random = 900 }
				}
			}
		}
		else = {
			planet_event = { id = newfrontiers_disasters.9 days = 1800 random = 900 }
		}
		
		if = {
			limit = { has_modifier = "secret_disaster" }
			random_list = {
				20 = {
					planet_event = { id = newfrontiers_disasters.100 days = 5 } #Secret revealed
				}
				80 = {
					#Null
				}
			}
		}
		else = {
			random_list = {
				20 = {
					planet_event = { id = newfrontiers_disasters.200 days = 5 } #Ahead of the Apocalypse
				}
				80 = {
					#Null
				}
			}
		}
	}
	
	option = {
		name = TERRIBLE
		
		add_deposit = d_active_volcano
		add_deposit = d_active_volcano
	}
}

# The Fall of the moon - Stage II
planet_event = {
	id = newfrontiers_disasters.9
	title = "newfrontiers_disasters.9.name"
	desc = "newfrontiers_disasters.9.desc"
	picture = GFX_evt_moon_collision_2
	show_sound = event_air_raid_siren
	location = ROOT
	
	trigger = {
		has_planet_flag = moon_falling
	}
	
	is_triggered_only = yes
	
	immediate = {
		if = {
			limit = { has_modifier = "orbit_stabilization" }
			random_list = {
				15 = {
					modifier = {
						factor = 0.5
						has_modifier = "doomsday_cult"
					}
					modifier = {
						factor = 1.5
						num_buildings = { type = building_orbit_stabilizer value = 2 }
					}
					modifier = {
						factor = 2
						num_buildings = { type = building_orbit_stabilizer value = 3 }
					}
					modifier = {
						factor = 3
						num_buildings = { type = building_orbit_stabilizer value = 4 }
					}
					modifier = {
						factor = 4
						num_buildings = { type = building_orbit_stabilizer value = 5 }
					}
					modifier = {
						factor = 5
						num_buildings = { type = building_orbit_stabilizer value = 6 }
					}
					modifier = {
						factor = 6
						num_buildings = { type = building_orbit_stabilizer value > 6 }
					}
					planet_event = { id = newfrontiers_disasters.47 days = 10 }
				}
				85 = {
					planet_event = { id = newfrontiers_disasters.10 days = 1800 random = 900 }
				}
			}
		}
		else = {
			planet_event = { id = newfrontiers_disasters.10 days = 1800 random = 900 }
		}
		
		if = {
			limit = { has_modifier = "secret_disaster" }
			random_list = {
				35 = {
					planet_event = { id = newfrontiers_disasters.100 days = 5 } #Secret revealed
				}
				65 = {
					#Null
				}
			}
		}
		else = {
			random_list = {
				35 = {
					planet_event = { id = newfrontiers_disasters.200 days = 5 } #Ahead of the Apocalypse
				}
				65 = {
					#Null
				}
			}
		}
	}
	
	option = {
		name = TERRIBLE
		
		add_deposit = d_active_volcano
		add_deposit = d_active_volcano
		
		if = {
			limit = { NOT = { has_planet_modifier = "pm_hazardous_weather" } }
			add_modifier = {
				modifier = "hazardous_weather"
				days = -1
			}
		}
	}
}

# The Fall of the moon - Stage III
planet_event = {
	id = newfrontiers_disasters.10
	title = "newfrontiers_disasters.10.name"
	desc = "newfrontiers_disasters.10.desc"
	picture = GFX_evt_moon_collision_2
	show_sound = event_air_raid_siren
	location = ROOT
	
	trigger = {
		has_planet_flag = moon_collision
	}
	
	is_triggered_only = yes
	
	immediate = {
		if = {
			limit = { has_modifier = "orbit_stabilization" }
			random_list = {
				15 = {
					modifier = {
						factor = 0.5
						has_modifier = "doomsday_cult"
					}
					modifier = {
						factor = 1.5
						num_buildings = { type = building_orbit_stabilizer value = 2 }
					}
					modifier = {
						factor = 2
						num_buildings = { type = building_orbit_stabilizer value = 3 }
					}
					modifier = {
						factor = 3
						num_buildings = { type = building_orbit_stabilizer value = 4 }
					}
					modifier = {
						factor = 4
						num_buildings = { type = building_orbit_stabilizer value = 5 }
					}
					modifier = {
						factor = 5
						num_buildings = { type = building_orbit_stabilizer value = 6 }
					}
					modifier = {
						factor = 6
						num_buildings = { type = building_orbit_stabilizer value > 6 }
					}
					planet_event = { id = newfrontiers_disasters.47 days = 10 }
				}
				85 = {
					planet_event = { id = newfrontiers_disasters.11 days = 1800 random = 900 }
				}
			}
		}
		else = {
			planet_event = { id = newfrontiers_disasters.11 days = 1800 random = 900 }
		}
		
		if = {
		limit = { has_modifier = "secret_disaster" }
		random_list = {
			50 = {
				planet_event = { id = newfrontiers_disasters.100 days = 5 } #Secret revealed
			}
			50 = {
				#Null
			}
		}
	}
	else = {
		random_list = {
			50 = {
				planet_event = { id = newfrontiers_disasters.200 days = 5 } #Ahead of the Apocalypse
			}
			50 = {
				#Null
			}
		}
	}
	}
	
	option = {
		name = TERRIBLE
		
		add_deposit = d_active_volcano
		add_deposit = d_active_volcano
		
		if = {
			limit = { NOT = { has_planet_modifier = "pm_unstable_tectonics" } }
			add_modifier = {
				modifier = "unstable_tectonics"
				days = -1
			}
		}
	}
}

# The Fall of the moon - End
planet_event = {
	id = newfrontiers_disasters.11
	title = "newfrontiers_disasters.11.name"
	desc = {
		trigger = {
			AND = {
				owner = { num_owned_planets = 1 }
				is_homeworld = yes
			}
		}
		text = "newfrontiers_disasters.11.desc.apocalypse"
	}
	desc = {
		trigger = {
			AND = {
				owner = { num_owned_planets > 1 }
				is_homeworld = yes
			}
		}
		text = "newfrontiers_disasters.11.desc.lost_home"
	}
	desc = {
		trigger = {
			AND = {
				owner = { num_owned_planets > 1 }
				is_homeworld = no
			}
		}
		text = "newfrontiers_disasters.11.desc"
	}
	desc = {
		trigger = {
			owner = { has_country_flag = ark_project }
		}
		text = "newfrontiers_disasters.11.desc.ark"
	}
	picture = GFX_evt_colony_settlement
	show_sound = event_super_explosion
	location = ROOT
	
	is_triggered_only = yes
	
	immediate = {
	}
	
	option = {
		name = TERRIBLE
		custom_tooltip = newfrontiers_disasters.destroy_colony.tooltip
		hidden_effect = {
			random_moon = {
				remove_planet = yes
			}
			#Ark
			if = {
				limit = { exists = event_target:ark_empire }
				event_target:ark_empire = { country_event = { id = newfrontiers_disasters.39 days = 1 } }
			}
			else = {
				limit = { 
					owner = {
						AND = {
							has_country_flag = ark_project
							NOT = { exists = event_target:ark_empire }
						}
					} 
				}
				create_ark_country = yes
				last_created_country = {
					set_player = event_target:dying_empire
				}
				clear_global_event_target = dying_empire
				clear_global_event_target = ark_empire
			}
			remove_planet_flag = planetary_disaster
			remove_planet_flag = moon_falling
			remove_planet_flag = colony_event
			destroy_colony = yes
			change_pc = pc_broken
			reset_planet = yes
			
			set_ring = yes
			if = {
				limit = { planet_size >= 20 }
				set_small_planet_big_rings = yes
			}
			else = {
				set_small_planet_thin_rings = yes
			}
		}
	}
}


### Orbit Change ###

# Orbit Reduction - Beginning
planet_event = {
	id = newfrontiers_disasters.12
	title = "newfrontiers_disasters.12.name"
	desc = "newfrontiers_disasters.12.desc"
	picture = GFX_evt_orbit_reduction
	show_sound = event_air_raid_siren
	location = ROOT
	
	trigger = {
		solar_system = {
			OR = {
				is_binary = yes
				is_trinary = yes
				is_paired = yes
			}
		}
		planetary_catastrophe_is_possible = yes 
	}
	
	is_triggered_only = yes
	
	immediate = {
		set_planet_flag = planetary_disaster
		set_planet_flag = orbit_reduction
		set_planet_flag = colony_event
		save_event_target_as = disaster_planet
		
		climatic_effects = yes
		
		random_list = {
			#Stage I
			50 = { planet_event = { id = newfrontiers_disasters.13 days = 7200 random = 3650 } }
			#End Event
			50 = { planet_event = { id = newfrontiers_disasters.14 days = 10 } }
		}
	}
	
	option = {
		name = "newfrontiers_disasters.keep_secret"
		trigger = {
			owner = {
				NOR = {
					has_authority = auth_hive_mind
					has_authority = auth_machine_intelligence
				}
			}
		}
		add_modifier = {
			modifier = "secret_disaster"
			days = -1
		}
	}
	
	option = {
		name = "newfrontiers_disasters.warn_settlements"
		trigger = {
			owner = {
				NOR = {
					has_authority = auth_hive_mind
					has_authority = auth_machine_intelligence
				}
			}
		}
		add_modifier = {
			modifier = "orbit_reduction"
			days = -1
		}
		
		hidden_effect = {
			every_country = {
				limit = {
					AND = {
						is_country_type = default
						is_homicidal = no
						has_communications = prev.owner
					}
				}
				country_event = { id = newfrontiers_disasters.300 days = 1 }
			}
		}
	}
	
	option = {
		name = "newfrontiers_disasters.necessary_actions"
		trigger = {
			owner = {
				OR = {
					has_authority = auth_hive_mind
					has_authority = auth_machine_intelligence
				}
			}
		}
		add_modifier = {
			modifier = "orbit_reduction"
			days = -1
		}
		
		hidden_effect = {
			every_country = {
				limit = {
					AND = {
						is_country_type = default
						is_homicidal = no
						has_communications = prev.owner
					}
				}
				country_event = { id = newfrontiers_disasters.300 days = 1 }
			}
		}
	}
}

# Orbit Reduction - Stages
planet_event = {
	id = newfrontiers_disasters.13
	title = "newfrontiers_disasters.13.name"
	desc = {
		trigger = { is_extremaly_hot = yes }
		text = "newfrontiers_disasters.13.desc.apocalypse"
	}
	desc = {
		trigger = { is_extremaly_hot = no }
		text = "newfrontiers_disasters.13.desc"
	}
	picture = GFX_evt_orbit_reduction
	show_sound = event_air_raid_siren
	location = ROOT
	
	trigger = {
		has_planet_flag = orbit_reduction
	}
	
	is_triggered_only = yes
	
	immediate = {
		if = {
			limit = { has_modifier = "orbit_stabilization" }
			random_list = {
				15 = {
					modifier = {
						factor = 0.5
						has_modifier = "doomsday_cult"
					}
					modifier = {
						factor = 1.5
						num_buildings = { type = building_orbit_stabilizer value = 2 }
					}
					modifier = {
						factor = 2
						num_buildings = { type = building_orbit_stabilizer value = 3 }
					}
					modifier = {
						factor = 3
						num_buildings = { type = building_orbit_stabilizer value = 4 }
					}
					modifier = {
						factor = 4
						num_buildings = { type = building_orbit_stabilizer value = 5 }
					}
					modifier = {
						factor = 5
						num_buildings = { type = building_orbit_stabilizer value = 6 }
					}
					modifier = {
						factor = 6
						num_buildings = { type = building_orbit_stabilizer value > 6 }
					}
					planet_event = { id = newfrontiers_disasters.48 days = 10 }
				}
				85 = {
					if = {
						limit = { is_extremaly_hot = yes }
						planet_event = { id = newfrontiers_disasters.15 days = 1825 random = 900 }
					}
					else = {
						planet_heating_effect = yes

						random_list = {
							#Next Stage
							50 = { planet_event = { id = newfrontiers_disasters.13 days = 10950 random = 3650 }}
							#End Event
							50 = { planet_event = { id = newfrontiers_disasters.14 days = 10 }}
						}
					}
				}
			}
		}
		else = {
			if = {
				limit = { is_extremaly_hot = yes }
				planet_event = { id = newfrontiers_disasters.15 days = 1825 random = 900 }
			}
			else = {
				planet_heating_effect = yes

				random_list = {
					#Next Stage
					50 = { planet_event = { id = newfrontiers_disasters.13 days = 10950 random = 3650 }}
					#End Event
					50 = { planet_event = { id = newfrontiers_disasters.14 days = 10 }}
				}
			}
		}
			
		if = {
			limit = { has_modifier = "secret_disaster" }
			random_list = {
				20 = {
					modifier = {
						factor = 4
						is_extremaly_hot = yes
					}
					planet_event = { id = newfrontiers_disasters.100 days = 5 } #Secret revealed
				}
				80 = {
					#Null
				}
			}
		}
		else = {
			random_list = {
				20 = {
					modifier = {
						factor = 2
						is_extremaly_hot = yes
					}
					planet_event = { id = newfrontiers_disasters.200 days = 5 } #Ahead of the Apocalypse
				}
				80 = {
					#Null
				}
			}
		}
	}
	
	option = {
		name = TERRIBLE
		trigger = { is_extremaly_hot = yes }
		custom_tooltip = newfrontiers_disasters.13.apocalypse.tooltip
	}
	
	option = {
		name = WORRYING
		trigger = { is_extremaly_hot = no }
		custom_tooltip = newfrontiers_disasters.13.tooltip
	}
}

# Orbit Reduction - Good End
planet_event = {
	id = newfrontiers_disasters.14
	title = "newfrontiers_disasters.14.name"
	desc = {
		trigger = {
			has_planet_flag = has_shelter_project_hot
		}
		text = "newfrontiers_disasters.14.desc.shelter"
	}
	desc = {
		trigger = {
			NOT = { has_planet_flag = has_shelter_project_hot }
		}
		text = "newfrontiers_disasters.14.desc"
	}
	picture = GFX_evt_orbit_reduction
	show_sound = event_celebration
	location = ROOT
	
	trigger = {
		has_planet_flag = orbit_reduction
	}
	
	is_triggered_only = yes
	
	immediate = {
	
		remove_planet_flag = planetary_disaster
		remove_planet_flag = orbit_reduction
		remove_planet_flag = colony_event
		
		if = {
			limit = { has_modifier = "apocalypse" }
			remove_modifier = "apocalypse"
		}
		if = {
			limit = { has_modifier = "secret_disaster" }
			remove_modifier = "secret_disaster"
		}
		if = {
			limit = { has_modifier = "orbit_reduction" }
			remove_modifier = "orbit_reduction"
		}
		if = {
			limit = { has_planet_flag = has_shelter_project_hot }
			remove_planet_flag = has_shelter_project_hot
		}
	}
	
	option = {
		name = INCREDIBLE
		custom_tooltip = newfrontiers_disasters.save_colony.tooltip
		
		hidden_effect = {
			#Ark
			if = {
				limit = { exists = event_target:ark_empire }
				clear_global_event_target = dying_empire
				clear_global_event_target = ark_empire
			}
		}
	}
}

# Orbit Reduction - Bad End
planet_event = {
	id = newfrontiers_disasters.15
	title = "newfrontiers_disasters.15.name"
	desc = {
		trigger = {
			has_planet_flag = has_shelter_project_cold
		}
		text = "newfrontiers_disasters.15.desc.shelter"
	}
	desc = {
		trigger = {
			owner = { has_country_flag = bastion_project }
		}
		text = "newfrontiers_disasters.15.desc.bastion"
	}
	desc = {
		trigger = {
			owner = { has_country_flag = ark_project }
		}
		text = "newfrontiers_disasters.15.desc.ark"
	}
	desc = {
		trigger = {
			owner = {
				NOT = { has_country_flag = bastion_project }
				NOT = { has_country_flag = ark_project } 
			}
			NOT = { has_planet_flag = has_shelter_project_cold }
		}
		text = "newfrontiers_disasters.15.desc"
	}
	picture = GFX_evt_scorched_world
	show_sound = event_air_raid_siren
	location = ROOT
	
	trigger = {
		has_planet_flag = orbit_reduction
	}
	
	is_triggered_only = yes
	
	immediate = {
	}
	
	option = {
		name = TERRIBLE
		trigger = {
			NOT = { has_planet_flag = has_shelter_project_hot }
		}
		custom_tooltip = newfrontiers_disasters.destroy_colony.tooltip
		hidden_effect = {
			#Ark
			if = {
				limit = { exists = event_target:ark_empire }
				event_target:ark_empire = { country_event = { id = newfrontiers_disasters.39 days = 1 } }
			}
			else = {
				limit = { 
					owner = {
						AND = {
							has_country_flag = ark_project
							NOT = { exists = event_target:ark_empire }
						}
					} 
				}
				create_ark_country = yes
				last_created_country = {
					set_player = event_target:dying_empire
				}
				clear_global_event_target = dying_empire
				clear_global_event_target = ark_empire
			}
			remove_planet_flag = planetary_disaster
			remove_planet_flag = orbit_reduction
			remove_planet_flag = colony_event
			change_pc = pc_barren
			destroy_colony = yes
			reset_planet = yes
			
			set_planet_entity = {
				picture = pc_scorched
				entity = scorched_planet_01_entity
			}
			add_modifier = {
				modifier = "scorched_world"
				days = -1
			}
		}
		add_modifier = {
			modifier = "lost_world"
			days = -1
		}
		set_deposit = d_society_5
	}
	
	option = {
		name = TERRIBLE
		trigger = {
			has_planet_flag = has_shelter_project_hot
		}
		custom_tooltip = newfrontiers_disasters.shelter_hot.tooltip
		hidden_effect = {
			#Ark
			if = {
				limit = { exists = event_target:ark_empire }
				event_target:ark_empire = { country_event = { id = newfrontiers_disasters.39 days = 1 } }
			}
			else = {
				limit = { 
					owner = {
						AND = {
							has_country_flag = ark_project
							NOT = { exists = event_target:ark_empire }
						}
					} 
				}
				create_ark_country = yes
				last_created_country = {
					set_player = event_target:dying_empire
				}
				clear_global_event_target = dying_empire
				clear_global_event_target = ark_empire
			}
			remove_planet_flag = planetary_disaster
			remove_planet_flag = orbit_reduction
			remove_planet_flag = colony_event
			
			planet_event = { id = newfrontiers_disasters.40 days = 1}
		}
	}
}

# Orbit Increase - Beginning
planet_event = {
	id = newfrontiers_disasters.16
	title = "newfrontiers_disasters.16.name"
	desc = "newfrontiers_disasters.16.desc"
	picture = GFX_evt_orbit_increase
	show_sound = event_air_raid_siren
	location = ROOT
	
	trigger = {
		solar_system = {
			OR = {
				is_binary = yes
				is_trinary = yes
				is_paired = yes
			}
		}
		planetary_catastrophe_is_possible = yes 
	}
	
	is_triggered_only = yes
	
	immediate = {
		set_planet_flag = planetary_disaster
		set_planet_flag = orbit_increase
		set_planet_flag = colony_event
		
		climatic_effects = yes
		
		random_list = {
			#Stage I
			50 = { planet_event = { id = newfrontiers_disasters.17 days = 7200 random = 3650 }}
			#End Event
			50 = { planet_event = { id = newfrontiers_disasters.18 days = 10 }}
		}
	}
	
	option = {
		name = "newfrontiers_disasters.keep_secret"
		trigger = {
			owner = {
				NOR = {
					has_authority = auth_hive_mind
					has_authority = auth_machine_intelligence
				}
			}
		}
		add_modifier = {
			modifier = "secret_disaster"
			days = -1
		}
	}
	
	option = {
		name = "newfrontiers_disasters.warn_settlements"
		trigger = {
			owner = {
				NOR = {
					has_authority = auth_hive_mind
					has_authority = auth_machine_intelligence
				}
			}
		}
		add_modifier = {
			modifier = "orbit_increase"
			days = -1
		}
		
		hidden_effect = {
			every_country = {
				limit = {
					AND = {
						is_country_type = default
						is_homicidal = no
						has_communications = prev.owner
					}
				}
				country_event = { id = newfrontiers_disasters.300 days = 1 }
			}
		}
	}
	
	option = {
		name = "newfrontiers_disasters.necessary_actions"
		trigger = {
			owner = {
				OR = {
					has_authority = auth_hive_mind
					has_authority = auth_machine_intelligence
				}
			}
		}
		add_modifier = {
			modifier = "orbit_increase"
			days = -1
		}
		
		hidden_effect = {
			every_country = {
				limit = {
					AND = {
						is_country_type = default
						is_homicidal = no
						has_communications = prev.owner
					}
				}
				country_event = { id = newfrontiers_disasters.300 days = 1 }
			}
		}
	}
}

# Orbit Increase - Stages
planet_event = {
	id = newfrontiers_disasters.17
	title = "newfrontiers_disasters.17.name"
	desc = {
		trigger = { is_extremaly_cold = yes }
		text = "newfrontiers_disasters.17.desc.apocalypse"
	}
	desc = {
		trigger = { is_extremaly_cold = no }
		text = "newfrontiers_disasters.17.desc"
	}
	picture = GFX_evt_orbit_increase
	show_sound = event_air_raid_siren
	location = ROOT
	
	trigger = {
		has_planet_flag = orbit_increase
	}
	
	is_triggered_only = yes
	
	immediate = {
		if = {
			limit = { has_modifier = "orbit_stabilization" }
			random_list = {
				15 = {
					modifier = {
						factor = 0.5
						has_modifier = "doomsday_cult"
					}
					modifier = {
						factor = 1.5
						num_buildings = { type = building_orbit_stabilizer value = 2 }
					}
					modifier = {
						factor = 2
						num_buildings = { type = building_orbit_stabilizer value = 3 }
					}
					modifier = {
						factor = 3
						num_buildings = { type = building_orbit_stabilizer value = 4 }
					}
					modifier = {
						factor = 4
						num_buildings = { type = building_orbit_stabilizer value = 5 }
					}
					modifier = {
						factor = 5
						num_buildings = { type = building_orbit_stabilizer value = 6 }
					}
					modifier = {
						factor = 6
						num_buildings = { type = building_orbit_stabilizer value > 6 }
					}
					planet_event = { id = newfrontiers_disasters.49 days = 10 }
				}
				85 = {
					if = {
						limit = { is_extremaly_cold = yes }
						planet_event = { id = newfrontiers_disasters.19 days = 1825 random = 900 }
					}
					else = {
						planet_cooling_effect = yes
					
						random_list = {
							#Next Stage
							50 = { planet_event = { id = newfrontiers_disasters.17 days = 10950 random = 3650 }}
							#End Event
							50 = { planet_event = { id = newfrontiers_disasters.18 days = 10 }}
						}
					}
				}
			}
		}
		else = {
			if = {
				limit = { is_extremaly_cold = yes }
				planet_event = { id = newfrontiers_disasters.19 days = 1825 random = 900 }
			}
			else = {
				planet_cooling_effect = yes
			
				random_list = {
					#Next Stage
					50 = { planet_event = { id = newfrontiers_disasters.17 days = 10950 random = 3650 }}
					#End Event
					50 = { planet_event = { id = newfrontiers_disasters.18 days = 10 }}
				}
			}
		}
			
		if = {
			limit = { has_modifier = "secret_disaster" }
			random_list = {
				20 = {
					modifier = {
						factor = 4
						is_extremaly_cold = yes
					}
					planet_event = { id = newfrontiers_disasters.100 days = 5 } #Secret revealed
				}
				80 = {
					#Null
				}
			}
		}
		else = {
			random_list = {
				20 = {
					modifier = {
						factor = 2
						is_extremaly_cold = yes
					}
					planet_event = { id = newfrontiers_disasters.200 days = 5 } #Ahead of the Apocalypse
				}
				80 = {
					#Null
				}
			}
		}
	}
	
	option = {
		name = TERRIBLE
		trigger = { is_extremaly_cold = yes }
		custom_tooltip = newfrontiers_disasters.17.apocalypse.tooltip
	}
	
	option = {
		name = WORRYING
		trigger = { is_extremaly_cold = no }
		custom_tooltip = newfrontiers_disasters.17.tooltip
	}
}

# Orbit Increase - Good End
planet_event = {
	id = newfrontiers_disasters.18
	title = "newfrontiers_disasters.18.name"
	desc = {
		trigger = {
			has_planet_flag = has_shelter_project_hot
		}
		text = "newfrontiers_disasters.18.desc.shelter"
	}
	desc = {
		trigger = {
			NOT = { has_planet_flag = has_shelter_project_cold }
		}
		text = "newfrontiers_disasters.18.desc"
	}
	picture = GFX_evt_orbit_increase
	show_sound = event_celebration
	location = ROOT
	
	trigger = {
		has_planet_flag = orbit_increase
	}
	
	is_triggered_only = yes
	
	immediate = {
	
		remove_planet_flag = planetary_disaster
		remove_planet_flag = orbit_increase
		remove_planet_flag = colony_event
		
		if = {
			limit = { has_modifier = "apocalypse" }
			remove_modifier = "apocalypse"
		}
		if = {
			limit = { has_modifier = "secret_disaster" }
			remove_modifier = "secret_disaster"
		}
		if = {
			limit = { has_modifier = "orbit_increase" }
			remove_modifier = "orbit_increase"
		}
		if = {
			limit = { has_planet_flag = has_shelter_project_cold }
			remove_planet_flag = has_shelter_project_cold
		}
	}
	
	option = {
		name = INCREDIBLE
		custom_tooltip = newfrontiers_disasters.save_colony.tooltip
		
		hidden_effect = {
			#Ark
			if = {
				limit = { exists = event_target:ark_empire }
				clear_global_event_target = dying_empire
				clear_global_event_target = ark_empire
			}
		}
	}
}

# Orbit Increase - Bad End
planet_event = {
	id = newfrontiers_disasters.19
	title = "newfrontiers_disasters.19.name"
	desc = {
		trigger = {
			has_planet_flag = has_shelter_project_cold
		}
		text = "newfrontiers_disasters.19.desc.shelter"
	}
	desc = {
		trigger = {
			owner = { has_country_flag = bastion_project }
		}
		text = "newfrontiers_disasters.19.desc.bastion"
	}
	desc = {
		trigger = {
			owner = { has_country_flag = ark_project }
		}
		text = "newfrontiers_disasters.19.desc.ark"
	}
	desc = {
		trigger = {
			owner = {
				NOT = { has_country_flag = bastion_project }
				NOT = { has_country_flag = ark_project } 
			}
			NOT = { has_planet_flag = has_shelter_project_cold }
		}
		text = "newfrontiers_disasters.19.desc"
	}
	picture = GFX_evt_frozen_world
	show_sound = event_air_raid_siren
	location = ROOT
	
	trigger = {
		has_planet_flag = orbit_increase
	}
	
	is_triggered_only = yes
	
	immediate = {
	}
	
	option = {
		name = TERRIBLE
		custom_tooltip = newfrontiers_disasters.destroy_colony.tooltip
		hidden_effect = {
			#Ark
			if = {
				limit = { exists = event_target:ark_empire }
				event_target:ark_empire = { country_event = { id = newfrontiers_disasters.39 days = 1 } }
			}
			else = {
				limit = { 
					owner = {
						AND = {
							has_country_flag = ark_project
							NOT = { exists = event_target:ark_empire }
						}
					} 
				}
				create_ark_country = yes
				last_created_country = {
					set_player = event_target:dying_empire
				}
				clear_global_event_target = dying_empire
				clear_global_event_target = ark_empire
			}
			remove_planet_flag = planetary_disaster
			remove_planet_flag = orbit_increase
			remove_planet_flag = colony_event
			change_pc = pc_frozen
			destroy_colony = yes
			reset_planet = yes
		}
		add_modifier = {
			modifier = "lost_world"
			days = -1
		}
		set_deposit = d_society_5
	}
	
	option = {
		name = TERRIBLE
		trigger = {
			has_planet_flag = has_shelter_project_cold
		}
		custom_tooltip = newfrontiers_disasters.shelter_cold.tooltip
		hidden_effect = {
			#Ark
			if = {
				limit = { exists = event_target:ark_empire }
				event_target:ark_empire = { country_event = { id = newfrontiers_disasters.39 days = 1 } }
			}
			else = {
				limit = { 
					owner = {
						AND = {
							has_country_flag = ark_project
							NOT = { exists = event_target:ark_empire }
						}
					} 
				}
				create_ark_country = yes
				last_created_country = {
					set_player = event_target:dying_empire
				}
				clear_global_event_target = dying_empire
				clear_global_event_target = ark_empire
			}
			remove_planet_flag = planetary_disaster
			remove_planet_flag = orbit_increase
			remove_planet_flag = colony_event
			
			planet_event = { id = newfrontiers_disasters.41 days = 1}
		}
	}
}


### Awakened Planet ###

# Volcanic activity - Beginning
planet_event = {
	id = newfrontiers_disasters.20
	title = "newfrontiers_disasters.20.name"
	desc = "newfrontiers_disasters.20.desc"
	picture = GFX_evt_volcano
	show_sound = event_air_raid_siren
	location = ROOT
	
	trigger = {
		planetary_catastrophe_is_possible = yes 
	}
	
	is_triggered_only = yes
	
	immediate = {
		set_planet_flag = planetary_disaster
		set_planet_flag = awakened_planet
		set_planet_flag = colony_event
		save_event_target_as = disaster_planet
		
		#Stage I
		planet_event = { id = newfrontiers_disasters.21 days = 365 random = 90 }
	}
	
	option = {
		name = INTRIGUING
		add_deposit = d_active_volcano
		add_deposit = d_geothermal_vent
	}
}

# Volcanic activity - Stage I
planet_event = {
	id = newfrontiers_disasters.21
	title = "newfrontiers_disasters.21.name"
	desc = {
		trigger = {
			AND = {
				owner = { num_owned_planets = 1 }
				is_homeworld = yes
			}
		}
		text = "newfrontiers_disasters.21.desc.apocalypse"
	}
	desc = {
		trigger = {
			AND = {
				owner = { num_owned_planets > 1 }
				is_homeworld = yes
			}
		}
		text = "newfrontiers_disasters.21.desc.lost_home"
	}
	desc = {
		trigger = {
			AND = {
				owner = { num_owned_planets > 1 }
				is_homeworld = no
			}
		}
		text = "newfrontiers_disasters.21.desc"
	}
	picture = GFX_evt_volcano
	show_sound = event_air_raid_siren
	location = ROOT
	
	is_triggered_only = yes
	
	immediate = {
		if = {
			limit = { has_modifier = "planet_bowels_control" }
			random_list = {
				15 = {
					modifier = {
						factor = 0.5
						has_modifier = "doomsday_cult"
					}
					modifier = {
						factor = 1.5
						num_buildings = { type = building_planetary_core_regulator value = 2 }
					}
					modifier = {
						factor = 2
						num_buildings = { type = building_planetary_core_regulator value = 3 }
					}
					modifier = {
						factor = 3
						num_buildings = { type = building_planetary_core_regulator value = 4 }
					}
					modifier = {
						factor = 4
						num_buildings = { type = building_planetary_core_regulator value = 5 }
					}
					modifier = {
						factor = 5
						num_buildings = { type = building_planetary_core_regulator value = 6 }
					}
					modifier = {
						factor = 6
						num_buildings = { type = building_planetary_core_regulator value > 6 }
					}
					planet_event = { id = newfrontiers_disasters.50 days = 10 }
				}
				85 = {
					#Stage II
					planet_event = { id = newfrontiers_disasters.22 days = 730 random = 365 }
				}
			}
		}
		else = {
			#Stage II
			planet_event = { id = newfrontiers_disasters.22 days = 730 random = 365 }
		}
	}
	
	option = {
		name = "newfrontiers_disasters.keep_secret"
		trigger = {
			owner = {
				NOR = {
					has_authority = auth_hive_mind
					has_authority = auth_machine_intelligence
				}
			}
		}
		add_modifier = {
			modifier = "secret_disaster"
			days = -1
		}
		add_deposit = d_active_volcano
		add_deposit = d_active_volcano
		if = {
			limit = { NOT = { has_planet_modifier = "pm_unstable_tectonics" } }
			add_modifier = {
				modifier = "unstable_tectonics"
				days = -1
			}
		}
	}
	
	option = {
		name = "newfrontiers_disasters.warn_settlements"
		trigger = {
			owner = {
				NOR = {
					has_authority = auth_hive_mind
					has_authority = auth_machine_intelligence
				}
			}
		}
		add_modifier = {
			modifier = "volcanic_activity"
			days = -1
		}
		add_deposit = d_active_volcano
		add_deposit = d_active_volcano
		if = {
			limit = { NOT = { has_planet_modifier = "pm_unstable_tectonics" } }
			add_modifier = {
				modifier = "unstable_tectonics"
				days = -1
			}
		}
		
		hidden_effect = {
			every_country = {
				limit = {
					AND = {
						is_country_type = default
						is_homicidal = no
						has_communications = prev.owner
					}
				}
				country_event = { id = newfrontiers_disasters.300 days = 1 }
			}
		}
	}
	
	option = {
		name = "newfrontiers_disasters.necessary_actions"
		trigger = {
			owner = {
				OR = {
					has_authority = auth_hive_mind
					has_authority = auth_machine_intelligence
				}
			}
		}
		add_modifier = {
			modifier = "volcanic_activity"
			days = -1
		}
		add_deposit = d_active_volcano
		add_deposit = d_active_volcano
		if = {
			limit = { NOT = { has_planet_modifier = "pm_unstable_tectonics" } }
			add_modifier = {
				modifier = "unstable_tectonics"
				days = -1
			}
		}
		
		hidden_effect = {
			every_country = {
				limit = {
					AND = {
						is_country_type = default
						is_homicidal = no
						has_communications = prev.owner
					}
				}
				country_event = { id = newfrontiers_disasters.300 days = 1 }
			}
		}
	}
}

# Volcanic activity - Stage II
planet_event = {
	id = newfrontiers_disasters.22
	title = "newfrontiers_disasters.22.name"
	desc = "newfrontiers_disasters.22.desc"
	picture = GFX_evt_volcano
	show_sound = event_air_raid_siren
	
	is_triggered_only = yes
	
	immediate = {
		if = {
			limit = { has_modifier = "planet_bowels_control" }
			random_list = {
				15 = {
					modifier = {
						factor = 0.5
						has_modifier = "doomsday_cult"
					}
					modifier = {
						factor = 1.5
						num_buildings = { type = building_planetary_core_regulator value = 2 }
					}
					modifier = {
						factor = 2
						num_buildings = { type = building_planetary_core_regulator value = 3 }
					}
					modifier = {
						factor = 3
						num_buildings = { type = building_planetary_core_regulator value = 4 }
					}
					modifier = {
						factor = 4
						num_buildings = { type = building_planetary_core_regulator value = 5 }
					}
					modifier = {
						factor = 5
						num_buildings = { type = building_planetary_core_regulator value = 6 }
					}
					modifier = {
						factor = 6
						num_buildings = { type = building_planetary_core_regulator value > 6 }
					}
					planet_event = { id = newfrontiers_disasters.50 days = 10 }
				}
				85 = {
					planet_event = { id = newfrontiers_disasters.23 days = 730 random = 365 }
				}
			}
		}
		else = {
			planet_event = { id = newfrontiers_disasters.23 days = 730 random = 365 }
		}
		
		if = {
			limit = { has_modifier = "secret_disaster" }
			random_list = {
				20 = {
					planet_event = { id = newfrontiers_disasters.100 days = 5 } #Secret revealed
				}
				80 = {
					#Null
				}
			}
		}
		else = {
			random_list = {
				20 = {
					planet_event = { id = newfrontiers_disasters.200 days = 5 } #Ahead of the Apocalypse
				}
				80 = {
					#Null
				}
			}
		}
	}
	
	option = {
		name = WORRYING
		add_deposit = d_active_volcano
		add_deposit = d_active_volcano
		add_deposit = d_active_volcano
		if = {
			limit = { NOT = { has_planet_modifier = "pm_toxic_atmosphere" } }
			add_modifier = {
				modifier = "toxic_atmosphere"
				days = -1
			}
		}
	}
}

# Volcanic activity - Stage III
planet_event = {
	id = newfrontiers_disasters.23
	title = "newfrontiers_disasters.23.name"
	desc = "newfrontiers_disasters.23.desc"
	picture = GFX_evt_volcano
	show_sound = event_air_raid_siren
	
	is_triggered_only = yes
	
	immediate = {
		if = {
			limit = { has_modifier = "planet_bowels_control" }
			random_list = {
				15 = {
					modifier = {
						factor = 0.5
						has_modifier = "doomsday_cult"
					}
					modifier = {
						factor = 1.5
						num_buildings = { type = building_planetary_core_regulator value = 2 }
					}
					modifier = {
						factor = 2
						num_buildings = { type = building_planetary_core_regulator value = 3 }
					}
					modifier = {
						factor = 3
						num_buildings = { type = building_planetary_core_regulator value = 4 }
					}
					modifier = {
						factor = 4
						num_buildings = { type = building_planetary_core_regulator value = 5 }
					}
					modifier = {
						factor = 5
						num_buildings = { type = building_planetary_core_regulator value = 6 }
					}
					modifier = {
						factor = 6
						num_buildings = { type = building_planetary_core_regulator value > 6 }
					}
					planet_event = { id = newfrontiers_disasters.50 days = 10 }
				}
				85 = {
					random_list = {
						#Good End
						50 = { planet_event = { id = newfrontiers_disasters.24 days = 1825 random = 365 } } 
						#Bad End
						50 = {  
							if = {
								limit = {
									OR = {
										is_planet_class = pc_desert
										is_planet_class = pc_arid
										is_planet_class = pc_savannah
										is_planet_class = pc_nuked
										is_planet_class = pc_city
										is_planet_class = pc_relic
									}
								}
								planet_event = { id = newfrontiers_disasters.25 days = 1825 random = 365 }
							}
							if = {
								limit = {
									OR = {
										is_planet_class = pc_tropical
										is_planet_class = pc_ocean
										is_planet_class = pc_continental
										is_planet_class = pc_arctic
										is_planet_class = pc_alpine
										is_planet_class = pc_tundra
										is_planet_class = pc_gaia
										is_planet_class = pc_hive
									}
								}
								planet_event = { id = newfrontiers_disasters.26 days = 1825 random = 365 }
							}
						} 
					}
				}
			}
		}
		else = {
			random_list = {
				#Good End
				50 = { planet_event = { id = newfrontiers_disasters.24 days = 1825 random = 365 } } 
				#Bad End
				50 = {  
					if = {
						limit = {
							OR = {
								is_planet_class = pc_desert
								is_planet_class = pc_arid
								is_planet_class = pc_savannah
								is_planet_class = pc_nuked
								is_planet_class = pc_city
								is_planet_class = pc_relic
							}
						}
						planet_event = { id = newfrontiers_disasters.25 days = 1825 random = 365 }
					}
					if = {
						limit = {
							OR = {
								is_planet_class = pc_tropical
								is_planet_class = pc_ocean
								is_planet_class = pc_continental
								is_planet_class = pc_arctic
								is_planet_class = pc_alpine
								is_planet_class = pc_tundra
								is_planet_class = pc_gaia
								is_planet_class = pc_hive
							}
						}
						planet_event = { id = newfrontiers_disasters.26 days = 1825 random = 365 }
					}
				} 
			}
		}
		
		if = {
			limit = { has_modifier = "secret_disaster" }
			random_list = {
				50 = {
					planet_event = { id = newfrontiers_disasters.100 days = 5 } #Secret revealed
				}
				50 = {
					#Null
				}
			}
		}
		else = {
			random_list = {
				50 = {
					planet_event = { id = newfrontiers_disasters.200 days = 5 } #Ahead of the Apocalypse
				}
				50 = {
					#Null
				}
			}
		}
		
		if = {
			limit = { NOT = { has_planet_modifier = "pm_volcanic_world" } }
			change_pc = pc_nuked
			remove_subclass_modifiers = yes
			random_list = {
				50 = {
					set_planet_entity = {
						picture = pc_nf_volcanic
						entity = volcanic_planet_01_entity
					}
				}
				50 = {
					set_planet_entity = {
						picture = pc_nf_volcanic
						entity = volcanic_planet_02_entity
					}
				}
			}
			add_modifier = {
				modifier = "volcanic_world"
				days = -1
			}
			reroll_deposits = yes
		}
	}
	
	option = {
		name = TERRIBLE
		custom_tooltip = newfrontiers_disasters.volcanic_world.tooltip
	}
}

# Volcanic activity - Stage IV Good
planet_event = {
	id = newfrontiers_disasters.24
	title = "newfrontiers_disasters.24.name"
	desc = "newfrontiers_disasters.24.desc"
	picture = GFX_evt_news_room
	show_sound = event_mystic_reveal
	
	is_triggered_only = yes
	
	immediate = {
		remove_planet_flag = planetary_disaster
		remove_planet_flag = awakened_planet
		remove_planet_flag = colony_event
		
		if = {
			limit = { has_modifier = "apocalypse" }
			remove_modifier = "apocalypse"
		}
		if = {
			limit = { has_modifier = "secret_disaster" }
			remove_modifier = "secret_disaster"
		}
		if = {
			limit = { has_modifier = "volcanic_activity" }
			remove_modifier = "volcanic_activity"
		}
		if = {
			limit = { has_planet_modifier = "pm_unstable_tectonics" }
			remove_modifier = "unstable_tectonics"
		}
		if = {
			limit = { has_planet_modifier = "pm_toxic_atmosphere" }
			remove_modifier = "toxic_atmosphere"
		}
	}
	
	option = {
		name = REMARKABLE
		
		hidden_effect = {
			#Ark
			if = {
				limit = { exists = event_target:ark_empire }
				clear_global_event_target = dying_empire
				clear_global_event_target = ark_empire
			}
		}
	}
}

# Volcanic activity - Stage IV Bad 1
planet_event = {
	id = newfrontiers_disasters.25
	title = "newfrontiers_disasters.25.name"
	desc = {
		trigger = {
			owner = { has_country_flag = bastion_project }
		}
		text = "newfrontiers_disasters.25.desc.bastion"
	}
	desc = {
		trigger = {
			owner = { has_country_flag = ark_project }
		}
		text = "newfrontiers_disasters.25.desc.ark"
	}
	desc = {
		trigger = {
			AND = {
				owner = { num_owned_planets > 1 }
				is_homeworld = yes
			}
		}
		text = "newfrontiers_disasters.25.desc.lost_home"
	}
	desc = {
		trigger = {
			AND = {
				owner = { num_owned_planets > 1 }
				is_homeworld = no
			}
		}
		text = "newfrontiers_disasters.25.desc"
	}
	picture = GFX_evt_molten
	show_sound = event_air_raid_siren
	
	is_triggered_only = yes
	
	option = {
		name = CURSES
		custom_tooltip = newfrontiers_disasters.destroy_colony.tooltip
		hidden_effect = {
			#Ark
			if = {
				limit = { exists = event_target:ark_empire }
				event_target:ark_empire = { country_event = { id = newfrontiers_disasters.39 days = 1 } }
			}
			else = {
				limit = { 
					owner = {
						AND = {
							has_country_flag = ark_project
							NOT = { exists = event_target:ark_empire }
						}
					} 
				}
				create_ark_country = yes
				last_created_country = {
					set_player = event_target:dying_empire
				}
				clear_global_event_target = dying_empire
				clear_global_event_target = ark_empire
			}
			remove_global_flag = planetary_catastrophe
			remove_planet_flag = awakened_planet
			remove_planet_flag = colony_event
			destroy_colony = yes
			change_pc = pc_molten
			reset_planet = yes
		}
		add_modifier = {
			modifier = "lost_world"
			days = -1
		}
		set_deposit = d_society_5
	}
}

# Volcanic activity - Stage IV Bad 2
planet_event = {
	id = newfrontiers_disasters.26
	title = "newfrontiers_disasters.26.name"
	desc = {
		trigger = {
			owner = { has_country_flag = bastion_project }
		}
		text = "newfrontiers_disasters.26.desc.bastion"
	}
	desc = {
		trigger = {
			owner = { has_country_flag = ark_project }
		}
		text = "newfrontiers_disasters.26.desc.ark"
	}
	desc = {
		trigger = {
			AND = {
				owner = { num_owned_planets > 1 }
				is_homeworld = yes
			}
		}
		text = "newfrontiers_disasters.26.desc.lost_home"
	}
	desc = {
		trigger = {
			AND = {
				owner = { num_owned_planets > 1 }
				is_homeworld = no
			}
		}
		text = "newfrontiers_disasters.26.desc"
	}
	picture = GFX_evt_toxic_planet
	show_sound = event_air_raid_siren
	
	is_triggered_only = yes
	
	immediate = {
		remove_global_flag = planetary_catastrophe
		remove_planet_flag = awakened_planet
		remove_planet_flag = colony_event
		destroy_colony = yes
		change_pc = pc_toxic
		reset_planet = yes
	}
	
	option = {
		name = CURSES
		custom_tooltip = newfrontiers_disasters.destroy_colony.tooltip
		hidden_effect = {
			#Ark
			if = {
				limit = { exists = event_target:ark_empire }
				event_target:ark_empire = { country_event = { id = newfrontiers_disasters.39 days = 1 } }
			}
			else = {
				limit = { 
					owner = {
						AND = {
							has_country_flag = ark_project
							NOT = { exists = event_target:ark_empire }
						}
					} 
				}
				create_ark_country = yes
				last_created_country = {
					set_player = event_target:dying_empire
				}
				clear_global_event_target = dying_empire
				clear_global_event_target = ark_empire
			}
			remove_global_flag = planetary_catastrophe
			remove_planet_flag = awakened_planet
			remove_planet_flag = colony_event
			destroy_colony = yes
			change_pc = pc_toxic
			reset_planet = yes
		}
		add_modifier = {
			modifier = "lost_world"
			days = -1
		}
		set_deposit = d_society_5
	}
}


### Gamma-ray Burst ###

# Absolute extinction
planet_event = {
	id = newfrontiers_disasters.27
	title = "newfrontiers_disasters.27.name"
	desc = {
		trigger = {
			AND = {
				owner = { num_owned_planets = 1 }
				is_homeworld = yes
			}
		}
		text = "newfrontiers_disasters.27.desc.apocalypse"
	}
	desc = {
		trigger = {
			AND = {
				owner = { num_owned_planets > 1 }
				is_homeworld = yes
			}
		}
		text = "newfrontiers_disasters.27.desc.lost_home"
	}
	desc = {
		trigger = { is_ringworld = yes }
		text = "newfrontiers_disasters.27.desc.ringworld"
	}
	desc = {
		trigger = { is_planet_class = pc_habitat }
		text = "newfrontiers_disasters.27.desc.habitat"
	}
	desc = {
		trigger = {
			AND = {
				owner = { num_owned_planets > 1 }
				is_homeworld = no
			}
		}
		text = "newfrontiers_disasters.27.desc"
	}
	picture = GFX_evt_gamma_burst
	show_sound = event_air_raid_siren
	location = ROOT
	
	trigger = {
		planetary_catastrophe_is_possible = yes 
	}
	
	is_triggered_only = yes
	
	immediate = {
		destroy_colony = yes
		
		random_list = {
			50 = {
				if = {
					limit = {
						OR = {
							is_planet_class = pc_desert
							is_planet_class = pc_arid
							is_planet_class = pc_savannah
							is_planet_class = pc_tropical
							is_planet_class = pc_gaia
							is_planet_class = pc_nuked
						}
					}
					random_list = {
						50 = {
							if = {
								limit = { has_planet_modifier = "pm_dune_world" }
								change_pc = pc_desert
								remove_subclass_modifiers = yes
								set_planet_entity = {
									picture = pc_dune
									entity = dune_planet_01_entity
								}
								add_modifier = {
									modifier = "dune_world"
									days = -1
								}
								reroll_deposits = yes
							}
						}
						50 = {
							if = {
								limit = { has_planet_modifier = "pm_dust_world" }
								change_pc = pc_arid
								remove_subclass_modifiers = yes
								set_planet_entity = {
									picture = pc_dust
									entity = dust_planet_01_entity
								}
								add_modifier = {
									modifier = "dust_world"
									days = -1
								}
								reroll_deposits = yes
							}
						}
					}
				}
				else_if = {
					limit = {
						OR = {
							is_planet_class = pc_ocean
							is_planet_class = pc_continental
							is_planet_class = pc_arctic
							is_planet_class = pc_alpine
							is_planet_class = pc_tundra
						}
					}
					random_list = {
						34 = {
							if = {
								limit = { has_planet_modifier = "pm_glacial_world" }
								change_pc = pc_arctic
								remove_subclass_modifiers = yes
								set_planet_entity = {
									picture = pc_glacial
									entity = glacial_planet_01_entity
								}
								add_modifier = {
									modifier = "glacial_world"
									days = -1
								}
								reroll_deposits = yes
							}
						}
						33 = {
							if = {
								limit = { has_planet_modifier = "pm_tempest_world" }
								change_pc = pc_alpine
								remove_subclass_modifiers = yes
								set_planet_entity = {
									picture = pc_tempest
									entity = tempest_planet_01_entity
								}
								add_modifier = {
									modifier = "tempest_world"
									days = -1
								}
								reroll_deposits = yes
							}
						}
						33 = {
							if = {
								limit = { has_planet_modifier = "pm_cold_desert" }
								change_pc = pc_tundra
								remove_subclass_modifiers = yes
								set_planet_entity = {
									picture = pc_cold_desert
									entity = cold_desert_planet_01_entity
								}
								add_modifier = {
									modifier = "cold_desert"
									days = -1
								}
								reroll_deposits = yes
							}
						}
					}
				}
				else = {
					limit = {
						OR = {
							is_planet_class = pc_hive
							is_planet_class = pc_city
							is_planet_class = pc_relic
						}
					}
					if = {
						limit = { has_planet_modifier = "pm_industrial_graveyard" }
						change_pc = pc_arctic
						remove_subclass_modifiers = yes
						set_planet_entity = {
							picture = pc_graveyard
							entity = graveyard_planet_01_entity
						}
						add_modifier = {
							modifier = "industrial_graveyard"
							days = -1
						}
						reroll_deposits = yes
					}
				}
				set_deposit = d_society_5
			}
			50 = {
				if = {
					limit = {
						OR = {
							is_planet_class = pc_desert
							is_planet_class = pc_arid
							is_planet_class = pc_savannah
							is_planet_class = pc_tropical
							is_planet_class = pc_gaia
							is_planet_class = pc_nuked
							is_planet_class = pc_hive
							is_planet_class = pc_city
							is_planet_class = pc_relic
						}
					}
					change_pc = pc_barren
					reset_planet = yes
					set_deposit = d_society_5
				}
				else_if = {
					limit = {
						OR = {
							is_planet_class = pc_ocean
							is_planet_class = pc_continental
							is_planet_class = pc_arctic
							is_planet_class = pc_alpine
							is_planet_class = pc_tundra
						}
					}
					change_pc = pc_frozen
					reset_planet = yes
					set_deposit = d_society_5
				}
				else_if = {
					limit = { is_ringworld = yes }
					change_pc = pc_ringworld_habitable_damaged
					reset_planet = yes
					create_ambient_object = {
						type = "medium_debris_01_object"
						location = this
					}
					set_deposit = d_society_5
				}
				else = {
					limit = { is_planet_class = pc_habitat }
					create_ambient_object = {
						type = "abandoned_starbase_01_object"
						location = this
					}
					create_ambient_object = {
						type = "medium_debris_01_object"
						location = this
					}
					remove_planet = yes
				}
			}
		}
	}
	
	option = {
		name = CURSES
		custom_tooltip = newfrontiers_disasters.destroy_colony.tooltip
		add_modifier = {
			modifier = "lost_world"
			days = -1
		}
		
	}
}

# Partial extinction
planet_event = {
	id = newfrontiers_disasters.28
	title = "newfrontiers_disasters.28.name"
	desc = {
		trigger = {
			AND = {
				owner = { num_owned_planets = 1 }
				is_homeworld = yes
			}
		}
		text = "newfrontiers_disasters.28.desc.apocalypse"
	}
	desc = {
		trigger = {
			AND = {
				owner = { num_owned_planets > 1 }
				is_homeworld = yes
			}
		}
		text = "newfrontiers_disasters.28.desc.lost_home"
	}
	desc = {
		trigger = { is_ringworld = yes }
		text = "newfrontiers_disasters.28.desc.ringworld"
	}
	desc = {
		trigger = { is_planet_class = pc_habitat }
		text = "newfrontiers_disasters.28.desc.habitat"
	}
	desc = {
		trigger = {
			AND = {
				owner = { num_owned_planets > 1 }
				is_homeworld = no
			}
		}
		text = "newfrontiers_disasters.28.desc"
	}
	picture = GFX_evt_gamma_burst
	show_sound = event_air_raid_siren
	location = ROOT
	
	trigger = {
		planetary_catastrophe_is_possible = yes 
	}
	
	is_triggered_only = yes
	
	immediate = {
		every_owned_pop = {
			random_list = {
				80 = { kill_pop = yes }
				20 = { 
					# Pop survived
				}
			}
		}
		
		if = {
			limit = {
				OR = {
					is_planet_class = pc_desert
					is_planet_class = pc_arid
					is_planet_class = pc_savannah
					is_planet_class = pc_tropical
					is_planet_class = pc_gaia
					is_planet_class = pc_nuked
				}
			}
			random_list = {
				50 = {
					if = {
						limit = { has_planet_modifier = "pm_dune_world" }
						change_pc = pc_desert
						remove_subclass_modifiers = yes
						set_planet_entity = {
							picture = pc_dune
							entity = dune_planet_01_entity
						}
						add_modifier = {
							modifier = "dune_world"
							days = -1
						}
						reroll_deposits = yes
					}
				}
				50 = {
					if = {
						limit = { has_planet_modifier = "pm_dust_world" }
						change_pc = pc_arid
						remove_subclass_modifiers = yes
						set_planet_entity = {
							picture = pc_dust
							entity = dust_planet_01_entity
						}
						add_modifier = {
							modifier = "dust_world"
							days = -1
						}
						reroll_deposits = yes
					}
				}
			}
		}
		else_if = {
			limit = {
				OR = {
					is_planet_class = pc_ocean
					is_planet_class = pc_continental
					is_planet_class = pc_arctic
					is_planet_class = pc_alpine
					is_planet_class = pc_tundra
				}
			}
			random_list = {
				34 = {
					if = {
						limit = { has_planet_modifier = "pm_glacial_world" }
						change_pc = pc_arctic
						remove_subclass_modifiers = yes
						set_planet_entity = {
							picture = pc_glacial
							entity = glacial_planet_01_entity
						}
						add_modifier = {
							modifier = "glacial_world"
							days = -1
						}
						reroll_deposits = yes
					}
				}
				33 = {
					if = {
						limit = { has_planet_modifier = "pm_tempest_world" }
						change_pc = pc_alpine
						remove_subclass_modifiers = yes
						set_planet_entity = {
							picture = pc_tempest
							entity = tempest_planet_01_entity
						}
						add_modifier = {
							modifier = "tempest_world"
							days = -1
						}
						reroll_deposits = yes
					}
				}
				33 = {
					if = {
						limit = { has_planet_modifier = "pm_cold_desert" }
						change_pc = pc_tundra
						remove_subclass_modifiers = yes
						set_planet_entity = {
							picture = pc_cold_desert
							entity = cold_desert_planet_01_entity
						}
						add_modifier = {
							modifier = "cold_desert"
							days = -1
						}
						reroll_deposits = yes
					}
				}
			}
		}
		else = {
			limit = {
				OR = {
					is_planet_class = pc_hive
					is_planet_class = pc_city
					is_planet_class = pc_relic
				}
			}
			if = {
				limit = { has_planet_modifier = "pm_industrial_graveyard" }
				change_pc = pc_arctic
				remove_subclass_modifiers = yes
				set_planet_entity = {
					picture = pc_graveyard
					entity = graveyard_planet_01_entity
				}
				add_modifier = {
					modifier = "industrial_graveyard"
					days = -1
				}
				reroll_deposits = yes
			}
		}
	}
	
	option = {
		name = CURSES	
	}
}


### Space Crash ###
planet_event = {
	id = newfrontiers_disasters.29
	title = "newfrontiers_disasters.29.name"
	desc = {
		trigger = {
			AND = {
				owner = { num_owned_planets = 1 }
				is_homeworld = yes
				is_ringworld = yes
			}
		}
		text = "newfrontiers_disasters.29.desc.ringworld.apocalypse"
	}
	desc = {
		trigger = {
			AND = {
				owner = { num_owned_planets > 1 }
				is_homeworld = yes
				is_ringworld = yes
			}
		}
		text = "newfrontiers_disasters.29.desc.ringworld.lost_home"
	}
	desc = {
		trigger = {
			AND = {
				owner = { num_owned_planets > 1 }
				is_homeworld = no
				is_ringworld = yes
			}
		}
		text = "newfrontiers_disasters.29.desc.ringworld"
	}
	desc = {
		trigger = {
			AND = {
				owner = { num_owned_planets = 1 }
				is_homeworld = yes
				is_planet_class = pc_habitat
			}
		}
		text = "newfrontiers_disasters.29.desc.habitat.apocalypse"
	}
	desc = {
		trigger = {
			AND = {
				owner = { num_owned_planets > 1 }
				is_homeworld = yes
				is_planet_class = pc_habitat
			}
		}
		text = "newfrontiers_disasters.29.desc.habitat.lost_home"
	}
	desc = {
		trigger = {
			AND = {
				owner = { num_owned_planets > 1 }
				is_homeworld = no
				is_planet_class = pc_habitat
			}
		}
		text = "newfrontiers_disasters.29.desc.habitat"
	}
	picture = GFX_evt_large_explosion
	show_sound = event_air_raid_siren
	location = ROOT
	
	trigger = {
		planetary_catastrophe_is_possible = yes 
	}
	
	is_triggered_only = yes
	
	immediate = {
		destroy_colony = yes
		
		if = {
			limit = { is_ringworld = yes }
			change_pc = pc_ringworld_habitable_damaged
			reset_planet = yes
			create_ambient_object = {
				type = "large_debris_object"
				location = this
			}
			set_deposit = d_society_5
		}
		else = {
			limit = { is_planet_class = pc_habitat }
			create_ambient_object = {
				type = "abandoned_starbase_01_object"
				location = this
			}
			create_ambient_object = {
				type = "medium_debris_01_object"
				location = this
			}
			remove_planet = yes
		}
	}
	
	option = {
		name = TERRIBLE
		custom_tooltip = newfrontiers_disasters.destroy_colony.tooltip
		add_modifier = {
			modifier = "lost_world"
			days = -1
		}
	}
}


### Star Disaster ###

# Star evolution - Beginning
planet_event = {
	id = newfrontiers_disasters.30
	hide_window = yes
	
	trigger = {
		star_catastrophe_is_possible = yes
	}
	
	is_triggered_only = yes
	
	immediate = {
		solar_system = { set_star_flag = star_disaster }
		save_event_target_as = evolved_star
		random_list = {
			25 = { 
				planet_event = { id = newfrontiers_disasters.31 days = 1825 random = 100 } # 5 Years
				set_planet_flag = evolved_star_5
			}
			25 = {
				planet_event = { id = newfrontiers_disasters.31 days = 3650 random = 200 } # 10 Years
				set_planet_flag = evolved_star_10
			}
			25 = {
				planet_event = { id = newfrontiers_disasters.31 days = 10950 random = 300 } # 30 Years
				set_planet_flag = evolved_star_30
			}
			25 = {
				planet_event = { id = newfrontiers_disasters.31 days = 18250 random = 500 } # 50 Years
				set_planet_flag = evolved_star_50
			}
			25 = {
				planet_event = { id = newfrontiers_disasters.31 days = 36500 random = 1000 } # 100 Years
				set_planet_flag = evolved_star_100
			}
		}
		if = {
			limit = { exists = space_owner }
			space_owner = {
				country_event = { id = newfrontiers_disasters.32}
			}
		}
	}
}

# Star evolution 1
planet_event = {
	id = newfrontiers_disasters.31
	hide_window = yes
	
	trigger = {
		solar_system = {
			NOT = { has_star_flag = dyson_sphere_built }
		}
	}
	
	is_triggered_only = yes
	
	immediate = {
		random_list = {
			15 = {
				modifier = {
					factor = 0
					solar_system = { starbase = { NOT = { has_starbase_module = stellar_reducer } } }
				}
				modifier = {
					factor = 0.5
					solar_system = { any_system_planet = { has_modifier = "doomsday_cult" } }
				}
				modifier = {
					factor = 2
					solar_system = { starbase = { count_starbase_modules = { type = stellar_reducer count = 1 } } }
				}
				modifier = {
					factor = 3
					solar_system = { starbase = { count_starbase_modules = { type = stellar_reducer count = 2 } } }
				}
				modifier = {
					factor = 4
					solar_system = { starbase = { count_starbase_modules = { type = stellar_reducer count = 3 } } }
				}
				modifier = {
					factor = 5
					solar_system = { starbase = { count_starbase_modules = { type = stellar_reducer count > 3 } } }
				}
				space_owner = { country_event = { id = newfrontiers_disasters.51 days = 10 } }
			}
			85 = {
				stellar_evolution_effect = yes
				reset_planet = yes
				if = {
					limit = { is_regular_star = yes }
					solar_system = {
						every_system_planet = {
							limit = { has_planet_flag = hot_zone }
							switch = {
								trigger = is_planet_class
								pc_gas_giant = { 
									change_pc = pc_molten
									reset_planet = yes
									add_modifier = {
										modifier = "chthonian_planet"
										days = -1
									}
								}
								pc_barren = { 
									change_pc = pc_molten 
									reset_planet = yes
								}
								pc_barren_cold = { 
									change_pc = pc_barren 
									reset_planet = yes
								}
								pc_toxic = { 
									change_pc = pc_molten 
									reset_planet = yes
								}
							}
							if = {
								limit = { has_owner = yes }
								if = { 
									limit = { has_planet_flag = has_shelter_project_hot }
									planet_event = { id = newfrontiers_disasters.40 days = 3}
								}
								else = {
									planet_event = { id = newfrontiers_disasters.33 days = 3}
								}
							}
							if = {
								limit = { 
									is_colonizable = yes
									has_owner = no
								}
								change_pc = pc_molten
								reset_planet = yes
							}
						}
						every_system_planet = {
							limit = {
								is_ringworld = no
								NOT = {	is_planet_class = pc_habitat }
								has_owner = yes 
							}
							if = {
								limit = { is_extremaly_hot = yes }
								if = { 
									limit = { has_planet_flag = has_shelter_project_hot }
									planet_event = { id = newfrontiers_disasters.40 days = 3}
								}
								else = {
									planet_event = { id = newfrontiers_disasters.33 days = 3}
								}
							}
							else = {
								planet_event = { id = newfrontiers_disasters.35 days = 3}
							}
						}
						every_system_planet = {
							limit = {
								is_colonizable = yes
								is_ringworld = no
								NOT = {	is_planet_class = pc_habitat }
								has_owner = no 
							}
							planet_strong_heating_effect = yes
						}
						every_system_planet = {
							limit = { is_planet_class = pc_ringworld_habitable }
							change_pc = pc_ringworld_habitable_damaged
							reset_planet = yes
							create_ambient_object = {
								type = "large_debris_object"
								location = this
							}
							add_modifier = {
								modifier = "lost_world"
								days = -1
							}
							space_owner = {
								country_event = { id = newfrontiers_disasters.38}
							}
						}
					}
				}
				else = {
					limit = { is_giant_star = yes }
					solar_system = {
						every_system_planet = {
							limit = { 
								has_planet_flag = hot_zone 
								has_owner = no
							}
							remove_planet = yes
						}
						every_system_planet = {
							limit = { 
								has_planet_flag = hot_zone
								has_owner = yes
							}
							planet_event = { id = newfrontiers_disasters.34 days = 3}
						}
						every_system_planet = {
							switch = {
								trigger = is_planet_class
								pc_barren = { 
									change_pc = pc_molten
									reset_planet = yes
								}
								pc_barren_cold = { 
									change_pc = pc_barren 
									reset_planet = yes
								}
								pc_toxic = { 
									change_pc = pc_molten 
									reset_planet = yes
								}
							}
						}
						every_system_planet = {
							limit = {
								is_ringworld = no
								NOT = {	is_planet_class = pc_habitat }
								has_owner = yes 
							}
							planet_event = { id = newfrontiers_disasters.36 days = 3}
						}
						every_system_planet = {
							limit = {
								is_colonizable = yes
								is_ringworld = no
								NOT = {	is_planet_class = pc_habitat }
								has_owner = no 
							}
							random_list = {
								50 = {
									change_pc = pc_molten
									reset_planet = yes
								}
								50 = {
									change_pc = pc_barren
									reset_planet = yes
								}
							}
						}
						every_system_planet = {
							limit = { is_planet_class = pc_ringworld_habitable }
							change_pc = pc_ringworld_habitable_damaged
							reset_planet = yes
							add_modifier = {
								modifier = "lost_world"
								days = -1
							}
							space_owner = {
								country_event = { id = newfrontiers_disasters.38}
							}
						}
					}
				}
			}
		}
		
		solar_system = { remove_star_flag = star_disaster }
	}
}

# Evolved Star Message
country_event = {
	id = newfrontiers_disasters.32
	title = "newfrontiers_disasters.32.name"
	desc = "newfrontiers_disasters.32.desc"
	picture = GFX_evt_star_yellow
	show_sound = event_mystic_reveal
	location = event_target:evolved_star

	is_triggered_only = yes
	
	trigger = {
		NOT = { has_country_flag = star_disaster_happens }
	}
	
	immediate = {
		set_country_flag = star_disaster_happens
	}

	option = {
		name = INTERESTING
		event_target:evolved_star = {
			enable_special_project = {
				name = "EVOLVED_STAR_PROJECT"
				location = this
				owner = root
			}
		}
	}
}

# Evolved Star 3 (In Colony - Molten planet)
planet_event = {
	id = newfrontiers_disasters.33
	title = "newfrontiers_disasters.33.name"
	desc = {
		trigger = {
			owner = { has_country_flag = ark_project }
		}
		text = "newfrontiers_disasters.33.desc.ark"
	}
	desc = {
		trigger = {
			owner = { NOT = { has_country_flag = ark_project } }
		}
		text = "newfrontiers_disasters.33.desc"
	}
	picture = GFX_evt_molten
	show_sound = event_air_raid_siren
	location = ROOT
	
	is_triggered_only = yes
	
	immediate = {
	}
	
	option = {
		name = TERRIBLE
		custom_tooltip = newfrontiers_disasters.destroy_colony.tooltip
		hidden_effect = {
			#Ark
			if = {
				limit = { exists = event_target:ark_empire }
				event_target:ark_empire = { country_event = { id = newfrontiers_disasters.39 days = 1 } }
			}
			else = {
				limit = { 
					owner = {
						AND = {
							has_country_flag = ark_project
							NOT = { exists = event_target:ark_empire }
						}
					} 
				}
				create_ark_country = yes
				last_created_country = {
					set_player = event_target:dying_empire
				}
				clear_global_event_target = dying_empire
				clear_global_event_target = ark_empire
			}
			random_list = {
				60 = { change_pc = pc_molten }
				40 = {
					change_pc = pc_barren
					set_planet_entity = {
						picture = pc_scorched
						entity = scorched_planet_01_entity
					}
					add_modifier = {
						modifier = "scorched_world"
						days = -1
					}
				}
			}
			destroy_colony = yes
			reset_planet = yes
		}
		add_modifier = {
			modifier = "lost_world"
			days = -1
		}
		add_deposit = d_society_5
	}
}

# Evolved Star 3 (In Colony - Swallowed planet)
planet_event = {
	id = newfrontiers_disasters.34
	title = "newfrontiers_disasters.34.name"
	desc = {
		trigger = {
			owner = { has_country_flag = ark_project }
		}
		text = "newfrontiers_disasters.34.desc.ark"
	}
	desc = {
		trigger = {
			owner = { NOT = { has_country_flag = ark_project } }
		}
		text = "newfrontiers_disasters.34.desc"
	}
	picture = GFX_evt_star_yellow
	show_sound = event_air_raid_siren
	location = ROOT
	
	is_triggered_only = yes
	
	immediate = {
	}
	
	option = {
		name = TERRIBLE
		custom_tooltip = newfrontiers_disasters.destroy_planet.tooltip
		hidden_effect = {
			#Ark
			if = {
				limit = { exists = event_target:ark_empire }
				event_target:ark_empire = { country_event = { id = newfrontiers_disasters.39 days = 1 } }
			}
			else = {
				limit = { 
					owner = {
						AND = {
							has_country_flag = ark_project
							NOT = { exists = event_target:ark_empire }
						}
					} 
				}
				create_ark_country = yes
				last_created_country = {
					set_player = event_target:dying_empire
				}
				clear_global_event_target = dying_empire
				clear_global_event_target = ark_empire
			}
			remove_planet = yes
		}
	}
}

# Evolved Star 4 (In Colony - Strong planet heating)
planet_event = {
	id = newfrontiers_disasters.35
	title = "newfrontiers_disasters.35.name"
	desc = {
		trigger = {
			owner = { has_country_flag = ark_project }
		}
		text = "newfrontiers_disasters.35.desc.ark"
	}
	desc = {
		trigger = {
			owner = { NOT = { has_country_flag = ark_project } }
		}
		text = "newfrontiers_disasters.35.desc"
	}
	picture = GFX_evt_scorched_world
	show_sound = event_air_raid_siren
	location = ROOT
	
	is_triggered_only = yes
	
	immediate = {
	}
	
	option = {
		name = TERRIBLE
		custom_tooltip = newfrontiers_disasters.35.tooltip
		hidden_effect = {
			#Ark
			if = {
				limit = { exists = event_target:ark_empire }
				event_target:ark_empire = { country_event = { id = newfrontiers_disasters.39 days = 1 } }
			}
			else = {
				limit = { 
					owner = {
						AND = {
							has_country_flag = ark_project
							NOT = { exists = event_target:ark_empire }
						}
					} 
				}
				create_ark_country = yes
				last_created_country = {
					set_player = event_target:dying_empire
				}
				clear_global_event_target = dying_empire
				clear_global_event_target = ark_empire
			}
			planet_strong_heating_effect = yes
		}
	}
}

# Evolved Star 4 (In Colony - Molten planet)
planet_event = {
	id = newfrontiers_disasters.36
	title = "newfrontiers_disasters.36.name"
	desc = {
		trigger = {
			owner = { has_country_flag = ark_project }
		}
		text = "newfrontiers_disasters.36.desc.ark"
	}
	desc = {
		trigger = {
			owner = { NOT = { has_country_flag = ark_project } }
		}
		text = "newfrontiers_disasters.36.desc"
	}
	picture = GFX_evt_molten
	show_sound = event_air_raid_siren
	location = ROOT
	
	is_triggered_only = yes
	
	immediate = {
	}
	
	option = {
		name = TERRIBLE
		custom_tooltip = newfrontiers_disasters.destroy_colony.tooltip
		hidden_effect = {
			#Ark
			if = {
				limit = { exists = event_target:ark_empire }
				event_target:ark_empire = { country_event = { id = newfrontiers_disasters.39 days = 1 } }
			}
			else = {
				limit = { 
					owner = {
						AND = {
							has_country_flag = ark_project
							NOT = { exists = event_target:ark_empire }
						}
					} 
				}
				create_ark_country = yes
				last_created_country = {
					set_player = event_target:dying_empire
				}
				clear_global_event_target = dying_empire
				clear_global_event_target = ark_empire
			}
			random_list = {
				60 = { change_pc = pc_molten }
				40 = {
					change_pc = pc_barren
					set_planet_entity = {
						picture = pc_scorched
						entity = scorched_planet_01_entity
					}
					add_modifier = {
						modifier = "scorched_world"
						days = -1
					}
				}
			}
			destroy_colony = yes
			reset_planet = yes
		}
		add_modifier = {
			modifier = "lost_world"
			days = -1
		}
		add_deposit = d_society_5
	}
}

# Special Project Completed
country_event = {
	id = newfrontiers_disasters.37
	title = "PROJECT_COMPLETE"
	desc = {
		trigger = { event_target:evolved_star = { has_planet_flag = evolved_star_5 } }
		text = "newfrontiers_disasters.37.desc.5_yers"
	}
	desc = {
		trigger = { event_target:evolved_star = { has_planet_flag = evolved_star_10 } }
		text = "newfrontiers_disasters.37.desc.10_yers"
	}
	desc = {
		trigger = { event_target:evolved_star = { has_planet_flag = evolved_star_30 } }
		text = "newfrontiers_disasters.37.desc.30_yers"
	}
	desc = {
		trigger = { event_target:evolved_star = { has_planet_flag = evolved_star_50 } }
		text = "newfrontiers_disasters.37.desc.50_yers"
	}
	desc = {
		trigger = { event_target:evolved_star = { has_planet_flag = evolved_star_100 } }
		text = "newfrontiers_disasters.37.desc.100_yers"
	}
	picture = GFX_evt_star_yellow
	show_sound = event_mystic_reveal

	is_triggered_only = yes
	
	trigger = {
		has_country_flag = star_disaster_happens
	}
	
	immediate = {
		every_owned_planet = {
			limit = { solar_system = { has_star_flag = star_disaster } }
			set_planet_flag = disaster_planet
			save_event_target_as = disaster_planet
		}
	}
	
	option = {
		name = "newfrontiers_disasters.keep_secret"
		trigger = {
			NOR = {
				has_authority = auth_hive_mind
				has_authority = auth_machine_intelligence
			}
		}
		
		every_owned_planet = {
			limit = { has_planet_flag = disaster_planet }
			add_modifier = {
				modifier = "secret_disaster"
				days = -1
			}
			
			hidden_effect = {
				random_list = {
					20 = {
						planet_event = { id = newfrontiers_disasters.100 days = 5 } #Secret revealed
					}
					80 = {
						#Null
					}
				}
			}
		}
	}
	
	option = {
		name = "newfrontiers_disasters.warn_settlements"
		trigger = {
			NOR = {
				has_authority = auth_hive_mind
				has_authority = auth_machine_intelligence
			}
		}
		hidden_effect = {
			every_owned_planet = {
				limit = { has_planet_flag = disaster_planet }
				if = {
					limit = {
						is_extremaly_hot = yes
						has_planet_flag = hot_zone
						is_planet_class = pc_ringworld_habitable
						owner = { num_owned_planets = 1 }
						is_homeworld = yes
					}
					add_modifier = {
						modifier = "apocalypse"
						days = -1
					}
				}
				if = {
					limit = { NOT = { is_planet_class = pc_habitat } }
					add_modifier = {
						modifier = "star_evolution"
						days = -1
					}
				}
				
				random_list = {
					20 = {
						planet_event = { id = newfrontiers_disasters.200 days = 5 } #Ahead of the Apocalypse
					}
					80 = {
						#Null
					}
				}
			}
			
			every_country = {
				limit = {
					AND = {
						is_country_type = default
						is_homicidal = no
						has_communications = prev.owner
					}
				}
				country_event = { id = newfrontiers_disasters.300 days = 1 }
			}
		}
	}
	
	option = {
		name = "newfrontiers_disasters.necessary_actions"
		trigger = {
			OR = {
				has_authority = auth_hive_mind
				has_authority = auth_machine_intelligence
			}
		}
		add_modifier = {
			modifier = "star_evolution"
			days = 1825
		}
		
		hidden_effect = {
			every_country = {
				limit = {
					AND = {
						is_country_type = default
						is_homicidal = no
						has_communications = prev.owner
					}
				}
				country_event = { id = newfrontiers_disasters.300 days = 1 }
			}
		}
	}
}

# Destruction Ring World Message
country_event = {
	id = newfrontiers_disasters.38
	title = "newfrontiers_disasters.38.name"
	desc = "newfrontiers_disasters.38.desc"
	picture = GFX_evt_ruined_system
	show_sound = event_air_raid_siren
	location = event_target:evolved_star
	
	is_triggered_only = yes

	option = {
		name = TERRIBLE
	}
}

# Ark notification
country_event = {
	id = newfrontiers_disasters.39
	title = "newfrontiers_disasters.39.name"
	desc = "newfrontiers_disasters.39.desc"
	picture = GFX_evt_alien_propaganda
	show_sound = event_mystic_reveal
	location = root

	is_triggered_only = yes
	
	immediate = {
		if = {
			limit = { event_target:ark_empire = { num_owned_planets > 0 } }
			clear_global_event_target = ark_empire
		}
	}

	option = {
		name = TERRIBLE
	}
}

# Shelter Hot Open
planet_event = {
	id = newfrontiers_disasters.40
	title = "newfrontiers_disasters.40.name"
	desc = "newfrontiers_disasters.40.desc"
	picture = GFX_evt_underground_world
	show_sound = event_construction
	location = ROOT
	
	is_triggered_only = yes
	
	immediate = {
	}
	
	option = {
		name = TERRIBLE
		custom_tooltip = newfrontiers_disasters.40.tooltip
		hidden_effect = {
			#Ark
			if = {
				limit = { exists = event_target:ark_empire }
				event_target:ark_empire = { country_event = { id = newfrontiers_disasters.39 days = 1 } }
			}
			else = {
				limit = { 
					owner = {
						AND = {
							has_country_flag = ark_project
							NOT = { exists = event_target:ark_empire }
						}
					} 
				}
				create_ark_country = yes
				last_created_country = {
					set_player = event_target:dying_empire
				}
				clear_global_event_target = dying_empire
				clear_global_event_target = ark_empire
			}

			change_pc = pc_desert
			set_planet_entity = {
				picture = pc_underground
				entity = scorched_planet_01_entity
			}
			add_modifier = {
				modifier = "underground_world"
				days = -1
			}
			
			reset_planet = yes
			remove_planet_flag = has_shelter_project_hot
		}
	}
}

# Shelter Cold Open
planet_event = {
	id = newfrontiers_disasters.41
	title = "newfrontiers_disasters.41.name"
	desc = "newfrontiers_disasters.41.desc"
	picture = GFX_evt_ice_world
	show_sound = event_construction
	location = ROOT
	
	is_triggered_only = yes
	
	immediate = {
	}
	
	option = {
		name = TERRIBLE
		custom_tooltip = newfrontiers_disasters.41.tooltip
		hidden_effect = {
			#Ark
			if = {
				limit = { exists = event_target:ark_empire }
				event_target:ark_empire = { country_event = { id = newfrontiers_disasters.39 days = 1 } }
			}
			else = {
				limit = { 
					owner = {
						AND = {
							has_country_flag = ark_project
							NOT = { exists = event_target:ark_empire }
						}
					} 
				}
				create_ark_country = yes
				last_created_country = {
					set_player = event_target:dying_empire
				}
				clear_global_event_target = dying_empire
				clear_global_event_target = ark_empire
			}

			change_pc = pc_arctic
			set_planet_entity = {
				picture = pc_ice
				entity = frozen_ocean_planet_01_entity
			}
			add_modifier = {
				modifier = "ice_world"
				days = -1
			}
			
			reset_planet = yes
			remove_planet_flag = has_shelter_project_cold
		}
	}
}

#Orbit Stabilizer build
planet_event = {
	id = newfrontiers_disasters.42
	hide_window = yes
	
	trigger = {
		OR = {
			has_planet_flag = moon_collision
			has_planet_flag = moon_falling
			has_planet_flag = orbit_reduction
			has_planet_flag = orbit_increase
		}
		has_building = building_orbit_stabilizer
		num_buildings = { type = building_orbit_stabilizer value = 1 }
	}
	
	is_triggered_only = yes
	
	immediate = {
		add_modifier = {
			modifier = "orbit_stabilization"
			days = -1
		}
	}
}

#Orbit Stabilizer destroyed
planet_event = {
	id = newfrontiers_disasters.43
	hide_window = yes
	
	trigger = {
		OR = {
			has_planet_flag = moon_collision
			has_planet_flag = moon_falling
			has_planet_flag = orbit_reduction
			has_planet_flag = orbit_increase
		}
		has_modifier = orbit_stabilization
		NOT = { has_building = building_orbit_stabilizer }
	}
	
	is_triggered_only = yes
	
	immediate = {
		remove_modifier = "orbit_stabilization"
	}
}

#Planetary Core Regulator build
planet_event = {
	id = newfrontiers_disasters.44
	hide_window = yes
	
	trigger = {
		has_planet_flag = awakened_planet
		has_building = building_planetary_core_regulator
		num_buildings = { type = building_planetary_core_regulator value = 1 }
	}
	
	is_triggered_only = yes
	
	immediate = {
		add_modifier = {
			modifier = "planet_bowels_control"
			days = -1
		}
	}
}

#Planetary Core Regulator destroyed
planet_event = {
	id = newfrontiers_disasters.45
	hide_window = yes
	
	trigger = {
		has_planet_flag = awakened_planet
		has_modifier = planet_bowels_control
		NOT = { has_building = building_planetary_core_regulator }
	}
	
	is_triggered_only = yes
	
	immediate = {
		remove_modifier = "planet_bowels_control"
	}
}

# Orbit Stabilize complite 1
planet_event = {
	id = newfrontiers_disasters.46
	title = "newfrontiers_disasters.46.name"
	desc = "newfrontiers_disasters.46.desc"
	picture = GFX_evt_observatory
	show_sound = event_construction
	location = root

	is_triggered_only = yes
	
	immediate = {
		remove_modifier = "orbit_stabilization"
		
		remove_planet_flag = planetary_disaster
		remove_planet_flag = moon_collision
		remove_planet_flag = colony_event
		
		if = {
			limit = { has_modifier = "apocalypse" }
			remove_modifier = "apocalypse"
		}
		if = {
			limit = { has_modifier = "secret_disaster" }
			remove_modifier = "secret_disaster"
		}
		if = {
			limit = { has_modifier = "moon_collision" }
			remove_modifier = "moon_collision"
		}
	}

	option = {
		name = EXCELLENT
		
		hidden_effect = {
			#Ark
			if = {
				limit = { exists = event_target:ark_empire }
				clear_global_event_target = dying_empire
				clear_global_event_target = ark_empire
			}
		}
	}
}

# Orbit Stabilize complite 2
planet_event = {
	id = newfrontiers_disasters.47
	title = "newfrontiers_disasters.47.name"
	desc = "newfrontiers_disasters.47.desc"
	picture = GFX_evt_observatory
	show_sound = event_construction
	location = root

	is_triggered_only = yes
	
	immediate = {
		remove_modifier = "orbit_stabilization"
		
		remove_planet_flag = planetary_disaster
		remove_planet_flag = moon_falling
		remove_planet_flag = colony_event
		
		if = {
			limit = { has_modifier = "apocalypse" }
			remove_modifier = "apocalypse"
		}
		if = {
			limit = { has_modifier = "secret_disaster" }
			remove_modifier = "secret_disaster"
		}
		if = {
			limit = { has_modifier = "moon_fall" }
			remove_modifier = "moon_fall"
		}
	}

	option = {
		name = EXCELLENT
		
		hidden_effect = {
			#Ark
			if = {
				limit = { exists = event_target:ark_empire }
				clear_global_event_target = dying_empire
				clear_global_event_target = ark_empire
			}
		}
	}
}

# Orbit Stabilize complite 3
planet_event = {
	id = newfrontiers_disasters.48
	title = "newfrontiers_disasters.48.name"
	desc = "newfrontiers_disasters.48.desc"
	picture = GFX_evt_observatory
	show_sound = event_construction
	location = root

	is_triggered_only = yes
	
	immediate = {
		remove_modifier = "orbit_stabilization"
		
		remove_planet_flag = planetary_disaster
		remove_planet_flag = orbit_reduction
		remove_planet_flag = colony_event
		
		if = {
			limit = { has_modifier = "apocalypse" }
			remove_modifier = "apocalypse"
		}
		if = {
			limit = { has_modifier = "secret_disaster" }
			remove_modifier = "secret_disaster"
		}
		if = {
			limit = { has_modifier = "orbit_reduction" }
			remove_modifier = "orbit_reduction"
		}
	}

	option = {
		name = EXCELLENT
		
		hidden_effect = {
			#Ark
			if = {
				limit = { exists = event_target:ark_empire }
				clear_global_event_target = dying_empire
				clear_global_event_target = ark_empire
			}
		}
	}
}

# Orbit Stabilize complite 4
planet_event = {
	id = newfrontiers_disasters.49
	title = "newfrontiers_disasters.49.name"
	desc = "newfrontiers_disasters.49.desc"
	picture = GFX_evt_observatory
	show_sound = event_construction
	location = root

	is_triggered_only = yes
	
	immediate = {
		remove_modifier = "orbit_stabilization"
		
		remove_planet_flag = planetary_disaster
		remove_planet_flag = orbit_increase
		remove_planet_flag = colony_event
		
		if = {
			limit = { has_modifier = "apocalypse" }
			remove_modifier = "apocalypse"
		}
		if = {
			limit = { has_modifier = "secret_disaster" }
			remove_modifier = "secret_disaster"
		}
		if = {
			limit = { has_modifier = "orbit_increase" }
			remove_modifier = "orbit_increase"
		}
	}

	option = {
		name = EXCELLENT
		
		hidden_effect = {
			#Ark
			if = {
				limit = { exists = event_target:ark_empire }
				clear_global_event_target = dying_empire
				clear_global_event_target = ark_empire
			}
		}
	}
}

# Planet Bowels Control complite
planet_event = {
	id = newfrontiers_disasters.50
	title = "newfrontiers_disasters.50.name"
	desc = "newfrontiers_disasters.50.desc"
	picture = GFX_evt_igneous_mining
	show_sound = event_construction
	location = root

	is_triggered_only = yes
	
	immediate = {
		remove_modifier = "planet_bowels_control"
		
		remove_planet_flag = planetary_disaster
		remove_planet_flag = orbit_increase
		remove_planet_flag = colony_event
		
		if = {
			limit = { has_modifier = "apocalypse" }
			remove_modifier = "apocalypse"
		}
		if = {
			limit = { has_modifier = "secret_disaster" }
			remove_modifier = "secret_disaster"
		}
		if = {
			limit = { has_modifier = "orbit_increase" }
			remove_modifier = "orbit_increase"
		}
	}

	option = {
		name = EXCELLENT
		
		hidden_effect = {
			#Ark
			if = {
				limit = { exists = event_target:ark_empire }
				clear_global_event_target = dying_empire
				clear_global_event_target = ark_empire
			}
		}
	}
}

# Slow down stellar evolution complite
country_event = {
	id = newfrontiers_disasters.51
	title = "newfrontiers_disasters.51.name"
	desc = "newfrontiers_disasters.51.desc"
	picture = GFX_evt_star_yellow
	show_sound = event_construction
	location = from

	is_triggered_only = yes
	
	immediate = {
		every_owned_planet = {
			if = {
				limit = { has_modifier = "apocalypse" }
				remove_modifier = "apocalypse"
			}
			if = {
				limit = { has_modifier = "secret_disaster" }
				remove_modifier = "secret_disaster"
			}
			if = {
				limit = { has_modifier = "star_evolution" }
				remove_modifier = "star_evolution"
			}
		}
	}

	option = {
		name = EXCELLENT
		
		hidden_effect = {
			#Ark
			if = {
				limit = { exists = event_target:ark_empire }
				clear_global_event_target = dying_empire
				clear_global_event_target = ark_empire
			}
		}
	}
}


# Gatekeeper - Secret revealed
planet_event = {
	id = newfrontiers_disasters.100
	hide_window = yes
	is_triggered_only = yes
	
	immediate = {
		if = {
			limit = { has_planet_flag = moon_collision }
			planet_event = { id = newfrontiers_disasters.101 days = 30 random = 90 }
		}
		if = {
			limit = { has_planet_flag = moon_falling }
			planet_event = { id = newfrontiers_disasters.102 days = 30 random = 90 }
		}
		if = {
			limit = { has_planet_flag = orbit_reduction }
			planet_event = { id = newfrontiers_disasters.103 days = 30 random = 90 }
		}
		if = {
			limit = { has_planet_flag = orbit_increase }
			planet_event = { id = newfrontiers_disasters.104 days = 30 random = 90 }
		}
		if = {
			limit = { has_planet_flag = awakened_planet }
			planet_event = { id = newfrontiers_disasters.105 days = 30 random = 90 }
		}
		if = {
			limit = { solar_system = { has_star_flag = star_disaster } }
			planet_event = { id = newfrontiers_disasters.106 days = 100 random = 1800 }
		}
	}
}

# Secret revealed - oon ollision
planet_event = {
	id = newfrontiers_disasters.101
	title = "newfrontiers_disasters.101.name"
	desc = "newfrontiers_disasters.101.desc"
	picture = GFX_evt_metropolis
	show_sound = event_planetary_riot
	
	is_triggered_only = yes
	
	immediate = {
		planet_event = { id = newfrontiers_disasters.200 days = 5 } #Ahead of the Apocalypse
	}
	
	option = {
		name = WORRYING
		if = {
			limit = {
				owner = { num_owned_planets = 1 }
				is_homeworld = yes
			}
			add_modifier = {
				modifier = "apocalypse"
				days = -1
			}
		}
		else = {
			add_modifier = {
				modifier = "moon_collision"
				days = -1
			}
		}
		
		hidden_effect = {
			every_country = {
				limit = {
					AND = {
						is_country_type = default
						is_homicidal = no
						has_communications = prev.owner
					}
				}
				country_event = { id = newfrontiers_disasters.300 days = 1 }
			}
		}
	}
}

# Secret revealed - oon falling
planet_event = {
	id = newfrontiers_disasters.102
	title = "newfrontiers_disasters.102.name"
	desc = "newfrontiers_disasters.102.desc"
	picture = GFX_evt_metropolis
	show_sound = event_planetary_riot
	
	is_triggered_only = yes
	
	immediate = {
		planet_event = { id = newfrontiers_disasters.200 days = 5 } #Ahead of the Apocalypse
	}
	
	option = {
		name = WORRYING
		if = {
			limit = {
				owner = { num_owned_planets = 1 }
				is_homeworld = yes
			}
			add_modifier = {
				modifier = "apocalypse"
				days = -1
			}
		}
		else = {
			add_modifier = {
				modifier = "moon_fall"
				days = -1
			}
		}
		
		hidden_effect = {
			every_country = {
				limit = {
					AND = {
						is_country_type = default
						is_homicidal = no
						has_communications = prev.owner
					}
				}
				country_event = { id = newfrontiers_disasters.300 days = 1 }
			}
		}
	}
}

# Secret revealed - Orbit reduction
planet_event = {
	id = newfrontiers_disasters.103
	title = "newfrontiers_disasters.103.name"
	desc = "newfrontiers_disasters.103.desc"
	picture = GFX_evt_metropolis
	show_sound = event_planetary_riot
	
	is_triggered_only = yes
	
	immediate = {
		planet_event = { id = newfrontiers_disasters.200 days = 5 } #Ahead of the Apocalypse
	}
	
	option = {
		name = WORRYING
		if = {
			limit = {
				owner = { num_owned_planets = 1 }
				is_homeworld = yes
			}
			add_modifier = {
				modifier = "apocalypse"
				days = -1
			}
		}
		else = {
			add_modifier = {
				modifier = "orbit_reduction"
				days = -1
			}
		}
		
		hidden_effect = {
			every_country = {
				limit = {
					AND = {
						is_country_type = default
						is_homicidal = no
						has_communications = prev.owner
					}
				}
				country_event = { id = newfrontiers_disasters.300 days = 1 }
			}
		}
	}
}

# Secret revealed - Orbit increase
planet_event = {
	id = newfrontiers_disasters.104
	title = "newfrontiers_disasters.104.name"
	desc = "newfrontiers_disasters.104.desc"
	picture = GFX_evt_metropolis
	show_sound = event_planetary_riot
	
	is_triggered_only = yes
	
	immediate = {
		planet_event = { id = newfrontiers_disasters.200 days = 5 } #Ahead of the Apocalypse
	}
	
	option = {
		name = WORRYING
		if = {
			limit = {
				owner = { num_owned_planets = 1 }
				is_homeworld = yes
			}
			add_modifier = {
				modifier = "apocalypse"
				days = -1
			}
		}
		else = {
			add_modifier = {
				modifier = "orbit_increase"
				days = -1
			}
		}
		
		hidden_effect = {
			every_country = {
				limit = {
					AND = {
						is_country_type = default
						is_homicidal = no
						has_communications = prev.owner
					}
				}
				country_event = { id = newfrontiers_disasters.300 days = 1 }
			}
		}
	}
}

# Secret revealed - Awakened planet
planet_event = {
	id = newfrontiers_disasters.105
	title = "newfrontiers_disasters.105.name"
	desc = "newfrontiers_disasters.105.desc"
	picture = GFX_evt_metropolis
	show_sound = event_planetary_riot
	
	is_triggered_only = yes
	
	immediate = {
		planet_event = { id = newfrontiers_disasters.200 days = 5 } #Ahead of the Apocalypse
	}
	
	option = {
		name = WORRYING
		if = {
			limit = {
				owner = { num_owned_planets = 1 }
				is_homeworld = yes
			}
			add_modifier = {
				modifier = "apocalypse"
				days = -1
			}
		}
		else = {
			add_modifier = {
				modifier = "volcanic_activity"
				days = -1
			}
		}
		
		hidden_effect = {
			every_country = {
				limit = {
					AND = {
						is_country_type = default
						is_homicidal = no
						has_communications = prev.owner
					}
				}
				country_event = { id = newfrontiers_disasters.300 days = 1 }
			}
		}
	}
}

# Secret revealed - Star disaster
planet_event = {
	id = newfrontiers_disasters.106
	title = "newfrontiers_disasters.106.name"
	desc = "newfrontiers_disasters.106.desc"
	picture = GFX_evt_metropolis
	show_sound = event_planetary_riot
	
	is_triggered_only = yes
	
	immediate = {
		planet_event = { id = newfrontiers_disasters.200 days = 5 } #Ahead of the Apocalypse
	}
	
	option = {
		name = WORRYING
		if = {
			limit = {
				owner = { num_owned_planets = 1 }
				is_homeworld = yes
			}
			add_modifier = {
				modifier = "apocalypse"
				days = -1
			}
		}
		else = {
			add_modifier = {
				modifier = "star_evolution"
				days = -1
			}
		}
		
		hidden_effect = {
			every_country = {
				limit = {
					AND = {
						is_country_type = default
						is_homicidal = no
						has_communications = prev.owner
					}
				}
				country_event = { id = newfrontiers_disasters.300 days = 1 }
			}
		}
	}
}


# Gatekeeper - Ahead of the Apocalypse
planet_event = {
	id = newfrontiers_disasters.200
	hide_window = yes
	is_triggered_only = yes
	
	trigger = {
		OR = {
			has_planet_flag = planetary_disaster
			solar_system = { has_star_flag = star_disaster }
		}
	}
	
	immediate = {
		random_list = {
			#Doomsday Cult
			20 = {
				planet_event = { id = newfrontiers_disasters.201 days = 30 random = 90 }
			}
			#Mass suicide
			20 = {
				planet_event = { id = newfrontiers_disasters.202 days = 30 random = 90 }
			}
			#Widespread chaos
			20 = {
				planet_event = { id = newfrontiers_disasters.203 days = 30 random = 90 }
			}
			#Production boost
			20 = {
				planet_event = { id = newfrontiers_disasters.204 days = 30 random = 90 }
			}
			#Active evacuation
			20 = {
				planet_event = { id = newfrontiers_disasters.205 days = 30 random = 90 }
			}
		}
	}
}

# Ahead of the Apocalypse - Doomsday Cult
planet_event = {
	id = newfrontiers_disasters.201
	title = "newfrontiers_disasters.201.name"
	desc = "newfrontiers_disasters.201.desc"
	picture = GFX_evt_conclave
	show_sound = event_air_raid_siren
	
	is_triggered_only = yes
	
	trigger = {
		OR = {
			has_planet_flag = planetary_disaster
			solar_system = { has_star_flag = star_disaster }
		}
	}
	
	immediate = {
		planet_event = { id = newfrontiers_disasters.200 days = 600 random = 90 } #Ahead of the Apocalypse
	}
	
	option = {
		name = WORRYING
		add_modifier = {
			modifier = "doomsday_cult"
			days = 360
		}
	}
}

# Ahead of the Apocalypse - Mass suicide
planet_event = {
	id = newfrontiers_disasters.202
	title = "newfrontiers_disasters.202.name"
	desc = "newfrontiers_disasters.202.desc"
	picture = GFX_evt_burning_settlement
	show_sound = event_air_raid_siren
	
	is_triggered_only = yes
	
	trigger = {
		OR = {
			has_planet_flag = planetary_disaster
			solar_system = { has_star_flag = star_disaster }
		}
	}
	
	immediate = {
		planet_event = { id = newfrontiers_disasters.200 days = 600 random = 90 } #Ahead of the Apocalypse
	}
	
	option = {
		name = WORRYING
		add_modifier = {
			modifier = "mass_suicide"
			days = 360
		}
		hidden_effect = {
			planet_event = { id = newfrontiers_periodic_event.1 days = 1 }
		}
	}
}

# Ahead of the Apocalypse - Widespread chaos
planet_event = {
	id = newfrontiers_disasters.203
	title = "newfrontiers_disasters.203.name"
	desc = "newfrontiers_disasters.203.desc"
	picture = GFX_evt_burning_settlement
	show_sound = event_air_raid_siren
	
	is_triggered_only = yes
	
	trigger = {
		OR = {
			has_planet_flag = planetary_disaster
			solar_system = { has_star_flag = star_disaster }
		}
	}
	
	immediate = {
		planet_event = { id = newfrontiers_disasters.200 days = 600 random = 90 } #Ahead of the Apocalypse
	}
	
	option = {
		name = WORRYING
		add_modifier = {
			modifier = "widespread_chaos"
			days = 360
		}
	}
}

# Ahead of the Apocalypse - Production boost
planet_event = {
	id = newfrontiers_disasters.204
	title = "newfrontiers_disasters.204.name"
	desc = "newfrontiers_disasters.204.desc"
	picture = GFX_evt_metropolis
	show_sound = event_conversation
	
	is_triggered_only = yes
	
	trigger = {
		OR = {
			has_planet_flag = planetary_disaster
			solar_system = { has_star_flag = star_disaster }
		}
	}
	
	immediate = {
		planet_event = { id = newfrontiers_disasters.200 days = 600 random = 90 } #Ahead of the Apocalypse
	}
	
	option = {
		name = WORRYING
		add_modifier = {
			modifier = "production_boost"
			days = 360
		}
	}
}

# Ahead of the Apocalypse - Active evacuation
planet_event = {
	id = newfrontiers_disasters.205
	title = "newfrontiers_disasters.205.name"
	desc = "newfrontiers_disasters.205.desc"
	picture = GFX_evt_metropolis
	show_sound = event_conversation
	
	is_triggered_only = yes
	
	trigger = {
		OR = {
			has_planet_flag = planetary_disaster
			solar_system = { has_star_flag = star_disaster }
		}
	}
	
	immediate = {
		planet_event = { id = newfrontiers_disasters.200 days = 600 random = 90 } #Ahead of the Apocalypse
	}
	
	option = {
		name = WORRYING
		add_modifier = {
			modifier = "active_evacuation"
			days = 360
		}
	}
}



# Disaster Message for All
country_event = {
	id = newfrontiers_disasters.300
	title = "newfrontiers_disasters.300.name"
	desc = "newfrontiers_disasters.300.desc"
	picture = GFX_evt_wreckage
	show_sound = event_sensor_ping
	location = from
	
	is_triggered_only = yes
	
	immediate = {
		save_event_target_as = helping_country
		if = {
			limit = { 
				OR = {
					NOT = { is_at_war_with = event_target:disaster_planet.owner }
					event_target:disaster_planet.owner = { is_homicidal = no }
				}
				any_system_within_border = {
					any_bordering_country = { 
						is_same_value = event_target:disaster_planet.owner 
						NOT = { is_subject_type = vassal }
					}
				}
			}
			random_owned_planet = {
				limit = { 
					is_neighbor_of = event_target:disaster_planet.owner
					is_homeworld = no
				}
				save_event_target_as = given_planet
			}
		}
	}

	option = {
		name = "newfrontiers_disasters.vassality_for_planet.tooltip"
		trigger = {
			OR = {
				NOT = { is_at_war_with = event_target:disaster_planet.owner }
				event_target:disaster_planet.owner = { is_homicidal = no }
			}
			any_system_within_border = {
				any_bordering_country = { 
					is_same_value = event_target:disaster_planet.owner 
					NOT = { is_subject_type = vassal }
				}
			}
			is_xenophobe = no
		}
		ai_chance = {
			factor = 75
		}
		hidden_effect = {
			event_target:disaster_planet.owner = { country_event = { id = newfrontiers_disasters.301 days = 1 } }
		}
	}
	
	option = {
		name = WORRYING
		trigger = {
			OR = {
				NOT = { is_at_war_with = event_target:disaster_planet.owner }
				event_target:disaster_planet.owner = { is_homicidal = no }
			}
		}
		ai_chance = {
			factor = 25
		}
	}
	
	option = {
		name = EXCELLENT
		trigger = {
			OR = {
				is_at_war_with = event_target:disaster_planet.owner
				event_target:disaster_planet.owner = { is_homicidal = yes }
			}
		}
		ai_chance = {
			factor = 75
		}
	}
}

# Vassality for the planet
country_event = {
	id = newfrontiers_disasters.301
	title = "newfrontiers_disasters.301.name"
	desc = {
		trigger = {
			NOR = { 
				has_authority = auth_machine_intelligence
				has_authority = auth_hive_mind
			}
		}
		text = "newfrontiers_disasters.301.desc"
	}
	desc = {
		trigger = {
			has_authority = auth_machine_intelligence
		}
		text = "newfrontiers_disasters.301.desc.machine"
	}
	desc = {
		trigger = {
			has_authority = auth_hive_mind
		}
		text = "newfrontiers_disasters.301.desc.hive"
	}
	location = ROOT

	diplomatic = yes
	
	is_triggered_only = yes

	picture_event_data = {
		portrait = event_target:helping_country
		planet_background = event_target:helping_country
		graphical_culture = event_target:helping_country
		city_level = event_target:helping_country
		room = event_target:helping_country.ruler
	}

	option = {
		name = "newfrontiers_disasters.301.a"
		
		ai_chance = {
			factor = 75
			modifier = {
				factor = 0
				num_owned_planets > 1
			}
		}
		
		event_target:given_planet = {
			set_owner = prev
		}
		event_target:helping_country = {
			set_subject_of = {
				who = root
				subject_type = vassal
			}
		}
	}

	option = {
		name = "newfrontiers_disasters.301.b"
		ai_chance = {
			factor = 25
		}
	}
}
