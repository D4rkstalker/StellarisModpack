namespace = SMCO_anomaly

# There's signs of life on a rogue planet
ship_event = {
	id = SMCO_anomaly.1
	title = "SMCO_anomaly.1.name"
	desc = "SMCO_anomaly.1.desc"
	picture = GFX_evt_microscopic_life
	show_sound = event_alien_nature
	location = from

	is_triggered_only = yes

	immediate = {
		owner = { country_event = { id = story.2 days = 30 } }
	}

	option = {
		trigger = {
			owner = {
				OR = {
					has_ethic = ethic_xenophobe
					has_ethic = ethic_fanatic_xenophobe
				}
			}
		}
		name = "SMCO_anomaly.1.xenophobe.response"
		SMCO_reward_influence = yes
	}

	option = {
		trigger = {
			owner = {
				NOR = {
					has_ethic = ethic_xenophobe
					has_ethic = ethic_fanatic_xenophobe
				}
			}
		}
		name = FASCINATING
		SMCO_reward_society = yes
		custom_tooltip = "SMCO_anomaly.1.custom_tooltip"
		from = {
			hidden_effect = { SMCO_add_society_deposit = yes }
		}
	}
}

# A rather large moon providing some valuable energy to a rogue planet
ship_event = {
	id = SMCO_anomaly.2
	title = "SMCO_anomaly.2.name"
	desc = "SMCO_anomaly.2.desc"
	picture = GFX_evt_SMCO_large_moon
	show_sound = event_ship_bridge
	location = from

	is_triggered_only = yes

	option = {
		name = INTERESTING
		SMCO_reward_physics = yes
		custom_tooltip = "SMCO_anomaly.2.custom_tooltip"
		from = {
			hidden_effect = {
				add_modifier = { modifier = SMCO_large_moon }
				SMCO_add_physics_deposit = yes
			}
		}
	}
}

# Iron rain in sub-brown dwarf
ship_event = {
	id = SMCO_anomaly.3
	title = "SMCO_anomaly.3.name"
	desc = "SMCO_anomaly.3.desc"
	picture = GFX_evt_SMCO_iron_rain
	show_sound = event_ship_bridge
	location = from

	is_triggered_only = yes

	option = {
		name = EXCELLENT
		SMCO_reward_minerals = yes
		from = {
			hidden_effect = {
				add_modifier = { modifier = SMCO_iron_rain }
				random_list = {
					10 = { add_deposit = d_minerals_4 }
					20 = { add_deposit = d_minerals_5 }
					50 = { add_deposit = d_minerals_6 }
					20 = { add_deposit = d_minerals_7 }
				}
			}
		}
		custom_tooltip = "SMCO_anomaly.3.custom_tooltip"
	}
}

# Crashed station
ship_event = {
	id = SMCO_anomaly.4
	title = "SMCO_anomaly.4.name"
	desc = "SMCO_anomaly.4.desc"
	picture = GFX_evt_SMCO_crashed_station
	show_sound = event_ship_bridge
	location = from

	is_triggered_only = yes
	
	immediate = {
		owner = { country_event = { id = story.5 days = 30 } }
	}

	option = {
		trigger = {
			owner = {
				OR = {
					has_ethic = ethic_xenophobe
					has_ethic = ethic_fanatic_xenophobe
				}
			}
		}
		name = "SMCO_anomaly.4.xenophobe.response"
		SMCO_reward_influence = yes
	}

	option = {
		name = "SMCO_anomaly.4.response"
		enable_special_project = {
			name = "SMCO_CRASHED_STATION_PROJECT"
			location = this
			owner = root.owner
		}
	}
}
# Crashed station (if investigated)
ship_event = {
	id = SMCO_anomaly.5
	title = "SMCO_anomaly.5.name"
	desc = "SMCO_anomaly.5.desc"
	picture = GFX_evt_SMCO_crashed_station
	show_sound = event_mystic_reveal
	location = fromfrom

	is_triggered_only = yes

	option = {
		name = FASCINATING
		SMCO_reward_engineering = yes
		SMCO_reward_society = yes
		custom_tooltip = "SMCO_anomaly.5.custom_tooltip"

		from = {
			hidden_effect = {
				SMCO_add_society_deposit = yes
				SMCO_add_engineering_deposit = yes
			}
		}
	}
}

# Hydrothermal vents
ship_event = {
	id = SMCO_anomaly.6
	title = "SMCO_anomaly.6.name"
	desc = "SMCO_anomaly.6.desc"
	picture = GFX_evt_SMCO_hydrothermal_vents
	show_sound = event_scanner
	location = from

	is_triggered_only = yes

	option = {
		name = FASCINATING
		SMCO_reward_physics = yes
		custom_tooltip = "SMCO_anomaly.6.custom_tooltip"
		
		hidden_effect = {
			from = { SMCO_add_physics_deposit = yes }
		}
	}
}

# Hydrothermal vents (volatile motes)
ship_event = {
	id = SMCO_anomaly.7
	title = "SMCO_anomaly.7.name"
	desc = "SMCO_anomaly.7.desc"
	picture = GFX_evt_SMCO_hydrothermal_vents
	show_sound = event_scanner
	location = from

	is_triggered_only = yes

	option = {
		name = FASCINATING
		owner = {
			add_monthly_resource_mult = {
				resource = volatile_motes
				value = 1
				min = 5
				max = 15
			}
		}
		from = {
			random_list = {
				65 = { add_deposit = d_volatile_motes_1 }
				35 = { add_deposit = d_volatile_motes_2 }
			}
		}
	}
}

# Asteroid collision roll
ship_event = {
	id = SMCO_anomaly.8
	hide_window = yes
	is_triggered_only = yes

	trigger = { from = { is_planet_class = pc_SMCO_small_rogue_planet } }

	immediate = {
		random_list = {
			97 = {}
			3 = {
				modifier = {
					factor = 0
					from = {
						is_planet_class = pc_SMCO_small_rogue_planet
						NOT = { has_modifier = SMCO_thick_ice }
						NOR = {
							has_deposit = d_physics_1
							has_deposit = d_physics_2
							has_deposit = d_physics_3
							has_deposit = d_physics_4
							has_deposit = d_physics_5
							has_deposit = d_physics_6
							has_deposit = d_engineering_1
							has_deposit = d_engineering_2
							has_deposit = d_engineering_3
							has_deposit = d_engineering_4
							has_deposit = d_engineering_5
							has_deposit = d_engineering_6
						}
					}
				}

				ship_event = { id = SMCO_anomaly.9 days = -1 }
			}
		}
	}
}
# Asteroid collision success
ship_event = {
	id = SMCO_anomaly.9
	title = "SMCO_anomaly.9.name"
	desc = "SMCO_anomaly.9.desc"
	picture = GFX_evt_SMCO_asteroid_collision
	show_sound = event_scanner
	location = fromfrom

	is_triggered_only = yes

	option = {
		name = EXCELLENT
		owner = {
			add_monthly_resource_mult = {
				resource = rare_crystals
				value = 1
				min = 5
				max = 15
			}
		}
		fromfrom = {
			hidden_effect = {
				random_list = {
					65 = { add_deposit = d_rare_crystals_1 }
					35 = { add_deposit = d_rare_crystals_2 }
				}
			}
		}
	}
}