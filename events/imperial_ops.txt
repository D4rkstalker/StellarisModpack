namespace = Imp_operation
espionage_operation_event = {
	id = Imp_operation.1000
	title = Imp_operation.1000.name
	desc = Imp_operation.1000.desc
	espionage_operation = yes
	picture = GFX_evt_vivisection
	show_sound = event_nem_begin_operation
	is_triggered_only = yes
	immediate = {
		set_espionage_operation_progress_locked = yes
	}
	option = {
		name = GOOD
		set_espionage_operation_progress_locked = no
	}
}

espionage_operation_event = {
	id = Imp_operation.1001
	title = Imp_operation.1001.name
	desc = Imp_operation.1001.desc
	espionage_operation = yes
	picture = GFX_evt_busy_spaceport
	show_sound = event_default
	is_triggered_only = yes
	immediate = {
		set_espionage_operation_progress_locked = yes
		target = {
		}
	}
	option = {
		name = GOOD
		set_espionage_operation_progress_locked = no
	}
}

espionage_operation_event = {
	id = Imp_operation.1002
	title = Imp_operation.1002.name
	desc = Imp_operation.1002.desc
	show_sound = relic_activation_miniature_galaxy
	espionage_operation = yes
	picture = GFX_evt_hand_shake
	show_sound = event_default
	is_triggered_only = yes
	immediate = {
		set_espionage_operation_progress_locked = yes
		target = {
			random_owned_planet = {
				limit = {
					is_capital = no
					NOT = {
						has_planet_flag = virus_target_1
					}
					NOT = {
						has_planet_flag = virus_target_2
					}
					NOT = {
						has_planet_flag = virus_target_3
					}
				}
			set_planet_flag = virus_target_1
			}
			random_owned_planet = {
				limit = {
					is_capital = no
					NOT = {
						has_planet_flag = virus_target_1
					}
					NOT = {
						has_planet_flag = virus_target_2
					}
					NOT = {
						has_planet_flag = virus_target_3
					}
				}
			set_planet_flag = virus_target_2
			}
			random_owned_planet = {
				limit = {
					is_capital = no
					NOT = {
						has_planet_flag = virus_target_1
					}
					NOT = {
						has_planet_flag = virus_target_2
					}
					NOT = {
						has_planet_flag = virus_target_3
					}
				}
				set_planet_flag = virus_target_3
				}
			}
		}
	option = {
		name = LAUNCH_OPERATION
		target = {
			save_event_target_as = virus_planet_owner
		}
		owner = {
			country_event = {
				id = Imp_operation.1003
			}
		}
	}
}

country_event = {
	id = Imp_operation.1003
	title = Imp_operation.1003.name
	desc = Imp_operation.1003.desc
	picture = GFX_evt_disease_outbreak
	show_sound = event_red_alert
	is_triggered_only = yes
	immediate = {
		event_target:virus_planet_owner = {
			random_owned_planet = {
				limit = {
					has_planet_flag = virus_target_1
				}
				save_event_target_as = virus_option_1
			}
			random_owned_planet = {
				limit = {
					has_planet_flag = virus_target_2
				}
				save_event_target_as = virus_option_2
			}
			random_owned_planet = {
				limit = {
					has_planet_flag = virus_target_3
				}
				save_event_target_as = virus_option_3
			}
		}
	}
	option = {
		name = "[event_target:virus_option_1.GetName]"
		event_target:virus_option_1 = {
			hidden_effect = {
				add_modifier = {
					modifier = pandemic_lesser
					days = 360
				}
			}
		}
	}
	option = {
		trigger = {
			event_target:virus_option_2 = {
				has_planet_flag = virus_target_2
			}
		}
		name = "[event_target:virus_option_2.GetName]"
		event_target:virus_option_2 = {
			hidden_effect = {
				add_modifier = {
					modifier = pandemic_lesser
					days = 360
				}
			}
		}
	}
	option = {
		trigger = {
			event_target:virus_option_3 = {
				has_planet_flag = virus_target_3
			}
		}
		name = "[event_target:virus_option_3.GetName]"
		event_target:virus_option_3 = {
			hidden_effect = {
				add_modifier = {
					modifier = pandemic_lesser
					days = 360
				}
			}
		}
	}
	after = {
		country_event = {
			id = outbreak_evt.1100
			days = 9001
		}
		set_timed_country_flag = {
			flag = virus_outbreak
			days = 4800
		}
		event_target:virus_planet_owner = {
			country_event = {
				id = outbreak_evt.0001
			}
			every_owned_planet = {
				remove_planet_flag = virus_target_1
				remove_planet_flag = virus_target_2
				remove_planet_flag = virus_target_3
			}
		}
	}
}
espionage_operation_event = {
	id = Imp_operation.2000
	title = Imp_operation.2000.name
	desc = Imp_operation.2000.desc
	espionage_operation = yes
	picture = GFX_evt_think_tank
	show_sound = event_default
	is_triggered_only = yes
	immediate = {
		set_espionage_operation_progress_locked = yes
		target = {
		}
	}
	option = {
		name = GOOD
		set_espionage_operation_progress_locked = no
	}
}
espionage_operation_event = {
	id = Imp_operation.2001
	title = Imp_operation.2001.name
	desc = Imp_operation.2001.desc
	espionage_operation = yes
	picture = GFX_evt_board_meeting
	show_sound = event_default
	is_triggered_only = yes
	immediate = {
		set_espionage_operation_progress_locked = yes
		target = {
		}
	}
	option = {
		name = WORRYING
		set_espionage_operation_progress_locked = no
	}
}
espionage_operation_event = {
	id = Imp_operation.2002
	title = Imp_operation.2002.name
	desc = Imp_operation.2002.desc
	espionage_operation = yes
	picture = GFX_evt_vivisection
	show_sound = event_death_cult
	is_triggered_only = yes
	immediate = {
		set_espionage_operation_progress_locked = yes
	}
	option = {
		name = outbreak_vaccine_keep
		set_espionage_operation_progress_locked = no
		owner = {
			every_owned_planet = {
				remove_modifier = pandemic_lesser
				remove_modifier = pandemic_Greater
			}
			set_timed_country_flag = {
				flag = virus_vaccine
				days = 4600
			}
			add_resource = {
				influence = 350
				unity = 50000
				society_research = 15000
			}
		}
		
	}
	option = {
		name = outbreak_vaccine_leak
		set_espionage_operation_progress_locked = no
		add_imperial_authority = -10
		custom_tooltip = "lableak_choice"
		hidden_effect = {
			
		
		every_country = {
			limit = {
				is_country_type = default
				is_fallen_empire = no
				is_crisis_faction = no

			}
			country_event = { id = outbreak_evt.1111 }
		}
		random_country = {
			limit = {
				is_galactic_emperor = yes
			}
		}
	}
		owner = {
			add_resource = {
				energy = -10000
				influence = -150
				society_research = 15000
			}
		}
	}
}