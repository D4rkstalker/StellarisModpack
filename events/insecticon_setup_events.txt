namespace = insecticon_start

### Insecticon Hive Start
country_event = {
	id = insecticon_start.0
	hide_window = yes
	is_triggered_only = yes

	trigger = {
		has_origin = origin_insecticon_hive 
	}

	immediate = {
        set_country_flag = insecticon_hive_origin_flag
		set_global_flag = insecticon_hive_origin_active
		hidden_effect = {
			add_resource = { energon = 200 }
            add_resource = { minerals = 100 }
		}
		capital_scope = {
			set_planet_entity = {
				entity = "insecticon_hive_planet_01_entity"
			}
			clear_deposits = yes
			change_pc = pc_insecticon_hive
			add_deposit = d_cybertronian_world_core
			add_deposit = d_insecticon_hive
			add_deposit = d_insecticon_hive
			add_deposit = d_insecticon_hive
			add_deposit = d_energon_crystals
			set_planet_flag = insecticon_hive_stage_3
			add_modifier = {
				modifier = insecticon_hive_stage_3
			}
		}
        add_modifier = {
			modifier = insecticon_hive_global_country_modifiers
		}
		add_modifier = {
			modifier = robots_in_disguise
		}
        if = {
            limit = {
                is_ai = no
                has_origin = origin_insecticon_hive
                NOT = {
					has_civic = civic_hive_devouring_swarm
				}
            }
            #country_event = { id = insecticon_start.1 days = -1 }
        }
	}
}

country_event = {
	id = insecticon_start.1
	title = "insecticon_hive_cb_option_window"
	desc = "insecticon_hive_cb_option_description"
	picture = GFX_insecticon_hive_casus_belli_option_window
	is_triggered_only = yes

	option = {
		name = insecticon_hive_cb_yes
        set_country_flag = insecticon_hive_cb_yes
	}
    option = {
		name = insecticon_hive_cb_no
        set_country_flag = insecticon_hive_cb_no
	}
}

country_event = {
	id = insecticon_start.2
	hide_window = yes
	is_triggered_only = yes
	
	trigger = {
		has_trait = trait_robot_insecticon
	}
	
	immediate = {
		capital_scope = {
			add_building = building_energon_mine
			add_building = building_insecticon_energon_collector
		}
		give_technology = { tech = tech_insecticon_swarm message = no }
		give_technology = { tech = tech_energon_mining message = no }
		give_technology = { tech = tech_energon_mining_1 message = no }
		give_technology = { tech = tech_mine_living_metal message = no }
		
	}
	option = {
		hidden_effect = {
			every_country = {
				limit = {
					OR = {
						is_country_type = default
						is_country_type = fallen_empire
						is_country_type = awakened_fallen_empire
					}
				}
				every_owned_leader = {
					limit = {
						is_same_species = root
						NOR = {
							has_trait =	leader_trait_insecticon
						}
					}
					if = {
						limit = { leader_class = admiral }
						add_trait = leader_trait_insecticon
					}
					if = {
						limit = { leader_class = general }
						add_trait = leader_trait_insecticon
					}
					if = {
						limit = { leader_class = governor }
						add_trait = leader_trait_insecticon
					}
					if = {
						limit = { leader_class = scientist }
						add_trait = leader_trait_insecticon
					}
				}
				every_pool_leader = {
					limit = {
						is_same_species = root
						#species = { 
						#	has_trait = trait_cybernetic
						#	is_same_value = event_target:cybernetic_species
						#}
						NOR = {
							has_trait =	leader_trait_insecticon
						}
					}
					if = {
						limit = { leader_class = admiral }
						add_trait = leader_trait_insecticon
					}
					if = {
						limit = { leader_class = general }
						add_trait = leader_trait_insecticon
					}
					if = {
						limit = { leader_class = governor }
						add_trait = leader_trait_insecticon
					}
					if = {
						limit = { leader_class = scientist }
						add_trait = leader_trait_insecticon	
					}
				}
			}
		}
	}
}

# New Leaders Get Insecticon Trait
country_event = {
	id = insecticon_start.12
	is_triggered_only = yes
	hide_window = yes
	
	trigger = {
		from = {
			species = { has_trait = trait_robot_insecticon }
		}
	}
	
	immediate = {
		from = {
			add_trait_no_notify = leader_trait_insecticon
		}
	}
}

#country_event = {
#	id = insecticon_start.3
#	hide_window = yes
#	is_triggered_only = yes
#	
#	trigger = {
#		has_origin = origin_insecticon_hive
#	}
#	
#	immediate = {
#		capital_scope = {
#			set_planet_entity = {
#				entity = "insecticon_hive_planet_01_entity"
#			}
#			clear_deposits = yes
#			change_pc = pc_insecticon_hive
#			add_deposit = d_cybertronian_world_core
#			add_deposit = d_insecticon_hive
#			add_deposit = d_insecticon_hive
#			add_deposit = d_insecticon_hive
#			add_deposit = d_energon_crystals
#		}
#	}
#}


# Insecticon Hive World complete
planet_event = {
	id = insecticon_start.4
	title = insecticon_start.4.name
	desc = insecticon_start.4.desc
	picture = GFX_evt_cybertron_corrupted
	show_sound = event_screams
	location = root

	is_triggered_only = yes

	trigger = {
		is_planet_class = pc_insecticon_hive
	}

	option = {
		name = insecticon_start.4.a
	}
}
