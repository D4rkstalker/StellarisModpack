namespace = ag_ancient_knowledge

country_event = {
	id = ag_ancient_knowledge.1
	title = "ag_ancient_knowledge.1.name"
	desc = "ag_ancient_knowledge.1.desc"
	diplomatic = yes
	custom_gui = "ag_ancient_knowledge_window"
	picture_event_data = {
		room = ag_ancient_knowledge_room
		portrait = root.species
	}
	show_sound = event_default
	
	is_triggered_only = yes
	
	trigger = { NOT = { has_country_flag = ag_ancient_knowledge_window_opened } }
	immediate = {
		set_country_flag = ag_ancient_knowledge_window_opened
		set_variable = { which = ag_num_ancient_ships value = 0 }
		every_owned_ship = {
			limit = { OR = { ag_is_ancient_ship_locked = yes ag_is_ancient_ship_unlocked = yes } }
			prev = { change_variable = { which = ag_num_ancient_ships value = 1 } }
		}
	}
	after = { remove_country_flag = ag_ancient_knowledge_window_opened }
	
	option = { name = ""  custom_gui = "ag_ancient_knowledge_option_dummy" default_hide_option = yes hidden_effect = { remove_country_flag = ag_ancient_knowledge_window_opened } }
	option = {
		name = "ag_ancient_knowledge.1.a_alt"
		custom_gui = "ag_ancient_knowledge_option"
		trigger = { has_country_flag = ag_ancient_knowledge_action_1 }
		remove_modifier = "ag_ancient_knowledge_research_buff"
		hidden_effect = {
			ag_change_ancient_knowledge_action_state = { ag_action_id = 1 }
			subtract_variable = { which = ag_num_using_ancient_knowledge value = 1 }
			ag_restart_ancient_knowledge_event = yes
		}
	}
	option = {
		name = "ag_ancient_knowledge.1.a"
		custom_gui = "ag_ancient_knowledge_option_1"
		trigger = { NOT = { has_country_flag = ag_ancient_knowledge_action_1 } check_variable = { which = ag_num_actived_knowledge_actions value < 1 } }
		allow = { custom_tooltip = { fail_text = "ag_requires_ancient_knowledges" check_variable = { which = ag_ancient_knowledge_var value >= 1 } } }
		add_modifier = { modifier = "ag_ancient_knowledge_research_buff" days = -1 }
		hidden_effect = {
			ag_change_ancient_knowledge_action_state = { ag_action_id = 1 }
			change_variable = { which = ag_num_using_ancient_knowledge value = 1 }
			ag_restart_ancient_knowledge_event = yes
		}
	}
	option = {
		name = "ag_ancient_knowledge.1.a"
		custom_gui = "ag_ancient_knowledge_option_2"
		trigger = { NOT = { has_country_flag = ag_ancient_knowledge_action_1 } check_variable = { which = ag_num_actived_knowledge_actions value = 1 } }
		allow = { custom_tooltip = { fail_text = "ag_requires_ancient_knowledges" check_variable = { which = ag_ancient_knowledge_var value >= 2 } } }
		add_modifier = { modifier = "ag_ancient_knowledge_research_buff" days = -1 }
		hidden_effect = {
			ag_change_ancient_knowledge_action_state = { ag_action_id = 1 }
			change_variable = { which = ag_num_using_ancient_knowledge value = 1 }
			ag_restart_ancient_knowledge_event = yes
		}
	}
	option = {
		name = "ag_ancient_knowledge.1.a"
		custom_gui = "ag_ancient_knowledge_option_3"
		trigger = { NOT = { has_country_flag = ag_ancient_knowledge_action_1 } check_variable = { which = ag_num_actived_knowledge_actions value = 2 } }
		allow = { custom_tooltip = { fail_text = "ag_requires_ancient_knowledges" check_variable = { which = ag_ancient_knowledge_var value >= 3 } } }
		add_modifier = { modifier = "ag_ancient_knowledge_research_buff" days = -1 }
		hidden_effect = {
			ag_change_ancient_knowledge_action_state = { ag_action_id = 1 }
			change_variable = { which = ag_num_using_ancient_knowledge value = 1 }
			ag_restart_ancient_knowledge_event = yes
		}
	}
	option = {
		name = "ag_ancient_knowledge.1.a"
		custom_gui = "ag_ancient_knowledge_option_4"
		trigger = { NOT = { has_country_flag = ag_ancient_knowledge_action_1 } check_variable = { which = ag_num_actived_knowledge_actions value = 3 } }
		allow = { custom_tooltip = { fail_text = "ag_requires_ancient_knowledges" check_variable = { which = ag_ancient_knowledge_var value >= 4 } } }
		add_modifier = { modifier = "ag_ancient_knowledge_research_buff" days = -1 }
		hidden_effect = {
			ag_change_ancient_knowledge_action_state = { ag_action_id = 1 }
			change_variable = { which = ag_num_using_ancient_knowledge value = 1 }
			ag_restart_ancient_knowledge_event = yes
		}
	}
	option = {
		name = "ag_ancient_knowledge.1.a"
		custom_gui = "ag_ancient_knowledge_option_5"
		trigger = { NOT = { has_country_flag = ag_ancient_knowledge_action_1 } check_variable = { which = ag_num_actived_knowledge_actions value > 3 } }
		allow = { custom_tooltip = { fail_text = "ag_requires_ancient_knowledges" check_variable = { which = ag_ancient_knowledge_var value >= 5 } } }
		add_modifier = { modifier = "ag_ancient_knowledge_research_buff" days = -1 }
		hidden_effect = {
			ag_change_ancient_knowledge_action_state = { ag_action_id = 1 }
			change_variable = { which = ag_num_using_ancient_knowledge value = 1 }
			ag_restart_ancient_knowledge_event = yes
		}
	}
	option = {
		name = "ag_ancient_knowledge.1.b_alt"
		custom_gui = "ag_ancient_knowledge_option"
		trigger = { has_country_flag = ag_ancient_knowledge_action_2 }
		remove_modifier = "ag_ancient_knowledge_archaeology_buff"
		hidden_effect = {
			ag_change_ancient_knowledge_action_state = { ag_action_id = 2 }
			subtract_variable = { which = ag_num_using_ancient_knowledge value = 1 }
			ag_restart_ancient_knowledge_event = yes
		}
	}
	option = {
		name = "ag_ancient_knowledge.1.b"
		custom_gui = "ag_ancient_knowledge_option_1"
		trigger = { NOT = { has_country_flag = ag_ancient_knowledge_action_2 } check_variable = { which = ag_num_actived_knowledge_actions value < 1 } }
		allow = { custom_tooltip = { fail_text = "ag_requires_ancient_knowledges" check_variable = { which = ag_ancient_knowledge_var value >= 1 } } }
		add_modifier = { modifier = "ag_ancient_knowledge_archaeology_buff" days = -1 }
		hidden_effect = {
			ag_change_ancient_knowledge_action_state = { ag_action_id = 2 }
			change_variable = { which = ag_num_using_ancient_knowledge value = 1 }
			ag_restart_ancient_knowledge_event = yes
		}
	}
	option = {
		name = "ag_ancient_knowledge.1.b"
		custom_gui = "ag_ancient_knowledge_option_2"
		trigger = { NOT = { has_country_flag = ag_ancient_knowledge_action_2 } check_variable = { which = ag_num_actived_knowledge_actions value = 1 } }
		allow = { custom_tooltip = { fail_text = "ag_requires_ancient_knowledges" check_variable = { which = ag_ancient_knowledge_var value >= 2 } } }
		add_modifier = { modifier = "ag_ancient_knowledge_archaeology_buff" days = -1 }
		hidden_effect = {
			ag_change_ancient_knowledge_action_state = { ag_action_id = 2 }
			change_variable = { which = ag_num_using_ancient_knowledge value = 1 }
			ag_restart_ancient_knowledge_event = yes
		}
	}
	option = {
		name = "ag_ancient_knowledge.1.b"
		custom_gui = "ag_ancient_knowledge_option_3"
		trigger = { NOT = { has_country_flag = ag_ancient_knowledge_action_2 } check_variable = { which = ag_num_actived_knowledge_actions value = 2 } }
		allow = { custom_tooltip = { fail_text = "ag_requires_ancient_knowledges" check_variable = { which = ag_ancient_knowledge_var value >= 3 } } }
		add_modifier = { modifier = "ag_ancient_knowledge_archaeology_buff" days = -1 }
		hidden_effect = {
			ag_change_ancient_knowledge_action_state = { ag_action_id = 2 }
			change_variable = { which = ag_num_using_ancient_knowledge value = 1 }
			ag_restart_ancient_knowledge_event = yes
		}
	}
	option = {
		name = "ag_ancient_knowledge.1.b"
		custom_gui = "ag_ancient_knowledge_option_4"
		trigger = { NOT = { has_country_flag = ag_ancient_knowledge_action_2 } check_variable = { which = ag_num_actived_knowledge_actions value = 3 } }
		allow = { custom_tooltip = { fail_text = "ag_requires_ancient_knowledges" check_variable = { which = ag_ancient_knowledge_var value >= 4 } } }
		add_modifier = { modifier = "ag_ancient_knowledge_archaeology_buff" days = -1 }
		hidden_effect = {
			ag_change_ancient_knowledge_action_state = { ag_action_id = 2 }
			change_variable = { which = ag_num_using_ancient_knowledge value = 1 }
			ag_restart_ancient_knowledge_event = yes
		}
	}
	option = {
		name = "ag_ancient_knowledge.1.b"
		custom_gui = "ag_ancient_knowledge_option_5"
		trigger = { NOT = { has_country_flag = ag_ancient_knowledge_action_2 } check_variable = { which = ag_num_actived_knowledge_actions value > 3 } }
		allow = { custom_tooltip = { fail_text = "ag_requires_ancient_knowledges" check_variable = { which = ag_ancient_knowledge_var value >= 5 } } }
		add_modifier = { modifier = "ag_ancient_knowledge_archaeology_buff" days = -1 }
		hidden_effect = {
			ag_change_ancient_knowledge_action_state = { ag_action_id = 2 }
			change_variable = { which = ag_num_using_ancient_knowledge value = 1 }
			ag_restart_ancient_knowledge_event = yes
		}
	}
	option = {
		name = "ag_ancient_knowledge.1.c_alt"
		custom_gui = "ag_ancient_knowledge_option"
		trigger = { has_country_flag = ag_ancient_knowledge_action_3 }
		remove_modifier = "ag_ancient_knowledge_projects_buff"
		hidden_effect = {
			ag_change_ancient_knowledge_action_state = { ag_action_id = 3 }
			subtract_variable = { which = ag_num_using_ancient_knowledge value = 1 }
			ag_restart_ancient_knowledge_event = yes
		}
	}
	option = {
		name = "ag_ancient_knowledge.1.c"
		custom_gui = "ag_ancient_knowledge_option_1"
		trigger = { NOT = { has_country_flag = ag_ancient_knowledge_action_3 } check_variable = { which = ag_num_actived_knowledge_actions value < 1 } }
		allow = { custom_tooltip = { fail_text = "ag_requires_ancient_knowledges" check_variable = { which = ag_ancient_knowledge_var value >= 1 } } }
		add_modifier = { modifier = "ag_ancient_knowledge_projects_buff" days = -1 }
		hidden_effect = {
			ag_change_ancient_knowledge_action_state = { ag_action_id = 3 }
			change_variable = { which = ag_num_using_ancient_knowledge value = 1 }
			ag_restart_ancient_knowledge_event = yes
		}
	}
	option = {
		name = "ag_ancient_knowledge.1.c"
		custom_gui = "ag_ancient_knowledge_option_2"
		trigger = { NOT = { has_country_flag = ag_ancient_knowledge_action_3 } check_variable = { which = ag_num_actived_knowledge_actions value = 1 } }
		allow = { custom_tooltip = { fail_text = "ag_requires_ancient_knowledges" check_variable = { which = ag_ancient_knowledge_var value >= 2 } } }
		add_modifier = { modifier = "ag_ancient_knowledge_projects_buff" days = -1 }
		hidden_effect = {
			ag_change_ancient_knowledge_action_state = { ag_action_id = 3 }
			change_variable = { which = ag_num_using_ancient_knowledge value = 1 }
			ag_restart_ancient_knowledge_event = yes
		}
	}
	option = {
		name = "ag_ancient_knowledge.1.c"
		custom_gui = "ag_ancient_knowledge_option_3"
		trigger = { NOT = { has_country_flag = ag_ancient_knowledge_action_3 } check_variable = { which = ag_num_actived_knowledge_actions value = 2 } }
		allow = { custom_tooltip = { fail_text = "ag_requires_ancient_knowledges" check_variable = { which = ag_ancient_knowledge_var value >= 3 } } }
		add_modifier = { modifier = "ag_ancient_knowledge_projects_buff" days = -1 }
		hidden_effect = {
			ag_change_ancient_knowledge_action_state = { ag_action_id = 3 }
			change_variable = { which = ag_num_using_ancient_knowledge value = 1 }
			ag_restart_ancient_knowledge_event = yes
		}
	}
	option = {
		name = "ag_ancient_knowledge.1.c"
		custom_gui = "ag_ancient_knowledge_option_4"
		trigger = { NOT = { has_country_flag = ag_ancient_knowledge_action_3 } check_variable = { which = ag_num_actived_knowledge_actions value = 3 } }
		allow = { custom_tooltip = { fail_text = "ag_requires_ancient_knowledges" check_variable = { which = ag_ancient_knowledge_var value >= 4 } } }
		add_modifier = { modifier = "ag_ancient_knowledge_projects_buff" days = -1 }
		hidden_effect = {
			ag_change_ancient_knowledge_action_state = { ag_action_id = 3 }
			change_variable = { which = ag_num_using_ancient_knowledge value = 1 }
			ag_restart_ancient_knowledge_event = yes
		}
	}
	option = {
		name = "ag_ancient_knowledge.1.c"
		custom_gui = "ag_ancient_knowledge_option_5"
		trigger = { NOT = { has_country_flag = ag_ancient_knowledge_action_3 } check_variable = { which = ag_num_actived_knowledge_actions value > 3 } }
		allow = { custom_tooltip = { fail_text = "ag_requires_ancient_knowledges" check_variable = { which = ag_ancient_knowledge_var value >= 5 } } }
		add_modifier = { modifier = "ag_ancient_knowledge_projects_buff" days = -1 }
		hidden_effect = {
			ag_change_ancient_knowledge_action_state = { ag_action_id = 3 }
			change_variable = { which = ag_num_using_ancient_knowledge value = 1 }
			ag_restart_ancient_knowledge_event = yes
		}
	}
	option = {
		name = "ag_ancient_knowledge.1.d_alt"
		custom_gui = "ag_ancient_knowledge_option"
		trigger = { has_country_flag = ag_ancient_knowledge_action_4 }
		remove_modifier = "ag_ancient_knowledge_industry_buff"
		hidden_effect = {
			ag_change_ancient_knowledge_action_state = { ag_action_id = 4 }
			subtract_variable = { which = ag_num_using_ancient_knowledge value = 1 }
			ag_restart_ancient_knowledge_event = yes
		}
	}
	option = {
		name = "ag_ancient_knowledge.1.d"
		custom_gui = "ag_ancient_knowledge_option_1"
		trigger = { NOT = { has_country_flag = ag_ancient_knowledge_action_4 } check_variable = { which = ag_num_actived_knowledge_actions value < 1 } }
		allow = { custom_tooltip = { fail_text = "ag_requires_ancient_knowledges" check_variable = { which = ag_ancient_knowledge_var value >= 1 } } }
		add_modifier = { modifier = "ag_ancient_knowledge_industry_buff" days = -1 }
		hidden_effect = {
			ag_change_ancient_knowledge_action_state = { ag_action_id = 4 }
			change_variable = { which = ag_num_using_ancient_knowledge value = 1 }
			ag_restart_ancient_knowledge_event = yes
		}
	}
	option = {
		name = "ag_ancient_knowledge.1.d"
		custom_gui = "ag_ancient_knowledge_option_2"
		trigger = { NOT = { has_country_flag = ag_ancient_knowledge_action_4 } check_variable = { which = ag_num_actived_knowledge_actions value = 1 } }
		allow = { custom_tooltip = { fail_text = "ag_requires_ancient_knowledges" check_variable = { which = ag_ancient_knowledge_var value >= 2 } } }
		add_modifier = { modifier = "ag_ancient_knowledge_industry_buff" days = -1 }
		hidden_effect = {
			ag_change_ancient_knowledge_action_state = { ag_action_id = 4 }
			change_variable = { which = ag_num_using_ancient_knowledge value = 1 }
			ag_restart_ancient_knowledge_event = yes
		}
	}
	option = {
		name = "ag_ancient_knowledge.1.d"
		custom_gui = "ag_ancient_knowledge_option_3"
		trigger = { NOT = { has_country_flag = ag_ancient_knowledge_action_4 } check_variable = { which = ag_num_actived_knowledge_actions value = 2 } }
		allow = { custom_tooltip = { fail_text = "ag_requires_ancient_knowledges" check_variable = { which = ag_ancient_knowledge_var value >= 3 } } }
		add_modifier = { modifier = "ag_ancient_knowledge_industry_buff" days = -1 }
		hidden_effect = {
			ag_change_ancient_knowledge_action_state = { ag_action_id = 4 }
			change_variable = { which = ag_num_using_ancient_knowledge value = 1 }
			ag_restart_ancient_knowledge_event = yes
		}
	}
	option = {
		name = "ag_ancient_knowledge.1.d"
		custom_gui = "ag_ancient_knowledge_option_4"
		trigger = { NOT = { has_country_flag = ag_ancient_knowledge_action_4 } check_variable = { which = ag_num_actived_knowledge_actions value = 3 } }
		allow = { custom_tooltip = { fail_text = "ag_requires_ancient_knowledges" check_variable = { which = ag_ancient_knowledge_var value >= 4 } } }
		add_modifier = { modifier = "ag_ancient_knowledge_industry_buff" days = -1 }
		hidden_effect = {
			ag_change_ancient_knowledge_action_state = { ag_action_id = 4 }
			change_variable = { which = ag_num_using_ancient_knowledge value = 1 }
			ag_restart_ancient_knowledge_event = yes
		}
	}
	option = {
		name = "ag_ancient_knowledge.1.d"
		custom_gui = "ag_ancient_knowledge_option_5"
		trigger = { NOT = { has_country_flag = ag_ancient_knowledge_action_4 } check_variable = { which = ag_num_actived_knowledge_actions value > 3 } }
		allow = { custom_tooltip = { fail_text = "ag_requires_ancient_knowledges" check_variable = { which = ag_ancient_knowledge_var value >= 5 } } }
		add_modifier = { modifier = "ag_ancient_knowledge_industry_buff" days = -1 }
		hidden_effect = {
			ag_change_ancient_knowledge_action_state = { ag_action_id = 4 }
			change_variable = { which = ag_num_using_ancient_knowledge value = 1 }
			ag_restart_ancient_knowledge_event = yes
		}
	}
	option = {
		name = "ag_ancient_knowledge.1.e_alt"
		custom_gui = "ag_ancient_knowledge_option"
		trigger = { has_country_flag = ag_ancient_knowledge_action_5 }
		remove_modifier = "ag_ancient_knowledge_spacecraft_buff"
		hidden_effect = {
			ag_change_ancient_knowledge_action_state = { ag_action_id = 5 }
			subtract_variable = { which = ag_num_using_ancient_knowledge value = 1 }
			ag_restart_ancient_knowledge_event = yes
		}
	}
	option = {
		name = "ag_ancient_knowledge.1.e"
		custom_gui = "ag_ancient_knowledge_option_1"
		trigger = { NOT = { has_country_flag = ag_ancient_knowledge_action_5 } check_variable = { which = ag_num_actived_knowledge_actions value < 1 } }
		allow = { custom_tooltip = { fail_text = "ag_requires_ancient_knowledges" check_variable = { which = ag_ancient_knowledge_var value >= 1 } } }
		add_modifier = { modifier = "ag_ancient_knowledge_spacecraft_buff" days = -1 }
		hidden_effect = {
			ag_change_ancient_knowledge_action_state = { ag_action_id = 5 }
			change_variable = { which = ag_num_using_ancient_knowledge value = 1 }
			ag_restart_ancient_knowledge_event = yes
		}
	}
	option = {
		name = "ag_ancient_knowledge.1.e"
		custom_gui = "ag_ancient_knowledge_option_2"
		trigger = { NOT = { has_country_flag = ag_ancient_knowledge_action_5 } check_variable = { which = ag_num_actived_knowledge_actions value = 1 } }
		allow = { custom_tooltip = { fail_text = "ag_requires_ancient_knowledges" check_variable = { which = ag_ancient_knowledge_var value >= 2 } } }
		add_modifier = { modifier = "ag_ancient_knowledge_spacecraft_buff" days = -1 }
		hidden_effect = {
			ag_change_ancient_knowledge_action_state = { ag_action_id = 5 }
			change_variable = { which = ag_num_using_ancient_knowledge value = 1 }
			ag_restart_ancient_knowledge_event = yes
		}
	}
	option = {
		name = "ag_ancient_knowledge.1.e"
		custom_gui = "ag_ancient_knowledge_option_3"
		trigger = { NOT = { has_country_flag = ag_ancient_knowledge_action_5 } check_variable = { which = ag_num_actived_knowledge_actions value = 2 } }
		allow = { custom_tooltip = { fail_text = "ag_requires_ancient_knowledges" check_variable = { which = ag_ancient_knowledge_var value >= 3 } } }
		add_modifier = { modifier = "ag_ancient_knowledge_spacecraft_buff" days = -1 }
		hidden_effect = {
			ag_change_ancient_knowledge_action_state = { ag_action_id = 5 }
			change_variable = { which = ag_num_using_ancient_knowledge value = 1 }
			ag_restart_ancient_knowledge_event = yes
		}
	}
	option = {
		name = "ag_ancient_knowledge.1.e"
		custom_gui = "ag_ancient_knowledge_option_4"
		trigger = { NOT = { has_country_flag = ag_ancient_knowledge_action_5 } check_variable = { which = ag_num_actived_knowledge_actions value = 3 } }
		allow = { custom_tooltip = { fail_text = "ag_requires_ancient_knowledges" check_variable = { which = ag_ancient_knowledge_var value >= 4 } } }
		add_modifier = { modifier = "ag_ancient_knowledge_spacecraft_buff" days = -1 }
		hidden_effect = {
			ag_change_ancient_knowledge_action_state = { ag_action_id = 5 }
			change_variable = { which = ag_num_using_ancient_knowledge value = 1 }
			ag_restart_ancient_knowledge_event = yes
		}
	}
	option = {
		name = "ag_ancient_knowledge.1.e"
		custom_gui = "ag_ancient_knowledge_option_5"
		trigger = { NOT = { has_country_flag = ag_ancient_knowledge_action_5 } check_variable = { which = ag_num_actived_knowledge_actions value > 3 } }
		allow = { custom_tooltip = { fail_text = "ag_requires_ancient_knowledges" check_variable = { which = ag_ancient_knowledge_var value >= 5 } } }
		add_modifier = { modifier = "ag_ancient_knowledge_spacecraft_buff" days = -1 }
		hidden_effect = {
			ag_change_ancient_knowledge_action_state = { ag_action_id = 5 }
			change_variable = { which = ag_num_using_ancient_knowledge value = 1 }
			ag_restart_ancient_knowledge_event = yes
		}
	}
	option = {
		name = "ag_ancient_knowledge.1.f"
		custom_gui = "ag_ancient_knowledge_option_2_alt"
		custom_tooltip = "ag_ancient_knowledge.1.f.tooltip"
		trigger = { has_technology = tech_ag_class_5_singularity_research }
		allow = {
			custom_tooltip = { fail_text = "ag_requires_ancient_knowledges" check_variable = { which = ag_ancient_knowledge_var value >= 2 } }
			custom_tooltip = { fail_text = "ag_requires_no_ancient_knowledges_cooldown" NOT = { has_country_flag = ag_ancient_knowledges_cooldown } }
			resource_stockpile_compare = { resource = minor_artifacts value >= 30 }
			resource_stockpile_compare = { resource = sr_living_metal value >= 750 }
			resource_stockpile_compare = { resource = nanites value >= 750 }
			resource_stockpile_compare = { resource = sr_dark_matter value >= 500 }
		}
		add_resource = { minor_artifacts = -30 sr_living_metal = -750 nanites = -750 sr_dark_matter = -500 }
		hidden_effect = {
			set_timed_country_flag = { flag = ag_ancient_knowledges_cooldown days = 3600 }
			ag_subtract_ancient_knowledge = { ag_value = 2 }
			country_event = { id = ag_ancient_knowledge.11 days = 3600 }
			ag_restart_ancient_knowledge_event = yes
		}
	}
	option = {
		name = "ag_ancient_knowledge.1.g"
		custom_gui = "ag_ancient_knowledge_option_2_alt"
		custom_tooltip = "ag_ancient_knowledge.1.g.tooltip"
		trigger = { has_technology = tech_ag_matter_generator_research }
		allow = {
			custom_tooltip = { fail_text = "ag_requires_ancient_knowledges" check_variable = { which = ag_ancient_knowledge_var value >= 2 } }
			custom_tooltip = { fail_text = "ag_requires_no_ancient_knowledges_cooldown" NOT = { has_country_flag = ag_ancient_knowledges_cooldown } }
			resource_stockpile_compare = { resource = minor_artifacts value >= 30 }
			resource_stockpile_compare = { resource = sr_living_metal value >= 750 }
			resource_stockpile_compare = { resource = nanites value >= 750 }
			resource_stockpile_compare = { resource = sr_dark_matter value >= 500 }
		}
		add_resource = { minor_artifacts = -30 sr_living_metal = -750 nanites = -750 sr_dark_matter = -500 }
		hidden_effect = {
			set_timed_country_flag = { flag = ag_ancient_knowledges_cooldown days = 3600 }
			ag_subtract_ancient_knowledge = { ag_value = 2 }
			country_event = { id = ag_ancient_knowledge.12 days = 3600 }
			ag_restart_ancient_knowledge_event = yes
		}
	}
	option = {
		name = "ag_ancient_knowledge.1.h"
		custom_gui = "ag_ancient_knowledge_option_2_alt"
		custom_tooltip = "ag_ancient_knowledge.1.h.tooltip"
		trigger = { has_technology = tech_ag_fabrication_facility_research }
		allow = {
			custom_tooltip = { fail_text = "ag_requires_ancient_knowledges" check_variable = { which = ag_ancient_knowledge_var value >= 2 } }
			custom_tooltip = { fail_text = "ag_requires_no_ancient_knowledges_cooldown" NOT = { has_country_flag = ag_ancient_knowledges_cooldown } }
			resource_stockpile_compare = { resource = minor_artifacts value >= 30 }
			resource_stockpile_compare = { resource = sr_living_metal value >= 750 }
			resource_stockpile_compare = { resource = nanites value >= 750 }
			resource_stockpile_compare = { resource = sr_dark_matter value >= 500 }
		}
		add_resource = { minor_artifacts = -30 sr_living_metal = -750 nanites = -750 sr_dark_matter = -500 }
		hidden_effect = {
			set_timed_country_flag = { flag = ag_ancient_knowledges_cooldown days = 3600 }
			ag_subtract_ancient_knowledge = { ag_value = 2 }
			country_event = { id = ag_ancient_knowledge.13 days = 3600 }
			ag_restart_ancient_knowledge_event = yes
		}
	}
	option = {
		name = "ag_ancient_knowledge.1.i"
		custom_gui = "ag_ancient_knowledge_option_2_alt"
		custom_tooltip = "ag_ancient_knowledge.1.i.tooltip"
		trigger = { has_technology = tech_ag_ancient_unknown_building_research }
		allow = {
			custom_tooltip = { fail_text = "ag_requires_ancient_knowledges" check_variable = { which = ag_ancient_knowledge_var value >= 2 } }
			custom_tooltip = { fail_text = "ag_requires_no_ancient_knowledges_cooldown" NOT = { has_country_flag = ag_ancient_knowledges_cooldown } }
			resource_stockpile_compare = { resource = minor_artifacts value >= 30 }
			resource_stockpile_compare = { resource = sr_living_metal value >= 750 }
			resource_stockpile_compare = { resource = nanites value >= 750 }
			resource_stockpile_compare = { resource = sr_dark_matter value >= 500 }
		}
		add_resource = { minor_artifacts = -30 sr_living_metal = -750 nanites = -750 sr_dark_matter = -500 }
		hidden_effect = {
			set_timed_country_flag = { flag = ag_ancient_knowledges_cooldown days = 3600 }
			ag_subtract_ancient_knowledge = { ag_value = 2 }
			country_event = { id = ag_ancient_knowledge.14 days = 3600 }
			ag_restart_ancient_knowledge_event = yes
		}
	}
	option = {
		name = "ag_ancient_knowledge.1.j"
		custom_gui = "ag_ancient_knowledge_option_2_alt"
		custom_tooltip = "ag_ancient_knowledge.1.j.tooltip"
		trigger = {
			NOT = { has_country_flag = ag_ancient_knowledge_1_j_flag }
			OR = {
				has_technology = tech_corvette_hull_2
				has_technology = tech_destroyer_hull_2
				has_technology = tech_cruiser_hull_2
				has_technology = tech_battleship_hull_2
				has_technology = tech_titan_hull_2
				has_technology = tech_ag_aura_battleship_hull_2
			}
			check_variable = { which = ag_num_ancient_ships value >= 2 }
		}
		allow = {
			custom_tooltip = { fail_text = "ag_requires_ancient_knowledges" check_variable = { which = ag_ancient_knowledge_var value >= 2 } }
			resource_stockpile_compare = { resource = minor_artifacts value >= 25 }
			resource_stockpile_compare = { resource = nanites value >= 600 }
		}
		add_resource = { minor_artifacts = -25 nanites = -600 }
		hidden_effect = {
			set_country_flag = ag_ancient_knowledge_1_j_flag
			ag_give_research_project = { ag_project_id = @ag_ship_hull_upgrade_project_id ag_progress = 1 }
			ag_subtract_ancient_knowledge = { ag_value = 2 }
			ag_restart_ancient_knowledge_event = yes
		}
	}
	option = {
		name = "ag_ancient_knowledge.1.k"
		custom_gui = "ag_ancient_knowledge_option_3_alt"
		custom_tooltip = "ag_ancient_knowledge.1.k.tooltip"
		trigger = {
			NOT = { has_country_flag = ag_ancient_knowledge_1_k_flag }
			OR = {
				has_technology = tech_corvette_hull_2
				has_technology = tech_destroyer_hull_2
				has_technology = tech_cruiser_hull_2
				has_technology = tech_battleship_hull_2
				has_technology = tech_titan_hull_2
				has_technology = tech_ag_aura_battleship_hull_2
			}
			check_variable = { which = ag_num_ancient_ships value >= 3 }
		}
		allow = {
			custom_tooltip = { fail_text = "ag_requires_ancient_knowledges" check_variable = { which = ag_ancient_knowledge_var value >= 3 } }
			resource_stockpile_compare = { resource = minor_artifacts value >= 50 }
			resource_stockpile_compare = { resource = nanites value >= 800 }
		}
		add_resource = { minor_artifacts = -50 nanites = -800 }
		hidden_effect = {
			set_country_flag = ag_ancient_knowledge_1_k_flag
			ag_give_research_project = { ag_project_id = @ag_ship_bow_upgrade_project_id ag_progress = 1 }
			ag_subtract_ancient_knowledge = { ag_value = 3 }
			ag_restart_ancient_knowledge_event = yes
		}
	}
	option = { name = "ag_ancient_knowledge.1.b1" custom_gui = "ag_ancient_knowledge_option"
		trigger = { any_owned_ship = { OR = {
			is_ship_size = ag_beta_station_type1_0
			is_ship_size = ag_beta_station_type1_1
		} } }
		hidden_effect = { country_event = { id = ag_ship_special.201 } }
	}
	option = { name = "ag_ancient_knowledge.1.c1" custom_gui = "ag_ancient_knowledge_option"
		trigger = { any_owned_ship = { OR = {
			is_ship_size = ag_gamma_station_0
			is_ship_size = ag_gamma_station_1
		} } }
		hidden_effect = { country_event = { id = ag_ship_special.301 } }
	}
	option = { name = "ag_ancient_knowledge.1.c2" custom_gui = "ag_ancient_knowledge_option"
		trigger = { any_owned_ship = { OR = {
			is_ship_size = ag_gamma_battlecruiser_0
			is_ship_size = ag_gamma_battlecruiser_1
		} } }
		hidden_effect = { country_event = { id = ag_ship_special.302 } }
	}
	option = { name = "ag_ancient_knowledge.1.c3" custom_gui = "ag_ancient_knowledge_option"
		trigger = { any_owned_ship = { OR = {
			is_ship_size = ag_gamma_escort_0
			is_ship_size = ag_gamma_escort_1
		} } }
		hidden_effect = { country_event = { id = ag_ship_special.303 } }
	}
	option = { name = "ag_ancient_knowledge.1.d1" custom_gui = "ag_ancient_knowledge_option"
		trigger = { any_owned_ship = { OR = {
			is_ship_size = ag_delta_titan_0
			is_ship_size = ag_delta_titan_1
		} } }
		hidden_effect = { country_event = { id = ag_ship_special.401 } }
	}
	option = { name = "ag_ancient_knowledge.1.d2" custom_gui = "ag_ancient_knowledge_option"
		trigger = { any_owned_ship = { OR = {
			is_ship_size = ag_delta_platform_0
			is_ship_size = ag_delta_platform_1
			is_ship_size = ag_delta_platform_00
			is_ship_size = ag_delta_platform_10
		} } }
		hidden_effect = { country_event = { id = ag_ship_special.402 } }
	}
	option = { name = "ag_ancient_knowledge.1.e1" custom_gui = "ag_ancient_knowledge_option"
		trigger = { any_owned_ship = { OR = {
			is_ship_size = ag_epsilon_titan_0
			is_ship_size = ag_epsilon_titan_1
		} } }
		hidden_effect = { country_event = { id = ag_ship_special.501 } }
	}
	option = { name = "ag_ancient_knowledge.1.g1" custom_gui = "ag_ancient_knowledge_option"
		trigger = { any_owned_ship = { OR = {
			is_ship_size = ag_zeta_titan
			is_ship_size = ag_zeta_titan_psi
		} } }
		hidden_effect = { country_event = { id = ag_ship_special.701 } }
	}
	option = { name = "ag_ancient_knowledge.1.g2" custom_gui = "ag_ancient_knowledge_option"
		trigger = { any_owned_ship = { OR = {
			is_ship_size = ag_zeta_battleship
			is_ship_size = ag_zeta_battleship_psi
		} } }
		hidden_effect = { country_event = { id = ag_ship_special.702 } }
	}
	option = { name = "ag_ancient_knowledge.1.g3" custom_gui = "ag_ancient_knowledge_option"
		trigger = { any_owned_ship = { OR = {
			is_ship_size = ag_zeta_destroyer
			is_ship_size = ag_zeta_destroyer_psi
		} } }
		hidden_effect = { country_event = { id = ag_ship_special.703 } }
	}
	option = { name = "ag_ancient_knowledge.1.g4" custom_gui = "ag_ancient_knowledge_option"
		trigger = { any_owned_ship = { OR = {
			is_ship_size = ag_ancient_zeta_psionic_container
			is_ship_size = ag_ancient_zeta_psionic_container_alt
		} } }
		hidden_effect = { country_event = { id = ag_ship_special.704 } }
	}
	option = { name = "ag_ancient_knowledge.1.251" custom_gui = "ag_ancient_knowledge_option"
		trigger = { any_owned_ship = { has_ship_flag = ag_lost_ancient_ship } }
		hidden_effect = { country_event = { id = ag_ship_special.2501 } }
	}
	option = { name = "ag_ancient_knowledge.1.261" custom_gui = "ag_ancient_knowledge_option"
		trigger = { any_owned_ship = { OR = {
			is_ship_size = ag_ancient_wandering_ship_0
			is_ship_size = ag_ancient_wandering_ship_1
		} } }
		hidden_effect = { country_event = { id = ag_ship_special.2601 } }
	}
}

# Notification for first time know ancient knowledge.
country_event = {
	id = ag_ancient_knowledge.2
	title = "ag_ancient_knowledge.2.name"
	desc = "ag_ancient_knowledge.2.desc"
	diplomatic = yes
	custom_gui = "ag_ancient_event_window"
	custom_gui_option = "ag_ancient_event_option"
	picture_event_data = { room = ag_event_throne_room }
	show_sound = event_mystic_reveal
	
	is_triggered_only = yes
	
	option = {
		name = "ag_ancient_knowledge.2.a"
		custom_tooltip = "ag_ancient_knowledge.2.a.tooltip"
	}
}

country_event = {
	id = ag_ancient_knowledge.11
	title = "ag_ancient_knowledge.11.name"
	desc = "ag_ancient_knowledge.11.desc"
	diplomatic = yes
	custom_gui = "ag_ancient_event_s_window"
	custom_gui_option = "ag_ancient_event_s_option"
	picture_event_data = { room = ag_event_throne_room }
	show_sound = event_default
	location = root.capital_scope
	
	is_triggered_only = yes

	option = {
		name = "ag_ancient_knowledge.11.a"
		custom_tooltip = "ag_ancient.66.a.tooltip"
		hidden_effect = { change_variable = { which = ag_class_5_singularity_counter value = 1 } }
	}
}
country_event = {
	id = ag_ancient_knowledge.12
	title = "ag_ancient_knowledge.12.name"
	desc = "ag_ancient_knowledge.12.desc"
	diplomatic = yes
	custom_gui = "ag_ancient_event_s_window"
	custom_gui_option = "ag_ancient_event_s_option"
	picture_event_data = { room = ag_event_throne_room }
	show_sound = event_default
	location = root.capital_scope
	
	is_triggered_only = yes

	option = {
		name = "ag_ancient_knowledge.12.a"
		custom_tooltip = "ag_ancient.67.a.tooltip"
		hidden_effect = { change_variable = { which = ag_matter_generator_counter value = 1 } }
	}
}
country_event = {
	id = ag_ancient_knowledge.13
	title = "ag_ancient_knowledge.13.name"
	desc = "ag_ancient_knowledge.13.desc"
	diplomatic = yes
	custom_gui = "ag_ancient_event_s_window"
	custom_gui_option = "ag_ancient_event_s_option"
	picture_event_data = { room = ag_event_throne_room }
	show_sound = event_default
	location = root.capital_scope
	
	is_triggered_only = yes

	option = {
		name = "ag_ancient_knowledge.13.a"
		custom_tooltip = "ag_ancient.68.a.tooltip"
		hidden_effect = { change_variable = { which = ag_fabrication_facility_counter value = 1 } }
	}
}
country_event = {
	id = ag_ancient_knowledge.14
	title = "ag_ancient_knowledge.14.name"
	desc = "ag_ancient_knowledge.14.desc"
	diplomatic = yes
	custom_gui = "ag_ancient_event_s_window"
	custom_gui_option = "ag_ancient_event_s_option"
	picture_event_data = { room = ag_event_throne_room }
	show_sound = event_default
	location = root.capital_scope
	
	is_triggered_only = yes

	option = {
		name = "ag_ancient_knowledge.14.a"
		custom_tooltip = "ag_ancient.69.a.tooltip"
		hidden_effect = { change_variable = { which = ag_ancient_unknown_building_counter value = 1 } }
	}
}
country_event = {
	id = ag_ancient_knowledge.15
	title = "ag_ancient_knowledge.15.name"
	desc = "ag_ancient_knowledge.15.desc"
	diplomatic = yes
	custom_gui = "ag_ancient_event_s_window"
	custom_gui_option = "ag_ancient_event_s_option"
	picture_event_data = { room = ag_event_galactic_senate_room }
	show_sound = event_default
	location = root.capital_scope
	
	is_triggered_only = yes

	option = {
		name = "ag_ancient_knowledge.15.a"
		if = {
			limit = { NOR = {
				has_technology = tech_ag_ship_hull_upgrade
				has_tech_option = tech_ag_ship_hull_upgrade
			} }
			add_research_option = tech_ag_ship_hull_upgrade
			add_tech_progress = { tech = tech_ag_ship_hull_upgrade progress = 0.10 }
		}
	}
}
country_event = {
	id = ag_ancient_knowledge.16
	title = "ag_ancient_knowledge.16.name"
	desc = "ag_ancient_knowledge.16.desc"
	diplomatic = yes
	custom_gui = "ag_ancient_event_s_window"
	custom_gui_option = "ag_ancient_event_s_option"
	picture_event_data = { room = ag_event_galactic_senate_room }
	show_sound = event_default
	location = root.capital_scope
	
	is_triggered_only = yes

	option = {
		name = "ag_ancient_knowledge.16.a"
		if = {
			limit = { NOR = {
				has_technology = tech_ag_ship_bow_upgrade
				has_tech_option = tech_ag_ship_bow_upgrade
			} }
			add_research_option = tech_ag_ship_bow_upgrade
			add_tech_progress = { tech = tech_ag_ship_bow_upgrade progress = 0.10 }
		}
	}
}

# Gain Ancient Knowledge on survey ancient systems
country_event = {
	id = ag_ancient_knowledge.21
	hide_window = yes
	is_triggered_only = yes

	trigger = {
		from = { ag_is_ancient_system = yes }
		exists = fromfrom
		fromfrom = { is_scope_type = fleet exists = leader }
	}

	immediate = {
		random_list = {
			50 = { }
			50 = {
				modifier = { factor = 1.5 fromfrom.leader = { has_trait = leader_trait_roamer } }
				modifier = { factor = 1.5 fromfrom.leader = { has_trait = leader_trait_maniacal } }
				modifier = { factor = 2 fromfrom.leader = { has_trait = leader_trait_meticulous } }
				modifier = { factor = 2 fromfrom.leader = { OR = { has_trait = leader_trait_archaeologist has_trait = leader_trait_archaeologist_ancrel } } }
				if = { limit = { fromfrom.leader = { has_skill = 1 } } set_variable = { which = ag_ancient_knowledge_temp value = 1 } }
				else_if = { limit = { fromfrom.leader = { has_skill = 2 } } set_variable = { which = ag_ancient_knowledge_temp value = 2 } }
				else_if = { limit = { fromfrom.leader = { has_skill = 3 } } set_variable = { which = ag_ancient_knowledge_temp value = 3 } }
				else_if = { limit = { fromfrom.leader = { has_skill = 4 } } set_variable = { which = ag_ancient_knowledge_temp value = 4 } }
				else_if = { limit = { fromfrom.leader = { has_skill = 5 } } set_variable = { which = ag_ancient_knowledge_temp value = 5 } }
				else_if = { limit = { fromfrom.leader = { has_skill = 6 } } set_variable = { which = ag_ancient_knowledge_temp value = 6 } }
				else_if = { limit = { fromfrom.leader = { has_skill = 7 } } set_variable = { which = ag_ancient_knowledge_temp value = 7 } }
				else_if = { limit = { fromfrom.leader = { has_skill = 8 } } set_variable = { which = ag_ancient_knowledge_temp value = 8 } }
				else_if = { limit = { fromfrom.leader = { has_skill = 9 } } set_variable = { which = ag_ancient_knowledge_temp value = 9 } }
				else_if = { limit = { fromfrom.leader = { has_skill > 9 } } set_variable = { which = ag_ancient_knowledge_temp value = 10 } }
				random_list = {
					10 = { subtract_variable = { which = ag_ancient_knowledge_temp value = 0.5 } }
					10 = { subtract_variable = { which = ag_ancient_knowledge_temp value = 0.25 } }
					10 = { change_variable = { which = ag_ancient_knowledge_temp value = 0.25 } }
					10 = { change_variable = { which = ag_ancient_knowledge_temp value = 0.5 } }
					10 = { }
				}
				# formula: 0.17 * ScientistSkills - 0.00425 * ScientistSkills^2.
				set_variable = { which = ag_ancient_knowledge_temp_2 value = ag_ancient_knowledge_temp }
				multiply_variable = { which = ag_ancient_knowledge_temp_2 value = ag_ancient_knowledge_temp }
				multiply_variable = { which = ag_ancient_knowledge_temp_2 value = 0.00425 }
				multiply_variable = { which = ag_ancient_knowledge_temp value = 0.17 }
				subtract_variable = { which = ag_ancient_knowledge_temp value = ag_ancient_knowledge_temp_2 }
				ag_add_ancient_knowledge = {
					ag_value = ag_ancient_knowledge_temp
					ag_notification = yes
					ag_notification_desc = "message_ag_gain_ancient_knowledge_survey_desc"
					ag_who = root.fromfrom
					ag_location = root.from
				}
				clear_variable = ag_ancient_knowledge_temp
				clear_variable = ag_ancient_knowledge_temp_2
			}
		}
	}
}

# Ancient Knowledge from iota enclave.
country_event = {
	id = ag_ancient_knowledge.22
	hide_window = yes
	is_triggered_only = yes
	trigger = { has_modifier = "ag_support_iota_enclave" }

	immediate = {
		random_list = {
			75 = { }
			25 = {
				random_owned_leader = {
					limit = { is_researching_area = physics }
					if = { limit = { has_skill = 1 } prev = { set_variable = { which = ag_ancient_knowledge_phy_temp value = 0.1 } } }
					else_if = { limit = { has_skill = 2 } prev = { set_variable = { which = ag_ancient_knowledge_phy_temp value = 0.2 } } }
					else_if = { limit = { has_skill = 3 } prev = { set_variable = { which = ag_ancient_knowledge_phy_temp value = 0.3 } } }
					else_if = { limit = { has_skill = 4 } prev = { set_variable = { which = ag_ancient_knowledge_phy_temp value = 0.4 } } }
					else_if = { limit = { has_skill = 5 } prev = { set_variable = { which = ag_ancient_knowledge_phy_temp value = 0.5 } } }
					else_if = { limit = { has_skill = 6 } prev = { set_variable = { which = ag_ancient_knowledge_phy_temp value = 0.6 } } }
					else_if = { limit = { has_skill = 7 } prev = { set_variable = { which = ag_ancient_knowledge_phy_temp value = 0.7 } } }
					else_if = { limit = { has_skill = 8 } prev = { set_variable = { which = ag_ancient_knowledge_phy_temp value = 0.8 } } }
					else_if = { limit = { has_skill = 9 } prev = { set_variable = { which = ag_ancient_knowledge_phy_temp value = 0.9 } } }
					else_if = { limit = { has_skill > 9 } prev = { set_variable = { which = ag_ancient_knowledge_phy_temp value = 1 } } }
					# set_variable = { which = ag_leader_var_temp value = 0 }
					# export_trigger_value_to_variable = { trigger = has_skill variable = ag_leader_var_temp }
					# multiply_variable = { which = ag_leader_var_temp value = 0.1 }
					# prev = { set_variable = { which = ag_ancient_knowledge_phy_temp value = { variable = ag_leader_var_temp scope = prev } } }
					# clear_variable = ag_leader_var_temp
				}
				random_owned_leader = {
					limit = { is_researching_area = society }
					if = { limit = { has_skill = 1 } prev = { set_variable = { which = ag_ancient_knowledge_soc_temp value = 0.1 } } }
					else_if = { limit = { has_skill = 2 } prev = { set_variable = { which = ag_ancient_knowledge_soc_temp value = 0.2 } } }
					else_if = { limit = { has_skill = 3 } prev = { set_variable = { which = ag_ancient_knowledge_soc_temp value = 0.3 } } }
					else_if = { limit = { has_skill = 4 } prev = { set_variable = { which = ag_ancient_knowledge_soc_temp value = 0.4 } } }
					else_if = { limit = { has_skill = 5 } prev = { set_variable = { which = ag_ancient_knowledge_soc_temp value = 0.5 } } }
					else_if = { limit = { has_skill = 6 } prev = { set_variable = { which = ag_ancient_knowledge_soc_temp value = 0.6 } } }
					else_if = { limit = { has_skill = 7 } prev = { set_variable = { which = ag_ancient_knowledge_soc_temp value = 0.7 } } }
					else_if = { limit = { has_skill = 8 } prev = { set_variable = { which = ag_ancient_knowledge_soc_temp value = 0.8 } } }
					else_if = { limit = { has_skill = 9 } prev = { set_variable = { which = ag_ancient_knowledge_soc_temp value = 0.9 } } }
					else_if = { limit = { has_skill > 9 } prev = { set_variable = { which = ag_ancient_knowledge_soc_temp value = 1 } } }
					# set_variable = { which = ag_leader_var_temp value = 0 }
					# export_trigger_value_to_variable = { trigger = has_skill variable = ag_leader_var_temp }
					# multiply_variable = { which = ag_leader_var_temp value = 0.1 }
					# prev = { set_variable = { which = ag_ancient_knowledge_soc_temp value = { variable = ag_leader_var_temp scope = prev } } }
					# clear_variable = ag_leader_var_temp
				}
				random_owned_leader = {
					limit = { is_researching_area = engineering }
					if = { limit = { has_skill = 1 } prev = { set_variable = { which = ag_ancient_knowledge_eng_temp value = 0.1 } } }
					else_if = { limit = { has_skill = 2 } prev = { set_variable = { which = ag_ancient_knowledge_eng_temp value = 0.2 } } }
					else_if = { limit = { has_skill = 3 } prev = { set_variable = { which = ag_ancient_knowledge_eng_temp value = 0.3 } } }
					else_if = { limit = { has_skill = 4 } prev = { set_variable = { which = ag_ancient_knowledge_eng_temp value = 0.4 } } }
					else_if = { limit = { has_skill = 5 } prev = { set_variable = { which = ag_ancient_knowledge_eng_temp value = 0.5 } } }
					else_if = { limit = { has_skill = 6 } prev = { set_variable = { which = ag_ancient_knowledge_eng_temp value = 0.6 } } }
					else_if = { limit = { has_skill = 7 } prev = { set_variable = { which = ag_ancient_knowledge_eng_temp value = 0.7 } } }
					else_if = { limit = { has_skill = 8 } prev = { set_variable = { which = ag_ancient_knowledge_eng_temp value = 0.8 } } }
					else_if = { limit = { has_skill = 9 } prev = { set_variable = { which = ag_ancient_knowledge_eng_temp value = 0.9 } } }
					else_if = { limit = { has_skill > 9 } prev = { set_variable = { which = ag_ancient_knowledge_eng_temp value = 1 } } }
					# set_variable = { which = ag_leader_var_temp value = 0 }
					# export_trigger_value_to_variable = { trigger = has_skill variable = ag_leader_var_temp }
					# multiply_variable = { which = ag_leader_var_temp value = 0.1 }
					# prev = { set_variable = { which = ag_ancient_knowledge_eng_temp value = { variable = ag_leader_var_temp scope = prev } } }
					# clear_variable = ag_leader_var_temp
				}
				random_list = {
					10 = { subtract_variable = { which = ag_ancient_knowledge_phy_temp value = 0.05 } }
					10 = { subtract_variable = { which = ag_ancient_knowledge_phy_temp value = 0.025 } }
					10 = { change_variable = { which = ag_ancient_knowledge_phy_temp value = 0.025 } }
					10 = { change_variable = { which = ag_ancient_knowledge_phy_temp value = 0.05 } }
					10 = { }
				}
				random_list = {
					10 = { subtract_variable = { which = ag_ancient_knowledge_soc_temp value = 0.05 } }
					10 = { subtract_variable = { which = ag_ancient_knowledge_soc_temp value = 0.025 } }
					10 = { change_variable = { which = ag_ancient_knowledge_soc_temp value = 0.025 } }
					10 = { change_variable = { which = ag_ancient_knowledge_soc_temp value = 0.05 } }
					10 = { }
				}
				random_list = {
					10 = { subtract_variable = { which = ag_ancient_knowledge_eng_temp value = 0.05 } }
					10 = { subtract_variable = { which = ag_ancient_knowledge_eng_temp value = 0.025 } }
					10 = { change_variable = { which = ag_ancient_knowledge_eng_temp value = 0.025 } }
					10 = { change_variable = { which = ag_ancient_knowledge_eng_temp value = 0.05 } }
					10 = { }
				}
				set_variable = { which = ag_ancient_knowledge_researcher_temp value = ag_ancient_knowledge_phy_temp }
				change_variable = { which = ag_ancient_knowledge_researcher_temp value = ag_ancient_knowledge_soc_temp }
				change_variable = { which = ag_ancient_knowledge_researcher_temp value = ag_ancient_knowledge_eng_temp }
				divide_variable = { which = ag_ancient_knowledge_researcher_temp value = 4.5 }
				random_list = {
					75 = { }
					10 = { subtract_variable = { which = ag_ancient_knowledge_researcher_temp value = 0.15 } }
					10 = { subtract_variable = { which = ag_ancient_knowledge_researcher_temp value = 0.14 } }
					10 = { subtract_variable = { which = ag_ancient_knowledge_researcher_temp value = 0.13 } }
					10 = { subtract_variable = { which = ag_ancient_knowledge_researcher_temp value = 0.12 } }
					10 = { subtract_variable = { which = ag_ancient_knowledge_researcher_temp value = 0.11 } }
					10 = { subtract_variable = { which = ag_ancient_knowledge_researcher_temp value = 0.1 } }
					10 = { subtract_variable = { which = ag_ancient_knowledge_researcher_temp value = 0.09 } }
					10 = { subtract_variable = { which = ag_ancient_knowledge_researcher_temp value = 0.08 } }
					10 = { subtract_variable = { which = ag_ancient_knowledge_researcher_temp value = 0.07 } }
					10 = { subtract_variable = { which = ag_ancient_knowledge_researcher_temp value = 0.06 } }
					10 = { subtract_variable = { which = ag_ancient_knowledge_researcher_temp value = 0.05 } }
					10 = { subtract_variable = { which = ag_ancient_knowledge_researcher_temp value = 0.04 } }
					10 = { subtract_variable = { which = ag_ancient_knowledge_researcher_temp value = 0.03 } }
					10 = { subtract_variable = { which = ag_ancient_knowledge_researcher_temp value = 0.02 } }
					10 = { subtract_variable = { which = ag_ancient_knowledge_researcher_temp value = 0.01 } }
				}
				if = {
					limit = { check_variable = { which = ag_ancient_knowledge_researcher_temp value > 0 } }
					ag_add_ancient_knowledge = {
						ag_value = ag_ancient_knowledge_temp
						ag_notification = yes
						ag_notification_desc = "message_ag_gain_ancient_knowledge_iota_desc"
						ag_location = event_target:ag_ancient_iota_star
					}
				}
				clear_variable = ag_ancient_knowledge_phy_temp
				clear_variable = ag_ancient_knowledge_soc_temp
				clear_variable = ag_ancient_knowledge_eng_temp
				clear_variable = ag_ancient_knowledge_researcher_temp
			}
		}
	}
}

# Ancient Knowledge from research ancient ships
country_event = {
	id = ag_ancient_knowledge.23
	hide_window = yes
	is_triggered_only = yes

	immediate = {
		random_list = {
			50 = { }
			50 = {
				set_variable = { which = ag_ancient_knowledge_2_temp value = 1 }
				random_list = {
					10 = { set_variable = { which = ag_ancient_knowledge_2_temp_alt value = 0.5 } }
					10 = { set_variable = { which = ag_ancient_knowledge_2_temp_alt value = 0.475 } }
					10 = { set_variable = { which = ag_ancient_knowledge_2_temp_alt value = 0.45 } }
					10 = { set_variable = { which = ag_ancient_knowledge_2_temp_alt value = 0.425 } }
					10 = { set_variable = { which = ag_ancient_knowledge_2_temp_alt value = 0.4 } }
					10 = { set_variable = { which = ag_ancient_knowledge_2_temp_alt value = 0.375 } }
					10 = { set_variable = { which = ag_ancient_knowledge_2_temp_alt value = 0.35 } }
					10 = { set_variable = { which = ag_ancient_knowledge_2_temp_alt value = 0.325 } }
					10 = { set_variable = { which = ag_ancient_knowledge_2_temp_alt value = 0.3 } }
					10 = { set_variable = { which = ag_ancient_knowledge_2_temp_alt value = 0.275 } }
					10 = { set_variable = { which = ag_ancient_knowledge_2_temp_alt value = 0.25 } }
					10 = { set_variable = { which = ag_ancient_knowledge_2_temp_alt value = 0.225 } }
					10 = { set_variable = { which = ag_ancient_knowledge_2_temp_alt value = 0.2 } }
					10 = { set_variable = { which = ag_ancient_knowledge_2_temp_alt value = 0.175 } }
					10 = { set_variable = { which = ag_ancient_knowledge_2_temp_alt value = 0.15 } }
					10 = { set_variable = { which = ag_ancient_knowledge_2_temp_alt value = 0.125 } }
					10 = { set_variable = { which = ag_ancient_knowledge_2_temp_alt value = 0.1 } }
					10 = { set_variable = { which = ag_ancient_knowledge_2_temp_alt value = 0.075 } }
					10 = { set_variable = { which = ag_ancient_knowledge_2_temp_alt value = 0.05 } }
					10 = { set_variable = { which = ag_ancient_knowledge_2_temp_alt value = 0.025 } }
					10 = { set_variable = { which = ag_ancient_knowledge_2_temp_alt value = 0 } }
				}
				random_list = {
					50 = { }
					50 = { multiply_variable = { which = ag_ancient_knowledge_2_temp_alt value = -1 } }
				}
				change_variable = { which = ag_ancient_knowledge_2_temp value = ag_ancient_knowledge_2_temp_alt }
				ag_add_ancient_knowledge = {
					ag_value = ag_ancient_knowledge_2_temp
					ag_notification = yes
					ag_notification_desc = "message_ag_gain_ancient_knowledge_ancient_ships_desc"
				}
				clear_variable = ag_ancient_knowledge_2_temp
				clear_variable = ag_ancient_knowledge_2_temp_alt
			}
		}
	}
}
country_event = {
	id = ag_ancient_knowledge.24
	hide_window = yes
	is_triggered_only = yes

	immediate = {
		random_list = {
			25 = { }
			75 = {
				set_variable = { which = ag_ancient_knowledge_3_temp value = 1.25 }
				random_list = {
					10 = { set_variable = { which = ag_ancient_knowledge_3_temp_alt value = 0.5 } }
					10 = { set_variable = { which = ag_ancient_knowledge_3_temp_alt value = 0.475 } }
					10 = { set_variable = { which = ag_ancient_knowledge_3_temp_alt value = 0.45 } }
					10 = { set_variable = { which = ag_ancient_knowledge_3_temp_alt value = 0.425 } }
					10 = { set_variable = { which = ag_ancient_knowledge_3_temp_alt value = 0.4 } }
					10 = { set_variable = { which = ag_ancient_knowledge_3_temp_alt value = 0.375 } }
					10 = { set_variable = { which = ag_ancient_knowledge_3_temp_alt value = 0.35 } }
					10 = { set_variable = { which = ag_ancient_knowledge_3_temp_alt value = 0.325 } }
					10 = { set_variable = { which = ag_ancient_knowledge_3_temp_alt value = 0.3 } }
					10 = { set_variable = { which = ag_ancient_knowledge_3_temp_alt value = 0.275 } }
					10 = { set_variable = { which = ag_ancient_knowledge_3_temp_alt value = 0.25 } }
					10 = { set_variable = { which = ag_ancient_knowledge_3_temp_alt value = 0.225 } }
					10 = { set_variable = { which = ag_ancient_knowledge_3_temp_alt value = 0.2 } }
					10 = { set_variable = { which = ag_ancient_knowledge_3_temp_alt value = 0.175 } }
					10 = { set_variable = { which = ag_ancient_knowledge_3_temp_alt value = 0.15 } }
					10 = { set_variable = { which = ag_ancient_knowledge_3_temp_alt value = 0.125 } }
					10 = { set_variable = { which = ag_ancient_knowledge_3_temp_alt value = 0.1 } }
					10 = { set_variable = { which = ag_ancient_knowledge_3_temp_alt value = 0.075 } }
					10 = { set_variable = { which = ag_ancient_knowledge_3_temp_alt value = 0.05 } }
					10 = { set_variable = { which = ag_ancient_knowledge_3_temp_alt value = 0.025 } }
					10 = { set_variable = { which = ag_ancient_knowledge_3_temp_alt value = 0 } }
				}
				random_list = {
					50 = { }
					50 = { multiply_variable = { which = ag_ancient_knowledge_3_temp_alt value = -1 } }
				}
				change_variable = { which = ag_ancient_knowledge_3_temp value = ag_ancient_knowledge_3_temp_alt }
				ag_add_ancient_knowledge = {
					ag_value = ag_ancient_knowledge_3_temp
					ag_notification = yes
					ag_notification_desc = "message_ag_gain_ancient_knowledge_ancient_ships_desc"
				}
				clear_variable = ag_ancient_knowledge_3_temp
				clear_variable = ag_ancient_knowledge_3_temp_alt
			}
		}
	}
}

# Gain Ancient Knowledge from explore ancient ruins
country_event = {
	id = ag_ancient_knowledge.25
	title = "ag_ancient_knowledge.25.name"
	desc = "ag_ancient_knowledge.25.desc"
	diplomatic = yes
	custom_gui = "ag_ancient_event_s_window"
	custom_gui_option = "ag_ancient_event_s_option"
	picture_event_data = { room = ag_event_archaeological_dig_room }
	show_sound = event_default
	location = from
	
	is_triggered_only = yes

	immediate = {
		from = { every_owned_pop = { root = { change_variable = { which = ag_planet_pop_counter value = 1 } } } }
		if = {
			limit = { check_variable = { which = ag_planet_pop_counter value < 10 } }
			set_variable = { which = ag_ancient_knowledge_planet_temp value = 0.75 }
		}
		else_if = {
			limit = { check_variable = { which = ag_planet_pop_counter value < 40 } }
			set_variable = { which = ag_ancient_knowledge_planet_temp value = 1 }
		}
		else_if = {
			limit = { check_variable = { which = ag_planet_pop_counter value < 80 } }
			set_variable = { which = ag_ancient_knowledge_planet_temp value = 1.25 }
		}
		else_if = {
			limit = { always = yes }
			set_variable = { which = ag_ancient_knowledge_planet_temp value = 1.5 }
		}
		if = {
			limit = { from = { exists = sector sector = { exists = leader } } }
			from.sector.leader = {
				if = { limit = { has_skill = 1 } prev = { set_variable = { which = ag_ancient_knowledge_planet_factor value = 0.1 } } }
				else_if = { limit = { has_skill = 2 } prev = { set_variable = { which = ag_ancient_knowledge_planet_factor value = 0.2 } } }
				else_if = { limit = { has_skill = 3 } prev = { set_variable = { which = ag_ancient_knowledge_planet_factor value = 0.3 } } }
				else_if = { limit = { has_skill = 4 } prev = { set_variable = { which = ag_ancient_knowledge_planet_factor value = 0.4 } } }
				else_if = { limit = { has_skill = 5 } prev = { set_variable = { which = ag_ancient_knowledge_planet_factor value = 0.5 } } }
				else_if = { limit = { has_skill = 6 } prev = { set_variable = { which = ag_ancient_knowledge_planet_factor value = 0.6 } } }
				else_if = { limit = { has_skill = 7 } prev = { set_variable = { which = ag_ancient_knowledge_planet_factor value = 0.7 } } }
				else_if = { limit = { has_skill = 8 } prev = { set_variable = { which = ag_ancient_knowledge_planet_factor value = 0.8 } } }
				else_if = { limit = { has_skill = 9 } prev = { set_variable = { which = ag_ancient_knowledge_planet_factor value = 0.9 } } }
				else_if = { limit = { has_skill > 9 } prev = { set_variable = { which = ag_ancient_knowledge_planet_factor value = 1 } } }
				# set_variable = { which = ag_leader_var_temp value = 0 }
				# export_trigger_value_to_variable = { trigger = has_skill variable = ag_leader_var_temp }
				# multiply_variable = { which = ag_leader_var_temp value = 0.1 }
				# prev = { set_variable = { which = ag_ancient_knowledge_planet_factor value = { variable = ag_leader_var_temp scope = prev } } }
				# clear_variable = ag_leader_var_temp
			}
		}
		else = { set_variable = { which = ag_ancient_knowledge_planet_factor value = 0 } }
		change_variable = { which = ag_ancient_knowledge_planet_factor value = 0.5 }
		random_list = {
			10 = { }
			10 = { change_variable = { which = ag_ancient_knowledge_planet_factor value = 0.1 } }
			10 = { change_variable = { which = ag_ancient_knowledge_planet_factor value = 0.075 } }
			10 = { change_variable = { which = ag_ancient_knowledge_planet_factor value = 0.02 } }
			10 = { change_variable = { which = ag_ancient_knowledge_planet_factor value = 0.025 } }
			10 = { subtract_variable = { which = ag_ancient_knowledge_planet_factor value = 0.1 } }
			10 = { subtract_variable = { which = ag_ancient_knowledge_planet_factor value = 0.075 } }
			10 = { subtract_variable = { which = ag_ancient_knowledge_planet_factor value = 0.02 } }
			10 = { subtract_variable = { which = ag_ancient_knowledge_planet_factor value = 0.025 } }
		}
		multiply_variable = { which = ag_ancient_knowledge_planet_temp value = ag_ancient_knowledge_planet_factor }
	}

	after = {
		clear_variable = ag_ancient_knowledge_planet_temp
		clear_variable = ag_ancient_knowledge_planet_factor
		clear_variable = ag_planet_pop_counter
	}

	option = {
		name = "ag_ancient_knowledge.25.a"
		ag_add_ancient_knowledge = {
			ag_value = ag_ancient_knowledge_planet_temp
			ag_custom_tooltip = "ag_ancient_knowledge.25.a.tooltip"
			ag_notification_desc = ""
		}
	}
}

# Gain Ancient Knowledge from building ancient ships
country_event = {
	id = ag_ancient_knowledge.26
	hide_window = yes
	is_triggered_only = yes
	immediate = {
		random_list = {
			98 = { }
			2 = {
				ag_add_ancient_knowledge = {
					ag_value = 0.5
					ag_notification = yes
					ag_notification_desc = "message_ag_gain_ancient_knowledge_built_ships_desc"
				}
			}
		}
	}
}
ship_event = {
	id = ag_ancient_knowledge.27
	hide_window = yes
	is_triggered_only = yes

	trigger = {
		OR = {
			is_ship_size = ag_beta_station_type1_dummy_alt
			is_ship_size = ag_gamma_battlecruiser_0
			is_ship_size = ag_gamma_battlecruiser_1
			is_ship_size = ag_gamma_escort_0
			is_ship_size = ag_gamma_escort_1
			is_ship_size = ag_delta_platform_00
			is_ship_size = ag_delta_platform_10
			is_ship_size = ag_ancient_zeta_psionic_container
			is_ship_size = ag_ancient_zeta_psionic_container_alt
		}
	}

	immediate = { owner = { country_event = { id = ag_ancient_knowledge.26 } } }
}

# Gain Ancient Knowledge from destroying ancient ships
country_event = {
	id = ag_ancient_knowledge.28
	hide_window = yes
	is_triggered_only = yes
	immediate = {
		set_variable = { which = ag_ancient_knowledge_d_temp value = 1 }
		random_list = {
			10 = { change_variable = { which = ag_ancient_knowledge_d_temp value = 0.5 } }
			10 = { change_variable = { which = ag_ancient_knowledge_d_temp value = 0.4 } }
			10 = { change_variable = { which = ag_ancient_knowledge_d_temp value = 0.3 } }
			10 = { change_variable = { which = ag_ancient_knowledge_d_temp value = 0.2 } }
			10 = { change_variable = { which = ag_ancient_knowledge_d_temp value = 0.1 } }
			10 = { subtract_variable = { which = ag_ancient_knowledge_d_temp value = 0.5 } }
			10 = { subtract_variable = { which = ag_ancient_knowledge_d_temp value = 0.4 } }
			10 = { subtract_variable = { which = ag_ancient_knowledge_d_temp value = 0.3 } }
			10 = { subtract_variable = { which = ag_ancient_knowledge_d_temp value = 0.2 } }
			10 = { subtract_variable = { which = ag_ancient_knowledge_d_temp value = 0.1 } }
			10 = { }
		}
		random_list = {
			10 = { change_variable = { which = ag_ancient_knowledge_d_temp value = 0.05 } }
			10 = { change_variable = { which = ag_ancient_knowledge_d_temp value = 0.0375 } }
			10 = { change_variable = { which = ag_ancient_knowledge_d_temp value = 0.025 } }
			10 = { change_variable = { which = ag_ancient_knowledge_d_temp value = 0.0125 } }
			10 = { subtract_variable = { which = ag_ancient_knowledge_d_temp value = 0.05 } }
			10 = { subtract_variable = { which = ag_ancient_knowledge_d_temp value = 0.0375 } }
			10 = { subtract_variable = { which = ag_ancient_knowledge_d_temp value = 0.025 } }
			10 = { subtract_variable = { which = ag_ancient_knowledge_d_temp value = 0.0125 } }
			10 = { }
		}
		ag_add_ancient_knowledge = {
			ag_value = ag_ancient_knowledge_d_temp
			ag_notification = yes
			ag_notification_desc = "message_ag_gain_ancient_knowledge_destroyed_ships_desc"
		}
	}
	after = { clear_variable = ag_ancient_knowledge_d_temp }
}
