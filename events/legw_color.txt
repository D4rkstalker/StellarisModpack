namespace = legw_color

# Colored on survey planet if legendary
ship_event = {
	id = legw_color.1
	hide_window = yes
	location = from

	is_triggered_only = yes
		
	trigger = {
		from = {
			has_legw_color = yes
		}
	}
	immediate = {
		from = {
			set_name = {
				key = "NAME_legw_color_planet"
				variable_string = "[This.GetName]"
				}
			set_planet_flag = "pf_colored"
		}
	}

}
ship_event = {
	id = legw_color.11
	hide_window = yes
	location = from

	is_triggered_only = yes
		
	trigger = {
		from = {
			OR = {
				has_modifier = "golden_city"
				has_modifier = "legw_prim_admins"
				has_modifier = "legw_prim_nature"
				has_modifier = "legw_prim_tech"
				has_modifier = "legw_prim_robo"
				has_modifier = "legw_prim_defense"
				has_modifier = "legw_prim_ships"
				has_modifier = "legw_prim_mega"
				has_modifier = "legw_prim_vip"
			}
		}
	}
	immediate = {
		from = {
			set_name = {
				key = "NAME_legw_color_planet"
				variable_string = "[This.GetName]"
			}
			set_planet_flag = "pf_colored"
		}
	}

}
# For Terraforms and Megastructures completed
planet_event = {
	id = legw_color.2
	hide_window = yes
	is_triggered_only = yes
	
	immediate = {
		this = {
			if = {
				limit = {
					NOT = { has_planet_flag = "pf_colored" }
					has_legw_color = yes
				}
				set_name = {
					key = "NAME_legw_color_planet"
					variable_string = "[This.GetName]"
				}
				set_planet_flag = "pf_colored"
			}
		}
	} 
}

# Generic Event to color all legendary planets on map (not used atm)
# spoils legendaries before
event = {
	id = legw_color.3
	hide_window = yes
	is_triggered_only = yes
	
	immediate = {
		every_galaxy_planet = {
			if = {
				limit = {
					NOT = { has_planet_flag = "pf_colored" }
					has_legw_color = yes
				}
				set_name = {
					key = "NAME_legw_color_planet"
					variable_string = "[This.GetName]"
				}
				set_planet_flag = "pf_colored"
			}
		}
	} 
}