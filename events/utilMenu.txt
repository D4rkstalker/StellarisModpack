namespace = agencyMenu

country_event = { #Last check to make sure no AI ends up here
    id = agencyMenu.1 
    is_triggered_only = yes
    hide_window = yes

    immediate = {
        if = {
            limit = {
                is_ai = yes
            } break = yes
        }
        else = {
            country_event = { id = agencyMenu.0 }
        }
    }
}

country_event = {
    id = agencyMenu.0 
    is_triggered_only = yes
    diplomatic = yes
    title = ""
    desc = ""
    custom_gui = "quibble_intelligence_cells"

    picture_event_data = {
		portrait = event_target:quibble_leader
		room = quibble_5_room
	}

    immediate = {
        ##### GET COUNTER INTEL LEVELS OF TARGETS #######
        getCounterIntelLevelTargetBeta = yes
        getCounterIntelLevelTargetAlpha = yes

        save_event_target_as = playerAgency
            
        #### GET CURRENT INTEL POINTS, CANT PUT REAL RESOURCE DISPLAY IN THIS MENU, GOTTA FUDGE IT ####
        getIntelPointsAmountAlpha = yes
        getIntelPointsAmountBeta = yes

        if = {
            limit = {
                nor = {
                    has_country_flag = cover_domestic_alpha
                    has_country_flag = cover_foreign_alpha
                }
            }
            set_country_flag = cover_domestic_alpha
            
        }
        if = {
            limit = {
                nor = {
                    has_country_flag = cover_domestic_beta
                    has_country_flag = cover_foreign_beta
                }
            }
            set_country_flag = cover_domestic_beta
        } 
    }

    option = { #Back
        name = closeSpyHidden.name
        custom_gui = "spyHiddenCloseButton"
        remove_country_flag = spyMenuOpen
    }


### DUMMY GUI OPTIONS - DOWN ########
    #country name
    option = {
        name = AlphaF-TName
        custom_tooltip = "AlphaF-TName.a" 
        allow = {
			custom_tooltip = {
				fail_text = "blankFailTooltip" 
				always = no
			}		
		}
        custom_gui = "Alpha_F_targetNameGUI"
        trigger = {
            has_country_flag = cover_domestic_alpha
            has_country_flag = hasAlphaTarget
            not = {
                has_country_flag = convertingAlpha-F-to-D
            }
        }
    }

    #unaasigned
    option = {
        name = AlphaF-Unnasigned
        custom_tooltip = "AlphaF-Unnasigned.a" 
        allow = {
			custom_tooltip = {
				fail_text = "blankFailTooltip"
				always = no
			}		
		}
        custom_gui = "Alpha_F_noTargetGUI"
        trigger = { 
            or = {
                has_country_flag = noAlphaTarget
                has_country_flag = convertingAlpha-F-to-D
            }
     
        }
    }
    


    #Intel - LOW
    option = {
        name = counterIntel_Low
        custom_tooltip = "toolTipIntelReportLow" 
        allow = {
            custom_tooltip = {
                fail_text = "blankFailTooltip"
                always = no
            }		
        }
        custom_gui = "alphaF_IntelReport"
        trigger = {
            check_variable = {
                which = defenceLevelVarAlpha
                value <= 1
            }
            has_country_flag = cover_domestic_alpha
            has_country_flag = hasAlphaTarget
            not = {
                has_country_flag = convertingAlpha-F-to-D
            }
        }
    }
    #Intel - MEDIUM
    option = {
        name = counterIntel_Medium
        custom_tooltip = "toolTipIntelReportMedium" 
        allow = {
            custom_tooltip = {
                fail_text = "blankFailTooltip"
                always = no
            }		
        }
        custom_gui = "alphaF_IntelReport"
        trigger = {
            check_variable = {
                which = defenceLevelVarAlpha
                value = 2
            }
            has_country_flag = cover_domestic_alpha
            has_country_flag = hasAlphaTarget
            not = {
                has_country_flag = convertingAlpha-F-to-D
            }
        }
    }
    #Intel - HIGH
    option = {
        name = counterIntel_High
        custom_tooltip = "toolTipIntelReportHigh" 
        allow = {
            custom_tooltip = {
                fail_text = "blankFailTooltip"
                always = no
            }		
        }
        custom_gui = "alphaF_IntelReport"
        trigger = {
            check_variable = {
                which = defenceLevelVarAlpha
                value = 3
            }
            has_country_flag = cover_domestic_alpha
            has_country_flag = hasAlphaTarget
            not = {
                has_country_flag = convertingAlpha-F-to-D
            }
        }
    }
    #Intel - VERY HIGH
    option = {
        name = counterIntel_VeryHigh
        custom_tooltip = "toolTipIntelReportVeryHigh" 
        allow = {
            custom_tooltip = {
                fail_text = "blankFailTooltip"
                always = no
            }		
        }
        custom_gui = "alphaF_IntelReport"
        trigger = {
            check_variable = {
                which = defenceLevelVarAlpha
                value >= 4
            }
            has_country_flag = cover_domestic_alpha
            has_country_flag = hasAlphaTarget
            not = {
                has_country_flag = convertingAlpha-F-to-D
            }
        }
    }



    #Intelligence Report UNNASIGNED
    option = {
        name = AlphaF-IntelReport-Unnasigned
        custom_tooltip = "AlphaF-Unnasigned.a" 
        allow = {
			custom_tooltip = {
				fail_text = "blankFailTooltip"
				always = no
			}		
		}
        custom_gui = "alphaF_IntelReport"
        trigger = { 
            has_country_flag = cover_domestic_alpha
            or = {
                has_country_flag = noAlphaTarget
                has_country_flag = convertingAlpha-F-to-D
            }
        }
    }


    ########## OPERATIONS ################
    ##operation type - Gathering Intelligence
    option = {
        name = AlphaF-GathIntel
        custom_tooltip = AlphaF-GathIntel.a
        allow = {
			custom_tooltip = {
				fail_text = "blankFailTooltip" 
				always = no
			}		
		}
        custom_gui = "Alpha_F_opTypeGUI"
        trigger = { 
            nor = { 
                has_country_flag = convertingAlpha-F-to-D
                has_country_flag = noAlphaTarget
                has_country_flag = saboRep
                has_country_flag = studyTech
                has_country_flag = fundCrime   
                has_country_flag = swingEthics 
                has_country_flag = sowUnrest
                has_country_flag = alphaF_OpportunityOngoing
                
            }
        } 
    }

    option = { #no operation - unassinged
        name = AlphaF-Op-Unnasigned
        custom_tooltip = noClickANoOperation
        allow = {
			custom_tooltip = {
				fail_text = "blankFailTooltip" 
				always = no
			}		
		}
        custom_gui = "Alpha_F_opTypeGUI"
        trigger = { 
            or = {
                nor = { 
                    has_country_flag = saboRep
                    has_country_flag = sowUnrest
                    has_country_flag = studyTech
                    has_country_flag = fundCrime    
                    has_country_flag = swingEthics 
                    has_country_flag = hasAlphaTarget
                    has_country_flag = alphaF_OpportunityOngoing
                }
                has_country_flag = convertingAlpha-F-to-D
            }
        } 
    }

        
    option = { #OPPORTUNITY MISSION
        name = AlphaF-opportunityMission
        custom_tooltip = AlphaF-opportunityMission.a
        allow = {
			custom_tooltip = {
				fail_text = "blankFailTooltip" 
				always = no
			}		
		}
        custom_gui = "Alpha_F_opTypeGUI"
        trigger = { has_country_flag = alphaF_OpportunityOngoing }
    }

    option = { #OPERATION TYPE - saboRep
        name = AlphaF-saboRep
        custom_tooltip = AlphaF-saboRep.a
        allow = {
			custom_tooltip = {
				fail_text = "blankFailTooltip" 
				always = no
			}		
		}
        custom_gui = "Alpha_F_opTypeGUI"
        trigger = { has_country_flag = saboRep not = { has_country_flag = alphaF_OpportunityOngoing } }
    }


    option = { #OPERATION TYPE - sowUnrest
        name = AlphaF-sowUnrest
        custom_tooltip = AlphaF-sowUnrest.a
        allow = {
            custom_tooltip = {
                fail_text = "blankFailTooltip" 
                always = no
            }		
        }
        custom_gui = "Alpha_F_opTypeGUI"
        trigger = { has_country_flag = sowUnrest not = { has_country_flag = alphaF_OpportunityOngoing } }
    }


    #########################


    option = { #OPERATION TYPE - Support Organised Crime - no stage
        name = AlphaF-fundCrime0
        custom_tooltip = AlphaF-fundCrime0.a
        allow = {
			custom_tooltip = {
				fail_text = "blankFailTooltip" 
				always = no
			}		
		}
        custom_gui = "Alpha_F_opTypeGUI"
        trigger = { 
            has_country_flag = fundCrime 
            nor = {
                has_country_flag = fundCrime_level_1_A
                has_country_flag = fundCrime_level_2_A
                has_country_flag = fundCrime_level_3_A
                has_country_flag = alphaF_OpportunityOngoing 
            }
        }
    }
    option = { #OPERATION TYPE - Support Organised Crime - stage One
        name = AlphaF-fundCrime1
        custom_tooltip = AlphaF-fundCrime1.b
        allow = {
			custom_tooltip = {
				fail_text = "blankFailTooltip" 
				always = no
			}		
		}
        custom_gui = "Alpha_F_opTypeGUI"
        trigger = { 
            has_country_flag = fundCrime 
            has_country_flag = fundCrime_level_1_A
            not = { has_country_flag = alphaF_OpportunityOngoing } 
        }
    }
    option = { #OPERATION TYPE - Support Organised Crime - stage Two
        name = AlphaF-fundCrime2
        custom_tooltip = AlphaF-fundCrime2.c
        allow = {
			custom_tooltip = {
				fail_text = "blankFailTooltip" 
				always = no
			}		
		}
        custom_gui = "Alpha_F_opTypeGUI"
        trigger = { 
            has_country_flag = fundCrime 
            has_country_flag = fundCrime_level_2_A
            not = { has_country_flag = alphaF_OpportunityOngoing } 
        }
    }
    option = { #OPERATION TYPE - Support Organised Crime - stage Three
        name = AlphaF-fundCrime3
        custom_tooltip = AlphaF-fundCrime3.d
        allow = {
			custom_tooltip = {
				fail_text = "blankFailTooltip" 
				always = no
			}		
		}
        custom_gui = "Alpha_F_opTypeGUI"
        trigger = { 
            has_country_flag = fundCrime 
            has_country_flag = fundCrime_level_3_A
            not = { has_country_flag = alphaF_OpportunityOngoing } 
        }
    }
    #################################
    

    option = { #OPERATION TYPE - studyTech
        name = AlphaF-studyTech
        custom_tooltip = AlphaF-studyTech.a
        allow = {
			custom_tooltip = {
				fail_text = "blankFailTooltip" 
				always = no
			}		
		}
        custom_gui = "Alpha_F_opTypeGUI"
        trigger = { has_country_flag = studyTech not = { has_country_flag = alphaF_OpportunityOngoing } }
    }

    option = { #OPERATION TYPE - SWING ETHICS
        name = AlphaF-swingEthics
        #custom_tooltip = AlphaF-swingXenophobe
        allow = {
			custom_tooltip = {
				fail_text = "blankFailTooltip" 
				always = no
			}		
		}
        custom_gui = "Alpha_F_opTypeGUI"
        trigger = { 
            or = {
                has_country_flag = swingXenophobe 
                has_country_flag = swingXenophile
                has_country_flag = swingSpiritualist
                has_country_flag = swingPacifist
                has_country_flag = swingMilitarist
                has_country_flag = swingMaterialist
                has_country_flag = swingEgalitarian
                has_country_flag = swingAuthoritarian
                has_country_flag = swingGreen
                has_country_flag = swingIndustrial
                has_country_flag = swingElitist
                has_country_flag = swingSocialist
                has_country_flag = swingPluralist
                has_country_flag =  swingCapitalist
            }
            not = { has_country_flag = alphaF_OpportunityOngoing } 
        }
    }


########## DUMMY GUI OPTIONS ################



####### ACTUAL OPTIONS  #######
    #DEPLOY AGENCY ONE
    option = {
        name = AlphaF-deploy
        custom_gui = "Alpha_F_deployGUI"
        custom_tooltip = AlphaF-deploy.a
        trigger = {
            has_country_flag = noAlphaTarget
            not = {
                has_country_flag = cover_foreign_alpha
            }
        }
        allow = {
            custom_tooltip = {
                fail_text = "deployCoolDownAlpha_F"
                nor = {
                    has_country_flag = REDEPLOY_COOLDOWN_ALPHA
                    has_country_flag = alphaF_OpportunityOngoing
                }
            }
        }
        hidden_effect = {
            removeIntelPointsAlpha = yes
            set_timed_country_flag = {
                flag = REDEPLOY_COOLDOWN_ALPHA
                days = @changeOpCooldown
            }
            country_event = { id = agencyNeighbors.1  }
        }
    }

    #REDEPLOY AGENCY ONE
    option = {
        name = AlphaF-redeploy
        custom_gui = "Alpha_F_deployGUI"
        custom_tooltip = AlphaF-redeploy.a
        trigger = {
            has_country_flag = hasAlphaTarget
            nor = {
                has_country_flag = convertingAlpha-F-to-D
                has_country_flag = alphaF_OpportunityOngoing
            }
        }
        allow = {
            custom_tooltip = {
                fail_text = "deployCoolDownAlpha_F"
                nor = {
                    has_country_flag = REDEPLOY_COOLDOWN_ALPHA
                    has_country_flag = alphaF_OpportunityOngoing
                    has_country_flag = ongoingRaidAlpha
                }
            }
        }
        hidden_effect = {
            set_country_flag = redeployAlphaF
            set_timed_country_flag = {
                flag = REDEPLOY_COOLDOWN_ALPHA
                days = @changeOpCooldown
            }
            country_event = { id = agencyNeighbors.1  }
        }
    }

    #CHANGE OPERATION
    option = {
        name = AlphaF-changeOP
        custom_gui = "Alpha_F_changeOpGUI"
        custom_tooltip = AlphaF-changeOP.a
        allow = {
            custom_tooltip = {
                fail_text = "AlphaF-changeOP.a.b"
                has_country_flag = hasAlphaTarget
                not = { has_country_flag = alphaF_OpportunityOngoing  }
            }
        }
        trigger = {
            nor = {
                has_country_flag = cover_foreign_alpha
                has_country_flag = convertingAlpha-F-to-D
            }
        }
        hidden_effect = {
            country_event = { id = agencyMenu.2  }
        }
    }

    #RAID
    option = {
        name = AlphaF-conductRaid
        custom_gui = "raidOption_AlphaF"
        custom_tooltip = AlphaF-Raid.a
        allow = {
            custom_tooltip = {
                fail_text = "AlphaF-changeOP.a.b"
                has_country_flag = hasAlphaTarget
            }
        }
        trigger = {
            nor = {
                has_country_flag = cover_foreign_alpha
                has_country_flag = convertingAlpha-F-to-D
            }
        }
        hidden_effect = {
            country_event = { id = agencyMenu.8  }
        }
    }























######## ALPHA DOMESTIC  ########
##### DUMMY GUI OPTIONS ######
    #country name
    option = {
        name = AlphaD-TName
        custom_tooltip = "AlphaD-TName.a"  
        allow = {
			custom_tooltip = {
				fail_text = "blankFailTooltip" 
				always = no
			}		
		}
        custom_gui = "Alpha_D_counterIntelGUI"
        trigger = { 
            not = {
                has_country_flag = cover_domestic_alpha
            }
        } 
    }

    ########## OPERATIONS ################
    ##operation type - Gathering Intelligence
    option = {
        name = AlphaD-GathIntel
        custom_tooltip = "AlphaD-GathIntel.a" 
        allow = {
			custom_tooltip = {
				fail_text = "blankFailTooltip" 
				always = no
			}		
		}
        custom_gui = "Alpha_D_secondOpGUI"
        trigger = { 
            nor = {
                has_country_flag = cover_domestic_alpha
                has_country_flag = boostRepA
                has_country_flag = stopCrimeA
                has_country_flag = boostEthicA
                has_country_flag = boostStabilityA
            } 
        } 
    }


    option = { #OPERATION TYPE - IMPROVE REPUTATION
        name = AlphaD-boostRep
        custom_tooltip = "AlphaD-boostRep.a" 
        allow = {
			custom_tooltip = {
				fail_text = "blankFailTooltip" 
				always = no
			}		
		}
        custom_gui = "Alpha_D_secondOpGUI"
        trigger = { has_country_flag = boostRepA }
    }

    option = { #OPERATION TYPE - STOP CRIME
        name = AlphaD-stopCrime
        custom_tooltip = "AlphaD-stopCrime.a" 
        allow = {
			custom_tooltip = {
				fail_text = "blankFailTooltip" 
				always = no
			}		
		}
        custom_gui = "Alpha_D_secondOpGUI"
        trigger = { has_country_flag = stopCrimeA }
    }

    option = { #OPERATION TYPE - BOOST ETHICS
        name = AlphaD-boostEthics
        custom_tooltip = "AlphaD-boostEthics.a" 
        allow = {
			custom_tooltip = {
				fail_text = "blankFailTooltip" 
				always = no
			}		
		}
        custom_gui = "Alpha_D_secondOpGUI"
        trigger = { has_country_flag = boostEthicA }
    }

    option = { #OPERATION TYPE - STABILITY
        name = AlphaD-boostStability
        custom_tooltip = "AlphaD-boostStability.a" 
        allow = {
			custom_tooltip = {
				fail_text = "blankFailTooltip" 
				always = no
			}		
		}
        custom_gui = "Alpha_D_secondOpGUI"
        trigger = { has_country_flag = boostStabilityA }
    }


############### OPERATIONS ################

    
####### ACTUAL OPTIONS #######

    #CHANGE OPERATION
    option = {
        name = AlphaD-changeOP
        custom_tooltip = AlphaD-changeOP.a
        custom_gui = "Alpha_D_changeOpGUI"
        trigger = {
            not = {
                has_country_flag = cover_domestic_alpha
            }
        }
        allow = {
            not = {
                has_country_flag = cover_domestic_alpha
            }
        }
        hidden_effect = {
            country_event = { id = agencyMenu.3  }
        }
    }

#### ALPHA DOMESTIC ####


















#### BETA FOREIGN ####
### DUMMY GUI OPTIONS ########  
    #country name
    option = {
        name = BetaF-TName
        custom_tooltip = noClickBTargetName
        allow = {
			custom_tooltip = {
				fail_text = "blankFailTooltip" 
				always = no
			}		
		}
        custom_gui = "Beta_F_targetNameGUI"
        trigger = { 
            has_country_flag = cover_domestic_beta
            has_country_flag = hasBetaTarget
            not = {
                has_country_flag = convertingBeta-F-to-D
            }
        }
    }

    #unaasinged
    option = {
        name = BetaF-Unnasigned
        custom_tooltip = "BetaF-Unnasigned.a" 
        allow = {
			custom_tooltip = {
				fail_text = "blankFailTooltip"
				always = no
			}		
		}
        custom_gui = "Beta_F_noTargetGUI"
        trigger = { 
            or = {
                has_country_flag = noBetaTarget
                has_country_flag = convertingBeta-F-to-D
            }
        }
    }





    #Intel - LOW
    option = {
        name = counterIntel_Low
        custom_tooltip = "toolTipIntelReportLow" 
        allow = {
			custom_tooltip = {
				fail_text = "blankFailTooltip"
				always = no
			}		
		}
        custom_gui = "betaF_IntelReport"
        trigger = {
            check_variable = {
                which = defenceLevelVarBeta
                value <= 1
            }
            has_country_flag = cover_domestic_beta
            has_country_flag = hasBetaTarget
            not = {
                has_country_flag = convertingBeta-F-to-D
            }
        }
    }
    #Intel - MEDUM
    option = {
        name = counterIntel_Medium
        custom_tooltip = "toolTipIntelReportMedium" 
        allow = {
			custom_tooltip = {
				fail_text = "blankFailTooltip"
				always = no
			}		
		}
        custom_gui = "betaF_IntelReport"
        trigger = {
            check_variable = {
                which = defenceLevelVarBeta
                value = 2
            }
            has_country_flag = cover_domestic_beta
            has_country_flag = hasBetaTarget
            not = {
                has_country_flag = convertingBeta-F-to-D
            }
        }
    }
    #Intel - HIGH
    option = {
        name = counterIntel_High
        custom_tooltip = "toolTipIntelReportHigh" 
        allow = {
			custom_tooltip = {
				fail_text = "blankFailTooltip"
				always = no
			}		
		}
        custom_gui = "betaF_IntelReport"
        trigger = {
            check_variable = {
                which = defenceLevelVarBeta
                value = 3
            }
            has_country_flag = cover_domestic_beta
            has_country_flag = hasBetaTarget
            not = {
                has_country_flag = convertingBeta-F-to-D
            }
        }
    }
    #Intel - VER HIGH
    option = {
        name = counterIntel_VeryHigh
        custom_tooltip = "toolTipIntelReportVeryHigh" 
        allow = {
			custom_tooltip = {
				fail_text = "blankFailTooltip"
				always = no
			}		
		}
        custom_gui = "betaF_IntelReport"
        trigger = {
            check_variable = {
                which = defenceLevelVarBeta
                value >= 4
            }
            has_country_flag = cover_domestic_beta
            has_country_flag = hasBetaTarget
            not = {
                has_country_flag = convertingBeta-F-to-D
            }
        }
    }





    #Intelligence Report UNNASIGNED
    option = {
        name = BetaF-IntelReport-Unnasigned
        custom_tooltip = "BetaF-Unnasigned.a" 
        allow = {
			custom_tooltip = {
				fail_text = "blankFailTooltip"
				always = no
			}		
		}
        custom_gui = "betaF_IntelReport"
        trigger = { 
            has_country_flag = cover_domestic_beta
            or = {
                has_country_flag = noBetaTarget
                has_country_flag = convertingBeta-F-to-D
            }
        }
    }


    ########## OPERATIONS ################
    ##operation type - Gathering Intelligence
    option = {
        name = BetaF-GathIntel
        custom_tooltip = BetaF-GathIntel.a
        allow = {
			custom_tooltip = {
				fail_text = "blankFailTooltip" 
				always = no
			}		
		}
        custom_gui = "Beta_F_opTypeGUI"
        trigger = { 
            nor = { 
                has_country_flag = noBetaTarget
                has_country_flag = convertingBeta-F-to-D
                has_country_flag = saboRep2
                has_country_flag = studyTech2
                has_country_flag = swingEthics2
                has_country_flag = fundCrime2
                has_country_flag = sowUnrest2
                has_country_flag = betaF_OpportunityOngoing
            }
        } 
    }

    option = { #no operation - unassinged
        name = BetaF-Op-Unnasigned
        custom_tooltip = noClickBNoOperation
        allow = {
			custom_tooltip = {
				fail_text = "blankFailTooltip"
				always = no
			}		
		}
        custom_gui = "Beta_F_opTypeGUI"
        trigger = { 
            or = {
                nor = { 
                    has_country_flag = saboRep2
                    has_country_flag = studyTech2   
                    has_country_flag = swingEthics2
                    has_country_flag = fundCrime2 
                    has_country_flag = hasBetaTarget 
                    has_country_flag = sowUnrest2
                    has_country_flag = betaF_OpportunityOngoing
                }
                has_country_flag = convertingBeta-F-to-D
            }
        } 
    }

    option = { #OPPORTUNITY MISSION
        name = BetaF-opportunityMission
        custom_tooltip = BetaF-opportunityMission.a
        allow = {
            custom_tooltip = {
                fail_text = "blankFailTooltip" 
                always = no
            }		
        }
        custom_gui = "Beta_F_opTypeGUI"
        trigger = { has_country_flag = betaF_OpportunityOngoing }
    }

    option = { #OPERATION TYPE - saboRep
        name = BetaF-saboRep
        custom_tooltip = BetaF-saboRep.a
        allow = {
			custom_tooltip = {
				fail_text = "blankFailTooltip" 
				always = no
			}		
		}
        custom_gui = "Beta_F_opTypeGUI"
        trigger = { has_country_flag = saboRep2 not = { has_country_flag = betaF_OpportunityOngoing } }
    }


    option = { #OPERATION TYPE - sowUnrest
        name = BetaF-sowUnrest
        custom_tooltip = BetaF-sowUnrest.a
        allow = {
            custom_tooltip = {
                fail_text = "blankFailTooltip" 
                always = no
            }		
        }
        custom_gui = "Beta_F_opTypeGUI"
        trigger = { has_country_flag = sowUnrest2 not = { has_country_flag = betaF_OpportunityOngoing } }
    }



    option = { #OPERATION TYPE - Support Organised Crime - no stage
        name = BetaF-fundCrime0
        custom_tooltip = BetaF-fundCrime0.a
        allow = {
			custom_tooltip = {
				fail_text = "blankFailTooltip" 
				always = no
			}		
		}
        custom_gui = "Beta_F_opTypeGUI"
        trigger = { 
            has_country_flag = fundCrime2 
            nor = {
                has_country_flag = fundCrime_level_1_B
                has_country_flag = fundCrime_level_2_B
                has_country_flag = fundCrime_level_3_B
                has_country_flag = betaF_OpportunityOngoing
            }
        }
    }
    option = { #OPERATION TYPE - Support Organised Crime - stage One
        name = BetaF-fundCrime1
        custom_tooltip = BetaF-fundCrime1.b
        allow = {
			custom_tooltip = {
				fail_text = "blankFailTooltip" 
				always = no
			}		
		}
        custom_gui = "Beta_F_opTypeGUI"
        trigger = { 
            has_country_flag = fundCrime2 
            has_country_flag = fundCrime_level_1_B
            not = { has_country_flag = betaF_OpportunityOngoing }
        }
    }
    option = { #OPERATION TYPE - Support Organised Crime - stage Two
        name = BetaF-fundCrime2
        custom_tooltip = BetaF-fundCrime2.c
        allow = {
			custom_tooltip = {
				fail_text = "blankFailTooltip" 
				always = no
			}		
		}
        custom_gui = "Beta_F_opTypeGUI"
        trigger = { 
            has_country_flag = fundCrime2 
            has_country_flag = fundCrime_level_2_B
            not = { has_country_flag = betaF_OpportunityOngoing }
        }
    }
    option = { #OPERATION TYPE - Support Organised Crime - stage Three
        name = BetaF-fundCrime3
        custom_tooltip = BetaF-fundCrime3.d
        allow = {
			custom_tooltip = {
				fail_text = "blankFailTooltip" 
				always = no
			}		
		}
        custom_gui = "Beta_F_opTypeGUI"
        trigger = { 
            has_country_flag = fundCrime2 
            has_country_flag = fundCrime_level_3_B
            not = { has_country_flag = betaF_OpportunityOngoing }
        }
    }


    option = { #OPERATION TYPE - studyTech
        name = BetaF-studyTech
        custom_tooltip = BetaF-studyTech.a
        allow = {
			custom_tooltip = {
				fail_text = "blankFailTooltip" 
				always = no
			}		
		}
        custom_gui = "Beta_F_opTypeGUI"
        trigger = { has_country_flag = studyTech2 not = { has_country_flag = betaF_OpportunityOngoing } }
    }



    ####### SWING ETHIC OPERATION #####
    option = { #OPERATION TYPE - swingEthics
        name = BetaF-swingEthics
        #custom_tooltip = BetaF-swingAuthoritarian
        custom_gui = "Beta_F_opTypeGUI"
        allow = {
			custom_tooltip = {
				fail_text = "blankFailTooltip" 
				always = no
			}		
		}
        trigger = { 
            or = {
                has_country_flag = swingXenophobe2
                has_country_flag = swingXenophile2
                has_country_flag = swingSpiritualist2
                has_country_flag = swingPacifist2
                has_country_flag = swingMilitarist2
                has_country_flag = swingMaterialist2
                has_country_flag = swingEgalitarian2
                has_country_flag = swingAuthoritarian2
                has_country_flag = swingGreen2
                has_country_flag = swingIndustrial2
                has_country_flag = swingElitist2
                has_country_flag = swingSocialist2
                has_country_flag = swingPluralist2
                has_country_flag =  swingCapitalist2
            }
            not = { has_country_flag = betaF_OpportunityOngoing } 
        }
    }
    

########## DUMMY GUI OPTIONS  ################





####### ACTUAL OPTIONS #######
    #DEPLOY AGENCY THREE
    option = {
        name = BetaF-deploy
        custom_gui = "Beta_F_deployGUI"
        custom_tooltip = BetaF-deploy.a
        trigger = {
            has_country_flag = noBetaTarget
            not = {
                has_country_flag = cover_foreign_beta
            }
        }
        allow = {
            custom_tooltip = {
                fail_text = "deployCoolDownBeta_F"
                nor = {
                    has_country_flag = REDEPLOY_COOLDOWN_BETA
                    has_country_flag = betaF_OpportunityOngoing 
                }
            }
        }
        hidden_effect = {
            set_country_flag = agencyBetaF
            removeIntelPointsBeta = yes
            set_timed_country_flag = {
                flag = REDEPLOY_COOLDOWN_BETA
                days = @changeOpCooldown
            }
            country_event = { id = agencyNeighbors.1  }
            
        }
    }

    #REDEPLOY AGENCY 
    option = {
        name = BetaF-redeploy
        custom_gui = "Beta_F_deployGUI"
        custom_tooltip = BetaF-redeploy.a 
        trigger = {
            has_country_flag = hasBetaTarget
            not = {
                has_country_flag = convertingBeta-F-to-D
            } 
        }
        allow = {
            custom_tooltip = {
                fail_text = "deployCoolDownBeta_F"
                nor = {
                    has_country_flag = REDEPLOY_COOLDOWN_BETA
                    has_country_flag = betaF_OpportunityOngoing 
                    has_country_flag = ongoingRaidBeta
                }
            } 
        }
        hidden_effect = {
            set_country_flag = agencyBetaF
            set_country_flag = redeployBetaF
            set_timed_country_flag = {
                flag = REDEPLOY_COOLDOWN_BETA
                days = @changeOpCooldown
            }
            country_event = { id = agencyNeighbors.1  }
        }
    }

    #CHANGE OPERATION 
    option = {
        name = BetaF-changeOP
        custom_gui = "Beta_F_changeOpGUI"
        custom_tooltip = BetaF-changeOP.a
        allow = {
            custom_tooltip = {
                fail_text = "BetaF-changeOP.a.b"
                has_country_flag = hasBetaTarget
                not = { has_country_flag = betaF_OpportunityOngoing  }
            }
        }
        trigger = {
            nor = {
                has_country_flag = cover_foreign_beta
                has_country_flag = convertingBeta-F-to-D
            }
        }
        hidden_effect = {
            set_country_flag = agencyBetaF
            country_event = { id = agencyMenu.2  }
        }
    }

    #RAID
    option = {
        name = BetaF-conductRaid
        custom_gui = "raidOption_BetaF"
        custom_tooltip = BetaF-Raid.a
        allow = {
            custom_tooltip = {
                fail_text = "BetaF-changeOP.a.b"
                has_country_flag = hasBetaTarget
            }
        }
        trigger = {
            nor = {
                has_country_flag = cover_foreign_beta
                has_country_flag = convertingBeta-F-to-D
            }
        }
        
        hidden_effect = {
            country_event = { id = agencyMenu.9  }
        }
    }



















######## BETA DOMESTIC ########
###### DUMMY GUI OPTIONS ########
    #country name
    option = {
        name = BetaD-TName
        custom_tooltip = "BetaD-TName.a" 
        allow = {
			custom_tooltip = {
				fail_text = "blankFailTooltip" 
				always = no
			}		
		}
        custom_gui = "Beta_D_counterIntelGUI"
        trigger = { 
            not = {
                has_country_flag = cover_domestic_beta
            }
        } 
    }

    ########## OPERATIONS ################
    ##operation type - Gathering Intelligence
    option = {
        name = BetaD-GathIntel
        custom_tooltip = "BetaD-GathIntel.a" 
        allow = {
			custom_tooltip = {
				fail_text = "blankFailTooltip" 
				always = no
			}		
		}
        custom_gui = "Beta_D_secondOpGUI"
        trigger = { 
            nor = { 
                has_country_flag = cover_domestic_beta
                has_country_flag = boostRepB
                has_country_flag = stopCrimeB
                has_country_flag = boostEthicB
                has_country_flag = boostStabilityB
            }
        } 
    }


    option = { #OPERATION TYPE - IMPROVE REPUTATION
        name = BetaD-boostRep
        custom_tooltip = "BetaD-boostRep.a" 
        allow = {
			custom_tooltip = {
				fail_text = "blankFailTooltip" 
				always = no
			}		
		}
        custom_gui = "Beta_D_secondOpGUI"
        trigger = { has_country_flag = boostRepB }
    }

    option = { #OPERATION TYPE - STOP CRIME
        name = BetaD-stopCrime
        custom_tooltip = "BetaD-stopCrime.a" 
        allow = {
			custom_tooltip = {
				fail_text = "blankFailTooltip" 
				always = no
			}		
		}
        custom_gui = "Beta_D_secondOpGUI"
        trigger = { has_country_flag = stopCrimeB }
    }

    option = { #OPERATION TYPE - BOOST ETHICS
        name = BetaD-boostEthics
        custom_tooltip = "BetaD-boostEthics.a" 
        allow = {
			custom_tooltip = {
				fail_text = "blankFailTooltip" 
				always = no
			}		
		}
        custom_gui = "Beta_D_secondOpGUI"
        trigger = { has_country_flag = boostEthicB }
    }
    
    option = { #OPERATION TYPE - BOOST ETHICS
        name = BetaD-boostStability
        custom_tooltip = "BetaD-boostStability.a" 
        allow = {
			custom_tooltip = {
				fail_text = "blankFailTooltip" 
				always = no
			}		
		}
        custom_gui = "Beta_D_secondOpGUI"
        trigger = { has_country_flag = boostStabilityB }
    }




############## OPERATIONS ################

    

####### ACTUAL OPTIONS #######
    #CHANGE OPERATION FOUR
    option = {
        name = BetaD-changeOP
        custom_tooltip = BetaD-changeOP.a  
        custom_gui = "Beta_D_changeOpGUI"
        trigger = {
            not = {
                has_country_flag = cover_domestic_beta
            }
        }
        allow = {
            not = {
                has_country_flag = cover_domestic_beta
            }
        }
        hidden_effect = {
            set_country_flag = agencyBetaD
            country_event = { id = agencyMenu.3 }
        }
    }

















############# CONVERT BUTTONS ###############################################################
    option = { #CONVERT ALPHA TO DOMESTIC
        name = agencyMenu.1.1b
        custom_tooltip = agencyMenu.1.1b.tooltip
        custom_gui = "convert_alpha"
        allow = {
            custom_tooltip = {
                fail_text = "convertCooldownAlpha_F_to_D"
                not = {
                    has_country_flag = REDEPLOY_COOLDOWN_ALPHA
                }
            }
        }
        trigger = {
            not = {
                has_country_flag = cover_foreign_alpha
            }
        }
        hidden_effect = {
            
            country_event = {
                id = agencyMenu.4
            }
        }
    }

    option = { #CONVERT ALPHA TO FOREIGN
        name = agencyMenu.1.1bb
        custom_tooltip = agencyMenu.1.1bb.tooltip 
        custom_gui = "convert_alpha2"
        allow = {
            custom_tooltip = {
                fail_text = "convertCooldownAlpha_D_to_F"
                not = {
                    has_country_flag = REDEPLOY_COOLDOWN_ALPHA_D
                }
            }
        }
        trigger = {
            not = {
                has_country_flag = cover_domestic_alpha
            }
        }
        hidden_effect = {
            country_event = {
                id = agencyMenu.5
            }
        }
    }

    option = { #### CONVERT BETA TO DOMESTIC
        name = agencyMenu.1.1c
        custom_tooltip = agencyMenu.1.1c.tooltip
        custom_gui = "convert_beta_left"
        allow = {
            custom_tooltip = {
                fail_text = "convertCooldownBeta_F_to_D"
                not = {
                    has_country_flag = REDEPLOY_COOLDOWN_BETA
                }
            }
        }
        trigger = {
            has_country_flag = cover_domestic_beta
        }
        hidden_effect = {
            country_event = {
                id = agencyMenu.7
            }
        }  
    }

    option = {#### CONVERT BETA TO FOREIGN
        name = agencyMenu.1.1cc
        custom_tooltip = agencyMenu.1.1cc.tooltip
        custom_gui = "convert_beta_right"
        allow = {
            custom_tooltip = {
                fail_text = "convertCooldownBeta_D_to_F"
                not = {
                    has_country_flag = REDEPLOY_COOLDOWN_BETA_D
                }
            }
        }
        trigger = {
            has_country_flag = cover_foreign_beta
        }
        hidden_effect = {
            country_event = {
                id = agencyMenu.6
            }
        } 
    }
    


    












    # ###### DISPAY RESOURCES ######
    option = {
        name = displayAlphaIntelPoints.a
        custom_gui = "alphaPointsDisplayOption"
        custom_tooltip = "menuIntelPoints_Alpha"
        allow = {
			custom_tooltip = {
				fail_text = "blankFailTooltip" 
				always = no
			}		
		}

        hidden_effect = {
            remove_country_flag = spyMenuOpen
        }
    }
    option = {
        name = displayBetaIntelPoints.a
        custom_gui = "betaPointsDisplayOption"
        custom_tooltip = "menuIntelPoints_Beta"
        allow = {
			custom_tooltip = {
				fail_text = "blankFailTooltip" 
				always = no
			}		
		}

        hidden_effect = {
            remove_country_flag = spyMenuOpen
        }
    }






    
######## FAKE CLOSE MENU BUTTON #########
    option = {
        name = closeMenuOption.a
        custom_gui = "spyCloseButton"
        default_hide_option = yes

        hidden_effect = {
            remove_country_flag = spyMenuOpen
        }
    }


}










########### PLAYER CHOOSE OPERATION TYPE ###########################
country_event = {
    id = agencyMenu.2
    title = ABF_chooseOP.title
    desc = {
		trigger = {
			has_country_flag = agencyBetaF
		}
		text = "BF_chooseOP.desc"
    }
    desc = {
		trigger = {
            not = {
                has_country_flag = agencyBetaF
            }
		}
		text = "AF_chooseOP.desc"
	}
    picture = GFX_evt_board_meeting

    is_triggered_only = yes
    
    option = { #Sabotage Reputation
        name = ABF_chooseOP.a   
        custom_tooltip = BF_chooseOP.a.a
        trigger = {
            has_country_flag = agencyBetaF
        }
        allow = {
            custom_tooltip = {
                fail_text = "opCooldownTooltip"
                not = {
                    has_country_flag = REDEPLOY_COOLDOWN_BETA
                }   
            }
            custom_tooltip = {
                fail_text = "needIntel_sabRep"
                has_resource = { type = sr_beta_points amount >= @sabRepOperationCostCheck }  
            }
        }
        hidden_effect = {
            clearFlagsForNewOperation_BETA_F = yes
            set_country_flag = saboRep2
            country_event = { id = progressTrackerB.1  }
            country_event = { id = agencyGlobal.2 }     
        }
    }
    option = { #Sabotage Reputation
        name = ABF_chooseOP.a   
        custom_tooltip = AF_chooseOP.a.a
        trigger = {
            not = {
                has_country_flag = agencyBetaF
            }
        }
        allow = {
            custom_tooltip = {
                fail_text = "opCooldownTooltip"
                not = {
                    has_country_flag = REDEPLOY_COOLDOWN_ALPHA
                }   
            }
            custom_tooltip = {
                fail_text = "needIntel_sabRep"
                has_resource = { type = sr_alpha_points amount >= @sabRepOperationCostCheck }  
            }
        }
        hidden_effect = {
            clearFlagsForNewOperation_ALPHA_F = yes
            set_country_flag = saboRep
            country_event = { id = progressTrackerA.1  }
            country_event = { id = agencyGlobal.2 }     
        }
    }


    
    option = { #FUND CRIME
        custom_tooltip = BF_chooseOP.f.a 
        name = ABF_chooseOP.f 
        trigger = {
            has_country_flag = agencyBetaF
        }
        allow = {
            custom_tooltip = {
                fail_text = "opCooldownTooltip"
                not = {
                    has_country_flag = REDEPLOY_COOLDOWN_BETA
                }   
            }
            custom_tooltip = {
                fail_text = "needIntel_fundCrime"
                has_resource = { type = sr_beta_points amount >= @fundCrimeOperationCostCheck }  
            }
        }
        hidden_effect = {     
            clearFlagsForNewOperation_BETA_F = yes
            set_country_flag = fundCrime2
            country_event = { id = progressTrackerB.1  }
            country_event = { id = agencyGlobal.2 }  
        }
    }
    option = { #FUND CRIME
        custom_tooltip = AF_chooseOP.f.a
        name = ABF_chooseOP.f
        trigger = {
            not = {
                has_country_flag = agencyBetaF
            }
        }
        allow = {
            custom_tooltip = {
                fail_text = "opCooldownTooltip"
                not = {
                    has_country_flag = REDEPLOY_COOLDOWN_ALPHA
                }   
            }
            custom_tooltip = {
                fail_text = "needIntel_fundCrime"
                has_resource = { type = sr_alpha_points amount >= @fundCrimeOperationCostCheck }  
            }
        }
        hidden_effect = {
            clearFlagsForNewOperation_ALPHA_F = yes
            set_country_flag = fundCrime
            country_event = { id = progressTrackerA.1  }
            country_event = { id = agencyGlobal.2 }     
        }
    }


    option = { #SWING ETHICS
        custom_tooltip = BF_chooseOP.g.a
        name = ABF_chooseOP.g
        trigger = {
            has_country_flag = agencyBetaF
        }
        allow = {
            custom_tooltip = {
                fail_text = "opCooldownTooltip"
                not = {
                    has_country_flag = REDEPLOY_COOLDOWN_BETA
                }   
            }
            custom_tooltip = {
                fail_text = "needIntel_swingEthics"
                has_resource = { type = sr_beta_points amount >= @swingEthicsOperationCostCheck }  
            }
            has_technology = tech_spy_socialPropaganda
        }
        hidden_effect = {     
            clearFlagsForNewOperation_BETA_F = yes
            set_country_flag = swingEthics2
            country_event = { id = agencyMenu.203  }
        }
    }
    option = { #SWING ETHICS
        custom_tooltip = AF_chooseOP.g.a
        name = ABF_chooseOP.g
        trigger = {
            not = {
                has_country_flag = agencyBetaF
            }
        }
        allow = {
            custom_tooltip = {
                fail_text = "opCooldownTooltip"
                not = {
                    has_country_flag = REDEPLOY_COOLDOWN_ALPHA
                }   
            }
            custom_tooltip = {
                fail_text = "needIntel_swingEthics"
                has_resource = { type = sr_alpha_points amount >= @swingEthicsOperationCostCheck }  
            }
            has_technology = tech_spy_socialPropaganda
        }
        hidden_effect = {
            clearFlagsForNewOperation_ALPHA_F = yes
            set_country_flag = swingEthics
            country_event = { id = agencyMenu.202 }    
        }
    }


    option = { #SOW UNREST
        custom_tooltip = BF_chooseOP.h.a
        name = ABF_chooseOP.h
        trigger = {
            has_country_flag = agencyBetaF
        }
        allow = {
            custom_tooltip = {
                fail_text = "opCooldownTooltip"
                not = {
                    has_country_flag = REDEPLOY_COOLDOWN_BETA
                }   
            }
            custom_tooltip = {
                fail_text = "needIntel_sowUnrest"
                has_resource = { type = sr_beta_points amount >= @sowUnrestOperationCostCheck }  
            }
            has_technology = tech_spy_socialPropaganda
        }
        hidden_effect = {     
            clearFlagsForNewOperation_BETA_F = yes
            set_country_flag = sowUnrest2
            set_country_flag = betaF_Unrest
            country_event = { id = unrestTargetManager.1  }
        }
    }
    option = { #SOW UNREST
        custom_tooltip = AF_chooseOP.h.a
        name = ABF_chooseOP.h
        trigger = {
            not = {
                has_country_flag = agencyBetaF
            }
        }
        allow = {
            custom_tooltip = {
                fail_text = "opCooldownTooltip"
                not = {
                    has_country_flag = REDEPLOY_COOLDOWN_ALPHA
                }   
            }
            custom_tooltip = {
                fail_text = "needIntel_sowUnrest"
                has_resource = { type = sr_alpha_points amount >= @sowUnrestOperationCostCheck }  
            }
            has_technology = tech_spy_socialPropaganda
        }
        hidden_effect = {
            clearFlagsForNewOperation_ALPHA_F = yes
            set_country_flag = sowUnrest
            country_event = { id = unrestTargetManager.1 }    
        }
    }


    option = { #Industrial Espionage
        custom_tooltip = BF_chooseOP.c.a 
        name = ABF_chooseOP.c  #
        trigger = {
            has_country_flag = agencyBetaF
        }
        allow = {
            custom_tooltip = {
                fail_text = "opCooldownTooltip"
                not = {
                    has_country_flag = REDEPLOY_COOLDOWN_BETA
                }   
            }
            custom_tooltip = {
                fail_text = "needIntel_stealTech"
                has_resource = { type = sr_beta_points amount >= @studyTechOperationCostCheck }  
            }
            custom_tooltip = {
                fail_text = "industrialEnigmatic"
                event_target:betaNetworkTarget_temp = {
                    not = {
                        has_ascension_perk = ap_enigmatic_engineering
                    }
                }
            }
            has_technology = tech_spy_industrial
        }
        hidden_effect = {     
            clearFlagsForNewOperation_BETA_F = yes
            set_country_flag = studyTech2
            country_event = { id = progressTrackerB.1  }
            country_event = { id = agencyGlobal.2 }  
        }
    }
    option = { #Industrial Espionage
        custom_tooltip = AF_chooseOP.c.a 
        name = ABF_chooseOP.c  
        trigger = {
            not = {
                has_country_flag = agencyBetaF
            }
        }
        allow = {
            custom_tooltip = {
                fail_text = "opCooldownTooltip"
                not = {
                    has_country_flag = REDEPLOY_COOLDOWN_ALPHA
                }   
            }
            custom_tooltip = {
                fail_text = "needIntel_stealTech"
                has_resource = { type = sr_alpha_points amount >= @studyTechOperationCostCheck }  
            }
            custom_tooltip = {
                fail_text = "industrialEnigmatic"
                event_target:alphaNetworkTarget_temp = {
                    not = {
                        has_ascension_perk = ap_enigmatic_engineering
                    }
                }
            }
            has_technology = tech_spy_industrial
        }
        hidden_effect = {
            clearFlagsForNewOperation_ALPHA_F = yes
            set_country_flag = studyTech
            country_event = { id = progressTrackerA.1  }
            country_event = { id = agencyGlobal.2 }  
        }
    }



    option = { #Back
        name = ABF_chooseOP.e 
        hidden_effect = {
            if = {
                limit = {
                    has_country_flag = agencyBetaF
                }
                remove_country_flag = agencyBetaF
                country_event = { id = agencyGlobal.2 }	   
            }
            else = {
                country_event = { id = agencyGlobal.2 }	
            }
        }
    }

    #####future OPERATIONS#####
    #option = { #Corrupt Officials 
        #name = agencyMenu.2.f  
        #hidden_effect = {
            #set_country_flag = posRelationOp
            #country_event = { id = agencyNeighbors.5  }
        #}
   # }

    #option = { #Support Rebels 
        #name = agencyMenu.2.c  
        #hidden_effect = {
            #country_event = { id = agencyNeighbors.5  }
        #}
    #}
    ##### future OPERATIONS#####
}












############SWING ETHICS CHOOSE DESIRED ETHICS EVENT - FIRES FROM ABOVE############
##CHOOSE ETHICS ALPHA
country_event = {
    id = agencyMenu.202
    title = ABF_chooseEthic.title
    desc = ABF_chooseEthic.desc
    picture = GFX_evt_board_meeting
    is_triggered_only = yes
    
    option = { #Authoritarian
        name = ABF_chooseEthic.a   
        hidden_effect = {
            set_country_flag = swingAuthoritarian
            country_event = { id = progressTrackerA.1  }
            country_event = { id = agencyGlobal.2 }
        }
    }

    option = { #Egalitarian
        name = ABF_chooseEthic.b  
        hidden_effect = {
            set_country_flag = swingEgalitarian
            country_event = { id = progressTrackerA.1  }
            country_event = { id = agencyGlobal.2 }
        }
    }

    option = { #Xenophobe
        name = ABF_chooseEthic.c  
        hidden_effect = {
            set_country_flag = swingXenophobe
            country_event = { id = progressTrackerA.1  }
            country_event = { id = agencyGlobal.2 }
        }
    }

    option = { #Xenophile
        name = ABF_chooseEthic.d  
        hidden_effect = {
            set_country_flag = swingXenophile
            country_event = { id = progressTrackerA.1  }
            country_event = { id = agencyGlobal.2 }
        }
    }

    option = { #Militarist
        name = ABF_chooseEthic.e  
        hidden_effect = {
            set_country_flag = swingMilitarist
            country_event = { id = progressTrackerA.1  }
            country_event = { id = agencyGlobal.2 }
        }
    }

    option = { #Pacifist
        name = ABF_chooseEthic.f  
        hidden_effect = {
            set_country_flag = swingPacifist
            country_event = { id = progressTrackerA.1  }
            country_event = { id = agencyGlobal.2 }
        }
    }

    option = { #Materialist
        name = ABF_chooseEthic.g 
        hidden_effect = {
            set_country_flag = swingMaterialist
            country_event = { id = progressTrackerA.1  }
            country_event = { id = agencyGlobal.2 }
        }
    }

    option = { #Spiritualist
        name = ABF_chooseEthic.h  
        hidden_effect = {
            set_country_flag = swingSpiritualist
            country_event = { id = progressTrackerA.1  }
            country_event = { id = agencyGlobal.2 }
        }
    }


    ############### Ethics and Civics Classic 2.7 #################
    option = { #Green -ethic_fanatic_green
        name = ABF_chooseEthic.i  
        trigger = {
            has_global_flag = cultural_overhaul_active
        }
        hidden_effect = {
            set_country_flag = swingGreen
            country_event = { id = progressTrackerA.1  }
            country_event = { id = agencyGlobal.2 }
        }
    }
    option = { #Industrial -ethic_fanatic_industrial
        name = ABF_chooseEthic.j  
        trigger = {
            has_global_flag = cultural_overhaul_active
        }
        hidden_effect = {
            set_country_flag = swingIndustrial
            country_event = { id = progressTrackerA.1  }
            country_event = { id = agencyGlobal.2 }
        }
    }
    option = { #Elitist -ethic_fanatic_elitist
        name = ABF_chooseEthic.k  
        trigger = {
            has_global_flag = cultural_overhaul_active
        }
        hidden_effect = {
            set_country_flag = swingElitist
            country_event = { id = progressTrackerA.1  }
            country_event = { id = agencyGlobal.2 }
        }
    }
    option = { #Socialism -ethic_fanatic_socialism
        name = ABF_chooseEthic.l  
        trigger = {
            has_global_flag = cultural_overhaul_active
        }
        hidden_effect = {
            set_country_flag = swingSocialist
            country_event = { id = progressTrackerA.1  }
            country_event = { id = agencyGlobal.2 }
        }
    }
    option = { #Pluralist -ethic_fanatic_pluralist
        name = ABF_chooseEthic.m  
        trigger = {
            has_global_flag = cultural_overhaul_active
        }
        hidden_effect = {
            set_country_flag = swingPluralist
            country_event = { id = progressTrackerA.1  }
            country_event = { id = agencyGlobal.2 }
        }
    } 
    option = { #Capitalism -ethic_fanatic_capitalism
        name = ABF_chooseEthic.n  
        trigger = {
            has_global_flag = cultural_overhaul_active
        }
        hidden_effect = {
            set_country_flag = swingCapitalist
            country_event = { id = progressTrackerA.1  }
            country_event = { id = agencyGlobal.2 }
        }
    }
}

##CHOOSE ETHICS BETA
country_event = {
    id = agencyMenu.203
    title = ABF_chooseEthic.title
    desc = ABF_chooseEthic.desc
    picture = GFX_evt_board_meeting

    is_triggered_only = yes
    
    option = { #Authoritarian
        name = ABF_chooseEthic.a   
        hidden_effect = {
            set_country_flag = swingAuthoritarian2
            country_event = { id = progressTrackerB.1  }
            country_event = { id = agencyGlobal.2 }
        }
    }

    option = { #Egalitarian
        name = ABF_chooseEthic.b  
        hidden_effect = {
            set_country_flag = swingEgalitarian2
            country_event = { id = progressTrackerB.1  }
            country_event = { id = agencyGlobal.2 }
        }
    }

    option = { #Xenophobe
        name = ABF_chooseEthic.c  
        hidden_effect = {
            set_country_flag = swingXenophobe2
            country_event = { id = progressTrackerB.1  }
            country_event = { id = agencyGlobal.2 }
        }
    }

    option = { #Xenophile
        name = ABF_chooseEthic.d  
        hidden_effect = {
            set_country_flag = swingXenophile2
            country_event = { id = progressTrackerB.1  }
            country_event = { id = agencyGlobal.2 }
        }
    }

    option = { #Militarist
        name = ABF_chooseEthic.e  
        hidden_effect = {
            set_country_flag = swingMilitarist2
            country_event = { id = progressTrackerB.1  }
            country_event = { id = agencyGlobal.2 }
        }
    }

    option = { #Pacifist
        name = ABF_chooseEthic.f  
        hidden_effect = {
            set_country_flag = swingPacifist2
            country_event = { id = progressTrackerB.1  }
            country_event = { id = agencyGlobal.2 }
        }
    }

    option = { #Materialist
        name = ABF_chooseEthic.g 
        hidden_effect = {
            set_country_flag = swingMaterialist2
            country_event = { id = progressTrackerB.1  }
            country_event = { id = agencyGlobal.2 }
        }
    }

    option = { #Spiritualist
        name = ABF_chooseEthic.h  
        hidden_effect = {
            set_country_flag = swingSpiritualist2
            country_event = { id = progressTrackerB.1  }
            country_event = { id = agencyGlobal.2 }
        }
    }

    ######## Ethics and Civics Classic 2.7 #####################
    option = { #Green -ethic_fanatic_green
        name = ABF_chooseEthic.i  
        trigger = {
            has_global_flag = cultural_overhaul_active
        }
        hidden_effect = {
            set_country_flag = swingGreen2
            country_event = { id = progressTrackerB.1  }
            country_event = { id = agencyGlobal.2 }
        }
    }
    option = { #Industrial -ethic_fanatic_industrial
        name = ABF_chooseEthic.j  
        trigger = {
            has_global_flag = cultural_overhaul_active
        }
        hidden_effect = {
            set_country_flag = swingIndustrial2
            country_event = { id = progressTrackerB.1  }
            country_event = { id = agencyGlobal.2 }
        }
    }
    option = { #Elitist -ethic_fanatic_elitist
        name = ABF_chooseEthic.k  
        trigger = {
            has_global_flag = cultural_overhaul_active
        }
        hidden_effect = {
            set_country_flag = swingElitist2
            country_event = { id = progressTrackerB.1  }
            country_event = { id = agencyGlobal.2 }
        }
    }
    option = { #Socialism -ethic_fanatic_socialism
        name = ABF_chooseEthic.l  
        trigger = {
            has_global_flag = cultural_overhaul_active
        }
        hidden_effect = {
            set_country_flag = swingSocialist2
            country_event = { id = progressTrackerB.1  }
            country_event = { id = agencyGlobal.2 }
        }
    }
    option = { #Pluralist -ethic_fanatic_pluralist
        name = ABF_chooseEthic.m  
        trigger = {
            has_global_flag = cultural_overhaul_active
        }
        hidden_effect = {
            set_country_flag = swingPluralist2
            country_event = { id = progressTrackerB.1  }
            country_event = { id = agencyGlobal.2 }
        }
    } 
    option = { #Capitalism -ethic_fanatic_capitalism
        name = ABF_chooseEthic.n 
        trigger = {
            has_global_flag = cultural_overhaul_active
        }
        hidden_effect = {
            set_country_flag = swingCapitalist2
            country_event = { id = progressTrackerB.1  }
            country_event = { id = agencyGlobal.2 }
        }
    }
}










########### PLAYER CHOOSE COUNTER ESPIONAGE OEPRATION TYPE -  GIVE PLAYER OPERATION TYPE FLAG ###########################
country_event = {
    id = agencyMenu.3
    title = ABD_chooseOP.title
    desc = ABD_chooseOP.desc
    picture = GFX_evt_board_meeting

    is_triggered_only = yes

    option = { 
        name = ABD_chooseOP.a  #IMPROVE REPUTATION
        custom_tooltip = BD_chooseOP.a
        trigger = {
            has_country_flag = agencyBetaD
        }
        allow = {
            custom_tooltip = {
                fail_text = "pointsRequiredandOpChangeCoolDownBeta_D"
                has_resource = { type = sr_beta_points amount >= @operationCostCheck } 
                not = {
                    has_country_flag = REDEPLOY_COOLDOWN_BETA_D
                }
            }
        }
        hidden_effect = {
            set_timed_country_flag = {
                flag = REDEPLOY_COOLDOWN_BETA_D
                days = @changeOpCooldown
            }

            removeOpFlagsBeta_D = yes

            remove_country_flag = agencyBetaD
            if = {
                limit = {
                    or = {
                        hasGatherProgress_Beta_D = yes
                    }
                }
                set_country_flag = cancelOngoingDomB
                removeGatherProgress_Beta_D = yes
            }
            
            set_country_flag = boostRepB

            country_event = { id = counterProgressTrackerB.1  }
            country_event = { id = agencyGlobal.2 }
        }
    }
    option = { 
        name = ABD_chooseOP.a  #IMPROVE REPUTATION
        custom_tooltip = AD_chooseOP.a
        trigger = {
            not = {
                has_country_flag = agencyBetaD
            }
        }
        allow = {
            custom_tooltip = {
                fail_text = "pointsRequiredandOpChangeCoolDownAlpha_D"
                has_resource = { type = sr_alpha_points amount >= @operationCostCheck } 
                not = {
                    has_country_flag = REDEPLOY_COOLDOWN_ALPHA_D
                }   
            }
        }
        hidden_effect = {
            set_timed_country_flag = {
                flag = REDEPLOY_COOLDOWN_ALPHA_D
                days = @changeOpCooldown
            }
            removeOpFlagsAlpha_D = yes
            if = {
                limit = {
                    or = {
                        hasGatherProgress_Alpha_D = yes
                    }
                }
                set_country_flag = cancelOngoingDomA
                removeGatherProgress_Alpha_D = yes
            }
            set_country_flag = boostRepA
            country_event = { id = counterProgressTrackerA.1  }
            country_event = { id = agencyGlobal.2 }
        }
    }


    option = { 
        name = ABD_chooseOP.b  #STOP CRIME
        custom_tooltip = BD_chooseOP.b
        trigger = {
            has_country_flag = agencyBetaD
        }
        allow = {
            custom_tooltip = {
                fail_text = "pointsRequiredandOpChangeCoolDownBeta_D"
                has_resource = { type = sr_beta_points amount >= @operationCostCheck } 
                not = {
                    has_country_flag = REDEPLOY_COOLDOWN_BETA_D
                }
            }
        }
        hidden_effect = {
            set_timed_country_flag = {
                flag = REDEPLOY_COOLDOWN_BETA_D
                days = @changeOpCooldown
            }

            removeOpFlagsBeta_D = yes

            remove_country_flag = agencyBetaD
            if = {
                limit = {
                    or = {
                        hasGatherProgress_Beta_D = yes
                    }
                }
                set_country_flag = cancelOngoingDomB
                removeGatherProgress_Beta_D = yes
            }
        

            set_country_flag = stopCrimeB

            country_event = { id = counterProgressTrackerB.1  }
            country_event = { id = agencyGlobal.2 }
        }
    }
    option = { 
        name = ABD_chooseOP.b  #STOP CRIME
        custom_tooltip = AD_chooseOP.b
        trigger = {
            not = {
                has_country_flag = agencyBetaD
            }
        }
        allow = {
            custom_tooltip = {
                fail_text = "pointsRequiredandOpChangeCoolDownAlpha_D"
                has_resource = { type = sr_alpha_points amount >= @operationCostCheck } 
                not = {
                    has_country_flag = REDEPLOY_COOLDOWN_ALPHA_D
                }   
            }
        }
        hidden_effect = {
            set_timed_country_flag = {
                flag = REDEPLOY_COOLDOWN_ALPHA_D
                days = @changeOpCooldown
            }
            removeOpFlagsAlpha_D = yes

            if = {
                limit = {
                    or = {
                        hasGatherProgress_Alpha_D = yes
                    }
                }
                set_country_flag = cancelOngoingDomA
                removeGatherProgress_Alpha_D = yes
            }

            set_country_flag = stopCrimeA

            country_event = { id = counterProgressTrackerA.1  }
            country_event = { id = agencyGlobal.2 }
        }
    }


    option = { 
        name = ABD_chooseOP.d  #BOOST GOVERNING
        custom_tooltip = BD_chooseOP.c
        trigger = {
            has_country_flag = agencyBetaD
        }
        allow = {
            custom_tooltip = {
                fail_text = "pointsRequiredandOpChangeCoolDownBeta_D"
                has_resource = { type = sr_beta_points amount >= @operationCostCheck }
                not = {
                    has_country_flag = REDEPLOY_COOLDOWN_BETA_D
                }
            }
            has_technology = tech_spy_socialPropaganda
        }

        hidden_effect = {
            set_timed_country_flag = {
                flag = REDEPLOY_COOLDOWN_BETA_D
                days = @changeOpCooldown
            }

            removeOpFlagsBeta_D = yes

            remove_country_flag = agencyBetaD
            if = {
                limit = {
                    or = {
                        hasGatherProgress_Beta_D = yes
                    }
                }
                set_country_flag = cancelOngoingDomB
                removeGatherProgress_Beta_D = yes
            }
            

            set_country_flag = boostEthicB

            country_event = { id = counterProgressTrackerB.1  }
            country_event = { id = agencyGlobal.2 }
        }
    }
    option = { 
        name = ABD_chooseOP.d  #BOOST GOVERNING
        custom_tooltip = AD_chooseOP.c
        trigger = {
            not = {
                has_country_flag = agencyBetaD
            }
        }
        allow = {
            custom_tooltip = {
                fail_text = "pointsRequiredandOpChangeCoolDownAlpha_D"
                has_resource = { type = sr_alpha_points amount >= @operationCostCheck } 
                not = {
                    has_country_flag = REDEPLOY_COOLDOWN_ALPHA_D
                }   
            }
            has_technology = tech_spy_socialPropaganda
        }
        hidden_effect = {
            set_timed_country_flag = {
                flag = REDEPLOY_COOLDOWN_ALPHA_D
                days = @changeOpCooldown
            }
            removeOpFlagsAlpha_D = yes

            if = {
                limit = {
                    or = {
                        hasGatherProgress_Alpha_D = yes
                    }
                }
                set_country_flag = cancelOngoingDomA
                removeGatherProgress_Alpha_D = yes
            }

            set_country_flag = boostEthicA

            country_event = { id = counterProgressTrackerA.1  }
            country_event = { id = agencyGlobal.2 }
        }
    }



    #STABILITY
    option = { #BETA
        name = ABD_chooseOP.e  
        custom_tooltip = BD_chooseOP.e
        trigger = {
            has_country_flag = agencyBetaD
        }
        allow = {
            custom_tooltip = {
                fail_text = "pointsRequiredandOpChangeCoolDownBeta_D"
                has_resource = { type = sr_beta_points amount >= @operationCostCheck }
                not = {
                    has_country_flag = REDEPLOY_COOLDOWN_BETA_D
                }
            }
        }
        hidden_effect = {
            set_timed_country_flag = {
                flag = REDEPLOY_COOLDOWN_BETA_D
                days = @changeOpCooldown
            }

            removeOpFlagsBeta_D = yes

            remove_country_flag = agencyBetaD
            if = {
                limit = {
                    or = {
                        hasGatherProgress_Beta_D = yes
                    }
                }
                set_country_flag = cancelOngoingDomB
                removeGatherProgress_Beta_D = yes
            }
            

            set_country_flag = boostStabilityB

            country_event = { id = spyDomStabilityBeta.1  }
        }
    }
    option = { #ALPHA
        name = ABD_chooseOP.e  
        custom_tooltip = AD_chooseOP.e
        trigger = {
            not = {
                has_country_flag = agencyBetaD
            }
        }
        allow = {
            custom_tooltip = {
                fail_text = "pointsRequiredandOpChangeCoolDownAlpha_D"
                has_resource = { type = sr_alpha_points amount >= @operationCostCheck } 
                not = {
                    has_country_flag = REDEPLOY_COOLDOWN_ALPHA_D
                }   
            }
        }
        hidden_effect = {
            set_timed_country_flag = {
                flag = REDEPLOY_COOLDOWN_ALPHA_D
                days = @changeOpCooldown
            }
            removeOpFlagsAlpha_D = yes

            if = {
                limit = {
                    or = {
                        hasGatherProgress_Alpha_D = yes
                    }
                }
                set_country_flag = cancelOngoingDomA
                removeGatherProgress_Alpha_D = yes
            }

            set_country_flag = boostStabilityA

            country_event = { id = spyDomStability.1  }
        }
    }

   #COUNTER ESPIONAGE

    #IMPROVE GOVERNING ETHICS ATTRACTION - AND UNITY

    #BOOST FACTION HAPPYNESS

    #REDUCE PIRACY
    
    option = { #Back
        name = ABD_chooseOP.z
        hidden_effect = {
            remove_country_flag = agencyBetaD
            country_event = { id = agencyGlobal.2 }	
        }
    }
}




















#CONVERT WARNING ALPHA TO DOMESTIC
country_event = {
    id = agencyMenu.4
    title = convertWarningAtoD.title
    desc = convertWarningAtoD.desc
    is_triggered_only = yes
    picture = GFX_evt_board_meeting
    
    option = { # DO IT
        name = convertWarning.a
        hidden_effect = {
            removeSwingEthicsFlags_Alpha = yes
            removeOpFlagsAlpha_F = yes
            remove_country_flag = gatherIntelAlpha
            removeFundCrimeFlags_Alpha = yes

            if = {
                limit = {
                    hasGatherProgress_Alpha_F = yes
                }
                set_country_flag = cancelOngoing      
                removeGatherProgress_Alpha_F = yes
            }
            remove_country_flag = cover_domestic_alpha  #handles the grey covers
            set_country_flag = Alpha_Defence
            set_country_flag = cover_foreign_alpha
            remove_country_flag = ongoingRaidAlpha

            removeIntelPointsAlpha = yes
            country_event = { id = counterProgressTrackerA.1 }
            country_event = { id = agencyGlobal.3 }

            remove_country_flag = convertingAlpha-D-to-F
            set_country_flag = convertingAlpha-F-to-D

            country_event = { id = agencyGlobal.2 }
        }
    }

    option = { # NEVER MIND
        name = convertWarning.b
        hidden_effect = {
            country_event = { id = agencyGlobal.2 }
        }
    }
}


#CONVERT WARNING ALPHA TO FOREIGN
country_event = {
    id = agencyMenu.5
    title = convertWarningAtoF.title
    desc = convertWarningAtoF.desc
    is_triggered_only = yes
    picture = GFX_evt_board_meeting
    
    option = { # DO IT
        name = convertWarning.a
        hidden_effect = {
            remove_country_flag = Alpha_Defence
            remove_country_flag = cover_foreign_alpha  #handles the grey covers

            removeOpFlagsAlpha_D = yes

            if = {
                limit = {
                    or = {
                        hasGatherProgress_Alpha_D = yes
                    }
                }
                set_country_flag = cancelOngoingDomA         
                removeGatherProgress_Alpha_D = yes
            }

            set_country_flag = cover_domestic_alpha
            removeIntelPointsAlpha = yes

            remove_country_flag = convertingAlpha-F-to-D
            set_country_flag = convertingAlpha-D-to-F

            country_event = {
                id = espionageUnlock.22
            } 
        }
    }

    option = { # NEVER MIND
        name = convertWarning.b
        hidden_effect = {
            country_event = { id = agencyGlobal.2 }
        }
    }
}


#CONVERT WARNING BETA TO FOREIGN
country_event = {
    id = agencyMenu.6
    is_triggered_only = yes
    title = convertWarningBtoF.title
    desc = convertWarningBtoF.desc
    picture = GFX_evt_board_meeting
    
    option = { # DO IT
        name = convertWarning.a
        hidden_effect = { 

            remove_country_flag = Beta_Defence
            remove_country_flag = cover_foreign_beta  #handles the grey covers
            
            removeOpFlagsBeta_D = yes

            if = {
                limit = {
                    or = {
                        hasGatherProgress_Beta_D = yes
                    }
                }
                set_country_flag = cancelOngoingDomB
                removeGatherProgress_Beta_D = yes
            }

            set_country_flag = cover_domestic_beta
            removeIntelPointsBeta = yes

            remove_country_flag = convertingBeta-F-to-D
            set_country_flag = convertingBeta-D-to-F

            country_event = { id = agencyGlobal.2 }
        }
    }

    option = { # NEVER MIND
        name = convertWarning.b
        hidden_effect = {
            country_event = { id = agencyGlobal.2 }
        }
    }
}


#CONVERT WARNING BETA TO DOMESTIC
country_event = {
    id = agencyMenu.7
    title = convertWarningBtoD.title
    desc = convertWarningBtoD.desc
    is_triggered_only = yes
    picture = GFX_evt_board_meeting
    
    option = { # DO IT
        name = convertWarning.a
        hidden_effect = { 
            removeSwingEthicsFlags_Beta = yes
            removeOpFlagsBeta_F = yes
            remove_country_flag = gatherIntelBeta
            removeFundCrimeFlags_Beta = yes

            if = {
                limit = {
                    or = {
                        hasGatherProgress_Beta_F = yes
                    }
                }
                set_country_flag = cancelOngoingBeta
                removeGatherProgress_Beta_F = yes 
            }
            removeIntelPointsBeta = yes

            set_country_flag = Beta_Defence
            remove_country_flag = cover_domestic_beta  #handles the grey covers

            set_country_flag = cover_foreign_beta
            
            country_event = { id = counterProgressTrackerB.1 }
            country_event = { id = agencyGlobal.33 }	
            remove_country_flag = ongoingRaidBeta

            remove_country_flag = convertingBeta-D-to-F
            set_country_flag = convertingBeta-F-to-D

            country_event = {
                id = espionageUnlock.22
            } 
        }
    }

    option = { # NEVER MIND
        name = convertWarning.b
        hidden_effect = {
            country_event = { id = agencyGlobal.2 }
        }
    }
}










#CHOOSE RAID ALPHA
country_event = {
    id = agencyMenu.8
    title = chooseRaid.title
    desc = {
		text = chooseRaidAlpha_Station.desc
		trigger = {
			has_country_flag = raid_starbase_alpha
		}
	}
	desc = {
		text = chooseRaidAlpha_None.desc
		trigger = {
            not = {
                has_country_flag = raid_starbase_alpha
            }
		}
    }
    is_triggered_only = yes
    picture = GFX_evt_board_meeting

    option = { #SATOTAGE STATION
        name = chooseRaid.a
        allow = {
			custom_tooltip = {
				fail_text = "ongoingRaidTooltip" 
				not = {
                    has_country_flag = ongoingRaidAlpha
                }
            }	
            custom_tooltip = {
				fail_text = "raidCostTooltipInfluence" 
				has_resource = { type = influence amount >= 50 } 
            }	
            custom_tooltip = {
				fail_text = "raidCostTooltipintelPoints" 
				has_resource = { type = sr_alpha_points amount >= 40 } 
            }
            has_technology = tech_spy_tactical	
        }
        add_resource = {
            influence = -50
            sr_alpha_points = -40
        }
        hidden_effect = {
            set_country_flag = raid_starbase_alpha
            set_country_flag = ongoingRaidAlpha
            country_event = { id = stationManager.1 } 
        }
    }


    option = { #CANCEL
        name = chooseRaid.z
        hidden_effect = {
            country_event = { id = agencyGlobal.2 }
        }
    }
}

#CHOOSE RAID BETA
country_event = {
    id = agencyMenu.9
    title = chooseRaid.title
    desc = {
		text = chooseRaidBeta_Station.desc
		trigger = {
			has_country_flag = raid_starbase_beta
		}
	}
	desc = {
		text = chooseRaidBeta_None.desc
		trigger = {
            not = {
                has_country_flag = raid_starbase_beta
            }
		}
    }
    is_triggered_only = yes
    picture = GFX_evt_board_meeting

    option = { #SATOTAGE STATION
        name = chooseRaid.a
        allow = {
			custom_tooltip = {
				fail_text = "ongoingRaidTooltip" 
				not = {
                    has_country_flag = ongoingRaidBeta
                }
            }	
            custom_tooltip = {
				fail_text = "raidCostTooltipInfluence" 
				has_resource = { type = influence amount >= 50 } 
            }	
            custom_tooltip = {
				fail_text = "raidCostTooltipintelPoints" 
				has_resource = { type = sr_beta_points amount >= 40 } 
            }
            has_technology = tech_spy_tactical	
        }
        add_resource = {
            influence = -50
            sr_beta_points = -40
        }
        hidden_effect = {
            set_country_flag = raid_starbase_beta
            set_country_flag = betaF_raidStation
            set_country_flag = ongoingRaidBeta
            set_country_flag = tempStationSabBeta #JUST FOR STATION SELECTION EVENT
            country_event = { id = stationManager.1 }
        }
    }
    option = { #CANCEL
        name = chooseRaid.z
        hidden_effect = {
            country_event = { id = agencyGlobal.2 }
        }
    }
}