############################
#
# Expanded Game Start Events
#
############################

namespace = diploevent

### Galactic Community ###
###   Reserved: 1-99   ###
country_event = {
	id = diploevent.1
	title = "resolution_ecology_natural_sanctuaries"

	desc = {
		text = "diploevent.1.desc"
	}

	picture = GFX_evt_galactic_senate
	show_sound = event_factions

	is_triggered_only = yes

	option = {
		name = FED_WE_MUST_COMPLY

		breach_fix_resolution_ecology_natural_sanctuaries = yes

		ai_chance = {
			factor = 5
		}
	}

	option = {
		name = FED_WE_WILL_RETAIN

		trigger = {
			NOR = {
				has_ethic = "ethic_xenophobe"
				has_ethic = "ethic_fanatic_xenophobe"
				has_ethic = "ethic_spiritualist"
				has_ethic = "ethic_fanatic_spiritualist"
			}
		}

		add_monthly_resource_mult = {
			resource = unity
			value = @tier1unityreward
			min = @tier1unitymin
			max = @tier1unitymax
		}
		
		if = {
			limit = {
				has_global_flag = ecology_pops_patch_flag
				OR = {
					has_policy_flag = eco_policy_environmental_selfregulation
					has_policy_flag = eco_policy_environmental_exploitation
				}
				can_set_policy = {
					policy = eco_environmental_policy
					option = eco_policy_environmental_deregulation
				}
			}
			set_policy_cooldown = eco_environmental_policy
		}

		custom_tooltip = "FED_WE_WILL_BE_IN_BREACH"
		
		ai_chance = {
			factor = 1
			modifier = {
				factor = 0
				is_civic_environmentalist = yes
			}
		}
	}

	option = {
		name = FED_WE_WILL_NOT_SUBMIT

		trigger = {
			OR = {
				has_ethic = "ethic_xenophobe"
				has_ethic = "ethic_fanatic_xenophobe"
				has_ethic = "ethic_spiritualist"
				has_ethic = "ethic_fanatic_spiritualist"
			}
		}

		add_monthly_resource_mult = {
			resource = unity
			value = @tier2unityreward
			min = @tier2unitymin
			max = @tier2unitymax
		}
		
		if = {
			limit = {
				has_global_flag = ecology_pops_patch_flag
				OR = {
					has_policy_flag = eco_policy_environmental_selfregulation
					has_policy_flag = eco_policy_environmental_exploitation
				}
				can_set_policy = {
					policy = eco_environmental_policy
					option = eco_policy_environmental_deregulation
				}
			}
			set_policy_cooldown = eco_environmental_policy
		}

		custom_tooltip = "FED_WE_WILL_BE_IN_BREACH"

		ai_chance = {
			factor = 2
			modifier = {
				factor = 0
				is_civic_environmentalist = yes
			}
		}
	}
}

country_event = {
	id = diploevent.2
	title = "resolution_ecology_environmental_control_board"

	desc = {
		text = "diploevent.2.desc"
	}

	picture = GFX_evt_galactic_senate
	show_sound = event_factions

	is_triggered_only = yes

	option = {
		name = FED_WE_MUST_COMPLY

		breach_fix_resolution_ecology_environmental_control_board = yes

		ai_chance = {
			factor = 5
		}
	}

	option = {
		name = FED_WE_WILL_RETAIN

		trigger = {
			NOR = {
				has_ethic = "ethic_xenophobe"
				has_ethic = "ethic_fanatic_xenophobe"
				has_ethic = "ethic_spiritualist"
				has_ethic = "ethic_fanatic_spiritualist"
			}
		}

		add_monthly_resource_mult = {
			resource = unity
			value = @tier1unityreward
			min = @tier1unitymin
			max = @tier1unitymax
		}
		
		if = {
			limit = {
				has_global_flag = ecology_pops_patch_flag
				OR = {
					has_policy_flag = eco_policy_environmental_selfregulation
					has_policy_flag = eco_policy_environmental_exploitation
					has_policy_flag = eco_policy_environmental_deregulation
				}
			}
			set_policy_cooldown = eco_environmental_policy
		}

		custom_tooltip = "FED_WE_WILL_BE_IN_BREACH"
		
		ai_chance = {
			factor = 1
			modifier = {
				factor = 0
				is_civic_environmentalist = yes
			}
		}
	}

	option = {
		name = FED_WE_WILL_NOT_SUBMIT

		trigger = {
			OR = {
				has_ethic = "ethic_xenophobe"
				has_ethic = "ethic_fanatic_xenophobe"
				has_ethic = "ethic_spiritualist"
				has_ethic = "ethic_fanatic_spiritualist"
			}
		}

		add_monthly_resource_mult = {
			resource = unity
			value = @tier2unityreward
			min = @tier2unitymin
			max = @tier2unitymax
		}
		
		if = {
			limit = {
				has_global_flag = ecology_pops_patch_flag
				OR = {
					has_policy_flag = eco_policy_environmental_selfregulation
					has_policy_flag = eco_policy_environmental_exploitation
					has_policy_flag = eco_policy_environmental_deregulation
				}
			}
			set_policy_cooldown = eco_environmental_policy
		}

		custom_tooltip = "FED_WE_WILL_BE_IN_BREACH"

		ai_chance = {
			factor = 2
			modifier = {
				factor = 0
				is_civic_environmentalist = yes
			}
		}
	}
}

country_event = {
	id = diploevent.3
	title = "resolution_ecology_paradise_initiative"

	desc = {
		text = "diploevent.3.desc"
	}

	picture = GFX_evt_galactic_senate
	show_sound = event_factions

	is_triggered_only = yes

	option = {
		name = FED_WE_MUST_COMPLY

		breach_fix_resolution_ecology_paradise_initiative = yes

		ai_chance = {
			factor = 5
		}
	}

	option = {
		name = FED_WE_WILL_RETAIN

		trigger = {
			NOR = {
				has_ethic = "ethic_xenophobe"
				has_ethic = "ethic_fanatic_xenophobe"
				has_ethic = "ethic_spiritualist"
				has_ethic = "ethic_fanatic_spiritualist"
			}
		}

		add_monthly_resource_mult = {
			resource = unity
			value = @tier1unityreward
			min = @tier1unitymin
			max = @tier1unitymax
		}
		
		if = {
			limit = {
				has_global_flag = ecology_pops_patch_flag
				OR = {
					has_policy_flag = eco_policy_environmental_selfregulation
					has_policy_flag = eco_policy_environmental_exploitation
					has_policy_flag = eco_policy_environmental_deregulation
					has_policy_flag = eco_environmental_policy_default
				}
			}
			set_policy_cooldown = eco_environmental_policy
		}

		custom_tooltip = "FED_WE_WILL_BE_IN_BREACH"
		
		ai_chance = {
			factor = 1
			modifier = {
				factor = 0
				is_civic_environmentalist = yes
			}
		}
	}

	option = {
		name = FED_WE_WILL_NOT_SUBMIT

		trigger = {
			OR = {
				has_ethic = "ethic_xenophobe"
				has_ethic = "ethic_fanatic_xenophobe"
				has_ethic = "ethic_spiritualist"
				has_ethic = "ethic_fanatic_spiritualist"
			}
		}

		add_monthly_resource_mult = {
			resource = unity
			value = @tier2unityreward
			min = @tier2unitymin
			max = @tier2unitymax
		}
		
		if = {
			limit = {
				has_global_flag = ecology_pops_patch_flag
				OR = {
					has_policy_flag = eco_policy_environmental_selfregulation
					has_policy_flag = eco_policy_environmental_exploitation
					has_policy_flag = eco_policy_environmental_deregulation
					has_policy_flag = eco_environmental_policy_default
				}
			}
			set_policy_cooldown = eco_environmental_policy
		}

		custom_tooltip = "FED_WE_WILL_BE_IN_BREACH"

		ai_chance = {
			factor = 2
			modifier = {
				factor = 0
				is_civic_environmentalist = yes
			}
		}
	}
}

country_event = {
	id = diploevent.4
	title = "resolution_greatergood_workers_rights"

	desc = {
		text = "diploevent.4.desc"
	}

	picture = GFX_evt_galactic_senate
	show_sound = event_factions

	is_triggered_only = yes

	option = {
		name = FED_WE_MUST_COMPLY

		breach_fix_resolution_greatergood_workers_rights = yes

		ai_chance = {
			factor = 5
		}
	}

	option = {
		name = FED_WE_WILL_RETAIN

		trigger = {
			NOR = {
				has_ethic = "ethic_xenophobe"
				has_ethic = "ethic_fanatic_xenophobe"
				has_ethic = "ethic_authoritarian"
				has_ethic = "ethic_fanatic_authoritarian"
			}
		}

		add_monthly_resource_mult = {
			resource = unity
			value = @tier1unityreward
			min = @tier1unitymin
			max = @tier1unitymax
		}
		
		if = {
			limit = {
				has_global_flag = expanded_pops_active
				has_policy_flag = no_union_rights
				can_set_policy = {
					policy = union_rights
					option = limited_union_rights
				}
			}
			set_policy_cooldown = union_rights
		}

		custom_tooltip = "FED_WE_WILL_BE_IN_BREACH"
		
		ai_chance = {
			factor = 1
		}
	}

	option = {
		name = FED_WE_WILL_NOT_SUBMIT

		trigger = {
			OR = {
				has_ethic = "ethic_xenophobe"
				has_ethic = "ethic_fanatic_xenophobe"
				has_ethic = "ethic_authoritarian"
				has_ethic = "ethic_fanatic_authoritarian"
			}
		}

		add_monthly_resource_mult = {
			resource = unity
			value = @tier2unityreward
			min = @tier2unitymin
			max = @tier2unitymax
		}
		
		if = {
			limit = {
				has_global_flag = expanded_pops_active
				has_policy_flag = no_union_rights
				can_set_policy = {
					policy = union_rights
					option = limited_union_rights
				}
			}
			set_policy_cooldown = union_rights
		}

		custom_tooltip = "FED_WE_WILL_BE_IN_BREACH"

		ai_chance = {
			factor = 2
		}
	}
}

country_event = {
	id = diploevent.5
	title = "resolution_lawandorder_administrative_subsidies"

	desc = {
		text = "diploevent.5.desc"
	}

	picture = GFX_evt_galactic_senate
	show_sound = event_factions

	is_triggered_only = yes

	option = {
		name = FED_WE_MUST_COMPLY

		breach_fix_resolution_lawandorder_administrative_subsidies = yes

		ai_chance = {
			factor = 5
		}
	}

	option = {
		name = FED_WE_WILL_RETAIN

		trigger = {
			NOR = {
				has_ethic = "ethic_xenophobe"
				has_ethic = "ethic_fanatic_xenophobe"
				has_ethic = "ethic_egalitarian"
				has_ethic = "ethic_fanatic_egalitarian"
			}
		}

		add_monthly_resource_mult = {
			resource = unity
			value = @tier1unityreward
			min = @tier1unitymin
			max = @tier1unitymax
		}
		
		if = {
			limit = {
				has_policy_flag = resettlement_not_allowed
				can_set_policy = {
					policy = resettlement
					option = resettlement_allowed
				}
			}
			set_policy_cooldown = resettlement
		}
		if = {
			limit = {
				has_policy_flag = appropriation_not_allowed
				can_set_policy = {
					policy = appropriation
					option = appropriation_allowed
				}
			}
			set_policy_cooldown = appropriation
		}

		custom_tooltip = "FED_WE_WILL_BE_IN_BREACH"
		
		ai_chance = {
			factor = 1
			modifier = {
				factor = 0
				NOR = {
					has_ai_personality_behaviour = multispecies
				}
			}
		}
	}

	option = {
		name = FED_WE_WILL_NOT_SUBMIT

		trigger = {
			OR = {
				has_ethic = "ethic_xenophobe"
				has_ethic = "ethic_fanatic_xenophobe"
				has_ethic = "ethic_egalitarian"
				has_ethic = "ethic_fanatic_egalitarian"
			}
		}

		add_monthly_resource_mult = {
			resource = unity
			value = @tier2unityreward
			min = @tier2unitymin
			max = @tier2unitymax
		}
		
		if = {
			limit = {
				has_policy_flag = resettlement_not_allowed
				can_set_policy = {
					policy = resettlement
					option = resettlement_allowed
				}
			}
			set_policy_cooldown = resettlement
		}
		if = {
			limit = {
				has_policy_flag = appropriation_not_allowed
				can_set_policy = {
					policy = appropriation
					option = appropriation_allowed
				}
			}
			set_policy_cooldown = appropriation
		}

		custom_tooltip = "FED_WE_WILL_BE_IN_BREACH"

		ai_chance = {
			factor = 2
		}
	}
}

country_event = {
	id = diploevent.6
	title = "resolution_lawandorder_informed_governance"

	desc = {
		text = "diploevent.6.desc"
	}

	picture = GFX_evt_galactic_senate
	show_sound = event_factions

	is_triggered_only = yes

	option = {
		name = FED_WE_MUST_COMPLY

		breach_fix_resolution_lawandorder_informed_governance = yes

		ai_chance = {
			factor = 5
		}
	}

	option = {
		name = FED_WE_WILL_RETAIN

		trigger = {
			NOR = {
				has_ethic = "ethic_xenophobe"
				has_ethic = "ethic_fanatic_xenophobe"
				has_ethic = "ethic_egalitarian"
				has_ethic = "ethic_fanatic_egalitarian"
				has_ethic = "ethic_xenophile"
				has_ethic = "ethic_fanatic_xenophile"
			}
		}

		add_monthly_resource_mult = {
			resource = unity
			value = @tier1unityreward
			min = @tier1unitymin
			max = @tier1unitymax
		}
		
		if = {
			limit = {
				has_policy_flag = resettlement_not_allowed
				can_set_policy = {
					policy = population_controls
					option = population_controls_allowed
				}
			}
			set_policy_cooldown = population_controls
		}
		if = {
			limit = {
				has_global_flag = expanded_pops_active
				has_policy_flag = free_press
				can_set_policy = {
					policy = media_rights
					option = censored_media
				}
			}
			set_policy_cooldown = media_rights
		}

		custom_tooltip = "FED_WE_WILL_BE_IN_BREACH"
		
		ai_chance = {
			factor = 1
		}
	}

	option = {
		name = FED_WE_WILL_NOT_SUBMIT

		trigger = {
			OR = {
				has_ethic = "ethic_xenophobe"
				has_ethic = "ethic_fanatic_xenophobe"
				has_ethic = "ethic_egalitarian"
				has_ethic = "ethic_fanatic_egalitarian"
				has_ethic = "ethic_xenophile"
				has_ethic = "ethic_fanatic_xenophile"
			}
		}

		add_monthly_resource_mult = {
			resource = unity
			value = @tier2unityreward
			min = @tier2unitymin
			max = @tier2unitymax
		}
		
		if = {
			limit = {
				has_policy_flag = resettlement_not_allowed
				can_set_policy = {
					policy = population_controls
					option = population_controls_allowed
				}
			}
			set_policy_cooldown = population_controls
		}
		if = {
			limit = {
				has_global_flag = expanded_pops_active
				has_policy_flag = free_press
				can_set_policy = {
					policy = media_rights
					option = censored_media
				}
			}
			set_policy_cooldown = media_rights
		}

		custom_tooltip = "FED_WE_WILL_BE_IN_BREACH"

		ai_chance = {
			factor = 2
		}
	}
}

country_event = {
	id = diploevent.8
	title = "resolution_lawandorder_free_migration"

	desc = {
		trigger = {
			is_gestalt = no
			NOT = { in_breach_of = resolution_lawandorder_free_migration }
		}
		text = "diploevent.8.desc"
	}
	desc = {
		trigger = {
			is_gestalt = no
			in_breach_of = resolution_lawandorder_free_migration
		}
		text = "diploevent.8.desc_breach"
	}
	desc = {
		trigger = {
			is_gestalt = yes
		}
		text = "diploevent.8.desc_gestalt"
	}

	picture = GFX_evt_alien_propaganda
	show_sound = event_conversation

	is_triggered_only = yes

	option = {
		name = EXCELLENT

		custom_tooltip = "lawandorder_free_migration_tooltip"
	}
}

country_event = {
	id = diploevent.9
	title = "resolution_lawandorder_right_to_work"

	desc = {
		text = "diploevent.9.desc"
	}

	picture = GFX_evt_galactic_senate
	show_sound = event_factions

	is_triggered_only = yes

	option = {
		name = FED_WE_MUST_COMPLY

		breach_fix_resolution_lawandorder_right_to_work = yes

		ai_chance = {
			factor = 5
		}
	}

	option = {
		name = FED_WE_WILL_RETAIN

		trigger = {
			NOR = {
				has_ethic = "ethic_xenophobe"
				has_ethic = "ethic_fanatic_xenophobe"
				has_ethic = "ethic_egalitarian"
				has_ethic = "ethic_fanatic_egalitarian"
			}
		}

		add_monthly_resource_mult = {
			resource = unity
			value = @tier1unityreward
			min = @tier1unitymin
			max = @tier1unitymax
		}
		
		if = {
			limit = {
				has_global_flag = expanded_pops_active
				OR = {
					has_policy_flag = worker_union_rights
					has_policy_flag = full_union_rights
				}
				can_set_policy = {
					policy = union_rights
					option = limited_union_rights
				}
			}
			set_policy_cooldown = union_rights
		}

		custom_tooltip = "FED_WE_WILL_BE_IN_BREACH"
		
		ai_chance = {
			factor = 1
			modifier = {
				factor = 0
				NOR = {
					has_authority = auth_democratic
					has_authority = auth_cooperative
				}
			}
		}
	}

	option = {
		name = FED_WE_WILL_NOT_SUBMIT

		trigger = {
			OR = {
				has_ethic = "ethic_xenophobe"
				has_ethic = "ethic_fanatic_xenophobe"
				has_ethic = "ethic_egalitarian"
				has_ethic = "ethic_fanatic_egalitarian"
			}
		}

		add_monthly_resource_mult = {
			resource = unity
			value = @tier2unityreward
			min = @tier2unitymin
			max = @tier2unitymax
		}
		
		if = {
			limit = {
				has_global_flag = expanded_pops_active
				OR = {
					has_policy_flag = worker_union_rights
					has_policy_flag = full_union_rights
				}
				can_set_policy = {
					policy = union_rights
					option = limited_union_rights
				}
			}
			set_policy_cooldown = union_rights
		}

		custom_tooltip = "FED_WE_WILL_BE_IN_BREACH"

		ai_chance = {
			factor = 2
			modifier = {
				factor = 3
				OR = {
					has_ethic = ethic_fanatic_egalitarian
					has_authority = auth_democratic
					has_authority = auth_cooperative
				}
			}
		}
	}
}

country_event = {
	id = diploevent.10
	title = "resolution_galacticcooperation_pan_galactic_migration"

	desc = {
		text = "diploevent.10.desc"
	}

	picture = GFX_evt_galactic_senate
	show_sound = event_factions

	is_triggered_only = yes

	option = {
		name = FED_WE_MUST_COMPLY

		breach_fix_resolution_galacticcooperation_pan_galactic_migration = yes

		ai_chance = {
			factor = 5
		}
	}

	option = {
		name = FED_WE_WILL_RETAIN

		trigger = {
			NOR = {
				has_ethic = "ethic_xenophobe"
				has_ethic = "ethic_fanatic_xenophobe"
				has_ethic = "ethic_authoritarian"
				has_ethic = "ethic_fanatic_authoritarian"
			}
		}

		add_monthly_resource_mult = {
			resource = unity
			value = @tier1unityreward
			min = @tier1unitymin
			max = @tier1unitymax
		}
		
		if = {
			limit = {
				has_policy_flag = refugees_not_allowed
				can_set_policy = {
					policy = refugees
					option = refugees_only_citizens
				}
			}
			set_policy_cooldown = refugees
		}

		custom_tooltip = "FED_WE_WILL_BE_IN_BREACH"
		
		ai_chance = {
			factor = 1
		}
	}

	option = {
		name = FED_WE_WILL_NOT_SUBMIT

		trigger = {
			OR = {
				has_ethic = "ethic_xenophobe"
				has_ethic = "ethic_fanatic_xenophobe"
				has_ethic = "ethic_authoritarian"
				has_ethic = "ethic_fanatic_authoritarian"
			}
		}

		add_monthly_resource_mult = {
			resource = unity
			value = @tier2unityreward
			min = @tier2unitymin
			max = @tier2unitymax
		}
		
		if = {
			limit = {
				has_policy_flag = refugees_not_allowed
				can_set_policy = {
					policy = refugees
					option = refugees_only_citizens
				}
			}
			set_policy_cooldown = refugees
		}

		custom_tooltip = "FED_WE_WILL_BE_IN_BREACH"

		ai_chance = {
			factor = 2
			modifier = {
				factor = 3
				has_ethic = "ethic_fanatic_xenophobe"
			}
		}
	}
}

country_event = {
	id = diploevent.11
	title = "resolution_galacticcooperation_interstellar_mediation"
	desc = "diploevent.11.desc"
	picture = GFX_evt_alien_propaganda
	show_sound = event_conversation

	is_triggered_only = yes

	option = {
		name = EXCELLENT
		trigger = {
			OR = {
				is_pacifist = yes
				is_xenophobic_isolationists = yes
				has_ai_personality_behaviour = multispecies
			}
			NOR = {
				has_ai_personality_behaviour = conqueror
				has_ai_personality_behaviour = propagator
			}
		}
		custom_tooltip = diploevent.11.a.tooltip
	}
	option = {
		name = DISCONCERTING
		trigger = {
			OR = {
				has_ai_personality_behaviour = conqueror
				has_ai_personality_behaviour = propagator
			}
		}
		custom_tooltip = diploevent.11.a.tooltip
	}
	option = {
		name = OK
		trigger = {
			NOR = {
				has_ai_personality_behaviour = conqueror
				has_ai_personality_behaviour = propagator
				is_pacifist = yes
				is_xenophobic_isolationists = yes
				has_ai_personality_behaviour = multispecies
			}
		}
		custom_tooltip = diploevent.11.a.tooltip
	}
	
	after = {
		if = {
			limit = { NOT = { has_technology = tech_mine_dark_matter } }
			add_research_option = tech_mine_dark_matter
		}
		if = {
			limit = {
				NOT = { has_technology = tech_mine_zro }
				is_robot_empire = no
			}
			add_research_option = tech_mine_zro
		}
		if = {
			limit = { NOT = { has_technology = tech_mine_living_metal } }
			add_research_option = tech_mine_living_metal
		}
	}
}

country_event = {
	id = diploevent.12
	title = "resolution_galacticcooperation_sanctity_of_life"

	desc = {
		text = "diploevent.12.desc"
	}

	picture = GFX_evt_galactic_senate
	show_sound = event_factions

	is_triggered_only = yes

	option = {
		name = FED_WE_MUST_COMPLY

		breach_fix_resolution_galacticcooperation_sanctity_of_life = yes

		ai_chance = {
			factor = 5
		}
	}

	option = {
		name = FED_WE_WILL_RETAIN

		trigger = {
			NOR = {
				has_ethic = "ethic_xenophobe"
				has_ethic = "ethic_fanatic_xenophobe"
				AND = {
					has_authority = auth_hive_mind
					NOT = { is_open_gestalt = yes }
				}
				has_origin = origin_natural_hunters
			}
		}

		add_monthly_resource_mult = {
			resource = unity
			value = @tier1unityreward
			min = @tier1unitymin
			max = @tier1unitymax
		}
		
		if = {
			limit = {
				OR = {
					has_policy_flag = pre_sapients_eat
					has_policy_flag = pre_sapients_purge
				}
				can_set_policy = {
					policy = pre_sapients
					option = pre_sapients_allow
				}
			}
			set_policy_cooldown = pre_sapients
		}

		custom_tooltip = "FED_WE_WILL_BE_IN_BREACH"
		
		ai_chance = {
			factor = 1
		}
	}

	option = {
		name = FED_WE_WILL_NOT_SUBMIT

		trigger = {
			OR = {
				has_ethic = "ethic_xenophobe"
				has_ethic = "ethic_fanatic_xenophobe"
				AND = {
					has_authority = auth_hive_mind
					NOT = { is_open_gestalt = yes }
				}
				has_origin = origin_natural_hunters
			}
		}

		add_monthly_resource_mult = {
			resource = unity
			value = @tier2unityreward
			min = @tier2unitymin
			max = @tier2unitymax
		}
		
		if = {
			limit = {
				OR = {
					has_policy_flag = pre_sapients_eat
					has_policy_flag = pre_sapients_purge
				}
				can_set_policy = {
					policy = pre_sapients
					option = pre_sapients_allow
				}
			}
			set_policy_cooldown = pre_sapients
		}

		custom_tooltip = "FED_WE_WILL_BE_IN_BREACH"

		ai_chance = {
			factor = 2
			modifier = {
				factor = 3
				has_ethic = "ethic_fanatic_xenophobe"
			}
		}
	}
}

country_event = {
	id = diploevent.13
	title = "resolution_galacticcooperation_sanctity_of_life"
	desc = "diploevent.13.desc"
	picture = GFX_evt_alien_propaganda
	show_sound = event_conversation

	is_triggered_only = yes

	option = {
		name = EXCELLENT

		custom_tooltip = "diploevent.13.a.tooltip"
	}
}

# Comply with Galactic Law on Space Clouds
country_event = {
	id = diploevent.14
	title = diploevent.14.name
	desc = diploevent.14.desc
	location = fromfrom
	picture = GFX_evt_friendly_amoeba
	show_sound = event_vote
	is_triggered_only = yes

	option = { #of course
		name = galactic_features.505.A
		custom_tooltip = spacecreatures.17.a.tooltip
		hidden_effect = {
			add_modifier = {
				modifier = pacified_clouds # friendly amoebas
				days = -1
			}
			every_country = {
				limit = { is_country_type = cloud }
				set_faction_hostility = {
					set_hostile = no
					set_neutral = yes
					target = root
				}
			}
		}
		ai_chance = {
			factor = 2
			modifier = {
				factor = 5
				OR = {
					is_xenophile = yes
					is_pacifist = yes
					is_spiritualist = yes
				}
			}
		}
	}
	option = { #we will not protect vermin
		name = diploevent.14.B
		custom_tooltip = galactic_features.505.B.tt
		ai_chance = {
			factor = 1
			modifier = {
				factor = 5
				OR = {
					is_militarist = yes
					is_xenophobe = yes
				}
			}
		}
	}
}

# Comply with Galactic Law on Mining Drones
country_event = {
	id = diploevent.15
	title = diploevent.15.name
	desc = diploevent.15.desc
	location = fromfrom
	picture = GFX_evt_friendly_amoeba
	show_sound = event_vote
	is_triggered_only = yes
	
	immediate = {
		random_system_within_border = {
			limit = {
				any_system_planet = {
					has_deposit = no
					OR = {
						is_planet_class = pc_asteroid
						is_planet_class = pc_molten
						is_planet_class = pc_toxic
						is_planet_class = pc_frozen
						is_planet_class = pc_barren
						is_planet_class = pc_barren_cold
						is_planet_class = pc_broken
						is_planet_class = pc_shattered			
					}
				}
			}
			save_event_target_as = new_drone_system
		}
	}

	option = { #of course
		name = galactic_features.505.A
		custom_tooltip = spacecreatures.18.a.tooltip
		hidden_effect = {
			add_modifier = {
				modifier = pacified_drones # friendly amoebas
				days = -1
			}
			every_country = {
				limit = { is_country_type = drone }
				set_faction_hostility = {
					set_hostile = no
					set_neutral = yes
					target = root
				}
			}
			event_target:new_drone_system = {
				random_system_planet = {
					limit = {
						has_deposit = no
						OR = {
							is_planet_class = pc_asteroid
							is_planet_class = pc_molten
							is_planet_class = pc_toxic
							is_planet_class = pc_frozen
							is_planet_class = pc_barren
							is_planet_class = pc_barren_cold
							is_planet_class = pc_broken
							is_planet_class = pc_shattered			
						}
					}
					set_deposit = d_minerals_4
					event_target:drone_country = {
						save_event_target_as = mining_drones
						create_fleet = {
							name = "NAME_Ancient_Mining_Drones"
							effect = {
								set_owner = event_target:drone_country
								while = {
									count = 10
									create_ship = {
										name = ""
										design = "NAME_Ancient_Mining_Drone"
									}
								}
								while = {
									count = 4
									create_ship = {
										name = ""
										design = "NAME_Ancient_Combat_Drone"
									}
								}
								set_location = PREVPREV
								set_fleet_stance = aggressive
								set_aggro_range_measure_from = return_point
								set_aggro_range = 150
								queue_actions = {
									repeat = {
										wait = {
											duration = 999
											random = 10
										}
									}
								}
							}
						}
					}
				}
				random_system_planet = {
					limit = {
						has_deposit = no
						OR = {
							is_planet_class = pc_asteroid
							is_planet_class = pc_molten
							is_planet_class = pc_toxic
							is_planet_class = pc_frozen
							is_planet_class = pc_barren
							is_planet_class = pc_barren_cold
							is_planet_class = pc_broken
							is_planet_class = pc_shattered			
						}
					}
					set_deposit = d_minerals_4
					event_target:drone_country = {
						save_event_target_as = mining_drones
						create_fleet = {
							name = "NAME_Ancient_Mining_Drones"
							effect = {
								set_owner = event_target:drone_country
								while = {
									count = 10
									create_ship = {
										name = ""
										design = "NAME_Ancient_Mining_Drone"
									}
								}
								while = {
									count = 4
									create_ship = {
										name = ""
										design = "NAME_Ancient_Combat_Drone"
									}
								}
								set_location = PREVPREV
								set_fleet_stance = aggressive
								set_aggro_range_measure_from = return_point
								set_aggro_range = 150
								queue_actions = {
									repeat = {
										wait = {
											duration = 999
											random = 10
										}
									}
								}
							}
						}
					}
				}
			}
		}
		ai_chance = {
			factor = 2
			modifier = {
				factor = 5
				OR = {
					is_xenophile = yes
					is_pacifist = yes
					is_materialist = yes
				}
			}
		}
	}
	option = { #we will not protect vermin
		name = diploevent.15.B
		custom_tooltip = galactic_features.505.B.tt
		ai_chance = {
			factor = 1
			modifier = {
				factor = 5
				OR = {
					is_militarist = yes
					is_xenophobe = yes
					is_spiritualist = yes
				}
			}
		}
	}
}

# Comply with Galactic Law on Crystals
country_event = {
	id = diploevent.16
	title = diploevent.16.name
	desc = diploevent.16.desc
	location = fromfrom
	picture = GFX_evt_friendly_amoeba
	show_sound = event_vote
	is_triggered_only = yes

	option = { #of course
		name = galactic_features.505.A
		custom_tooltip = story.207.a.tooltip
		hidden_effect = {
			add_modifier = {
				modifier = pacified_crystals # friendly amoebas
				days = -1
			}
			every_country = {
				limit = { is_country_type = crystal }
				set_faction_hostility = {
					set_hostile = no
					set_neutral = yes
					target = root
				}
			}
		}
		ai_chance = {
			factor = 2
			modifier = {
				factor = 5
				OR = {
					is_xenophile = yes
					is_pacifist = yes
				}
			}
		}
	}
	option = { #we will not protect vermin
		name = diploevent.16.B
		custom_tooltip = galactic_features.505.B.tt
		ai_chance = {
			factor = 1
			modifier = {
				factor = 5
				OR = {
					is_militarist = yes
					is_xenophobe = yes
				}
			}
		}
	}
}

# Reset hostility when repealing laws
country_event = {
	id = diploevent.17
	hide_window = yes
	is_triggered_only = yes

	immediate = {
		remove_modifier = pacified_amoebas
		every_country = {
			limit = {
				OR = {
					is_country_type = amoeba
					is_country_type = amoeba_borderless
					is_country_type = amoeba_garrison
				}
			}
			set_faction_hostility = {
				set_neutral = no
				set_hostile = yes
				target = root
			}
		}
	}
}
country_event = {
	id = diploevent.18
	hide_window = yes
	is_triggered_only = yes

	immediate = {
		remove_modifier = pacified_clouds
		every_country = {
			limit = { is_country_type = cloud }
			set_faction_hostility = {
				set_neutral = no
				set_hostile = yes
				target = root
			}
		}
	}
}
country_event = {
	id = diploevent.19
	hide_window = yes
	is_triggered_only = yes

	immediate = {
		remove_modifier = pacified_crystals
		every_country = {
			limit = { is_country_type = crystal }
			set_faction_hostility = {
				set_neutral = no
				set_hostile = yes
				target = root
			}
		}
	}
}
country_event = {
	id = diploevent.20
	hide_window = yes
	is_triggered_only = yes

	immediate = {
		remove_modifier = pacified_drones
		every_country = {
			limit = { is_country_type = drone }
			set_faction_hostility = {
				set_neutral = no
				set_hostile = yes
				target = root
			}
		}
	}
}

country_event = {
	id = diploevent.21
	title = "resolution_healthcare_war_relief"

	desc = {
		text = "diploevent.21.desc"
	}

	picture = GFX_evt_galactic_senate
	show_sound = event_factions

	is_triggered_only = yes

	option = {
		name = FED_WE_MUST_COMPLY

		breach_fix_resolution_healthcare_war_relief = yes

		ai_chance = {
			factor = 5
		}
	}

	option = {
		name = FED_WE_WILL_RETAIN

		trigger = {
			NOR = {
				is_xenophobe = yes
				AND = {
					is_authoritarian = yes
					is_xenophile = no
				}
			}
		}

		add_monthly_resource_mult = {
			resource = unity
			value = @tier1unityreward
			min = @tier1unitymin
			max = @tier1unitymax
		}

		custom_tooltip = "FED_WE_WILL_BE_IN_BREACH"
		
		ai_chance = {
			factor = 1
		}
	}

	option = {
		name = FED_WE_WILL_NOT_SUBMIT

		trigger = {
			OR = {
				is_xenophobe = yes
				is_authoritarian = yes
			}
			is_xenophile = no
		}

		add_monthly_resource_mult = {
			resource = unity
			value = @tier2unityreward
			min = @tier2unitymin
			max = @tier2unitymax
		}
		
		custom_tooltip = "FED_WE_WILL_BE_IN_BREACH"

		ai_chance = {
			factor = 2
			modifier = {
				factor = 3
				has_ethic = "ethic_fanatic_xenophobe"
			}
			modifier = {
				factor = 3
				has_ethic = "ethic_fanatic_authoritarian"
			}
		}
	}
}

country_event = {
	id = diploevent.22
	title = "resolution_healthcare_clonal_medicine"

	desc = {
		text = "diploevent.22.desc"
	}

	picture = GFX_evt_galactic_senate
	show_sound = event_factions

	is_triggered_only = yes

	option = {
		name = FED_WE_MUST_COMPLY

		breach_fix_resolution_healthcare_clonal_medicine = yes

		ai_chance = {
			factor = 5
		}
	}

	option = {
		name = FED_WE_WILL_RETAIN

		trigger = {
			NOR = {
				is_xenophobe = yes
				is_authoritarian = yes
				has_civic = civic_infestation
				has_civic = civic_living_hosts
				AND = {
					is_auth_corporate = yes
					NOT = { has_valid_civic = civic_worker_coop }
				}
			}
		}

		add_monthly_resource_mult = {
			resource = unity
			value = @tier1unityreward
			min = @tier1unitymin
			max = @tier1unitymax
		}

		custom_tooltip = "FED_WE_WILL_BE_IN_BREACH"
		
		ai_chance = {
			factor = 1
		}
	}

	option = {
		name = FED_WE_WILL_NOT_SUBMIT

		trigger = {
			OR = {
				is_xenophobe = yes
				is_authoritarian = yes
				has_civic = civic_infestation
				has_civic = civic_living_hosts
				AND = {
					is_auth_corporate = yes
					NOT = { has_valid_civic = civic_worker_coop }
				}
			}
		}

		add_monthly_resource_mult = {
			resource = unity
			value = @tier2unityreward
			min = @tier2unitymin
			max = @tier2unitymax
		}
		
		custom_tooltip = "FED_WE_WILL_BE_IN_BREACH"

		ai_chance = {
			factor = 2
			modifier = {
				factor = 3
				has_ethic = "ethic_fanatic_xenophobe"
			}
			modifier = {
				factor = 3
				has_ethic = "ethic_fanatic_authoritarian"
			}
		}
	}
}

country_event = {
	id = diploevent.23
	title = "resolution_healthcare_universal_healthcare"

	desc = {
		text = "diploevent.23.desc_no_pops"
		trigger = { NOT = { has_global_flag = expanded_pops_active } }
	}
	desc = {
		text = "diploevent.23.desc"
		trigger = { has_global_flag = expanded_pops_active }
	}

	picture = GFX_evt_galactic_senate
	show_sound = event_factions

	is_triggered_only = yes

	option = {
		name = FED_WE_MUST_COMPLY

		breach_fix_resolution_healthcare_universal_healthcare = yes

		ai_chance = {
			factor = 5
		}
	}

	option = {
		name = FED_WE_WILL_RETAIN

		trigger = {
			NOR = {
				is_xenophobe = yes
				is_authoritarian = yes
				has_civic = civic_infestation
				has_civic = civic_living_hosts
				AND = {
					is_auth_corporate = yes
					NOT = { has_valid_civic = civic_worker_coop }
				}
			}
		}

		add_monthly_resource_mult = {
			resource = unity
			value = @tier1unityreward
			min = @tier1unitymin
			max = @tier1unitymax
		}

		custom_tooltip = "FED_WE_WILL_BE_IN_BREACH"
		
		ai_chance = {
			factor = 1
		}
	}

	option = {
		name = FED_WE_WILL_NOT_SUBMIT

		trigger = {
			OR = {
				is_xenophobe = yes
				is_authoritarian = yes
				has_civic = civic_infestation
				has_civic = civic_living_hosts
				AND = {
					is_auth_corporate = yes
					NOT = { has_valid_civic = civic_worker_coop }
				}
			}
		}

		add_monthly_resource_mult = {
			resource = unity
			value = @tier2unityreward
			min = @tier2unitymin
			max = @tier2unitymax
		}
		
		custom_tooltip = "FED_WE_WILL_BE_IN_BREACH"

		ai_chance = {
			factor = 2
			modifier = {
				factor = 3
				has_ethic = "ethic_fanatic_xenophobe"
			}
			modifier = {
				factor = 3
				has_ethic = "ethic_fanatic_authoritarian"
			}
		}
	}
}

###      Ascension      ###
### Reserved: 100 - 199 ###
# Gateway
event = {
	id = diploevent.100
	hide_window = yes
	is_triggered_only = yes
	
	trigger = {
		OR = {
			has_global_flag = resolution_ascension_psionic_flag
			has_global_flag = resolution_ascension_genetic_flag
			has_global_flag = resolution_ascension_cyborg_flag
		}
	}
	
	immediate = {
		if = {
			limit = { has_global_flag = resolution_ascension_psionic_flag }
			# Normal
			every_country = {
				limit = {
					is_galactic_community_member = yes
					has_ascension_perk = ap_transcendence
					NOT = { has_policy_flag = psionic_no_teaching }
					has_resource = { type = sr_zro amount >= 10 }
					is_megacorp = no # uses branch offices instead
					any_owned_planet = {
						OR = {
							has_building = building_psi_corps
							has_planet_flag = built_one_psi_corps
						}
					}
				}
				every_owned_planet = {
					limit = {
						OR = {
							has_building = building_psi_corps
							has_planet_flag = built_one_psi_corps
						}
					}
					planet_event = { id = diploevent.102 days = 1 random = 7 }
				}
			}
			# Megacorp
			every_country = {
				limit = {
					NOR = {
						has_ascension_perk = ap_the_flesh_is_weak
						has_ascension_perk = ap_transcendence
						is_robot_empire = yes
						is_gestalt = yes
					}
					any_owned_planet = {
						has_branch_office = yes
						has_building = building_corp_psi
						any_owned_pop = {
							is_psionic_candidate = yes
						}
					}
				}
				every_owned_planet = {
					limit = {
						has_branch_office = yes
						has_building = building_corp_psi
						any_owned_pop = {
							is_psionic_candidate = yes
						}
					}
					planet_event = { id = diploevent.101 }
				}
			}
		}
		if = {
			limit = { has_global_flag = resolution_ascension_cyborg_flag }
			# Normal
			every_country = {
				limit = {
					is_galactic_community_member = yes
					has_ascension_perk = ap_the_flesh_is_weak
					NOT = { has_policy_flag = cyborg_no_teaching }
					has_resource = { type = volatile_motes amount >= 25 }
					is_megacorp = no # uses branch offices instead
					any_owned_planet = {
						has_building = building_robot_assembly_plant
					}
				}
				every_owned_planet = {
					limit = {
						has_building = building_robot_assembly_plant
					}
					planet_event = { id = diploevent.104 days = 1 random = 7 }
				}
			}
			# Megacorp
			every_country = {
				limit = {
					NOR = {
						has_ascension_perk = ap_mind_over_matter
						has_ascension_perk = ap_transcendence
						has_ascension_perk = ap_the_flesh_is_weak
						is_robot_empire = yes
						is_gestalt = yes
					}
					any_owned_planet = {
						has_branch_office = yes
						has_building = building_corp_cyborg
						any_owned_pop = {
							is_cyborg_candidate = yes
						}
					}
				}
				every_owned_planet = {
					limit = {
						has_branch_office = yes
						has_building = building_corp_cyborg
						any_owned_pop = {
							is_cyborg_candidate = yes
						}
					}
					planet_event = { id = diploevent.103 }
				}
			}
		}
		if = {
			limit = { has_global_flag = galactic_community_resolution_passed }
			# Normal
			every_country = {
				limit = {
					is_galactic_community_member = yes
					has_technology = tech_genetic_resequencing
					NOT = { has_policy_flag = genetic_no_teaching }
					has_resource = { type = exotic_gases amount >= 25 }
					is_megacorp = no # uses branch offices instead
					any_owned_planet = {
						OR = {
							has_building = building_clinic
							has_building = building_hospital
							has_building = building_spawning_pool
							has_building = building_spawning_pool_2
							has_building = building_clone_vats
						}
					}
				}
				every_owned_planet = {
					limit = {
						OR = {
							has_building = building_clinic
							has_building = building_hospital
							has_building = building_spawning_pool
							has_building = building_spawning_pool_2
							has_building = building_clone_vats
						}
					}
					planet_event = { id = diploevent.106 days = 1 random = 7 }
				}
			}
			# Megacorp
			every_country = {
				limit = {
					NOR = {
						is_robot_empire = yes
						is_gestalt = yes
					}
					any_owned_planet = {
						has_branch_office = yes
						has_building = building_corp_genetic
						any_owned_pop = {
							is_gene_candidate = yes
						}
					}
				}
				every_owned_planet = {
					limit = {
						has_branch_office = yes
						has_building = building_corp_genetic
						any_owned_pop = {
							is_gene_candidate = yes
						}
					}
					planet_event = { id = diploevent.105 }
				}
			}
		}
	}
}

# Private Academy
planet_event = {
	id = diploevent.101
	hide_window = yes
	is_triggered_only = yes
	
	immediate = {
		random_list = {
			1 = {
				# nothing happens
				modifier = {
					factor = 2
					NOT = {
						any_owned_pop = {
							is_psionic_candidate = yes
							OR = {
								pop_has_ethic = ethic_spiritualist
								pop_has_ethic = ethic_xenophile
							}
						}
					}
				}
			}
			1 = {
				random_owned_pop = {
					limit = {
						is_psionic_candidate = yes
					}
					modify_species = {
						species = this
						remove_trait = trait_latent_psionic
						add_trait = trait_psionic
						add_traits_at_start_of_list = yes
					}
					add_modifier = { modifier = psionic_recently_awakened days = 360 }
				}
				branch_office_owner = {
					add_resource = { influence = 33 }
				}
			}
		}
	}
}
# Psionic Academy
planet_event = {
	id = diploevent.102
	hide_window = yes
	is_triggered_only = yes
	
	trigger = {
		exists = owner
		owner = {
			is_galactic_community_member = yes
			NOT = { has_policy_flag = psionic_no_teaching }
			has_resource = { type = sr_zro amount >= 10 }
		}
	}
	
	immediate = {
		owner = {
			save_event_target_as = academy_owner
			random_relation = {
				limit = {
					is_galactic_community_member = yes
					NOR = {
						has_ascension_perk = ap_transcendence
						has_ascension_perk = ap_the_flesh_is_weak
						is_robot_empire = yes
						is_gestalt = yes
						has_policy_flag = psionic_no_learning
					}
					any_owned_pop = {
						is_psionic_candidate = yes
					}
					OR = {
						is_in_federation_with = event_target:academy_owner
						AND = {
							OR = {
								has_defensive_pact = event_target:academy_owner
								has_association_status = event_target:academy_owner
								AND = {
									is_subject = yes
									has_overlord = event_target:academy_owner
								}
							}
							event_target:academy_owner = { NOT = { has_policy_flag = cyborg_federation_only } }
						}
						AND = {
							OR = {
								opinion_level = { who = event_target:academy_owner level >= good }
								AND = {
									is_subject = yes
									has_overlord = event_target:academy_owner
								}
							}
							event_target:academy_owner = {
								OR = {
									has_policy_flag = cyborg_good_relations
									has_policy_flag = cyborg_neutral_relations
								}
							}
						}
						AND = {
							OR = {
								opinion_level = { who = event_target:academy_owner level >= neutral }
								AND = {
									is_subject = yes
									has_overlord = event_target:academy_owner
								}
							}
							event_target:academy_owner = { has_policy_flag = cyborg_neutral_relations }
						}
					}
				}
				random_list = {
					1 = {
						# nothing happens
						modifier = {
							factor = 2
							NOT = {
								any_owned_pop = {
									is_psionic_candidate = yes
									OR = {
										pop_has_ethic = ethic_spiritualist
										pop_has_ethic = ethic_xenophile
									}
								}
							}
						}
					}
					1 = {
						random_owned_pop = {
							limit = {
								is_psionic_candidate = yes
							}
							modify_species = {
								species = this
								remove_trait = trait_latent_psionic
								add_trait = trait_psionic
								add_traits_at_start_of_list = yes
							}
							add_modifier = { modifier = psionic_recently_awakened days = 360 }
						}
						event_target:academy_owner = {
							add_resource = { influence = 33 }
							add_resource = { sr_zro = -10 }
						}
					}
				}
			}
		}
	}
}

# Private Cyborg Surgery
planet_event = {
	id = diploevent.103
	hide_window = yes
	is_triggered_only = yes
	
	immediate = {
		random_list = {
			1 = {
				# nothing happens
				modifier = {
					factor = 2
					NOT = {
						any_owned_pop = {
							is_cyborg_candidate = yes
							OR = {
								pop_has_ethic = ethic_materialist
								pop_has_ethic = ethic_xenophile
							}
						}
					}
				}
			}
			1 = {
				random_owned_pop = {
					limit = {
						is_cyborg_candidate = yes
					}
					modify_species = {
						species = this
						remove_trait = trait_primitive_cybernetic
						add_trait = trait_cybernetic
						add_traits_at_start_of_list = yes
					}
					add_modifier = { modifier = recently_cyborg days = 360 }
				}
				branch_office_owner = {
					add_resource = { influence = 33 }
				}
			}
		}
	}
}
# Cyborg Surgery
planet_event = {
	id = diploevent.104
	hide_window = yes
	is_triggered_only = yes
	
	trigger = {
		exists = owner
		owner = {
			is_galactic_community_member = yes
			NOT = { has_policy_flag = cyborg_no_teaching }
			has_resource = { type = volatile_motes amount >= 25 }
		}
	}
	
	immediate = {
		owner = {
			save_event_target_as = academy_owner
			random_relation = {
				limit = {
					is_galactic_community_member = yes
					NOR = {
						has_ascension_perk = ap_mind_over_matter
						has_ascension_perk = ap_transcendence
						has_ascension_perk = ap_the_flesh_is_weak
						is_robot_empire = yes
						is_gestalt = yes
						has_policy_flag = cyborg_no_learning
					}
					any_owned_pop = {
						is_cyborg_candidate = yes
					}
					OR = {
						is_in_federation_with = event_target:academy_owner
						AND = {
							OR = {
								has_defensive_pact = event_target:academy_owner
								has_association_status = event_target:academy_owner
								AND = {
									is_subject = yes
									has_overlord = event_target:academy_owner
								}
							}
							event_target:academy_owner = { NOT = { has_policy_flag = cyborg_federation_only } }
						}
						AND = {
							OR = {
								opinion_level = { who = event_target:academy_owner level >= good }
								AND = {
									is_subject = yes
									has_overlord = event_target:academy_owner
								}
							}
							event_target:academy_owner = {
								OR = {
									has_policy_flag = cyborg_good_relations
									has_policy_flag = cyborg_neutral_relations
								}
							}
						}
						AND = {
							OR = {
								opinion_level = { who = event_target:academy_owner level >= neutral }
								AND = {
									is_subject = yes
									has_overlord = event_target:academy_owner
								}
							}
							event_target:academy_owner = { has_policy_flag = cyborg_neutral_relations }
						}
					}
				}
				random_list = {
					1 = {
						# nothing happens
						modifier = {
							factor = 2
							NOT = {
								any_owned_pop = {
									is_cyborg_candidate = yes
									OR = {
										pop_has_ethic = ethic_materialist
										pop_has_ethic = ethic_xenophile
									}
								}
							}
						}
					}
					1 = {
						random_owned_pop = {
							limit = {
								is_cyborg_candidate = yes
							}
							modify_species = {
								species = this
								remove_trait = trait_latent_psionic
								remove_trait = trait_primitive_cybernetic
								add_trait = trait_cybernetic
								add_traits_at_start_of_list = yes
							}
							add_modifier = { modifier = recently_cyborg days = 360 }
						}
						event_target:academy_owner = {
							add_resource = { influence = 33 }
							add_resource = { volatile_motes = -25 }
						}
					}
				}
			}
		}
	}
}

# Private Gene Therapy
planet_event = {
	id = diploevent.105
	hide_window = yes
	is_triggered_only = yes
	
	immediate = {
		random_list = {
			1 = {
				# nothing happens
				modifier = {
					factor = 2
					NOT = {
						any_owned_pop = {
							is_gene_candidate = yes
							OR = {
								pop_has_ethic = ethic_xenophile
								is_erudite_candidate = yes
							}
						}
					}
				}
			}
			1 = {
				random_owned_pop = {
					limit = {
						is_gene_candidate = yes
					}
					if = {
						limit = {
							is_erudite_candidate = yes
						}
						modify_species = {
							species = this
							remove_trait = trait_intelligent
							remove_trait = trait_uninventive
							add_trait = trait_erudite
						}
					}
					else_if = {
						limit = {
							has_global_flag = expanded_pops_active
							is_lithoid = no
							is_pheremones_candidate = yes
						}
						modify_species = {
							species = this
							remove_trait = trait_charismatic
							remove_trait = trait_repugnant
							add_trait = trait_pheremones
						}
					}
					else_if = {
						limit = {
							has_global_flag = expanded_pops_active
							is_lithoid = yes
							is_pheremones_candidate = yes
						}
						modify_species = {
							species = this
							remove_trait = trait_charismatic
							remove_trait = trait_repugnant
							add_trait = trait_lithoid_shiny
						}
					}
					else_if = {
						limit = {
							is_lithoid = yes
						}
						random_list = {
							1 = {
								modifier = {
									factor = 0
									has_trait = trait_clones
								}
								modify_species = {
									species = this
									remove_trait = trait_lithoid_crystal
									add_trait = trait_rapid_breeders_lithoid
								}
							}
							1 = {
								modifier = {
									factor = 0
									ROOT = {
										OR = {
											habitable_structure = yes
											habitability = { who = PREV value >= 0.70 }
										}
									}
								}
								modifier = {
									factor = 0
									has_trait = trait_exploiter
								}
								modify_species = {
									species = this
									remove_trait = trait_ageless
									add_trait = trait_adaptive_lithoid
								}
							}
							1 = {
								modify_species = {
									species = this
									remove_trait = trait_intelligent
									remove_trait = trait_uninventive
									add_trait = trait_erudite
								}
							}
							1 = {
								modifier = {
									factor = 0
									NOT = { has_global_flag = expanded_pops_active }
								}
								modify_species = {
									species = this
									add_trait = trait_lithoid_compact
								}
							}
						}
					}
					else_if = {
						limit = {
							is_lithoid = no
						}
						random_list = {
							1 = {
								modify_species = {
									species = this
									remove_trait = trait_nonadaptive
									remove_trait = trait_adaptive
									remove_trait = trait_extremely_adaptive
									remove_trait = trait_endemic
									add_trait = trait_robust
								}
							}
							1 = {
								modifier = {
									factor = 0
									OR = {
										has_trait = trait_fungal_colony
										has_trait = trait_clonal_colony
										has_trait = trait_clones
									}
								}
								modify_species = {
									species = this
									remove_trait = trait_slow_breeders
									remove_trait = trait_rapid_breeders
									add_trait = trait_fertile
								}
							}
						}
					}
					add_modifier = { modifier = recently_genetic days = 360 }
				}
				branch_office_owner = {
					add_resource = { influence = 33 }
				}
			}
		}
	}
}
# Gene Therapy
planet_event = {
	id = diploevent.106
	hide_window = yes
	is_triggered_only = yes
	
	trigger = {
		exists = owner
		owner = {
			is_galactic_community_member = yes
			NOT = { has_policy_flag = genetic_no_teaching }
			has_resource = { type = exotic_gases amount >= 25 }
		}
	}
	
	immediate = {
		owner = {
			save_event_target_as = academy_owner
			random_relation = {
				limit = {
					is_galactic_community_member = yes
					NOR = {
						is_robot_empire = yes
						has_policy_flag = genetic_no_learning
					}
					any_owned_pop = {
						is_gene_candidate = yes
					}
					OR = {
						is_in_federation_with = event_target:academy_owner
						AND = {
							OR = {
								has_defensive_pact = event_target:academy_owner
								has_association_status = event_target:academy_owner
								AND = {
									is_subject = yes
									has_overlord = event_target:academy_owner
								}
							}
							event_target:academy_owner = { NOT = { has_policy_flag = genetic_federation_only } }
						}
						AND = {
							OR = {
								opinion_level = { who = event_target:academy_owner level >= good }
								AND = {
									is_subject = yes
									has_overlord = event_target:academy_owner
								}
							}
							event_target:academy_owner = {
								OR = {
									has_policy_flag = genetic_good_relations
									has_policy_flag = genetic_neutral_relations
								}
							}
						}
						AND = {
							OR = {
								opinion_level = { who = event_target:academy_owner level >= neutral }
								AND = {
									is_subject = yes
									has_overlord = event_target:academy_owner
								}
							}
							event_target:academy_owner = { has_policy_flag = genetic_neutral_relations }
						}
					}
				}
				random_list = {
					1 = {
						# nothing happens
						modifier = {
							factor = 2
							NOT = {
								any_owned_pop = {
									is_gene_candidate = yes
									OR = {
										pop_has_ethic = ethic_xenophile
										is_erudite_candidate = yes
									}
								}
							}
						}
					}
					1 = {
						random_owned_pop = {
							limit = {
								is_gene_candidate = yes
							}
							if = {
								limit = {
									is_erudite_candidate = yes
								}
								modify_species = {
									species = this
									remove_trait = trait_intelligent
									remove_trait = trait_uninventive
									add_trait = trait_erudite
								}
							}
							else_if = {
								limit = {
									has_global_flag = expanded_pops_active
									is_lithoid = no
									is_pheremones_candidate = yes
								}
								modify_species = {
									species = this
									remove_trait = trait_charismatic
									remove_trait = trait_repugnant
									add_trait = trait_pheremones
								}
							}
							else_if = {
								limit = {
									has_global_flag = expanded_pops_active
									is_lithoid = yes
									is_pheremones_candidate = yes
								}
								modify_species = {
									species = this
									remove_trait = trait_charismatic
									remove_trait = trait_repugnant
									add_trait = trait_lithoid_shiny
								}
							}
							else_if = {
								limit = {
									is_lithoid = no
								}
								random_list = {
									1 = {
										modify_species = {
											species = this
											remove_trait = trait_nonadaptive
											remove_trait = trait_adaptive
											remove_trait = trait_extremely_adaptive
											remove_trait = trait_endemic
											add_trait = trait_robust
										}
									}
									1 = {
										modifier = {
											factor = 0
											OR = {
												has_trait = trait_fungal_colony
												has_trait = trait_clonal_colony
												has_trait = trait_clones
											}
										}
										modify_species = {
											species = this
											remove_trait = trait_slow_breeders
											remove_trait = trait_rapid_breeders
											add_trait = trait_fertile
										}
									}
								}
							}
							add_modifier = { modifier = recently_genetic days = 360 }
						}
						event_target:academy_owner = {
							add_resource = { influence = 33 }
							add_resource = { exotic_gases = -25 }
						}
					}
				}
			}
		}
	}
}


###   Envoy Events    ###
### Reserved: 200-299 ###

# Envoy Trade for Enclave
country_event = {
	id = diploevent.200
	title = diploevent.200.name
	desc = diploevent.200.desc
	
	picture = GFX_evt_diplomatic_visit
	show_sound = event_default
	
	trigger = {
		NOT = { has_country_flag = recent_envoy_event }
		NOT = { has_country_flag = recent_enclave_proposal }
		is_at_war = no
		resource_stockpile_compare = { resource = energy value >= 10000 }
		OR = { is_country_type = default is_country_type = ascended_empire is_country_type = lost_empire }
		any_envoy = {
			OR = {
				AND = {
					has_envoy_task = { task = improve_relations }
					envoy_location_country = {
						is_at_war = no
						OR = { is_country_type = default is_country_type = ascended_empire is_country_type = lost_empire }
						opinion_level = { who = ROOT level >= good }
						any_system_within_border = { is_sellable_enclave_system = yes }
					}
				}
				AND = {
					has_envoy_task = { task = federation }
					root.federation = {
						any_member = {
							OR = { is_country_type = default is_country_type = ascended_empire is_country_type = lost_empire }
							opinion_level = { who = ROOT level >= good }
							any_system_within_border = { is_sellable_enclave_system = yes }
						}
					}
				}
			}
		}
	}

	is_triggered_only = yes

	immediate = {
		set_timed_country_flag = {
			flag = recent_envoy_event
			days = 5400
		}
		set_timed_country_flag = {
			flag = recent_enclave_proposal
			days = 18000
		}
		random_envoy = {
			limit = {
				OR = {
					AND = {
						has_envoy_task = { task = improve_relations }
						envoy_location_country = {
							is_at_war = no
							OR = { is_country_type = default is_country_type = ascended_empire is_country_type = lost_empire }
							opinion_level = { who = ROOT level >= good }
							any_system_within_border = { is_sellable_enclave_system = yes }
						}
					}
					AND = {
						has_envoy_task = { task = federation }
						root.federation = {
							any_member = {
								OR = { is_country_type = default is_country_type = ascended_empire is_country_type = lost_empire }
								opinion_level = { who = ROOT level >= good }
								any_system_within_border = { is_sellable_enclave_system = yes }
							}
						}
					}
				}
			}
			save_event_target_as = event_envoy
			if = {
				limit = { has_envoy_task = { task = improve_relations } }
				envoy_location_country = {
					save_event_target_as = other_species_nation
					random_system_within_border = {
						limit = { is_sellable_enclave_system = yes }
						save_event_target_as = enclave_system
					}
				}
			}
			else = {
				root.federation = {
					random_member = {
						limit = {
							OR = { is_country_type = default is_country_type = ascended_empire is_country_type = lost_empire }
							opinion_level = { who = ROOT level >= good }
							any_system_within_border = { is_sellable_enclave_system = yes }
						}
						save_event_target_as = other_species_nation
						random_system_within_border = {
							limit = { is_sellable_enclave_system = yes }
							save_event_target_as = enclave_system
						}
					}
				}
			}
		}
	}
	
	option = {
		name = diploevent.200.a
		custom_tooltip = diploevent.200.a.tooltip
		hidden_effect = {
			event_target:other_species_nation = {
				country_event = { id = diploevent.201 days = 3 }
			}
		}
	}
	option = {
		name = diploevent.200.b
		trigger = {
			is_ai = no
		}
		add_resource = { influence = 25 }
	}
}
country_event = {
	id = diploevent.201
	title = diploevent.201.name
	desc = {
		text = diploevent.201.desc_a
		trigger = {
			NOR = {
				has_country_flag = enclave_system_rare_resources
				has_country_flag = enclave_system_advanced_resources
			}
		}
	}
	desc = {
		text = diploevent.201.desc_b
		trigger = {
			has_country_flag = enclave_system_advanced_resources
		}
	}
	desc = {
		text = diploevent.201.desc_c
		trigger = {
			has_country_flag = enclave_system_rare_resources
		}
	}
	
	picture = GFX_evt_diplomatic_visit
	show_sound = event_default
	
	is_triggered_only = yes

	immediate = {
		if = {
			limit = {
				event_target:enclave_system = {
					any_system_planet = {
						OR = {
							has_deposit = d_zro_deposit_1
							has_deposit = d_zro_deposit_2
							has_deposit = d_zro_deposit_2
							has_deposit = d_zro_deposit_4
							has_deposit = d_zro_deposit_5
							has_deposit = d_dark_matter_deposit_1
							has_deposit = d_dark_matter_deposit_2
							has_deposit = d_dark_matter_deposit_3
							has_deposit = d_dark_matter_deposit_10
							has_deposit = d_living_metal_deposit
						}
					}
				}
			}
			set_country_flag = enclave_system_rare_resources
		}
		else_if = {
			limit = {
				event_target:enclave_system = {
					any_system_planet = {
						OR = {
							has_deposit = d_exotic_gases_1
							has_deposit = d_exotic_gases_2
							has_deposit = d_exotic_gases_3
							has_deposit = d_exotic_gases_4
							has_deposit = d_exotic_gases_5
							has_deposit = d_rare_crystals_1
							has_deposit = d_rare_crystals_2
							has_deposit = d_rare_crystals_3
							has_deposit = d_rare_crystals_4
							has_deposit = d_rare_crystals_5
							has_deposit = d_volatile_motes_1
							has_deposit = d_volatile_motes_2
							has_deposit = d_volatile_motes_3
							has_deposit = d_volatile_motes_4
							has_deposit = d_volatile_motes_5
						}
					}
				}
			}
			set_country_flag = enclave_system_advanced_resources
		}
	}
	
	option = {
		# 5000
		name = diploevent.201.a
		hidden_effect = {
			set_country_flag = sell_system_one
			country_event = { id = diploevent.202 days = 3 }
		}
		ai_chance = {
			factor = 1
			modifier = {
				factor = 0
				OR = {
					has_country_flag = enclave_system_rare_resources
					has_country_flag = enclave_system_advanced_resources
				}
			}
		}
	}
	option = {
		# 7500
		name = diploevent.201.b
		hidden_effect = {
			set_country_flag = sell_system_two
			country_event = { id = diploevent.202 days = 3 }
		}
		ai_chance = {
			factor = 1
			modifier = {
				factor = 0
				has_country_flag = enclave_system_rare_resources
			}
		}
	}
	option = {
		# 10000
		name = diploevent.201.c
		hidden_effect = {
			set_country_flag = sell_system_three
			country_event = { id = diploevent.202 days = 3 }
		}
		ai_chance = {
			factor = 1
			modifier = {
				factor = 0
				NOR = {
					has_country_flag = enclave_system_rare_resources
					has_country_flag = enclave_system_advanced_resources
				}
			}
		}
	}
	option = {
		name = diploevent.201.d
		hidden_effect = {
			set_country_flag = sell_system_no
			country_event = { id = diploevent.202 days = 3 }
		}
		ai_chance = {
			factor = 0.5
			modifier = {
				factor = 0
				NOR = {
					has_country_flag = enclave_system_rare_resources
					has_country_flag = enclave_system_advanced_resources
				}
			}
			modifier = {
				factor = 4
				has_country_flag = enclave_system_rare_resources
			}
		}
	}
	after = {
		hidden_effect = {
		}
	}
}
country_event = {
	id = diploevent.202
	title = THEIR_RESPONSE
	desc = {
		trigger = {
			FROM = { has_country_flag = sell_system_one }
		}
		text = diploevent.202.desc_a
	}
	desc = {
		trigger = {
			FROM = { has_country_flag = sell_system_two }
		}
		text = diploevent.202.desc_b
	}
	desc = {
		trigger = {
			FROM = { has_country_flag = sell_system_three }
		}
		text = diploevent.202.desc_c
	}
	desc = {
		trigger = {
			FROM = { has_country_flag = sell_system_no }
		}
		text = diploevent.202.desc_d
	}
	show_sound = event_default
	diplomatic = yes
	picture_event_data = {
		portrait = from
		planet_background = from
		graphical_culture = from
		city_level = from
		room = from.ruler
	}
	is_triggered_only = yes
	
	immediate = {
		if = {
			limit = {
				is_ai = yes
				NOT = { resource_stockpile_compare = { resource = energy value >= 10000 } }
			}
			while = {
				limit = { 
					resource_stockpile_compare = { resource = energy value >= 10000 }
				}
				add_resource = { energy = 1000 }
			}
		}
	}

	option = {
		name = "DEAL"
		trigger = {
			FROM = { has_country_flag = sell_system_one }
		}
		allow = {
			resource_stockpile_compare = { resource = energy value >= 5000 }
		}
		add_resource = { energy = -5000 }
		hidden_effect = {
			FROM = {
				add_resource = { energy = 5000 }
				country_event = { id = diploevent.203 }
			}
			event_target:enclave_system = {
				starbase = { set_owner = ROOT }
			}
		}
		custom_tooltip = diploevent.202.tooltip
	}
	option = {
		name = "DEAL"
		trigger = {
			FROM = { has_country_flag = sell_system_two }
		}
		allow = {
			resource_stockpile_compare = { resource = energy value >= 7500 }
		}
		add_resource = { energy = -7500 }
		hidden_effect = {
			FROM = {
				add_resource = { energy = 7500 }
				country_event = { id = diploevent.203 }
			}
			event_target:enclave_system = {
				starbase = { set_owner = ROOT }
			}
		}
		custom_tooltip = diploevent.202.tooltip
	}
	option = {
		name = "DEAL"
		trigger = {
			FROM = { has_country_flag = sell_system_three }
		}
		allow = {
			resource_stockpile_compare = { resource = energy value >= 10000 }
		}
		add_resource = { energy = -10000 }
		hidden_effect = {
			FROM = {
				add_resource = { energy = 10000 }
				country_event = { id = diploevent.203 }
			}
			event_target:enclave_system = {
				starbase = { set_owner = ROOT }
			}
		}
		custom_tooltip = diploevent.202.tooltip
	}
	option = {
		name = "UNFORTUNATE"
		trigger = {
			FROM = { has_country_flag = sell_system_no }
		}
		add_opinion_modifier = {
			who = FROM
			modifier = opinion_refused_to_sell
		}
	}
	option = {
		name = "NODEAL"
		trigger = {
			is_ai = no
			FROM = {
				OR = {
					has_country_flag = sell_system_one
					has_country_flag = sell_system_two
					has_country_flag = sell_system_three
				}
			}
		}
		hidden_effect = {
			FROM = { country_event = { id = diploevent.204 } }
		}
	}
	after = {
		hidden_effect = {
			FROM = {
				remove_country_flag = enclave_system_advanced_resources
				remove_country_flag = enclave_system_rare_resources
				remove_country_flag = sell_system_one
				remove_country_flag = sell_system_two
				remove_country_flag = sell_system_three
				remove_country_flag = sell_system_no
			}
		}
	}
}
country_event = {
	id = diploevent.203
	title = THEIR_RESPONSE
	desc = diploevent.203.desc
	show_sound = event_default
	diplomatic = yes
	picture_event_data = {
		portrait = from
		planet_background = from
		graphical_culture = from
		city_level = from
		room = from.ruler
	}
	is_triggered_only = yes

	option = {
		name = "SPLENDID"
		custom_tooltip = diploevent.203.tooltip
	}
}
country_event = {
	id = diploevent.204
	title = THEIR_RESPONSE
	desc = diploevent.204.desc
	show_sound = event_default
	diplomatic = yes
	picture_event_data = {
		portrait = from
		planet_background = from
		graphical_culture = from
		city_level = from
		room = from.ruler
	}
	is_triggered_only = yes

	option = {
		name = "UNFORTUNATE"
	}
}

# Envoy Steals Research
country_event = {
	id = diploevent.205
	title = diploevent.205.name
	desc = diploevent.205.desc_a
	desc = diploevent.205.desc_b
	desc = {
		text = diploevent.205.desc_c
		trigger = {
			event_target:other_species_nation = { is_gestalt = no }
		}
	}
	desc = diploevent.205.desc_d
	desc = {
		text = diploevent.205.desc_e
		trigger = {
			event_target:other_species_nation = { is_gestalt = no }
		}
	}
	desc = {
		text = diploevent.205.desc_f
		trigger = {
			event_target:other_species_nation = { is_hive_empire = no }
		}
	}
	desc = {
		text = diploevent.205.desc_g
		trigger = {
			event_target:other_species_nation = { is_hive_empire = yes }
		}
	}
	desc = {
		text = diploevent.205.desc_h
		trigger = {
			event_target:other_species_nation = { is_machine_empire = yes }
		}
	}
	desc = diploevent.205.desc_i
	
	picture = GFX_evt_sapient_AI
	show_sound = event_alien_signal
	
	trigger = {
		NOT = { has_country_flag = recent_envoy_event }
		NOT = { has_modifier = dishonorable_envoys }
		OR = { is_country_type = default is_country_type = ascended_empire is_country_type = lost_empire }
		any_envoy = {
			NOT = { has_envoy_task = { task = none } }
			OR = {
				AND = {
					has_envoy_task = { task = harm_relations }
					envoy_location_country = {
						OR = { is_country_type = default is_country_type = ascended_empire is_country_type = lost_empire }
						relative_power = {
							who = ROOT
							category = technology
							value > equivalent
						}
					}
				}
				AND = {
					has_envoy_task = { task = spy_network }
					envoy_location_country = {
						OR = { is_country_type = default is_country_type = ascended_empire is_country_type = lost_empire }
						relative_power = {
							who = ROOT
							category = technology
							value > equivalent
						}
					}
				}
				AND = {
					has_envoy_task = { task = galactic_community }
					any_country = {
						OR = { is_country_type = default is_country_type = ascended_empire is_country_type = lost_empire }
						is_galactic_community_member = yes
						opinion_level = { who = ROOT level <= poor }
						relative_power = {
							who = ROOT
							category = technology
							value > equivalent
						}
					}
				}
			}
		}
	}

	is_triggered_only = yes

	immediate = {
		set_timed_country_flag = {
			flag = recent_envoy_event
			days = 5400
		}
		random_envoy = {
			limit = {
				NOT = { has_envoy_task = { task = none } }
				OR = {
					AND = {
						has_envoy_task = { task = harm_relations }
						envoy_location_country = {
							OR = { is_country_type = default is_country_type = ascended_empire is_country_type = lost_empire }
							relative_power = {
								who = ROOT
								category = technology
								value > equivalent
							}
						}
					}
					AND = {
						has_envoy_task = { task = spy_network }
						envoy_location_country = {
							OR = { is_country_type = default is_country_type = ascended_empire is_country_type = lost_empire }
							relative_power = {
								who = ROOT
								category = technology
								value > equivalent
							}
						}
					}
					AND = {
						has_envoy_task = { task = galactic_community }
						any_country = {
							OR = { is_country_type = default is_country_type = ascended_empire is_country_type = lost_empire }
							is_galactic_community_member = yes
							opinion_level = { who = ROOT level <= poor }
							relative_power = {
								who = ROOT
								category = technology
								value > equivalent
							}
						}
					}
				}
			}
			save_event_target_as = event_envoy
			if = {
				limit = {
					OR = {
						has_envoy_task = { task = harm_relations }
						has_envoy_task = { task = spy_network }
					}
					envoy_location_country = {
						OR = { is_country_type = default is_country_type = ascended_empire is_country_type = lost_empire }
						relative_power = {
							who = ROOT
							category = technology
							value > equivalent
						}
					}
				}
				envoy_location_country = {
					save_event_target_as = other_species_nation
				}
			}
			else = {
				random_country = {
					limit = {
						OR = { is_country_type = default is_country_type = ascended_empire is_country_type = lost_empire }
						is_galactic_community_member = yes
						opinion_level = { who = ROOT level <= poor }
						relative_power = {
							who = ROOT
							category = technology
							value > equivalent
						}
					}
					save_event_target_as = other_species_nation
				}
			}
		}
	}
	
	option = {
		name = EXCELLENT
		if = {
			limit = {
				any_spynetwork = {
					owner = { is_same_value = root }
					target = { is_same_value = event_target:other_species_nation }
				}
			}
			random_spynetwork = {
				limit = {
					owner = { is_same_value = root }
					target = { is_same_value = event_target:other_species_nation }
				}
				create_espionage_asset = { type = asset_research_database }
			}
		}
		locked_random_list = {
			33 = {
				add_monthly_resource_mult = {
					resource = physics_research
					value = @tier3researchreward
					min = @tier3researchmin
					max = @tier3researchmax
				}
			}
			33 = {
				add_monthly_resource_mult = {
					resource = society_research
					value = @tier3researchreward
					min = @tier3researchmin
					max = @tier3researchmax
				}
			}
			33 = {
				add_monthly_resource_mult = {
					resource = engineering_research
					value = @tier3researchreward
					min = @tier3researchmin
					max = @tier3researchmax
				}
			}
		}
	}
}

# Envoy Caught Stealing Research
country_event = {
	id = diploevent.206
	title = diploevent.205.name
	desc = diploevent.206.desc_a
	desc = diploevent.206.desc_b
	desc = diploevent.206.desc_c
	desc = diploevent.206.desc_d
	desc = {
		text = diploevent.206.desc_e
		trigger = { is_gestalt = yes }
	}
	desc = {
		text = diploevent.206.desc_f
		trigger = { is_hive_empire = no }
	}
	desc = {
		text = diploevent.206.desc_g
		trigger = { is_gestalt = no }
	}
	
	picture = GFX_evt_assembly_fight
	show_sound = event_assembly_fight
	
	is_triggered_only = yes

	immediate = {
		# Event Targets for Localization
		random_owned_leader = {
			limit = {
				leader_class = scientist
				OR = {
					is_researching_area = society
					is_researching_area = engineering
					is_researching_area = physics
				}
			}
			save_event_target_as = our_head_researcher
		}
	}
	
	after = {
		hidden_effect = {
			event_target:event_envoy = {
				kill_leader = {
					show_notification = no
				}
			}
		}
	}
	
	option = {
		name = diploevent.206.a
		add_opinion_modifier = {
			who = event_target:other_species_nation
			modifier = opinion_tried_to_steal_secrets
		}
	}
}
country_event = {
	id = diploevent.207
	title = diploevent.207.name
	desc = diploevent.207.desc
	picture = GFX_evt_assembly_fight
	show_sound = event_assembly_fight
	
	is_triggered_only = yes
	
	trigger = {
		NOT = { has_country_flag = recent_envoy_event }
		NOT = { has_modifier = dishonorable_envoys }
		NOT = { has_country_flag = dishonorable_envoys }
		NOT = { has_modifier = galactic_community_diplo_corps_respected }
		OR = { is_country_type = default is_country_type = ascended_empire is_country_type = lost_empire }
		any_relation = {
			OR = { is_country_type = default is_country_type = ascended_empire is_country_type = lost_empire }
			relative_power = {
				who = ROOT
				category = technology
				value > equivalent
			}
			opinion_level = { who = ROOT level <= poor }
			ROOT = {
				any_envoy = {
					NOT = { has_leader_flag = silly_envoy }
					NOT = { has_envoy_task = { task = none } }
					OR = {
						AND = {
							has_envoy_task = { task = harm_relations }
							envoy_location_country = {
								is_same_value = PREVPREV
							}
						}
						AND = {
							has_envoy_task = { task = spy_network }
							envoy_location_country = {
								is_same_value = PREVPREV
							}
						}
						AND = {
							has_envoy_task = { task = galactic_community }
							PREVPREV = { is_galactic_community_member = yes }
						}
					}
				}
			}
		}
	}
	
	immediate = {
		set_timed_country_flag = {
			flag = recent_envoy_event
			days = 5400
		}
		random_relation = {
			limit = {
				OR = { is_country_type = default is_country_type = ascended_empire is_country_type = lost_empire }
				relative_power = {
					who = ROOT
					category = technology
					value > equivalent
				}
				opinion_level = { who = ROOT level <= poor }
				ROOT = {
					any_envoy = {
						NOT = { has_leader_flag = silly_envoy }
						NOT = { has_envoy_task = { task = none } }
						OR = {
							AND = {
								has_envoy_task = { task = harm_relations }
								envoy_location_country = {
									is_same_value = PREVPREV
								}
							}
							AND = {
								has_envoy_task = { task = spy_network }
								envoy_location_country = {
									is_same_value = PREVPREV
								}
							}
							AND = {
								has_envoy_task = { task = galactic_community }
								PREVPREV = { is_galactic_community_member = yes }
							}
						}
					}
				}
			}
			save_event_target_as = other_species_nation
			ROOT = {
				random_envoy = {
					limit = {
						NOT = { has_leader_flag = silly_envoy }
						NOT = { has_envoy_task = { task = none } }
						OR = {
							AND = {
								has_envoy_task = { task = harm_relations }
								envoy_location_country = {
									is_same_value = PREVPREV
								}
							}
							AND = {
								has_envoy_task = { task = spy_network }
								envoy_location_country = {
									is_same_value = PREVPREV
								}
							}
							AND = {
								has_envoy_task = { task = galactic_community }
								PREVPREV = { is_galactic_community_member = yes }
							}
						}
					}
					save_event_target_as = event_envoy
				}
			}
			country_event = { id = diploevent.206 }
		}
	}
	
	after = {
		hidden_effect = {
			set_timed_country_flag = {
				flag = dishonorable_envoys
				days = 36000
			}
		}
	}
	
	option = {
		name = TERRIBLE
		tooltip = { add_modifier = { modifier = dishonorable_envoys days = 9000 } }
		custom_tooltip = diploevent.207.a.tooltip
	}
}

# Criminal Syndicate: Envoy bribes planetary officials

country_event = {
	id = diploevent.208
	title = diploevent.208.name
	desc = diploevent.208.desc
	picture = GFX_evt_dark_alley
	show_sound = event_criminal_activity
	
	trigger = {
		is_criminal_syndicate = yes
		NOT = { has_country_flag = recent_envoy_event }
		OR = { is_country_type = default is_country_type = ascended_empire is_country_type = lost_empire }
		any_envoy = {
			NOT = { has_envoy_task = { task = none } }
			OR = {
				AND = {
					OR = {
						has_envoy_task = { task = improve_relations }
						has_envoy_task = { task = harm_relations }
						has_envoy_task = { task = spy_network }
					}
					envoy_location_country = {
						OR = { is_country_type = default is_country_type = ascended_empire is_country_type = lost_empire }
						any_owned_planet = {
							NOT = { has_modifier = diplo_mod_bribed_officials }
							planet_crime < 90
							has_branch_office = yes
							branch_office_owner = { is_same_value = ROOT }
						}
					}
				}
				AND = {
					has_envoy_task = { task = federation }
					root.federation = {
						any_member = {
							OR = { is_country_type = default is_country_type = ascended_empire is_country_type = lost_empire }
							any_owned_planet = {
								NOT = { has_modifier = diplo_mod_bribed_officials }
								planet_crime < 90
								has_branch_office = yes
								branch_office_owner = { is_same_value = ROOT }
							}
						}
					}
				}
			}
		}
	}

	is_triggered_only = yes

	immediate = {
		set_timed_country_flag = {
			flag = recent_envoy_event
			days = 5400
		}
		random_envoy = {
			limit = {
				NOT = { has_envoy_task = { task = none } }
				OR = {
					AND = {
						OR = {
							has_envoy_task = { task = improve_relations }
							has_envoy_task = { task = harm_relations }
							has_envoy_task = { task = spy_network }
						}
						envoy_location_country = {
							OR = { is_country_type = default is_country_type = ascended_empire is_country_type = lost_empire }
							any_owned_planet = {
								NOT = { has_modifier = diplo_mod_bribed_officials }
								planet_crime < 90
								has_branch_office = yes
								branch_office_owner = { is_same_value = ROOT }
							}
						}
					}
					AND = {
						has_envoy_task = { task = federation }
						root.federation = {
							any_member = {
								OR = { is_country_type = default is_country_type = ascended_empire is_country_type = lost_empire }
								any_owned_planet = {
									NOT = { has_modifier = diplo_mod_bribed_officials }
									planet_crime < 90
									has_branch_office = yes
									branch_office_owner = { is_same_value = ROOT }
								}
							}
						}
					}
				}
			}
			save_event_target_as = event_envoy
			if = {
				limit = {
					OR = {
						has_envoy_task = { task = improve_relations }
						has_envoy_task = { task = harm_relations }
						has_envoy_task = { task = spy_network }
					}
				}
				envoy_location_country = {
					save_event_target_as = other_species_nation
					random_owned_planet = {
						limit = {
							NOT = { has_modifier = diplo_mod_bribed_officials }
							planet_crime < 90
							has_branch_office = yes
							branch_office_owner = { is_same_value = ROOT }
						}
						save_event_target_as = branch_office_planet
					}
				}
			}
			else = {
				root.federation = {
					random_member = {
						limit = {
							OR = { is_country_type = default is_country_type = ascended_empire is_country_type = lost_empire }
							any_owned_planet = {
								NOT = { has_modifier = diplo_mod_bribed_officials }
								planet_crime < 90
								has_branch_office = yes
								branch_office_owner = { is_same_value = ROOT }
							}
						}
						save_event_target_as = other_species_nation
						random_owned_planet = {
							limit = {
								NOT = { has_modifier = diplo_mod_bribed_officials }
								planet_crime < 90
								has_branch_office = yes
								branch_office_owner = { is_same_value = ROOT }
							}
							save_event_target_as = branch_office_planet
						}
					}
				}
			}
		}
		event_target:branch_office_planet = {
			add_modifier = { modifier = diplo_mod_bribed_officials days = 11880 }
			planet_event = { id = diploevent.209 }
		}
		random_spynetwork = {
			limit = {
				owner = { is_same_value = root }
				target = { is_same_value = event_target:other_species_nation }
			}
			create_espionage_asset = { type = asset_bureaucrat }
		}
	}
	
	option = {
		name = EXCELLENT
		tooltip = {
			event_target:branch_office_planet = {
				add_modifier = { modifier = diplo_mod_bribed_officials days = 11880 }
			}
			random_spynetwork = {
				limit = {
					owner = { is_same_value = root }
					target = { is_same_value = event_target:other_species_nation }
				}
				create_espionage_asset = { type = asset_bureaucrat }
			}
		}
	}
}
planet_event = {
	id = diploevent.209
	title = diploevent.209.name
	desc = diploevent.209.desc
	picture = GFX_evt_dark_alley
	show_sound = event_criminal_activity
	
	is_triggered_only = yes
	
	option = {
		name = UNFORTUNATE
		tooltip = {
			add_modifier = { modifier = diplo_mod_bribed_officials days = 11880 }
		}
	}
	
}

# Envoy: Increases opinion among federation members
country_event = {
	id = diploevent.210
	title = diploevent.210.name
	desc = diploevent.210.desc
	
	picture = GFX_evt_diplomatic_visit
	show_sound = event_default
	
	trigger = {
		NOT = { has_country_flag = recent_envoy_event }
		NOT = { has_country_flag = recent_federation_gala }
		OR = { is_country_type = default is_country_type = ascended_empire is_country_type = lost_empire }
		has_federation = yes
		is_at_war = no
		is_homicidal = no
		any_envoy = {
			has_envoy_task = { task = improve_relations }
			envoy_location_country = {
				has_federation = no
				is_at_war = no
				is_homicidal = no
				opinion_level = { who = ROOT level >= neutral }
				ROOT = {
					federation = {
						any_member = {
							opinion_level = { who = PREVPREVPREV level < good }
						}
					}
				}
			}
		}
	}

	is_triggered_only = yes

	immediate = {
		set_timed_country_flag = {
			flag = recent_envoy_event
			days = 5400
		}
		random_envoy = {
			limit = {
				has_envoy_task = { task = improve_relations }
				envoy_location_country = {
					has_federation = no
					is_at_war = no
					is_homicidal = no
					opinion_level = { who = ROOT level >= neutral }
					ROOT = {
						federation = {
							any_member = {
								opinion_level = { who = PREVPREVPREV level < good }
							}
						}
					}
				}
			}
			save_event_target_as = event_envoy
			envoy_location_country = {
				save_event_target_as = other_species_nation
			}
		}
	}
	
	option = {
		name = diploevent.210.a
		hidden_effect = {
			event_target:other_species_nation = { country_event = { id = diploevent.211 } }
		}
	}
	option = {
		name = diploevent.210.b
		trigger = {
			is_ai = no
		}
		add_resource = { influence = 25 }
	}
}
country_event = {
	id = diploevent.211
	title = diploevent.211.name
	desc = diploevent.211.desc
	
	picture = GFX_evt_diplomatic_visit
	show_sound = event_default
	
	is_triggered_only = yes

	immediate = {
		FROM = {
			federation = {
				if = {
					limit = {
						any_member = {
							OR = {
								ROOT = { opinion_level = { who = PREV level < poor } }
								ROOT = { is_rival = PREV }
							}
						}
					}
					random_member = {
						limit = {
							OR = {
								ROOT = { opinion_level = { who = PREV level < poor } }
								ROOT = { is_rival = PREV }
							}
						}
						save_event_target_as = hated_federation_member
					}
				}
			}
		}
	}
	
	option = {
		name = diploevent.211.a
		ai_chance = {
			factor = 0.75
			modifier = {
				factor = 2
				NOT = { exists = event_target:hated_federation_member }
			}
			modifier = {
				factor = 2
				opinion_level = { who = FROM level >= good }
			}
			modifier = {
				factor = 0.5
				opinion_level = { who = FROM level <= poor }
			}
			modifier = {
				factor = 2
				is_xenophile = yes
			}
			modifier = {
				factor = 2
				is_pacifist = yes
			}
			modifier = {
				factor = 2
				is_civic_diplomatic_corps = yes
			}
			modifier = {
				factor = 2
				is_open_gestalt = yes
			}
			modifier = {
				factor = 0.75
				is_gestalt = yes
				is_civic_machine_servitor = no
				is_civic_diplomatic_corps = no
				is_open_gestalt = no
			}
			modifier = {
				factor = 0.75
				is_militarist = yes
			}
			modifier = {
				factor = 0.25
				is_xenophobe = yes
			}
			modifier = {
				factor = 0
				OR = {
					has_ethic = ethic_fanatic_xenophobe
					is_xenophobic_isolationists = yes
				}
			}
		}
		custom_tooltip = diploevent.213.a.tooltip
		hidden_effect = { country_event = { id = diploevent.213 days = 3 } }
	}
	option = {
		name = diploevent.211.b
		ai_chance = {
			factor = 0.25
			modifier = {
				factor = 0
				is_xenophobe = no
				OR = {
					has_ethic = ethic_fanatic_xenophile
					has_ethic = ethic_fanatic_pacifist
					is_civic_diplomatic_corps = yes
					is_civic_machine_servitor = yes
				}
			}
		}
		hidden_effect = { country_event = { id = diploevent.212 days = 3 } }
	}
	option = {
		name = diploevent.211.c
		trigger = { exists = event_target:hated_federation_member }
		allow = { is_xenophile = no }
		ai_chance = {
			factor = 0.25
			modifier = {
				factor = 8
				is_xenophobe = yes
			}
			modifier = {
				factor = 0
				is_xenophobe = no
				OR = {
					has_ethic = ethic_fanatic_pacifist
					is_civic_diplomatic_corps = yes
					is_civic_machine_servitor = yes
				}
			}
		}
		add_resource = { influence = 25 }
		hidden_effect = { country_event = { id = diploevent.212 days = 3 } }
	}
}
country_event = {
	id = diploevent.212
	title = THEIR_RESPONSE
	desc = diploevent.212.desc
	show_sound = event_default
	diplomatic = yes
	picture_event_data = {
		portrait = from
		planet_background = from
		graphical_culture = from
		city_level = from
		room = from.ruler
	}
	is_triggered_only = yes
	
	immediate = {
		set_timed_country_flag = {
			flag = recent_federation_gala
			days = 9000
		}
	}

	option = {
		name = "UNFORTUNATE"
	}
}
country_event = {
	id = diploevent.213
	title = THEIR_RESPONSE
	desc = diploevent.213.desc
	show_sound = event_default
	diplomatic = yes
	picture_event_data = {
		portrait = from
		planet_background = from
		graphical_culture = from
		city_level = from
		room = from.ruler
	}
	is_triggered_only = yes
	
	immediate = {
		set_timed_country_flag = {
			flag = recent_federation_gala
			days = 9000
		}
		FROM = { save_event_target_as = invited_guest }
		country_event = { id = diploevent.214 days = 120 }
	}

	option = {
		name = "EXCELLENT"
		custom_tooltip = diploevent.213.a.tooltip
	}
}
# Summit Begins
country_event = {
	id = diploevent.214
	title = diploevent.214.name
	desc = {
		text = diploevent.214.desc
		trigger = {
			OR = {
				NOT = { exists = event_target:hated_federation_member }
				has_country_flag = hated_federation_member_not_trouble
			}
		}
	}
	desc = {
		text = diploevent.214.desc_hostile
		trigger = {
			exists = event_target:hated_federation_member
			NOT = { has_country_flag = hated_federation_member_not_trouble }
		}
	}
	
	picture = GFX_evt_diplomatic_visit
	show_sound = event_conversation
	
	is_triggered_only = yes
	
	immediate = {
		if = {
			limit = {
				exists = event_target:hated_federation_member
				event_target:invited_guest = {
					NOR = {
						opinion_level = { who = event_target:hated_federation_member level < poor }
						is_rival = event_target:hated_federation_member
					}
				}
			}
			set_timed_country_flag = {
				flag = hated_federation_member_not_trouble
				days = 360
			}
		}
		# Set up initial gala status
		set_variable = { which = federation_gala_outcome value = 50 }
		# Host Qualities
		if = {
			limit = { is_civic_diplomatic_corps = yes }
			change_variable = { which = federation_gala_outcome value = 1 }
		}
		if = {
			limit = {
				OR = {
					is_civic_machine_servitor = yes
					is_xenophile = yes
					is_pacifist = yes
					is_open_gestalt = yes
				}
			}
			change_variable = { which = federation_gala_outcome value = 1 }
		}
		if = {
			limit = {
				OR = {
					is_militarist = yes
					is_xenophobe = yes
					is_xenophobic_isolationists = yes
					AND = {
						is_gestalt = yes
						is_civic_machine_servitor = no
						is_civic_diplomatic_corps = no
						is_open_gestalt = no
					}
				}
			}
			subtract_variable = { which = federation_gala_outcome value = 1 }
		}
		# Guest Qualities
		if = {
			limit = { event_target:invited_guest = { is_civic_diplomatic_corps = yes } }
			change_variable = { which = federation_gala_outcome value = 1 }
		}
		if = {
			limit = { event_target:invited_guest = { is_civic_machine_servitor = yes } }
			change_variable = { which = federation_gala_outcome value = 1 }
		}
		if = {
			limit = { event_target:invited_guest = { is_xenophile = yes } }
			change_variable = { which = federation_gala_outcome value = 1 }
		}
		if = {
			limit = { event_target:invited_guest = { is_open_gestalt = yes } }
			change_variable = { which = federation_gala_outcome value = 1 }
		}
		if = {
			limit = { event_target:invited_guest = { is_pacifist = yes } }
			change_variable = { which = federation_gala_outcome value = 1 }
		}
		if = {
			limit = { event_target:invited_guest = { is_militarist = yes } }
			subtract_variable = { which = federation_gala_outcome value = 1 }
		}
		if = {
			limit = {
				event_target:invited_guest = {
					is_gestalt = yes
					is_civic_machine_servitor = no
					is_civic_diplomatic_corps = no
					is_open_gestalt = no
				}
			}
			subtract_variable = { which = federation_gala_outcome value = 1 }
		}
		if = {
			limit = {
				event_target:invited_guest = {
					OR = {
						is_xenophobe = yes
						is_xenophobic_isolationists = yes
					}
				}
			}
			subtract_variable = { which = federation_gala_outcome value = 1 }
		}
		if = {
			limit = {
				exists = event_target:hated_federation_member
				NOT = { has_country_flag = hated_federation_member_not_trouble }
			}
			subtract_variable = { which = federation_gala_outcome value = 2 }
		}
	}
	
	option = {
		name = "diploevent.214.a"
	}
	after = {
		event_target:invited_guest = {
			country_event = { id = diploevent.215 days = 1 }
		}
		country_event = { id = diploevent.216 days = 10 }
	}
}
country_event = {
	id = diploevent.215
	title = diploevent.214.name
	desc = {
		text = diploevent.215.desc
		trigger = {
			OR = {
				NOT = { exists = event_target:hated_federation_member }
				FROM = { has_country_flag = hated_federation_member_not_trouble }
			}
		}
	}
	desc = {
		text = diploevent.215.desc_hostile
		trigger = {
			exists = event_target:hated_federation_member
			FROM = { NOT = { has_country_flag = hated_federation_member_not_trouble } }
		}
	}
	
	picture = GFX_evt_diplomatic_visit
	show_sound = event_conversation
	
	is_triggered_only = yes
	
	option = {
		name = "diploevent.214.a"
		trigger = {
			NOR = {
				is_auth_corporate = yes
				any_owned_leader = {
					leader_class = ruler
					OR = {
						has_ruler_trait = trait_ruler_charismatic
						has_ruler_trait = trait_ruler_subsumed_will
						has_ruler_trait = trait_ruler_eye_for_talent
						has_ruler_trait = trait_ruler_pooled_knowledge
						has_ruler_trait = trait_ruler_investor
						has_ruler_trait = trait_ruler_industrialist
						species = {
							OR = {
								has_trait = trait_charismatic
								has_trait = trait_pheremones
								has_trait = trait_lithoid_shiny
								has_trait = trait_robot_emotion_emulators
							}
						}
					}
				}
				owner_species = {
					OR = {
						has_trait = trait_charismatic
						has_trait = trait_pheremones
						has_trait = trait_lithoid_shiny
						has_trait = trait_robot_emotion_emulators
					}
				}
			}
		}
		custom_tooltip = federation_gala_outcome_may_boost
		hidden_effect = {
			FROM = {
				random_list = {
					3 = { }
					2 = { change_variable = { which = federation_gala_outcome value = 1 } }
					1 = { change_variable = { which = federation_gala_outcome value = 2 } }
					1 = { subtract_variable = { which = federation_gala_outcome value = 1 } }
				}
			}
		}
	}
	option = {
		name = "diploevent.215.charm"
		trigger = {
			OR = {
				any_owned_leader = {
					leader_class = ruler
					OR = {
						has_ruler_trait = trait_ruler_charismatic
						has_ruler_trait = trait_ruler_subsumed_will
						species = {
							OR = {
								has_trait = trait_charismatic
								has_trait = trait_pheremones
								has_trait = trait_lithoid_shiny
								has_trait = trait_robot_emotion_emulators
							}
						}
					}
				}
				owner_species = {
					OR = {
						has_trait = trait_charismatic
						has_trait = trait_pheremones
						has_trait = trait_lithoid_shiny
						has_trait = trait_robot_emotion_emulators
					}
				}
			}
		}
		custom_tooltip = federation_gala_outcome_boost
		hidden_effect = {
			FROM = { change_variable = { which = federation_gala_outcome value = 2 } }
		}
	}
	option = {
		name = "diploevent.215.talent"
		trigger = {
			any_owned_leader = {
				leader_class = ruler
				OR = {
					has_ruler_trait = trait_ruler_eye_for_talent
					has_ruler_trait = trait_ruler_pooled_knowledge
				}
			}
		}
		custom_tooltip = federation_gala_outcome_boost
		hidden_effect = {
			FROM = { change_variable = { which = federation_gala_outcome value = 2 } }
		}
	}
	option = {
		name = "diploevent.215.trade"
		trigger = {
			OR = {
				is_auth_corporate = yes
				any_owned_leader = {
					leader_class = ruler
					OR = {
						has_ruler_trait = trait_ruler_investor
						has_ruler_trait = trait_ruler_industrialist
					}
				}
			}
			FROM = {
				federation = {
					any_member = { is_gestalt = no }
				}
			}
		}
		custom_tooltip = federation_gala_outcome_boost
		hidden_effect = {
			FROM = { change_variable = { which = federation_gala_outcome value = 2 } }
		}
	}
}
# Opening Speech
country_event = {
	id = diploevent.216
	title = diploevent.216.name
	desc = diploevent.216.desc
	picture = GFX_evt_galactic_senate
	show_sound = event_conversation
	
	is_triggered_only = yes
	
	option = {
		name = "diploevent.216.a"
		custom_tooltip = diploevent.216.a.tooltip
		hidden_effect = {
			random_list = {
				1 = { }
				1 = { change_variable = { which = federation_gala_outcome value = 1 } }
			}
		}
		ai_chance = {
			factor = 0.1
		}
	}
	option = {
		name = "diploevent.216.charm"
		trigger = {
			any_owned_leader = {
				leader_class = ruler
				OR = {
					has_ruler_trait = trait_ruler_charismatic
					has_ruler_trait = trait_ruler_subsumed_will
					species = {
						OR = {
							has_trait = trait_charismatic
							has_trait = trait_pheremones
							has_trait = trait_lithoid_shiny
							has_trait = trait_robot_emotion_emulators
						}
					}
				}
			}
		}
		ai_chance = {
			factor = 0.75
		}
		custom_tooltip = federation_gala_outcome_appreciate
		hidden_effect = {
			change_variable = { which = federation_gala_outcome value = 2 }
		}
	}
	option = {
		name = "diploevent.216.reformer"
		trigger = {
			any_owned_leader = {
				leader_class = ruler
				OR = {
					has_ruler_trait = trait_ruler_champion_of_the_people
					has_ruler_trait = leader_trait_reformer
					has_ruler_trait = trait_ruler_one_mind
					has_ruler_trait = leader_trait_reformer_gestalt
				}
			}
		}
		ai_chance = {
			factor = 0.5
		}
		custom_tooltip = federation_gala_outcome_appreciate
		hidden_effect = {
			change_variable = { which = federation_gala_outcome value = 2 }
		}
	}
	option = {
		name = "diploevent.216.phile"
		trigger = {
			OR = {
				is_xenophile = yes
				is_pacifist = yes
				is_civic_diplomatic_corps = yes
				is_civic_machine_servitor = yes
			}
			is_xenophobe = no
		}
		ai_chance = {
			factor = 0.5
		}
		if = {
			limit = {
				event_target:invited_guest = {
					OR = {
						is_xenophobe = yes
						is_xenophobic_isolationists = yes
					}
				}
			}
			custom_tooltip = federation_gala_outcome_dislikes
			hidden_effect = {
				subtract_variable = { which = federation_gala_outcome value = 2 }
			}
		}
		else_if = {
			limit = {
				event_target:invited_guest = {
					OR = {
						is_xenophile = yes
						is_pacifist = yes
						is_civic_diplomatic_corps = yes
						is_civic_machine_servitor = yes
						is_open_gestalt = yes
						has_valid_civic = civic_memorialist
						has_valid_civic = civic_memorialist_corp
						has_valid_civic = civic_hive_memorialist
						has_valid_civic = civic_machine_memorialist
					}
				}
			}
			custom_tooltip = federation_gala_outcome_appreciate
			hidden_effect = {
				change_variable = { which = federation_gala_outcome value = 2 }
			}
		}
		else = {
			custom_tooltip = federation_gala_outcome_may_boost
			hidden_effect = {
				random_list = {
					4 = { }
					3 = { change_variable = { which = federation_gala_outcome value = 1 } }
					1 = { subtract_variable = { which = federation_gala_outcome value = 1 } }
				}
			}
		}
	}
	option = {
		name = "diploevent.216.mil"
		trigger = {
			OR = {
				is_militarist = yes
				is_xenophobe = yes
				is_civic_militarist = yes
			}
			is_pacifist = no
			is_xenophobic_isolationists = no
			is_open_gestalt = no
		}
		ai_chance = {
			factor = 0.5
		}
		if = {
			limit = {
				event_target:invited_guest = {
					OR = {
						is_pacifist = yes
						is_civic_diplomatic_corps = yes
						is_xenophobic_isolationists = yes
						is_open_gestalt = yes
					}
				}
			}
			custom_tooltip = federation_gala_outcome_dislikes
			hidden_effect = {
				subtract_variable = { which = federation_gala_outcome value = 2 }
			}
		}
		else_if = {
			limit = {
				event_target:invited_guest = {
					OR = {
						is_militarist = yes
						is_xenophobe = yes
						is_civic_militarist = yes
					}
					is_civic_machine_servitor = no
				}
			}
			custom_tooltip = federation_gala_outcome_appreciate
			hidden_effect = {
				change_variable = { which = federation_gala_outcome value = 2 }
			}
		}
		else = {
			custom_tooltip = federation_gala_outcome_may_boost
			hidden_effect = {
				random_list = {
					4 = { }
					3 = { change_variable = { which = federation_gala_outcome value = 1 } }
					1 = { subtract_variable = { which = federation_gala_outcome value = 1 } }
				}
			}
		}
	}
	option = {
		name = "diploevent.216.spir"
		trigger = {
			is_spiritualist = yes
		}
		ai_chance = {
			factor = 0.5
		}
		if = {
			limit = {
				event_target:invited_guest = {
					OR = {
						is_materialist = yes
						is_robot_empire = yes
						AND = {
							is_xenophobe = yes
							is_spiritualist = no
						}
					}
					is_open_gestalt = no
					is_civic_machine_servitor = no
				}
			}
			custom_tooltip = federation_gala_outcome_dislikes
			hidden_effect = {
				subtract_variable = { which = federation_gala_outcome value = 2 }
			}
		}
		else_if = {
			limit = {
				event_target:invited_guest = {
					OR = {
						is_spiritualist = yes
						is_xenophile = yes
						is_open_gestalt = yes
						is_civic_machine_servitor = yes
					}
				}
			}
			custom_tooltip = federation_gala_outcome_appreciate
			hidden_effect = {
				change_variable = { which = federation_gala_outcome value = 2 }
			}
		}
		else = {
			custom_tooltip = federation_gala_outcome_may_boost
			hidden_effect = {
				random_list = {
					4 = { }
					3 = { change_variable = { which = federation_gala_outcome value = 1 } }
					1 = { subtract_variable = { which = federation_gala_outcome value = 1 } }
				}
			}
		}
	}
	option = {
		name = "diploevent.216.pacif"
		trigger = {
			OR = {
				is_pacifist = yes
				is_civic_diplomatic_corps = yes
				is_xenophobic_isolationists = yes
				is_auth_corporate = yes
			}
			is_militarist = no
		}
		ai_chance = {
			factor = 0.5
		}
		if = {
			limit = {
				event_target:invited_guest = {
					OR = {
						is_militarist = yes
						is_civic_militarist = yes
					}
				}
			}
			custom_tooltip = federation_gala_outcome_dislikes
			hidden_effect = {
				subtract_variable = { which = federation_gala_outcome value = 2 }
			}
		}
		else_if = {
			limit = {
				event_target:invited_guest = {
					OR = {
						is_pacifist = yes
						is_xenophile = yes
						is_civic_diplomatic_corps = yes
						is_xenophobic_isolationists = yes
						is_auth_corporate = yes
						is_open_gestalt = yes
						is_civic_machine_servitor = yes
					}
				}
			}
			custom_tooltip = federation_gala_outcome_appreciate
			hidden_effect = {
				change_variable = { which = federation_gala_outcome value = 2 }
			}
		}
		else = {
			custom_tooltip = federation_gala_outcome_may_boost
			hidden_effect = {
				random_list = {
					4 = { }
					3 = { change_variable = { which = federation_gala_outcome value = 1 } }
					1 = { subtract_variable = { which = federation_gala_outcome value = 1 } }
				}
			}
		}
	}
	option = {
		name = "diploevent.216.mat"
		trigger = {
			OR = {
				is_materialist = yes
				is_robot_empire = yes
			}
		}
		ai_chance = {
			factor = 0.5
		}
		if = {
			limit = {
				event_target:invited_guest = {
					is_spiritualist = yes
				}
			}
			custom_tooltip = federation_gala_outcome_dislikes
			hidden_effect = {
				subtract_variable = { which = federation_gala_outcome value = 2 }
			}
		}
		else_if = {
			limit = {
				event_target:invited_guest = {
					OR = {
						is_materialist = yes
						is_robot_empire = yes
						is_xenophile = yes
						is_open_gestalt = yes
						is_civic_machine_servitor = yes
					}
				}
			}
			custom_tooltip = federation_gala_outcome_appreciate
			hidden_effect = {
				change_variable = { which = federation_gala_outcome value = 2 }
			}
		}
		else = {
			custom_tooltip = federation_gala_outcome_may_boost
			hidden_effect = {
				random_list = {
					4 = { }
					3 = { change_variable = { which = federation_gala_outcome value = 1 } }
					1 = { subtract_variable = { which = federation_gala_outcome value = 1 } }
				}
			}
		}
	}
	option = {
		name = "diploevent.216.auth"
		trigger = {
			OR = {
				is_authoritarian = yes
				is_gestalt = yes
				has_authority = auth_dictatorial
				has_authority = auth_imperial
			}
		}
		ai_chance = {
			factor = 0.5
		}
		if = {
			limit = {
				event_target:invited_guest = {
					OR = {
						is_egalitarian = yes
						has_authority = auth_democratic
						has_authority = auth_cooperative
					}
					is_civic_authoritarian = no
				}
			}
			custom_tooltip = federation_gala_outcome_dislikes
			hidden_effect = {
				subtract_variable = { which = federation_gala_outcome value = 2 }
			}
		}
		else_if = {
			limit = {
				event_target:invited_guest = {
					OR = {
						is_authoritarian = yes
						is_civic_authoritarian = yes
						is_gestalt = yes
						has_authority = auth_dictatorial
						has_authority = auth_imperial
					}
				}
			}
			custom_tooltip = federation_gala_outcome_appreciate
			hidden_effect = {
				change_variable = { which = federation_gala_outcome value = 2 }
			}
		}
		else = {
			custom_tooltip = federation_gala_outcome_may_boost
			hidden_effect = {
				random_list = {
					4 = { }
					3 = { change_variable = { which = federation_gala_outcome value = 1 } }
					1 = { subtract_variable = { which = federation_gala_outcome value = 1 } }
				}
			}
		}
	}
	
	after = {
		event_target:invited_guest = { country_event = { id = diploevent.217 } }
		# summit starts in earnest, what happens depends on faction cohesion
		country_event = { id = diploevent.218 days = 10 }
	}
}
country_event = {
	id = diploevent.217
	title = diploevent.216.name
	desc = diploevent.217.desc
	
	picture = GFX_evt_galactic_senate
	show_sound = event_conversation
	
	is_triggered_only = yes
	
	option = {
		name = "diploevent.217.a"
	}
}
# First day of Summit
country_event = {
	id = diploevent.218
	title = diploevent.218.name
	desc = {
		text = diploevent.218.desc.high
		trigger = {
			federation = { federation_cohesion >= 50 }
		}
	}
	desc = {
		text = diploevent.218.desc.mid
		trigger = {
			federation = {
				federation_cohesion < 50
				federation_cohesion >= 0
			}
		}
	}
	desc = {
		text = diploevent.218.desc.low
		trigger = {
			federation = { federation_cohesion < 0 }
		}
	}
	
	picture = GFX_evt_arguing_senate
	show_sound = event_factions
	
	is_triggered_only = yes
	
	immediate = {
		if = {
			limit = { federation = { federation_cohesion >= 50 } }
			change_variable = { which = federation_gala_outcome value = 2 }
		}
		else_if = {
			limit = { federation = { federation_cohesion < 0 } }
			subtract_variable = { which = federation_gala_outcome value = 2 }
		}
	}
	
	option = {
		name = "EXCELLENT"
		trigger = {
			federation = { federation_cohesion >= 50 }
		}
	}
	option = {
		name = "diploevent.218.ambition"
		trigger = {
			federation = {
				federation_cohesion < 50
				federation_cohesion >= 0
			}
		}
		custom_tooltip = federation_gala_outcome_may_boost
		hidden_effect = {
			random_list = {
				4 = { }
				3 = { change_variable = { which = federation_gala_outcome value = 1 } }
				1 = { subtract_variable = { which = federation_gala_outcome value = 1 } }
			}
		}
	}
	option = {
		name = "diploevent.218.flounder"
		trigger = {
			federation = { federation_cohesion <= 0 }
		}
		custom_tooltip = federation_gala_outcome_may_boost
		hidden_effect = {
			random_list = {
				4 = { }
				3 = { change_variable = { which = federation_gala_outcome value = 1 } }
				1 = { subtract_variable = { which = federation_gala_outcome value = 1 } }
			}
		}
	}
	option = {
		name = "diploevent.218.diplo"
		trigger = {
			federation = { federation_cohesion < 50 }
			is_civic_diplomatic_corps = yes
		}
		custom_tooltip = federation_gala_outcome_boost
		hidden_effect = {
			random_list = {
				1 = { change_variable = { which = federation_gala_outcome value = 1 } }
				1 = { change_variable = { which = federation_gala_outcome value = 2 } }
			}
		}
	}
	option = {
		name = "diploevent.218.connected"
		trigger = {
			federation = { federation_cohesion < 50 }
			any_owned_leader = {
				leader_class = ruler
				OR = {
					has_ruler_trait = trait_ruler_deep_connections
					has_ruler_trait = trait_ruler_deep_connections_gestalt
				}
			}
		}
		custom_tooltip = federation_gala_outcome_boost
		hidden_effect = {
			change_variable = { which = federation_gala_outcome value = 1 }
		}
	}
	option = {
		name = "diploevent.218.charm"
		trigger = {
			federation = { federation_cohesion < 50 }
			any_owned_leader = {
				leader_class = ruler
				OR = {
					has_ruler_trait = trait_ruler_charismatic
					has_ruler_trait = trait_ruler_subsumed_will
					species = {
						OR = {
							has_trait = trait_charismatic
							has_trait = trait_pheremones
							has_trait = trait_lithoid_shiny
							has_trait = trait_robot_emotion_emulators
						}
					}
				}
			}
		}
		custom_tooltip = federation_gala_outcome_boost
		hidden_effect = {
			change_variable = { which = federation_gala_outcome value = 1 }
		}
	}
	option = {
		name = "diploevent.218.war"
		trigger = {
			federation = { federation_cohesion <= 0 }
			OR = {
				is_civic_militarist = yes
				any_owned_leader = {
					leader_class = ruler
					OR = {
						has_ruler_trait = trait_ruler_warlike
						has_ruler_trait = trait_ruler_recruiter
						has_ruler_trait = trait_ruler_from_the_ranks
						has_ruler_trait = trait_ruler_from_the_ranks_gestalt
					}
				}
			}
		}
		custom_tooltip = federation_gala_outcome_boost
		hidden_effect = {
			change_variable = { which = federation_gala_outcome value = 1 }
		}
	}
	option = {
		name = "diploevent.218.speech"
		trigger = {
			federation = { federation_cohesion < 50 }
			any_owned_leader = {
				leader_class = ruler
				OR = {
					has_ruler_trait = trait_ruler_champion_of_the_people
					has_ruler_trait = leader_trait_reformer
					has_ruler_trait = trait_ruler_one_mind
					has_ruler_trait = leader_trait_reformer_gestalt
				}
			}
		}
		custom_tooltip = federation_gala_outcome_boost
		hidden_effect = {
			change_variable = { which = federation_gala_outcome value = 1 }
		}
	}
	after = {
		event_target:invited_guest = { country_event = { id = diploevent.219 } }
	}
}
country_event = {
	id = diploevent.219
	title = diploevent.218.name
	desc = {
		text = diploevent.219.desc
		trigger = {
			federation = { federation_cohesion >= 0 }
		}
	}
	desc = {
		text = diploevent.219.desc.low
		trigger = {
			federation = { federation_cohesion < 0 }
		}
	}
	
	picture = GFX_evt_arguing_senate
	show_sound = event_factions
	
	is_triggered_only = yes
	
	option = {
		name = "OK"
	}
	
	after = {
		# Backroom Deals
		country_event = { id = diploevent.220 days = 5 }
	}
}
# Backroom Deals
country_event = {
	id = diploevent.220
	title = diploevent.220.name
	desc = {
		text = diploevent.220.desc.good
		trigger = {
			FROMFROM = { check_variable = { which = federation_gala_outcome value >= 55 } }
		}
	}
	desc = {
		text = diploevent.220.desc.mid
		trigger = {
			FROMFROM = {
				check_variable = { which = federation_gala_outcome value < 55 }
				check_variable = { which = federation_gala_outcome value >= 46 }
			}
		}
	}
	desc = {
		text = diploevent.220.desc.bad
		trigger = {
			FROMFROM = { check_variable = { which = federation_gala_outcome value < 46 } }
			OR = {
				NOT = { exists = event_target:hated_federation_member }
				FROMFROM = { has_country_flag = hated_federation_member_not_trouble }
			}
		}
	}
	desc = {
		text = diploevent.220.desc.bad_hostile
		trigger = {
			FROMFROM = { check_variable = { which = federation_gala_outcome value < 46 } }
			exists = event_target:hated_federation_member
			FROMFROM = { NOT = { has_country_flag = hated_federation_member_not_trouble } }
		}
	}
	
	immediate = {
		if = {
			limit = {
				FROMFROM = { NOT = { has_country_flag = hated_federation_member_not_trouble } }
				exists = event_target:hated_federation_member
			}
			FROMFROM = { subtract_variable = { which = federation_gala_outcome value = 1 } }
		}
	}
	
	picture = GFX_evt_smugglers_in_bar
	show_sound = event_conversation
	
	is_triggered_only = yes
	
	option = {
		name = "diploevent.220.a"
		custom_tooltip = federation_gala_outcome_may_boost
		hidden_effect = {
			FROMFROM  = {
				random_list = {
					4 = { }
					3 = { change_variable = { which = federation_gala_outcome value = 1 } }
					1 = { subtract_variable = { which = federation_gala_outcome value = 1 } }
				}
			}
		}
	}
	option = {
		name = "diploevent.220.bribe"
		allow = {
			resource_stockpile_compare = { resource = energy value >= 1000 }
		}
		add_resource = { energy = -1000 }
		custom_tooltip = federation_gala_outcome_boost
		hidden_effect = {
			FROMFROM = { change_variable = { which = federation_gala_outcome value = 1 } }
		}
	}
	option = {
		name = "diploevent.218.diplo"
		trigger = {
			is_civic_diplomatic_corps = yes
		}
		custom_tooltip = federation_gala_outcome_boost
		hidden_effect = {
			FROMFROM = {
				random_list = {
					1 = { change_variable = { which = federation_gala_outcome value = 1 } }
					1 = { change_variable = { which = federation_gala_outcome value = 2 } }
				}
			}
		}
	}
	option = {
		name = "diploevent.218.connected"
		trigger = {
			any_owned_leader = {
				leader_class = ruler
				OR = {
					has_ruler_trait = trait_ruler_deep_connections
					has_ruler_trait = trait_ruler_deep_connections_gestalt
				}
			}
		}
		custom_tooltip = federation_gala_outcome_boost
		hidden_effect = {
			FROMFROM = { change_variable = { which = federation_gala_outcome value = 1 } }
		}
	}
	option = {
		name = "diploevent.218.charm"
		trigger = {
			any_owned_leader = {
				leader_class = ruler
				OR = {
					has_ruler_trait = trait_ruler_charismatic
					has_ruler_trait = trait_ruler_subsumed_will
					species = {
						OR = {
							has_trait = trait_charismatic
							has_trait = trait_pheremones
							has_trait = trait_lithoid_shiny
							has_trait = trait_robot_emotion_emulators
						}
					}
				}
			}
		}
		custom_tooltip = federation_gala_outcome_boost
		hidden_effect = {
			FROMFROM = { change_variable = { which = federation_gala_outcome value = 1 } }
		}
	}
	option = {
		name = "diploevent.220.trade"
		trigger = {
			OR = {
				is_auth_corporate = yes
				any_owned_leader = {
					leader_class = ruler
					OR = {
						has_ruler_trait = trait_ruler_investor
						has_ruler_trait = trait_ruler_industrialist
					}
				}
			}
			FROMFROM = {
				federation = {
					any_member = { is_gestalt = no }
				}
			}
		}
		custom_tooltip = federation_gala_outcome_boost
		hidden_effect = {
			FROMFROM = { change_variable = { which = federation_gala_outcome value = 1 } }
		}
	}
	option = {
		name = "diploevent.220.war"
		trigger = {
			OR = {
				is_civic_militarist = yes
				any_owned_leader = {
					leader_class = ruler
					OR = {
						has_ruler_trait = trait_ruler_warlike
						has_ruler_trait = trait_ruler_recruiter
						has_ruler_trait = trait_ruler_from_the_ranks
						has_ruler_trait = trait_ruler_from_the_ranks_gestalt
					}
				}
			}
		}
		custom_tooltip = federation_gala_outcome_boost
		hidden_effect = {
			FROMFROM = { change_variable = { which = federation_gala_outcome value = 1 } }
		}
	}
	option = {
		name = "diploevent.215.talent"
		trigger = {
			any_owned_leader = {
				leader_class = ruler
				OR = {
					has_ruler_trait = trait_ruler_eye_for_talent
					has_ruler_trait = trait_ruler_pooled_knowledge
				}
			}
		}
		custom_tooltip = federation_gala_outcome_boost
		hidden_effect = {
			FROMFROM = { change_variable = { which = federation_gala_outcome value = 1 } }
		}
	}
	
	after = {
		FROMFROM = {
			country_event = { id = diploevent.221 days = 5 }
		}
	}
}
# Diplomatic Incident
country_event = {
	id = diploevent.221
	title = diploevent.221.name
	desc = {
		text = diploevent.221.desc.a
		trigger = {
			has_country_flag = drunk_dignitary
			event_target:other_federation_member = {
				is_robot_empire = no
				is_hive_empire = no
			}
		}
	}
	desc = {
		text = diploevent.221.desc.a.hive
		trigger = {
			has_country_flag = drunk_dignitary
			event_target:other_federation_member = { is_hive_empire = yes }
		}
	}
	desc = {
		text = diploevent.221.desc.a.robot
		trigger = {
			has_country_flag = drunk_dignitary
			event_target:other_federation_member = { is_robot_empire = yes }
		}
	}
	desc = {
		text = diploevent.221.desc.b
		trigger = {
			has_country_flag = guest_insulted
		}
	}
	desc = {
		text = diploevent.221.desc.c
		trigger = {
			has_country_flag = hated_member_makes_trouble
		}
	}
	desc = {
		text = diploevent.221.desc.d
		trigger = {
			has_country_flag = fleet_composition_argument
		}
	}
	desc = {
		text = diploevent.221.desc.e
		trigger = {
			has_country_flag = major_protest
		}
	}
	desc = {
		text = diploevent.221.desc.f
		trigger = {
			has_country_flag = major_protest_two
		}
	}
	desc = {
		text = diploevent.221.desc.g.hive
		trigger = {
			has_country_flag = patrol_drone_mistake
			is_hive_empire = yes
		}
	}
	desc = {
		text = diploevent.221.desc.g.mach
		trigger = {
			has_country_flag = patrol_drone_mistake
			is_machine_empire = yes
		}
	}
	desc = {
		text = diploevent.221.desc.h
		trigger = {
			has_country_flag = caught_with_criminals
		}
	}
	desc = {
		text = diploevent.221.desc.i
		trigger = {
			has_country_flag = delegates_brawl
		}
	}
	picture = GFX_evt_assembly_fight
	show_sound = event_assembly_fight
	
	immediate = {
		subtract_variable = { which = federation_gala_outcome value = 1 }
		federation = {
			random_member = {
				limit = { NOT = { is_same_value = ROOT } }
				save_event_target_as = other_federation_member
			}
			random_member = {
				limit = {
					NOT = { is_same_value = ROOT }
					OR = {
						is_xenophobe = yes
						is_xenophobic_isolationists = yes
						is_same_value = event_target:hated_federation_member
					}
				}
				save_event_target_as = rude_federation_member
			}
			random_member = {
				limit = {
					NOT = { is_same_value = ROOT }
					OR = {
						is_militarist = yes
						is_xenophobe = yes
						is_civic_militarist = yes
						is_same_value = event_target:hated_federation_member
					}
				}
				save_event_target_as = angry_federation_member
			}
		}
		random_list = {
			1 = { set_country_flag = drunk_dignitary }
			3 = {
				modifier = {
					factor = 0
					NOT = { exists = event_target:rude_federation_member }
				}
				set_country_flag = guest_insulted
			}
			3 = {
				modifier = {
					factor = 0
					OR = {
						NOT = { exists = event_target:hated_federation_member }
						has_country_flag = hated_federation_member_not_trouble
					}
				}
				set_country_flag = hated_member_makes_trouble
			}
			3 = {
				modifier = {
					factor = 0
					federation = { has_federation_law = fleet_contribution_none }
				}
				set_country_flag = fleet_composition_argument
			}
			2 = {
				modifier = {
					factor = 0
					NOR = {
						federation = { federation_cohesion < -26 }
						capital_scope = { planet_stability < 34 }
						is_xenophobe = yes
					}
				}
				modifier = {
					factor = 0
					is_gestalt = yes
				}
				set_country_flag = major_protest
			}
			2 = {
				modifier = {
					factor = 0
					NOR = {
						event_target:invited_guest = { opinion_level = { who = ROOT level <= neutral } }
						event_target:invited_guest = { prev_has_antagonistic_ethics = yes }
						is_xenophobe = yes
					}
				}
				modifier = {
					factor = 0
					is_gestalt = yes
				}
				set_country_flag = major_protest_two
			}
			2 = {
				modifier = {
					factor = 0
					is_gestalt = no
				}
				set_country_flag = patrol_drone_mistake
			}
			1 = {
				modifier = {
					factor = 0
					OR = {
						is_gestalt = yes
						event_target:invited_guest = { is_gestalt = yes }
					}
				}
				set_country_flag = caught_with_criminals
			}
			1 = {
				modifier = {
					factor = 0
					OR = {
						NOT = { exists = event_target:angry_federation_member }
						event_target:invited_guest = {
							OR = {
								is_pacifist = yes
								is_xenophobic_isolationists = yes
							}
						}
						check_variable = { which = federation_gala_outcome value >= 48 }
					}
				}
				set_country_flag = delegates_brawl
			}
		}
		
		# Misc. Diplomatic Incident, including:
		#	Argument with opposite ethic
		#	Member caught extorting bribes
	}
	
	is_triggered_only = yes
	
	option = {
		name = "diploevent.221.drunk.a"
		trigger = {
			has_country_flag = drunk_dignitary
			event_target:other_federation_member = { is_hive_empire = no }
		}
		custom_tooltip = federation_gala_outcome_may_boost
		hidden_effect = {
			random_list = {
				4 = { change_variable = { which = federation_gala_outcome value = 1 } }
				2 = { change_variable = { which = federation_gala_outcome value = 2 } }
				4 = { }
			}
		}
		event_target:other_federation_member = {
			add_opinion_modifier = {
				who = ROOT
				modifier = opinion_ejected_envoy
			}
		}
	}
	option = {
		name = "diploevent.221.drunk.b"
		trigger = {
			has_country_flag = drunk_dignitary
			event_target:other_federation_member = { is_hive_empire = no }
		}
		custom_tooltip = federation_gala_outcome_harm
	}
	option = {
		name = "UNFORTUNATE"
		trigger = {
			has_country_flag = drunk_dignitary
			event_target:other_federation_member = { is_hive_empire = yes }
		}
		custom_tooltip = federation_gala_outcome_harm
	}
	
	option = {
		name = "diploevent.221.insult.a"
		trigger = {
			OR = {
				has_country_flag = guest_insulted
				has_country_flag = hated_member_makes_trouble
			}
		}
		event_target:invited_guest = {
			add_opinion_modifier = {
				who = ROOT
				modifier = opinion_sided_with_us
			}
		}
		if = {
			limit = { has_country_flag = guest_insulted }
			event_target:rude_federation_member = {
				add_opinion_modifier = {
					who = ROOT
					modifier = opinion_sided_against_us
				}
			}
		}
		else_if = {
			limit = { has_country_flag = hated_member_makes_trouble }
			event_target:hated_federation_member = {
				add_opinion_modifier = {
					who = ROOT
					modifier = opinion_sided_against_us
				}
			}
		}
		custom_tooltip = federation_gala_outcome_boost
		hidden_effect = { change_variable = { which = federation_gala_outcome value = 2 } }
	}
	option = {
		name = "diploevent.221.insult.b"
		trigger = { has_country_flag = guest_insulted }
		add_resource = { influence = 100 }
		event_target:invited_guest = {
			add_opinion_modifier = {
				who = ROOT
				modifier = opinion_sided_against_us
			}
		}
		event_target:rude_federation_member = {
			add_opinion_modifier = {
				who = ROOT
				modifier = opinion_sided_with_us
			}
		}
		custom_tooltip = federation_gala_outcome_harm
		hidden_effect = { subtract_variable = { which = federation_gala_outcome value = 1 } }
	}
	option = {
		name = "diploevent.221.insult.b_hated"
		trigger = { has_country_flag = hated_member_makes_trouble }
		add_resource = { influence = 100 }
		event_target:invited_guest = {
			add_opinion_modifier = {
				who = ROOT
				modifier = opinion_sided_against_us
			}
		}
		event_target:hated_federation_member = {
			add_opinion_modifier = {
				who = ROOT
				modifier = opinion_sided_with_us
			}
		}
		custom_tooltip = federation_gala_outcome_harm
		hidden_effect = { subtract_variable = { which = federation_gala_outcome value = 1 } }
	}
	option = {
		name = "diploevent.221.insult.c"
		trigger = {
			OR = {
				has_country_flag = guest_insulted
				has_country_flag = hated_member_makes_trouble
			}
			OR = {
				is_militarist = yes
				is_civic_militarist = yes
			}
		}
		if = {
			limit = {
				event_target:invited_guest = {
					OR = {
						is_militarist = yes
						is_civic_militarist = yes
					}
				}
			}
			custom_tooltip = federation_gala_outcome_harm
			hidden_effect = {
				subtract_variable = { which = federation_gala_outcome value = 1 }
			}
		}
		else_if = {
			limit = {
				event_target:invited_guest = {
					OR = {
						is_pacifist = yes
						is_xenophile = yes
						is_civic_diplomatic_corps = yes
						is_xenophobic_isolationists = yes
						is_auth_corporate = yes
						is_open_gestalt = yes
						is_civic_machine_servitor = yes
					}
				}
			}
			custom_tooltip = federation_gala_outcome_boost
			hidden_effect = {
				change_variable = { which = federation_gala_outcome value = 2 }
			}
		}
		else = {
			custom_tooltip = federation_gala_outcome_may_boost
			hidden_effect = {
				random_list = {
					4 = { change_variable = { which = federation_gala_outcome value = 1 } }
					2 = { change_variable = { which = federation_gala_outcome value = 2 } }
					4 = { }
				}
			}
		}
	}
	option = {
		name = "diploevent.221.insult.d"
		trigger = {
			OR = {
				has_country_flag = guest_insulted
				has_country_flag = hated_member_makes_trouble
			}
			OR = {
				is_xenophile = yes
				is_pacifist = yes
				is_civic_diplomatic_corps = yes
				is_civic_machine_servitor = yes
			}
		}
		if = {
			limit = {
				event_target:invited_guest = {
					OR = {
						is_militarist = yes
						is_civic_militarist = yes
					}
				}
			}
			custom_tooltip = federation_gala_outcome_harm
			hidden_effect = {
				subtract_variable = { which = federation_gala_outcome value = 1 }
			}
		}
		else_if = {
			limit = {
				event_target:invited_guest = {
					OR = {
						is_pacifist = yes
						is_xenophile = yes
						is_civic_diplomatic_corps = yes
						is_xenophobic_isolationists = yes
						is_open_gestalt = yes
						is_civic_machine_servitor = yes
					}
				}
			}
			custom_tooltip = federation_gala_outcome_boost
			hidden_effect = {
				change_variable = { which = federation_gala_outcome value = 2 }
			}
		}
		else = {
			custom_tooltip = federation_gala_outcome_may_boost
			hidden_effect = {
				random_list = {
					4 = { change_variable = { which = federation_gala_outcome value = 1 } }
					2 = { change_variable = { which = federation_gala_outcome value = 2 } }
					4 = { }
				}
			}
		}
	}
	option = {
		name = "diploevent.221.insult.e"
		trigger = {
			OR = {
				has_country_flag = guest_insulted
				has_country_flag = hated_member_makes_trouble
			}
			any_owned_leader = {
				leader_class = ruler
				OR = {
					has_ruler_trait = trait_ruler_charismatic
					has_ruler_trait = trait_ruler_champion_of_the_people
					has_ruler_trait = trait_ruler_subsumed_will
					has_ruler_trait = trait_ruler_one_mind
					species = {
						OR = {
							has_trait = trait_charismatic
							has_trait = trait_pheremones
							has_trait = trait_lithoid_shiny
							has_trait = trait_robot_emotion_emulators
						}
					}
				}
			}
		}
		custom_tooltip = federation_gala_outcome_boost
		hidden_effect = {
			change_variable = { which = federation_gala_outcome value = 2 }
		}
	}
	option = {
		name = "diploevent.221.insult.f"
		trigger = {
			OR = {
				has_country_flag = guest_insulted
				has_country_flag = hated_member_makes_trouble
			}
			OR = {
				is_civic_militarist = yes
				any_owned_leader = {
					leader_class = ruler
					OR = {
						has_ruler_trait = trait_ruler_warlike
						has_ruler_trait = trait_ruler_recruiter
						has_ruler_trait = trait_ruler_from_the_ranks
						has_ruler_trait = trait_ruler_from_the_ranks_gestalt
					}
				}
			}
		}
		hidden_effect = {
			change_variable = { which = federation_gala_outcome value = 1 }
		}
	}
	option = {
		name = "diploevent.221.insult.g"
		trigger = {
			OR = {
				has_country_flag = guest_insulted
				has_country_flag = hated_member_makes_trouble
			}
			OR = {
				is_xenophobe = yes
				is_xenophobic_isolationists = yes
			}
		}
		add_resource = { influence = 200 }
		custom_tooltip = federation_gala_outcome_harm
		hidden_effect = {
			subtract_variable = { which = federation_gala_outcome value = 1 }
		}
	}
	
	option = {
		name = "diploevent.221.fleet.a"
		trigger = { has_country_flag = fleet_composition_argument }
		custom_tooltip = diploevent.216.a.tooltip
		hidden_effect = {
			change_variable = { which = federation_gala_outcome value = 1 }
		}
	}
	option = {
		name = "diploevent.221.fleet.b"
		trigger = {
			has_country_flag = fleet_composition_argument
			any_owned_leader = {
				leader_class = ruler
				OR = {
					has_ruler_trait = trait_ruler_corvette_focus
					has_ruler_trait = trait_ruler_destroyer_focus
					has_ruler_trait = trait_ruler_cruiser_focus
					has_ruler_trait = trait_ruler_battleship_focus
				}
			}
		}
		if = {
			limit = {
				OR = {
					AND = {
						any_owned_leader = {
							leader_class = ruler
							has_ruler_trait = trait_ruler_corvette_focus
						}
						event_target:invited_guest = {
							any_owned_leader = {
								leader_class = ruler
								OR = {
									has_ruler_trait = trait_ruler_cruiser_focus
									has_ruler_trait = trait_ruler_battleship_focus
								}
							}
						}
					}
					AND = {
						any_owned_leader = {
							leader_class = ruler
							has_ruler_trait = trait_ruler_destroyer_focus
						}
						event_target:invited_guest = {
							any_owned_leader = {
								leader_class = ruler
								has_ruler_trait = trait_ruler_battleship_focus
							}
						}
					}
					AND = {
						any_owned_leader = {
							leader_class = ruler
							has_ruler_trait = trait_ruler_cruiser_focus
						}
						event_target:invited_guest = {
							any_owned_leader = {
								leader_class = ruler
								has_ruler_trait = trait_ruler_corvette_focus
							}
						}
					}
					AND = {
						any_owned_leader = {
							leader_class = ruler
							has_ruler_trait = trait_ruler_battleship_focus
						}
						event_target:invited_guest = {
							any_owned_leader = {
								leader_class = ruler
								OR = {
									has_ruler_trait = trait_ruler_corvette_focus
									has_ruler_trait = trait_ruler_destroyer_focus
								}
							}
						}
					}
				}
			}
			custom_tooltip = federation_gala_outcome_harm
		}
		else_if = {
			limit = {
				OR = {
					event_target:invited_guest = { is_militarist = yes }
					event_target:invited_guest = { is_civic_militarist = yes }
					AND = {
						any_owned_leader = {
							leader_class = ruler
							has_ruler_trait = trait_ruler_corvette_focus
						}
						event_target:invited_guest = {
							any_owned_leader = {
								leader_class = ruler
								has_ruler_trait = trait_ruler_corvette_focus
							}
						}
					}
					AND = {
						any_owned_leader = {
							leader_class = ruler
							has_ruler_trait = trait_ruler_destroyer_focus
						}
						event_target:invited_guest = {
							any_owned_leader = {
								leader_class = ruler
								has_ruler_trait = trait_ruler_destroyer_focus
							}
						}
					}
					AND = {
						any_owned_leader = {
							leader_class = ruler
							has_ruler_trait = trait_ruler_cruiser_focus
						}
						event_target:invited_guest = {
							any_owned_leader = {
								leader_class = ruler
								has_ruler_trait = trait_ruler_cruiser_focus
							}
						}
					}
					AND = {
						any_owned_leader = {
							leader_class = ruler
							has_ruler_trait = trait_ruler_battleship_focus
						}
						event_target:invited_guest = {
							any_owned_leader = {
								leader_class = ruler
								has_ruler_trait = trait_ruler_battleship_focus
							}
						}
					}
				}
			}
			custom_tooltip = federation_gala_outcome_boost
			hidden_effect = {
				change_variable = { which = federation_gala_outcome value = 2 }
			}
		}
		else = {
			custom_tooltip = federation_gala_outcome_may_boost
			hidden_effect = {
				random_list = {
					4 = { change_variable = { which = federation_gala_outcome value = 1 } }
					2 = { change_variable = { which = federation_gala_outcome value = 2 } }
					4 = { }
				}
			}
		}
	}
	option = {
		name = "diploevent.221.fleet.c"
		trigger = {
			has_country_flag = fleet_composition_argument
			OR = {
				is_pacifist = yes
				is_egalitarian = yes
				is_auth_corporate = yes
				is_xenophobic_isolationists = yes
			}
		}
		if = {
			limit = {
				event_target:invited_guest = {
					OR = {
						is_militarist = yes
						is_civic_militarist = yes
					}
				}
			}
			custom_tooltip = federation_gala_outcome_harm
		}
		else_if = {
			limit = {
				event_target:invited_guest = {
					OR = {
						is_pacifist = yes
						is_xenophile = yes
						is_egalitarian = yes
						is_auth_corporate = yes
						is_xenophobic_isolationists = yes
					}
				}
			}
			custom_tooltip = federation_gala_outcome_boost
			hidden_effect = {
				change_variable = { which = federation_gala_outcome value = 2 }
			}
		}
		else = {
			custom_tooltip = federation_gala_outcome_may_boost
			hidden_effect = {
				random_list = {
					4 = { change_variable = { which = federation_gala_outcome value = 1 } }
					2 = { change_variable = { which = federation_gala_outcome value = 2 } }
					4 = { }
				}
			}
		}
	}
	option = {
		name = "diploevent.221.fleet.d"
		trigger = {
			has_country_flag = fleet_composition_argument
			OR = {
				is_materialist = yes
				is_robot_empire = yes
				any_owned_leader = {
					leader_class = ruler
					OR = {
						has_ruler_trait = trait_ruler_logistic_understanding
						has_ruler_trait = trait_ruler_military_pioneer
						has_ruler_trait = trait_ruler_explorer
						has_ruler_trait = leader_trait_fleet_organizer_gestalt
					}
				}
			}
		}
		if = {
			limit = {
				event_target:invited_guest = {
					OR = {
						is_spiritualist = yes
						any_owned_leader = {
							leader_class = ruler
							OR = {
								has_ruler_trait = trait_ruler_corvette_focus
								has_ruler_trait = trait_ruler_destroyer_focus
								has_ruler_trait = trait_ruler_cruiser_focus
								has_ruler_trait = trait_ruler_battleship_focus
							}
						}
					}
				}
			}
			custom_tooltip = federation_gala_outcome_harm
		}
		else_if = {
			limit = {
				event_target:invited_guest = {
					OR = {
						is_materialist = yes
						is_robot_empire = yes
						any_owned_leader = {
							leader_class = ruler
							OR = {
								has_ruler_trait = trait_ruler_logistic_understanding
								has_ruler_trait = trait_ruler_military_pioneer
								has_ruler_trait = trait_ruler_explorer
								has_ruler_trait = leader_trait_fleet_organizer_gestalt
							}
						}
					}
				}
			}
			custom_tooltip = federation_gala_outcome_boost
			hidden_effect = {
				change_variable = { which = federation_gala_outcome value = 2 }
			}
		}
		else = {
			custom_tooltip = federation_gala_outcome_may_boost
			hidden_effect = {
				random_list = {
					4 = { change_variable = { which = federation_gala_outcome value = 1 } }
					2 = { change_variable = { which = federation_gala_outcome value = 2 } }
					4 = { }
				}
			}
		}
	}
	option = {
		name = "diploevent.221.fleet.e"
		trigger = {
			has_country_flag = fleet_composition_argument
		}
		custom_tooltip = federation_gala_outcome_may_boost
		hidden_effect = {
			random_list = {
				4 = { change_variable = { which = federation_gala_outcome value = 1 } }
				2 = { change_variable = { which = federation_gala_outcome value = 2 } }
				4 = { }
			}
		}
	}
	
	option = {
		name = "diploevent.221.protest.a"
		trigger = {
			OR = {
				has_country_flag = major_protest
				has_country_flag = major_protest_two
			}
		}
		capital_scope = {
			add_modifier = { modifier = diplo_mod_protests days = 3600 }
		}
		custom_tooltip = federation_gala_outcome_may_boost
		hidden_effect = {
			random_list = {
				4 = { change_variable = { which = federation_gala_outcome value = 1 } }
				2 = { change_variable = { which = federation_gala_outcome value = 2 } }
				4 = { }
			}
		}
	}
	option = {
		name = "diploevent.221.protest.b"
		trigger = {
			OR = {
				has_country_flag = major_protest
				has_country_flag = major_protest_two
			}
			NOR = {
				is_authoritarian = yes
				has_authority = auth_dictatorial
				has_authority = auth_imperial
			}
		}
		capital_scope = {
			add_modifier = { modifier = diplo_mod_protests days = 1800 }
		}
		if = {
			limit = {
				event_target:invited_guest = {
					OR = {
						is_authoritarian = yes
						is_civic_authoritarian = yes
						is_civic_has_elite = yes
						has_authority = auth_dictatorial
						has_authority = auth_imperial
					}
				}
			}
			custom_tooltip = federation_gala_outcome_harm
		}
		else_if = {
			limit = {
				event_target:invited_guest = {
					OR = {
						is_egalitarian = yes
						is_xenophile = yes
						is_pacifist = yes
						is_open_gestalt = yes
						is_civic_has_meritocracy = yes
						has_authority = auth_democratic
						has_authority = auth_cooperative
					}
				}
			}
			custom_tooltip = federation_gala_outcome_boost
			hidden_effect = {
				change_variable = { which = federation_gala_outcome value = 2 }
			}
		}
		else = {
			custom_tooltip = federation_gala_outcome_may_boost
			hidden_effect = {
				random_list = {
					4 = { change_variable = { which = federation_gala_outcome value = 1 } }
					2 = { change_variable = { which = federation_gala_outcome value = 2 } }
					4 = { }
				}
			}
		}
	}
	option = {
		name = "diploevent.221.protest.c"
		trigger = {
			OR = {
				has_country_flag = major_protest
				has_country_flag = major_protest_two
			}
			NOR = {
				is_egalitarian = yes
				is_pacifist = yes
				is_open_gestalt = yes
				has_authority = auth_democratic
				has_authority = auth_cooperative
			}
		}
		capital_scope = {
			add_modifier = { modifier = diplo_mod_crushed_protests days = 3600 }
		}
		if = {
			limit = {
				event_target:invited_guest = {
					OR = {
						is_egalitarian = yes
						is_xenophile = yes
						is_pacifist = yes
						is_open_gestalt = yes
						is_civic_has_meritocracy = yes
						has_authority = auth_democratic
						has_authority = auth_cooperative
					}
				}
			}
			custom_tooltip = federation_gala_outcome_harm
		}
		else_if = {
			limit = {
				event_target:invited_guest = {
					OR = {
						is_authoritarian = yes
						is_civic_authoritarian = yes
						is_civic_has_elite = yes
						has_authority = auth_dictatorial
						has_authority = auth_imperial
					}
				}
			}
			custom_tooltip = federation_gala_outcome_boost
			hidden_effect = {
				change_variable = { which = federation_gala_outcome value = 2 }
			}
		}
		else = {
			custom_tooltip = federation_gala_outcome_may_boost
			hidden_effect = {
				random_list = {
					4 = { change_variable = { which = federation_gala_outcome value = 1 } }
					2 = { change_variable = { which = federation_gala_outcome value = 2 } }
					4 = { }
				}
			}
		}
	}
	
	option = {
		name = "UNFORTUNATE"
		trigger = { has_country_flag = patrol_drone_mistake }
		custom_tooltip = federation_gala_outcome_harm
	}
	option = {
		name = "diploevent.221.crime.a"
		trigger = { has_country_flag = caught_with_criminals }
		custom_tooltip = federation_gala_outcome_harm
		add_favors = {
			target = event_target:invited_guest
			value = 2
		}
	}
	option = {
		name = "diploevent.221.brawl.a"
		trigger = { has_country_flag = delegates_brawl }
		custom_tooltip = federation_gala_outcome_harm
		hidden_effect = {
			subtract_variable = { which = federation_gala_outcome value = 1 } 
			event_target:angry_federation_member = {
				add_opinion_modifier = {
					who = event_target:invited_guest
					modifier = opinion_rude_envoys
				}
			}
			event_target:invited_guest = {
				add_opinion_modifier = {
					who = event_target:angry_federation_member
					modifier = opinion_rude_envoys
				}
			}
		}
	}
	
	after = {
		hidden_effect = {
			# last day
			country_event = { id = diploevent.222 days = 10 }
			remove_country_flag = drunk_dignitary
			remove_country_flag = guest_insulted
			remove_country_flag = hated_member_makes_trouble
			remove_country_flag = fleet_composition_argument
			remove_country_flag = major_protest
			remove_country_flag = major_protest_two
			remove_country_flag = patrol_drone_mistake
			remove_country_flag = caught_with_criminals
			remove_country_flag = delegates_brawl
		}
	}
}
# Celebrate last day of the summit (last chance to improve your score)
country_event = {
	id = diploevent.222
	title = diploevent.222.name
	desc = {
		text = diploevent.222.desc
		trigger = {
			check_variable = { which = federation_gala_outcome value >= 50 }
		}
	}
	desc = {
		text = diploevent.222.desc.low
		trigger = {
			check_variable = { which = federation_gala_outcome value < 50 }
		}
	}
	
	picture = GFX_evt_arguing_senate
	show_sound = event_conversation
	
	is_triggered_only = yes
	
	option = {
		name = "diploevent.222.a"
		custom_tooltip = diploevent.222.a.tooltip
		hidden_effect = {
			random_list = {
				1 = { change_variable = { which = federation_gala_outcome value = 3 } }
				2 = { change_variable = { which = federation_gala_outcome value = 2 } }
				3 = { change_variable = { which = federation_gala_outcome value = 1 } }
				4 = { }
				2 = { subtract_variable = { which = federation_gala_outcome value = 1 } }
				1 = { subtract_variable = { which = federation_gala_outcome value = 2 } }
			}
		}
	}
	option = {
		name = "diploevent.222.gala"
		trigger = { is_civic_shared_burden = no }
		allow = {
			resource_stockpile_compare = { resource = energy value >= 1000 }
		}
		add_resource = { energy = -1000 }
		if = {
			limit = { event_target:invited_guest = { is_civic_shared_burden = yes } }
			custom_tooltip = federation_gala_outcome_dislikes
			hidden_effect = {
				subtract_variable = { which = federation_gala_outcome value = 2 }
			}
		}
		else_if = {
			limit = {
				event_target:invited_guest = {
					OR = {
						is_authoritarian = yes
						is_auth_corporate = yes
						is_civic_has_elite = yes
					}
				}
			}
			custom_tooltip = federation_gala_outcome_appreciate
			hidden_effect = {
				change_variable = { which = federation_gala_outcome value = 2 }
			}
		}
		else = {
			custom_tooltip = federation_gala_outcome_may_boost
			hidden_effect = {
				random_list = {
					4 = { }
					1 = { change_variable = { which = federation_gala_outcome value = 2 } }
					3 = { change_variable = { which = federation_gala_outcome value = 1 } }
					1 = { subtract_variable = { which = federation_gala_outcome value = 1 } }
				}
			}
		}
	}
	option = {
		name = "diploevent.222.phile"
		trigger = {
			OR = {
				is_xenophile = yes
				is_pacifist = yes
				is_spiritualist = yes
				is_civic_diplomatic_corps = yes
				is_civic_shared_burden = yes
				is_civic_machine_servitor = yes
			}
			is_xenophobe = no
		}
		if = {
			limit = {
				event_target:invited_guest = {
					OR = {
						is_xenophobe = yes
						is_xenophobic_isolationists = yes
					}
					NAND = {
						is_spiritualist = yes
						ROOT = { is_spiritualist = yes }
					}
				}
			}
			custom_tooltip = federation_gala_outcome_dislikes
			hidden_effect = {
				subtract_variable = { which = federation_gala_outcome value = 2 }
			}
		}
		else_if = {
			limit = {
				event_target:invited_guest = {
					OR = {
						is_xenophile = yes
						is_pacifist = yes
						is_spiritualist = yes
						is_civic_diplomatic_corps = yes
						is_civic_shared_burden = yes
						is_civic_machine_servitor = yes
						is_open_gestalt = yes
						has_valid_civic = civic_memorialist
						has_valid_civic = civic_memorialist_corp
						has_valid_civic = civic_hive_memorialist
						has_valid_civic = civic_machine_memorialist
					}
				}
			}
			custom_tooltip = federation_gala_outcome_appreciate
			hidden_effect = {
				change_variable = { which = federation_gala_outcome value = 2 }
			}
		}
		else = {
			custom_tooltip = federation_gala_outcome_may_boost
			hidden_effect = {
				random_list = {
					4 = { }
					1 = { change_variable = { which = federation_gala_outcome value = 2 } }
					3 = { change_variable = { which = federation_gala_outcome value = 1 } }
					1 = { subtract_variable = { which = federation_gala_outcome value = 1 } }
				}
			}
		}
	}
	option = {
		name = "diploevent.222.phobe"
		trigger = {
			OR = {
				is_militarist = yes
				is_xenophobe = yes
				is_civic_militarist = yes
			}
			is_pacifist = no
			is_xenophobic_isolationists = no
			is_open_gestalt = no
		}
		if = {
			limit = {
				event_target:invited_guest = {
					OR = {
						is_pacifist = yes
						is_civic_diplomatic_corps = yes
						is_xenophobic_isolationists = yes
						is_open_gestalt = yes
					}
				}
			}
			custom_tooltip = federation_gala_outcome_dislikes
			hidden_effect = {
				subtract_variable = { which = federation_gala_outcome value = 2 }
			}
		}
		else_if = {
			limit = {
				event_target:invited_guest = {
					OR = {
						is_militarist = yes
						is_xenophobe = yes
						is_civic_militarist = yes
					}
					is_civic_machine_servitor = no
				}
			}
			custom_tooltip = federation_gala_outcome_appreciate
			hidden_effect = {
				change_variable = { which = federation_gala_outcome value = 2 }
			}
		}
		else = {
			custom_tooltip = federation_gala_outcome_may_boost
			hidden_effect = {
				random_list = {
					4 = { }
					1 = { change_variable = { which = federation_gala_outcome value = 2 } }
					3 = { change_variable = { which = federation_gala_outcome value = 1 } }
					1 = { subtract_variable = { which = federation_gala_outcome value = 1 } }
				}
			}
		}
	}
	option = {
		name = "diploevent.222.corp"
		trigger = {
			OR = {
				is_pacifist = yes
				is_auth_corporate = yes
			}
			is_militarist = no
			is_civic_shared_burden = no
		}
		if = {
			limit = {
				event_target:invited_guest = {
					OR = {
						is_militarist = yes
						is_civic_militarist = yes
						is_civic_shared_burden = yes
					}
				}
			}
			custom_tooltip = federation_gala_outcome_dislikes
			hidden_effect = {
				subtract_variable = { which = federation_gala_outcome value = 2 }
			}
		}
		else_if = {
			limit = {
				event_target:invited_guest = {
					OR = {
						is_pacifist = yes
						is_xenophile = yes
						is_civic_diplomatic_corps = yes
						is_xenophobic_isolationists = yes
						is_auth_corporate = yes
						is_open_gestalt = yes
						is_civic_machine_servitor = yes
					}
				}
			}
			custom_tooltip = federation_gala_outcome_appreciate
			hidden_effect = {
				change_variable = { which = federation_gala_outcome value = 2 }
			}
		}
		else = {
			custom_tooltip = federation_gala_outcome_may_boost
			hidden_effect = {
				random_list = {
					4 = { }
					1 = { change_variable = { which = federation_gala_outcome value = 2 } }
					3 = { change_variable = { which = federation_gala_outcome value = 1 } }
					1 = { subtract_variable = { which = federation_gala_outcome value = 1 } }
				}
			}
		}
	}
	option = {
		name = "diploevent.222.tech"
		trigger = {
			OR = {
				is_materialist = yes
				is_robot_empire = yes
			}
		}
		if = {
			limit = {
				event_target:invited_guest = {
					is_spiritualist = yes
				}
			}
			custom_tooltip = federation_gala_outcome_dislikes
			hidden_effect = {
				subtract_variable = { which = federation_gala_outcome value = 2 }
			}
		}
		else_if = {
			limit = {
				event_target:invited_guest = {
					OR = {
						is_materialist = yes
						is_robot_empire = yes
						is_xenophile = yes
						is_open_gestalt = yes
						is_civic_machine_servitor = yes
					}
				}
			}
			custom_tooltip = federation_gala_outcome_appreciate
			hidden_effect = {
				change_variable = { which = federation_gala_outcome value = 2 }
			}
		}
		else = {
			custom_tooltip = federation_gala_outcome_may_boost
			hidden_effect = {
				random_list = {
					4 = { }
					1 = { change_variable = { which = federation_gala_outcome value = 2 } }
					3 = { change_variable = { which = federation_gala_outcome value = 1 } }
					1 = { subtract_variable = { which = federation_gala_outcome value = 1 } }
				}
			}
		}
	}
	option = {
		name = "diploevent.222.auth"
		trigger = {
			OR = {
				is_authoritarian = yes
				is_gestalt = yes
				has_authority = auth_dictatorial
				has_authority = auth_imperial
			}
		}
		if = {
			limit = {
				event_target:invited_guest = {
					OR = {
						is_egalitarian = yes
						has_authority = auth_democratic
						has_authority = auth_cooperative
					}
					is_civic_authoritarian = no
				}
			}
			custom_tooltip = federation_gala_outcome_dislikes
			hidden_effect = {
				subtract_variable = { which = federation_gala_outcome value = 2 }
			}
		}
		else_if = {
			limit = {
				event_target:invited_guest = {
					OR = {
						is_authoritarian = yes
						is_civic_authoritarian = yes
						is_gestalt = yes
						has_authority = auth_dictatorial
						has_authority = auth_imperial
					}
				}
			}
			custom_tooltip = federation_gala_outcome_appreciate
			hidden_effect = {
				change_variable = { which = federation_gala_outcome value = 2 }
			}
		}
		else = {
			custom_tooltip = federation_gala_outcome_may_boost
			hidden_effect = {
				random_list = {
					4 = { }
					1 = { change_variable = { which = federation_gala_outcome value = 2 } }
					3 = { change_variable = { which = federation_gala_outcome value = 1 } }
					1 = { subtract_variable = { which = federation_gala_outcome value = 1 } }
				}
			}
		}
	}
	after = {
		# results
		country_event = { id = diploevent.223 days = 10 }
	}
}
# Summit Ends, how did you do?
country_event = {
	id = diploevent.223
	title = diploevent.223.name
	desc = {
		text = diploevent.223.desc.high
		trigger = {
			check_variable = { which = federation_gala_outcome value >= 58 }
		}
	}
	desc = {
		text = diploevent.223.desc
		trigger = {
			check_variable = { which = federation_gala_outcome value < 58 }
			check_variable = { which = federation_gala_outcome value >= 50 }
		}
	}
	desc = {
		text = diploevent.223.desc.low
		trigger = {
			check_variable = { which = federation_gala_outcome value < 50 }
			check_variable = { which = federation_gala_outcome value >= 45 }
		}
	}
	desc = {
		text = diploevent.223.desc.bad
		trigger = {
			check_variable = { which = federation_gala_outcome value < 45 }
		}
	}
	
	picture = GFX_evt_diplomatic_visit
	show_sound = event_default
	
	is_triggered_only = yes
	
	option = {
		name = "diploevent.223.a"
		trigger = {
			check_variable = { which = federation_gala_outcome value >= 58 }
		}
		custom_tooltip = diploevent.223.high.tooltip
		hidden_effect = {
			set_timed_country_flag = {
				flag = gala_went_very_well
				days = 360
			}
			federation = {
				every_member = {
					add_opinion_modifier = {
						who = event_target:invited_guest
						modifier = opinion_federation_gala_excellent
					}
					event_target:invited_guest = {
						add_opinion_modifier = {
							who = PREV
							modifier = opinion_federation_gala_excellent
						}
					}
				}
			}
		}
	}
	option = {
		name = "EXCELLENT"
		trigger = {
			check_variable = { which = federation_gala_outcome value < 58 }
			check_variable = { which = federation_gala_outcome value >= 50 }
		}
		custom_tooltip = diploevent.223.tooltip
		hidden_effect = {
			set_timed_country_flag = {
				flag = gala_went_well
				days = 360
			}
			federation = {
				every_member = {
					add_opinion_modifier = {
						who = event_target:invited_guest
						modifier = opinion_federation_gala_good
					}
					event_target:invited_guest = {
						add_opinion_modifier = {
							who = PREV
							modifier = opinion_federation_gala_good
						}
					}
				}
			}
		}
	}
	option = {
		name = "OK"
		trigger = {
			check_variable = { which = federation_gala_outcome value < 50 }
			check_variable = { which = federation_gala_outcome value >= 45 }
		}
		custom_tooltip = diploevent.223.low.tooltip
		hidden_effect = {
			set_timed_country_flag = {
				flag = gala_went_ok
				days = 360
			}
			federation = {
				every_member = {
					add_opinion_modifier = {
						who = event_target:invited_guest
						modifier = opinion_federation_gala_ok
					}
					event_target:invited_guest = {
						add_opinion_modifier = {
							who = PREV
							modifier = opinion_federation_gala_ok
						}
					}
				}
			}
		}
	}
	option = {
		name = "UNFORTUNATE"
		trigger = {
			check_variable = { which = federation_gala_outcome value < 45 }
		}
		custom_tooltip = diploevent.223.bad.tooltip
		hidden_effect = {
			set_timed_country_flag = {
				flag = gala_went_badly
				days = 360
			}
			federation = {
				every_member = {
					add_opinion_modifier = {
						who = event_target:invited_guest
						modifier = opinion_federation_gala_bad
					}
					event_target:invited_guest = {
						add_opinion_modifier = {
							who = PREV
							modifier = opinion_federation_gala_bad
						}
					}
				}
			}
		}
	}
	
	after = {
		set_variable = { which = federation_gala_outcome value = 50 }
		event_target:invited_guest = { country_event = { id = diploevent.224 } }
		federation = {
			every_member = {
				limit = { NOT = { is_same_value = ROOT } }
				country_event = { id = diploevent.225 }
			}
		}
	}
}
# Inform other federation members of outcome
country_event = {
	id = diploevent.224
	title = diploevent.223.name
	desc = {
		text = diploevent.224.desc.high
		trigger = {
			FROM = { has_country_flag = gala_went_very_well }
		}
	}
	desc = {
		text = diploevent.224.desc
		trigger = {
			FROM = { has_country_flag = gala_went_well }
		}
	}
	desc = {
		text = diploevent.224.desc.low
		trigger = {
			FROM = { has_country_flag = gala_went_ok }
		}
	}
	desc = {
		text = diploevent.224.desc.bad
		trigger = {
			FROM = { has_country_flag = gala_went_badly }
		}
	}
	
	picture = GFX_evt_diplomatic_visit
	show_sound = event_default
	
	is_triggered_only = yes
	
	option = {
		name = "EXCELLENT"
		trigger = {
			NOT = { FROM = { has_country_flag = gala_went_badly } }
		}
		custom_tooltip = diploevent.224.good.tooltip
		hidden_effect = {
			if = {
				limit = {
					NOT = { FROM = { has_country_flag = gala_went_ok } }
					is_ai = yes
					is_militarist = no
					is_civic_militarist = no
					is_xenophobe = no
					is_xenophobic_isolationists = no
				}
				FROM = {
					federation = {
						every_member = {
							ROOT = { end_rivalry = PREV }
						}
					}
				}
			}
		}
	}
	option = {
		name = "UNFORTUNATE"
		trigger = {
			FROM = { has_country_flag = gala_went_badly }
		}
		custom_tooltip = diploevent.224.bad.tooltip
	}
}
# Inform other federation members of outcome
country_event = {
	id = diploevent.225
	title = diploevent.225.name
	desc = {
		text = diploevent.225.desc.high
		trigger = {
			FROM = { has_country_flag = gala_went_very_well }
		}
	}
	desc = {
		text = diploevent.225.desc
		trigger = {
			FROM = { has_country_flag = gala_went_well }
		}
	}
	desc = {
		text = diploevent.225.desc.low
		trigger = {
			FROM = { has_country_flag = gala_went_ok }
		}
	}
	desc = {
		text = diploevent.225.desc.bad
		trigger = {
			FROM = { has_country_flag = gala_went_badly }
		}
	}
	
	picture = GFX_evt_diplomatic_visit
	show_sound = event_default
	
	is_triggered_only = yes
	
	option = {
		name = "OK"
		trigger = {
			NOT = { FROM = { has_country_flag = gala_went_badly } }
		}
		custom_tooltip = diploevent.225.good.tooltip
		hidden_effect = {
			if = {
				limit = {
					NOT = { FROM = { has_country_flag = gala_went_ok } }
					is_ai = yes
					is_militarist = no
					is_civic_militarist = no
					is_xenophobe = no
					is_xenophobic_isolationists = no
				}
				end_rivalry = event_target:invited_guest
			}
		}
	}
	option = {
		name = "UNFORTUNATE"
		trigger = {
			FROM = { has_country_flag = gala_went_badly }
		}
		custom_tooltip = diploevent.225.bad.tooltip
	}
}

# Envoy smooths over border friction

# Envoy Renounce Claims

# Envoy End Rivalry

###     Custodian	  ###
### Reserved: 300-399 ###

# AI Emperor gains imperial legions
country_event = {
	id = diploevent.300
	hide_window = yes
	is_triggered_only = yes

	immediate = {
		while = {
			count = 12
			capital_scope = {
				create_army = {
					owner = root
					type = "imperial_legion"
				}
			}
			change_variable = {
				which = "imperial_legion_soldier_count"
				value = 1
			}
		}
	}
}

# Galactic Republic Elections
country_event = {
	id = diploevent.301
	hide_window = yes
	is_triggered_only = yes

	immediate = {
		remove_global_flag = ongoing_republic_election
		if = {
			limit = { exists = event_target:former_custodians }
			event_target:former_custodians = {
				restore_galactic_community_leader_backup_data = yes
				remove_modifier = gal_custodian
				remove_country_flag = extended_custodianship
			}
		}
		random_country = {
			limit = {
				is_galactic_community_member = yes
				is_galactic_custodian = no
				is_subject = no
				NOT = { has_country_flag = republic_not_electable }
				OR = {
					galactic_community_rank <= 3
					is_part_of_galactic_council = yes
					is_permanent_councillor = yes
					check_variable = { which = campaign_rating value >= 3 } # dark horse candidate
				}
			}
			weights = {
				# can use add or mult
				base = 1
				modifier = {
					add = 15
					check_variable = {
						which = campaign_rating
						value = 5
					}
				}
				modifier = {
					add = 10
					check_variable = {
						which = campaign_rating
						value = 4
					}
				}
				modifier = {
					add = 6
					check_variable = {
						which = campaign_rating
						value = 3
					}
				}
				modifier = {
					add = 4
					check_variable = {
						which = campaign_rating
						value = 2
					}
				}
				modifier = {
					add = 2
					check_variable = {
						which = campaign_rating
						value = 1
					}
				}
				modifier = {
					add = 6
					galactic_community_rank = 1
				}
				modifier = {
					add = 5
					galactic_community_rank = 2
				}
				modifier = {
					add = 4
					galactic_community_rank = 3
				}
				modifier = {
					add = 3
					galactic_community_rank = 4
				}
				modifier = {
					add = 2
					galactic_community_rank = 5
				}
				modifier = {
					mult = 2
					is_xenophile = yes
				}
				modifier = {
					mult = 2
					is_civic_diplomatic_corps = yes
				}
				modifier = {
					mult = 3
					is_civic_machine_servitor = yes
				}
				modifier = {
					mult = 1.5
					is_open_gestalt = yes
				}
				modifier = {
					mult = 1.5
					is_civic_cutthroat_politics = yes
				}
				modifier = {
					mult = 1.5
					is_egalitarian = yes
				}
				modifier = {
					mult = 0.75
					is_authoritarian = yes
				}
				modifier = {
					mult = 0.5
					OR = {
						is_xenophobe = yes
						is_xenophobic_isolationists = yes
					}
				}
			}
			set_galactic_custodian = yes
			store_galactic_community_leader_backup_data = {
				room = yes
			}
			room_name_override = ""
			add_modifier = { modifier = gal_custodian }
			save_event_target_as = custodian
			if = {
				limit = {
					ROOT = {
						any_owned_army = { army_type = republic_legion }
					}
				}
				country_event = { id = diploevent.315 }
			}
		}
		if = {
			limit = { NOT = { exists = event_target:custodian } } # edge case if there is only one member left in the community
			set_country_flag = republic_too_small
			country_event = { id = diploevent.307 }
		}
		else = {
			every_playable_country = {
				limit = { has_country_flag = republic_campaign }
				remove_country_flag = republic_campaign
				set_variable = { which = campaign_rating value = 0 }
			}
			every_playable_country = {
				limit = { is_galactic_community_member = yes }
				country_event = { id = diploevent.302 }
			}
		}
	}
}
country_event = {
	id = diploevent.302
	title = "diploevent.302.name"
	desc = {
		trigger = { is_galactic_custodian = yes }
		text = "diploevent.302.a.desc"
	}
	desc = {
		trigger = { is_galactic_custodian = no }
		text = "diploevent.302.b.desc"
	}
	picture = GFX_evt_diplomatic_visit
	show_sound = event_vote

	is_triggered_only = yes

	option = {
		name = EXCELLENT
		trigger = { is_galactic_custodian = yes }
		custom_tooltip = president_starts
	}
	option = {
		name = OK
		trigger = { is_galactic_custodian = no }
		custom_tooltip = president_starts
	}
}

# Chancellor Term Ended
country_event = {
	id = diploevent.303
	title = "diploevent.303.name"
	desc = {
		trigger = { is_same_value = from }
		text = "diploevent.303.a.desc"
	}
	desc = {
		trigger = {
			NOT = { is_same_value = from }
		}
		text = "diploevent.303.b.desc"
	}
	picture = GFX_evt_voting
	show_sound = event_administrative_work

	is_triggered_only = yes

	option = {
		name = OK
		custom_tooltip = republic_elections_started
	}
}
country_event = {
	id = diploevent.304
	title = "diploevent.303.name"
	desc = {
		trigger = { is_same_value = from }
		text = "diploevent.304.a.desc"
	}
	desc = {
		trigger = {
			NOT = { is_same_value = from }
		}
		text = "diploevent.304.b.desc"
	}
	picture = GFX_evt_civil_action
	show_sound = event_administrative_work

	is_triggered_only = yes

	option = {
		name = OK
		custom_tooltip = republic_elections_started
	}
}
country_event = {
	id = diploevent.305
	title = "diploevent.305.name"
	desc = {
		trigger = { is_same_value = from }
		text = "diploevent.305.a.desc"
	}
	desc = {
		trigger = {
			NOT = { is_same_value = from }
		}
		text = "diploevent.305.b.desc"
	}
	picture = GFX_evt_civil_action
	show_sound = event_assembly_fight

	is_triggered_only = yes
	
	option = {
		name = custodian.17.a
		trigger = { is_same_value = from }
		custom_tooltip = republic_elections_started
	}
	option = {
		name = OK
		trigger = { NOT = { is_same_value = from } }
		custom_tooltip = republic_elections_started
	}
}
# Custodian Destroyed
country_event = {
	id = diploevent.306
	title = "diploevent.306.name"
	desc = "diploevent.306.desc"
	picture = GFX_evt_burning_city
	show_sound = event_burning_city

	is_triggered_only = yes

	option = {
		name = UNFORTUNATE
		custom_tooltip = republic_elections_started
	}
}

# End of the Republic
country_event = {
	id = diploevent.307
	hide_window = yes

	is_triggered_only = yes

	trigger = {
		is_galactic_custodian = yes
	}

	immediate = {
		remove_global_flag = galactic_republic_formed
		save_event_target_as = former_custodians
		restore_galactic_community_leader_backup_data = yes
		set_galactic_custodian = no
		remove_country_flag = extended_custodianship
		remove_country_flag = emergency_powers
		cancel_resolution = "resolution_galacticreforms_nominate_custodian"
		cancel_resolution = "resolution_custodian_galpol"
		cancel_resolution = "resolution_custodian_expand_galpol"
		remove_modifier = gal_custodian
		every_playable_country = {
			limit = { is_galactic_community_member = yes }
			country_event = { id = diploevent.308 }
		}
		if = {
			limit = { has_global_flag = gdf_active }
			country_event = { id = custodian.31 }
		}
	}
}
country_event = {
	id = diploevent.308
	title = "diploevent.308.name"
	desc = {
		trigger = {
			is_same_value = from
			NOT = { has_country_flag = republic_too_small }
		}
		text = "diploevent.308.a.desc"
	}
	desc = {
		trigger = {
			NOT = { is_same_value = from }
			NOT = { has_country_flag = republic_too_small }
		}
		text = "diploevent.308.b.desc"
	}
	desc = {
		trigger = {
			has_country_flag = republic_too_small
		}
		text = "diploevent.308.c.desc"
	}
	picture = GFX_evt_civil_action
	show_sound = event_assembly_fight

	is_triggered_only = yes

	option = {
		name = custodian.17.a
		trigger = {
			is_same_value = from
			NOT = { has_country_flag = republic_too_small }
		}
	}
	option = {
		name = TERRIBLE
		trigger = {
			has_country_flag = republic_too_small
		}
		remove_country_flag = republic_too_small
	}
	option = {
		name = custodian.17.b
		trigger = { NOT = { is_same_value = from } }
	}
}

# Formation of the Galactic Republic
country_event = {
	id = diploevent.310
	hide_window = yes
	is_triggered_only = yes

	immediate = {
		save_event_target_as = gal_chancellor
		# Deal with existing Custodian resolutions
		if = {
			limit = { is_active_resolution = resolution_custodian_united_front }
			set_country_flag = united_front_active
		}
		if = {
			limit = { is_active_resolution = resolution_emperor_galactic_mobilization }
			set_country_flag = galactic_mobilization_active
		}
		if = {
			limit = { is_active_resolution = resolution_custodian_galactic_standard }
			set_country_flag = custodian_galactic_standard_active
		}
		if = {
			limit = { is_active_resolution = resolution_custodian_anti_piracy }
			set_country_flag = custodian_anti_piracy_active
		}
		every_playable_country = {
			limit = {
				is_galactic_custodian = yes
			}
			country_event = { id = diploevent.311 }
		}
		every_playable_country = {
			limit = {
				is_ai = no
				is_galactic_custodian = no
			}
			country_event = { id = diploevent.312 }
		}
	}
}
country_event = {
	id = diploevent.311
	title = "diploevent.311.name"
	desc = "diploevent.311.desc_a"
	picture = GFX_evt_announcement
	show_sound = event_announcement

	is_triggered_only = yes
	
	immediate = {
		set_global_flag = galactic_republic_formed
		if = {
			limit = {
				OR = {
					num_council_positions = 1
					num_council_positions = 2
				}
			}
			set_council_size = 3
		}
		if = {
			limit = { has_country_flag = united_front_active }
			pass_resolution_no_cooldown = resolution_republic_united_front
			remove_country_flag = united_front_active
		}
		if = {
			limit = { has_country_flag = galactic_mobilization_active }
			pass_resolution_no_cooldown = resolution_emperor_galactic_mobilization
			remove_country_flag = galactic_mobilization_active
		}
		if = {
			limit = { has_country_flag = custodian_galactic_standard_active }
			pass_resolution_no_cooldown = resolution_emperor_galactic_standard
			remove_country_flag = custodian_galactic_standard_active
		}
		if = {
			limit = { has_country_flag = custodian_anti_piracy_active }
			pass_resolution_no_cooldown = resolution_empire_anti_piracy
			remove_country_flag = custodian_anti_piracy_active
		}
		random_country = {
			limit = { is_country_type = global_event }
			change_variable = {
				which = galactic_republics
				value = 1
			}
		}
	}
	
	option = {
		name = diploevent.311.a
		custom_tooltip = diploevent.311.a.tooltip
	}
}
country_event = {
	id = diploevent.312
	title = "diploevent.311.name"
	desc = "diploevent.311.desc_b"
	picture = GFX_evt_announcement
	show_sound = event_announcement

	is_triggered_only = yes
	
	option = {
		name = diploevent.311.a
		trigger = { is_galactic_community_member = yes }
		custom_tooltip = diploevent.311.a.tooltip
	}
	option = {
		name = emperor.3.b
		trigger = { is_galactic_community_member = no }
		custom_tooltip = diploevent.311.a.tooltip
	}
}

# AI Chancellor gains republic legions
country_event = {
	id = diploevent.313
	hide_window = yes
	is_triggered_only = yes

	immediate = {
		while = {
			count = 12
			capital_scope = {
				create_army = {
					owner = root
					type = "republic_legion"
				}
			}
			change_variable = {
				which = "republic_legion_soldier_count"
				value = 1
			}
		}
	}
}

# Imperial Legions Founded
country_event = {
	id =  diploevent.314
	title = "diploevent.314.name"
	desc = "diploevent.314.desc"
	picture = GFX_evt_galactic_empire
	show_sound = event_salute

	is_triggered_only = yes

	immediate = {
		random_playable_country = {
			limit = { is_galactic_custodian = yes }
			save_event_target_as = gal_emperor
		}
	}

	option = {
		name = diploevent.314.a
		trigger = {
			OR = {
				is_galactic_custodian = yes
				AND = {
					is_xenophobe = no
					is_pacifist = no
					is_open_gestalt = no
					is_xenophobic_isolationists = no
				}
			}
		}
	}
	option = {
		name = diploevent.314.b
		trigger = {
			is_galactic_custodian = no
			is_xenophobic_isolationists = no
			OR = {
				is_pacifist = yes
				is_open_gestalt = yes
			}
		}
	}
	option = {
		name = emperor.55.c
		trigger = {
			is_galactic_custodian = no
			OR = {
				is_xenophobe = yes
				is_xenophobic_isolationists = yes
			}
		}
	}
}

# New Chancellor Takes Republic Legions
country_event = {
	id = diploevent.315
	hide_window = yes
	is_triggered_only = yes

	immediate = {
		while = {
			limit = {
				OR = {
					FROM = { check_variable = { which = "republic_legion_soldier_count" value > 0 } }
					ROOT = { check_variable = { which = "republic_legion_soldier_count" value < 12 } }
				}
			}
			FROM = {
				change_variable = {
					which = republic_legion_soldier_count
					value = -1
				}
				random_owned_army = {
					limit = { army_type = republic_legion }
					remove_army = yes
				}
			}
			capital_scope = {
				create_army = {
					owner = root
					type = "republic_legion"
				}
			}
			change_variable = {
				which = "republic_legion_soldier_count"
				value = 1
			}
		}
	}
}

# Republic Army Disbanded
country_event = {
	id = diploevent.316
	hide_window = yes
	is_triggered_only = yes

	immediate = {
		while = {
			limit = {
				ROOT = { check_variable = { which = "republic_legion_soldier_count" value > 0 } }
			}
			change_variable = {
				which = republic_legion_soldier_count
				value = -1
			}
			random_owned_army = {
				limit = { army_type = republic_legion }
				remove_army = yes
			}
		}
	}
}