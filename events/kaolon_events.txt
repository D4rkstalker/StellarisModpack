############################
#
# Written by Yindiram the Faerie Dragon
# Warning: Kaolon is Great Old One, and may thus bring crisis to the galaxy
#
############################

namespace = kaolon
country_event = {
	id = kaolon.0
	hide_window = yes
	fire_only_once = yes
	trigger = {
		any_country = {
			is_country_type = default
			is_ai = no
			any_owned_megastructure = {
					is_megastructure_type = dimension_drain_3
			}
		}
	}

	immediate = {
		random_country = {
			limit = {
				is_country_type = default
				is_ai = no
				any_owned_megastructure = {
					OR = {
						is_megastructure_type = dimension_drain_3
					}
				}
			}
			save_event_target_as = target_country
		}
		event_target:target_country = {
			random_owned_megastructure = {
				limit = {
					OR = {
						is_megastructure_type = dimension_drain_3
					}
				}
				save_event_target_as = dimension_drain_incoming
			}
		}
		
		event_target:target_country = {
			#Kaolon is here...
			country_event = { id = kaolon.1  days = 900 random = 100 }
		}
	}
}

#Mysterious Signal
country_event = {
	id = kaolon.1
	title = kaolon.1.name
	desc = kaolon.1.desc
	picture = GFX_evt_unspeakable_horror
	show_sound = event_yellow_alert
	fire_only_once = yes
	is_triggered_only = yes
	option = {
		name = kaolon.1.a 
		hidden_effect = {
			country_event = {id = kaolon.2}
		}
		default_hide_option = yes
	}
}

#Kaolon takes
country_event = {
	id = kaolon.2
	title = kaolon.111.name
	diplomatic = yes
	force_open = yes
	fire_only_once = yes
	picture_event_data = {
		portrait = shroud1
		room = shroud_room
	}
	
	is_triggered_only = yes
	desc = kaolon.2.desc
	option = {
		name = kaolon.2.a
		is_dialog_only = yes
		response_text = kaolon.2.a.response
	}
	option = {
		name = kaolon.2.b
		is_dialog_only = yes
		response_text = kaolon.2.b.response
	}
	option = {
		name = kaolon.2.c
		is_dialog_only = yes
		response_text = kaolon.2.c.response
	}
	
	option = {
		name = kaolon.2.d
		is_dialog_only = yes
		response_text = kaolon.2.d.response
	}
	option = {
		name = kaolon.2.e
		hidden_effect = {
			country_event = {id = kaolon.3}
			every_owned_planet = {
				limit = { NOT = { has_modifier = marked_by_kaolon } }
				add_modifier = { modifier = marked_by_kaolon days = -1 }
			}
			every_subject = {
				every_owned_planet = {
					limit = { NOT = { has_modifier = marked_by_kaolon } }
					add_modifier = { modifier = marked_by_kaolon days = -1 }
				}			
			}
		}
		default_hide_option = yes
	}
}

#MegaStructure Down
country_event = {
	id = kaolon.3
	title = kaolon.3.name
	desc = kaolon.3.desc
	picture = GFX_evt_unspeakable_horror
	show_sound = event_red_alert
	fire_only_once = yes
	is_triggered_only = yes
	location = event_target:kaolon_spawn_system
	
	immediate = {
		create_country = {
			name = "Kaolon's Puppet"
			type = shroud_spirits
			flag = {
				icon = {
					category = "special"
					file = "the_shroud.dds"
				}
				background= {
					category = "backgrounds"
					file = "00_solid.dds"
				}
				colors={
					"dark_purple"
					"black"
					"null"
					"null"
				}
			}
		}
		last_created_country = {
			establish_communications_no_message = root
			save_global_event_target_as = kaolon_country
		}
		random_system_within_border = {
			limit = {
				has_megastructure = dimension_drain_3
			}
			save_event_target_as = kaolon_spawn_system
			random_system_planet = { save_event_target_as = kaolon_spawn_planet }
		}
		create_fleet = {
			name = "Kaolon's puppet"
			settings = {
				spawn_debris = no
				is_boss = yes
			}			
			effect = {
				set_owner = event_target:kaolon_country
				create_ship = {
					name = "Kaolon's Loyal Servant"
					design = "NAME_Dimensional_Horror"
				}
				set_location = event_target:kaolon_spawn_planet
				set_fleet_stance = aggressive
				set_aggro_range_measure_from = self
				set_aggro_range = 300
			}
		}
		create_fleet = {
			name = "Kaolon's puppet"
			settings = {
				spawn_debris = no
				is_boss = yes
			}			
			effect = {
				set_owner = event_target:kaolon_country
				create_ship = {
					name = "NAME_Corrupted_Avatar"
					design = "NAME_Corrupted_Avatar"
				}
				create_ship = {
					name = "NAME_Corrupted_Avatar"
					design = "NAME_Corrupted_Avatar"
				}
				create_ship = {
					name = "NAME_Corrupted_Avatar"
					design = "NAME_Corrupted_Avatar"
				}
				create_ship = {
					name = "NAME_Corrupted_Avatar"
					design = "NAME_Corrupted_Avatar"
				}
				create_ship = {
					name = "NAME_Corrupted_Avatar"
					design = "NAME_Corrupted_Avatar"
				}
				create_ship = {
					name = "NAME_Corrupted_Avatar"
					design = "NAME_Corrupted_Avatar"
				}
				create_ship = {
					name = "NAME_Corrupted_Avatar"
					design = "NAME_Corrupted_Avatar"
				}
				create_ship = {
					name = "NAME_Corrupted_Avatar"
					design = "NAME_Corrupted_Avatar"
				}
				set_location = event_target:kaolon_spawn_planet
				set_fleet_stance = aggressive
				set_aggro_range_measure_from = self
				set_aggro_range = 300
			}
		}
	}
	
	option = {
		name = kaolon.3.a
		begin_event_chain = {
			event_chain = decaydance_of_sanity_kaolon
			target = root.owner
		}
		capital_scope = {
			enable_special_project = {
				name = "RESEARCH_KAOLON"
				location = this
				owner = root
			}
		}
		event_target:dimension_drain_incoming = {
			upgrade_megastructure_to = dimension_drain_4
		}
		hidden_effect = {
			country_event = {id = kaolon.4 days = 360}
			set_country_flag = kaolon_is_here
		}
		default_hide_option = yes
	}
}

#Basic Information about Kaolon
country_event = {
	id = kaolon.100
	title = kaolon.100.name
	picture = GFX_evt_unspeakable_horror
	show_sound = event_yellow_alert
	is_triggered_only = yes
	desc = kaolon.100.desc
	#find curators for help
	option = {
		name = kaolon.100.a
		capital_scope = {
			enable_special_project = {
				name = "ANTI_KAOLON_ONE"
				location = this
				owner = root
			}
		}

	}
	#research by ourselves
	option = {
		name = kaolon.100.b
		capital_scope = {
			enable_special_project = {
				name = "ANTI_KAOLON_TWO"
				location = this
				owner = root
			}
		}

	}
	#find weaver of empyrean for help
	option = {
		name = kaolon.100.c
		trigger = {
			has_country_flag = weaver_saved_successfully
		}
		allow = {
			resource_stockpile_compare = { resource = energy value >= 30000}
		}
		add_resource = { energy = -30000 }
		capital_scope = {
			enable_special_project = {
				name = "ANTI_KAOLON_THREE"
				location = this
				owner = root
			}
		}

	}
}

#Kaolon undefeatable?
country_event = {
	id = kaolon.101
	title = kaolon.101.name
	picture = GFX_evt_unspeakable_horror
	show_sound = event_yellow_alert
	is_triggered_only = yes
	desc = kaolon.101.desc
	
	option = {
		name = kaolon.101.a
		custom_tooltip = kaolon.101.a.tooltip
		capital_scope = {
			enable_special_project = {
				name = "GOVERNMENT_EVACUATION"
				location = this
				owner = root
			}
		}
	}
	option = {
		name = kaolon.101.b
		custom_tooltip = kaolon.101.b.tooltip
		capital_scope = {
			enable_special_project = {
				name = "SHROUD_FIND_ANSWER"
				location = this
				owner = root
			}
		}
	}
}

#first step evacuate finished, locate all bunker
country_event = {
	id = kaolon.201
	title = kaolon.201.name
	trackable = yes
	desc = {
		text = kaolon.201.desc
	}
	picture = GFX_evt_galactic_senate
	show_sound = event_air_raid_siren
	is_triggered_only = yes
	
	immediate = {
		set_country_flag = evacuation_started
	}
	
	option = {
		name = kaolon.201.a
		begin_event_chain = {
			event_chain = escape_from_kaolon
			target = root.owner
		}
		random_system = {
			limit = {
				any_system_planet = {
					has_owner = no
					is_colonizable = yes				
				}
			}
			set_star_flag = bunker_haven
			random_system_planet = {
				limit = {
					has_owner = no
					is_colonizable = yes
				}	
				add_modifier = {
					modifier = "kaolon_bunker"
					days = -1
				}
				enable_special_project = {
					name = "ACTIVATE_BUNKER"
					location = this
					owner = root
				}
			}	
		}	
		random_system = {
			limit = {
				any_system_planet = {
					has_owner = no
					is_colonizable = yes				
				}
			}
			set_star_flag = bunker_haven
			random_system_planet = {
				limit = {
					has_owner = no
					is_colonizable = yes
				}	
				add_modifier = {
					modifier = "kaolon_bunker"
					days = -1
				}
				enable_special_project = {
					name = "ACTIVATE_BUNKER"
					location = this
					owner = root
				}
			}	
		}	
		random_system = {
			limit = {
				any_system_planet = {
					has_owner = no
					is_colonizable = yes				
				}
			}
			set_star_flag = bunker_haven
			random_system_planet = {
				limit = {
					has_owner = no
					is_colonizable = yes
				}	
				add_modifier = {
					modifier = "kaolon_bunker"
					days = -1
				}
				enable_special_project = {
					name = "ACTIVATE_BUNKER"
					location = this
					owner = root
				}
			}	
		}
		random_system = {
			limit = {
				any_system_planet = {
					has_owner = no
					is_colonizable = yes				
				}
			}
			set_star_flag = bunker_haven
			random_system_planet = {
				limit = {
					has_owner = no
					is_colonizable = yes
				}	
				add_modifier = {
					modifier = "kaolon_bunker"
					days = -1
				}
				enable_special_project = {
					name = "ACTIVATE_BUNKER"
					location = this
					owner = root
				}
			}	
		}
		random_system = {
			limit = {
				any_system_planet = {
					has_owner = no
					is_colonizable = yes				
				}
			}
			set_star_flag = bunker_haven
			random_system_planet = {
				limit = {
					has_owner = no
					is_colonizable = yes
				}	
				add_modifier = {
					modifier = "kaolon_bunker"
					days = -1
				}
				enable_special_project = {
					name = "ACTIVATE_BUNKER"
					location = this
					owner = root
				}
			}	
		}	
		random_system = {
			limit = {
				any_system_planet = {
					has_owner = no
					is_colonizable = yes				
				}
			}
			set_star_flag = bunker_haven
			random_system_planet = {
				limit = {
					has_owner = no
					is_colonizable = yes
				}	
				add_modifier = {
					modifier = "kaolon_bunker"
					days = -1
				}
				enable_special_project = {
					name = "ACTIVATE_BUNKER"
					location = this
					owner = root
				}
			}	
		}			
	}
}
	

#a bunker finished activation--unlock decisions to transfer resources and supplies
ship_event = {
	id = kaolon.202
	title = kaolon.202.name
	desc = kaolon.202.desc
	picture = GFX_evt_galactic_senate
	show_sound = event_radio_chatter_02
	is_triggered_only = yes
	trackable = yes
	location = FROMFROM
	option = {
		name = kaolon.202.a
		FROMFROM = {
			set_planet_flag = bunker_activated
			enable_special_project = {
				name = "BASIC_RESOURCE"
				location = this
				owner = root.owner
			}
			enable_special_project = {
				name = "SECONDARY_RESOURCE"
				location = this
				owner = root.owner
			}
			enable_special_project = {
				name = "SCIENCE_AND_UNITY"
				location = this
				owner = root.owner
			}
			enable_special_project = {
				name = "FROZEN_FETUS"
				location = this
				owner = root.owner
			}
		}
		#random_system_planet = {
			#limit = { has_modifier = kaolon_bunker }
			#hidden_effect = {
				#set_planet_flag = bunker_activated
			#}
		#}
	}
}

#traitor, transmission
country_event = {
	id = kaolon.203
	title = kaolon.203.name
	desc = kaolon.203.desc
	picture = GFX_evt_black_hole
	show_sound = event_yellow_alert
	trigger = {
		has_country_flag = evacuation_started
		NOT = {has_country_flag = traitor_appeared}
	}
	immediate = {
		set_country_flag = traitor_appeared
	}
	mean_time_to_happen = {
		months = 1
	}
	option = {
		name = kaolon.203.a
		country_event = { id = kaolon.204 }
	}
}

country_event = {
	id = kaolon.204
	title = kaolon.204.name
	desc = kaolon.204.desc
	diplomatic = yes
	is_triggered_only = yes
	picture_event_data = {
		room = no_video_feed_room
	}
	option = {
		name = "kaolon.204.a"
		response_text = "kaolon.204.a.response"
		is_dialog_only = yes
	}
	option = {
		name = "kaolon.204.b"
		response_text = "kaolon.204.b.response"
		is_dialog_only = yes
	}
	option = {
		name = "kaolon.204.c"
		response_text = "kaolon.204.c.response"
		is_dialog_only = yes
	}
	option = {
		name = "kaolon.204.d"
		country_event = { id = kaolon.205 }
	}
}

#demand
country_event = {
	id = kaolon.205
	title = kaolon.205.name
	desc = kaolon.205.desc
	diplomatic = yes
	is_triggered_only = yes
	picture_event_data = {
		room = no_video_feed_room
	}
	option = {
		name = "kaolon.205.a"#agree
		response_text = "kaolon.205.a.response"
		custom_tooltip = kaolon.205.a.tooltip
		country_event = { id = kaolon.206 }
	}
	option = {
		name = "kaolon.205.b"#refuse
		response_text = "kaolon.205.b.response"
		custom_tooltip = kaolon.205.b.tooltip
		country_event = { id = kaolon.210 }
	}
}

#agree to fight, go back to original project, decreased happiness on ruler 
country_event = {
	id = kaolon.206
	title = kaolon.206.name
	desc = kaolon.206.desc
	picture = GFX_evt_news_room
	show_sound = event_celebration
	is_triggered_only = yes
	option = {
		name = kaolon.206.a
		end_event_chain = escape_from_kaolon
		end_event_chain = escape_from_kaolon_weaver
		capital_scope = {
			enable_special_project = {
				name = "SHROUD_FIND_ANSWER"
				location = this
				owner = root
			}
		}
		capital_scope = {
			enable_special_project = {
				name = "SCIENCE_DEPARTMENT_REFORM"
				location = this
				owner = root
			}
		}
		add_modifier = {
			modifier = unhappy_ruler 
			days = 3600
		}
		
	}
}

#gain talented researchers after special porject
country_event = {
	id = kaolon.207
	title = kaolon.207.name
	desc = kaolon.207.desc
	picture = GFX_evt_news_room
	show_sound = event_cityscape
	is_triggered_only = yes
	option = {
		name = kaolon.207.a
		custom_tooltip = kaolon.207.a.tooltip
		add_modifier = {
			modifier = talented_researcher 
			days = -1
		}
		hidden_effect = {
			create_leader = {
				event_leader = yes
				class = scientist
				species = root
				name = random
				skill = 10
				traits = {
					trait = leader_trait_spark_of_genius
					trait = leader_trait_scientist_psionic
				}
				gender = indeterminable
				set_age = 20
			}
		}
	}
}

#disagree to fight, instant national chaos, revolt begins
country_event = {
	id = kaolon.210
	title = kaolon.210.name
	desc = kaolon.210.desc
	picture = GFX_evt_burning_settlement
	show_sound = event_air_raid_siren
	is_triggered_only = yes
	immediate = {
		set_country_flag = revolt_begins
		every_owned_planet = {
			create_country = {
				name = "Angry Citizens"
				type = faction
			}
			create_species = {
				name = "Angry Citizens"
				class = random
				portrait = random
				traits = random
			}
			create_army = {
				name = "Angry Citizens"
				owner = last_created
				species = last_created
				type = "tree_army"
			}
			create_army = {
				name = "Angry Citizens"
				owner = last_created
				species = last_created
				type = "tree_army"
			}
			create_army = {
				name = "Angry Citizens"
				owner = last_created
				species = last_created
				type = "tree_army"
			}
			create_army = {
				name = "Angry Citizens"
				owner = last_created
				species = last_created
				type = "tree_army"
			}
		}
	}
	option = {
		name = kaolon.210.a
		add_modifier = {
			modifier = government_abandon_us
			days = -1
		}
	}
}

#a bunker get removed, must kill the leader before all bunkers are destroyed
country_event = {
	id = kaolon.211
	title = kaolon.211.name
	desc = {
		text = kaolon.211.desc
		trigger = { NOT = { has_country_flag = weaver_saved_successfully } }
	}
	desc = {#have weaver, stop this one for you
		text = kaolon.211.weaver.desc
		trigger = { has_country_flag = weaver_saved_successfully }
	}
	picture = GFX_evt_planet_beam
	show_sound = event_red_alert
	trigger = {
		has_country_flag = revolt_begins
		NOT = {has_country_flag = first_bunker_gone}
	}
	mean_time_to_happen = {
		months = 2
	}
	immediate = {
		set_country_flag = first_bunker_gone
	}
	option = {
		trigger = {
			NOT = {has_country_flag = weaver_saved_successfully}
		}
		name = kaolon.211.a
		custom_tooltip = kaolon.211.a.tooltip
		random_planet = {
			enable_special_project = {
				name = "KILL_LEADER"
				location = this
				owner = root
			}
		}
		hidden_effect = {
			random_system = {
				limit = {
					has_star_flag = bunker_haven
				}
				remove_star_flag = bunker_haven
				random_planet = {
					limit = {
						has_modifier = kaolon_bunker
					}
					remove_modifier = kaolon_bunker
					remove_planet = yes
				}
			}
			add_event_chain_counter = { 
				event_chain = "escape_from_kaolon" 
				counter = "bunker_nullified" 
				amount = 1 
			}
		}
	}
	option = {
		trigger = {
			has_country_flag = weaver_saved_successfully
		}
		name = kaolon.211.b
		custom_tooltip = kaolon.211.b.tooltip
		random_planet = {
			enable_special_project = {
				name = "KILL_LEADER"
				location = this
				owner = root
			}
		}
		
	}
}

#more bunkers get destroyed
country_event = {
	id = kaolon.212
	title = kaolon.212.name
	desc = kaolon.212.desc
	picture = GFX_evt_planet_beam
	show_sound = event_red_alert
	trigger = {
		has_country_flag = first_bunker_gone
		NOT = {has_country_flag = leader_killed}
		NOT = {has_country_flag = all_bunker_gone}
		NOT = {has_country_flag = evacation_finished}
	}
	mean_time_to_happen = {
		months = 16
	}
	immediate = {
		random_system = {
			limit = {
				has_star_flag = bunker_haven
			}
			remove_star_flag = bunker_haven
			random_system_planet = {
				limit = {
					has_modifier = kaolon_bunker
				}
				remove_modifier = kaolon_bunker
				remove_planet = yes
			}
		}
	}
	option = {
		name = kaolon.212.a
		custom_tooltip = kaolon.212.a.tooltip
		hidden_effect = {
			add_event_chain_counter = { 
				event_chain = "escape_from_kaolon" 
				counter = "bunker_nullified" 
				amount = 1 
			}
			add_event_chain_counter = { 
				event_chain = "escape_from_kaolon_weaver" 
				counter = "bunker_nullified" 
				amount = 1 
			}
		}
	}
}

#no bunkers left, mission failed
country_event = {
	id = kaolon.213
	title = kaolon.213.name
	desc = kaolon.213.desc
	picture = GFX_evt_unspeakable_horror
	show_sound = event_air_raid_siren
	trigger = {
		OR = {
			has_completed_event_chain_counter = {
				event_chain = "escape_from_kaolon" 
				counter = "bunker_nullified" 
			}
			has_completed_event_chain_counter = {
				event_chain = "escape_from_kaolon_weaver" 
				counter = "bunker_nullified" 
			}
		}
		NOT = {has_country_flag = all_bunker_gone}
	}
	immediate = {
		set_country_flag = all_bunker_gone
	}
	option = {
		name = kaolon.213.a
		end_event_chain = escape_from_kaolon
		end_event_chain = escape_from_kaolon_weaver
		hidden_effect = {
			country_event = {id = kaolon.214   days = 5}
		}
	}
}

#Kaolon appeared, felt a bit dissatisfied, and then took away everything
country_event = {
	id = kaolon.214
	title = kaolon.214.name
	diplomatic = yes
	force_open = yes
	picture_event_data = {
		portrait = shroud1
		room = shroud_room
	}
	
	is_triggered_only = yes
	desc = kaolon.214.desc
	option = {
		name = kaolon.214.a
		is_dialog_only = yes
		response_text = kaolon.214.a.response
	}
	option = {
		name = kaolon.214.b
		is_dialog_only = yes
		response_text = kaolon.214.b.response
	}
	option = {
		name = kaolon.214.c
		country_event = {id = kaolon.215}
	}
}

#Only one planet left, everything else gone
country_event = {
	id = kaolon.215
	title = kaolon.215.name
	desc = kaolon.215.desc
	picture = GFX_evt_unspeakable_horror
	show_sound = event_red_alert
	is_triggered_only = yes
	immediate = {
		set_country_flag = kaolon_banishment
		clear_resources = yes
		kill_leader = {
			type = ruler
			show_notification = no
			heir = yes
		}
		kill_leader = {
			type = ruler
			show_notification = no
			heir = no
		}	
		every_owned_leader = {
			kill_leader = { show_notification = no }
		}			
		every_owned_fleet = { 
			destroy_fleet = this 
		}		
		every_planet = {
			limit = { 
				has_modifier = marked_by_kaolon 
				is_capital = no
			}
			remove_modifier = marked_by_kaolon
			remove_all_armies = yes
			if = {
				limit = { 
					is_planet_class = pc_habitat 
				}
				destroy_colony = yes
				remove_planet = yes						
			}
			else_if = {
				limit = {
					is_planet_class = pc_ringworld_habitable
				}
				change_pc = pc_ringworld_habitable_damaged
				clear_planet_modifiers = yes
				clear_deposits = yes				
			}
			else = {
				change_pc = pc_shrouded
				clear_planet_modifiers = yes
				clear_deposits = yes
			}
		}
		every_planet = {
			limit = { 
				has_modifier = marked_by_kaolon 
				is_capital = yes
			}
			remove_modifier = marked_by_kaolon
			remove_all_armies = yes
			while = {
				limit = { 
					num_pops > 5
				}
				random_owned_pop = {
					kill_pop = yes
				}
			}
		}
	}
	option = {
		name = kaolon.215.a
		custom_tooltip = kaolon.215.a.tooltip
		remove_modifier = "kaolon_madness"
		remove_modifier = "kaolon_madness_2"
		remove_modifier = "doomed_future"
		remove_modifier = "government_abandon_us"
		end_event_chain = decaydance_of_sanity_kaolon
	}
}

#leader killed, leaving a charging device behind
country_event = {
	id = kaolon.216
	title = kaolon.216.name
	desc = kaolon.216.desc
	picture = GFX_evt_planet_beam
	show_sound = event_air_raid_siren
	is_triggered_only = yes
	immediate = {
		set_country_flag = leader_killed
	}	
	option = {
		name = kaolon.216.a
		custom_tooltip = kaolon.216.a.tooltip
		allow = {
			resource_stockpile_compare = { resource = energy value >= 8000 }
		}
		add_resource = { energy = -8000 }
	}
	option = {
		name = kaolon.216.b
		custom_tooltip = kaolon.216.b.tooltip
		hidden_effect = {
			random_system = {
				limit = {
					has_star_flag = bunker_haven
				}
				remove_star_flag = bunker_haven
				random_planet = {
					limit = {
						has_modifier = kaolon_bunker
					}
					remove_modifier = kaolon_bunker
					remove_planet = yes
				}
			}
			add_event_chain_counter = { 
				event_chain = "escape_from_kaolon" 
				counter = "bunker_nullified" 
				amount = 1 
			}
			add_event_chain_counter = { 
				event_chain = "escape_from_kaolon_weaver" 
				counter = "bunker_nullified" 
				amount = 1 
			}
		}
	}
}

#periodic revolt 
country_event = {
	id = kaolon.217
	title = kaolon.217.name
	desc = kaolon.217.desc
	picture = GFX_evt_burning_settlement
	show_sound = event_air_raid_siren
	trigger = {
		has_country_flag = revolt_begins
		NOT = {has_country_flag = evacation_finished}
	}
	mean_time_to_happen = {
		months = 12
	}
	immediate = {
		every_owned_planet = {
			create_country = {
				name = "Angry Citizens"
				type = faction
			}
			create_species = {
				name = "Angry Citizens"
				class = random
				portrait = random
				traits = random
			}
			create_army = {
				name = "Angry Citizens"
				owner = last_created
				species = last_created
				type = "tree_army"
			}
			create_army = {
				name = "Angry Citizens"
				owner = last_created
				species = last_created
				type = "tree_army"
			}
			create_army = {
				name = "Angry Citizens"
				owner = last_created
				species = last_created
				type = "tree_army"
			}
			create_army = {
				name = "Angry Citizens"
				owner = last_created
				species = last_created
				type = "tree_army"
			}
			create_army = {
				name = "Angry Citizens"
				owner = last_created
				species = last_created
				type = "tree_army"
			}
			create_army = {
				name = "Angry Citizens"
				owner = last_created
				species = last_created
				type = "tree_army"
			}
			create_army = {
				name = "Angry Citizens"
				owner = last_created
				species = last_created
				type = "tree_army"
			}
			create_army = {
				name = "Angry Citizens"
				owner = last_created
				species = last_created
				type = "tree_army"
			}
			create_army = {
				name = "Angry Citizens"
				owner = last_created
				species = last_created
				type = "tree_army"
			}
			create_army = {
				name = "Angry Citizens"
				owner = last_created
				species = last_created
				type = "tree_army"
			}
			create_army = {
				name = "Angry Citizens"
				owner = last_created
				species = last_created
				type = "tree_army"
			}
			create_army = {
				name = "Angry Citizens"
				owner = last_created
				species = last_created
				type = "tree_army"
			}
			create_army = {
				name = "Angry Citizens"
				owner = last_created
				species = last_created
				type = "tree_army"
			}
			create_army = {
				name = "Angry Citizens"
				owner = last_created
				species = last_created
				type = "tree_army"
			}
			create_army = {
				name = "Angry Citizens"
				owner = last_created
				species = last_created
				type = "tree_army"
			}
		}
	}
	option = {
		name = kaolon.217.a 
	}
}

#add basic resources to bunker
ship_event = {
	id = kaolon.220
	title = kaolon.220.name
	desc = kaolon.220.desc
	picture = GFX_evt_landing_ship
	show_sound = event_radio_chatter_02
	is_triggered_only = yes
	location = FROMFROM
	option = {
		name = kaolon.220.a
		FROMFROM = {
			add_deposit = d_bunker_basic
				enable_special_project = {
				name = "BASIC_FACTORY"
				location = this
				owner = root.owner
			}
		}
	}
}

#add secondary resources to bunker
ship_event = {
	id = kaolon.221
	title = kaolon.220.name
	desc = kaolon.220.desc
	picture = GFX_evt_landing_ship
	show_sound = event_radio_chatter_02
	is_triggered_only = yes
	location = FROMFROM
	option = {
		name = kaolon.220.a
		FROMFROM={
			add_deposit = d_bunker_secondary
			enable_special_project = {
				name = "SECONDARY_FACTORY"
				location = this
				owner = root.owner
			}
		}
	}
}

#add science and unity to bunker
ship_event = {
	id = kaolon.222
	title = kaolon.220.name
	desc = kaolon.220.desc
	picture = GFX_evt_landing_ship
	show_sound = event_radio_chatter_02
	is_triggered_only = yes
	location = FROMFROM
	option = {
		name = kaolon.220.a
		FROMFROM = {
			add_deposit = d_bunker_science_unity
			enable_special_project = {
				name = "LAB_TEMPLE"
				location = this
				owner = root.owner
			}
	}
	}
}

#transfer frozen elites to bunker
ship_event = {
	id = kaolon.223
	title = kaolon.223.name
	desc = kaolon.223.desc
	picture = GFX_evt_landing_ship
	show_sound = event_radio_chatter_02
	is_triggered_only = yes
	location = FROMFROM
	option = {
		name = kaolon.223.a
		FROMFROM = {
			add_deposit = d_bunker_frozen_fetus
			enable_special_project = {
				name = "GROWTH_FACILITY"
				location = this
				owner = root.owner
			}
		}
	}
}



#add basic factory to bunker
ship_event = {
	id = kaolon.225
	title = kaolon.225.name
	desc = kaolon.225.desc
	picture = GFX_evt_landing_ship
	show_sound = event_radio_chatter_02
	is_triggered_only = yes
	location = FROMFROM
	option = {
		name = kaolon.225.a
		FROMFROM = {
			add_deposit = d_bunker_basic_factory
		}
	}
}

#add secondary factory to bunker
ship_event = {
	id = kaolon.226
	title = kaolon.225.name
	desc = kaolon.225.desc
	picture = GFX_evt_landing_ship
	show_sound = event_radio_chatter_02
	is_triggered_only = yes
	location = FROMFROM
	option = {
		name = kaolon.225.a
		FROMFROM = {
			add_deposit = d_bunker_secondary_factory
		}
	}
}

#add lab and temple to bunker
ship_event = {
	id = kaolon.227
	title = kaolon.225.name
	desc = kaolon.225.desc
	picture = GFX_evt_landing_ship
	show_sound = event_radio_chatter_02
	is_triggered_only = yes
	location = FROMFROM
	option = {
		name = kaolon.225.a
		FROMFROM = {
			add_deposit = d_bunker_lab_temple
		}
	}
}

#transfer growth facility to bunker
ship_event = {
	id = kaolon.228
	title = kaolon.225.name
	desc = kaolon.225.desc
	picture = GFX_evt_landing_ship
	show_sound = event_radio_chatter_02
	is_triggered_only = yes
	location = FROMFROM
	option = {
		name = kaolon.225.a
		FROMFROM = {
			add_deposit = d_bunker_growth_facility
		 }
	}
}



#Psi Overload
country_event = {
	id = kaolon.230
	title = kaolon.230.name
	desc = kaolon.230.desc
	picture = GFX_evt_physics_research
	show_sound = event_activating_unknown_technology
	trigger = {
		has_country_flag = evacuation_started
		NOT = {has_country_flag = psi_overload}
	}
	immediate = {
		set_country_flag = psi_overload
	}
	mean_time_to_happen = {
		months = 1
	}
	option = {
		name = kaolon.230.a
		capital_scope = {
			enable_special_project = {
				name = "PSI_OVEERLOAD"
				location = this
				owner = root
			}
		}
	}
}

#It's done, we escaped!
country_event = {
	id = kaolon.231
	title = kaolon.231.name
	desc = kaolon.231.desc
	picture = GFX_evt_metropolis
	show_sound = event_celebration
	is_triggered_only = yes
	immediate = {
		set_country_flag = evacation_finished
		set_country_flag = kaolon_banishment
		clear_resources = yes
		every_planet = {
			limit = {
				has_modifier = kaolon_bunker
				has_planet_flag = bunker_activated
			}
			remove_modifier = kaolon_bunker
			create_colony = {
				owner = root
				species = owner_main_species
				ethos = owner
			}		
			set_name = random
			while = {
				limit = { 
					num_pops < 5
				}
				create_pop = {
					species = owner
				}
			}
		}					
		every_owned_fleet = { 
			destroy_fleet = this 
		}		
		every_planet = {
			limit = { has_modifier = marked_by_kaolon }
			remove_modifier = marked_by_kaolon
			remove_all_armies = yes
			if = {
				limit = { 
					is_planet_class = pc_habitat 
				}
				destroy_colony = yes
				remove_planet = yes						
			}
			else_if = {
				limit = {
					is_planet_class = pc_ringworld_habitable
				}
				change_pc = pc_ringworld_habitable_damaged
				clear_planet_modifiers = yes
				clear_deposits = yes				
			}
			else = {
				change_pc = pc_shrouded
				clear_planet_modifiers = yes
				clear_deposits = yes
			}
		}	
	}
	option = {
		name = kaolon.231.a
		remove_modifier = "kaolon_madness_2"
		remove_modifier = "doomed_future"
		remove_modifier = "kaolon_madness"
		remove_modifier = "government_abandon_us"
		end_event_chain = escape_from_kaolon
		end_event_chain = escape_from_kaolon_weaver
	}
}

#Kaolon appears
country_event = {
	id = kaolon.232
	title = kaolon.232.name
	desc = kaolon.232.desc
	diplomatic = yes
	force_open = yes
	
	picture_event_data = {
		portrait = shroud1
		room = shroud_room
	}
	trigger = {
		has_country_flag = evacation_finished
	}
	fire_only_once = yes
	mean_time_to_happen = {
		months = 2
	}
	
	option = {
		name = kaolon.232.a
		is_dialog_only = yes
		response_text = kaolon.232.a.response
	}
	option = {
		name = kaolon.232.b
		is_dialog_only = yes
		response_text = kaolon.232.b.response
	}
	option = {
		name = kaolon.232.c
		is_dialog_only = yes
		response_text = kaolon.232.c.response
	}
	option = {
		name = kaolon.232.f
		is_dialog_only = yes
		response_text = kaolon.232.f.response
	}
	option = {
		name = kaolon.232.d
		custom_tooltip = kaolon.232.d.tooltip
		hidden_effect = {
			country_event = {id = kaolon.112}
			capital_scope = {
				create_fleet = {
					name = "Gift From Great Old One"
					settings = { 
						can_upgrade = no 
						can_change_composition = no 
						spawn_debris = no
					}			
					effect = {
						set_owner = from
						create_ship = {
							name = "Kaolon's Gift"
							design = "NAME_Omega"
							prefix = no
							upgradable = no
						}
						set_location = {
							target = fromfrom
							distance = 0
							angle = 0
						}
					}
				}
				create_fleet = {
					name = "Gift From Great Old One"
					settings = { 
						can_upgrade = no 
						can_change_composition = no 
						spawn_debris = no
					}			
					effect = {
						set_owner = from
						create_ship = {
							name = "Kaolon's Gift"
							design = "NAME_Omega"
							prefix = no
							upgradable = no
						}
						set_location = {
							target = fromfrom
							distance = 0
							angle = 0
						}
					}
				}
				create_fleet = {
					name = "Gift From Great Old One"
					settings = { 
						can_upgrade = no 
						can_change_composition = no 
						spawn_debris = no
					}			
					effect = {
						set_owner = from
						create_ship = {
							name = "Kaolon's Gift"
							design = "NAME_Omega"
							prefix = no
							upgradable = no
						}
						set_location = {
							target = fromfrom
							distance = 0
							angle = 0
						}
					}
				}
			}
		}
		
	}
	option = {
		name = kaolon.232.e
		hidden_effect = {
			country_event = {id = kaolon.112}
		}
		default_hide_option = yes
	}
}
#Country into Chaos
country_event = {
	id = kaolon.5
	picture = GFX_evt_unspeakable_horror
	show_sound = event_air_raid_siren
	title = kaolon.5.name
	desc = kaolon.5.desc
	trigger = {
		has_country_flag = kaolon_is_here
		NOT = {
			has_country_flag = chaotic_country
		}
	}
	
	mean_time_to_happen = {
		months = 3
	}
	immediate = {
		set_country_flag = chaotic_country
	}
	option = {
		name = kaolon.5.a
		capital_scope = {
			enable_special_project = {
				name = "STOP_MADNESS"
				location = this
				owner = root
			}
		}
		add_modifier = {
			modifier = "kaolon_madness"
			days = -1
		}
		default_hide_option = yes
	}
}

#Saved from Chaos, for a little bit
country_event = {
	id = kaolon.6
	picture = GFX_evt_unspeakable_horror
	show_sound = event_air_raid_siren
	title = kaolon.6.name
	desc = kaolon.6.desc
	is_triggered_only = yes
	option = {
		name = kaolon.6.a
		capital_scope = {
			enable_special_project = {
				name = "IMPROVED_MADNESS"
				location = this
				owner = root
			}
		}
		remove_modifier = "kaolon_madness"
		add_modifier = {
			modifier = "kaolon_madness_2"
			days = -1
		}
		default_hide_option = yes
	}
}

#Saved from Chaos, unlock powerful decision
country_event = {
	id = kaolon.7
	picture = GFX_evt_unspeakable_horror
	show_sound = event_air_raid_siren
	title = kaolon.7.name
	desc = kaolon.7.desc
	is_triggered_only = yes
	option = {
		name = kaolon.7.a
		custom_tooltip = kaolon.7.tooltip
		add_modifier = {
			modifier = "adapt_chaos"
			days = -1
		}
		default_hide_option = yes
	}
}

#feeling desperate and hopeless,start to waste life
country_event = {
	id = kaolon.104
	title = kaolon.104.name
	desc = kaolon.104.desc
	picture = GFX_evt_burning_settlement
	show_sound = event_yellow_alert
	trigger = {
		has_country_flag = chaotic_country
		NOT = {
			has_country_flag = hopeless_nation
		}
	}
	
	mean_time_to_happen = {
		months = 3
	}
	immediate = {
		set_country_flag = hopeless_nation
		add_modifier = {
			modifier = "doomed_future"
			days = -1
		}
	}
	
	option = {
		name = kaolon.104.c
		default_hide_option = yes
	}
	option = {
		name = kaolon.104.a
		allow = {
			resource_stockpile_compare = { resource = minerals value >= 5000}
		}
		add_resource = { minerals = -5000}
		capital_scope = {
			enable_special_project = {
				name = "ARISE_HOPE"
				location = this
				owner = root
			}
		}
		
		
	}
	option = {
		name = kaolon.104.b
		allow = {
			resource_stockpile_compare = { resource = influence value >= 100}
		}
		add_resource = { influence = -100}
		capital_scope = {
			enable_special_project = {
				name = "SATISFY_THEM"
				location = this
				owner = root
			}
		}
	}
}

#Hope being arised
country_event = {
	id = kaolon.105
	title = kaolon.105.name
	desc = kaolon.105.desc
	picture = GFX_evt_metropolis
	show_sound = event_cityscape
	is_triggered_only = yes
	
	option = {
		name = kaolon.105.a
		add_modifier = {
			modifier = "hope_future"
			days = -1
		}
		
	}
}

#Being satisfied
country_event = {
	id = kaolon.106
	title = kaolon.106.name
	desc = kaolon.106.desc
	picture = GFX_evt_metropolis
	show_sound = event_cityscape
	is_triggered_only = yes
	
	option = {
		name = kaolon.106.a
		add_modifier = {
			modifier = "being_satisfied"
			days = -1
		}
	}
}

#roll for more
country_event = {
	id = kaolon.4
	hide_window = yes
	is_triggered_only = yes
	trigger = {
		NOT = {has_country_flag = kaolon_banishment}
	}
	immediate = {
		random_list = {
			10 = { 
				country_event = { id = kaolon.10 }
			}#massive resource
			10 = { 
				country_event = { id = kaolon.11 }
			}#massive resource
			10 = { 
				country_event = { id = kaolon.12 }
			}#massive resource
			10 = { 
				country_event = { id = kaolon.13 }
			}#massive resource
			10 = { 
				country_event = { id = kaolon.14 }
			}#massive resource
			10 = { 
				country_event = { id = kaolon.15 }
			}#massive resource
			10 = {
				country_event = { id = kaolon.20 }
			}#massive influence
			10 = {
				country_event = { id = kaolon.30 }
			}#all your leaders
			10 = {
				country_event = { id = kaolon.40 }
			}#10 random pops
			10 = {
				country_event = { id = kaolon.41 }
			}#5 random pop
			10 = {
				country_event = { id = kaolon.42 }
			}#20 random pops
			10 = {
				country_event = { id = kaolon.43 }
			}#15 random pops
			10 = {
				country_event = { id = kaolon.44 }
			}#a planet
		}
	}
}

country_event = {
	id = kaolon.10
	title = kaolon.10.name
	desc = kaolon.10.desc
	
	diplomatic = yes
	force_open = yes
	
	picture_event_data = {
		portrait = shroud1
		room = shroud_room
	}
	
	is_triggered_only = yes
	
	
	option = {
		name = kaolon.10.a
		is_dialog_only = yes
		response_text = kaolon.10.a.response
	}
	option = {
		name = kaolon.10.b
		is_dialog_only = yes
		response_text = kaolon.10.b.response
	}
	option = {
		name = kaolon.10.c
		is_dialog_only = yes
		response_text = kaolon.10.c.response
	}
	option = {
		name = kaolon.10.d
		owner = {
			add_monthly_resource_mult = {
				resource = minerals
				value = -100000
				min = -1000
				max = -9999
			}
			add_monthly_resource_mult = {
				resource = energy
				value = -100000
				min = -1000
				max = -9999
			}
		}
		hidden_effect = {
			country_event = {id = kaolon.4 days = 1080}
		}
		default_hide_option = yes
	}
}

country_event = {
	id = kaolon.11
	title = kaolon.10.name
	desc = kaolon.10.desc
	diplomatic = yes
	force_open = yes
	picture_event_data = {
		portrait = shroud1
		room = shroud_room
	}
	
	is_triggered_only = yes
	
	
	option = {
		name = kaolon.10.a
		is_dialog_only = yes
		response_text = kaolon.10.a.response
	}
	option = {
		name = kaolon.10.b
		is_dialog_only = yes
		response_text = kaolon.10.b.response
	}
	option = {
		name = kaolon.10.c
		is_dialog_only = yes
		response_text = kaolon.10.c.response
	}
	option = {
		name = kaolon.10.d
		owner = {
			add_monthly_resource_mult = {
				resource = food
				value = -100000
				min = -1000
				max = -9999
			}
		}
		hidden_effect = {
			country_event = {id = kaolon.4 days = 1080}
		}
		default_hide_option = yes
	}
}

country_event = {
	id = kaolon.12
	title = kaolon.10.name
	desc = kaolon.10.desc
	diplomatic = yes
	force_open = yes
	picture_event_data = {
		portrait = shroud1
		room = shroud_room
	}
	
	is_triggered_only = yes
	
	
	option = {
		name = kaolon.10.a
		is_dialog_only = yes
		response_text = kaolon.10.a.response
	}
	option = {
		name = kaolon.10.b
		is_dialog_only = yes
		response_text = kaolon.10.b.response
	}
	option = {
		name = kaolon.10.c
		is_dialog_only = yes
		response_text = kaolon.10.c.response
	}
	option = {
		name = kaolon.10.d
		owner = {
			add_monthly_resource_mult = {
				resource = alloys
				value = -100000
				min = -1000
				max = -9999
			}
		}
		hidden_effect = {
			country_event = {id = kaolon.4 days = 1080}
		}
		default_hide_option = yes
	}
}

country_event = {
	id = kaolon.13
	title = kaolon.10.name
	desc = kaolon.10.desc
	diplomatic = yes
	force_open = yes
	picture_event_data = {
		portrait = shroud1
		room = shroud_room
	}
	
	is_triggered_only = yes
	
	
	option = {
		name = kaolon.10.a
		is_dialog_only = yes
		response_text = kaolon.10.a.response
	}
	option = {
		name = kaolon.10.b
		is_dialog_only = yes
		response_text = kaolon.10.b.response
	}
	option = {
		name = kaolon.10.c
		is_dialog_only = yes
		response_text = kaolon.10.c.response
	}
	option = {
		name = kaolon.10.d
		owner = {
			add_monthly_resource_mult = {
				resource = consumer_goods
				value = -100000
				min = -1000
				max = -9999
			}
		}
		hidden_effect = {
			country_event = {id = kaolon.4 days = 1080}
		}
		default_hide_option = yes
	}
}

country_event = {
	id = kaolon.14
	title = kaolon.10.name
	desc = kaolon.10.desc
	diplomatic = yes
	force_open = yes
	picture_event_data = {
		portrait = shroud1
		room = shroud_room
	}
	
	is_triggered_only = yes
	
	
	option = {
		name = kaolon.10.a
		is_dialog_only = yes
		response_text = kaolon.10.a.response
	}
	option = {
		name = kaolon.10.b
		is_dialog_only = yes
		response_text = kaolon.10.b.response
	}
	option = {
		name = kaolon.10.c
		is_dialog_only = yes
		response_text = kaolon.10.c.response
	}
	option = {
		name = kaolon.10.d
		owner = {
			add_monthly_resource_mult = {
				resource = volatile_motes
				value = -1000
				min = -100
				max = -999
			}
		}
		owner = {
			add_monthly_resource_mult = {
				resource = exotic_gases
				value = -1000
				min = -100
				max = -999
			}
		}
		owner = {
			add_monthly_resource_mult = {
				resource = rare_crystals
				value = -1000
				min = -100
				max = -999
			}
		}
		hidden_effect = {
			country_event = {id = kaolon.4 days = 1080}
		}
		default_hide_option = yes
	}
}

country_event = {
	id = kaolon.15
	title = kaolon.10.name
	desc = kaolon.10.desc
	diplomatic = yes
	force_open = yes
	picture_event_data = {
		portrait = shroud1
		room = shroud_room
	}
	
	is_triggered_only = yes
	

	option = {
		name = kaolon.10.a
		is_dialog_only = yes
		response_text = kaolon.10.a.response
	}
	option = {
		name = kaolon.10.b
		is_dialog_only = yes
		response_text = kaolon.10.b.response
	}
	option = {
		name = kaolon.10.c
		is_dialog_only = yes
		response_text = kaolon.10.c.response
	}
	option = {
		name = kaolon.10.d
		clear_resources = yes
		hidden_effect = {
			country_event = {id = kaolon.4 days = 1080}
		}
		custom_tooltip = "kaolon.15.tooltip"
		default_hide_option = yes
	}
}

country_event = {
	id = kaolon.20
	title = kaolon.10.name
	desc = kaolon.20.desc
	diplomatic = yes
	force_open = yes
	picture_event_data = {
		portrait = shroud1
		room = shroud_room
	}
	
	is_triggered_only = yes
	
	
	option = {
		name = kaolon.10.a
		is_dialog_only = yes
		response_text = kaolon.10.a.response
	}
	option = {
		name = kaolon.10.b
		is_dialog_only = yes
		response_text = kaolon.10.b.response
	}
	option = {
		name = kaolon.10.c
		is_dialog_only = yes
		response_text = kaolon.10.c.response
	}
	option = {
		name = kaolon.10.d
		owner = {
			add_monthly_resource_mult = {
				resource = influence
				value = -1000
				min = -100
				max = -999
			}
		}
		owner = {
			add_monthly_resource_mult = {
				resource = unity
				value = -10000
				min = -1000
				max = -9999
			}
		}
		hidden_effect = {
			country_event = {id = kaolon.4 days = 1080}
		}
		custom_tooltip = "kaolon.20.tooltip"
		default_hide_option = yes
	}
}

country_event = {
	id = kaolon.30
	title = kaolon.10.name
	desc = kaolon.30.desc
	diplomatic = yes
	force_open = yes
	picture_event_data = {
		portrait = shroud1
		room = shroud_room
	}
	
	is_triggered_only = yes
	
	
	option = {
		name = kaolon.10.a
		is_dialog_only = yes
		response_text = kaolon.10.a.response
	}
	option = {
		name = kaolon.10.b
		is_dialog_only = yes
		response_text = kaolon.10.b.response
	}
	option = {
		name = kaolon.10.c
		is_dialog_only = yes
		response_text = kaolon.10.c.response
	}
	option = {
		name = kaolon.10.d
		kill_leader = {
			type = ruler
			show_notification = no
			heir = yes
		}
		kill_leader = {
			type = ruler
			show_notification = no
			heir = no
		}	
		every_owned_leader = {
			kill_leader = { show_notification = no }
		}	
		hidden_effect = {
			country_event = {id = kaolon.4 days = 1080}
		}
		custom_tooltip = "kaolon.30.tooltip"
		default_hide_option = yes
	}
}

country_event = {
	id = kaolon.40
	title = kaolon.10.name
	desc = kaolon.40.desc
	diplomatic = yes
	force_open = yes
	picture_event_data = {
		portrait = shroud1
		room = shroud_room
	}
	
	is_triggered_only = yes
	
	
	option = {
		name = kaolon.10.a
		is_dialog_only = yes
		response_text = kaolon.10.a.response
	}
	option = {
		name = kaolon.10.b
		is_dialog_only = yes
		response_text = kaolon.10.b.response
	}
	option = {
		name = kaolon.10.c
		is_dialog_only = yes
		response_text = kaolon.10.c.response
	}
	option = {
		name = kaolon.10.d
			random_owned_pop = {
				kill_pop = yes
			}
			random_owned_pop = {
				kill_pop = yes
			}	
			random_owned_pop = {
				kill_pop = yes
			}	
			random_owned_pop = {
				kill_pop = yes
			}	
			random_owned_pop = {
				kill_pop = yes
			}				
		hidden_effect = {
			country_event = {id = kaolon.4 days = 1080}
		}
		default_hide_option = yes
	}
}

country_event = {
	id = kaolon.41
	title = kaolon.10.name
	desc = kaolon.40.desc
	diplomatic = yes
	force_open = yes
	picture_event_data = {
		portrait = shroud1
		room = shroud_room
	}
	
	is_triggered_only = yes
	
	
	option = {
		name = kaolon.10.a
		is_dialog_only = yes
		response_text = kaolon.10.a.response
	}
	option = {
		name = kaolon.10.b
		is_dialog_only = yes
		response_text = kaolon.10.b.response
	}
	option = {
		name = kaolon.10.c
		is_dialog_only = yes
		response_text = kaolon.10.c.response
	}
	option = {
		name = kaolon.10.d
			random_owned_pop = {
				kill_pop = yes
			}
			random_owned_pop = {
				kill_pop = yes
			}	
			random_owned_pop = {
				kill_pop = yes
			}	
			random_owned_pop = {
				kill_pop = yes
			}	
			random_owned_pop = {
				kill_pop = yes
			}	
			random_owned_pop = {
				kill_pop = yes
			}
			random_owned_pop = {
				kill_pop = yes
			}	
			random_owned_pop = {
				kill_pop = yes
			}	
			random_owned_pop = {
				kill_pop = yes
			}	
			random_owned_pop = {
				kill_pop = yes
			}				
		hidden_effect = {
			country_event = {id = kaolon.4 days = 1080}
		}
		default_hide_option = yes
	}
}

country_event = {
	id = kaolon.42
	title = kaolon.10.name
	desc = kaolon.40.desc
	diplomatic = yes
	force_open = yes
	picture_event_data = {
		portrait = shroud1
		room = shroud_room
	}
	
	is_triggered_only = yes
	
	
	option = {
		name = kaolon.10.a
		is_dialog_only = yes
		response_text = kaolon.10.a.response
	}
	option = {
		name = kaolon.10.b
		is_dialog_only = yes
		response_text = kaolon.10.b.response
	}
	option = {
		name = kaolon.10.c
		is_dialog_only = yes
		response_text = kaolon.10.c.response
	}
	option = {
		name = kaolon.10.d
			random_owned_pop = {
				kill_pop = yes
			}
			random_owned_pop = {
				kill_pop = yes
			}	
			random_owned_pop = {
				kill_pop = yes
			}	
			random_owned_pop = {
				kill_pop = yes
			}	
			random_owned_pop = {
				kill_pop = yes
			}	
			random_owned_pop = {
				kill_pop = yes
			}
			random_owned_pop = {
				kill_pop = yes
			}	
			random_owned_pop = {
				kill_pop = yes
			}	
			random_owned_pop = {
				kill_pop = yes
			}	
			random_owned_pop = {
				kill_pop = yes
			}	
			random_owned_pop = {
				kill_pop = yes
			}	
			random_owned_pop = {
				kill_pop = yes
			}
			random_owned_pop = {
				kill_pop = yes
			}	
			random_owned_pop = {
				kill_pop = yes
			}	
			random_owned_pop = {
				kill_pop = yes
			}			
		hidden_effect = {
			country_event = {id = kaolon.4 days = 1080}
		}
		default_hide_option = yes
	}
}

country_event = {
	id = kaolon.43
	title = kaolon.10.name
	desc = kaolon.40.desc
	diplomatic = yes
	force_open = yes
	picture_event_data = {
		portrait = shroud1
		room = shroud_room
	}
	
	is_triggered_only = yes
	
	option = {
		name = kaolon.10.a
		is_dialog_only = yes
		response_text = kaolon.10.a.response
	}
	option = {
		name = kaolon.10.b
		is_dialog_only = yes
		response_text = kaolon.10.b.response
	}
	option = {
		name = kaolon.10.c
		is_dialog_only = yes
		response_text = kaolon.10.c.response
	}
	option = {
		name = kaolon.10.d
			random_owned_pop = {
				kill_pop = yes
			}
			random_owned_pop = {
				kill_pop = yes
			}	
			random_owned_pop = {
				kill_pop = yes
			}	
			random_owned_pop = {
				kill_pop = yes
			}	
			random_owned_pop = {
				kill_pop = yes
			}	
			random_owned_pop = {
				kill_pop = yes
			}
			random_owned_pop = {
				kill_pop = yes
			}	
			random_owned_pop = {
				kill_pop = yes
			}	
			random_owned_pop = {
				kill_pop = yes
			}	
			random_owned_pop = {
				kill_pop = yes
			}	
			random_owned_pop = {
				kill_pop = yes
			}	
			random_owned_pop = {
				kill_pop = yes
			}
			random_owned_pop = {
				kill_pop = yes
			}	
			random_owned_pop = {
				kill_pop = yes
			}	
			random_owned_pop = {
				kill_pop = yes
			}	
			random_owned_pop = {
				kill_pop = yes
			}	
			random_owned_pop = {
				kill_pop = yes
			}
			random_owned_pop = {
				kill_pop = yes
			}	
			random_owned_pop = {
				kill_pop = yes
			}	
			random_owned_pop = {
				kill_pop = yes
			}
		hidden_effect = {
			country_event = {id = kaolon.4 days = 1080}
		}
		default_hide_option = yes
	}
}

country_event = {
	id = kaolon.44
	title = kaolon.10.name
	desc = kaolon.44.desc
	diplomatic = yes
	force_open = yes
	picture_event_data = {
		portrait = shroud1
		room = shroud_room
	}
	
	is_triggered_only = yes
	
	option = {
		name = kaolon.10.a
		is_dialog_only = yes
		response_text = kaolon.10.a.response
	}
	option = {
		name = kaolon.10.b
		is_dialog_only = yes
		response_text = kaolon.10.b.response
	}
	option = {
		name = kaolon.10.c
		is_dialog_only = yes
		response_text = kaolon.10.c.response
	}
	option = {
		name = kaolon.10.d
			random_owned_planet = {
			limit = {
				is_capital = no
			}
			if = {
				limit = { 
					is_planet_class = pc_habitat 
				}
				destroy_colony = yes
				remove_planet = yes						
			}
			else_if = {
				limit = {
					is_planet_class = pc_ringworld_habitable
				}
				change_pc = pc_ringworld_habitable_damaged
				clear_planet_modifiers = yes
				clear_deposits = yes				
			}
			else = {
				change_pc = pc_shrouded
				clear_planet_modifiers = yes
				clear_deposits = yes
			} 
					
			}
		hidden_effect = {
			country_event = {id = kaolon.4 days = 1080}
		}
		custom_tooltip = "kaolon.44.tooltip"
		default_hide_option = yes
	}
}



#national focus on society research, reseach speed
country_event = {
	id = kaolon.102
	title = kaolon.102.name
	desc = kaolon.102.desc
	picture = GFX_evt_metropolis
	show_sound = event_air_raid_siren
	is_triggered_only = yes
	
	
	option = {
		name = kaolon.102.a
		allow = {
			resource_stockpile_compare = { resource = alloys value >= 1000}
		}
		add_resource = { alloys = -1000 }
		add_modifier = {
			modifier = "all_research"
			days = -1
		}
		
	}
	option = {
		name = kaolon.102.b
		default_hide_option = yes
	}
	
}

#donation from private institution, society points
country_event = {
	id = kaolon.103
	title = kaolon.103.name
	desc = kaolon.103.desc
	picture = GFX_evt_physics_research
	show_sound = event_cityscape
	is_triggered_only = yes
	
	
	option = {
		name = kaolon.103.a
		add_monthly_resource_mult = {
				resource = society_research
				value = 20000
				min = 1000
				max = 19999
		}
		add_resource = { unity = -5000 }
		default_hide_option = yes
	}
}





#educational reform, researcher with more bonus
country_event = {
	id = kaolon.107
	title = kaolon.107.name
	desc = kaolon.107.desc
	picture = GFX_evt_physics_research
	show_sound = event_cityscape
	is_triggered_only = yes
	
	
	option = {
		name = kaolon.107.a
		add_modifier = {
			modifier = "researcher_focus"
			days = -1
		}
		
	}
}

#Terrorist Appear, Attack every Colony
country_event = {
	id = kaolon.108
	title = kaolon.108.name
	desc = kaolon.108.desc
	picture = GFX_evt_unspeakable_horror
	show_sound = event_air_raid_siren
	is_triggered_only = yes
	
	
	option = {
		name = kaolon.108.a
		hidden_effect = {
			every_owned_planet = {
				create_country = {
					name = "Crazy Cultist"
					type = faction
				}
				create_species = {
					name = "Kaolon's Puppet"
					class = random
					portrait = random
					traits = random
				}
				create_army = {
					name = "Cultist Warden"
					owner = last_created
					species = last_created
					type = "tree_army"
				}
				create_army = {
					name = "Cultist Warden"
					owner = last_created
					species = last_created
					type = "tree_army"
				}
				create_army = {
					name = "Cultist Warden"
					owner = last_created
					species = last_created
					type = "tree_army"
				}
				create_army = {
					name = "Cultist Warden"
					owner = last_created
					species = last_created
					type = "tree_army"
				}
				create_army = {
					name = "Cultist Warden"
					owner = last_created
					species = last_created
					type = "tree_army"
				}
				create_army = {
					name = "Cultist Warden"
					owner = last_created
					species = last_created
					type = "tree_army"
				}
				create_army = {
					name = "Cultist Warden"
					owner = last_created
					species = last_created
					type = "tree_army"
				}
				create_army = {
					name = "Cultist Warden"
					owner = last_created
					species = last_created
					type = "tree_army"
				}
			}
		}
	}
}

#United as One, for the final blow
country_event = {
	id = kaolon.109
	title = kaolon.109.name
	desc = kaolon.109.desc
	picture = GFX_evt_arguing_senate
	show_sound = event_alien_nature
	is_triggered_only = yes
	
	
	option = {
		name = kaolon.109.a
		add_modifier = {
			modifier = "united_we_stand"
			days = -1
		}
		add_resource = {
			unity = 5000
			influence = 100
		}
	}
	
}

#get result
country_event = {
	id = kaolon.110
	title = kaolon.110.name
	desc = kaolon.110.desc
	picture = GFX_evt_black_hole
	show_sound = event_activating_unknown_technology
	is_triggered_only = yes
	
	
	option = {
		name = kaolon.110.a
		add_research_option = tech_banish_kaolon
	}
	
}

country_event = {
	id = kaolon.200
	title = kaolon.200.name
	desc = kaolon.200.desc
	picture = GFX_evt_dimensional_horror
	show_sound = event_ship_bridge
	location = root
	trackable = yes

	is_triggered_only = yes


	option = {
		name = kaolon.200.b
		capital_scope = {
			enable_special_project = {
				name = BANISH_KAOLON
				location = this
				owner = root.owner
			}
		}
	}
}

#Kaolon is banished
country_event = {
	id = kaolon.310
	title = kaolon.310.name
	desc = kaolon.310.desc
	picture = GFX_evt_news_room
	show_sound = event_celebration
	is_triggered_only = yes
	                         
	
	option = {
		name = kaolon.210.a
		remove_modifier = "kaolon_madness_2"
		remove_modifier = "doomed_future"
		remove_modifier = "kaolon_madness"
		remove_modifier = "unhappy_ruler"
		add_modifier = {
			modifier = "Nirvana_From_Apocalypse"
			days = -1
		}
		set_country_flag = kaolon_banishment
		custom_tooltip = kaolon.310.tooltip
	}
	
}

#It's all just for fun
country_event = {
	id = kaolon.111
	title = kaolon.111.name
	desc = kaolon.111.desc
	diplomatic = yes
	force_open = yes
	
	picture_event_data = {
		portrait = shroud1
		room = shroud_room
	}
	trigger = {
		has_country_flag = kaolon_banishment
	}
	fire_only_once = yes
	mean_time_to_happen = {
		months = 2
	}
	
	option = {
		name = kaolon.111.a
		is_dialog_only = yes
		response_text = kaolon.111.a.response
	}
	option = {
		name = kaolon.111.b
		is_dialog_only = yes
		response_text = kaolon.111.b.response
	}
	option = {
		name = kaolon.111.c
		is_dialog_only = yes
		response_text = kaolon.111.c.response
	}
	option = {
		name = kaolon.111.f
		is_dialog_only = yes
		response_text = kaolon.111.f.response
	}
	option = {
		name = kaolon.111.d
		custom_tooltip = kaolon.111.tooltip
		hidden_effect = {
			country_event = {id = kaolon.112}
			capital_scope = {
				create_fleet = {
					name = "Great Old One"
					settings = { 
						can_upgrade = no 
						can_change_composition = no 
						spawn_debris = no
					}			
					effect = {
						set_owner = from
						create_ship = {
							name = "Kaolon's Gift"
							design = "NAME_Omega"
							prefix = no
							upgradable = no
						}
						set_location = {
							target = fromfrom
							distance = 0
							angle = 0
						}
					}
				}
			}
		}
		
	}
	option = {
		name = kaolon.111.e
		hidden_effect = {
			country_event = {id = kaolon.112}
		}
		default_hide_option = yes
	}
	
}

country_event = {
	id = kaolon.112
	title = kaolon.111.name
	desc = kaolon.112.desc
	diplomatic = yes
	force_open = yes
	
	picture_event_data = {
		portrait = shroud1
		room = shroud_room
	}
	is_triggered_only = yes
	option = {
		name = kaolon.112.a
		hidden_effect = {
			country_event = {id = kaolon.113}
		}
		default_hide_option = yes
	}
}

country_event = {
	id = kaolon.113
	title = kaolon.113.name
	desc = {
		text = kaolon.113.desc
		trigger = {NOT = {has_country_flag = evacation_finished}}
	}
	desc = {
		text = kaolon.113.escape.desc
		trigger = {has_country_flag = evacation_finished}
	}
	picture = GFX_evt_metropolis
	show_sound = event_yellow_alert
	is_triggered_only = yes
	option = {
		name = kaolon.113.a
		owner = { end_event_chain = decaydance_of_sanity_kaolon }
		default_hide_option = yes
	}
}





