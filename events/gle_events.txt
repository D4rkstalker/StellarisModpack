namespace = gle

#STOLEN FROM LEADER_EVENT_1 to let governor can gain trait even they have tons of them
country_event = {
	id = gle.1
	hide_window = yes
	is_triggered_only = yes

	immediate = {
		from = {
			if = {
				limit = {
					leader_class = governor
					num_traits < 10
					NOT = { has_leader_flag = has_gained_level_trait }
				}
				random_list = {
					80 = { }
					20 = {
						modifier = {
							factor = 1.5
							has_level = 3
						}
						modifier = {
							factor = 2.5
							has_level = 4
						}						
						modifier = {
							factor = 5
							has_level > 4
						}
						add_random_leader_trait = yes
						set_leader_flag = has_gained_level_trait
					}
				}
			}
		}
	}
}

event = {
	id = gle.10000
	hide_window = yes
	is_triggered_only = yes
	immediate = {
		every_playable_country = {
			save_event_target_as = gle_country
			every_owned_leader = {
				limit = {
					leader_class = governor
					NOT = {
						has_leader_flag = gle_leader
					}
				}
				set_leader_flag = gle_leader
				if = {
					limit = {
						NOT = {
							has_leader_flag = gle_gained_jobs_trait
						}
						NOT = {
							has_trait = leader_trait_governor_gray
						}
					}
					set_leader_flag = gle_gained_jobs_trait
					if = {
						limit = {
							event_target:gle_country = {
								has_ethic = ethic_gestalt_consciousness
							}
						}
						effect_gle_add_gestalt_trait_gamestart = yes
						set_leader_flag = gle_jobs_trait_gestalt
					}
					else = {
						effect_gle_add_base_trait_gamestart = yes
						set_leader_flag = gle_jobs_trait_organic
					}
				}
				if = {
					limit = {
						NOR = {
							has_trait = gle_trait_ruler_tier_locked
							has_trait = gle_trait_ruler_tier_locked_gestalt
						}
					}
					if = {
						limit = {
							event_target:gle_country = {
								has_ethic = ethic_gestalt_consciousness
							}
						}
						add_trait = gle_trait_ruler_tier_locked_gestalt
					}
					else = {
						add_trait = gle_trait_ruler_tier_locked
					}
				}
			}
		}
	}
}

####GIVE BASE TRAIT###
country_event = {
	id = gle.2
	hide_window = yes
	
	trigger = {
		OR = {
			any_owned_leader = {
				leader_class = governor
				NOT = {
					has_leader_flag = gle_leader
				}
			}
			any_pool_leader = {
				leader_class = governor
				NOT = {
					has_leader_flag = gle_leader
				}
			}
		}
		NOT = {
			has_country_flag = gle_leader_trait_add_cooldown
		}
	}
	
	mean_time_to_happen = {
		days = 3
	}
	
	immediate = {
		set_timed_country_flag = { flag = gle_leader_trait_add_cooldown days = 5 }
		random_owned_leader = {
			limit = {
				leader_class = governor
				NOT = {
					has_leader_flag = gle_leader
				}
			}
			set_leader_flag = gle_leader
			if = {
				limit = {
					NOT = {
						has_leader_flag = gle_gained_jobs_trait
					}
					NOT = {

						has_trait = leader_trait_governor_gray
					}
				}
				set_leader_flag = gle_gained_jobs_trait
				if = {
					limit = {
						root = {
							has_ethic = ethic_gestalt_consciousness
						}
					}
					effect_gle_add_gestalt_trait = yes
				}
				else = {
					effect_gle_add_base_trait = yes
				}
			}
			if = {
				limit = {
					NOT = {
						has_trait = leader_trait_governor_gray
					}
					NOR = {
						has_trait = gle_trait_ruler_tier_locked
						has_trait = gle_trait_ruler_tier_locked_gestalt
					}
				}
				if = {
					limit = {
						prev = {
							has_ethic = ethic_gestalt_consciousness
						}
					}
					add_trait = gle_trait_ruler_tier_locked_gestalt
				}
				else = {
					add_trait = gle_trait_ruler_tier_locked
				}
			}
			if = {
				limit = {
					has_trait = leader_trait_governor_gray
					NOR = {
						has_trait = gle_trait_gray
						has_trait = gle_trait_gray_gestalt
					}
				}
				if = {
					limit = {
						NOR = {
							has_trait = gle_trait_ruler_tier_locked_gray
							has_trait = gle_trait_ruler_tier_locked_gray_gestalt
						}
					}
					set_leader_flag = gle_gained_jobs_trait
					if = {
						limit = {
							prev = {
								has_ethic = ethic_gestalt_consciousness
							}
						}
						add_trait = gle_trait_gray_gestalt
						add_trait = gle_trait_ruler_tier_locked_gray_gestalt
					}
					else = {
						add_trait = gle_trait_gray
						add_trait = gle_trait_ruler_tier_locked_gray
					}
				}
			}
		}
		
		random_pool_leader = {
			limit = {
				leader_class = governor
				NOT = {
					has_leader_flag = gle_gained_jobs_trait
				}
				NOT = {
					has_trait = leader_trait_governor_gray
				}
			}
#			set_timed_leader_flag = { flag = gle_gained_jobs_trait days = 720 }
			set_leader_flag = gle_gained_jobs_trait
			if = {
				limit = {
					root = {
						has_ethic = ethic_gestalt_consciousness
					}
				}
				effect_gle_add_gestalt_trait = yes
			}
			else = {
				effect_gle_add_base_trait = yes
			}
		}
	}
}

###LEVEL UP THEIR BASE JOB TRAITS WHEN REACHED SKILL 3###
country_event = {
	id = gle.4
	hide_window = yes
	
	trigger = {
		OR = {
			any_pool_leader = {
				leader_class = governor
				has_leader_flag = gle_leader
				has_leader_flag = gle_gained_jobs_trait
				NOR = {
					has_leader_flag = gle_gained_jobs_trait_lv2
					has_leader_flag = gle_gained_jobs_trait_lv3
				}
				has_skill > 2
			}
			any_owned_leader = {
				leader_class = governor
				has_leader_flag = gle_leader
				has_leader_flag = gle_gained_jobs_trait
				NOR = {
					has_leader_flag = gle_gained_jobs_trait_lv2
					has_leader_flag = gle_gained_jobs_trait_lv3
				}
				has_skill > 2
			}
		}
	}
	
	mean_time_to_happen = {
		days = 15
	}
	
	immediate = {
		random_owned_leader = {
			limit = {
				leader_class = governor
				has_leader_flag = gle_leader
				has_leader_flag = gle_gained_jobs_trait
				NOR = {
					has_leader_flag = gle_gained_jobs_trait_lv2
					has_leader_flag = gle_gained_jobs_trait_lv3
				}
				has_skill > 2
			}
			set_leader_flag = gle_gained_jobs_trait_lv2
			effect_gle_lv1_to_lv2 = yes
			effect_gle_lv1_to_lv2_gestalt = yes
		}
		random_pool_leader = {
			limit = {
				leader_class = governor
				has_leader_flag = gle_leader
				has_leader_flag = gle_gained_jobs_trait
				NOR = {
					has_leader_flag = gle_gained_jobs_trait_lv2
					has_leader_flag = gle_gained_jobs_trait_lv3
				}
				has_skill > 2
			}
			set_leader_flag = gle_gained_jobs_trait_lv2
			effect_gle_lv1_to_lv2 = yes
			effect_gle_lv1_to_lv2_gestalt = yes
		}
	}
	
}

###MAXED UP THEIR BASE JOB TRAITS WHEN REACHED SKILL 8###
country_event = {
	id = gle.5
	hide_window = yes
	
	trigger = {
		OR = {
			any_pool_leader = {
				leader_class = governor
				has_leader_flag = gle_leader
				has_leader_flag = gle_gained_jobs_trait
				has_leader_flag = gle_gained_jobs_trait_lv2
				NOT = {
					has_leader_flag = gle_gained_jobs_trait_lv3
				}
				has_skill > 7
			}
			any_owned_leader = {
				leader_class = governor
				has_leader_flag = gle_leader
				has_leader_flag = gle_gained_jobs_trait
				has_leader_flag = gle_gained_jobs_trait_lv2
				NOT = {
					has_leader_flag = gle_gained_jobs_trait_lv3
				}
				has_skill > 7
			}
		}
	}
	
	mean_time_to_happen = {
		days = 15
	}
	
	immediate = {
		random_owned_leader = {
			limit = {
				leader_class = governor
				has_leader_flag = gle_leader
				has_leader_flag = gle_gained_jobs_trait
				has_leader_flag = gle_gained_jobs_trait_lv2
				NOT = {
					has_leader_flag = gle_gained_jobs_trait_lv3
				}
				has_skill > 7
			}
			set_leader_flag = gle_gained_jobs_trait_lv3
			effect_gle_lv2_to_lv3 = yes
			effect_gle_lv2_to_lv3_gestalt = yes
		}
		random_pool_leader = {
			limit = {
				leader_class = governor
				has_leader_flag = gle_leader
				has_leader_flag = gle_gained_jobs_trait
				has_leader_flag = gle_gained_jobs_trait_lv2
				NOT = {
					has_leader_flag = gle_gained_jobs_trait_lv3
				}
				has_skill > 7
			}
			set_leader_flag = gle_gained_jobs_trait_lv3
			effect_gle_lv2_to_lv3 = yes
			effect_gle_lv2_to_lv3_gestalt = yes
		}
	}
	
}
###GIVE SECOND WHEN REACHED SKILL 5###
country_event = {
	id = gle.6
	hide_window = yes
	
	trigger = {
		OR = {
			any_pool_leader = {
				leader_class = governor
				has_leader_flag = gle_leader
				OR = {
					has_trait = gle_trait_ruler_tier_locked
					has_trait = gle_trait_ruler_tier_locked_gestalt
				}
				NOT = {
					has_leader_flag = gle_gained_jobs_trait_ruler_tier
					has_trait = leader_trait_governor_gray
				}
				has_skill > 4
			}
			any_owned_leader = {
				leader_class = governor
				has_leader_flag = gle_leader
				OR = {
					has_trait = gle_trait_ruler_tier_locked
					has_trait = gle_trait_ruler_tier_locked_gestalt
				}
				NOT = {
					has_leader_flag = gle_gained_jobs_trait_ruler_tier
					has_trait = leader_trait_governor_gray
				}
				has_skill > 4
			}
		}
	}
	
	mean_time_to_happen = {
		days = 15
	}
	
	immediate = {
		random_owned_leader = {
			limit = {
				leader_class = governor
				has_leader_flag = gle_leader
				OR = {
					has_trait = gle_trait_ruler_tier_locked
					has_trait = gle_trait_ruler_tier_locked_gestalt
				}
				NOT = {
					has_leader_flag = gle_gained_jobs_trait_ruler_tier
				}
				NOT = {
					has_trait = leader_trait_governor_gray
				}
				has_skill > 4
			}
			set_leader_flag = gle_gained_jobs_trait_ruler_tier
			remove_trait = gle_trait_ruler_tier_locked
			remove_trait = gle_trait_ruler_tier_locked_gestalt
			effect_gle_add_ruler_tier_trait = yes
			effect_gle_add_gestalt_ruler_tier_trait = yes
		}
		random_pool_leader = {
			limit = {
				leader_class = governor
				has_leader_flag = gle_leader
				OR = {
					has_trait = gle_trait_ruler_tier_locked
					has_trait = gle_trait_ruler_tier_locked_gestalt
				}
				NOT = {
					has_leader_flag = gle_gained_jobs_trait_ruler_tier
				}
				NOT = {
					has_trait = leader_trait_governor_gray
				}
				has_skill > 4
			}
			set_leader_flag = gle_gained_jobs_trait_ruler_tier
			remove_trait = gle_trait_ruler_tier_locked
			remove_trait = gle_trait_ruler_tier_locked_gestalt
			effect_gle_add_ruler_tier_trait = yes
			effect_gle_add_gestalt_ruler_tier_trait = yes
		}
	}
	
}

###REFRESH###
country_event = {
	id = gle.7
	hide_window = yes
	
	trigger = {
		NOT = {
			has_country_flag = gle_refreshed_trait_cooldown
		}
		any_owned_leader = {
			leader_class = governor
			has_leader_flag = gle_leader
			NOT = {
				has_leader_flag = gle_refreshed_trait
			}
		}
	}
	
	mean_time_to_happen = {
		days = 5
	}
	
	immediate = {
		set_timed_country_flag = { flag = gle_refreshed_trait_cooldown days = 15 }
		random_owned_leader = {
			limit = {
				leader_class = governor
				has_leader_flag = gle_leader
				NOT = {
					has_leader_flag = gle_refreshed_trait
				}
			}
			set_timed_leader_flag = { flag = gle_refreshed_trait days = 1080 }
			effect_gle_refresh_ruler_tier_trait = yes
			effect_gle_refresh_trait = yes
		}
	}
	
}


####INCREASE MOTION EVERY MONTH UNTIL IT REACHED ABOVE 999####
event = {
	id = gle.10
	hide_window = yes
	is_triggered_only = yes
	
	trigger = {
		
	}
	
	immediate = {
        if = {
            limit = {
                NOT = {
                    has_global_flag = gle_started
                }
            }
            set_global_flag = gle_started
        }
        every_playable_country = {
            every_owned_planet = {
                limit = {
                    exists = sector
                    sector = {
                        exists = leader
                    }
                }
                if = {
					limit = {
						planet_crime < 1
					}
                    sector = {
                        leader = {
                            add_experience = 0.25
                        }
                    }
				}
				if = {
					limit = {
						happiness_planet > 74
						happiness_planet < 80
					}
                    sector = {
                        leader = {
                            add_experience = 0.25
                        }
                    }
				}
				if = {
					limit = {
						happiness_planet > 79
						happiness_planet < 90
					}
					sector = {
                        leader = {
                            add_experience = 0.5
                        }
                    }
				}
				if = {
					limit = {
						happiness_planet > 89
					}
					sector = {
                        leader = {
                            add_experience = 1
                        }
                    }
				}
                if = {
					limit = {
						planet_stability > 59
                        planet_stability < 65
					}
					sector = {
                        leader = {
                            add_experience = 0.25
                        }
                    }
				}
                if = {
					limit = {
						planet_stability > 64
                        planet_stability < 70
					}
					sector = {
                        leader = {
                            add_experience = 0.5
                        }
                    }
				}
                if = {
					limit = {
						planet_stability > 69
                        planet_stability < 80
					}
					sector = {
                        leader = {
                            add_experience = 0.75
                        }
                    }
				}
                if = {
					limit = {
						planet_stability > 79
                        planet_stability < 90
					}
					sector = {
                        leader = {
                            add_experience = 1
                        }
                    }
				}
                if = {
					limit = {
						planet_stability > 89
					}
					sector = {
                        leader = {
                            add_experience = 1.5
                        }
                    }
				}
            }
        }
	}
}
###For unoffical synthetic dawn DLC
country_event = {
	id = gle.11
	hide_window = yes
	trigger = {
		OR = {
			AND = {
				OR = {
					has_authority = auth_ancient_machine_intelligence
					has_authority = auth_machine_intelligence
				}
				any_owned_leader = {
					leader_class = governor
					has_leader_flag = gle_jobs_trait_organic
				}
			}
			AND = {
				NOR = {
					has_authority = auth_ancient_machine_intelligence
					has_authority = auth_machine_intelligence
					has_authority = auth_hive_mind
				}
				any_owned_leader = {
					leader_class = governor
					has_leader_flag = gle_jobs_trait_gestalt
				}
			}
		}
	}
	mean_time_to_happen = {
		days = 30
	}
	immediate = {
		if = {
			limit = {
				OR = {
					has_authority = auth_ancient_machine_intelligence
					has_authority = auth_machine_intelligence
				}
				any_owned_leader = {
					leader_class = governor
					has_leader_flag = gle_jobs_trait_organic
				}
			}
			every_owned_leader = {
				limit = {
					leader_class = governor
					has_leader_flag = gle_jobs_trait_organic
				}
				effect_gle_swap_synth_to_machine_trait = yes
				effect_gle_synth_to_machine_ruler_tier_trait = yes
				remove_leader_flag = gle_jobs_trait_organic
				set_leader_flag = gle_jobs_trait_gestalt
			}
		}
		if = {
			limit = {
				AND = {
					NOR = {
						has_authority = auth_ancient_machine_intelligence
						has_authority = auth_machine_intelligence
					}
					any_owned_leader = {
						leader_class = governor
						has_leader_flag = gle_jobs_trait_gestalt
					}
				}
			}
			every_owned_leader = {
				limit = {
					leader_class = governor
					has_leader_flag = gle_jobs_trait_gestalt
				}
				effect_gle_swap_machine_to_synth_trait = yes
				effect_gle_machine_to_synth_ruler_tier_trait = yes
				remove_leader_flag = gle_jobs_trait_gestalt
				set_leader_flag = gle_jobs_trait_organic
			}
		}
	}
}

country_event = {
	id = gle.12
	hide_window = yes
	trigger = {
		any_owned_leader = {
			leader_class = governor
			NOR = {
				has_leader_flag = gle_jobs_trait_organic
				has_leader_flag = gle_jobs_trait_gestalt
			}
		}
	}
	mean_time_to_happen = {
		days = 30
	}
	immediate = {
		every_owned_leader = {
			limit = {
				leader_class = governor
				NOT = {
					has_leader_flag = gle_jobs_trait_organic
				}
				NOT = {
					has_leader_flag = gle_jobs_trait_gestalt
				}
			}
			if = {
				limit = {
					root = {
						OR = {
							has_authority = auth_ancient_machine_intelligence
							has_authority = auth_machine_intelligence
						}
					}
				}
				set_leader_flag = gle_jobs_trait_gestalt
			}
			if = {
				limit = {
					root = {
						NOR = {
							has_authority = auth_ancient_machine_intelligence
							has_authority = auth_machine_intelligence
						}
					}
				}
				set_leader_flag = gle_jobs_trait_organic
			}
		}
	}
}

country_event = {
	id = gle.900
	hide_window = yes
	
	trigger = {
		any_owned_leader = {
			has_trait = leader_trait_governor_gray
			OR = {
				has_trait = gle_trait_gray
				has_trait = gle_trait_gray_gestalt
			}
			NOT = {
				has_leader_flag = gle_gary_selected
			}
		}
		has_country_flag = gle_gary_selected_2
	}
	
	mean_time_to_happen = {
		days = 2
	}
	
	immediate = {
		random_owned_leader = {
			limit = {
				has_trait = leader_trait_governor_gray
				OR = {
					has_trait = gle_trait_gray
					has_trait = gle_trait_gray_gestalt
				}
			}
			if = {
				limit = {
					OR = {
						has_trait = gle_trait_ruler_tier_locked_gray
						has_trait = gle_trait_ruler_tier_locked_gray_gestalt
					}
				}
				remove_trait = gle_trait_ruler_tier_locked_gray
				remove_trait = gle_trait_ruler_tier_locked_gray_gestalt
			}
			effect_gle_clean_gary_traits = yes
			effect_gle_add_gary_traits = yes
			set_leader_flag = gle_gary_selected
		}
	}
	
}

country_event = {
	id = gle.1000
	title = gle.1000.title
	desc = gle.1000.desc
	is_triggered_only = yes
	
	diplomatic = yes
	
	picture_event_data = {
		portrait = event_target:gray_governor
		planet_background = event_target:gray_governor_planet
		room = root
	}
	
	is_triggered_only = yes

	trigger = {
		is_same_value = event_target:gray_owner
		has_country_flag = gray_governor_active
		NOT = { has_country_flag = gray_reforming }
		has_country_flag = gray_diplomacy_engaged
		exists = event_target:gray_governor
		any_owned_leader = {
			has_trait = leader_trait_governor_gray
			OR = {
				has_trait = gle_trait_gray
				has_trait = gle_trait_gray_gestalt
			}
		}
	}
	
	after = {
		hidden_effect = { remove_country_flag = gray_diplomacy_engaged }
	}
	option = {
		name = graygoo.500.d
		default_hide_option = yes
	}
	option = {
		name = gle.1000.a
		trigger = {
			NOT = {
				has_ethic = ethic_gestalt_consciousness
			}
		}
		allow = {
			hidden_trigger = { 
				NOT = {
					has_country_flag = gle_gary_select_trade
				}
				exists = event_target:gray_governor
				event_target:gray_governor = {
					NOT = {
						has_trait = gle_trait_trade_lv3
					}
				}
			}
		}
		custom_tooltip = gle.1000.a.tooltip
		hidden_effect = {
			effect_gle_clean_gary_flags = yes
			set_country_flag = gle_gary_select_trade
		}
		response_text = gle.1000.a.response
	}
	
	option = {
		name = gle.1000.b
		trigger = {
			NOT = {
				has_ethic = ethic_gestalt_consciousness
			}
			OR = {
				has_ethic = ethic_spiritualist
				has_ethic = ethic_fanatic_spiritualist
			}
			has_authority = auth_corporate
		}
		allow = {
			hidden_trigger = { 
				NOT = {
					has_country_flag = gle_gary_select_preacher
				}
				exists = event_target:gray_governor
				event_target:gray_governor = {
					NOT = {
						has_trait = gle_trait_preacher_lv3
					}
				}
			}
		}
		custom_tooltip = gle.1000.b.tooltip
		hidden_effect = {
			effect_gle_clean_gary_flags = yes
			set_country_flag = gle_gary_select_preacher
		}
		response_text = gle.1000.b.response
	}
	
	option = {
		name = gle.1000.c
		trigger = {
			NOT = {
				has_ethic = ethic_gestalt_consciousness
			}
			has_technology = tech_frontier_health
		}
		allow = {
			hidden_trigger = { 
				NOT = {
					has_country_flag = gle_gary_select_healthcare
				}
				exists = event_target:gray_governor
				event_target:gray_governor = {
					NOT = {
						has_trait = gle_trait_healthcare_lv3
					}
				}
			}
		}
		custom_tooltip = gle.1000.c.tooltip
		hidden_effect = {
			effect_gle_clean_gary_flags = yes
			set_country_flag = gle_gary_select_healthcare
		}
		response_text = gle.1000.c.response
	}
	
	option = {
		name = gle.1000.d
		trigger = {
			NOT = {
				has_ethic = ethic_gestalt_consciousness
			}
		}
		allow = {
			hidden_trigger = { 
				NOT = {
					has_country_flag = gle_gary_select_miner
				}
				exists = event_target:gray_governor
				event_target:gray_governor = {
					NOT = {
						has_trait = gle_trait_miner_lv3
					}
				}
			}
		}
		custom_tooltip = gle.1000.d.tooltip
		hidden_effect = {
			effect_gle_clean_gary_flags = yes
			set_country_flag = gle_gary_select_miner
		}
		response_text = gle.1000.d.response
	}
	
	option = {
		name = gle.1000.e
		trigger = {
			NOT = {
				has_ethic = ethic_gestalt_consciousness
			}
		}
		allow = {
			hidden_trigger = { 
				NOT = {
					has_country_flag = gle_gary_select_energy
				}
				exists = event_target:gray_governor
				event_target:gray_governor = {
					NOT = {
						has_trait = gle_trait_energy_lv3
					}
				}
			}
		}
		custom_tooltip = gle.1000.e.tooltip
		hidden_effect = {
			effect_gle_clean_gary_flags = yes
			set_country_flag = gle_gary_select_energy
		}
		response_text = gle.1000.e.response
	}
	
	option = {
		name = gle.1000.f
		trigger = {
			NOT = {
				has_ethic = ethic_gestalt_consciousness
			}
		}
		allow = {
			hidden_trigger = { 
				NOT = {
					has_country_flag = gle_gary_select_farmer
				}
				exists = event_target:gray_governor
				event_target:gray_governor = {
					NOT = {
						has_trait = gle_trait_farmer_lv3
					}
				}
			}
		}
		hidden_effect = {
			effect_gle_clean_gary_flags = yes
			set_country_flag = gle_gary_select_farmer
		}
		custom_tooltip = gle.1000.f.tooltip
		response_text = gle.1000.f.response
	}
	
	option = {
		name = gle.1000.g
		trigger = {
			NOT = {
				has_ethic = ethic_gestalt_consciousness
			}
		}
		allow = {
			hidden_trigger = { 
				NOT = {
					has_country_flag = gle_gary_select_soldier
				}
				exists = event_target:gray_governor
				event_target:gray_governor = {
					NOT = {
						has_trait = gle_trait_soldier_lv3
					}
				}
			}
		}
		hidden_effect = {
			effect_gle_clean_gary_flags = yes
			set_country_flag = gle_gary_select_soldier
		}
		custom_tooltip = gle.1000.g.tooltip
		response_text = gle.1000.g.response
	}
	
	option = {
		name = gle.1000.h
		trigger = {
			NOT = {
				has_ethic = ethic_gestalt_consciousness
                has_valid_civic = civic_warrior_culture
			}
		}
		allow = {
			hidden_trigger = { 
				NOT = {
					has_country_flag = gle_gary_select_entertainers
				}
				exists = event_target:gray_governor
				event_target:gray_governor = {
					NOT = {
						has_trait = gle_trait_entertainers_lv3
					}
				}
			}
		}
		hidden_effect = {
			effect_gle_clean_gary_flags = yes
			set_country_flag = gle_gary_select_entertainers
		}
		custom_tooltip = gle.1000.h.tooltip
		response_text = gle.1000.h.response
	}
    
    option = {
		name = gle.1000.h2
		trigger = {
			NOT = {
				has_ethic = ethic_gestalt_consciousness
			}
            has_valid_civic = civic_warrior_culture
		}
		allow = {
			hidden_trigger = { 
				NOT = {
					has_country_flag = gle_gary_select_duelist
				}
				exists = event_target:gray_governor
				event_target:gray_governor = {
					NOT = {
						has_trait = gle_trait_duelist_lv3
					}
				}
			}
		}
		hidden_effect = {
			effect_gle_clean_gary_flags = yes
			set_country_flag = gle_gary_select_duelist
		}
		custom_tooltip = gle.1000.h2.tooltip
		response_text = gle.1000.h2.response
	}
	
	option = {
		name = gle.1000.i
		trigger = {
			NOT = {
				has_ethic = ethic_gestalt_consciousness
			}
		}
		allow = {
			hidden_trigger = { 
				NOT = {
					has_country_flag = gle_gary_select_culture
				}
				exists = event_target:gray_governor
				event_target:gray_governor = {
					NOT = {
						has_trait = gle_trait_culture_lv3
					}
				}
			}
		}
		hidden_effect = {
			effect_gle_clean_gary_flags = yes
			set_country_flag = gle_gary_select_culture
		}
		custom_tooltip = gle.1000.i.tooltip
		response_text = gle.1000.i.response
	}
###
	option = {
		name = gle.1000.u
		trigger = {
			NOT = {
				has_ethic = ethic_gestalt_consciousness
			}
		}
		allow = {
			hidden_trigger = { 
				NOT = {
					has_country_flag = gle_gary_select_bureaucrat
				}
				exists = event_target:gray_governor
				event_target:gray_governor = {
					NOT = {
						has_trait = gle_trait_bureaucrat_lv3
					}
				}
			}
		}
		hidden_effect = {
			effect_gle_clean_gary_flags = yes
			set_country_flag = gle_gary_select_bureaucrat
		}
		custom_tooltip = gle.1000.u.tooltip
		response_text = gle.1000.u.response
	}
###	
	option = {
		name = gle.1000.j
		trigger = {
			NOT = {
				has_ethic = ethic_gestalt_consciousness
			}
			has_authority = auth_corporate
		}
		allow = {
			hidden_trigger = { 
				NOT = {
					has_country_flag = gle_gary_select_manager
				}
				exists = event_target:gray_governor
				event_target:gray_governor = {
					NOT = {
						has_trait = gle_trait_manager_lv3
					}
				}
			}
		}
		hidden_effect = {
			effect_gle_clean_gary_flags = yes
			set_country_flag = gle_gary_select_manager
		}
		custom_tooltip = gle.1000.j.tooltip
		response_text = gle.1000.j.response
	}
	
	option = {
		name = gle.1000.k
		trigger = {
			NOT = {
				has_ethic = ethic_gestalt_consciousness
			}
		}
		allow = {
			hidden_trigger = { 
				NOT = {
					has_country_flag = gle_gary_select_researcher
				}
				exists = event_target:gray_governor
				event_target:gray_governor = {
					NOT = {
						has_trait = gle_trait_researcher_lv3
					}
				}
			}
		}
		hidden_effect = {
			effect_gle_clean_gary_flags = yes
			set_country_flag = gle_gary_select_researcher
		}
		custom_tooltip = gle.1000.k.tooltip
		response_text = gle.1000.k.response
	}
	
	option = {
		name = gle.1000.l
		trigger = {
			NOT = {
				has_ethic = ethic_gestalt_consciousness
			}
			OR = {
				has_ethic = ethic_fanatic_spiritualist
				has_ethic = ethic_spiritualist
			}
		}
		allow = {
			hidden_trigger = { 
				NOT = {
					has_country_flag = gle_gary_select_priest
				}
				exists = event_target:gray_governor
				event_target:gray_governor = {
					NOT = {
						has_trait = gle_trait_priest_lv3
					}
				}
			}
		}
		hidden_effect = {
			effect_gle_clean_gary_flags = yes
			set_country_flag = gle_gary_select_priest
		}
		custom_tooltip = gle.1000.l.tooltip
		response_text = gle.1000.l.response
	}
	
	option = {
		name = gle.1000.m
		trigger = {
			NOT = {
				has_ethic = ethic_gestalt_consciousness
			}
		}
		allow = {
			hidden_trigger = { 
				NOT = {
					has_country_flag = gle_gary_select_foundry
				}
				exists = event_target:gray_governor
				event_target:gray_governor = {
					NOT = {
						has_trait = gle_trait_foundry_lv3
					}
				}
			}
		}
		hidden_effect = {
			effect_gle_clean_gary_flags = yes
			set_country_flag = gle_gary_select_foundry
		}
		custom_tooltip = gle.1000.m.tooltip
		response_text = gle.1000.m.response
	}
	
	option = {
		name = gle.1000.n
		trigger = {
			NOT = {
				has_ethic = ethic_gestalt_consciousness
			}
		}
		allow = {
			hidden_trigger = { 
				NOT = {
					has_country_flag = gle_gary_select_artisan
				}
				exists = event_target:gray_governor
				event_target:gray_governor = {
					NOT = {
						has_trait = gle_trait_artisan_lv3
					}
				}
			}
		}
		hidden_effect = {
			effect_gle_clean_gary_flags = yes
			set_country_flag = gle_gary_select_artisan
		}
		custom_tooltip = gle.1000.n.tooltip
		response_text = gle.1000.n.response
	}
	
	option = {
		name = gle.1000.o
		trigger = {
			NOT = {
				has_ethic = ethic_gestalt_consciousness
			}
		}
		allow = {
			hidden_trigger = { 
				NOT = {
					has_country_flag = gle_gary_select_enforcer
				}
				exists = event_target:gray_governor
				event_target:gray_governor = {
					NOT = {
						has_trait = gle_trait_enforcer_lv3
					}
				}
			}
		}
		hidden_effect = {
			effect_gle_clean_gary_flags = yes
			set_country_flag = gle_gary_select_enforcer
		}
		custom_tooltip = gle.1000.o.tooltip
		response_text = gle.1000.o.response
	}
	
	option = {
		name = gle.1000.p
		trigger = {
			NOT = {
				has_ethic = ethic_gestalt_consciousness
			}
			root.species = {
				OR = {
					has_trait = trait_latent_psionic
					has_trait = trait_psionic
				}
			}
		}
		allow = {
			hidden_trigger = { 
				NOT = {
					has_country_flag = gle_gary_select_telepath
				}
				exists = event_target:gray_governor
				event_target:gray_governor = {
					NOT = {
						has_trait = gle_trait_telepath_lv3
					}
				}
			}
		}
		hidden_effect = {
			effect_gle_clean_gary_flags = yes
			set_country_flag = gle_gary_select_telepath
		}
		custom_tooltip = gle.1000.p.tooltip
		response_text = gle.1000.p.response
	}
	
	option = {
		name = gle.1000.q
		trigger = {
			NOT = {
				has_ethic = ethic_gestalt_consciousness
			}
			has_technology = tech_robotic_workers
			NOT = {
				has_policy_flag = robots_outlawed
			}
		}
		allow = {
			hidden_trigger = { 
				NOT = {
					has_country_flag = gle_gary_select_roboticist
				}
				exists = event_target:gray_governor
				event_target:gray_governor = {
					NOT = {
						has_trait = gle_trait_roboticist_lv3
					}
				}
			}
		}
		hidden_effect = {
			effect_gle_clean_gary_flags = yes
			set_country_flag = gle_gary_select_roboticist
		}
		custom_tooltip = gle.1000.q.tooltip
		response_text = gle.1000.q.response
	}
	
	option = {
		name = gle.1000.r
		trigger = {
			NOT = {
				has_ethic = ethic_gestalt_consciousness
			}
			has_technology = tech_volatile_motes
		}
		allow = {
			hidden_trigger = { 
				NOT = {
					has_country_flag = gle_gary_select_chemist
				}
				exists = event_target:gray_governor
				event_target:gray_governor = {
					NOT = {
						has_trait = gle_trait_chemist_lv3
					}
				}
			}
		}
		hidden_effect = {
			effect_gle_clean_gary_flags = yes
			set_country_flag = gle_gary_select_chemist
		}
		custom_tooltip = gle.1000.r.tooltip
		response_text = gle.1000.r.response
	}
	
	option = {
		name = gle.1000.s
		trigger = {
			NOT = {
				has_ethic = ethic_gestalt_consciousness
			}
			has_technology = tech_rare_crystals
		}
		allow = {
			hidden_trigger = { 
				NOT = {
					has_country_flag = gle_gary_select_translucer
				}
				exists = event_target:gray_governor
				event_target:gray_governor = {
					NOT = {
						has_trait = gle_trait_translucer_lv3
					}
				}
			}
		}
		hidden_effect = {
			effect_gle_clean_gary_flags = yes
			set_country_flag = gle_gary_select_translucer
		}
		custom_tooltip = gle.1000.s.tooltip
		response_text = gle.1000.s.response
	}
	
	option = {
		name = gle.1000.t
		trigger = {
			NOT = {
				has_ethic = ethic_gestalt_consciousness
			}
			has_technology = tech_exotic_gases
		}
		allow = {
			hidden_trigger = { 
				NOT = {
					has_country_flag = gle_gary_select_gas_refiner
				}
				exists = event_target:gray_governor
				event_target:gray_governor = {
					NOT = {
						has_trait = gle_trait_gas_refiner_lv3
					}
				}
			}
		}
		hidden_effect = {
			effect_gle_clean_gary_flags = yes
			set_country_flag = gle_gary_select_gas_refiner
		}
		custom_tooltip = gle.1000.t.tooltip
		response_text = gle.1000.t.response
	}
###GESTALT###
	option = {
		name = gle.1000.a_gestalt
		trigger = {
			OR = {
				has_authority = auth_machine_intelligence
				has_authority = auth_ancient_machine_intelligence
			}
		}
		allow = {
			hidden_trigger = { 
				NOT = {
					has_country_flag = gle_gary_select_coordinator
				}
				exists = event_target:gray_governor
				event_target:gray_governor = {
					NOT = {
						has_trait = gle_trait_coordinator_lv3
					}
				}
			}
		}
		custom_tooltip = gle.1000.a.tooltip_gestalt
		hidden_effect = {
			effect_gle_clean_gary_flags = yes
			set_country_flag = gle_gary_select_coordinator
		}
		response_text = gle.1000.a.response_gestalt
	}
	
	option = {
		name = gle.1000.b_gestalt
		trigger = {
			has_authority = auth_hive_mind
		}
		allow = {
			hidden_trigger = { 
				NOT = {
					has_country_flag = gle_gary_select_synapse_drone
				}
				exists = event_target:gray_governor
				event_target:gray_governor = {
					NOT = {
						has_trait = gle_trait_synapse_drone_lv3
					}
				}
			}
		}
		custom_tooltip = gle.1000.b.tooltip_gestalt
		hidden_effect = {
			effect_gle_clean_gary_flags = yes
			set_country_flag = gle_gary_select_synapse_drone
		}
		response_text = gle.1000.b.response_gestalt
	}
	
	option = {
		name = gle.1000.c_gestalt
		trigger = {
			hidden_trigger = {
				has_ethic = ethic_gestalt_consciousness
			}
		}
		allow = {
			hidden_trigger = { 
				NOT = {
					has_country_flag = gle_gary_select_mining_drone
				}
				exists = event_target:gray_governor
				event_target:gray_governor = {
					NOT = {
						has_trait = gle_trait_mining_drone_lv3
					}
				}
			}
		}
		custom_tooltip = gle.1000.c.tooltip_gestalt
		hidden_effect = {
			effect_gle_clean_gary_flags = yes
			set_country_flag = gle_gary_select_mining_drone
		}
		response_text = gle.1000.c.response_gestalt
	}
	
	option = {
		name = gle.1000.d_gestalt
		trigger = {
			hidden_trigger = {
				has_ethic = ethic_gestalt_consciousness
			}
		}
		allow = {
			hidden_trigger = { 
				NOT = {
					has_country_flag = gle_gary_select_technician_drone
				}
				exists = event_target:gray_governor
				event_target:gray_governor = {
					NOT = {
						has_trait = gle_trait_technician_drone_lv3
					}
				}
			}
		}
		custom_tooltip = gle.1000.d.tooltip_gestalt
		hidden_effect = {
			effect_gle_clean_gary_flags = yes
			set_country_flag = gle_gary_select_technician_drone
		}
		response_text = gle.1000.d.response_gestalt
	}
	
	option = {
		name = gle.1000.e_gestalt
		trigger = {
			OR = {
				has_authority = auth_hive_mind
				has_valid_civic = civic_machine_servitor
				has_valid_civic = civic_machine_assimilator
			}
		}
		allow = {
			hidden_trigger = { 
				NOT = {
					has_country_flag = gle_gary_select_agri_drone
				}
				exists = event_target:gray_governor
				event_target:gray_governor = {
					NOT = {
						has_trait = gle_trait_agri_drone_lv3
					}
				}
			}
		}
		custom_tooltip = gle.1000.e.tooltip_gestalt
		hidden_effect = {
			effect_gle_clean_gary_flags = yes
			set_country_flag = gle_gary_select_agri_drone
		}
		response_text = gle.1000.e.response_gestalt
	}
	
	option = {
		name = gle.1000.f_gestalt
		trigger = {
			hidden_trigger = {
				has_ethic = ethic_gestalt_consciousness
			}
		}
		allow = {
			hidden_trigger = { 
				NOT = {
					has_country_flag = gle_gary_select_warrior_drone
				}
				exists = event_target:gray_governor
				event_target:gray_governor = {
					NOT = {
						has_trait = gle_trait_warrior_drone_lv3
					}
				}
			}
		}
		custom_tooltip = gle.1000.f.tooltip_gestalt
		hidden_effect = {
			effect_gle_clean_gary_flags = yes
			set_country_flag = gle_gary_select_warrior_drone
		}
		response_text = gle.1000.f.response_gestalt
	}
	
	option = {
		name = gle.1000.g_gestalt
		trigger = {
			has_authority = auth_hive_mind
		}
		allow = {
			hidden_trigger = { 
				NOT = {
					has_country_flag = gle_gary_select_brain_drone
				}
				exists = event_target:gray_governor
				event_target:gray_governor = {
					NOT = {
						has_trait = gle_trait_brain_drone_lv3
					}
				}
			}
		}
		custom_tooltip = gle.1000.g.tooltip_gestalt
		hidden_effect = {
			effect_gle_clean_gary_flags = yes
			set_country_flag = gle_gary_select_brain_drone
		}
		response_text = gle.1000.g.response_gestalt
	}
###	
	option = {
		name = gle.1000.r_gestalt
		trigger = {
			OR = {
				has_authority = auth_machine_intelligence
				has_authority = auth_ancient_machine_intelligence
			}
		}
		allow = {
			hidden_trigger = { 
				NOT = {
					has_country_flag = gle_gary_select_evaluator
				}
				exists = event_target:gray_governor
				event_target:gray_governor = {
					NOT = {
						has_trait = gle_trait_evaluator_lv3
					}
				}
			}
		}
		custom_tooltip = gle.1000.r.tooltip_gestalt
		hidden_effect = {
			effect_gle_clean_gary_flags = yes
			set_country_flag = gle_gary_select_evaluator
		}
		response_text = gle.1000.r.response_gestalt
	}
###	
	option = {
		name = gle.1000.h_gestalt
		trigger = {
			OR = {
				has_authority = auth_machine_intelligence
				has_authority = auth_ancient_machine_intelligence
			}
		}
		allow = {
			hidden_trigger = { 
				NOT = {
					has_country_flag = gle_gary_select_calculator
				}
				exists = event_target:gray_governor
				event_target:gray_governor = {
					NOT = {
						has_trait = gle_trait_calculator_lv3
					}
				}
			}
		}
		custom_tooltip = gle.1000.h.tooltip_gestalt
		hidden_effect = {
			effect_gle_clean_gary_flags = yes
			set_country_flag = gle_gary_select_calculator
		}
		response_text = gle.1000.h.response_gestalt
	}
	option = {
		name = gle.1000.i_gestalt
		trigger = {
			hidden_trigger = {
				has_ethic = ethic_gestalt_consciousness
			}
		}
		allow = {
			hidden_trigger = { 
				NOT = {
					has_country_flag = gle_gary_select_maintenance_drone
				}
				exists = event_target:gray_governor
				event_target:gray_governor = {
					NOT = {
						has_trait = gle_trait_maintenance_drone_lv3
					}
				}
			}
		}
		custom_tooltip = gle.1000.i.tooltip_gestalt
		hidden_effect = {
			effect_gle_clean_gary_flags = yes
			set_country_flag = gle_gary_select_maintenance_drone
		}
		response_text = gle.1000.i.response_gestalt
	}
	option = {
		name = gle.1000.j_gestalt
		trigger = {
			OR = {
				has_authority = auth_machine_intelligence
				has_authority = auth_ancient_machine_intelligence
			}
		}
		allow = {
			hidden_trigger = { 
				NOT = {
					has_country_flag = gle_gary_select_fabricator
				}
				exists = event_target:gray_governor
				event_target:gray_governor = {
					NOT = {
						has_trait = gle_trait_fabricator_lv3
					}
				}
			}
		}
		custom_tooltip = gle.1000.j.tooltip_gestalt
		hidden_effect = {
			effect_gle_clean_gary_flags = yes
			set_country_flag = gle_gary_select_fabricator
		}
		response_text = gle.1000.j.response_gestalt
	}
	option = {
		name = gle.1000.k_gestalt
		trigger = {
			has_authority = auth_hive_mind
		}
		allow = {
			hidden_trigger = { 
				NOT = {
					has_country_flag = gle_gary_select_alloy_drone
				}
				exists = event_target:gray_governor
				event_target:gray_governor = {
					NOT = {
						has_trait = gle_trait_alloy_drone_lv3
					}
				}
			}
		}
		custom_tooltip = gle.1000.k.tooltip_gestalt
		hidden_effect = {
			effect_gle_clean_gary_flags = yes
			set_country_flag = gle_gary_select_alloy_drone
		}
		response_text = gle.1000.k.response_gestalt
	}
	option = {
		name = gle.1000.l_gestalt
		trigger = {
			has_valid_civic = civic_machine_servitor
		}
		allow = {
			hidden_trigger = { 
				NOT = {
					has_country_flag = gle_gary_select_artisan_drone
				}
				exists = event_target:gray_governor
				event_target:gray_governor = {
					NOT = {
						has_trait = gle_trait_artisan_drone_lv3
					}
				}
			}
		}
		custom_tooltip = gle.1000.l.tooltip_gestalt
		hidden_effect = {
			effect_gle_clean_gary_flags = yes
			set_country_flag = gle_gary_select_artisan_drone
		}
		response_text = gle.1000.l.response_gestalt
	}
	option = {
		name = gle.1000.m_gestalt
		trigger = {
			hidden_trigger = {
				has_ethic = ethic_gestalt_consciousness
			}
		}
		allow = {
			hidden_trigger = { 
				NOT = {
					has_country_flag = gle_gary_select_patrol_drone
				}
				exists = event_target:gray_governor
				event_target:gray_governor = {
					NOT = {
						has_trait = gle_trait_patrol_drone_lv3
					}
				}
			}
		}
		custom_tooltip = gle.1000.m.tooltip_gestalt
		hidden_effect = {
			effect_gle_clean_gary_flags = yes
			set_country_flag = gle_gary_select_patrol_drone
		}
		response_text = gle.1000.m.response_gestalt
	}
	
	option = {
		name = gle.1000.n_gestalt
		trigger = {
			OR = {
				has_authority = auth_machine_intelligence
				has_authority = auth_ancient_machine_intelligence
			}
		}
		allow = {
			hidden_trigger = { 
				NOT = {
					has_country_flag = gle_gary_select_replicator
				}
				exists = event_target:gray_governor
				event_target:gray_governor = {
					NOT = {
						has_trait = gle_trait_replicator_lv3
					}
				}
			}
		}
		custom_tooltip = gle.1000.n.tooltip_gestalt
		hidden_effect = {
			effect_gle_clean_gary_flags = yes
			set_country_flag = gle_gary_select_replicator
		}
		response_text = gle.1000.n.response_gestalt
	}
	
	option = {
		name = gle.1000.o_gestalt
		trigger = {
			hidden_trigger = {
				has_ethic = ethic_gestalt_consciousness
			}
			has_technology = tech_volatile_motes
		}
		allow = {
			hidden_trigger = { 
				NOT = {
					has_country_flag = gle_gary_select_chemist_drone
				}
				exists = event_target:gray_governor
				event_target:gray_governor = {
					NOT = {
						has_trait = gle_trait_chemist_drone_lv3
					}
				}
			}
		}
		hidden_effect = {
			effect_gle_clean_gary_flags = yes
			set_country_flag = gle_gary_select_chemist_drone
		}
		custom_tooltip = gle.1000.o.tooltip_gestalt
		response_text = gle.1000.o.response_gestalt
	}
	
	option = {
		name = gle.1000.p_gestalt
		trigger = {
			hidden_trigger = {
				has_ethic = ethic_gestalt_consciousness
			}
			has_technology = tech_rare_crystals
		}
		allow = {
			hidden_trigger = { 
				NOT = {
					has_country_flag = gle_gary_select_translucer_drone
				}
				exists = event_target:gray_governor
				event_target:gray_governor = {
					NOT = {
						has_trait = gle_trait_translucer_drone_lv3
					}
				}
			}
		}
		hidden_effect = {
			effect_gle_clean_gary_flags = yes
			set_country_flag = gle_gary_select_translucer_drone
		}
		custom_tooltip = gle.1000.p.tooltip_gestalt
		response_text = gle.1000.p.response_gestalt
	}
	
	option = {
		name = gle.1000.q_gestalt
		trigger = {
			hidden_trigger = {
				has_ethic = ethic_gestalt_consciousness
			}
			has_technology = tech_exotic_gases
		}
		allow = {
			hidden_trigger = { 
				NOT = {
					has_country_flag = gle_gary_select_gas_refiner_drone
				}
				exists = event_target:gray_governor
				event_target:gray_governor = {
					NOT = {
						has_trait = gle_trait_gas_refiner_drone_lv3
					}
				}
			}
		}
		hidden_effect = {
			effect_gle_clean_gary_flags = yes
			set_country_flag = gle_gary_select_gas_refiner_drone
		}
		custom_tooltip = gle.1000.q.tooltip_gestalt
		response_text = gle.1000.q.response_gestalt
	}
}

