namespace = sleeper_debug

#mark the mod as active
event = {
	id = sleeper_debug.3
	hide_window = yes
	is_triggered_only = yes
	fire_only_once = yes

	trigger = {
		NOT = { has_global_flag = the_sleeper_mod_active }
	}
	
	immediate = { set_global_flag = "the_sleeper_mod_active" }
}

#toggle debugmode, cut from from sleeper.35
country_event = {
	id = sleeper_debug.1
	title = sleeper.35.title
	desc = sleeper.35.desc
	
	is_triggered_only = yes
	
	option = {
		trigger = {
			any_country = {
				is_sleeper = yes
				NOT = {
					has_country_flag = sleeper_debug_mode_active
				}
			}
		}
		name = sleeper.35.enable
		custom_tooltip = sleeper.35.enable.tooltip
		random_country = {
			limit = {
				is_sleeper = yes
			}
			set_country_flag = sleeper_debug_mode_active
		}
	}
	
	option = {
		trigger = {
			any_country = {
				is_sleeper = yes
				has_country_flag = sleeper_debug_mode_active
			}
		}
		name = sleeper.35.disable
		random_country = {
			limit = {
				is_sleeper = yes
			}
			remove_country_flag = sleeper_debug_mode_active
		}
	}
	
	option = {
		name = sleeper.35.destroy 
		country_event = { id = sleeper_debug.02 }
	}

	option = {
		name = sleeper.35.MARKED 
		add_modifier = {
			modifier = sleeper_aggressor_marker
			days = 30
		}
	}

	option = {
		name = sleeper.35.EXIST
		trigger = {
			any_country = {
				is_sleeper = yes
			}
		}
	}

	option = {
		name = sleeper.35.NOTEXIST
		trigger = {
			NOT = { 
				any_country = {
					is_sleeper = yes
				}
			}
		}
	}
	
	option = {
		name = sleeper.35.leave
		country_event = { id = sleeper_debug.02 }
	}
}

#destroy the sleeper, drones countries and TN-3
country_event = {
	id = sleeper_debug.02
	hide_window = yes
	
	is_triggered_only = yes
	
	immediate = {
		every_country = {
			limit = {
				OR = {
					is_country_type = hive_researcher_enclave
					is_sleeper = yes
				}
			}
			every_owned_pop = {
				kill_pop = yes
			}
			destroy_country = yes
		}
	}
}
#activate a warning if the sleeper does not exist after gamestart
country_event = {
	id = sleeper_debug.04
	title = sleeper_debug.04.title
	desc = sleeper_debug.04.desc
	
	is_triggered_only = yes

	trigger = {
		NOT = {
			any_country = {
				is_sleeper = yes
			}
		}
		is_ai = no
	}

	option = {
		name = sleeper_debug.04.a
	}
}
