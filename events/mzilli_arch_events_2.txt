namespace = mzilli_arch_events

# Special Project Failed - Absolutely Zero
ship_event = {
	id = mzilli_arch_events.28
	title = "mzilli_arch_events.28.name"
	desc = "mzilli_arch_events.28.desc"
	picture = GFX_evt_mzilli_rogue_planet
	show_sound = event_super_explosion
	location = event_target:mzilli_bomb_system
	
	is_triggered_only = yes

	immediate = {
		event_target:mzilli_bomb_system = {
			set_star_class = sc_mzilli_null
			every_system_planet = {
				if = {
					limit = { exists = owner }
					destroy_colony = yes
				}
				remove_planet = yes
			}
			every_system_ambient_object = { destroy_ambient_object = this }
			every_system_megastructure = { remove_megastructure = this }
			isolate_system = yes
		}
	}

	option = {
		name = OOPS
		custom_tooltip = mzilli_arch_events.28.tooltip
		hidden_effect = {
			event_target:mzilli_bomb_system = { every_fleet_in_system = { delete_fleet = this } }
			event_target:mzilli_bomb_leader = { kill_leader = { show_notification = no } }
		}
	}
}

fleet_event = {
	id = mzilli_arch_events.63
	title = "mzilli_arch_events.63.name"
	desc = "mzilli_arch_events.63.desc"
	picture = GFX_evt_cover_blown
	show_sound = event_mystic_reveal
	location = FROM

	archaeology = yes
	
	is_triggered_only = yes
	
	immediate = {
		save_global_event_target_as = shamrock_science_ship
		FROM.planet = {
			save_global_event_target_as = shamrock_planet
			owner = {
				create_leader = {
					class = scientist
					name = random
					species = event_target:shamrock_hybrid_species
					set_age = 19
					traits = {
						trait = leader_trait_eager
						trait = leader_trait_roamer
					}
					event_leader = yes
				}
			}
		}
		last_created_leader = { save_global_event_target_as = shamrock_explorer }
	}

	option = {
		name = mzilli_arch_events.63.a
		custom_tooltip = mzilli_arch_events.63.a.tooltip
		hidden_effect = { event_target:shamrock_explorer = { kill_leader = { show_notification = no } } }
	}

	option = {
		name = mzilli_arch_events.63.b
		custom_tooltip = mzilli_arch_events.63.b.tooltip
		owner = {
			add_monthly_resource_mult = {
				resource = society_research
				value = @tier2researchreward
				min = @tier2researchmin
				max = @tier2researchmax
			}
		}
		hidden_effect = { event_target:shamrock_explorer = { kill_leader = { show_notification = no } } }
	}
	
	option = {
		trigger = {
			owner = {
				NOR = {
					has_ethic = ethic_fanatic_xenophobe
					has_ethic = ethic_xenophobe
				}
			}
		}
		name = mzilli_arch_events.63.c
		custom_tooltip = mzilli_arch_events.63.c.tooltip
		hidden_effect = { owner = { country_event = { id = mzilli_arch_events.64 days = 5 } } }
	}
}

# Dialogue with Shamrock hybrid
country_event = {
	id = mzilli_arch_events.64
	title = mzilli_arch_events.64.name
	desc = {
		trigger = {
			event_target:shamrock_explorer = {
				OR = {
					gender = male
					gender = female
				}
			}
		}
		text = mzilli_arch_events.64.desc.gender
	}
	desc = {
		trigger = {
			event_target:shamrock_explorer = {
				NOR = {
					gender = male
					gender = female
				}
			}
		}
		text = mzilli_arch_events.64.desc.nogender
	}
	location = event_target:shamrock_science_ship

	is_triggered_only = yes

	diplomatic = yes

	picture_event_data = {
		portrait = event_target:shamrock_explorer
		room = ethic_spaceship_room
	}

	option = {
		# "My name is X, can you understand me"
		name = mzilli_arch_events.64.a
		hidden_effect = { country_event = { id = mzilli_arch_events.65 } }
	}
}

country_event = {
	id = mzilli_arch_events.65
	title = mzilli_arch_events.64.name
	desc = mzilli_arch_events.65.desc

	location = event_target:shamrock_science_ship

	is_triggered_only = yes

	diplomatic = yes

	picture_event_data = {
		portrait = event_target:shamrock_explorer
		room = ethic_spaceship_room
	}

	option = {
		# "We have translators."
		name = mzilli_arch_events.65.a
		hidden_effect = { country_event = { id = mzilli_arch_events.66 } }
	}
}

country_event = {
	id = mzilli_arch_events.66
	title = mzilli_arch_events.64.name
	desc = {
		trigger = {
			event_target:shamrock_explorer = {
				OR = {
					gender = male
					gender = female
				}
			}
		}
		text = mzilli_arch_events.66.desc.gender
	}
	desc = {
		trigger = {
			event_target:shamrock_explorer = {
				NOR = {
					gender = male
					gender = female
				}
			}
		}
		text = mzilli_arch_events.66.desc.nogender
	}
	location = event_target:shamrock_science_ship

	is_triggered_only = yes

	diplomatic = yes

	picture_event_data = {
		portrait = event_target:shamrock_explorer
		room = ethic_spaceship_room
	}

	option = {
		# "The Shamrock was a ship, we're humans."
		name = mzilli_arch_events.66.a
		hidden_effect = { country_event = { id = mzilli_arch_events.67 } }
	}
}

# I knew it!
country_event = {
	id = mzilli_arch_events.67
	title = mzilli_arch_events.67.name
	desc = mzilli_arch_events.67.desc

	location = event_target:shamrock_science_ship

	is_triggered_only = yes

	diplomatic = yes

	picture_event_data = {
		portrait = event_target:shamrock_explorer
		room = ethic_spaceship_room
	}

	option = {
		# "Tell me about the Shamrocks."
		name = mzilli_arch_events.67.a
		hidden_effect = { country_event = { id = mzilli_arch_events.68 } }
	}
	option = {
		# "What happened to the Shamrocks?"
		name = mzilli_arch_events.67.b
		hidden_effect = { country_event = { id = mzilli_arch_events.69 } }
	}
	option = {
		# "You're half-human."
		name = mzilli_arch_events.67.c
		hidden_effect = { country_event = { id = mzilli_arch_events.70 } }
	}
	option = {
		# "Sorry you got hurt."
		name = mzilli_arch_events.67.d
		hidden_effect = { country_event = { id = mzilli_arch_events.71 } }
	}
	option = {
		# "So what now?"
		name = mzilli_arch_events.67.e
		hidden_effect = { country_event = { id = mzilli_arch_events.72 } }
	}
}

# Tell me about the Shamrocks.
country_event = {
	id = mzilli_arch_events.68
	title = mzilli_arch_events.67.name
	desc = mzilli_arch_events.68.desc

	location = event_target:shamrock_science_ship

	is_triggered_only = yes

	diplomatic = yes

	picture_event_data = {
		portrait = event_target:shamrock_explorer
		room = ethic_spaceship_room
	}

	option = {
		# "Tell me about the Shamrocks."
		name = mzilli_arch_events.67.a
		hidden_effect = { country_event = { id = mzilli_arch_events.68 } }
	}
	option = {
		# "What happened to the Shamrocks?"
		name = mzilli_arch_events.67.b
		hidden_effect = { country_event = { id = mzilli_arch_events.69 } }
	}
	option = {
		# "You're half-human."
		name = mzilli_arch_events.67.c
		hidden_effect = { country_event = { id = mzilli_arch_events.70 } }
	}
	option = {
		# "Sorry you got hurt."
		name = mzilli_arch_events.67.d
		hidden_effect = { country_event = { id = mzilli_arch_events.71 } }
	}
	option = {
		# "So what now?"
		name = mzilli_arch_events.67.e
		hidden_effect = { country_event = { id = mzilli_arch_events.72 } }
	}
}

# What happened to the Shamrocks?
country_event = {
	id = mzilli_arch_events.69
	title = mzilli_arch_events.67.name
	desc = mzilli_arch_events.69.desc

	location = event_target:shamrock_science_ship

	is_triggered_only = yes

	diplomatic = yes

	picture_event_data = {
		portrait = event_target:shamrock_explorer
		room = ethic_spaceship_room
	}

	option = {
		# "Tell me about the Shamrocks."
		name = mzilli_arch_events.67.a
		hidden_effect = { country_event = { id = mzilli_arch_events.68 } }
	}
	option = {
		# "What happened to the Shamrocks?"
		name = mzilli_arch_events.67.b
		hidden_effect = { country_event = { id = mzilli_arch_events.69 } }
	}
	option = {
		# "You're half-human."
		name = mzilli_arch_events.67.c
		hidden_effect = { country_event = { id = mzilli_arch_events.70 } }
	}
	option = {
		# "Sorry you got hurt."
		name = mzilli_arch_events.67.d
		hidden_effect = { country_event = { id = mzilli_arch_events.71 } }
	}
	option = {
		# "So what now?"
		name = mzilli_arch_events.67.e
		hidden_effect = { country_event = { id = mzilli_arch_events.72 } }
	}
}

# You're half-human.
country_event = {
	id = mzilli_arch_events.70
	title = mzilli_arch_events.67.name
	desc = mzilli_arch_events.70.desc

	location = event_target:shamrock_science_ship

	is_triggered_only = yes

	diplomatic = yes

	picture_event_data = {
		portrait = event_target:shamrock_explorer
		room = ethic_spaceship_room
	}

	option = {
		# "Tell me about the Shamrocks."
		name = mzilli_arch_events.67.a
		hidden_effect = { country_event = { id = mzilli_arch_events.68 } }
	}
	option = {
		# "What happened to the Shamrocks?"
		name = mzilli_arch_events.67.b
		hidden_effect = { country_event = { id = mzilli_arch_events.69 } }
	}
	option = {
		# "You're half-human."
		name = mzilli_arch_events.67.c
		hidden_effect = { country_event = { id = mzilli_arch_events.70 } }
	}
	option = {
		# "Sorry you got hurt."
		name = mzilli_arch_events.67.d
		hidden_effect = { country_event = { id = mzilli_arch_events.71 } }
	}
	option = {
		# "So what now?"
		name = mzilli_arch_events.67.e
		hidden_effect = { country_event = { id = mzilli_arch_events.72 } }
	}
}

# Sorry you got hurt.
country_event = {
	id = mzilli_arch_events.71
	title = mzilli_arch_events.67.name
	desc = {
		trigger = {
			event_target:shamrock_explorer = {
				OR = {
					gender = male
					gender = female
				}
			}
		}
		text = mzilli_arch_events.71.desc.gender
	}
	desc = {
		trigger = {
			event_target:shamrock_explorer = {
				NOR = {
					gender = male
					gender = female
				}
			}
		}
		text = mzilli_arch_events.71.desc.nogender
	}
	location = event_target:shamrock_science_ship

	is_triggered_only = yes

	diplomatic = yes

	picture_event_data = {
		portrait = event_target:shamrock_explorer
		room = ethic_spaceship_room
	}

	option = {
		# "Tell me about the Shamrocks."
		name = mzilli_arch_events.67.a
		hidden_effect = { country_event = { id = mzilli_arch_events.68 } }
	}
	option = {
		# "What happened to the Shamrocks?"
		name = mzilli_arch_events.67.b
		hidden_effect = { country_event = { id = mzilli_arch_events.69 } }
	}
	option = {
		# "You're half-human."
		name = mzilli_arch_events.67.c
		hidden_effect = { country_event = { id = mzilli_arch_events.70 } }
	}
	option = {
		# "Sorry you got hurt."
		name = mzilli_arch_events.67.d
		hidden_effect = { country_event = { id = mzilli_arch_events.71 } }
	}
	option = {
		# "So what now?"
		name = mzilli_arch_events.67.e
		hidden_effect = { country_event = { id = mzilli_arch_events.72 } }
	}
}

# What now?
country_event = {
	id = mzilli_arch_events.72
	title = mzilli_arch_events.67.name
	desc = mzilli_arch_events.72.desc

	location = event_target:shamrock_science_ship

	is_triggered_only = yes

	diplomatic = yes

	picture_event_data = {
		portrait = event_target:shamrock_explorer
		room = ethic_spaceship_room
	}

	option = {
		# "You should go home."
		name = mzilli_arch_events.72.a
		hidden_effect = { country_event = { id = mzilli_arch_events.73 } }
	}
	option = {
		# "Come with us."
		name = mzilli_arch_events.72.b
		hidden_effect = { country_event = { id = mzilli_arch_events.75 } }
	}
}

country_event = {
	id = mzilli_arch_events.73
	title = mzilli_arch_events.67.name
	desc = {
		trigger = {
			event_target:shamrock_explorer = {
				OR = {
					gender = male
					gender = female
				}
			}
		}
		text = mzilli_arch_events.73.desc.gender
	}
	desc = {
		trigger = {
			event_target:shamrock_explorer = {
				NOR = {
					gender = male
					gender = female
				}
			}
		}
		text = mzilli_arch_events.73.desc.nogender
	}
	location = event_target:shamrock_science_ship

	is_triggered_only = yes

	diplomatic = yes

	picture_event_data = {
		portrait = event_target:shamrock_explorer
		room = ethic_spaceship_room
	}

	option = {
		# "Farewell."
		name = mzilli_arch_events.73.a
		hidden_effect = { country_event = { id = mzilli_arch_events.74 days = 3 } }
	}
}

# Returns home
country_event = {
	id = mzilli_arch_events.74
	title = mzilli_arch_events.74.name
	desc = mzilli_arch_events.74.desc

	picture = GFX_evt_medieval_alien_civilization

	show_sound = event_primitive_civilization

	location = event_target:shamrock_planet
	
	is_triggered_only = yes

	option = {
		name = mzilli_arch_events.74.a
		add_monthly_resource_mult = {
			resource = unity
			value = 120
			min = 240
			max = 9999
		}
		hidden_effect = {
			event_target:shamrock_explorer = { kill_leader = { show_notification = no } }
			clear_global_event_target = shamrock_planet
			clear_global_event_target = shamrock_science_ship
			clear_global_event_target = shamrock_hybrid_species
		}
	}
}

country_event = {
	id = mzilli_arch_events.75
	title = mzilli_arch_events.67.name
	desc = mzilli_arch_events.75.desc

	location = event_target:shamrock_science_ship

	is_triggered_only = yes

	diplomatic = yes

	picture_event_data = {
		portrait = event_target:shamrock_explorer
		room = ethic_spaceship_room
	}

	option = {
		# "Space is dangerous."
		name = mzilli_arch_events.75.a
		hidden_effect = { country_event = { id = mzilli_arch_events.76 } }
	}
	option = {
		# "Welcome aboard."
		name = mzilli_arch_events.75.b
		hidden_effect = { country_event = { id = mzilli_arch_events.77 days = 3 } }
	}
}

country_event = {
	id = mzilli_arch_events.76
	title = mzilli_arch_events.67.name
	desc = mzilli_arch_events.76.desc

	location = event_target:shamrock_science_ship

	is_triggered_only = yes

	diplomatic = yes

	picture_event_data = {
		portrait = event_target:shamrock_explorer
		room = ethic_spaceship_room
	}

	option = {
		# "Welcome aboard."
		name = mzilli_arch_events.76.a
		hidden_effect = { country_event = { id = mzilli_arch_events.77 days = 3 } }
	}
}

# Begins training
country_event = {
	id = mzilli_arch_events.77
	title = mzilli_arch_events.77.name
	desc = mzilli_arch_events.77.desc

	picture = GFX_evt_spymaster

	show_sound = event_scanner

	location = event_target:shamrock_science_ship
	
	is_triggered_only = yes

	option = {
		name = mzilli_arch_events.77.a
		add_monthly_resource_mult = {
			resource = unity
			value = 90
			min = 240
			max = 9999
		}
		custom_tooltip = mzilli_arch_events.77.tooltip
		hidden_effect = {
			event_target:shamrock_planet = {
				set_saved_date = {
					key = trainee_date
					days_from_present = 720
					expires = 720
				}
			}
			if = {
				limit = { event_target:shamrock_explorer = { gender = male } }
				create_leader = {
					class = scientist
					name = random
					gender = male
					species = event_target:shamrock_hybrid_species
					background_ethic = ethic_xenophile
					set_age = 19
					traits = {
						trait = leader_trait_eager
						trait = leader_trait_roamer
						trait = leader_trait_mzilli_pre_ftl_leader
					}
				}
			}
			else_if = {
				limit = { event_target:shamrock_explorer = { gender = female } }
				create_leader = {
					class = scientist
					name = random
					gender = female
					species = event_target:shamrock_hybrid_species
					background_ethic = ethic_xenophile
					set_age = 19
					traits = {
						trait = leader_trait_eager
						trait = leader_trait_roamer
						trait = leader_trait_mzilli_pre_ftl_leader
					}
				}
			}
			else = {
				create_leader = {
					class = scientist
					name = random
					species = event_target:shamrock_hybrid_species
					background_ethic = ethic_xenophile
					set_age = 19
					traits = {
						trait = leader_trait_eager
						trait = leader_trait_roamer
						trait = leader_trait_mzilli_pre_ftl_leader
					}
				}
			}
			last_created_leader = {
				set_name = event_target:shamrock_explorer
				unassign_leader = this
				set_cooldown = 720
			}
			#country_event = { id = "mzilli_arch_events.78" days = 720 }
			country_event = { id = "mzilli_arch_events.78" days = 7 }
			event_target:shamrock_explorer = { kill_leader = { show_notification = no } }
			event_target:shamrock_science_ship = { set_timed_fleet_flag = { flag = shamrock_science_ship days = 720 } }
			clear_global_event_target = shamrock_hybrid_species
			last_created_leader = { save_global_event_target_as = shamrock_explorer }
		}
	}
}

# Shamrock explorer reports for duty
country_event = {
	id = mzilli_arch_events.78

	hide_window = yes
	
	is_triggered_only = yes
	
	immediate = {
		if = {
			limit = { has_country_flag = shamrock_explorer_killed }
			remove_country_flag = shamrock_explorer_killed
			clear_global_event_target = shamrock_science_ship
		}
		else = { country_event = { id = mzilli_arch_events.79 } }
	}
}

country_event = {
	id = mzilli_arch_events.79
	title = "mzilli_arch_events.79.name"
	desc = {
		trigger = { exists = event_target:shamrock_science_ship }
		text = "mzilli_arch_events.79.desc.a"
	}
	desc = {
		trigger = { NOT = { exists = event_target:shamrock_science_ship } }
		text = "mzilli_arch_events.79.desc.b"
	}

	picture = GFX_evt_salute
	show_sound = event_ship_bridge
	
	is_triggered_only = yes
	
	option = {
		name = EXCELLENT
		#custom_tooltip = mzilli_arch_events.79.tooltip
		event_target:shamrock_explorer = { remove_trait = leader_trait_mzilli_pre_ftl_leader }
		hidden_effect = {
			clear_global_event_target = shamrock_explorer
			clear_global_event_target = shamrock_planet
			clear_global_event_target = shamrock_science_ship
		}
	}
}

# Science ship is destroyed, killing the Shamrock explorer
country_event = {
	id = mzilli_arch_events.80

	is_triggered_only = yes
	hide_window = yes

	trigger = { FROMFROM.fleet = { has_fleet_flag = shamrock_science_ship } }

	immediate = {
		set_country_flag = shamrock_explorer_killed
		event_target:shamrock_explorer = { kill_leader = { show_notification = yes } }
	}
}

# Slaver ship wrap-up
fleet_event = {
	id = mzilli_arch_events.81
	title = "mzilli_arch_events.81.name"
	desc = "mzilli_arch_events.81.desc"

	picture = GFX_evt_exploding_ship
	show_sound = event_ship_bridge
	location = FROM

	archaeology = yes
	
	is_triggered_only = yes
	
	option = {
		name = REMARKABLE
		owner = {
			add_resource = { minor_artifacts = 1 }
			add_monthly_resource_mult = {
				resource = society_research
				value = @tier2researchreward
				min = @tier2researchmin
				max = @tier2researchmax
			}
		}
	}
}

# Black Domain
fleet_event = {
	id = mzilli_arch_events.82
	title = "mzilli_arch_events.82.name"
	desc = {
		trigger = { FROM.planet = { is_planet_class = pc_ocean } }
		text = "mzilli_arch_events.82.desc.ocean"
	}
	desc = {
		trigger = { FROM.planet = { NOT = { is_planet_class = pc_ocean } } }
		text = "mzilli_arch_events.82.desc.other"
	}

	picture = GFX_evt_habitable_dig_site
	show_sound = event_scanner
	location = FROM

	archaeology = yes
	
	is_triggered_only = yes
	
	option = {
		name = DIG
		owner = {
			add_monthly_resource_mult = {
				resource = society_research
				value = @tier3researchreward
				min = @tier3researchmin
				max = @tier3researchmax
			}
		}
	}
}

fleet_event = {
	id = mzilli_arch_events.83
	title = "mzilli_arch_events.83.name"
	desc = "mzilli_arch_events.83.desc"

	picture = GFX_evt_metropolis
	show_sound = event_scanner
	location = FROM

	archaeology = yes
	
	is_triggered_only = yes
	
	option = {
		name = INTERESTING
		owner = { add_resource = { minor_artifacts = 2 } }
	}
}

fleet_event = {
	id = mzilli_arch_events.84
	title = "mzilli_arch_events.84.name"
	desc = "mzilli_arch_events.84.desc"

	picture = GFX_evt_surreal_visions
	show_sound = event_bad_omen
	location = FROM

	archaeology = yes
	
	is_triggered_only = yes
	
	option = {
		name = DISCONCERTING
		owner = {
			add_resource = { minor_artifacts = 1 }
			add_monthly_resource_mult = {
				resource = physics_research
				value = @tier3researchreward
				min = @tier3researchmin
				max = @tier3researchmax
			}
		}
	}
}

fleet_event = {
	id = mzilli_arch_events.85
	title = "mzilli_arch_events.85.name"
	desc = {
		trigger = { owner = { has_communications = event_target:black_domain_descendents } }
		text = "mzilli_arch_events.85.desc.a"
	}
	desc = {
		trigger = { owner = { NOT = { has_communications = event_target:black_domain_descendents } } }
		text = "mzilli_arch_events.85.desc.b"
	}

	picture = GFX_evt_relic_world
	show_sound = event_wind_ruins
	location = FROM

	archaeology = yes
	
	is_triggered_only = yes

	immediate = { event_target:black_domain_descendents = { owner_species = { set_species_homeworld = FROM.planet } } }

	option = {
		trigger = { owner = { has_communications = event_target:black_domain_descendents } }
		name = "mzilli_arch_events.85.b"
		owner = { add_resource = { minor_artifacts = 3 } }
	}	
	option = {
		trigger = { owner = { NOT = { has_communications = event_target:black_domain_descendents } } }
		name = REMARKABLE
		owner = { add_resource = { minor_artifacts = 3 } }
	}
}

fleet_event = {
	id = mzilli_arch_events.86
	title = "mzilli_arch_events.86.name"
	desc = "mzilli_arch_events.86.desc"

	picture = GFX_evt_surreal_visions
	show_sound = event_bad_omen
	location = FROM

	archaeology = yes
	
	is_triggered_only = yes

	option = {
		name = MAKE_IT_SO
		owner = {
			if = {
				limit = { NOT = { has_technology = tech_mine_dark_matter } }
				add_research_option = tech_mine_dark_matter
				add_tech_progress = {
					tech = tech_mine_dark_matter
					progress = 0.2
				}
			}
			add_research_option = tech_mzilli_black_domain
		}
	}
}