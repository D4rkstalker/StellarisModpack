namespace = als

###STOLEN AND EDITED FROM LEADER_EVENTS_1###

# Trickster gained from Victory
country_event = {
	id = als.1
	title = "admiral_trait_gain"
	desc = {
		trigger = { has_authority = auth_hive_mind }
		text = "leader.newadmiraltrait.desc.hive"
	}
	desc = {
		trigger = { has_authority = auth_machine_intelligence }
		text = "leader.newadmiraltrait.desc.machine"
	}
	desc = {
		trigger = {
			NOR = {
				has_authority = auth_hive_mind
				has_authority = auth_machine_intelligence
			}
		}
		text = "leader.5.desc"
	}
	picture = GFX_evt_federation_fleet
	location = ROOT
	
	is_triggered_only = yes
	
	trigger = {
		is_country_type = default
		FROMFROM = {
			exists = leader
			leader = {
				leader_class = admiral
				num_traits < 9
				NOT = { 
					has_trait = leader_trait_trickster 
					has_trait = leader_trait_unyielding
				}
			}
		}
	}
	
	immediate = {
		FROMFROM = {
			leader = { save_event_target_as = officer }
			solar_system = { save_event_target_as = system }
		}
	}
	
	option = {
		name = GOOD
		FROMFROM = {
			leader = { add_trait = leader_trait_trickster }
		}		
	}
}


# Aggressive gained from Victory
country_event = {
	id = als.2
	title = "admiral_trait_gain"
	desc = {
		trigger = { has_authority = auth_hive_mind }
		text = "leader.newadmiraltrait.desc.hive"
	}
	desc = {
		trigger = { has_authority = auth_machine_intelligence }
		text = "leader.newadmiraltrait.desc.machine"
	}
	desc = {
		trigger = {
			NOR = {
				has_authority = auth_hive_mind
				has_authority = auth_machine_intelligence
			}
		}
		text = "leader.6.desc"
	}
	picture = GFX_evt_federation_fleet
	location = FROMFROM
	
	is_triggered_only = yes
	
	trigger = {
		is_country_type = default
		FROMFROM = {
			exists = leader
			leader = {
				leader_class = admiral
				num_traits < 9
				NOT = { 
					has_trait = leader_trait_cautious 
					has_trait = leader_trait_aggressive
				}
			}
		}
	}
	
	immediate = {
		FROMFROM = {
			leader = { save_event_target_as = officer }
			solar_system = { save_event_target_as = system }
		}
	}
	
	option = {
		name = GOOD
		FROMFROM = {
			leader = { add_trait = leader_trait_aggressive }
		}		
	}
}
# Unyielding gained from Victory
country_event = {
	id = als.3
	title = "admiral_trait_gain"
	desc = {
		trigger = { has_authority = auth_hive_mind }
		text = "leader.newadmiraltrait.desc.hive"
	}
	desc = {
		trigger = { has_authority = auth_machine_intelligence }
		text = "leader.newadmiraltrait.desc.machine"
	}
	desc = {
		trigger = {
			NOR = {
				has_authority = auth_hive_mind
				has_authority = auth_machine_intelligence
			}
		}
		text = "leader.7.desc"
	}
	picture = GFX_evt_federation_fleet
	location = FROMFROM
	
	is_triggered_only = yes
	
	trigger = {
		is_country_type = default
		FROMFROM = {
			exists = leader
			leader = {
				leader_class = admiral
				num_traits < 9
				NOT = { 
					has_trait = leader_trait_trickster
					has_trait = leader_trait_unyielding
				}
			}
		}
	}
	
	immediate = {
		FROMFROM = {
			leader = { save_event_target_as = officer }
			solar_system = { save_event_target_as = system }
		}
	}
	
	option = {
		name = GOOD
		FROMFROM = {
			leader = { add_trait = leader_trait_unyielding }
		}		
	}
}

# Gale Speed gained from Victory
country_event = {
	id = als.4
	title = "admiral_trait_gain"
	desc = {
		trigger = { has_authority = auth_hive_mind }
		text = "leader.newadmiraltrait.desc.hive"
	}
	desc = {
		trigger = { has_authority = auth_machine_intelligence }
		text = "leader.newadmiraltrait.desc.machine"
	}
	desc = {
		trigger = {
			NOR = {
				has_authority = auth_hive_mind
				has_authority = auth_machine_intelligence
			}
		}
		text = "leader.8.desc"
	}
	picture = GFX_evt_federation_fleet
	location = FROMFROM
	
	is_triggered_only = yes
	
	trigger = {
		is_country_type = default
		FROMFROM = {
			exists = leader
			leader = {
				leader_class = admiral
				num_traits < 9
				NOT = { 
					has_trait = leader_trait_lethargic
					has_trait = leader_trait_gale_speed
				}
			}
		}
	}
	
	immediate = {
		FROMFROM = {
			leader = { save_event_target_as = officer }
			solar_system = { save_event_target_as = system }
		}
	}
	
	option = {
		name = GOOD
		FROMFROM = {
			leader = { add_trait = leader_trait_gale_speed }
		}		
	}
}

# Lethargic lost from Victory
country_event = {
	id = als.5
	title = "admiral_trait_loss"
	desc = {
		trigger = { has_authority = auth_hive_mind }
		text = "leader.lostadmiraltrait.desc.hive"
	}
	desc = {
		trigger = { has_authority = auth_machine_intelligence }
		text = "leader.lostadmiraltrait.desc.machine"
	}
	desc = {
		trigger = {
			NOR = {
				has_authority = auth_hive_mind
				has_authority = auth_machine_intelligence
			}
		}
		text = "leader.9.desc"
	}
	picture = GFX_evt_federation_fleet
	location = FROMFROM
	
	is_triggered_only = yes
	
	trigger = {
		is_country_type = default
		FROMFROM = {
			exists = leader
			leader = { has_trait = leader_trait_lethargic }
		}
	}
	
	immediate = {
		FROMFROM = {
			leader = { save_event_target_as = officer }
			solar_system = { save_event_target_as = system }
		}
	}
	
	option = {
		name = GOOD
		FROMFROM = {
			leader = { remove_trait = leader_trait_lethargic }
		}		
	}
}

# Cautious gained from Defeat
fleet_event = {
	id = als.6
	title = "admiral_trait_gain"
	desc = {
		trigger = { owner = { has_authority = auth_hive_mind } }
		text = "leader.newadmiraltrait.desc.hive"
	}
	desc = {
		trigger = { owner = { has_authority = auth_machine_intelligence } }
		text = "leader.newadmiraltrait.desc.machine"
	}
	desc = {
		trigger = {
			owner = {
				NOR = {
					has_authority = auth_hive_mind
					has_authority = auth_machine_intelligence
				}
			}
		}
		text = "leader.10.desc"
	}
	picture = GFX_evt_federation_fleet
	location = ROOT
	
	is_triggered_only = yes
	
	trigger = {
		owner = { is_country_type = default }
		exists = leader
		leader = {
			leader_class = admiral
			num_traits < 9
			NOT = { 
				has_trait = leader_trait_cautious 
				has_trait = leader_trait_aggressive
			}
		}
	}
	
	immediate = {
		leader = { save_event_target_as = officer }
		solar_system = { save_event_target_as = system }
	}
	
	option = {
		name = GOOD
		leader = { add_trait = leader_trait_cautious }	
	}
}
###DEFEAT###
# Nervous gained from Defeat
fleet_event = {
	id = als.9000
	title = "admiral_trait_gain"
	desc = {
		trigger = { owner = { has_authority = auth_hive_mind } }
		text = "leader.newadmiraltrait.desc.hive"
	}
	desc = {
		trigger = { owner = { has_authority = auth_machine_intelligence } }
		text = "leader.newadmiraltrait.desc.machine"
	}
	desc = {
		trigger = {
			owner = {
				NOR = {
					has_authority = auth_hive_mind
					has_authority = auth_machine_intelligence
				}
			}
		}
		text = "leader.11.desc"
	}
	picture = GFX_evt_federation_fleet
	location = ROOT
	
	is_triggered_only = yes
	
	trigger = {
		owner = { is_country_type = default }
		exists = leader
		owner = { has_technology = tech_doctrine_fleet_size_2 }
		leader = {
			num_traits < 3
			NOT = { 
				has_trait = leader_trait_fleet_organizer
				has_trait = leader_trait_unyielding
				has_trait = leader_trait_nervous
			}
		}
	}
	
	immediate = {
		leader = { save_event_target_as = officer }
		solar_system = { save_event_target_as = system }
	}
	
	option = {
		name = UNFORTUNATE
		if = {
			limit = {
				owner = { 
					NOT = { has_authority = "auth_machine_intelligence" }
				}
			}
			leader = { add_trait = leader_trait_nervous }	
		}
		if = {
			limit = {
				owner = { has_authority = "auth_machine_intelligence" }
			}
			leader = { add_trait = leader_trait_unstable_code_base }	
		}
	}
}
###
# Unyielding gained from Defeat
fleet_event = {
	id = als.7
	title = "admiral_trait_gain"
	desc = {
		trigger = { owner = { has_authority = auth_hive_mind } }
		text = "leader.newadmiraltrait.desc.hive"
	}
	desc = {
		trigger = { owner = { has_authority = auth_machine_intelligence } }
		text = "leader.newadmiraltrait.desc.machine"
	}
	desc = {
		trigger = {
			owner = {
				NOR = {
					has_authority = auth_hive_mind
					has_authority = auth_machine_intelligence
				}
			}
		}
		text = "leader.12.desc"
	}
	picture = GFX_evt_federation_fleet
	location = ROOT
	
	is_triggered_only = yes
	
	trigger = {
		owner = { is_country_type = default }
		exists = leader
		leader = {
			leader_class = admiral
			num_traits < 9
			NOT = { 
				has_trait = leader_trait_unyielding
			}
		}
	}
	
	immediate = {
		leader = { save_event_target_as = officer }
		solar_system = { save_event_target_as = system }
	}
	
	option = {
		name = GOOD
		leader = { add_trait = leader_trait_unyielding }	
	}
}

# Gale Speed gained from Defeat
fleet_event = {
	id = als.8
	title = "admiral_trait_gain"
	desc = {
		trigger = { owner = { has_authority = auth_hive_mind } }
		text = "leader.newadmiraltrait.desc.hive"
	}
	desc = {
		trigger = { owner = { has_authority = auth_machine_intelligence } }
		text = "leader.newadmiraltrait.desc.machine"
	}
	desc = {
		trigger = {
			owner = {
				NOR = {
					has_authority = auth_hive_mind
					has_authority = auth_machine_intelligence
				}
			}
		}
		text = "leader.13.desc"
	}
	picture = GFX_evt_federation_fleet
	location = ROOT
	
	is_triggered_only = yes
	
	trigger = {
		owner = { is_country_type = default }
		exists = leader
		leader = {
			leader_class = admiral
			num_traits < 9
			NOT = { 
				has_trait = leader_trait_lethargic
				has_trait = leader_trait_gale_speed
			}
		}
	}
	
	immediate = {
		leader = { save_event_target_as = officer }
		solar_system = { save_event_target_as = system }
	}
	
	option = {
		name = GOOD
		leader = { add_trait = leader_trait_gale_speed }	
	}
}

# Lethargic gained from Defeat
fleet_event = {
	id = als.9
	title = "admiral_trait_gain"
	desc = {
		trigger = { owner = { has_authority = auth_hive_mind } }
		text = "leader.newadmiraltrait.desc.hive"
	}
	desc = {
		trigger = { owner = { has_authority = auth_machine_intelligence } }
		text = "leader.newadmiraltrait.desc.machine"
	}
	desc = {
		trigger = {
			owner = {
				NOR = {
					has_authority = auth_hive_mind
					has_authority = auth_machine_intelligence
				}
			}
		}
		text = "leader.14.desc"
	}
	picture = GFX_evt_federation_fleet
	location = ROOT
	
	is_triggered_only = yes
	
	trigger = {
		owner = { is_country_type = default }
		exists = leader
		leader = {
			leader_class = admiral
			num_traits < 9
			NOT = { 
				has_trait = leader_trait_gale_speed
				has_trait = leader_trait_lethargic
			}
		}
	}
	
	immediate = {
		leader = { save_event_target_as = officer }
		solar_system = { save_event_target_as = system }
	}
	
	option = {
		name = UNFORTUNATE
		leader = { add_trait = leader_trait_lethargic }	
	}
}

# Engineer gained from Repairing
fleet_event = {
	id = als.10
	title = "admiral_trait_gain"
	desc = {
		trigger = { owner = { has_authority = auth_hive_mind } }
		text = "leader.optimizations.desc.hive"
	}
	desc = {
		trigger = { owner = { has_authority = auth_machine_intelligence } }
		text = "leader.optimizations.desc.machine"
	}
	desc = {
		trigger = {
			owner = {
				NOR = {
					has_authority = auth_hive_mind
					has_authority = auth_machine_intelligence
				}
			}
		}
		text = "leader.15.desc"
	}
	picture = GFX_evt_federation_fleet
	location = ROOT
	
	trigger = {
		owner = {
			is_country_type = default
			has_technology = tech_doctrine_fleet_size_3
			NOT = { has_ethic = ethic_gestalt_consciousness }
		}
		is_being_repaired = yes
		exists = leader
		leader = {
			leader_class = admiral
			num_traits < 9
			NOT = { has_trait = leader_trait_engineer }
		}
	}
	
	mean_time_to_happen = {
		months = 120
	}
	
	immediate = {
		leader = { save_event_target_as = officer }
	}
	
	option = {
		name = GOOD
		leader = { add_trait = leader_trait_engineer }	
	}
}
###NERVOUS LOST###
# Nervous lost from Victory
country_event = {
	id = als.9001
	title = "admiral_trait_loss"
	desc = {
		trigger = { has_authority = auth_hive_mind }
		text = "leader.lostadmiraltrait.desc.hive"
	}
	desc = {
		trigger = { has_authority = auth_machine_intelligence }
		text = "leader.lostadmiraltrait.desc.machine"
	}
	desc = {
		trigger = {
			NOR = {
				has_authority = auth_hive_mind
				has_authority = auth_machine_intelligence
			}
		}
		text = "leader.17.desc"
	}
	picture = GFX_evt_federation_fleet
	location = FROMFROM
	
	is_triggered_only = yes
	
	trigger = {
		is_country_type = default
		FROMFROM = {
			exists = leader
			leader = { 
				OR = {
					has_trait = leader_trait_nervous
					has_trait = leader_trait_unstable_code_base
				}
			}
		}
	}
	
	immediate = {
		FROMFROM = {
			leader = { save_event_target_as = officer }
			solar_system = { save_event_target_as = system }
		}
	}
	
	option = {
		name = GOOD
		FROMFROM = {
			if = {
				limit = {
					owner = { 
						NOT = { has_authority = "auth_machine_intelligence" }
					}
				}
				leader = { remove_trait = leader_trait_nervous }
			}
			if = {
				limit = {
					owner = { has_authority = "auth_machine_intelligence" }
				}
				leader = { remove_trait = leader_trait_unstable_code_base }
			}
		}
	}
}
###
# Logistics gained from Large Fleet
fleet_event = {
	id = als.11
	title = "admiral_trait_gain"
	desc = {
		trigger = { owner = { has_authority = auth_hive_mind } }
		text = "leader.optimizations.desc.hive"
	}
	desc = {
		trigger = { owner = { has_authority = auth_machine_intelligence } }
		text = "leader.optimizations.desc.machine"
	}
	desc = {
		trigger = {
			owner = {
				NOR = {
					has_authority = auth_hive_mind
					has_authority = auth_machine_intelligence
				}
			}
		}
		text = "leader.18.desc"
	}
	picture = GFX_evt_federation_fleet
	location = ROOT
	
	trigger = {
		owner = {
			is_country_type = default
			NOT = { has_ethic = ethic_gestalt_consciousness }
		}
		exists = leader
		num_ships > 19
		leader = {
			leader_class = admiral
			num_traits < 9
			NOT = { has_trait = leader_trait_fleet_logistician }
		}
	}
	
	mean_time_to_happen = {
		months = 300
	}
	
	immediate = {
		leader = { save_event_target_as = officer }
	}
	
	option = {
		name = GOOD
		if = {
			limit = {
				owner = { 
					NOT = { has_authority = "auth_machine_intelligence" }
				}
			}
			leader = { add_trait = leader_trait_fleet_logistician }	
		}
		if = {
			limit = {
				owner = { has_authority = "auth_machine_intelligence" }
			}
			leader = { add_trait = leader_trait_maintenance_loop }	
		}
	}
}

# Scout gained from Exploration
ship_event = {
	id = als.12
	title = "admiral_trait_gain"
	desc = {
		trigger = { owner = { has_authority = auth_hive_mind } }
		text = "leader.optimizations.desc.hive"
	}
	desc = {
		trigger = { owner = { has_authority = auth_machine_intelligence } }
		text = "leader.optimizations.desc.machine"
	}
	desc = {
		trigger = {
			owner = {
				NOR = {
					has_authority = auth_hive_mind
					has_authority = auth_machine_intelligence
				}
			}
		}
		text = "leader.19.desc"
	}
	picture = GFX_evt_federation_fleet
	location = ROOT
	
	is_triggered_only = yes
	
	trigger = {
		owner = {
			is_country_type = default
			NOT = { has_ethic = ethic_gestalt_consciousness }
		}
		fleet = {
			exists = leader
			num_ships > 1
			leader = {
				leader_class = admiral
				num_traits < 9
				NOT = { has_trait = leader_trait_scout }
			}
		}
	}
	
	immediate = {
		fleet = {
			leader = { save_event_target_as = officer }
			solar_system = { save_event_target_as = system }
		}
	}
	
	option = {
		name = GOOD
		fleet = {
			leader = { add_trait = leader_trait_scout }
		}
	}
}
####SAVE GAME JUST IN CASE####DISABLED###
country_event = {
	id = als.19
	hide_window = yes
	is_triggered_only = yes

	trigger = {
		always = no
		NOR = {
			is_country_type = swarm
			is_country_type = portal_holder
		}
		OR = {
			has_technology = tech_doctrine_navy_size_3
			has_technology = tech_doctrine_navy_size_1
			has_technology = tech_doctrine_fleet_size_5
			has_technology = tech_doctrine_fleet_size_3
			has_technology = tech_doctrine_fleet_size_1
			has_tradition = tr_supremacy_finish
			has_tradition = tr_supremacy_adopt
		}
	}

	immediate = {
		every_owned_leader = {
			limit = {
				leader_class = admiral
				has_leader_flag = att_admiral
			}
			if = {
				limit = {
					root = {
						has_tradition = tr_supremacy_finish
					}
					NOR = {
						has_trait = att_trait_shock_lv2
						has_trait = att_trait_shock_lv2_a
						has_trait = att_trait_shock_lv3_a
						has_trait = att_trait_shock_lv4_a
						has_trait = att_trait_shock_lv5_a
						has_trait = att_trait_shock_max_a
						has_trait = att_trait_shock_lv3
						has_trait = att_trait_shock_lv4
						has_trait = att_trait_shock_lv5
						has_trait = att_trait_shock_max
					}
				}
				remove_trait = att_trait_shock_lv0
				remove_trait = att_trait_shock_lv1
				add_trait = att_trait_shock_lv2
			}
			if = {
				limit = {
					root = {
						has_tradition = tr_supremacy_finish
					}
					NOR = {
						has_trait = att_trait_siege_lv1
						has_trait = att_trait_siege_lv2
						has_trait = att_trait_siege_lv3
						has_trait = att_trait_siege_lv4
						has_trait = att_trait_siege_lv5
						has_trait = att_trait_siege_max
					}
				}
				remove_trait = att_trait_siege_lv0
				add_trait = att_trait_siege_lv1
			}
			if = {
				limit = {
					root = {
						has_tradition = tr_supremacy_adopt
					}
					NOR = {
						has_trait = att_trait_shock_lv1
						has_trait = att_trait_shock_lv1_a
						has_trait = att_trait_shock_lv2
						has_trait = att_trait_shock_lv2_a
						has_trait = att_trait_shock_lv3
						has_trait = att_trait_shock_lv3_a
						has_trait = att_trait_shock_lv4
						has_trait = att_trait_shock_lv4_a
						has_trait = att_trait_shock_lv5
						has_trait = att_trait_shock_lv5_a
						has_trait = att_trait_shock_max
						has_trait = att_trait_shock_max_a
					}
				}
				remove_trait = att_trait_shock_lv0
				add_trait = att_trait_shock_lv1
			}
			if = {
				limit = {
					root = {
						has_technology = tech_doctrine_navy_size_3
					}
					NOR = {
						has_trait = att_trait_accuracy_lv2
						has_trait = att_trait_accuracy_lv3
						has_trait = att_trait_accuracy_lv4
						has_trait = att_trait_accuracy_lv5
						has_trait = att_trait_accuracy_max
					}
				}
				remove_trait = att_trait_accuracy_lv0
				remove_trait = att_trait_accuracy_lv1
				add_trait = att_trait_accuracy_lv2
			}
			if = {
				limit = {
					root = {
						has_technology = tech_doctrine_navy_size_1
					}
					NOR = {
						has_trait = att_trait_accuracy_lv1
						has_trait = att_trait_accuracy_lv2
						has_trait = att_trait_accuracy_lv3
						has_trait = att_trait_accuracy_lv4
						has_trait = att_trait_accuracy_lv5
						has_trait = att_trait_accuracy_max
					}
				}
				remove_trait = att_trait_accuracy_lv0
				add_trait = att_trait_accuracy_lv1
			}
			if = {
				limit = {
					root = {
						has_technology = tech_doctrine_fleet_size_5
					}
					NOR = {
						has_trait = att_trait_movement_lv4
						has_trait = att_trait_movement_lv5
						has_trait = att_trait_movement_max
					}
				}
				remove_trait = att_trait_movement_lv0
				remove_trait = att_trait_movement_lv1
				remove_trait = att_trait_movement_lv2
				add_trait = att_trait_movement_lv3
			}
			if = {
				limit = {
					root = {
						has_technology = tech_doctrine_fleet_size_3
					}
					NOR = {
						has_trait = att_trait_movement_lv3
						has_trait = att_trait_movement_lv4
						has_trait = att_trait_movement_lv5
						has_trait = att_trait_movement_max
					}
				}
				remove_trait = att_trait_movement_lv0
				remove_trait = att_trait_movement_lv1
				add_trait = att_trait_movement_lv2
			}
			if = {
				limit = {
					root = {
						has_technology = tech_doctrine_fleet_size_1
					}
					NOR = {
						has_trait = att_trait_movement_lv2
						has_trait = att_trait_movement_lv3
						has_trait = att_trait_movement_lv4
						has_trait = att_trait_movement_lv5
						has_trait = att_trait_movement_max
					}
				}
				remove_trait = att_trait_movement_lv0
				add_trait = att_trait_movement_lv1
			}
		}
	}
}

####GIVE ALS STATUS TRAITS###
fleet_event = {
	id = als.20
	hide_window = yes
	
	trigger = {
		exists = leader
		leader = {
			leader_class = admiral
			NOT = {
				has_leader_flag = att_admiral
			}
			NOR = {
				has_trait = att_trait_accuracy_lv0
				has_trait = att_trait_accuracy_lv1
				has_trait = att_trait_accuracy_lv2
				has_trait = att_trait_accuracy_lv3
				has_trait = att_trait_accuracy_lv4
				has_trait = att_trait_accuracy_lv5
				has_trait = att_trait_accuracy_max
				has_trait = att_trait_movement_lv0
				has_trait = att_trait_movement_lv1
				has_trait = att_trait_movement_lv2
				has_trait = att_trait_movement_lv3
				has_trait = att_trait_movement_lv4
				has_trait = att_trait_movement_lv5
				has_trait = att_trait_movement_max
				has_trait = att_trait_shock_lv0
				has_trait = att_trait_shock_lv1
				has_trait = att_trait_shock_lv1_a
				has_trait = att_trait_shock_lv2
				has_trait = att_trait_shock_lv2_a
				has_trait = att_trait_shock_lv3
				has_trait = att_trait_shock_lv3_a
				has_trait = att_trait_shock_lv4
				has_trait = att_trait_shock_lv4_a
				has_trait = att_trait_shock_lv5
				has_trait = att_trait_shock_lv5_a
				has_trait = att_trait_shock_max
				has_trait = att_trait_shock_max_a
				has_trait = att_trait_siege_lv0
				has_trait = att_trait_siege_lv1
				has_trait = att_trait_siege_lv2
				has_trait = att_trait_siege_lv3
				has_trait = att_trait_siege_lv4
				has_trait = att_trait_siege_lv5
				has_trait = att_trait_siege_max
			}
		}
	}
	
	mean_time_to_happen = {
		days = 5
	}
	
	immediate = {
		leader = {
			set_leader_flag = att_admiral
			als_effect_set_admiral_base_4_traits = yes
			if = {
				limit = {
					leader_class = admiral
					NOR = {
						has_leader_flag = als_admiral_has_strategy_traits
						has_leader_flag = als_admiral_has_tactic_traits
					}
					ROOT = {
						NOR = {
							is_country_type = swarm
							is_country_type = extradimensional
							is_country_type = extradimensional_2
							is_country_type = extradimensional_3
							is_country_type = ai_empire
							is_country_type = cybrex_empire 
							is_country_type = dormant_marauders 
							is_country_type = ruined_marauders
							is_country_type = awakened_marauders
							is_country_type = fallen_empire
							is_country_type = awakened_fallen_empire
						}
					}
				}
				random_list = {
					15 = { #strategy
						modifier = {
							factor = 0
							leader = {
								has_trait = leader_trait_tactician
							}
						}
						set_leader_flag = als_admiral_has_strategy_traits
						random_list = {
							1 = {
								add_trait = als_trait_strategic_energy
							}
							1 = {
								add_trait = als_trait_strategic_explosive
							}
							1 = {
								add_trait = als_trait_strategic_kinetic
							}
							1 = {
								add_trait = als_trait_strategic_point_defense
							}
							1 = {
								modifier = {
									factor = 0
									ROOT = {
										NOR = {
											has_technology = tech_strike_craft_1
											has_technology = tech_strike_craft_2
											has_technology = tech_strike_craft_3
										}
									}
								}
								add_trait = als_trait_strategic_strike_craft
							}
							1 = {
								add_trait = als_trait_strategic_artillery
							}
							1 = {
								add_trait = als_trait_strategic_anti_hull
							}
							1 = {
								add_trait = als_trait_strategic_anti_armor
							}
							1 = {
								add_trait = als_trait_strategic_anti_shield
							}
						}
					}
					10 = {
						modifier = {
							factor = 0
							leader = {
								has_trait = leader_trait_strategist
							}
						}
						set_leader_flag = als_admiral_has_tactic_traits
						effect_als_tactic_set = yes
					}
				}
			}
			
			else_if = {
				limit = {
					leader_class = admiral
					root.owner = {
						OR = {
							is_country_type = swarm
							is_country_type = extradimensional
							is_country_type = extradimensional_2
							is_country_type = extradimensional_3
							is_country_type = ai_empire
							is_country_type = cybrex_empire 
							is_country_type = dormant_marauders 
							is_country_type = ruined_marauders
							is_country_type = awakened_marauders
							is_country_type = fallen_empire
							is_country_type = awakened_fallen_empire
						}
					}        
					NOR = {
						has_leader_flag = als_admiral_has_strategy_traits
						has_leader_flag = als_admiral_has_tactic_traits
					}     
				}
				save_event_target_as = als_npc_admiral
				root.owner = {
					country_event = {
						id = als.300
						days = 1
					}
				}
			}
		}
	}
}

###LEVEL UP ACCURACY FOR EVERY SHIP YOU DESTROY/FORCE THEM GOES disengaged###
country_event = {
	id = als.21
	hide_window = yes
	is_triggered_only = yes
	
	trigger = {
		fromfrom = {
			owner = {
				NOR = {
					is_country_type = swarm
					is_country_type = portal_holder
				}
			}
			exists = leader
			leader = {
				leader_class = admiral
				has_leader_flag = att_admiral
				OR = {
					has_trait = att_trait_accuracy_lv0
					has_trait = att_trait_accuracy_lv1
					has_trait = att_trait_accuracy_lv2
					has_trait = att_trait_accuracy_lv3
					has_trait = att_trait_accuracy_lv4
					has_trait = att_trait_accuracy_lv5
				}
			}
		}
	}

	immediate = {
		fromfrom = {
			leader = {
				if = {
					limit = {
						has_trait = att_trait_accuracy_lv0
					}
					random_list = {
						74 = { change_variable = { which = att_admiral_accuracy_exp value = 1 } }
						1 = {
							add_trait = att_trait_accuracy_lv1
							remove_trait = att_trait_accuracy_lv0
						}
					}
					if = {
						limit = {
							check_variable = { which = att_admiral_accuracy_exp value = 33 }
						}
						add_trait = att_trait_accuracy_lv1
						remove_trait = att_trait_accuracy_lv0
					}
					add_experience = 1
					break = yes
				}
				if = {
					limit = {
						has_trait = att_trait_accuracy_lv1
					}
					random_list = {
						149 = { change_variable = { which = att_admiral_accuracy_exp value = 1 } }
						1 = {
							add_trait = att_trait_accuracy_lv2
							remove_trait = att_trait_accuracy_lv1
						}
					}
					if = {
						limit = {
							check_variable = { which = att_admiral_accuracy_exp value = 100 }
						}
						add_trait = att_trait_accuracy_lv2
						remove_trait = att_trait_accuracy_lv1
					}
					add_experience = 1
					break = yes
				}
				if = {
					limit = {
						has_trait = att_trait_accuracy_lv2
					}
					random_list = {
						249 = { change_variable = { which = att_admiral_accuracy_exp value = 1 } }
						1 = {
							add_trait = att_trait_accuracy_lv3
							remove_trait = att_trait_accuracy_lv2
						}
					}
					if = {
						limit = {
							check_variable = { which = att_admiral_accuracy_exp value = 225 }
						}
						add_trait = att_trait_accuracy_lv3
						remove_trait = att_trait_accuracy_lv2
					}
					add_experience = 2
					break = yes
				}
				if = {
					limit = {
						has_trait = att_trait_accuracy_lv3
					}
					random_list = {
						499 = { change_variable = { which = att_admiral_accuracy_exp value = 1 } }
						1 = {
							add_trait = att_trait_accuracy_lv4
							remove_trait = att_trait_accuracy_lv3
						}
					}
					if = {
						limit = {
							check_variable = { which = att_admiral_accuracy_exp value = 450 }
						}
						add_trait = att_trait_accuracy_lv4
						remove_trait = att_trait_accuracy_lv3
					}
					add_experience = 2
					break = yes
				}
				if = {
					limit = {
						has_trait = att_trait_accuracy_lv4
					}
					random_list = {
						699 = { change_variable = { which = att_admiral_accuracy_exp value = 1 } }
						1 = {
							add_trait = att_trait_accuracy_lv5
							remove_trait = att_trait_accuracy_lv4
						}
					}
					if = {
						limit = {
							check_variable = { which = att_admiral_accuracy_exp value = 750 }
						}
						add_trait = att_trait_accuracy_lv5
						remove_trait = att_trait_accuracy_lv4
					}
					add_experience = 3
					break = yes
				}
				if = {
					limit = {
						has_trait = att_trait_accuracy_lv5
					}
					random_list = {
						749 = { change_variable = { which = att_admiral_accuracy_exp value = 1 } }
						1 = {
							add_trait = att_trait_accuracy_max
							remove_trait = att_trait_accuracy_lv5
						}
					}
					if = {
						limit = {
							check_variable = { which = att_admiral_accuracy_exp value = 1250 }
						}
						add_trait = att_trait_accuracy_max
						remove_trait = att_trait_accuracy_lv5
					}
					add_experience = 3
					break = yes
				}
			}	
		}
	}
}

###LEVEL UP SHOCK THROUGH UPON DESTROY HOSTILE FLEET######
country_event = {
	id = als.22
	hide_window = yes
	is_triggered_only = yes
	
	trigger = {
		NOR = {
			is_country_type = swarm
			is_country_type = portal_holder
		}
		fromfrom = {
			exists = leader
			leader = {
				leader_class = admiral
				has_leader_flag = att_admiral
				OR = {
					has_trait = att_trait_shock_lv0
					has_trait = att_trait_shock_lv1
					has_trait = att_trait_shock_lv2
					has_trait = att_trait_shock_lv3
					has_trait = att_trait_shock_lv4
					has_trait = att_trait_shock_lv5
				}
			}		
		}
#		fromfromfrom = {
#			NOR = {
#				is_ship_size = mining_station
#				is_ship_size = research_station
#			}
#		}
	}

	immediate = {
		fromfrom = {
			leader = {
				if = {
					limit = {
						has_trait = att_trait_shock_lv0
					}
					random_list = {
						9 = {}
						1 = {
							add_trait = att_trait_shock_lv1
							remove_trait = att_trait_shock_lv0
						}
					}
					break = yes
				}
				if = {
					limit = {
						has_trait = att_trait_shock_lv1
					}
					random_list = {
						49 = {}
						1 = {
							add_trait = att_trait_shock_lv2
							remove_trait = att_trait_shock_lv1
						}
					}
					break = yes
				}
				if = {
					limit = {
						has_trait = att_trait_shock_lv2
					}
					random_list = {
						69 = {}
						1 = {
							add_trait = att_trait_shock_lv3
							remove_trait = att_trait_shock_lv2
						}
					}
					break = yes
				}
				if = {
					limit = {
						has_trait = att_trait_shock_lv3
					}
					random_list = {
						99 = {}
						1 = {
							add_trait = att_trait_shock_lv4
							remove_trait = att_trait_shock_lv3
						}
					}
					break = yes
				}
				if = {
					limit = {
						has_trait = att_trait_shock_lv4
					}
					random_list = {
						149 = {}
						1 = {
							add_trait = att_trait_shock_lv5
							remove_trait = att_trait_shock_lv4
						}
					}
					break = yes
				}
				if = {
					limit = {
						has_trait = att_trait_shock_lv5
					}
					random_list = {
						199 = {}
						1 = {
							add_trait = att_trait_shock_max
							remove_trait = att_trait_shock_lv5
						}
					}
					break = yes
				}
			}			
		}
	}
}
###LEVEL UP SHOCK THROUGH TIME######
#DISABLED in 2.0 since defensive ppl wont like it at all#
country_event = {
	id = als.23
	hide_window = yes
	is_triggered_only = yes
	
	trigger = {
		OR = {
			is_country_type = default
			is_country_type = fallen_empire
			is_country_type = awakened_fallen_empire
		}
		any_owned_leader = {
			leader_class = admiral
			has_leader_flag = att_admiral
			OR = {
				has_trait = att_trait_siege_lv0
				has_trait = att_trait_siege_lv1
				has_trait = att_trait_siege_lv2
				has_trait = att_trait_siege_lv3
				has_trait = att_trait_siege_lv4
				has_trait = att_trait_siege_lv5
			}
		}		
	}

#	mean_time_to_happen = {
#		days = 60
#	}
	
	immediate = {
		random_owned_leader = {
			limit = {
				leader_class = admiral
				has_leader_flag = att_admiral
				OR = {
					has_trait = att_trait_siege_lv0
					has_trait = att_trait_siege_lv1
					has_trait = att_trait_siege_lv2
					has_trait = att_trait_siege_lv3
					has_trait = att_trait_siege_lv4
					has_trait = att_trait_siege_lv5
				}
			}
			if = {
				limit = {
					has_trait = att_trait_siege_lv0
				}
				random_list = {
					99 = {}
					1 = {
						add_trait = att_trait_siege_lv1
						remove_trait = att_trait_siege_lv0
					}
				}
				break = yes
			}
			if = {
				limit = {
					has_trait = att_trait_siege_lv1
				}
				random_list = {
					149 = {}
					1 = {
						add_trait = att_trait_siege_lv2
						remove_trait = att_trait_siege_lv1
					}
				}
				break = yes
			}
			if = {
				limit = {
					has_trait = att_trait_siege_lv2
				}
				random_list = {
					199 = {}
					1 = {
						add_trait = att_trait_siege_lv3
						remove_trait = att_trait_siege_lv2
					}
				}
				break = yes
			}
			if = {
				limit = {
					has_trait = att_trait_siege_lv3
				}
				random_list = {
					299 = {}
					1 = {
						add_trait = att_trait_siege_lv4
						remove_trait = att_trait_siege_lv3
					}
				}
				break = yes
			}
			if = {
				limit = {
					has_trait = att_trait_siege_lv4
				}
				random_list = {
					399 = {}
					1 = {
						add_trait = att_trait_siege_lv5
						remove_trait = att_trait_siege_lv4
					}
				}
				break = yes
			}
			if = {
				limit = {
					has_trait = att_trait_siege_lv5
				}
				random_list = {
					499 = {}
					1 = {
						add_trait = att_trait_siege_max
						remove_trait = att_trait_siege_lv5
					}
				}
				break = yes
			}
		}	
	}
}


###LEVEL UP MOVEMENT EVERYTIME ENTER SYSTEM###
ship_event = {
	id = als.24
	hide_window = yes
	is_triggered_only = yes
	
	trigger = {
		fromfrom = {
			NOR = {
				is_country_type = swarm
				is_country_type = portal_holder
			}
		}
		exists = leader
		leader = {
			leader_class = admiral
			has_leader_flag = att_admiral
			NOT = {
				has_leader_flag = att_admiral_FTL_cooldown
			}
			OR = {
				has_trait = att_trait_movement_lv0
				has_trait = att_trait_movement_lv1
				has_trait = att_trait_movement_lv2
				has_trait = att_trait_movement_lv3
				has_trait = att_trait_movement_lv4
				has_trait = att_trait_movement_lv5
			}
		}
	}

	
	immediate = {
		leader = {		
			if = {
				limit = {
					has_trait = att_trait_movement_lv0
				}
				add_experience = 0.02
				random_list = {
					499 = { change_variable = { which = att_admiral_movement_exp value = 0.1 } }
					1 = {
						add_trait = att_trait_movement_lv1
						remove_trait = att_trait_movement_lv0
						set_timed_leader_flag = { flag = att_admiral_FTL_cooldown days = 720 }
					}
				}
				if = {
					limit = {
						check_variable = { which = att_admiral_movement_exp value > 100 }
					}
					add_trait = att_trait_movement_lv1
					remove_trait = att_trait_movement_lv0
					set_timed_leader_flag = { flag = att_admiral_FTL_cooldown days = 720 }
				}
				break = yes
			}
			if = {
				limit = {
					has_trait = att_trait_movement_lv1
				}
				add_experience = 0.03
				random_list = {
					999 = { change_variable = { which = att_admiral_movement_exp value = 0.1 } }
					1 = {
						add_trait = att_trait_movement_lv2
						remove_trait = att_trait_movement_lv1
						set_timed_leader_flag = { flag = att_admiral_FTL_cooldown days = 720 }
					}
				}
				if = {
					limit = {
						check_variable = { which = att_admiral_movement_exp value > 200 }
					}
					add_trait = att_trait_movement_lv2
					remove_trait = att_trait_movement_lv1
					set_timed_leader_flag = { flag = att_admiral_FTL_cooldown days = 720 }
				}
				break = yes
			}
			if = {
				limit = {
					has_trait = att_trait_movement_lv2
				}
				add_experience = 0.04
				random_list = {
					1999 = { change_variable = { which = att_admiral_movement_exp value = 0.1 } }
					1 = {
						add_trait = att_trait_movement_lv3
						remove_trait = att_trait_movement_lv2
						set_timed_leader_flag = { flag = att_admiral_FTL_cooldown days = 1080 }
					}
				}
				if = {
					limit = {
						check_variable = { which = att_admiral_movement_exp value > 400 }
					}
					add_trait = att_trait_movement_lv3
					remove_trait = att_trait_movement_lv2
					set_timed_leader_flag = { flag = att_admiral_FTL_cooldown days = 1080 }
				}
				break = yes
			}
			if = {
				limit = {
					has_trait = att_trait_movement_lv3
				}
				add_experience = 0.05
				random_list = {
					3999 = { change_variable = { which = att_admiral_movement_exp value = 0.1 } }
					1 = {
						add_trait = att_trait_movement_lv4
						remove_trait = att_trait_movement_lv3
						set_timed_leader_flag = { flag = att_admiral_FTL_cooldown days = 1440 }
					}
				}
				if = {
					limit = {
						check_variable = { which = att_admiral_movement_exp value > 800 }
					}
					add_trait = att_trait_movement_lv4
					remove_trait = att_trait_movement_lv3
					set_timed_leader_flag = { flag = att_admiral_FTL_cooldown days = 1440 }
				}
				break = yes
			}
			if = {
				limit = {
					has_trait = att_trait_movement_lv4
				}
				add_experience = 0.06
				random_list = {
					7999 = { change_variable = { which = att_admiral_movement_exp value = 0.1 } }
					1 = {
						add_trait = att_trait_movement_lv5
						remove_trait = att_trait_movement_lv4
						set_timed_leader_flag = { flag = att_admiral_FTL_cooldown days = 1800 }
					}
				}
				if = {
					limit = {
						check_variable = { which = att_admiral_movement_exp value > 1600 }
					}
					add_trait = att_trait_movement_lv5
					remove_trait = att_trait_movement_lv4
					set_timed_leader_flag = { flag = att_admiral_FTL_cooldown days = 1800 }
				}
				break = yes
			}
			if = {
				limit = {
					has_trait = att_trait_movement_lv5
				}
				add_experience = 0.08
				random_list = {
					15999 = { change_variable = { which = att_admiral_movement_exp value = 0.1 } }
					1 = {
						add_trait = att_trait_movement_max
						remove_trait = att_trait_movement_lv5
						set_timed_leader_flag = { flag = att_admiral_FTL_cooldown days = 360 }
					}
				}
				if = {
					limit = {
						check_variable = { which = att_admiral_movement_exp value > 3200 }
					}
					add_trait = att_trait_movement_max
					remove_trait = att_trait_movement_lv5
					set_timed_leader_flag = { flag = att_admiral_FTL_cooldown days = 360 }
				}
				break = yes
			}
			if = {
				limit = {
					has_trait = att_trait_movement_max
				}
				add_experience = 0.1
				break = yes
			}
		}	
	}
}
###LEVEL UP SIEGE THROUGH TIME OF WAR######
fleet_event = {
	id = als.25
	hide_window = yes
#	is_triggered_only = yes
	
	trigger = {
		owner = {
			is_scope_valid = yes
			OR = {
				is_at_war = yes
				has_crisis = yes
				has_global_flag = war_in_heaven_ongoing
				has_global_flag = gray_goo_crisis_active
				AND = {
					has_global_flag = great_khan_announcement
					NOT = { has_global_flag = great_khan_dead }
				}
			}
		}
		exists = leader
		leader = {
			leader_class = admiral
			has_leader_flag = att_admiral
			OR = {
				has_trait = att_trait_siege_lv0
				has_trait = att_trait_siege_lv1
				has_trait = att_trait_siege_lv2
				has_trait = att_trait_siege_lv3
				has_trait = att_trait_siege_lv4
				has_trait = att_trait_siege_lv5
			}
		}		
	}

	mean_time_to_happen = {
		days = 30
	}
	
	immediate = {
		leader = {
			if = {
				limit = {
					leader_class = admiral
					has_leader_flag = att_admiral
					OR = {
						has_trait = att_trait_siege_lv0
						has_trait = att_trait_siege_lv1
						has_trait = att_trait_siege_lv2
						has_trait = att_trait_siege_lv3
						has_trait = att_trait_siege_lv4
						has_trait = att_trait_siege_lv5
					}
				}
				if = {
					limit = {
						NOT = {
							has_leader_flag = att_admiral_siege_levelup_end
						}
					}
					IF = {
						limit = {
							has_trait = att_trait_siege_lv0
						}
						random_list = {
							20 = {
								change_variable = { which = att_admiral_siege_exp value = 0.4 }
							}
							10 = {
								change_variable = { which = att_admiral_siege_exp value = 0.6 }
							}
							1 = { 
								remove_trait = att_trait_siege_lv0
								add_trait = att_trait_siege_lv1
								set_timed_leader_flag = { flag = att_admiral_siege_levelup_end days = 720 }
							}
						}
						if = {
							limit = {
								check_variable = { which = att_admiral_siege_exp value > 15 }
							}
							remove_trait = att_trait_siege_lv0
							add_trait = att_trait_siege_lv1
							set_timed_leader_flag = { flag = att_admiral_siege_levelup_end days = 720 }
						}
						break = yes
					}
					IF = {
						limit = {
							has_trait = att_trait_siege_lv1
						}
						random_list = {
							40 = {
								change_variable = { which = att_admiral_siege_exp value = 0.4 }
							}
							10 = {
								change_variable = { which = att_admiral_siege_exp value = 0.6 }
							}
							1 = { 
								remove_trait = att_trait_siege_lv1
								add_trait = att_trait_siege_lv2
								set_timed_leader_flag = { flag = att_admiral_siege_levelup_end days = 720 }
							}
						}
						if = {
							limit = {
								check_variable = { which = att_admiral_siege_exp value > 45 }
							}
							remove_trait = att_trait_siege_lv1
							add_trait = att_trait_siege_lv2
							set_timed_leader_flag = { flag = att_admiral_siege_levelup_end days = 720 }
						}
						break = yes
					}
					IF = {
						limit = {
							has_trait = att_trait_siege_lv2
						}
						random_list = {
							70 = {
								change_variable = { which = att_admiral_siege_exp value = 0.4 }
							}
							10 = {
								change_variable = { which = att_admiral_siege_exp value = 0.6 }
							}
							1 = { 
								remove_trait = att_trait_siege_lv2
								add_trait = att_trait_siege_lv3
								set_timed_leader_flag = { flag = att_admiral_siege_levelup_end days = 720 }
							}
						}
						if = {
							limit = {
								check_variable = { which = att_admiral_siege_exp value > 90 }
							}
							remove_trait = att_trait_siege_lv2
							add_trait = att_trait_siege_lv3
							set_timed_leader_flag = { flag = att_admiral_siege_levelup_end days = 720 }
						}
						break = yes
					}
					IF = {
						limit = {
								has_trait = att_trait_siege_lv3
						}
						random_list = {
							110 = {
								change_variable = { which = att_admiral_siege_exp value = 0.4 }
							}
							10 = {
								change_variable = { which = att_admiral_siege_exp value = 0.6 }
							}
							1 = { 
								remove_trait = att_trait_siege_lv3
								add_trait = att_trait_siege_lv4
								set_timed_leader_flag = { flag = att_admiral_siege_levelup_end days = 720 }
							}
						}
						if = {
							limit = {
								check_variable = { which = att_admiral_siege_exp value > 150 }
							}
							remove_trait = att_trait_siege_lv3
							add_trait = att_trait_siege_lv4
							set_timed_leader_flag = { flag = att_admiral_siege_levelup_end days = 720 }
						}
						break = yes
					}
					IF = {
						limit = {
							has_trait = att_trait_siege_lv4
						}
						random_list = {
							150 = {
								change_variable = { which = att_admiral_siege_exp value = 0.4 }
							}
							10 = {
								change_variable = { which = att_admiral_siege_exp value = 0.6 }
							}
							1 = { 
								remove_trait = att_trait_siege_lv4
								add_trait = att_trait_siege_lv5
								set_timed_leader_flag = { flag = att_admiral_siege_levelup_end days = 720 }
							}
						}
						if = {
							limit = {
								check_variable = { which = att_admiral_siege_exp value > 300 }
							}
							remove_trait = att_trait_siege_lv4
							add_trait = att_trait_siege_lv5
							set_timed_leader_flag = { flag = att_admiral_siege_levelup_end days = 720 }
						}
						break = yes
					}
					IF = {
						limit = {
							has_trait = att_trait_siege_lv5
						}
						random_list = {
							200 = {
								change_variable = { which = att_admiral_siege_exp value = 0.4 }
							}
							10 = {
								change_variable = { which = att_admiral_siege_exp value = 0.6 }
							}
							1 = { 
								remove_trait = att_trait_siege_lv5
								add_trait = att_trait_siege_max
								set_timed_leader_flag = { flag = att_admiral_siege_levelup_end days = 720 }
							}
						}
						if = {
							limit = {
								check_variable = { which = att_admiral_siege_exp value > 600 }
							}
							remove_trait = att_trait_siege_lv5
							add_trait = att_trait_siege_max
							set_timed_leader_flag = { flag = att_admiral_siege_levelup_end days = 720 }
						}
						break = yes
					}
				}
			}
		}	
	}
}

###FIRE SHOCK EFFECTS WHEN ENTER SYSTEM###
###Disable in 2.0 since it makes no sense for defensive people###
ship_event = {
	id = als.29
	hide_window = yes
	is_triggered_only = yes
	
	trigger = {
		fromfrom = {
			NOR = {
				is_country_type = swarm
				is_country_type = portal_holder
			}
		}
		exists = leader
		leader = {
			leader_class = admiral
			has_leader_flag = att_admiral
			NOR = { 
				has_trait = att_trait_shock_lv1_a
				has_trait = att_trait_shock_lv2_a
				has_trait = att_trait_shock_lv3_a
				has_trait = att_trait_shock_lv4_a
				has_trait = att_trait_shock_lv5_a
				has_trait = att_trait_shock_max_a
			}
		}
	}
	
	immediate = {
		leader = {
			if = {
				limit = {
					OR = {
						has_trait = att_trait_shock_lv1
						has_trait = att_trait_shock_lv2
						has_trait = att_trait_shock_lv3
						has_trait = att_trait_shock_lv4
						has_trait = att_trait_shock_lv5
						has_trait = att_trait_shock_max
					}
					NOT = {
						has_leader_flag = att_admiral_battle
						has_leader_flag = att_admiral_battle_shocked
					}
				}
				if = {
					limit = {
						has_trait = att_trait_shock_lv1
					}
					random_list = {
						90 = {}
						10 = { 
							set_leader_flag = att_admiral_battle
							fromfrom = {
								country_event = { id = als.31 }
							}
						}
					}
					break = yes
				}
				if = {
					limit = {
						has_trait = att_trait_shock_lv2
					}
					random_list = {
						80 = {}
						20 = { 
							set_leader_flag = att_admiral_battle
							fromfrom = {
								country_event = { id = als.31 }
							}
						}
					}
					break = yes
				}
				if = {
					limit = {
						has_trait = att_trait_shock_lv3
					}
					random_list = {
						65 = {}
						35 = { 
							set_leader_flag = att_admiral_battle
							fromfrom = {
								country_event = { id = als.31 }
							}
						}
					}
					break = yes
				}
				if = {
					limit = {
						has_trait = att_trait_shock_lv4
					}
					random_list = {
						50 = {}
						50 = { 
							set_leader_flag = att_admiral_battle
							fromfrom = {
								country_event = { id = als.31 }
							}
						}
					}
					break = yes
				}
				if = {
					limit = {
						has_trait = att_trait_shock_lv5
					}
					random_list = {
						30 = {}
						70 = { 
							set_leader_flag = att_admiral_battle
							fromfrom = {
								country_event = { id = als.31 }
							}
						}
					}
					break = yes
				}
				if = {
					limit = {
						has_trait = att_trait_shock_max
					}
					random_list = {
						0 = {}
						100 = { 
							set_leader_flag = att_admiral_battle
							fromfrom = {
								country_event = { id = als.31 }
							}
						}
					}
					break = yes
				}
			}
		}
	}
}

###FIRE SHOCK EFFECTS DURING LOSING SHIPS###
#DISABLED IN 2.0 SINCE WE HAVE Force Disparity Combat Bonus now#
country_event = {
	id = als.30
	hide_window = yes
	is_triggered_only = yes
	
	trigger = {
		relative_power = {
			who = from
			category = fleet
			value < superior
		}
		FROMFROM = {
			owner = {
				NOR = {
					is_country_type = swarm
					is_country_type = portal_holder
				}
			}
			exists = leader
			leader = {
				leader_class = admiral
				has_leader_flag = att_admiral
			}	
		}
	}
	
	immediate = {
		if = {
			limit = {
				relative_power = {
					who = from
					category = fleet
					value < superior
				}
			}
			fromfrom = {
				if = {
					limit = {
						NOR = {
							is_ship_size = destroyer
							is_ship_size = cruiser
							is_ship_size = battleship
						}
					}
					leader = {
						if = {
							limit = {
								OR = {
									has_trait = att_trait_shock_lv1
									has_trait = att_trait_shock_lv2
									has_trait = att_trait_shock_lv3
									has_trait = att_trait_shock_lv4
									has_trait = att_trait_shock_lv5
									has_trait = att_trait_shock_max
								}
								NOT = {
									has_leader_flag = att_admiral_battle_shocked
									has_leader_flag = att_admiral_battle
								}
							}
							
							if = {
								limit = {
									has_trait = att_trait_shock_lv1
								}
								random_list = {
									99 = {}
									1 = {
										set_leader_flag = att_admiral_battle_5days
										set_leader_flag = att_admiral_battle
										root = {
											country_event = { id = als.31 } 
										}
									}
								}
#								break = yes
							}
							if = {
								limit = {
									has_trait = att_trait_shock_lv2
								}
								random_list = {
									98 = {}
									2 = {
										set_leader_flag = att_admiral_battle_5days
										set_leader_flag = att_admiral_battle
										root = {
											country_event = { id = als.31 } 
										}
									}
								}
#								break = yes
							}
							if = {
								limit = {
									has_trait = att_trait_shock_lv3
								}
								random_list = {
									97 = {}
									3 = {
										set_leader_flag = att_admiral_battle_5days
										set_leader_flag = att_admiral_battle
										root = {
											country_event = { id = als.31 } 
										}
									}
								}
#								break = yes
							}
							if = {
								limit = {
									has_trait = att_trait_shock_lv4
								}
								random_list = {
									96 = {}
									4 = {
										set_leader_flag = att_admiral_battle_5days
										set_leader_flag = att_admiral_battle
										root = {
											country_event = { id = als.31 } 
										}
									}
								}
#								break = yes
							}
							if = {
								limit = {
									has_trait = att_trait_shock_lv5
								}
								random_list = {
									95 = {}
									5 = {
										set_leader_flag = att_admiral_battle_5days
										set_leader_flag = att_admiral_battle
										root = {
											country_event = { id = als.31 } 
										}
									}
								}
#								break = yes
							}	
							if = {
								limit = {
									has_trait = att_trait_shock_max
								}
								random_list = {
									94 = {}
									6 = {
										set_leader_flag = att_admiral_battle_5days
										set_leader_flag = att_admiral_battle
										root = {
											country_event = { id = als.31 } 
										}
									}
								}
#								break = yes
							}						
						}
					}
				}
				if = {
					limit = {
						is_ship_size = destroyer
					}
					leader = {
						if = {
							limit = {
								OR = {
									has_trait = att_trait_shock_lv1
									has_trait = att_trait_shock_lv2
									has_trait = att_trait_shock_lv3
									has_trait = att_trait_shock_lv4
									has_trait = att_trait_shock_lv5
									has_trait = att_trait_shock_max
								}
								NOT = {
									has_leader_flag = att_admiral_battle_shocked
									has_leader_flag = att_admiral_battle
								}
							}
							
							if = {
								limit = {
									has_trait = att_trait_shock_lv1
								}
								random_list = {
									98 = {}
									2 = {
										set_leader_flag = att_admiral_battle_5days
										set_leader_flag = att_admiral_battle
										root = {
											country_event = { id = als.31 } 
										}
									}
								}
#								break = yes
							}
							if = {
								limit = {
									has_trait = att_trait_shock_lv2
								}
								random_list = {
									96 = {}
									4 = {
										set_leader_flag = att_admiral_battle_5days
										set_leader_flag = att_admiral_battle
										root = {
											country_event = { id = als.31 } 
										}
									}
								}
#								break = yes
							}
							if = {
								limit = {
									has_trait = att_trait_shock_lv3
								}
								random_list = {
									94 = {}
									6 = {
										set_leader_flag = att_admiral_battle_5days
										set_leader_flag = att_admiral_battle
										root = {
											country_event = { id = als.31 } 
										}
									}
								}
#								break = yes
							}
							if = {
								limit = {
									has_trait = att_trait_shock_lv4
								}
								random_list = {
									92 = {}
									8 = {
										set_leader_flag = att_admiral_battle_5days
										set_leader_flag = att_admiral_battle
										root = {
											country_event = { id = als.31 } 
										}
									}
								}
#								break = yes
							}
							if = {
								limit = {
									has_trait = att_trait_shock_lv5
								}
								random_list = {
									9 = {}
									1 = {
										set_leader_flag = att_admiral_battle_5days
										set_leader_flag = att_admiral_battle
										root = {
											country_event = { id = als.31 } 
										}
									}
								}
#								break = yes
							}	
							if = {
								limit = {
									has_trait = att_trait_shock_max
								}
								random_list = {
									88 = {}
									12 = {
										set_leader_flag = att_admiral_battle_5days
										set_leader_flag = att_admiral_battle
										root = {
											country_event = { id = als.31 } 
										}
									}
								}
#								break = yes
							}						
						}
					}
				}
				if = {
					limit = {
						is_ship_size = cruiser
					}
					leader = {
						if = {
							limit = {
								OR = {
									has_trait = att_trait_shock_lv1
									has_trait = att_trait_shock_lv2
									has_trait = att_trait_shock_lv3
									has_trait = att_trait_shock_lv4
									has_trait = att_trait_shock_lv5
									has_trait = att_trait_shock_max
								}
								NOT = {
									has_leader_flag = att_admiral_battle_shocked
									has_leader_flag = att_admiral_battle
								}
							}
							
							if = {
								limit = {
									has_trait = att_trait_shock_lv1
								}
								random_list = {
									97 = {}
									3 = {
										set_leader_flag = att_admiral_battle_5days
										set_leader_flag = att_admiral_battle
										root = {
											country_event = { id = als.31 } 
										}
									}
								}
#								break = yes
							}
							if = {
								limit = {
									has_trait = att_trait_shock_lv2
								}
								random_list = {
									94 = {}
									6 = {
										set_leader_flag = att_admiral_battle_5days
										set_leader_flag = att_admiral_battle
										root = {
											country_event = { id = als.31 } 
										}
									}
								}
#								break = yes
							}
							if = {
								limit = {
									has_trait = att_trait_shock_lv3
								}
								random_list = {
									91 = {}
									9 = {
										set_leader_flag = att_admiral_battle_5days
										set_leader_flag = att_admiral_battle
										root = {
											country_event = { id = als.31 } 
										}
									}
								}
#								break = yes
							}
							if = {
								limit = {
									has_trait = att_trait_shock_lv4
								}
								random_list = {
									88 = {}
									12 = {
										set_leader_flag = att_admiral_battle_5days
										set_leader_flag = att_admiral_battle
										root = {
											country_event = { id = als.31 } 
										}
									}
								}
#								break = yes
							}
							if = {
								limit = {
									has_trait = att_trait_shock_lv5
								}
								random_list = {
									85 = {}
									15 = {
										set_leader_flag = att_admiral_battle_5days
										set_leader_flag = att_admiral_battle
										root = {
											country_event = { id = als.31 } 
										}
									}
								}
#								break = yes
							}	
							if = {
								limit = {
									has_trait = att_trait_shock_max
								}
								random_list = {
									82 = {}
									18 = {
										set_leader_flag = att_admiral_battle_5days
										set_leader_flag = att_admiral_battle
										root = {
											country_event = { id = als.31 } 
										}
									}
								}
#								break = yes
							}						
						}
					}
				}
				if = {
					limit = {
						is_ship_size = battleship
					}
					leader = {
						if = {
							limit = {
								OR = {
									has_trait = att_trait_shock_lv1
									has_trait = att_trait_shock_lv2
									has_trait = att_trait_shock_lv3
									has_trait = att_trait_shock_lv4
									has_trait = att_trait_shock_lv5
									has_trait = att_trait_shock_max
								}
								NOT = {
									has_leader_flag = att_admiral_battle_shocked
									has_leader_flag = att_admiral_battle
								}
							}
							
							if = {
								limit = {
									has_trait = att_trait_shock_lv1
								}
								random_list = {
									96 = {}
									4 = {
										set_leader_flag = att_admiral_battle_5days
										set_leader_flag = att_admiral_battle
										root = {
											country_event = { id = als.31 } 
										}
									}
								}
#								break = yes
							}
							if = {
								limit = {
									has_trait = att_trait_shock_lv2
								}
								random_list = {
									92 = {}
									8 = {
										set_leader_flag = att_admiral_battle_5days
										set_leader_flag = att_admiral_battle
										root = {
											country_event = { id = als.31 } 
										}
									}
								}
#								break = yes
							}
							if = {
								limit = {
									has_trait = att_trait_shock_lv3
								}
								random_list = {
									88 = {}
									12 = {
										set_leader_flag = att_admiral_battle_5days
										set_leader_flag = att_admiral_battle
										root = {
											country_event = { id = als.31 } 
										}
									}
								}
#								break = yes
							}
							if = {
								limit = {
									has_trait = att_trait_shock_lv4
								}
								random_list = {
									84 = {}
									16 = {
										set_leader_flag = att_admiral_battle_5days
										set_leader_flag = att_admiral_battle
										root = {
											country_event = { id = als.31 } 
										}
									}
								}
#								break = yes
							}
							if = {
								limit = {
									has_trait = att_trait_shock_lv5
								}
								random_list = {
									8 = {}
									2 = {
										set_leader_flag = att_admiral_battle_5days
										set_leader_flag = att_admiral_battle
										root = {
											country_event = { id = als.31 } 
										}
									}
								}
#								break = yes
							}	
							if = {
								limit = {
									has_trait = att_trait_shock_max
								}
								random_list = {
									76 = {}
									24 = {
										set_leader_flag = att_admiral_battle_5days
										set_leader_flag = att_admiral_battle
										root = {
											country_event = { id = als.31 } 
										}
									}
								}
#								break = yes
							}						
						}
					}
				}
			}
		}
		if = {
			limit = {
				relative_power = {
					who = from
					category = fleet
					value < equivalent
				}
			}
			fromfrom = {
				if = {
					limit = {
						NOR = {
							is_ship_size = destroyer
							is_ship_size = cruiser
							is_ship_size = battleship
						}
					}
					leader = {
						if = {
							limit = {
								OR = {
									has_trait = att_trait_shock_lv1
									has_trait = att_trait_shock_lv2
									has_trait = att_trait_shock_lv3
									has_trait = att_trait_shock_lv4
									has_trait = att_trait_shock_lv5
									has_trait = att_trait_shock_max
								}
								NOT = {
									has_leader_flag = att_admiral_battle_shocked
									has_leader_flag = att_admiral_battle
								}
							}
							
							if = {
								limit = {
									has_trait = att_trait_shock_lv1
								}
								random_list = {
									99 = {}
									1 = {
										set_leader_flag = att_admiral_battle_5days
										set_leader_flag = att_admiral_battle
										root = {
											country_event = { id = als.31 } 
										}
									}
								}
#								break = yes
							}
							if = {
								limit = {
									has_trait = att_trait_shock_lv2
								}
								random_list = {
									98 = {}
									2 = {
										set_leader_flag = att_admiral_battle_5days
										set_leader_flag = att_admiral_battle
										root = {
											country_event = { id = als.31 } 
										}
									}
								}
#								break = yes
							}
							if = {
								limit = {
									has_trait = att_trait_shock_lv3
								}
								random_list = {
									97 = {}
									3 = {
										set_leader_flag = att_admiral_battle_5days
										set_leader_flag = att_admiral_battle
										root = {
											country_event = { id = als.31 } 
										}
									}
								}
#								break = yes
							}
							if = {
								limit = {
									has_trait = att_trait_shock_lv4
								}
								random_list = {
									96 = {}
									4 = {
										set_leader_flag = att_admiral_battle_5days
										set_leader_flag = att_admiral_battle
										root = {
											country_event = { id = als.31 } 
										}
									}
								}
#								break = yes
							}
							if = {
								limit = {
									has_trait = att_trait_shock_lv5
								}
								random_list = {
									95 = {}
									5 = {
										set_leader_flag = att_admiral_battle_5days
										set_leader_flag = att_admiral_battle
										root = {
											country_event = { id = als.31 } 
										}
									}
								}
#								break = yes
							}	
							if = {
								limit = {
									has_trait = att_trait_shock_max
								}
								random_list = {
									94 = {}
									6 = {
										set_leader_flag = att_admiral_battle_5days
										set_leader_flag = att_admiral_battle
										root = {
											country_event = { id = als.31 } 
										}
									}
								}
#								break = yes
							}						
						}
					}
				}
				if = {
					limit = {
						is_ship_size = destroyer
					}
					leader = {
						if = {
							limit = {
								OR = {
									has_trait = att_trait_shock_lv1
									has_trait = att_trait_shock_lv2
									has_trait = att_trait_shock_lv3
									has_trait = att_trait_shock_lv4
									has_trait = att_trait_shock_lv5
									has_trait = att_trait_shock_max
								}
								NOT = {
									has_leader_flag = att_admiral_battle_shocked
									has_leader_flag = att_admiral_battle
								}
							}
							
							if = {
								limit = {
									has_trait = att_trait_shock_lv1
								}
								random_list = {
									98 = {}
									2 = {
										set_leader_flag = att_admiral_battle_5days
										set_leader_flag = att_admiral_battle
										root = {
											country_event = { id = als.31 } 
										}
									}
								}
#								break = yes
							}
							if = {
								limit = {
									has_trait = att_trait_shock_lv2
								}
								random_list = {
									96 = {}
									4 = {
										set_leader_flag = att_admiral_battle_5days
										set_leader_flag = att_admiral_battle
										root = {
											country_event = { id = als.31 } 
										}
									}
								}
#								break = yes
							}
							if = {
								limit = {
									has_trait = att_trait_shock_lv3
								}
								random_list = {
									94 = {}
									6 = {
										set_leader_flag = att_admiral_battle_5days
										set_leader_flag = att_admiral_battle
										root = {
											country_event = { id = als.31 } 
										}
									}
								}
#								break = yes
							}
							if = {
								limit = {
									has_trait = att_trait_shock_lv4
								}
								random_list = {
									92 = {}
									8 = {
										set_leader_flag = att_admiral_battle_5days
										set_leader_flag = att_admiral_battle
										root = {
											country_event = { id = als.31 } 
										}
									}
								}
#								break = yes
							}
							if = {
								limit = {
									has_trait = att_trait_shock_lv5
								}
								random_list = {
									9 = {}
									1 = {
										set_leader_flag = att_admiral_battle_5days
										set_leader_flag = att_admiral_battle
										root = {
											country_event = { id = als.31 } 
										}
									}
								}
#								break = yes
							}	
							if = {
								limit = {
									has_trait = att_trait_shock_max
								}
								random_list = {
									88 = {}
									12 = {
										set_leader_flag = att_admiral_battle_5days
										set_leader_flag = att_admiral_battle
										root = {
											country_event = { id = als.31 } 
										}
									}
								}
#								break = yes
							}						
						}
					}
				}
				if = {
					limit = {
						is_ship_size = cruiser
					}
					leader = {
						if = {
							limit = {
								OR = {
									has_trait = att_trait_shock_lv1
									has_trait = att_trait_shock_lv2
									has_trait = att_trait_shock_lv3
									has_trait = att_trait_shock_lv4
									has_trait = att_trait_shock_lv5
									has_trait = att_trait_shock_max
								}
								NOT = {
									has_leader_flag = att_admiral_battle_shocked
									has_leader_flag = att_admiral_battle
								}
							}
							
							if = {
								limit = {
									has_trait = att_trait_shock_lv1
								}
								random_list = {
									97 = {}
									3 = {
										set_leader_flag = att_admiral_battle_5days
										set_leader_flag = att_admiral_battle
										root = {
											country_event = { id = als.31 } 
										}
									}
								}
#								break = yes
							}
							if = {
								limit = {
									has_trait = att_trait_shock_lv2
								}
								random_list = {
									94 = {}
									6 = {
										set_leader_flag = att_admiral_battle_5days
										set_leader_flag = att_admiral_battle
										root = {
											country_event = { id = als.31 } 
										}
									}
								}
#								break = yes
							}
							if = {
								limit = {
									has_trait = att_trait_shock_lv3
								}
								random_list = {
									91 = {}
									9 = {
										set_leader_flag = att_admiral_battle_5days
										set_leader_flag = att_admiral_battle
										root = {
											country_event = { id = als.31 } 
										}
									}
								}
#								break = yes
							}
							if = {
								limit = {
									has_trait = att_trait_shock_lv4
								}
								random_list = {
									88 = {}
									12 = {
										set_leader_flag = att_admiral_battle_5days
										set_leader_flag = att_admiral_battle
										root = {
											country_event = { id = als.31 } 
										}
									}
								}
#								break = yes
							}
							if = {
								limit = {
									has_trait = att_trait_shock_lv5
								}
								random_list = {
									85 = {}
									15 = {
										set_leader_flag = att_admiral_battle_5days
										set_leader_flag = att_admiral_battle
										root = {
											country_event = { id = als.31 } 
										}
									}
								}
#								break = yes
							}	
							if = {
								limit = {
									has_trait = att_trait_shock_max
								}
								random_list = {
									82 = {}
									18 = {
										set_leader_flag = att_admiral_battle_5days
										set_leader_flag = att_admiral_battle
										root = {
											country_event = { id = als.31 } 
										}
									}
								}
#								break = yes
							}						
						}
					}
				}
				if = {
					limit = {
						is_ship_size = battleship
					}
					leader = {
						if = {
							limit = {
								OR = {
									has_trait = att_trait_shock_lv1
									has_trait = att_trait_shock_lv2
									has_trait = att_trait_shock_lv3
									has_trait = att_trait_shock_lv4
									has_trait = att_trait_shock_lv5
									has_trait = att_trait_shock_max
								}
								NOT = {
									has_leader_flag = att_admiral_battle_shocked
									has_leader_flag = att_admiral_battle
								}
							}
							
							if = {
								limit = {
									has_trait = att_trait_shock_lv1
								}
								random_list = {
									96 = {}
									4 = {
										set_leader_flag = att_admiral_battle_5days
										set_leader_flag = att_admiral_battle
										root = {
											country_event = { id = als.31 } 
										}
									}
								}
#								break = yes
							}
							if = {
								limit = {
									has_trait = att_trait_shock_lv2
								}
								random_list = {
									92 = {}
									8 = {
										set_leader_flag = att_admiral_battle_5days
										set_leader_flag = att_admiral_battle
										root = {
											country_event = { id = als.31 } 
										}
									}
								}
#								break = yes
							}
							if = {
								limit = {
									has_trait = att_trait_shock_lv3
								}
								random_list = {
									88 = {}
									12 = {
										set_leader_flag = att_admiral_battle_5days
										set_leader_flag = att_admiral_battle
										root = {
											country_event = { id = als.31 } 
										}
									}
								}
#								break = yes
							}
							if = {
								limit = {
									has_trait = att_trait_shock_lv4
								}
								random_list = {
									84 = {}
									16 = {
										set_leader_flag = att_admiral_battle_5days
										set_leader_flag = att_admiral_battle
										root = {
											country_event = { id = als.31 } 
										}
									}
								}
#								break = yes
							}
							if = {
								limit = {
									has_trait = att_trait_shock_lv5
								}
								random_list = {
									8 = {}
									2 = {
										set_leader_flag = att_admiral_battle_5days
										set_leader_flag = att_admiral_battle
										root = {
											country_event = { id = als.31 } 
										}
									}
								}
#								break = yes
							}	
							if = {
								limit = {
									has_trait = att_trait_shock_max
								}
								random_list = {
									76 = {}
									24 = {
										set_leader_flag = att_admiral_battle_5days
										set_leader_flag = att_admiral_battle
										root = {
											country_event = { id = als.31 } 
										}
									}
								}
#								break = yes
							}						
						}
					}
				}
			}
		}
		if = {
			limit = {
				relative_power = {
					who = from
					category = fleet
					value < inferior
				}
			}
			fromfrom = {
				if = {
					limit = {
						NOR = {
							is_ship_size = destroyer
							is_ship_size = cruiser
							is_ship_size = battleship
						}
					}
					leader = {
						if = {
							limit = {
								OR = {
									has_trait = att_trait_shock_lv1
									has_trait = att_trait_shock_lv2
									has_trait = att_trait_shock_lv3
									has_trait = att_trait_shock_lv4
									has_trait = att_trait_shock_lv5
									has_trait = att_trait_shock_max
								}
								NOT = {
									has_leader_flag = att_admiral_battle_shocked
									has_leader_flag = att_admiral_battle
								}
							}
							
							if = {
								limit = {
									has_trait = att_trait_shock_lv1
								}
								random_list = {
									98 = {}
									2 = {
										set_leader_flag = att_admiral_battle_5days
										set_leader_flag = att_admiral_battle
										root = {
											country_event = { id = als.31 } 
										}
									}
								}
#								break = yes
							}
							if = {
								limit = {
									has_trait = att_trait_shock_lv2
								}
								random_list = {
									96 = {}
									4 = {
										set_leader_flag = att_admiral_battle_5days
										set_leader_flag = att_admiral_battle
										root = {
											country_event = { id = als.31 } 
										}
									}
								}
#								break = yes
							}
							if = {
								limit = {
									has_trait = att_trait_shock_lv3
								}
								random_list = {
									94 = {}
									6 = {
										set_leader_flag = att_admiral_battle_5days
										set_leader_flag = att_admiral_battle
										root = {
											country_event = { id = als.31 } 
										}
									}
								}
#								break = yes
							}
							if = {
								limit = {
									has_trait = att_trait_shock_lv4
								}
								random_list = {
									92 = {}
									8 = {
										set_leader_flag = att_admiral_battle_5days
										set_leader_flag = att_admiral_battle
										root = {
											country_event = { id = als.31 } 
										}
									}
								}
#								break = yes
							}
							if = {
								limit = {
									has_trait = att_trait_shock_lv5
								}
								random_list = {
									9 = {}
									1 = {
										set_leader_flag = att_admiral_battle_5days
										set_leader_flag = att_admiral_battle
										root = {
											country_event = { id = als.31 } 
										}
									}
								}
#								break = yes
							}	
							if = {
								limit = {
									has_trait = att_trait_shock_max
								}
								random_list = {
									88 = {}
									12 = {
										set_leader_flag = att_admiral_battle_5days
										set_leader_flag = att_admiral_battle
										root = {
											country_event = { id = als.31 } 
										}
									}
								}
#								break = yes
							}						
						}
					}
				}
				if = {
					limit = {
						is_ship_size = destroyer
					}
					leader = {
						if = {
							limit = {
								OR = {
									has_trait = att_trait_shock_lv1
									has_trait = att_trait_shock_lv2
									has_trait = att_trait_shock_lv3
									has_trait = att_trait_shock_lv4
									has_trait = att_trait_shock_lv5
									has_trait = att_trait_shock_max
								}
								NOT = {
									has_leader_flag = att_admiral_battle_shocked
									has_leader_flag = att_admiral_battle
								}
							}
							
							if = {
								limit = {
									has_trait = att_trait_shock_lv1
								}
								random_list = {
									92 = {}
									8 = {
										set_leader_flag = att_admiral_battle_5days
										set_leader_flag = att_admiral_battle
										root = {
											country_event = { id = als.31 } 
										}
									}
								}
#								break = yes
							}
							if = {
								limit = {
									has_trait = att_trait_shock_lv2
								}
								random_list = {
									84 = {}
									16 = {
										set_leader_flag = att_admiral_battle_5days
										set_leader_flag = att_admiral_battle
										root = {
											country_event = { id = als.31 } 
										}
									}
								}
#								break = yes
							}
							if = {
								limit = {
									has_trait = att_trait_shock_lv3
								}
								random_list = {
									76 = {}
									24 = {
										set_leader_flag = att_admiral_battle_5days
										set_leader_flag = att_admiral_battle
										root = {
											country_event = { id = als.31 } 
										}
									}
								}
#								break = yes
							}
							if = {
								limit = {
									has_trait = att_trait_shock_lv4
								}
								random_list = {
									68 = {}
									32 = {
										set_leader_flag = att_admiral_battle_5days
										set_leader_flag = att_admiral_battle
										root = {
											country_event = { id = als.31 } 
										}
									}
								}
#								break = yes
							}
							if = {
								limit = {
									has_trait = att_trait_shock_lv5
								}
								random_list = {
									6 = {}
									4 = {
										set_leader_flag = att_admiral_battle_5days
										set_leader_flag = att_admiral_battle
										root = {
											country_event = { id = als.31 } 
										}
									}
								}
#								break = yes
							}	
							if = {
								limit = {
									has_trait = att_trait_shock_max
								}
								random_list = {
									54 = {}
									48 = {
										set_leader_flag = att_admiral_battle_5days
										set_leader_flag = att_admiral_battle
										root = {
											country_event = { id = als.31 } 
										}
									}
								}
#								break = yes
							}						
						}
					}
				}
				if = {
					limit = {
						is_ship_size = cruiser
					}
					leader = {
						if = {
							limit = {
								OR = {
									has_trait = att_trait_shock_lv1
									has_trait = att_trait_shock_lv2
									has_trait = att_trait_shock_lv3
									has_trait = att_trait_shock_lv4
									has_trait = att_trait_shock_lv5
									has_trait = att_trait_shock_max
								}
								NOT = {
									has_leader_flag = att_admiral_battle_shocked
									has_leader_flag = att_admiral_battle
								}
							}
							
							if = {
								limit = {
									has_trait = att_trait_shock_lv1
								}
								random_list = {
									88 = {}
									12 = {
										set_leader_flag = att_admiral_battle_5days
										set_leader_flag = att_admiral_battle
										root = {
											country_event = { id = als.31 } 
										}
									}
								}
#								break = yes
							}
							if = {
								limit = {
									has_trait = att_trait_shock_lv2
								}
								random_list = {
									76 = {}
									24 = {
										set_leader_flag = att_admiral_battle_5days
										set_leader_flag = att_admiral_battle
										root = {
											country_event = { id = als.31 } 
										}
									}
								}
#								break = yes
							}
							if = {
								limit = {
									has_trait = att_trait_shock_lv3
								}
								random_list = {
									64 = {}
									36 = {
										set_leader_flag = att_admiral_battle_5days
										set_leader_flag = att_admiral_battle
										root = {
											country_event = { id = als.31 } 
										}
									}
								}
#								break = yes
							}
							if = {
								limit = {
									has_trait = att_trait_shock_lv4
								}
								random_list = {
									52 = {}
									48 = {
										set_leader_flag = att_admiral_battle_5days
										set_leader_flag = att_admiral_battle
										root = {
											country_event = { id = als.31 } 
										}
									}
								}
#								break = yes
							}
							if = {
								limit = {
									has_trait = att_trait_shock_lv5
								}
								random_list = {
									4 = {}
									6 = {
										set_leader_flag = att_admiral_battle_5days
										set_leader_flag = att_admiral_battle
										root = {
											country_event = { id = als.31 } 
										}
									}
								}
#								break = yes
							}	
							if = {
								limit = {
									has_trait = att_trait_shock_max
								}
								random_list = {
									28 = {}
									72 = {
										set_leader_flag = att_admiral_battle_5days
										set_leader_flag = att_admiral_battle
										root = {
											country_event = { id = als.31 } 
										}
									}
								}
#								break = yes
							}						
						}
					}
				}
				if = {
					limit = {
						is_ship_size = battleship
					}
					leader = {
						if = {
							limit = {
								OR = {
									has_trait = att_trait_shock_lv1
									has_trait = att_trait_shock_lv2
									has_trait = att_trait_shock_lv3
									has_trait = att_trait_shock_lv4
									has_trait = att_trait_shock_lv5
									has_trait = att_trait_shock_max
								}
								NOT = {
									has_leader_flag = att_admiral_battle_shocked
									has_leader_flag = att_admiral_battle
								}
							}
							
							if = {
								limit = {
									has_trait = att_trait_shock_lv1
								}
								random_list = {
									8 = {}
									2 = {
										set_leader_flag = att_admiral_battle_5days
										set_leader_flag = att_admiral_battle
										root = {
											country_event = { id = als.31 } 
										}
									}
								}
#								break = yes
							}
							if = {
								limit = {
									has_trait = att_trait_shock_lv2
								}
								random_list = {
									6 = {}
									4 = {
										set_leader_flag = att_admiral_battle_5days
										set_leader_flag = att_admiral_battle
										root = {
											country_event = { id = als.31 } 
										}
									}
								}
#								break = yes
							}
							if = {
								limit = {
									has_trait = att_trait_shock_lv3
								}
								random_list = {
									4 = {}
									6 = {
										set_leader_flag = att_admiral_battle_5days
										set_leader_flag = att_admiral_battle
										root = {
											country_event = { id = als.31 } 
										}
									}
								}
#								break = yes
							}
							if = {
								limit = {
									has_trait = att_trait_shock_lv4
								}
								random_list = {
									2 = {}
									8 = {
										set_leader_flag = att_admiral_battle_5days
										set_leader_flag = att_admiral_battle
										root = {
											country_event = { id = als.31 } 
										}
									}
								}
#								break = yes
							}
							if = {
								limit = {
									has_trait = att_trait_shock_lv5
								}
								random_list = {
									1 = {}
									9 = {
										set_leader_flag = att_admiral_battle_5days
										set_leader_flag = att_admiral_battle
										root = {
											country_event = { id = als.31 } 
										}
									}
								}
#								break = yes
							}	
							if = {
								limit = {
									has_trait = att_trait_shock_max
								}
								random_list = {
									1 = {}
									9 = {
										set_leader_flag = att_admiral_battle_5days
										set_leader_flag = att_admiral_battle
										root = {
											country_event = { id = als.31 } 
										}
									}
								}
#								break = yes
							}						
						}
					}
				}
			}
		}
	}
}

###ENTERED SYSTEM, LOSING SHIP###
country_event = {
	id = als.31
	hide_window = yes
#	is_triggered_only = yes
	
	trigger = {
		any_owned_leader = {
			leader_class = admiral
			has_leader_flag = att_admiral
			has_leader_flag = att_admiral_battle
		}
	}
	
	mean_time_to_happen = {
		days = 10
	}
	
	immediate = {
		random_owned_leader = {
			limit = {
				has_leader_flag = att_admiral_battle
				NOT = {
					has_leader_flag = att_admiral_battle_shocked
					has_leader_flag = att_admiral_battle_5days
				}
			}
			remove_leader_flag = att_admiral_battle
			set_timed_leader_flag = { flag = att_admiral_battle_shocked days = 5 }
			if = {
				limit = {
					has_trait = att_trait_shock_lv1
				}
				remove_trait = att_trait_shock_lv1
				add_trait = att_trait_shock_lv1_a
			}
			if = {
				limit = {
					has_trait = att_trait_shock_lv2
				}
				remove_trait = att_trait_shock_lv2
				add_trait = att_trait_shock_lv2_a
			}
			if = {
				limit = {
					has_trait = att_trait_shock_lv3
				}
				remove_trait = att_trait_shock_lv3
				add_trait = att_trait_shock_lv3_a
			}
			if = {
				limit = {
					has_trait = att_trait_shock_lv4
				}
				remove_trait = att_trait_shock_lv4
				add_trait = att_trait_shock_lv4_a
			}
			if = {
				limit = {
					has_trait = att_trait_shock_lv5
				}
				remove_trait = att_trait_shock_lv5
				add_trait = att_trait_shock_lv5_a
			}
			if = {
				limit = {
					has_trait = att_trait_shock_max
				}
				remove_trait = att_trait_shock_max
				add_trait = att_trait_shock_max_a
			}
		}
		random_owned_leader = {
			limit = {
				has_leader_flag = att_admiral_battle
				has_leader_flag = att_admiral_battle_5days
				NOT = {
					has_leader_flag = att_admiral_battle_shocked
				}
			}
			remove_leader_flag = att_admiral_battle
			remove_leader_flag = att_admiral_battle_5days
			set_timed_leader_flag = { flag = att_admiral_battle_shocked days = 5 }
			add_experience = 4
			if = {
				limit = {
					has_trait = att_trait_shock_lv1
				}
				remove_trait = att_trait_shock_lv1
				add_trait = att_trait_shock_lv1_a
				add_experience = 1
			}
			if = {
				limit = {
					has_trait = att_trait_shock_lv2
				}
				remove_trait = att_trait_shock_lv2
				add_trait = att_trait_shock_lv2_a
				add_experience = 2
			}
			if = {
				limit = {
					has_trait = att_trait_shock_lv3
				}
				remove_trait = att_trait_shock_lv3
				add_trait = att_trait_shock_lv3_a
				add_experience = 3
			}
			if = {
				limit = {
					has_trait = att_trait_shock_lv4
				}
				remove_trait = att_trait_shock_lv4
				add_trait = att_trait_shock_lv4_a
				add_experience = 4
			}
			if = {
				limit = {
					has_trait = att_trait_shock_lv5
				}
				remove_trait = att_trait_shock_lv5
				add_trait = att_trait_shock_lv5_a
				add_experience = 5
			}
			if = {
				limit = {
					has_trait = att_trait_shock_max
				}
				remove_trait = att_trait_shock_max
				add_trait = att_trait_shock_max_a
				add_experience = 6
			}
		}
	}
}
###FLEET_EVENT VERSION ONE###
fleet_event = {
	id = als.32
	hide_window = yes
	is_triggered_only = yes
	
	trigger = {
		is_in_combat = yes
		exists = leader
		leader = {
			leader_class = admiral
			has_leader_flag = att_admiral
			has_leader_flag = att_admiral_battle
		}
	}
	
	immediate = {
		leader = {
			if = {
				limit = {
					NOT = {
						has_leader_flag = att_admiral_battle_shocked
					}
				}
				remove_leader_flag = att_admiral_battle
				set_timed_leader_flag = { flag = att_admiral_battle_shocked days = 5 }
				if = {
					limit = {
						has_trait = att_trait_shock_lv1
					}
					remove_trait = att_trait_shock_lv1
					add_trait = att_trait_shock_lv1_a
					add_experience = 5
					break = yes
				}
				if = {
					limit = {
						has_trait = att_trait_shock_lv2
					}
					remove_trait = att_trait_shock_lv2
					add_trait = att_trait_shock_lv2_a
					add_experience = 6
					break = yes
				}
				if = {
					limit = {
						has_trait = att_trait_shock_lv3
					}
					remove_trait = att_trait_shock_lv3
					add_trait = att_trait_shock_lv3_a
					add_experience = 7
					break = yes
				}
				if = {
					limit = {
						has_trait = att_trait_shock_lv4
					}
					remove_trait = att_trait_shock_lv4
					add_trait = att_trait_shock_lv4_a
					add_experience = 8
					break = yes
				}
				if = {
					limit = {
						has_trait = att_trait_shock_lv5
					}
					remove_trait = att_trait_shock_lv5
					add_trait = att_trait_shock_lv5_a
					add_experience = 9
					break = yes
				}
				if = {
					limit = {
						has_trait = att_trait_shock_max
					}
					remove_trait = att_trait_shock_max
					add_trait = att_trait_shock_max_a
					add_experience = 10
					break = yes
				}
			}
		}		
	}
}

###THE SHOCK EFFECT IS OVER###
country_event = {
	id = als.33
	hide_window = yes
	
	trigger = {
		any_owned_leader = {
			leader_class = admiral
			has_leader_flag = att_admiral
			OR = {
				has_trait = att_trait_shock_lv1_a
				has_trait = att_trait_shock_lv2_a
				has_trait = att_trait_shock_lv3_a
				has_trait = att_trait_shock_lv4_a
				has_trait = att_trait_shock_lv5_a
				has_trait = att_trait_shock_max_a
			}
		}
	}
	
	mean_time_to_happen = {
		days = 3
	}

	immediate = {
		random_owned_leader = {
			limit = {
				leader_class = admiral
				has_leader_flag = att_admiral
				NOT = {
					has_leader_flag = att_admiral_battle_shocked
				}
				OR = {
					has_trait = att_trait_shock_lv1_a
					has_trait = att_trait_shock_lv2_a
					has_trait = att_trait_shock_lv3_a
					has_trait = att_trait_shock_lv4_a
					has_trait = att_trait_shock_lv5_a
					has_trait = att_trait_shock_max_a
				}
			}
			if = {
				limit = {
					has_trait = att_trait_shock_lv1_a
				}
				remove_trait = att_trait_shock_lv1_a
				add_trait = att_trait_shock_lv1
				break = yes
			}
			if = {
				limit = {
					has_trait = att_trait_shock_lv2_a
				}
				remove_trait = att_trait_shock_lv2_a
				add_trait = att_trait_shock_lv2
				break = yes
			}
			if = {
				limit = {
					has_trait = att_trait_shock_lv3_a
				}
				remove_trait = att_trait_shock_lv3_a
				add_trait = att_trait_shock_lv3
				break = yes
			}
			if = {
				limit = {
					has_trait = att_trait_shock_lv4_a
				}
				remove_trait = att_trait_shock_lv4_a
				add_trait = att_trait_shock_lv4
				break = yes
			}
			if = {
				limit = {
					has_trait = att_trait_shock_lv5_a
				}
				remove_trait = att_trait_shock_lv5_a
				add_trait = att_trait_shock_lv5
				break = yes
			}
			if = {
				limit = {
					has_trait = att_trait_shock_max_a
				}
				remove_trait = att_trait_shock_max_a
				add_trait = att_trait_shock_max
				break = yes
			}
		}
	}	
}

###EVERY 5 DAY IN BATTLE MIGHT TRIGGER SHOCK EFFECT###

fleet_event = {
	id = als.35
	hide_window = yes
	
	trigger = {
		is_in_combat = yes
		exists = leader
		leader = {
			leader_class = admiral
			has_leader_flag = att_admiral
			NOT = {
				has_leader_flag = att_admiral_battle
				has_leader_flag = att_admiral_battle_shocked
			}
		}
	}
	
	mean_time_to_happen = {
		days = 5
	}
	
	immediate = {
		leader = {
			if = {
				limit = {
					OR = {
						has_trait = att_trait_shock_lv0
						has_trait = att_trait_shock_lv1
						has_trait = att_trait_shock_lv2
						has_trait = att_trait_shock_lv3
						has_trait = att_trait_shock_lv4
						has_trait = att_trait_shock_lv5
						has_trait = att_trait_shock_max
					}
					NOR = {
						has_leader_flag = att_admiral_battle
						has_leader_flag = att_admiral_battle_shocked
					}
				}
				if = {
					limit = {
						has_trait = att_trait_shock_lv0
					}
					random_list = {
						9 = {
							change_variable = { which = att_admiral_shock_exp value = 1 }
						}
						1 = {
							change_variable = { which = att_admiral_shock_exp value = 3 }
						}
					}
				}
				if = {
					limit = {
						has_trait = att_trait_shock_lv1
					}
					random_list = {
						8 = {
							change_variable = { which = att_admiral_shock_exp value = 1 }
						}
						2 = {
							change_variable = { which = att_admiral_shock_exp value = 3 }
							add_experience = 2
							set_leader_flag = att_admiral_battle
							root = {
								fleet_event = { id = als.32 } 
							}	
						}
					}
				}
				if = {
					limit = {
						has_trait = att_trait_shock_lv2
					}
					random_list = {
						75 = {
							change_variable = { which = att_admiral_shock_exp value = 1 }
						}
						25 = {
							change_variable = { which = att_admiral_shock_exp value = 3 }
							add_experience = 3
							set_leader_flag = att_admiral_battle
							root = {
								fleet_event = { id = als.32 } 
							}
						}
					}
				}
				if = {
					limit = {
						has_trait = att_trait_shock_lv3
					}
					random_list = {
						7 = {
							change_variable = { which = att_admiral_shock_exp value = 1 }
						}
						3 = {
							set_leader_flag = att_admiral_battle
							change_variable = { which = att_admiral_shock_exp value = 2 }
							add_experience = 4
							root = {
								fleet_event = { id = als.32 } 
							}
						}
					}
				}
				if = {
					limit = {
						has_trait = att_trait_shock_lv4
					}
					random_list = {
						65 = {
							change_variable = { which = att_admiral_shock_exp value = 1 }
						}
						35 = {
							set_leader_flag = att_admiral_battle
							change_variable = { which = att_admiral_shock_exp value = 2 }
							add_experience = 5
							root = {
								fleet_event = { id = als.32 } 
							}
						}
					}
				}
				if = {
					limit = {
						has_trait = att_trait_shock_lv5
					}
					random_list = {
						6 = {
							change_variable = { which = att_admiral_shock_exp value = 1 }
						}
						4 = {
							set_leader_flag = att_admiral_battle
							change_variable = { which = att_admiral_shock_exp value = 2 }
							add_experience = 6
							root = {
								fleet_event = { id = als.32 } 
							}
						}
					}
				}	
				if = {
					limit = {
						has_trait = att_trait_shock_max
					}
					random_list = {
						5 = {}
						5 = {
							set_leader_flag = att_admiral_battle
							add_experience = 7
							root = {
								fleet_event = { id = als.32 } 
							}
						}
					}
				}
				if = {
					limit = {
						has_trait = att_trait_shock_lv0
						NOR = {
							has_trait = att_trait_shock_lv1
							has_trait = att_trait_shock_lv2
							has_trait = att_trait_shock_lv3
							has_trait = att_trait_shock_lv4
							has_trait = att_trait_shock_lv5
							has_trait = att_trait_shock_max
						}
					}
					random_list = {
						99 = {}
						1 = {
							add_trait = att_trait_shock_lv1
							remove_trait = att_trait_shock_lv0
						}
					}
					if = {
						limit = {
							check_variable = { which = att_admiral_shock_exp value > 30 }
						}
						add_trait = att_trait_shock_lv1
						remove_trait = att_trait_shock_lv0
					}
					break = yes
				}
				if = {
					limit = {
						has_trait = att_trait_shock_lv1
						NOR = {
							has_trait = att_trait_shock_lv2
							has_trait = att_trait_shock_lv3
							has_trait = att_trait_shock_lv4
							has_trait = att_trait_shock_lv5
							has_trait = att_trait_shock_max
						}
					}
					random_list = {
						249 = {}
						1 = {
							add_trait = att_trait_shock_lv2
							remove_trait = att_trait_shock_lv1
						}
					}
					if = {
						limit = {
							check_variable = { which = att_admiral_shock_exp value > 90 }
						}
						add_trait = att_trait_shock_lv2
						remove_trait = att_trait_shock_lv1
					}
					break = yes
				}
				if = {
					limit = {
						has_trait = att_trait_shock_lv2
						NOR = {
							has_trait = att_trait_shock_lv3
							has_trait = att_trait_shock_lv4
							has_trait = att_trait_shock_lv5
							has_trait = att_trait_shock_max
						}
					}
					random_list = {
						299 = {}
						1 = {
							add_trait = att_trait_shock_lv3
							remove_trait = att_trait_shock_lv2
						}
					}
					if = {
						limit = {
							check_variable = { which = att_admiral_shock_exp value > 150 }
						}
						add_trait = att_trait_shock_lv3
						remove_trait = att_trait_shock_lv2
					}
					break = yes
				}
				if = {
					limit = {
						has_trait = att_trait_shock_lv3
						NOR = {
							has_trait = att_trait_shock_lv4
							has_trait = att_trait_shock_lv5
							has_trait = att_trait_shock_max
						}
					}
					random_list = {
						499 = {}
						1 = {
							add_trait = att_trait_shock_lv4
							remove_trait = att_trait_shock_lv3
						}
					}
					if = {
						limit = {
							check_variable = { which = att_admiral_shock_exp value > 300 }
						}
						add_trait = att_trait_shock_lv4
						remove_trait = att_trait_shock_lv3
					}
					break = yes
				}
				if = {
					limit = {
						has_trait = att_trait_shock_lv4
						NOR = {
							has_trait = att_trait_shock_lv5
							has_trait = att_trait_shock_max
						}
					}
					random_list = {
						699 = {}
						1 = {
							add_trait = att_trait_shock_lv5
							remove_trait = att_trait_shock_lv4
						}
					}
					if = {
						limit = {
							check_variable = { which = att_admiral_shock_exp value > 450 }
						}
						add_trait = att_trait_shock_lv5
						remove_trait = att_trait_shock_lv4
					}
					break = yes
				}
				if = {
					limit = {
						has_trait = att_trait_shock_lv5
						NOT = {
							has_trait = att_trait_shock_max
						}
					}
					random_list = {
						999 = {}
						1 = {
							add_trait = att_trait_shock_max
							remove_trait = att_trait_shock_lv5
						}
					}
					if = {
						limit = {
							check_variable = { which = att_admiral_shock_exp value > 720 }
						}
						add_trait = att_trait_shock_max
						remove_trait = att_trait_shock_lv5
					}
					break = yes
				}				
			}
		}
	}
}
###Game started####
event = {
	id = als.36
	hide_window = yes
    is_triggered_only = yes
	
	trigger = {
        NOT = {
            has_global_flag = als_started
        }
	}
	
#	mean_time_to_happen = {
#		days = 5
#	}
	
	immediate = {
		set_global_flag = als_started
	}
    
}

###CHECK WHETHER YOUR ADMIRAL HAVE PREFER stargy&tactic####
country_event = {
	id = als.38
	hide_window = yes
	is_triggered_only = yes
	trigger = {
		any_owned_leader = {
			leader_class = admiral	
			NOR = {
				has_leader_flag = als_admiral_has_tactic_traits 
				has_leader_flag = als_admiral_has_strategy_traits
			}
		}
	}
	
#	mean_time_to_happen = {
#		days = 5
#	}
	
	immediate = { 
		every_owned_leader = {
			limit = {
				leader_class = admiral
				check_als_admiral_whether_have_strategy_traits = yes
			}
			random_list = {
				1 = {
					add_trait = als_trait_strategic_energy
				}
				1 = {
					add_trait = als_trait_strategic_explosive
				}
				1 = {
					add_trait = als_trait_strategic_kinetic
				}
                1 = {
					add_trait = als_trait_strategic_point_defense
				}
				1 = {
					add_trait = als_trait_strategic_anti_hull
				}
				1 = {
					add_trait = als_trait_strategic_anti_armor
				}
				1 = {
					add_trait = als_trait_strategic_anti_shield
				}
			}		
		}
		
		
		
		country_event = { id = als.40 }
	} 
}
####ADD ADMIRAL PREFER WEAPON####
country_event = {
	id = als.39
	hide_window = yes
	is_triggered_only = yes
	
	trigger = {

	}
	
	immediate = {
		save_event_target_as = als_country
		from = {
			if = {
				limit = {
					leader_class = admiral
					NOR = {
						has_leader_flag = als_admiral_has_strategy_traits
						has_leader_flag = als_admiral_has_tactic_traits
					}
					ROOT = {
						NOR = {
							is_country_type = swarm
							is_country_type = extradimensional
							is_country_type = extradimensional_2
							is_country_type = extradimensional_3
							is_country_type = ai_empire
							is_country_type = cybrex_empire 
							is_country_type = dormant_marauders 
							is_country_type = ruined_marauders
							is_country_type = awakened_marauders
							is_country_type = fallen_empire
							is_country_type = awakened_fallen_empire
						}
					}
				}
				random_list = {
					15 = { #strategy
						modifier = {
							factor = 0
							leader = {
								has_trait = leader_trait_tactician
							}
						}
						set_leader_flag = als_admiral_has_strategy_traits
						random_list = {
							1 = {
								add_trait = als_trait_strategic_energy
							}
							1 = {
								add_trait = als_trait_strategic_explosive
							}
							1 = {
								add_trait = als_trait_strategic_kinetic
							}
							1 = {
								add_trait = als_trait_strategic_point_defense
							}
							1 = {
								modifier = {
									factor = 0
									ROOT = {
										NOR = {
											has_technology = tech_strike_craft_1
											has_technology = tech_strike_craft_2
											has_technology = tech_strike_craft_3
										}
									}
								}
								add_trait = als_trait_strategic_strike_craft
							}
							1 = {
								add_trait = als_trait_strategic_artillery
							}
							1 = {
								add_trait = als_trait_strategic_anti_hull
							}
							1 = {
								add_trait = als_trait_strategic_anti_armor
							}
							1 = {
								add_trait = als_trait_strategic_anti_shield
							}
						}
					}
					10 = {
						modifier = {
							factor = 0
							leader = {
								has_trait = leader_trait_strategist
							}
						}
						set_leader_flag = als_admiral_has_tactic_traits
						effect_als_tactic_set = yes
					}
				}
			}
			
			else_if = {
				limit = {
					leader_class = admiral
					root = {
						OR = {
							is_country_type = swarm
							is_country_type = extradimensional
							is_country_type = extradimensional_2
							is_country_type = extradimensional_3
							is_country_type = ai_empire
							is_country_type = cybrex_empire 
							is_country_type = dormant_marauders 
							is_country_type = ruined_marauders
							is_country_type = awakened_marauders
							is_country_type = fallen_empire
							is_country_type = awakened_fallen_empire
						}
					}        
					NOR = {
						has_leader_flag = als_admiral_has_strategy_traits
						has_leader_flag = als_admiral_has_tactic_traits
					}     
				}
				save_event_target_as = als_npc_admiral
				root = {
					country_event = {
						id = als.300
						days = 1
					}
				}
			}
		}
		country_event = { id = als.40 }
	} 
}
###for NPC empire as their admiral refuses to gain strategy tactic traits when spawned
country_event = {
	id = als.300
	hide_window = yes
	is_triggered_only = yes
	trigger = {
		exists = event_target:als_npc_admiral
	}
	immediate = {
		save_event_target_as = als_country
		event_target:als_npc_admiral = {
			if = {
				limit = {
					ROOT = {
						OR = {
							is_country_type = fallen_empire
							is_country_type = awakened_fallen_empire
						}
					}
				}
				random_list = {
					15 = { #strategy
						modifier = {
							factor = 0
							leader = {
								has_trait = leader_trait_tactician
							}
						}
						set_leader_flag = als_admiral_has_strategy_traits
						random_list = {
							1 = {
								add_trait = als_trait_strategic_energy
							}
							1 = {
								add_trait = als_trait_strategic_explosive
							}
							1 = {
								add_trait = als_trait_strategic_kinetic
							}
							1 = {
								add_trait = als_trait_strategic_point_defense
							}
							1 = {
								add_trait = als_trait_strategic_strike_craft
							}
							1 = {
								add_trait = als_trait_strategic_artillery #found out that missiles are counted as this
							}
							1 = {
								add_trait = als_trait_strategic_anti_hull
							}
							1 = {
								add_trait = als_trait_strategic_anti_armor
							}
							1 = {
								add_trait = als_trait_strategic_anti_shield
							}
						}
					}
					10 = {
						modifier = {
							factor = 0
							leader = {
								has_trait = leader_trait_strategist
							}
						}
						set_leader_flag = als_admiral_has_tactic_traits
						effect_als_tactic_set = yes
					}
				}
			}
			else_if = {
				limit = {
					leader_class = admiral
					ROOT = {
						is_country_type = swarm
					}	
					NOR = {
						has_leader_flag = als_admiral_has_strategy_traits
						has_leader_flag = als_admiral_has_tactic_traits
					}
				}
				random_list = {
					1 = {
						set_leader_flag = als_admiral_has_strategy_traits
						random_list = {
							1 = {
								add_trait = als_trait_strategic_explosive
							}
							1 = {
								add_trait = als_trait_strategic_strike_craft
							}
							1 = {
								add_trait = als_trait_strategic_anti_shield
							}
						}
					}
					1 = {
						set_leader_flag = als_admiral_has_tactic_traits
						random_list = {
							1 = {
								add_trait = als_trait_tactic_ambush_inactive
								set_leader_flag = als_admiral_own_ambush
							}
							1 = {
								add_trait = als_trait_tactic_first_strike
								set_leader_flag = als_admiral_own_first_strike
							}
							1 = {
								add_trait = als_trait_tactic_foresight
								set_leader_flag = als_admiral_own_foresight
							}
							1 = {
								add_trait = als_trait_tactic_untoachable
								set_leader_flag = als_admiral_own_untoachable
							}
						}
					}
				}
			}
			else_if = {
				limit = {
					leader_class = admiral
					root = {
						OR = {
							is_country_type = extradimensional
							is_country_type = extradimensional_2
							is_country_type = extradimensional_3
						}
					}        
					NOR = {
						has_leader_flag = als_admiral_has_strategy_traits
						has_leader_flag = als_admiral_has_tactic_traits
					}     
				}
				random_list = {
					1 = {
						set_leader_flag = als_admiral_has_strategy_traits
						random_list = {
							1 = {
								add_trait = als_trait_strategic_energy
							}
							1 = {
								add_trait = als_trait_strategic_anti_hull
							}
						}
					}
					1 = {
						set_leader_flag = als_admiral_has_tactic_traits
						random_list = {
							1 = {
								add_trait = als_trait_tactic_hyperliner
								set_leader_flag = als_admiral_own_hyperliner
							}
							1 = {
								add_trait = als_trait_tactic_immune
								set_leader_flag = als_admiral_own_immune
							}
							1 = {
								add_trait = als_trait_tactic_long_range
								set_leader_flag = als_admiral_own_long_range
							}
							1 = {
								add_trait = als_trait_tactic_unpredictable
								set_leader_flag = als_admiral_own_unpredictable
							}
						}
					}
				}
			}
			else_if = {
				limit = {
					leader_class = admiral
					root = {
						OR = {
							is_country_type = ai_empire
							is_country_type = cybrex_empire 
						}
					}      
					NOR = {
						has_leader_flag = als_admiral_has_strategy_traits
						has_leader_flag = als_admiral_has_tactic_traits
					}       
				}
				random_list = {
					1 = {
						set_leader_flag = als_admiral_has_strategy_traits
						random_list = {
							1 = {
								add_trait = als_trait_strategic_energy
							}
							1 = {
								add_trait = als_trait_strategic_artillery
							}
							1 = {
								add_trait = als_trait_strategic_strike_craft
							}
						}
					}
					1 = {
						set_leader_flag = als_admiral_has_tactic_traits
						random_list = {
							1 = {
								add_trait = als_trait_tactic_copycat
								set_leader_flag = als_admiral_own_copycat
							}
							1 = {
								add_trait = als_trait_tactic_long_range
								set_leader_flag = als_admiral_own_long_range
							}
							1 = {
								add_trait = als_trait_tactic_self_sacrifice
								set_leader_flag = als_admiral_own_self_sacrifice
							}
							1 = {
								add_trait = als_trait_tactic_jammer
								set_leader_flag = als_admiral_own_jammer
							}
						}
					}
				}
			}
			else_if = {
				limit = {
					leader_class = admiral
					root = {
						OR = {
							is_country_type = dormant_marauders 
							is_country_type = ruined_marauders
							is_country_type = awakened_marauders
						}
					}        
					NOR = {
						has_leader_flag = als_admiral_has_strategy_traits
						has_leader_flag = als_admiral_has_tactic_traits
					}     
				}
				random_list = {
					1 = {
						set_leader_flag = als_admiral_has_strategy_traits
						random_list = {
							1 = {
								add_trait = als_trait_strategic_explosive
							}
							1 = {
								add_trait = als_trait_strategic_energy
							}
							1 = {
								add_trait = als_trait_strategic_kinetic
							}
						}
					}
					1 = {
						set_leader_flag = als_admiral_has_tactic_traits
						random_list = {
							1 = {
								add_trait = als_trait_tactic_ambush_inactive 
               					set_leader_flag = als_admiral_own_ambush
							}
							1 = {
								add_trait = als_trait_tactic_lurker 
                				set_leader_flag = als_admiral_own_lurker
							}
							1 = {
								add_trait = als_trait_tactic_snowball 
             				    set_leader_flag = als_admiral_own_snowball
							}
							1 = {
								add_trait = als_trait_tactic_surprise_attack 
                				set_leader_flag = als_admiral_own_surprise_attack
							}
						}
					}
				}
			}
		}
		
	}
}

###REFRESH ADMIRAL SKILLS POSITION###
country_event = {
	id = als.40
	hide_window = yes
	
	trigger = {
		any_owned_leader = {
			leader_class = admiral
			has_leader_flag = att_admiral
			NOT = {
				has_leader_flag = att_admiral_traits_posed
			}
		}
	}
	
	mean_time_to_happen = {
		days = 30
	}
	
	
	immediate = {
		random_owned_leader = {
			limit = {
				leader_class = admiral
				has_leader_flag = att_admiral
				NOT = {
					has_leader_flag = att_admiral_traits_posed
				}
			}
			set_timed_leader_flag = { flag = att_admiral_traits_posed days = 360 }
			hidden_effect = {
				effect_als_refresh_admiral_traits = yes	
				effect_als_refresh_admiral_status = yes
			}
		}
	}
}
###ADD ADMIRAL EXPERTISED WEAPON TYPE AT LEVEL 5###
country_event = {
	id = als.41
	hide_window = yes
	trigger = {
		OR = {
			any_pool_leader = {
				leader_class = admiral
				has_skill > 4
			}
			any_owned_leader = {
				leader_class = admiral
				has_skill > 4
			}
		}
	}
	
	mean_time_to_happen = {
		days = 60
	}
	
	immediate = { 
		random_pool_leader = {
			limit = {
				leader_class = admiral
				has_leader_flag = als_admiral_has_strategy_traits
				has_skill > 4
				OR = {
					has_trait = als_trait_strategic_energy
					has_trait = als_trait_strategic_explosive
					has_trait = als_trait_strategic_kinetic
					has_trait = als_trait_strategic_point_defense
					has_trait = als_trait_strategic_strike_craft
					has_trait = als_trait_strategic_artillery
					has_trait = als_trait_strategic_anti_hull
					has_trait = als_trait_strategic_anti_armor
					has_trait = als_trait_strategic_anti_shield
				}
				NOT = {
					has_leader_flag = att_admiral_expertised_weapon
				}
			}
			set_leader_flag = att_admiral_expertised_weapon
			if = {
				limit = {
					has_trait = als_trait_strategic_energy
				}
				remove_trait = als_trait_strategic_energy
				add_trait = als_trait_strategic_energy_expert
			}
			if = {
				limit = {
					has_trait = als_trait_strategic_explosive
				}
				remove_trait = als_trait_strategic_explosive
				add_trait = als_trait_strategic_explosive_expert
			}
            if = {
				limit = {
					has_trait = als_trait_strategic_kinetic
				}
				remove_trait = als_trait_strategic_kinetic
				add_trait = als_trait_strategic_kinetic_expert
			}
			if = {
				limit = {
					has_trait = als_trait_strategic_point_defense
				}
				remove_trait = als_trait_strategic_point_defense
				add_trait = als_trait_strategic_point_defense_expert
			}
			if = {
				limit = {
					has_trait = als_trait_strategic_strike_craft
				}
				remove_trait = als_trait_strategic_strike_craft
				add_trait = als_trait_strategic_strike_craft_expert
			}
			if = {
				limit = {
					has_trait = als_trait_strategic_artillery
				}
				remove_trait = als_trait_strategic_artillery
				add_trait = als_trait_strategic_artillery_expert
			}
			if = {
				limit = {
					has_trait = als_trait_strategic_anti_hull
				}
				remove_trait = als_trait_strategic_anti_hull
				add_trait = als_trait_strategic_anti_hull_expert
			}
			if = {
				limit = {
					has_trait = als_trait_strategic_anti_armor
				}
				remove_trait = als_trait_strategic_anti_armor
				add_trait = als_trait_strategic_anti_armor_expert
			}
			if = {
				limit = {
					has_trait = als_trait_strategic_anti_shield
				}
				remove_trait = als_trait_strategic_anti_shield
				add_trait = als_trait_strategic_anti_shield_expert
			}
			hidden_effect = {
				effect_als_refresh_admiral_traits = yes	
				effect_als_refresh_admiral_status = yes
			}
		}
		random_owned_leader = {
			limit = {
				leader_class = admiral
				has_leader_flag = als_admiral_has_strategy_traits
				has_skill > 4
				OR = {
					has_trait = als_trait_strategic_energy
					has_trait = als_trait_strategic_explosive
					has_trait = als_trait_strategic_kinetic
					has_trait = als_trait_strategic_point_defense
					has_trait = als_trait_strategic_strike_craft
					has_trait = als_trait_strategic_artillery
                    has_trait = als_trait_strategic_anti_hull
					has_trait = als_trait_strategic_anti_armor
					has_trait = als_trait_strategic_anti_shield
				}
				NOT = {
					has_leader_flag = att_admiral_expertised_weapon
				}
			}
			set_leader_flag = att_admiral_expertised_weapon
			if = {
				limit = {
					has_trait = als_trait_strategic_energy
				}
				remove_trait = als_trait_strategic_energy
				add_trait = als_trait_strategic_energy_expert
			}
			if = {
				limit = {
					has_trait = als_trait_strategic_explosive
				}
				remove_trait = als_trait_strategic_explosive
				add_trait = als_trait_strategic_explosive_expert
			}
            if = {
				limit = {
					has_trait = als_trait_strategic_kinetic
				}
				remove_trait = als_trait_strategic_kinetic
				add_trait = als_trait_strategic_kinetic_expert
			}
			if = {
				limit = {
					has_trait = als_trait_strategic_point_defense
				}
				remove_trait = als_trait_strategic_point_defense
				add_trait = als_trait_strategic_point_defense_expert
			}
			if = {
				limit = {
					has_trait = als_trait_strategic_strike_craft
				}
				remove_trait = als_trait_strategic_strike_craft
				add_trait = als_trait_strategic_strike_craft_expert
			}
			if = {
				limit = {
					has_trait = als_trait_strategic_artillery
				}
				remove_trait = als_trait_strategic_artillery
				add_trait = als_trait_strategic_artillery_expert
			}
			if = {
				limit = {
					has_trait = als_trait_strategic_anti_hull
				}
				remove_trait = als_trait_strategic_anti_hull
				add_trait = als_trait_strategic_anti_hull_expert
			}
			if = {
				limit = {
					has_trait = als_trait_strategic_anti_armor
				}
				remove_trait = als_trait_strategic_anti_armor
				add_trait = als_trait_strategic_anti_armor_expert
			}
			if = {
				limit = {
					has_trait = als_trait_strategic_anti_shield
				}
				remove_trait = als_trait_strategic_anti_shield
				add_trait = als_trait_strategic_anti_shield_expert
			}

			hidden_effect = {
				effect_als_refresh_admiral_traits = yes	
				effect_als_refresh_admiral_status = yes
			}
		}
###Tactic experted at level 8 ###
		random_pool_leader = {
			limit = {
				leader_class = admiral
				has_leader_flag = als_admiral_has_tactic_traits
				has_skill > 7
				NOT = {
					has_leader_flag = att_admiral_expertised_tactic_trait_fire_once
				}
			}
			effect_als_expertised_tactic_traits = yes
		}
		random_owned_leader = {
			limit = {
				leader_class = admiral
				has_leader_flag = als_admiral_has_tactic_traits
				has_skill > 7
				NOT = {
					has_leader_flag = att_admiral_expertised_tactic_trait_fire_once
				}
			}
			effect_als_expertised_tactic_traits = yes
		}
		country_event = { id = als.40 }
	} 	
}
event = {
	id = als.70
	hide_window = yes
	is_triggered_only = yes
	trigger = {
		any_playable_country = {
			is_ai = no
			any_owned_fleet = {
				exists = leader
				leader = {
					leader_class = admiral
					has_leader_flag = att_admiral
					NOT = {
						has_leader_flag = att_admiral_change_slot
					}
					has_skill > 4
				}
			}
		}
	}
	immediate = {
		every_playable_country = {
			limit = {
				is_ai = no
				NOR = {
					has_country_flag = att_admiral_change_slot_ongoing
					has_country_flag = als_no_skill_change_event
				}
				any_owned_fleet = {
					exists = leader
					leader = {
						leader_class = admiral
						has_leader_flag = att_admiral
						NOT = {
							has_leader_flag = att_admiral_change_slot
						}
						OR = {
							AND = {
								has_leader_flag = att_admiral_expertised_weapon
								has_skill > 4
							}
							AND = {
								has_leader_flag = att_admiral_expertised_tactic_trait
								has_skill > 7
							}
						}
						
					}
				}
			}
			random_owned_fleet = {
				limit = {
					exists = leader
					leader = {
						leader_class = admiral
						has_leader_flag = att_admiral
						OR = {
							AND = {
								has_leader_flag = att_admiral_expertised_weapon
								has_skill > 4
							}
							AND = {
								has_leader_flag = att_admiral_expertised_tactic_trait
								has_skill > 7
							}
						}
						NOT = {
							has_leader_flag = att_admiral_change_slot
						}
					}
				}
				fleet_event = { id = als.42 days = 3 }
			}
		}
	}
}

###ADMIRAL CAN CHANGE THEIR EXPERTISED AFTER LEVEL 5###
fleet_event = {
	id = als.42
	title = als.42.name
	desc = als.42.desc
	picture = GFX_evt_federation_fleet
	location = ROOT
	show_sound = event_laboratory_sound
	is_triggered_only = yes
	
	trigger = {
		root.owner = {
			is_ai = no
			is_at_war = no
#			is_country_type = default
			NOR = {
				has_country_flag = att_admiral_change_slot_ongoing
				has_country_flag = als_no_skill_change_event
			}
		}
		exists = leader
		leader = {
			NOT = {
				has_leader_flag = att_admiral_change_slot
			}
			OR = {
				AND = {
					has_skill > 4
					has_leader_flag = att_admiral_expertised_weapon
				}
				AND = {
					has_skill > 7
					has_leader_flag = att_admiral_expertised_tactic_trait
				}
			}
		}
	}
	
	immediate = {
		owner = {
			set_timed_country_flag = { flag = att_admiral_change_slot_ongoing days = 1080 }
		}
		leader = {
			set_timed_leader_flag = { flag = att_admiral_change_slot days = 7200 }
			if = {
				limit = {
					OR = {
                        has_trait = als_trait_strategic_energy_expert
                        has_trait = als_trait_strategic_explosive_expert
                        has_trait = als_trait_strategic_kinetic_expert
                        has_trait = als_trait_strategic_point_defense_expert
                        has_trait = als_trait_strategic_strike_craft_expert
                        has_trait = als_trait_strategic_artillery_expert
						has_trait = als_trait_strategic_anti_hull_expert
						has_trait = als_trait_strategic_anti_shield_expert
						has_trait = als_trait_strategic_anti_armor_expert
					}
				}
				owner = {
					set_timed_country_flag = { flag = att_admiral_change_slot_is_lv2 days = 1800 }
				}
				set_leader_flag = als_admiral_changing_strategic_traits
			}
			else_if = {
				limit = {
					OR = {
						has_trait = als_trait_strategic_energy
						has_trait = als_trait_strategic_explosive
						has_trait = als_trait_strategic_kinetic
						has_trait = als_trait_strategic_point_defense
						has_trait = als_trait_strategic_strike_craft
						has_trait = als_trait_strategic_artillery
						has_trait = als_trait_strategic_anti_hull
						has_trait = als_trait_strategic_anti_armor
						has_trait = als_trait_strategic_anti_shield
					}
				}
				owner = {
					set_timed_country_flag = { flag = att_admiral_change_slot_is_lv1 days = 1800 }
				}
				set_leader_flag = als_admiral_changing_strategic_traits
			}
			else_if = {
				limit = {
					has_skill > 7
					check_als_admiral_has_experted_tactic_traits = yes
				}
				owner = {
					set_timed_country_flag = { flag = att_admiral_change_slot_is_lv2 days = 1800 }
				}
				set_leader_flag = als_admiral_changing_tactic_traits
			}
			else_if = {
				limit = {
					has_skill > 7
					check_als_admiral_has_normal_tactic_traits = yes

				}
				owner = {
					set_timed_country_flag = { flag = att_admiral_change_slot_is_lv1 days = 1800 }
				}
				set_leader_flag = als_admiral_changing_tactic_traits
			}
			save_event_target_as = att_admiral_changeing
		}
	}
	option = {
		name = als.42.a #Remain strategy
		trigger = {
			leader = {
				has_leader_flag = als_admiral_changing_strategic_traits
				OR = {
					has_trait = als_trait_strategic_energy_expert
					has_trait = als_trait_strategic_explosive_expert
					has_trait = als_trait_strategic_kinetic_expert
					has_trait = als_trait_strategic_point_defense_expert
					has_trait = als_trait_strategic_strike_craft_expert
					has_trait = als_trait_strategic_artillery_expert
					has_trait = als_trait_strategic_anti_hull_expert
					has_trait = als_trait_strategic_anti_shield_expert
					has_trait = als_trait_strategic_anti_armor_expert
				}
			}
		}
		owner = {
			hidden_effect = {
				country_event = { id = als.43 }		
			}	
		}
	}
	option = {
		name = als.42.a_2 #Remain tactic
		trigger = {
			leader = {
				has_leader_flag = als_admiral_changing_tactic_traits
				check_als_admiral_has_experted_tactic_traits = yes
			}
		}
		owner = {
			hidden_effect = {
				country_event = { id = als.43 }		
			}	
		}
	}
	option = {
		name = als.42.b #Let's expertise
		trigger = {
			leader = {
				has_leader_flag = als_admiral_changing_strategic_traits
				OR = {
					has_trait = als_trait_strategic_energy
					has_trait = als_trait_strategic_explosive
					has_trait = als_trait_strategic_kinetic
					has_trait = als_trait_strategic_point_defense
					has_trait = als_trait_strategic_strike_craft
					has_trait = als_trait_strategic_artillery
					has_trait = als_trait_strategic_anti_hull
					has_trait = als_trait_strategic_anti_armor
					has_trait = als_trait_strategic_anti_shield
				}
			}
		}
		custom_tooltip = als.42.b.tooltip
		leader = {
			if = {
				limit = {
					has_trait = als_trait_strategic_energy
				}
				hidden_effect = {
					remove_trait = als_trait_strategic_energy
				}		
				add_trait = als_trait_strategic_energy_expert
			}
			if = {
				limit = {
					has_trait = als_trait_strategic_explosive
				}
				hidden_effect = {
					remove_trait = als_trait_strategic_explosive
				}		
				add_trait = als_trait_strategic_explosive_expert
			}
            if = {
				limit = {
					has_trait = als_trait_strategic_kinetic
				}
				hidden_effect = {
					remove_trait = als_trait_strategic_kinetic
				}		
				add_trait = als_trait_strategic_kinetic_expert
			}
			if = {
				limit = {
					has_trait = als_trait_strategic_point_defense
				}
				hidden_effect = {
					remove_trait = als_trait_strategic_point_defense
				}
				add_trait = als_trait_strategic_point_defense_expert
			}
			if = {
				limit = {
					has_trait = als_trait_strategic_strike_craft
				}
				hidden_effect = {
					remove_trait = als_trait_strategic_strike_craft
				}
				add_trait = als_trait_strategic_strike_craft_expert
			}
			if = {
				limit = {
					has_trait = als_trait_strategic_artillery
				}
				hidden_effect = {
					remove_trait = als_trait_strategic_artillery
				}
				add_trait = als_trait_strategic_artillery_expert
			}
			if = {
				limit = {
					has_trait = als_trait_strategic_anti_hull
				}
				hidden_effect = {
					remove_trait = als_trait_strategic_anti_hull
				}
				add_trait = als_trait_strategic_anti_hull_expert
			}
			if = {
				limit = {
					has_trait = als_trait_strategic_anti_armor
				}
				hidden_effect = {
					remove_trait = als_trait_strategic_anti_armor
				}
				add_trait = als_trait_strategic_anti_armor_expert
			}
			if = {
				limit = {
					has_trait = als_trait_strategic_anti_shield
				}
				hidden_effect = {
					remove_trait = als_trait_strategic_anti_shield
				}
				add_trait = als_trait_strategic_anti_shield_expert
			}
			remove_leader_flag = als_admiral_changing_strategic_traits
			hidden_effect = {
				effect_als_refresh_admiral_traits = yes	
				effect_als_refresh_admiral_status = yes
			}
		}
		owner = {
			remove_country_flag = att_admiral_change_slot_is_lv1
			remove_country_flag = att_admiral_change_slot_is_lv2
		}
	}
	option = {
		name = als.42.b_2 #Let's expertise tactic
		trigger = {
			leader = {
				has_leader_flag = als_admiral_changing_tactic_traits
				check_als_admiral_has_normal_tactic_traits = yes
			}
		}
		custom_tooltip = als.42.b_2.tooltip
		leader = {
			remove_leader_flag = als_admiral_changing_tactic_traits
			remove_leader_flag = att_admiral_expertised_tactic_trait_fire_once
			hidden_effect = {
				effect_als_expertised_tactic_traits = yes
				effect_als_admiral_expertise_tactic_trait = yes
				effect_als_refresh_admiral_traits = yes	
				effect_als_refresh_admiral_status = yes
			}
		}
		owner = {
			remove_country_flag = att_admiral_change_slot_is_lv1
			remove_country_flag = att_admiral_change_slot_is_lv2
		}
	}

	option = {
		name = als.42.c_strategy_to_strategy
		trigger = {
			event_target:att_admiral_changeing = {
				has_leader_flag = als_admiral_changing_strategic_traits
				NOT = {
					has_leader_flag = als_admiral_changing_tactic_traits
				}
			}
		}
		owner = {
			hidden_effect = {
				country_event = { id = als.44 }
			}
		}	
	}
	option = {
		name = als.42.c_strategy_to_tactic
		trigger = {
			event_target:att_admiral_changeing = {
				has_leader_flag = als_admiral_changing_strategic_traits
				NOT = {
					has_leader_flag = als_admiral_changing_tactic_traits
				}
			}
		}
		owner = {
			hidden_effect = {
				country_event = { id = als.46 }
			}
		}	
	}
	option = {
		name = als.42.c_tactic_to_tactic
		trigger = {
			event_target:att_admiral_changeing = {
				has_leader_flag = als_admiral_changing_tactic_traits 
				NOT = {
					has_leader_flag = als_admiral_changing_strategic_traits
				}
			}
		}
		owner = {
			hidden_effect = {
				country_event = { id = als.46 }
			}
		}	
	}
	option = {
		name = als.42.c_tactic_to_strategy
		trigger = {
			event_target:att_admiral_changeing = {
				has_leader_flag = als_admiral_changing_tactic_traits 
				NOT = {
					has_leader_flag = als_admiral_changing_strategic_traits
				}
			}
		}
		owner = {
			hidden_effect = {
				country_event = { id = als.44 }
			}
		}	
	}
}
####ARE YOU SURE NOT TO CHANGE THE PREFER SLOT###
country_event = {
	id = als.43
	title = als.43.name
	desc = {
		trigger = {
			hidden:root = {
				success_text = {
					text = "als.43.desc.b"
					has_country_flag = att_admiral_change_slot_is_lv1
				} 
				success_text = {
					text = "als.43.desc"
					NOT = {
						has_country_flag = att_admiral_change_slot_is_lv1
					}
				}
			}
		}
	}
	picture = GFX_evt_federation_fleet
	show_sound = event_default
	is_triggered_only = yes
	
	trigger = {
		exists = event_target:att_admiral_changeing
	}
	

	option = { 
		name = als.43.a #Don't change
		trigger = {
			event_target:att_admiral_changeing = {
				has_leader_flag = als_admiral_changing_tactic_traits
				check_als_admiral_has_normal_tactic_traits = no
			}
		}
		event_target:att_admiral_changeing = {
			remove_leader_flag = als_admiral_changing_tactic_traits
		}
		custom_tooltip = als.45.a.tooltip
	}
	option = {
		name = als.42.b_2 #Expertised them instead
		trigger = {
			event_target:att_admiral_changeing = {
				has_leader_flag = als_admiral_changing_tactic_traits
				check_als_admiral_has_normal_tactic_traits = yes
			}
		}
		custom_tooltip = als.42.b_2.tooltip
		event_target:att_admiral_changeing = {
			remove_leader_flag = als_admiral_changing_tactic_traits
			remove_leader_flag = att_admiral_expertised_tactic_trait_fire_once
			hidden_effect = {
				effect_als_expertised_tactic_traits = yes
				effect_als_admiral_expertise_tactic_trait = yes
				effect_als_refresh_admiral_traits = yes	
				effect_als_refresh_admiral_status = yes
			}
		}
		owner = {
			remove_country_flag = att_admiral_change_slot_is_lv1
			remove_country_flag = att_admiral_change_slot_is_lv2
		}
	}
	option = { 
		name = als.43.a #Don't change
		trigger = {
			event_target:att_admiral_changeing = {
				has_leader_flag = als_admiral_changing_strategic_traits
				NOR = {
					has_trait = als_trait_strategic_energy
					has_trait = als_trait_strategic_explosive
					has_trait = als_trait_strategic_kinetic
					has_trait = als_trait_strategic_point_defense
					has_trait = als_trait_strategic_strike_craft
					has_trait = als_trait_strategic_artillery
					has_trait = als_trait_strategic_anti_hull
					has_trait = als_trait_strategic_anti_armor
					has_trait = als_trait_strategic_anti_shield
				}
			}
		}
		event_target:att_admiral_changeing = {
			remove_leader_flag = als_admiral_changing_strategic_traits
		}
		custom_tooltip = als.43.a.tooltip
	}
	option = {
		name = als.42.b #Expertised them instead
		trigger = {
			event_target:att_admiral_changeing = {
				has_leader_flag = als_admiral_changing_strategic_traits
				OR = {
					has_trait = als_trait_strategic_energy
					has_trait = als_trait_strategic_explosive
					has_trait = als_trait_strategic_kinetic
					has_trait = als_trait_strategic_point_defense
					has_trait = als_trait_strategic_strike_craft
					has_trait = als_trait_strategic_artillery
					has_trait = als_trait_strategic_anti_hull
					has_trait = als_trait_strategic_anti_armor
					has_trait = als_trait_strategic_anti_shield
				}
			}
		}
		custom_tooltip = als.42.b.tooltip
		event_target:att_admiral_changeing = {
			if = {
				limit = {
					has_trait = als_trait_strategic_energy
				}
				hidden_effect = {
					remove_trait = als_trait_strategic_energy
				}		
				add_trait = als_trait_strategic_energy_expert
			}
			if = {
				limit = {
					has_trait = als_trait_strategic_explosive
				}
				hidden_effect = {
					remove_trait = als_trait_strategic_explosive
				}		
				add_trait = als_trait_strategic_explosive_expert
			}
            if = {
				limit = {
					has_trait = als_trait_strategic_kinetic
				}
				hidden_effect = {
					remove_trait = als_trait_strategic_kinetic
				}		
				add_trait = als_trait_strategic_kinetic_expert
			}
			if = {
				limit = {
					has_trait = als_trait_strategic_point_defense
				}
				hidden_effect = {
					remove_trait = als_trait_strategic_point_defense
				}
				add_trait = als_trait_strategic_point_defense_expert
			}
			if = {
				limit = {
					has_trait = als_trait_strategic_strike_craft
				}
				hidden_effect = {
					remove_trait = als_trait_strategic_strike_craft
				}
				add_trait = als_trait_strategic_strike_craft_expert
			}
			if = {
				limit = {
					has_trait = als_trait_strategic_artillery
				}
				hidden_effect = {
					remove_trait = als_trait_strategic_artillery
				}
				add_trait = als_trait_strategic_artillery_expert
			}
			if = {
				limit = {
					has_trait = als_trait_strategic_anti_hull
				}
				hidden_effect = {
					remove_trait = als_trait_strategic_anti_hull
				}
				add_trait = als_trait_strategic_anti_hull_expert
			}
			if = {
				limit = {
					has_trait = als_trait_strategic_anti_armor
				}
				hidden_effect = {
					remove_trait = als_trait_strategic_anti_armor
				}
				add_trait = als_trait_strategic_anti_armor_expert
			}
			if = {
				limit = {
					has_trait = als_trait_strategic_anti_shield
				}
				hidden_effect = {
					remove_trait = als_trait_strategic_anti_shield
				}
				add_trait = als_trait_strategic_anti_shield_expert
			}
			remove_leader_flag = als_admiral_changing_strategic_traits
			hidden_effect = {
				effect_als_refresh_admiral_traits = yes	
				effect_als_refresh_admiral_status = yes
			}
		}
		owner = {
			remove_country_flag = att_admiral_change_slot_is_lv1
			remove_country_flag = att_admiral_change_slot_is_lv2
		}
	}
	option = {
		name = als.42.c_strategy_to_strategy
		trigger = {
			event_target:att_admiral_changeing = {
				has_leader_flag = als_admiral_changing_strategic_traits
				NOT = {
					has_leader_flag = als_admiral_changing_tactic_traits
				}
			}
		}
		owner = {
			hidden_effect = {
				country_event = { id = als.44 }
			}
		}	
	}
	option = {
		name = als.42.c_strategy_to_tactic
		trigger = {
			event_target:att_admiral_changeing = {
				has_leader_flag = als_admiral_changing_strategic_traits
				NOT = {
					has_leader_flag = als_admiral_changing_tactic_traits
				}
			}
		}
		owner = {
			hidden_effect = {
				country_event = { id = als.46 }
			}
		}	
	}
	option = {
		name = als.42.c_tactic_to_tactic
		trigger = {
			event_target:att_admiral_changeing = {
				has_leader_flag = als_admiral_changing_tactic_traits 
				NOT = {
					has_leader_flag = als_admiral_changing_strategic_traits
				}
			}
		}
		owner = {
			hidden_effect = {
				country_event = { id = als.46 }
			}
		}	
	}
	option = {
		name = als.42.c_tactic_to_strategy
		trigger = {
			event_target:att_admiral_changeing = {
				has_leader_flag = als_admiral_changing_tactic_traits 
				NOT = {
					has_leader_flag = als_admiral_changing_strategic_traits
				}
			}
		}
		owner = {
			hidden_effect = {
				country_event = { id = als.44 }
			}
		}	
	}
}
###SELECT ONE THE ADMIRAL PREFER TYPE YOU WANT###
country_event = {
	id = als.44
	title = als.44.name
	desc = als.44.desc
	picture = GFX_evt_federation_fleet
	is_triggered_only = yes
	
	trigger = {
		exists = event_target:att_admiral_changeing
		any_owned_leader = {
			leader_class = admiral
			has_leader_flag = att_admiral
			has_leader_flag = att_admiral_change_slot
		}
	}

	option = {
		name = als.44.a #energy
		trigger = {
			event_target:att_admiral_changeing = {	
				NOR = {
					has_trait = als_trait_strategic_energy
					has_trait = als_trait_strategic_energy_expert
				}
			}	
		}
		event_target:att_admiral_changeing = {
			hidden_effect = {
				effect_als_crisis_admiral_remove_wrong_traits = yes
				effect_als_cleanup_tactic_own_flags = yes
				effect_als_admiral_cleanup_all_tactic_trait = yes
				effect_als_admiral_clean_all_tactic_flags = yes
				set_leader_flag = att_admiral_expertised_weapon
			}
			add_trait = als_trait_strategic_energy
			remove_leader_flag = als_admiral_changing_tactic_traits
			remove_leader_flag = als_admiral_changing_strategic_traits
			hidden_effect = {
				effect_als_refresh_admiral_traits = yes	
				effect_als_refresh_admiral_status = yes
			}
			set_leader_flag = als_admiral_has_strategy_traits
			remove_leader_flag = als_admiral_has_tactic_traits
		}
		remove_country_flag = att_admiral_change_slot_is_lv1
		remove_country_flag = att_admiral_change_slot_is_lv2
	}
	
	option = {
		name = als.44.b #explosive
		trigger = {
			event_target:att_admiral_changeing = {	
				NOR = {
					has_trait = als_trait_strategic_explosive
					has_trait = als_trait_strategic_explosive_expert
				}
			}	
		}
		event_target:att_admiral_changeing = {
			hidden_effect = {
				effect_als_crisis_admiral_remove_wrong_traits = yes
				effect_als_cleanup_tactic_own_flags = yes
				effect_als_admiral_cleanup_all_tactic_trait = yes
				effect_als_admiral_clean_all_tactic_flags = yes
				set_leader_flag = att_admiral_expertised_weapon
			}
			add_trait = als_trait_strategic_explosive
			remove_leader_flag = als_admiral_changing_tactic_traits
			remove_leader_flag = als_admiral_changing_strategic_traits
			hidden_effect = {
				effect_als_refresh_admiral_traits = yes	
				effect_als_refresh_admiral_status = yes
			}
			set_leader_flag = als_admiral_has_strategy_traits
			remove_leader_flag = als_admiral_has_tactic_traits
		}
		remove_country_flag = att_admiral_change_slot_is_lv1
		remove_country_flag = att_admiral_change_slot_is_lv2
	}
	
	option = {
		name = als.44.c #kinetic
		trigger = {
			event_target:att_admiral_changeing = {	
				NOR = {
					has_trait = als_trait_strategic_kinetic
					has_trait = als_trait_strategic_kinetic_expert
				}
			}	
		}
		event_target:att_admiral_changeing = {
			hidden_effect = {
				effect_als_crisis_admiral_remove_wrong_traits = yes
				effect_als_cleanup_tactic_own_flags = yes
				effect_als_admiral_cleanup_all_tactic_trait = yes
				effect_als_admiral_clean_all_tactic_flags = yes
				set_leader_flag = att_admiral_expertised_weapon
			}
			add_trait = als_trait_strategic_kinetic
			remove_leader_flag = als_admiral_changing_tactic_traits
			remove_leader_flag = als_admiral_changing_strategic_traits
			hidden_effect = {
				effect_als_refresh_admiral_traits = yes	
				effect_als_refresh_admiral_status = yes
			}
			set_leader_flag = als_admiral_has_strategy_traits
			remove_leader_flag = als_admiral_has_tactic_traits
		}
		remove_country_flag = att_admiral_change_slot_is_lv1
		remove_country_flag = att_admiral_change_slot_is_lv2
	}
	
	option = {
		name = als.44.d #point defense
		trigger = {
			event_target:att_admiral_changeing = {	
				NOR = {
					has_trait = als_trait_strategic_point_defense
					has_trait = als_trait_strategic_point_defense_expert
				}
			}	
		}
		event_target:att_admiral_changeing = {
			hidden_effect = {
				effect_als_crisis_admiral_remove_wrong_traits = yes
				effect_als_cleanup_tactic_own_flags = yes
				effect_als_admiral_cleanup_all_tactic_trait = yes
				effect_als_admiral_clean_all_tactic_flags = yes
				set_leader_flag = att_admiral_expertised_weapon
			}
			add_trait = als_trait_strategic_point_defense
			remove_leader_flag = als_admiral_changing_tactic_traits
			remove_leader_flag = als_admiral_changing_strategic_traits
			hidden_effect = {
				effect_als_refresh_admiral_traits = yes	
				effect_als_refresh_admiral_status = yes
			}
			set_leader_flag = als_admiral_has_strategy_traits
			remove_leader_flag = als_admiral_has_tactic_traits
		}
		remove_country_flag = att_admiral_change_slot_is_lv1
		remove_country_flag = att_admiral_change_slot_is_lv2
	}
	
    option = {
		name = als.44.e #strike craft
		trigger = {
			OR = {
				has_technology = tech_strike_craft_1
				has_technology = tech_strike_craft_2
				has_technology = tech_strike_craft_3
			}
			event_target:att_admiral_changeing = {	
				NOR = {
					has_trait = als_trait_strategic_strike_craft
					has_trait = als_trait_strategic_strike_craft_expert
				}
			}	
		}
		event_target:att_admiral_changeing = {
			hidden_effect = {
				effect_als_crisis_admiral_remove_wrong_traits = yes
				effect_als_cleanup_tactic_own_flags = yes
				effect_als_admiral_cleanup_all_tactic_trait = yes
				effect_als_admiral_clean_all_tactic_flags = yes
				set_leader_flag = att_admiral_expertised_weapon
			}
			add_trait = als_trait_strategic_strike_craft
			remove_leader_flag = als_admiral_changing_tactic_traits
			remove_leader_flag = als_admiral_changing_strategic_traits
			hidden_effect = {
				effect_als_refresh_admiral_traits = yes	
				effect_als_refresh_admiral_status = yes
			}
			set_leader_flag = als_admiral_has_strategy_traits
			remove_leader_flag = als_admiral_has_tactic_traits
		}
		remove_country_flag = att_admiral_change_slot_is_lv1
		remove_country_flag = att_admiral_change_slot_is_lv2
	}
    
	option = {
		name = als.44.f #artillery
		trigger = {
			event_target:att_admiral_changeing = {	
				NOR = {
					has_trait = als_trait_strategic_artillery
					has_trait = als_trait_strategic_artillery_expert
				}
			}	
		}
		event_target:att_admiral_changeing = {
			hidden_effect = {
				effect_als_crisis_admiral_remove_wrong_traits = yes
				effect_als_cleanup_tactic_own_flags = yes
				effect_als_admiral_cleanup_all_tactic_trait = yes
				effect_als_admiral_clean_all_tactic_flags = yes
				set_leader_flag = att_admiral_expertised_weapon
			}
			add_trait = als_trait_strategic_artillery
			remove_leader_flag = als_admiral_changing_tactic_traits
			remove_leader_flag = als_admiral_changing_strategic_traits
			hidden_effect = {
				effect_als_refresh_admiral_traits = yes	
				effect_als_refresh_admiral_status = yes
			}
			set_leader_flag = als_admiral_has_strategy_traits
			remove_leader_flag = als_admiral_has_tactic_traits
		}
		remove_country_flag = att_admiral_change_slot_is_lv1
		remove_country_flag = att_admiral_change_slot_is_lv2
	}
	
	option = {
		name = als.44.g #anti hull
		trigger = {
			event_target:att_admiral_changeing = {	
				NOR = {
					has_trait = als_trait_strategic_anti_hull
					has_trait = als_trait_strategic_anti_hull_expert
				}
			}	
		}
		event_target:att_admiral_changeing = {
			hidden_effect = {
				effect_als_crisis_admiral_remove_wrong_traits = yes
				effect_als_cleanup_tactic_own_flags = yes
				effect_als_admiral_cleanup_all_tactic_trait = yes
				effect_als_admiral_clean_all_tactic_flags = yes
				set_leader_flag = att_admiral_expertised_weapon
			}
			add_trait = als_trait_strategic_anti_hull
			remove_leader_flag = als_admiral_changing_tactic_traits
			remove_leader_flag = als_admiral_changing_strategic_traits
			hidden_effect = {
				effect_als_refresh_admiral_traits = yes	
				effect_als_refresh_admiral_status = yes
			}
			set_leader_flag = als_admiral_has_strategy_traits
			remove_leader_flag = als_admiral_has_tactic_traits
		}
		remove_country_flag = att_admiral_change_slot_is_lv1
		remove_country_flag = att_admiral_change_slot_is_lv2
	}
	
	option = {
		name = als.44.h #anti armor
		trigger = {
			event_target:att_admiral_changeing = {	
				NOR = {
					has_trait = als_trait_strategic_anti_armor
					has_trait = als_trait_strategic_anti_armor_expert
				}
			}	
		}
		event_target:att_admiral_changeing = {
			hidden_effect = {
				effect_als_crisis_admiral_remove_wrong_traits = yes
				effect_als_cleanup_tactic_own_flags = yes
				effect_als_admiral_cleanup_all_tactic_trait = yes
				effect_als_admiral_clean_all_tactic_flags = yes
				set_leader_flag = att_admiral_expertised_weapon
			}
			add_trait = als_trait_strategic_anti_armor
			remove_leader_flag = als_admiral_changing_tactic_traits
			remove_leader_flag = als_admiral_changing_strategic_traits
			hidden_effect = {
				effect_als_refresh_admiral_traits = yes	
				effect_als_refresh_admiral_status = yes
			}
			set_leader_flag = als_admiral_has_strategy_traits
			remove_leader_flag = als_admiral_has_tactic_traits
		}
		remove_country_flag = att_admiral_change_slot_is_lv1
		remove_country_flag = att_admiral_change_slot_is_lv2
	}
	
	option = {
		name = als.44.i #anti shield
		trigger = {
			event_target:att_admiral_changeing = {	
				NOR = {
					has_trait = als_trait_strategic_anti_shield
					has_trait = als_trait_strategic_anti_shield_expert
				}
			}	
		}
		event_target:att_admiral_changeing = {
			hidden_effect = {
				effect_als_crisis_admiral_remove_wrong_traits = yes
				effect_als_cleanup_tactic_own_flags = yes
				effect_als_admiral_cleanup_all_tactic_trait = yes
				effect_als_admiral_clean_all_tactic_flags = yes
				set_leader_flag = att_admiral_expertised_weapon
			}
			add_trait = als_trait_strategic_anti_shield
			remove_leader_flag = als_admiral_changing_tactic_traits
			remove_leader_flag = als_admiral_changing_strategic_traits
			hidden_effect = {
				effect_als_refresh_admiral_traits = yes	
				effect_als_refresh_admiral_status = yes
			}
			set_leader_flag = als_admiral_has_strategy_traits
			remove_leader_flag = als_admiral_has_tactic_traits
		}
		remove_country_flag = att_admiral_change_slot_is_lv1
		remove_country_flag = att_admiral_change_slot_is_lv2
	}
	
	option = {
		name = als.44.j #nevermind
		hidden_effect = {
			country_event = { id = als.43 }
		}
	}
}
####ARE YOU SURE NOT TO CHANGE THE TACTIC###
country_event = {
	id = als.45
	title = als.45.name
	desc = {
		trigger = {
			hidden:root = {
				success_text = {
					text = "als.45.desc.b"
					has_country_flag = att_admiral_change_slot_is_lv1
				} 
				success_text = {
					text = "als.45.desc"
					NOT = {
						has_country_flag = att_admiral_change_slot_is_lv1
					}
				}
			}
		}
	}
	picture = GFX_evt_federation_fleet
	show_sound = event_default
	is_triggered_only = yes
	
	trigger = {
		exists = event_target:att_admiral_changeing
	}
	
	option = { 
		name = als.43.a #Don't change
		trigger = {
			event_target:att_admiral_changeing = {
				has_leader_flag = als_admiral_changing_tactic_traits
				check_als_admiral_has_normal_tactic_traits = no
			}
		}
		event_target:att_admiral_changeing = {
			remove_leader_flag = als_admiral_changing_tactic_traits
		}
		custom_tooltip = als.45.a.tooltip
	}
	option = {
		name = als.42.b_2 #Expertised them instead
		trigger = {
			event_target:att_admiral_changeing = {
				has_leader_flag = als_admiral_changing_tactic_traits
				check_als_admiral_has_normal_tactic_traits = yes
			}
		}
		custom_tooltip = als.42.b_2.tooltip
		event_target:att_admiral_changeing = {
			remove_leader_flag = als_admiral_changing_tactic_traits
			remove_leader_flag = att_admiral_expertised_tactic_trait_fire_once
			hidden_effect = {
				effect_als_expertised_tactic_traits = yes
				effect_als_admiral_expertise_tactic_trait = yes
				effect_als_refresh_admiral_traits = yes	
				effect_als_refresh_admiral_status = yes
			}
		}
		owner = {
			remove_country_flag = att_admiral_change_slot_is_lv1
			remove_country_flag = att_admiral_change_slot_is_lv2
		}
	}
	option = {
		name = als.42.c_strategy_to_strategy
		trigger = {
			event_target:att_admiral_changeing = {
				has_leader_flag = als_admiral_changing_strategic_traits
				NOT = {
					has_leader_flag = als_admiral_changing_tactic_traits
				}
			}
		}
		owner = {
			hidden_effect = {
				country_event = { id = als.44 }
			}
		}	
	}
	option = {
		name = als.42.c_strategy_to_tactic
		trigger = {
			event_target:att_admiral_changeing = {
				has_leader_flag = als_admiral_changing_strategic_traits
				NOT = {
					has_leader_flag = als_admiral_changing_tactic_traits
				}
			}
		}
		owner = {
			hidden_effect = {
				country_event = { id = als.46 }
			}
		}	
	}
	option = {
		name = als.42.c_tactic_to_tactic
		trigger = {
			event_target:att_admiral_changeing = {
				has_leader_flag = als_admiral_changing_tactic_traits 
				NOT = {
					has_leader_flag = als_admiral_changing_strategic_traits
				}
			}
		}
		owner = {
			hidden_effect = {
				country_event = { id = als.46 }
			}
		}	
	}
	option = {
		name = als.42.c_tactic_to_strategy
		trigger = {
			event_target:att_admiral_changeing = {
				has_leader_flag = als_admiral_changing_tactic_traits 
				NOT = {
					has_leader_flag = als_admiral_changing_strategic_traits
				}
			}
		}
		owner = {
			hidden_effect = {
				country_event = { id = als.44 }
			}
		}	
	}
}
###SELECT ONE THE ADMIRAL PREFER TACTIC YOU WANT###
country_event = {
	id = als.46
	title = als.46.name
	desc = als.46.desc
	picture = GFX_evt_federation_fleet
	is_triggered_only = yes
	
	trigger = {
		exists = event_target:att_admiral_changeing
		any_owned_leader = {
			leader_class = admiral
			has_leader_flag = att_admiral
			has_leader_flag = att_admiral_change_slot
		}
	}

	option = {
		name = als.46.a #ambush
		trigger = {
			event_target:att_admiral_changeing = {	
				NOR = {
					has_trait = als_trait_tactic_ambush_inactive
					has_trait = als_trait_tactic_ambush_actived
					has_trait = als_trait_tactic_ambush_expert_inactive
					has_trait = als_trait_tactic_ambush_expert_actived
				}
			}	
		}
		custom_tooltip = als_trait_tactic_ambush.tooltip
		event_target:att_admiral_changeing = {		
			remove_leader_flag = als_admiral_changing_tactic_traits
			remove_leader_flag = als_admiral_changing_strategic_traits
			hidden_effect = {
				effect_als_crisis_admiral_remove_wrong_traits = yes
				effect_als_cleanup_tactic_own_flags = yes
				effect_als_admiral_cleanup_all_tactic_trait = yes
				effect_als_admiral_clean_all_tactic_flags = yes
				add_trait = als_trait_tactic_ambush_inactive
				effect_als_refresh_admiral_traits = yes	
				effect_als_refresh_admiral_status = yes
			}
			tooltip = {
				add_trait = als_trait_tactic_ambush_inactive
			}
			set_leader_flag = als_admiral_own_ambush
			set_leader_flag = als_admiral_has_tactic_traits
			remove_leader_flag = als_admiral_has_strategy_traits
		}
		remove_country_flag = att_admiral_change_slot_is_lv1
		remove_country_flag = att_admiral_change_slot_is_lv2
	}
	option = {
		name = als.46.b #bottled up
		trigger = {
			event_target:att_admiral_changeing = {	
				NOR = {
					has_trait = als_trait_tactic_bottled_up_actived
					has_trait = als_trait_tactic_bottled_up_inactive1
					has_trait = als_trait_tactic_bottled_up_inactive2
					has_trait = als_trait_tactic_bottled_up_inactive3
					has_trait = als_trait_tactic_bottled_up_inactive4
					has_trait = als_trait_tactic_bottled_up_inactive5
					has_trait = als_trait_tactic_bottled_up_inactive6
					has_trait = als_trait_tactic_bottled_up_inactive7
					has_trait = als_trait_tactic_bottled_up_expert_actived
					has_trait = als_trait_tactic_bottled_up_expert_inactive1
					has_trait = als_trait_tactic_bottled_up_expert_inactive2
					has_trait = als_trait_tactic_bottled_up_expert_inactive3
					has_trait = als_trait_tactic_bottled_up_expert_inactive4
					has_trait = als_trait_tactic_bottled_up_expert_inactive5
					has_trait = als_trait_tactic_bottled_up_expert_inactive6
					has_trait = als_trait_tactic_bottled_up_expert_inactive7
				}
			}	
		}
		custom_tooltip = als_trait_tactic_bottled_up.tooltip
		event_target:att_admiral_changeing = {
			remove_leader_flag = als_admiral_changing_tactic_traits
			remove_leader_flag = als_admiral_changing_strategic_traits
			hidden_effect = {
				effect_als_crisis_admiral_remove_wrong_traits = yes
				effect_als_cleanup_tactic_own_flags = yes
				effect_als_admiral_cleanup_all_tactic_trait = yes
				effect_als_admiral_clean_all_tactic_flags = yes
				effect_als_bottled_up_add_trait = yes
				effect_als_refresh_admiral_traits = yes	
				effect_als_refresh_admiral_status = yes
			}
			tooltip = {
				add_trait = als_trait_tactic_bottled_up_inactive1
			}
			set_leader_flag = als_admiral_own_bottled_up
			set_leader_flag = als_admiral_has_tactic_traits
			remove_leader_flag = als_admiral_has_strategy_traits
		}
		remove_country_flag = att_admiral_change_slot_is_lv1
		remove_country_flag = att_admiral_change_slot_is_lv2
	}
	option = {
		name = als.46.c #camper
		trigger = {
			event_target:att_admiral_changeing = {	
				NOR = {
					has_trait = als_trait_tactic_camper
					has_trait = als_trait_tactic_camper_ready
					has_trait = als_trait_tactic_camper_actived
					has_trait = als_trait_tactic_camper_expert
					has_trait = als_trait_tactic_camper_expert_ready
					has_trait = als_trait_tactic_camper_expert_actived
				}
			}	
		}
		custom_tooltip = als_trait_tactic_camper.tooltip
		event_target:att_admiral_changeing = {
			remove_leader_flag = als_admiral_changing_tactic_traits
			remove_leader_flag = als_admiral_changing_strategic_traits
			hidden_effect = {
				effect_als_crisis_admiral_remove_wrong_traits = yes
				effect_als_cleanup_tactic_own_flags = yes
				effect_als_admiral_cleanup_all_tactic_trait = yes
				effect_als_admiral_clean_all_tactic_flags = yes
				add_trait = als_trait_tactic_camper
				effect_als_refresh_admiral_traits = yes	
				effect_als_refresh_admiral_status = yes
			}
			tooltip = {
				add_trait = als_trait_tactic_camper
			}
			set_leader_flag = als_admiral_own_camper
			set_leader_flag = als_admiral_has_tactic_traits
			remove_leader_flag = als_admiral_has_strategy_traits
		}
		remove_country_flag = att_admiral_change_slot_is_lv1
		remove_country_flag = att_admiral_change_slot_is_lv2
	}
	option = {
		name = als.46.d #copycat
		trigger = {
			event_target:att_admiral_changeing = {	
				NOR = {
					has_trait = als_trait_tactic_copycat
					has_trait = als_trait_tactic_copycat_energy
					has_trait = als_trait_tactic_copycat_explosive
					has_trait = als_trait_tactic_copycat_kinetic
					has_trait = als_trait_tactic_copycat_point_defense
					has_trait = als_trait_tactic_copycat_strike_craft
					has_trait = als_trait_tactic_copycat_artillery
					has_trait = als_trait_tactic_copycat_anti_hull
					has_trait = als_trait_tactic_copycat_anti_armor
					has_trait = als_trait_tactic_copycat_anti_shield
					has_trait = als_trait_tactic_copycat_expert
					has_trait = als_trait_tactic_copycat_expert_energy
					has_trait = als_trait_tactic_copycat_expert_explosive
					has_trait = als_trait_tactic_copycat_expert_kinetic
					has_trait = als_trait_tactic_copycat_expert_point_defense
					has_trait = als_trait_tactic_copycat_expert_strike_craft
					has_trait = als_trait_tactic_copycat_expert_artillery
					has_trait = als_trait_tactic_copycat_expert_anti_hull
					has_trait = als_trait_tactic_copycat_expert_anti_armor
					has_trait = als_trait_tactic_copycat_expert_anti_shield
				}
			}	
		}
		custom_tooltip = als_trait_tactic_copycat.tooltip
		event_target:att_admiral_changeing = {
			remove_leader_flag = als_admiral_changing_tactic_traits
			remove_leader_flag = als_admiral_changing_strategic_traits
			hidden_effect = {
				effect_als_crisis_admiral_remove_wrong_traits = yes
				effect_als_cleanup_tactic_own_flags = yes
				effect_als_admiral_cleanup_all_tactic_trait = yes
				effect_als_admiral_clean_all_tactic_flags = yes
				add_trait = als_trait_tactic_copycat
				effect_als_refresh_admiral_traits = yes	
				effect_als_refresh_admiral_status = yes
			}
			tooltip = {
				add_trait = als_trait_tactic_copycat
			}
			set_leader_flag = als_admiral_own_copycat
			set_leader_flag = als_admiral_has_tactic_traits
			remove_leader_flag = als_admiral_has_strategy_traits
		}
		remove_country_flag = att_admiral_change_slot_is_lv1
		remove_country_flag = att_admiral_change_slot_is_lv2
	}
	option = {
		name = als.46.e #first strike
		trigger = {
			event_target:att_admiral_changeing = {	
				NOR = {
					has_trait = als_trait_tactic_first_strike
					has_trait = als_trait_tactic_first_strike1
					has_trait = als_trait_tactic_first_strike2
					has_trait = als_trait_tactic_first_strike3
					has_trait = als_trait_tactic_first_strike4
					has_trait = als_trait_tactic_first_strike5
					has_trait = als_trait_tactic_first_strike6
					has_trait = als_trait_tactic_first_strike7
					has_trait = als_trait_tactic_first_strike8
					has_trait = als_trait_tactic_first_strike_expert
					has_trait = als_trait_tactic_first_strike1_expert
					has_trait = als_trait_tactic_first_strike2_expert
					has_trait = als_trait_tactic_first_strike3_expert
					has_trait = als_trait_tactic_first_strike4_expert
					has_trait = als_trait_tactic_first_strike5_expert
					has_trait = als_trait_tactic_first_strike6_expert
					has_trait = als_trait_tactic_first_strike7_expert
					has_trait = als_trait_tactic_first_strike8_expert
				}
			}	
		}
		custom_tooltip = als_trait_tactic_first_strike.tooltip
		event_target:att_admiral_changeing = {
			remove_leader_flag = als_admiral_changing_tactic_traits
			remove_leader_flag = als_admiral_changing_strategic_traits
			hidden_effect = {
				effect_als_crisis_admiral_remove_wrong_traits = yes
				effect_als_cleanup_tactic_own_flags = yes
				effect_als_admiral_cleanup_all_tactic_trait = yes
				effect_als_admiral_clean_all_tactic_flags = yes
				add_trait = als_trait_tactic_first_strike
				effect_als_refresh_admiral_traits = yes	
				effect_als_refresh_admiral_status = yes
			}
			tooltip = {
				add_trait = als_trait_tactic_first_strike
			}
			set_leader_flag = als_admiral_own_first_strike
			set_leader_flag = als_admiral_has_tactic_traits
			remove_leader_flag = als_admiral_has_strategy_traits
		}
		remove_country_flag = att_admiral_change_slot_is_lv1
		remove_country_flag = att_admiral_change_slot_is_lv2
	}
	option = {
		name = als.46.f #foresight
		trigger = {
			OR = {
				event_target:att_admiral_changeing = {	
					NOR = {
						has_trait = als_trait_tactic_foresight
						has_trait = als_trait_tactic_foresight_actived
						has_trait = als_trait_tactic_foresight_expert
						has_trait = als_trait_tactic_foresight_expert_actived
					}
					species = {
						OR = {
							has_trait = trait_latent_psionic
							has_trait = trait_psionic
						}
					}
				}	
				root = {
					has_authority = auth_hive_mind
				}
			}
		}
		custom_tooltip = als_trait_tactic_foresight.tooltip
		event_target:att_admiral_changeing = {
			remove_leader_flag = als_admiral_changing_tactic_traits
			remove_leader_flag = als_admiral_changing_strategic_traits
			hidden_effect = {
				effect_als_crisis_admiral_remove_wrong_traits = yes
				effect_als_cleanup_tactic_own_flags = yes
				effect_als_admiral_cleanup_all_tactic_trait = yes
				effect_als_admiral_clean_all_tactic_flags = yes
				add_trait = als_trait_tactic_foresight
				effect_als_refresh_admiral_traits = yes	
				effect_als_refresh_admiral_status = yes
			}
			tooltip = {
				add_trait = als_trait_tactic_foresight
			}
			set_leader_flag = als_admiral_own_foresight
			set_leader_flag = als_admiral_has_tactic_traits
			remove_leader_flag = als_admiral_has_strategy_traits
		}
		remove_country_flag = att_admiral_change_slot_is_lv1
		remove_country_flag = att_admiral_change_slot_is_lv2
	}
	option = {
		name = als.46.g #fox tiger
		trigger = {
			event_target:att_admiral_changeing = {	
				NOR = {
					has_trait = als_trait_tactic_fox_tiger_actived
					has_trait = als_trait_tactic_fox_tiger_inactive1
					has_trait = als_trait_tactic_fox_tiger_inactive2
					has_trait = als_trait_tactic_fox_tiger_inactive3
					has_trait = als_trait_tactic_fox_tiger_inactive4
					has_trait = als_trait_tactic_fox_tiger_inactive5
					has_trait = als_trait_tactic_fox_tiger_inactive6
					has_trait = als_trait_tactic_fox_tiger_inactive7
					has_trait = als_trait_tactic_fox_tiger_expert_actived
					has_trait = als_trait_tactic_fox_tiger_expert_inactive1
					has_trait = als_trait_tactic_fox_tiger_expert_inactive2
					has_trait = als_trait_tactic_fox_tiger_expert_inactive3
					has_trait = als_trait_tactic_fox_tiger_expert_inactive4
					has_trait = als_trait_tactic_fox_tiger_expert_inactive5
					has_trait = als_trait_tactic_fox_tiger_expert_inactive6
					has_trait = als_trait_tactic_fox_tiger_expert_inactive7
				}
			}	
		}
		custom_tooltip = als_trait_tactic_fox_tiger.tooltip
		event_target:att_admiral_changeing = {
			remove_leader_flag = als_admiral_changing_tactic_traits
			remove_leader_flag = als_admiral_changing_strategic_traits
			hidden_effect = {
				effect_als_crisis_admiral_remove_wrong_traits = yes
				effect_als_cleanup_tactic_own_flags = yes
				effect_als_admiral_cleanup_all_tactic_trait = yes
				effect_als_admiral_clean_all_tactic_flags = yes
				effect_als_fox_tiger_add_trait = yes
				effect_als_refresh_admiral_traits = yes	
				effect_als_refresh_admiral_status = yes
			}
			tooltip = {
				add_trait = als_trait_tactic_fox_tiger_inactive1
			}
			set_leader_flag = als_admiral_own_fox_tiger
			set_leader_flag = als_admiral_has_tactic_traits
			remove_leader_flag = als_admiral_has_strategy_traits
		}
		remove_country_flag = att_admiral_change_slot_is_lv1
		remove_country_flag = att_admiral_change_slot_is_lv2
	}
	option = {
		name = als.46.h #hyperliner
		trigger = {
			event_target:att_admiral_changeing = {	
				NOR = {
					has_trait = als_trait_tactic_hyperliner
					has_trait = als_trait_tactic_hyperliner_actived
					has_trait = als_trait_tactic_hyperliner_expert
					has_trait = als_trait_tactic_hyperliner_expert_actived
				}
			}	
		}
		custom_tooltip = als_trait_tactic_hyperliner.tooltip
		event_target:att_admiral_changeing = {
			remove_leader_flag = als_admiral_changing_tactic_traits
			remove_leader_flag = als_admiral_changing_strategic_traits
			hidden_effect = {
				effect_als_crisis_admiral_remove_wrong_traits = yes
				effect_als_cleanup_tactic_own_flags = yes
				effect_als_admiral_cleanup_all_tactic_trait = yes
				effect_als_admiral_clean_all_tactic_flags = yes
				add_trait = als_trait_tactic_hyperliner
				effect_als_refresh_admiral_traits = yes	
				effect_als_refresh_admiral_status = yes
			}
			tooltip = {
				add_trait = als_trait_tactic_hyperliner
			}
			set_leader_flag = als_admiral_own_hyperliner
			set_leader_flag = als_admiral_has_tactic_traits
			remove_leader_flag = als_admiral_has_strategy_traits
		}
		remove_country_flag = att_admiral_change_slot_is_lv1
		remove_country_flag = att_admiral_change_slot_is_lv2
	}
	option = {
		name = als.46.i #immune
		trigger = {
			event_target:att_admiral_changeing = {	
				NOR = {
					has_trait = als_trait_tactic_immune
					has_trait = als_trait_tactic_immune_expert
				}
			}	
		}
		custom_tooltip = als_trait_tactic_immune.tooltip
		event_target:att_admiral_changeing = {
			remove_leader_flag = als_admiral_changing_tactic_traits
			remove_leader_flag = als_admiral_changing_strategic_traits
			hidden_effect = {
				effect_als_crisis_admiral_remove_wrong_traits = yes
				effect_als_cleanup_tactic_own_flags = yes
				effect_als_admiral_cleanup_all_tactic_trait = yes
				effect_als_admiral_clean_all_tactic_flags = yes
				add_trait = als_trait_tactic_immune
				effect_als_refresh_admiral_traits = yes	
				effect_als_refresh_admiral_status = yes
			}
			tooltip = {
				add_trait = als_trait_tactic_immune
			}
			set_leader_flag = als_admiral_own_immune
			set_leader_flag = als_admiral_has_tactic_traits
			remove_leader_flag = als_admiral_has_strategy_traits
		}
		remove_country_flag = att_admiral_change_slot_is_lv1
		remove_country_flag = att_admiral_change_slot_is_lv2
	}
	option = {
		name = als.46.j #nextpage
		hidden_effect = {
			country_event = { id = als.47 }
		}
	}
	option = {
		name = als.44.j #nevermind
		hidden_effect = {
			country_event = { id = als.43 }
		}
	}
}
###Page 2###
country_event = {
	id = als.47
	title = als.46.name
	desc = als.46.desc
	picture = GFX_evt_federation_fleet
	is_triggered_only = yes
	
	trigger = {
		exists = event_target:att_admiral_changeing
		any_owned_leader = {
			leader_class = admiral
			has_leader_flag = att_admiral
			has_leader_flag = att_admiral_change_slot
		}
	}

	option = {
		name = als.47.a #jammer
		trigger = {
			OR = {
				event_target:att_admiral_changeing = {	
					NOR = {
						has_trait = als_trait_tactic_jammer
						has_trait = als_trait_tactic_jammer_expert
					}
					species = {
						OR = {
							has_trait = trait_machine_unit
							has_trait = trait_mechanical
						}
					}
				}	
				root = {
					has_authority = auth_machine_intelligence
					has_authority = auth_ancient_machine_intelligence
				}
			}
		}
		custom_tooltip = als_trait_tactic_jammer.tooltip
		event_target:att_admiral_changeing = {		
			remove_leader_flag = als_admiral_changing_tactic_traits
			remove_leader_flag = als_admiral_changing_strategic_traits
			hidden_effect = {
				effect_als_crisis_admiral_remove_wrong_traits = yes
				effect_als_cleanup_tactic_own_flags = yes
				effect_als_admiral_cleanup_all_tactic_trait = yes
				effect_als_admiral_clean_all_tactic_flags = yes
				add_trait = als_trait_tactic_jammer
				effect_als_refresh_admiral_traits = yes	
				effect_als_refresh_admiral_status = yes
			}
			tooltip = {
				add_trait = als_trait_tactic_jammer
			}
			set_leader_flag = als_admiral_own_jammer
			set_leader_flag = als_admiral_has_tactic_traits
			remove_leader_flag = als_admiral_has_strategy_traits
		}
		remove_country_flag = att_admiral_change_slot_is_lv1
		remove_country_flag = att_admiral_change_slot_is_lv2
	}
	option = {
		name = als.47.b #jumper
		trigger = {
			event_target:att_admiral_changeing = {	
				NOR = {
					has_trait = als_trait_tactic_jumper
					has_trait = als_trait_tactic_jumper_expert
				}
			}	
			root = {
				OR = {
					has_technology = tech_jump_drive_1
					has_technology = tech_psi_jump_drive_1
				}
			}
		}
		custom_tooltip = als_trait_tactic_jumper.tooltip
		event_target:att_admiral_changeing = {		
			remove_leader_flag = als_admiral_changing_tactic_traits
			remove_leader_flag = als_admiral_changing_strategic_traits
			hidden_effect = {
				effect_als_crisis_admiral_remove_wrong_traits = yes
				effect_als_cleanup_tactic_own_flags = yes
				effect_als_admiral_cleanup_all_tactic_trait = yes
				effect_als_admiral_clean_all_tactic_flags = yes
				add_trait = als_trait_tactic_jumper
				effect_als_refresh_admiral_traits = yes	
				effect_als_refresh_admiral_status = yes
			}
			tooltip = {
				add_trait = als_trait_tactic_jumper
			}
			set_leader_flag = als_admiral_own_jumper
			set_leader_flag = als_admiral_has_tactic_traits
			remove_leader_flag = als_admiral_has_strategy_traits
		}
		remove_country_flag = att_admiral_change_slot_is_lv1
		remove_country_flag = att_admiral_change_slot_is_lv2
	}
	option = {
		name = als.47.c #ranger
		trigger = {
			event_target:att_admiral_changeing = {	
				NOR = {
					has_trait = als_trait_tactic_long_range
					has_trait = als_trait_tactic_long_range_actived
					has_trait = als_trait_tactic_long_range_expert
					has_trait = als_trait_tactic_long_range_expert_actived
				}
			}	
		}
		custom_tooltip = als_trait_tactic_long_range.tooltip
		event_target:att_admiral_changeing = {		
			remove_leader_flag = als_admiral_changing_tactic_traits
			remove_leader_flag = als_admiral_changing_strategic_traits
			hidden_effect = {
				effect_als_crisis_admiral_remove_wrong_traits = yes
				effect_als_cleanup_tactic_own_flags = yes
				effect_als_admiral_cleanup_all_tactic_trait = yes
				effect_als_admiral_clean_all_tactic_flags = yes
				add_trait = als_trait_tactic_long_range
				effect_als_refresh_admiral_traits = yes	
				effect_als_refresh_admiral_status = yes
			}
			tooltip = {
				add_trait = als_trait_tactic_long_range
			}
			set_leader_flag = als_admiral_own_long_range
			set_leader_flag = als_admiral_has_tactic_traits
			remove_leader_flag = als_admiral_has_strategy_traits
		}
		remove_country_flag = att_admiral_change_slot_is_lv1
		remove_country_flag = att_admiral_change_slot_is_lv2
	}
	option = {
		name = als.47.d #lurker
		trigger = {
			event_target:att_admiral_changeing = {	
				NOR = {
					has_trait = als_trait_tactic_lurker
					has_trait = als_trait_tactic_lurker_actived
					has_trait = als_trait_tactic_lurker_expert
					has_trait = als_trait_tactic_lurker_expert_actived
				}
			}	
		}
		custom_tooltip = als_trait_tactic_lurker.tooltip
		event_target:att_admiral_changeing = {		
			remove_leader_flag = als_admiral_changing_tactic_traits
			remove_leader_flag = als_admiral_changing_strategic_traits
			hidden_effect = {
				effect_als_crisis_admiral_remove_wrong_traits = yes
				effect_als_cleanup_tactic_own_flags = yes
				effect_als_admiral_cleanup_all_tactic_trait = yes
				effect_als_admiral_clean_all_tactic_flags = yes
				add_trait = als_trait_tactic_lurker
				effect_als_refresh_admiral_traits = yes	
				effect_als_refresh_admiral_status = yes
			}
			tooltip = {
				add_trait = als_trait_tactic_lurker
			}
			set_leader_flag = als_admiral_own_lurker
			set_leader_flag = als_admiral_has_tactic_traits
			remove_leader_flag = als_admiral_has_strategy_traits
		}
		remove_country_flag = att_admiral_change_slot_is_lv1
		remove_country_flag = att_admiral_change_slot_is_lv2
	}
	option = {
		name = als.47.e #self sacrifice
		trigger = {
			event_target:att_admiral_changeing = {	
				NOR = {
					has_trait = als_trait_tactic_self_sacrifice
					has_trait = als_trait_tactic_self_sacrifice_expert
				}
			}
			OR = {
				has_ethic = ethic_fanatic_militarist
				has_ethic = ethic_militarist
				has_ethic = ethic_gestalt_consciousness
				has_tradition = tr_supremacy_finish
			}
		}
		custom_tooltip = als_trait_tactic_self_sacrifice.tooltip
		event_target:att_admiral_changeing = {		
			remove_leader_flag = als_admiral_changing_tactic_traits
			remove_leader_flag = als_admiral_changing_strategic_traits
			hidden_effect = {
				effect_als_crisis_admiral_remove_wrong_traits = yes
				effect_als_cleanup_tactic_own_flags = yes
				effect_als_admiral_cleanup_all_tactic_trait = yes
				effect_als_admiral_clean_all_tactic_flags = yes
				add_trait = als_trait_tactic_self_sacrifice
				effect_als_refresh_admiral_traits = yes	
				effect_als_refresh_admiral_status = yes
			}
			tooltip = {
				add_trait = als_trait_tactic_self_sacrifice
			}
			set_leader_flag = als_admiral_own_self_sacrifice
			set_leader_flag = als_admiral_has_tactic_traits
			remove_leader_flag = als_admiral_has_strategy_traits
		}
		remove_country_flag = att_admiral_change_slot_is_lv1
		remove_country_flag = att_admiral_change_slot_is_lv2
	}
	option = {
		name = als.47.f #snowball
		trigger = {
			event_target:att_admiral_changeing = {	
				NOR = {
					has_trait = als_trait_tactic_snowball
					has_trait = als_trait_tactic_snowball1
					has_trait = als_trait_tactic_snowball2
					has_trait = als_trait_tactic_snowball3
					has_trait = als_trait_tactic_snowball4
					has_trait = als_trait_tactic_snowball5
					has_trait = als_trait_tactic_snowball6
					has_trait = als_trait_tactic_snowball_expert
					has_trait = als_trait_tactic_snowball1_expert
					has_trait = als_trait_tactic_snowball2_expert
					has_trait = als_trait_tactic_snowball3_expert
					has_trait = als_trait_tactic_snowball4_expert
					has_trait = als_trait_tactic_snowball5_expert
					has_trait = als_trait_tactic_snowball6_expert
				}
			}	
		}
		custom_tooltip = als_trait_tactic_snowball.tooltip
		event_target:att_admiral_changeing = {		
			remove_leader_flag = als_admiral_changing_tactic_traits
			remove_leader_flag = als_admiral_changing_strategic_traits
			hidden_effect = {
				effect_als_crisis_admiral_remove_wrong_traits = yes
				effect_als_cleanup_tactic_own_flags = yes
				effect_als_admiral_cleanup_all_tactic_trait = yes
				effect_als_admiral_clean_all_tactic_flags = yes
				add_trait = als_trait_tactic_snowball
				effect_als_refresh_admiral_traits = yes	
				effect_als_refresh_admiral_status = yes
			}
			tooltip = {
				add_trait = als_trait_tactic_snowball
			}
			set_leader_flag = als_admiral_own_snowball
			set_leader_flag = als_admiral_has_tactic_traits
			remove_leader_flag = als_admiral_has_strategy_traits
		}
		remove_country_flag = att_admiral_change_slot_is_lv1
		remove_country_flag = att_admiral_change_slot_is_lv2
	}
	option = {
		name = als.47.g #surprise attack
		trigger = {
			event_target:att_admiral_changeing = {	
				NOR = {
					has_trait = als_trait_tactic_surprise_attack
					has_trait = als_trait_tactic_surprise_attack_expert
				}
			}	
		}
		custom_tooltip = als_trait_tactic_surprise_attack.tooltip
		event_target:att_admiral_changeing = {		
			remove_leader_flag = als_admiral_changing_tactic_traits
			remove_leader_flag = als_admiral_changing_strategic_traits
			hidden_effect = {
				effect_als_crisis_admiral_remove_wrong_traits = yes
				effect_als_cleanup_tactic_own_flags = yes
				effect_als_admiral_cleanup_all_tactic_trait = yes
				effect_als_admiral_clean_all_tactic_flags = yes
				add_trait = als_trait_tactic_surprise_attack
				effect_als_refresh_admiral_traits = yes	
				effect_als_refresh_admiral_status = yes
			}
			tooltip = {
				add_trait = als_trait_tactic_surprise_attack
			}
			set_leader_flag = als_admiral_own_surprise_attack
			set_leader_flag = als_admiral_has_tactic_traits
			remove_leader_flag = als_admiral_has_strategy_traits
		}
		remove_country_flag = att_admiral_change_slot_is_lv1
		remove_country_flag = att_admiral_change_slot_is_lv2
	}
	option = {
		name = als.47.h #unpredictable
		trigger = {
			event_target:att_admiral_changeing = {	
				NOR = {
					has_trait = als_trait_tactic_unpredictable
					has_trait = als_trait_tactic_unpredictable1
					has_trait = als_trait_tactic_unpredictable2
					has_trait = als_trait_tactic_unpredictable3
					has_trait = als_trait_tactic_unpredictable4
					has_trait = als_trait_tactic_unpredictable5
					has_trait = als_trait_tactic_unpredictable6
					has_trait = als_trait_tactic_unpredictable7
					has_trait = als_trait_tactic_unpredictable_expert
					has_trait = als_trait_tactic_unpredictable1_expert
					has_trait = als_trait_tactic_unpredictable2_expert
					has_trait = als_trait_tactic_unpredictable3_expert
					has_trait = als_trait_tactic_unpredictable4_expert
					has_trait = als_trait_tactic_unpredictable5_expert
					has_trait = als_trait_tactic_unpredictable6_expert
					has_trait = als_trait_tactic_unpredictable7_expert
				}
			}	
		}
		custom_tooltip = als_trait_tactic_unpredictable.tooltip
		event_target:att_admiral_changeing = {		
			remove_leader_flag = als_admiral_changing_tactic_traits
			remove_leader_flag = als_admiral_changing_strategic_traits
			hidden_effect = {
				effect_als_crisis_admiral_remove_wrong_traits = yes
				effect_als_cleanup_tactic_own_flags = yes
				effect_als_admiral_cleanup_all_tactic_trait = yes
				effect_als_admiral_clean_all_tactic_flags = yes
				add_trait = als_trait_tactic_unpredictable
				effect_als_refresh_admiral_traits = yes	
				effect_als_refresh_admiral_status = yes
			}
			tooltip = {
				add_trait = als_trait_tactic_unpredictable
			}
			set_leader_flag = als_admiral_own_unpredictable
			set_leader_flag = als_admiral_has_tactic_traits
			remove_leader_flag = als_admiral_has_strategy_traits
		}
		remove_country_flag = att_admiral_change_slot_is_lv1
		remove_country_flag = att_admiral_change_slot_is_lv2
	}
	option = {
		name = als.47.i #untouchable
		trigger = {
			OR = {
				event_target:att_admiral_changeing = {	
					NOR = {
						has_trait = als_trait_tactic_untoachable
						has_trait = als_trait_tactic_untoachable_expert
					}
					species = {
						OR = {
							has_trait = trait_latent_psionic
							has_trait = trait_psionic
						}
					}
				}	
				root = {
					has_authority = auth_hive_mind
				}
			}
		}
		custom_tooltip = als_trait_tactic_untoachable.tooltip
		event_target:att_admiral_changeing = {		
			remove_leader_flag = als_admiral_changing_tactic_traits
			remove_leader_flag = als_admiral_changing_strategic_traits
			hidden_effect = {
				effect_als_crisis_admiral_remove_wrong_traits = yes
				effect_als_cleanup_tactic_own_flags = yes
				effect_als_admiral_cleanup_all_tactic_trait = yes
				effect_als_admiral_clean_all_tactic_flags = yes
				add_trait = als_trait_tactic_untoachable
				effect_als_refresh_admiral_traits = yes	
				effect_als_refresh_admiral_status = yes
			}
			tooltip = {
				add_trait = als_trait_tactic_untoachable
			}
			set_leader_flag = als_admiral_own_untoachable
			set_leader_flag = als_admiral_has_tactic_traits
			remove_leader_flag = als_admiral_has_strategy_traits
		}
		remove_country_flag = att_admiral_change_slot_is_lv1
		remove_country_flag = att_admiral_change_slot_is_lv2
	}
	option = {
		name = als.47.j #back
		hidden_effect = {
			country_event = { id = als.46 }
		}
	}
	option = {
		name = als.44.j #nevermind
		hidden_effect = {
			country_event = { id = als.43 }
		}
	}
}

#TAKEN FROM LEADER_EVENTS_1###
country_event = {
	id = als.61
	hide_window = yes
	is_triggered_only = yes

	immediate = {
		from = {
			if = {
				limit = {
					leader_class = admiral
					num_traits < 12
					NOT = { has_leader_flag = has_gained_level_trait }
				}
				random_list = {
					90 = { }
					10 = {
						modifier = {
							factor = 1.5
							has_level = 3
						}
						modifier = {
							factor = 2.5
							has_level = 4
						}						
						modifier = {
							factor = 5
							has_level > 4
						}
						add_random_leader_trait = yes
						set_leader_flag = has_gained_level_trait
					}
				}
			}
		}
	}
}

###tactic camper pre requirement
fleet_event = {
	id = als.65
	hide_window = yes
	trigger = {
		exists = leader
		is_in_combat = no
		leader = {
			leader_class = admiral
			OR = {
				has_trait = als_trait_tactic_camper
				has_trait = als_trait_tactic_camper_expert
			}
			NOT = {
				has_leader_flag = als_admiral_tactic_camper_charging
			}
		}
	}

	mean_time_to_happen = {
		days = 60
	}

	immediate = {
		leader = {
			if = {
				limit = {
					has_trait = als_trait_tactic_camper
				}
				remove_trait = als_trait_tactic_camper
				add_trait = als_trait_tactic_camper_ready
			}
			if = {
				limit = {
					has_trait = als_trait_tactic_camper_expert
				}
				remove_trait = als_trait_tactic_camper_expert
				add_trait = als_trait_tactic_camper_expert_ready
			}
		}
	}
}

##move to other system&go ftl nullifed camper effect
fleet_event = {
	id = als.66
	hide_window = yes
	is_triggered_only = yes
	trigger = {
		is_scope_type = fleet
		is_scope_valid = yes
		exists = leader
		leader = {
			leader_class = admiral
			OR = {
				has_trait = als_trait_tactic_camper_ready
				has_trait = als_trait_tactic_camper_expert_ready
			}
			NOR = {
				has_leader_flag = als_admiral_changing_strategic_traits
				has_leader_flag = als_admiral_changing_tactic_traits
			}
		}
	}
	immediate = {
		leader = {
			switch = {
				trigger = has_trait
				als_trait_tactic_camper_ready = {
					remove_trait = als_trait_tactic_camper_ready
					add_trait = als_trait_tactic_camper
				}
				als_trait_tactic_camper_expert_ready = {
					remove_trait = als_trait_tactic_camper_expert_ready
					add_trait = als_trait_tactic_camper_expert
				}
			}
			set_timed_leader_flag = {
				flag = als_admiral_tactic_camper_charging
				days = 59
			}
		}
		fleet_event = { id = als.65 days = 60 }
	}
}

###Tactic gateway
#For on_entering_battle
country_event = {
	id = als.100
	hide_window = yes
	is_triggered_only = yes
	trigger = {
		exists = fromfrom
		fromfrom = {
			is_scope_type = fleet
			is_scope_valid = yes
			exists = leader
			leader = {
				leader_class = admiral
				has_leader_flag = als_admiral_has_tactic_traits
				NOR = {
					has_leader_flag = als_admiral_changing_strategic_traits
					has_leader_flag = als_admiral_changing_tactic_traits
				}
			}
		}
	}

	immediate = {
		if = {
			limit = {
				exists = fromfromfrom
				fromfromfrom = {
					is_scope_type = fleet
				}
			}
			fromfromfrom = {
				save_event_target_as = als_target_fleet_scope
			}
		}
		fromfrom = {
			save_event_target_as = als_fleet_scope
			if = {
				limit = {
					exists = leader
					leader = {
						leader_class = admiral
						has_leader_flag = als_admiral_has_tactic_traits
					}
				}
				effect_als_close_combat_start = yes
				effect_als_bottled_up_start = yes
				effect_als_camper_start = yes
				effect_als_copycat_start = yes
				effect_als_first_strike_start = yes
				effect_als_foresight_start = yes
				leader = {
					switch = {
						trigger = has_leader_flag
						als_admiral_has_tactic_foresight = {
							event_target:als_target_fleet_scope = {
								if = {
									limit = {
										OR = {
											NOT = { exists = leader }
											leader = {
												NOT = {
													has_leader_flag = als_admiral_has_tactic_hyperliner_effect
												}
											}
										}
									}
									add_modifier = {
										modifier = als_tactic_foresight_modifiers_1
										days = 30
									}
								}
							}
						}
						als_admiral_has_tactic_foresight_expert = {
							event_target:als_target_fleet_scope = {
								if = {
									limit = {
										OR = {
											NOT = { exists = leader }
											leader = {
												NOT = {
													has_leader_flag = als_admiral_has_tactic_hyperliner_effect
												}
											}
										}
									}
									add_modifier = {
										modifier = als_tactic_foresight_modifiers_2
										days = 30
									}
								}
							}
						}
					}
				}
				effect_als_long_range_start = yes
				effect_als_lurker_start = yes
				effect_als_snowball_start = yes
				effect_als_surprise_attack_start = yes
				leader = {
					if = {
						limit = {
							OR = {
								has_trait = als_trait_tactic_surprise_attack
								has_trait = als_trait_tactic_surprise_attack_expert
							}
						}
						set_leader_flag = att_admiral_battle
						event_target:als_fleet_scope = {
							fleet_event = { id = als.32 }
						}
					}
				}
				effect_als_unpredictable_start = yes
				leader = {
					switch = {
						trigger = has_trait
						als_trait_tactic_untoachable = {
							event_target:als_target_fleet_scope = {
								if = {
									limit = {
										OR = {
											NOT = { exists = leader }
											leader = {
												NOT = {
													has_leader_flag = als_admiral_has_tactic_hyperliner_effect
												}
											}
										}
									}
									add_modifier = {
										modifier = als_tactic_untouchable_modifiers_1
										days = 30
									}
								}
							}
						}
						als_trait_tactic_untoachable_expert = {
							event_target:als_target_fleet_scope = {
								if = {
									limit = {
										OR = {
											NOT = { exists = leader }
											leader = {
												NOT = {
													has_leader_flag = als_admiral_has_tactic_hyperliner_effect
												}
											}
										}
									}
									add_modifier = {
										modifier = als_tactic_untouchable_modifiers_2
										days = 30
									}
								}
							}
						}
					}
				}
				leader = {
					switch = {
						trigger = has_trait
						als_trait_tactic_jammer = {
							event_target:als_target_fleet_scope = {
								if = {
									limit = {
										OR = {
											NOT = { exists = leader }
											leader = {
												NOT = {
													has_leader_flag = als_admiral_has_tactic_hyperliner_effect
												}
											}
										}
									}
									add_modifier = {
										modifier = als_tactic_jammer_modifiers_1
										days = 60
									}
								}
							}
						}
						als_trait_tactic_jammer_expert = {
							event_target:als_target_fleet_scope = {
								if = {
									limit = {
										OR = {
											NOT = { exists = leader }
											leader = {
												NOT = {
													has_leader_flag = als_admiral_has_tactic_hyperliner_effect
												}
											}
										}
									}
									add_modifier = {
										modifier = als_tactic_jammer_modifiers_2
										days = 60
									}
								}
							}
						}
					}
				}
				#return tactic put it to last for it takes effect
				effect_als_immune_start = yes
				leader = {
					effect_als_refresh_admiral_traits = yes	
					effect_als_refresh_admiral_status = yes
				}
				
				if = {
					limit = {
						leader = {
							OR = {
								has_trait = als_trait_tactic_immune
								has_trait = als_trait_tactic_immune_expert
							}
						}
						event_target:als_target_fleet_scope = {
							exists = leader
						}
					}
					event_target:als_target_fleet_scope = {
						leader = {
							switch = {
								trigger = has_trait
								als_trait_tactic_foresight = {
									event_target:als_fleet_scope = {
										leader = {
											switch = {
												trigger = has_trait
												als_trait_tactic_immune = {
													event_target:als_target_fleet_scope = {
														add_modifier = {
															modifier = als_tactic_foresight_modifiers_1
															days = 60
														}
													}
												}
												als_trait_tactic_immune_expert = {
													event_target:als_target_fleet_scope = {
														add_modifier = {
															modifier = als_tactic_foresight_modifiers_1
															days = 120
														}
													}
												}
											}
										}
									}
								}
								als_trait_tactic_foresight_actived = {
									event_target:als_fleet_scope = {
										leader = {
											switch = {
												trigger = has_trait
												als_trait_tactic_immune = {
													event_target:als_target_fleet_scope = {
														add_modifier = {
															modifier = als_tactic_foresight_modifiers_2
															days = 60
														}
													}
												}
												als_trait_tactic_immune_expert = {
													event_target:als_target_fleet_scope = {
														add_modifier = {
															modifier = als_tactic_foresight_modifiers_2
															days = 120
														}
													}
												}
											}
										}
									}
								}
								als_trait_tactic_foresight_expert = {
									event_target:als_fleet_scope = {
										leader = {
											switch = {
												trigger = has_trait
												als_trait_tactic_immune = {
													event_target:als_target_fleet_scope = {
														add_modifier = {
															modifier = als_tactic_foresight_modifiers_1
															days = 60
														}
													}
												}
												als_trait_tactic_immune_expert = {
													event_target:als_target_fleet_scope = {
														add_modifier = {
															modifier = als_tactic_foresight_modifiers_1
															days = 120
														}
													}
												}
											}
										}
									}
								}
								als_trait_tactic_foresight_expert_actived = {
									event_target:als_fleet_scope = {
										leader = {
											switch = {
												trigger = has_trait
												als_trait_tactic_immune = {
													event_target:als_target_fleet_scope = {
														add_modifier = {
															modifier = als_tactic_foresight_modifiers_2
															days = 60
														}
													}
												}
												als_trait_tactic_immune_expert = {
													event_target:als_target_fleet_scope = {
														add_modifier = {
															modifier = als_tactic_foresight_modifiers_2
															days = 120
														}
													}
												}
											}
										}
									}
								}
								als_trait_tactic_jammer = {
									event_target:als_fleet_scope = {
										leader = {
											switch = {
												trigger = has_trait
												als_trait_tactic_immune = {
													event_target:als_target_fleet_scope = {
														add_modifier = {
															modifier = als_tactic_jammer_modifiers_1
															days = 60
														}
													}
												}
												als_trait_tactic_immune_expert = {
													event_target:als_target_fleet_scope = {
														add_modifier = {
															modifier = als_tactic_jammer_modifiers_1
															days = 120
														}
													}
												}
											}
										}
									}
								}
								als_trait_tactic_jammer_expert = {
									event_target:als_fleet_scope = {
										leader = {
											switch = {
												trigger = has_trait
												als_trait_tactic_immune = {
													event_target:als_target_fleet_scope = {
														add_modifier = {
															modifier = als_tactic_jammer_modifiers_2
															days = 60
														}
													}
												}
												als_trait_tactic_immune_expert = {
													event_target:als_target_fleet_scope = {
														add_modifier = {
															modifier = als_tactic_jammer_modifiers_2
															days = 120
														}
													}
												}
											}
										}
									}
								}
								als_trait_tactic_surprise_attack = {
									event_target:als_fleet_scope = {
										leader = {
											switch = {
												trigger = has_trait
												als_trait_tactic_immune = {
													event_target:als_target_fleet_scope = {
														add_modifier = {
															modifier = als_tactic_surprise_attack_modifiers_1
															days = 60
														}
													}
												}
												als_trait_tactic_immune_expert = {
													event_target:als_target_fleet_scope = {
														add_modifier = {
															modifier = als_tactic_surprise_attack_modifiers_1
															days = 120
														}
													}
												}
											}
										}
									}
								}
								als_trait_tactic_surprise_attack_expert = {
									event_target:als_fleet_scope = {
										leader = {
											switch = {
												trigger = has_trait
												als_trait_tactic_immune = {
													event_target:als_target_fleet_scope = {
														add_modifier = {
															modifier = als_tactic_surprise_attack_modifiers_2
															days = 60
														}
													}
												}
												als_trait_tactic_immune_expert = {
													event_target:als_target_fleet_scope = {
														add_modifier = {
															modifier = als_tactic_surprise_attack_modifiers_2
															days = 120
														}
													}
												}
											}
										}
									}
								}
								als_trait_tactic_untoachable = {
									event_target:als_fleet_scope = {
										leader = {
											switch = {
												trigger = has_trait
												als_trait_tactic_immune = {
													event_target:als_target_fleet_scope = {
														add_modifier = {
															modifier = als_tactic_untouchable_modifiers_1
															days = 60
														}
													}
												}
												als_trait_tactic_immune_expert = {
													event_target:als_target_fleet_scope = {
														add_modifier = {
															modifier = als_tactic_untouchable_modifiers_1
															days = 120
														}
													}
												}
											}
										}
									}
								}
								als_trait_tactic_untoachable_expert = {
									event_target:als_fleet_scope = {
										leader = {
											switch = {
												trigger = has_trait
												als_trait_tactic_immune = {
													event_target:als_target_fleet_scope = {
														add_modifier = {
															modifier = als_tactic_untouchable_modifiers_2
															days = 60
														}
													}
												}
												als_trait_tactic_immune_expert = {
													event_target:als_target_fleet_scope = {
														add_modifier = {
															modifier = als_tactic_untouchable_modifiers_2
															days = 120
														}
													}
												}
											}
										}
									}
								}
							}
						}
					}				
				}
			}
		}
		#fromfromfrom
	}
}


###Tactic gateway
#For on_fleet_combat_joined_attacker
fleet_event = {
	id = als.150
	hide_window = yes
	is_triggered_only = yes
	trigger = {
		is_scope_type = fleet
		is_scope_valid = yes
		exists = leader
		leader = {
			leader_class = admiral
			has_leader_flag = als_admiral_has_tactic_traits
			NOR = {
				has_leader_flag = als_admiral_changing_strategic_traits
				has_leader_flag = als_admiral_changing_tactic_traits
			}
		}
	}

	immediate = {
		if = {
			limit = {
				exists = from
				from = {
					is_scope_type = fleet
				}
			}
			from = {
				save_event_target_as = als_target_fleet_scope
			}
		}
		if = {
			limit = {
				exists = fromfrom
				fromfrom = {
					is_scope_type = fleet
				}
			}
			fromfrom = {
				save_event_target_as = als_target_fleet_scope_additional
			}
		}
		if = {
			limit = {
				exists = fromfromfrom
				fromfromfrom = {
					is_scope_type = fleet
				}
			}
			fromfromfrom = {
				save_event_target_as = als_target_fleet_scope_additional_additional
			}
		}
		save_event_target_as = als_fleet_scope
		if = {
			limit = {
				exists = leader
				leader = {
					leader_class = admiral
					has_leader_flag = als_admiral_has_tactic_traits
				}
			}
			effect_als_close_combat_start = yes
			effect_als_bottled_up_start = yes
			effect_als_camper_start = yes
			effect_als_copycat_start = yes
			effect_als_first_strike_start = yes
			effect_als_foresight_start = yes
			leader = {
				switch = {
					trigger = has_leader_flag
					als_admiral_has_tactic_foresight = {
						event_target:als_target_fleet_scope = {
							if = {
								limit = {
									OR = {
										NOT = { exists = leader }
										leader = {
											NOT = {
												has_leader_flag = als_admiral_has_tactic_hyperliner_effect
											}
										}
									}
								}
								add_modifier = {
									modifier = als_tactic_foresight_modifiers_1
									days = 30
								}
							}
						}
						if = {
							limit = {
								exists = event_target:als_target_fleet_scope_additional
							}
							event_target:als_target_fleet_scope_additional = {
								if = {
									limit = {
										OR = {
											NOT = { exists = leader }
											leader = {
												NOT = {
													has_leader_flag = als_admiral_has_tactic_hyperliner_effect
												}
											}
										}
									}
									add_modifier = {
										modifier = als_tactic_foresight_modifiers_1
										days = 30
									}
								}
							}
						}
						if = {
							limit = {
								exists = event_target:als_target_fleet_scope_additional_additional
							}
							event_target:als_target_fleet_scope_additional_additional = {
								if = {
									limit = {
										OR = {
											NOT = { exists = leader }
											leader = {
												NOT = {
													has_leader_flag = als_admiral_has_tactic_hyperliner_effect
												}
											}
										}
									}
									add_modifier = {
										modifier = als_tactic_foresight_modifiers_1
										days = 30
									}
								}
							}
						}
					}
					als_admiral_has_tactic_foresight_expert = {
						event_target:als_target_fleet_scope = {
							if = {
								limit = {
									OR = {
										NOT = { exists = leader }
										leader = {
											NOT = {
												has_leader_flag = als_admiral_has_tactic_hyperliner_effect
											}
										}
									}
								}
								add_modifier = {
									modifier = als_tactic_foresight_modifiers_2
									days = 30
								}
							}
						}
						if = {
							limit = {
								exists = event_target:als_target_fleet_scope_additional
							}
							event_target:als_target_fleet_scope_additional = {
								if = {
									limit = {
										OR = {
											NOT = { exists = leader }
											leader = {
												NOT = {
													has_leader_flag = als_admiral_has_tactic_hyperliner_effect
												}
											}
										}
									}
									add_modifier = {
										modifier = als_tactic_foresight_modifiers_2
										days = 30
									}
								}
							}
						}
						if = {
							limit = {
								exists = event_target:als_target_fleet_scope_additional_additional
							}
							event_target:als_target_fleet_scope_additional_additional = {
								if = {
									limit = {
										OR = {
											NOT = { exists = leader }
											leader = {
												NOT = {
													has_leader_flag = als_admiral_has_tactic_hyperliner_effect
												}
											}
										}
									}
									add_modifier = {
										modifier = als_tactic_foresight_modifiers_2
										days = 30
									}
								}
							}
						}
					}
				}
			}
			effect_als_long_range_start = yes
			effect_als_lurker_start = yes
			effect_als_snowball_start = yes
			effect_als_surprise_attack_start = yes
			leader = {
				if = {
					limit = {
						OR = {
							has_trait = als_trait_tactic_surprise_attack
							has_trait = als_trait_tactic_surprise_attack_expert
						}
					}
					set_leader_flag = att_admiral_battle
					event_target:als_fleet_scope = {
						fleet_event = { id = als.32 }
					}
				}
			}
			effect_als_unpredictable_start = yes
			leader = {
				switch = {
					trigger = has_trait
					als_trait_tactic_untoachable = {
						event_target:als_target_fleet_scope = {
							if = {
								limit = {
									OR = {
										NOT = { exists = leader }
										leader = {
											NOT = {
												has_leader_flag = als_admiral_has_tactic_hyperliner_effect
											}
										}
									}
								}
								add_modifier = {
									modifier = als_tactic_untouchable_modifiers_1
									days = 30
								}
							}
						}
						if = {
							limit = {
								exists = event_target:als_target_fleet_scope_additional
							}
							event_target:als_target_fleet_scope_additional = {
								if = {
									limit = {
										OR = {
											NOT = { exists = leader }
											leader = {
												NOT = {
													has_leader_flag = als_admiral_has_tactic_hyperliner_effect
												}
											}
										}
									}
									add_modifier = {
										modifier = als_tactic_untouchable_modifiers_1
										days = 30
									}
								}
							}
						}
						if = {
							limit = {
								exists = event_target:als_target_fleet_scope_additional_additional
							}
							event_target:als_target_fleet_scope_additional_additional = {
								if = {
									limit = {
										OR = {
											NOT = { exists = leader }
											leader = {
												NOT = {
													has_leader_flag = als_admiral_has_tactic_hyperliner_effect
												}
											}
										}
									}
									add_modifier = {
										modifier = als_tactic_untouchable_modifiers_1
										days = 30
									}
								}
							}
						}
					}
					als_trait_tactic_untoachable_expert = {
						event_target:als_target_fleet_scope = {
							if = {
								limit = {
									OR = {
										NOT = { exists = leader }
										leader = {
											NOT = {
												has_leader_flag = als_admiral_has_tactic_hyperliner_effect
											}
										}
									}
								}
								add_modifier = {
									modifier = als_tactic_untouchable_modifiers_2
									days = 30
								}
							}
						}
						if = {
							limit = {
								exists = event_target:als_target_fleet_scope_additional
							}
							event_target:als_target_fleet_scope_additional = {
								if = {
									limit = {
										OR = {
											NOT = { exists = leader }
											leader = {
												NOT = {
													has_leader_flag = als_admiral_has_tactic_hyperliner_effect
												}
											}
										}
									}
									add_modifier = {
										modifier = als_tactic_untouchable_modifiers_2
										days = 30
									}
								}
							}
						}
						if = {
							limit = {
								exists = event_target:als_target_fleet_scope_additional_additional
							}
							event_target:als_target_fleet_scope_additional_additional = {
								if = {
									limit = {
										OR = {
											NOT = { exists = leader }
											leader = {
												NOT = {
													has_leader_flag = als_admiral_has_tactic_hyperliner_effect
												}
											}
										}
									}
									add_modifier = {
										modifier = als_tactic_untouchable_modifiers_2
										days = 30
									}
								}
							}
						}
					}
				}
			}
			leader = {
				switch = {
					trigger = has_trait
					als_trait_tactic_jammer = {
						event_target:als_target_fleet_scope = {
							if = {
								limit = {
									OR = {
										NOT = { exists = leader }
										leader = {
											NOT = {
												has_leader_flag = als_admiral_has_tactic_hyperliner_effect
											}
										}
									}
								}
								add_modifier = {
									modifier = als_tactic_jammer_modifiers_1
									days = 60
								}
							}
						}
						if = {
							limit = {
								exists = event_target:als_target_fleet_scope_additional
							}
							event_target:als_target_fleet_scope_additional = {
								if = {
									limit = {
										OR = {
											NOT = { exists = leader }
											leader = {
												NOT = {
													has_leader_flag = als_admiral_has_tactic_hyperliner_effect
												}
											}
										}
									}
									add_modifier = {
										modifier = als_tactic_jammer_modifiers_1
										days = 60
									}
								}
							}
						}
						if = {
							limit = {
								exists = event_target:als_target_fleet_scope_additional_additional
							}
							event_target:als_target_fleet_scope_additional_additional = {
								if = {
									limit = {
										OR = {
											NOT = { exists = leader }
											leader = {
												NOT = {
													has_leader_flag = als_admiral_has_tactic_hyperliner_effect
												}
											}
										}
									}
									add_modifier = {
										modifier = als_tactic_jammer_modifiers_1
										days = 60
									}
								}
							}
						}
					}
					als_trait_tactic_jammer_expert = {
						event_target:als_target_fleet_scope = {
							if = {
								limit = {
									OR = {
										NOT = { exists = leader }
										leader = {
											NOT = {
												has_leader_flag = als_admiral_has_tactic_hyperliner_effect
											}
										}
									}
								}
								add_modifier = {
									modifier = als_tactic_jammer_modifiers_2
									days = 60
								}
							}
						}
						if = {
							limit = {
								exists = event_target:als_target_fleet_scope_additional
							}
							event_target:als_target_fleet_scope_additional = {
								if = {
									limit = {
										OR = {
											NOT = { exists = leader }
											leader = {
												NOT = {
													has_leader_flag = als_admiral_has_tactic_hyperliner_effect
												}
											}
										}
									}
									add_modifier = {
										modifier = als_tactic_jammer_modifiers_2
										days = 60
									}
								}
							}
						}
						if = {
							limit = {
								exists = event_target:als_target_fleet_scope_additional_additional
							}
							event_target:als_target_fleet_scope_additional_additional = {
								if = {
									limit = {
										OR = {
											NOT = { exists = leader }
											leader = {
												NOT = {
													has_leader_flag = als_admiral_has_tactic_hyperliner_effect
												}
											}
										}
									}
									add_modifier = {
										modifier = als_tactic_jammer_modifiers_2
										days = 60
									}
								}
							}
						}
					}
				}
			}
			#return tactic put it to last for it takes effect
			effect_als_immune_start = yes
			leader = {
				effect_als_refresh_admiral_traits = yes	
				effect_als_refresh_admiral_status = yes
			}
			
			if = {
				limit = {
					leader = {
						OR = {
							has_trait = als_trait_tactic_immune
							has_trait = als_trait_tactic_immune_expert
						}
					}
					event_target:als_target_fleet_scope = {
						exists = leader
					}
				}
				event_target:als_target_fleet_scope = {
					leader = {
						switch = {
							trigger = has_trait
							als_trait_tactic_foresight = {
								event_target:als_fleet_scope = {
									leader = {
										switch = {
											trigger = has_trait
											als_trait_tactic_immune = {
												event_target:als_target_fleet_scope = {
													add_modifier = {
														modifier = als_tactic_foresight_modifiers_1
														days = 60
													}
												}
												if = {
													limit = {
														exists = event_target:als_target_fleet_scope_additional
													}
													event_target:als_target_fleet_scope_additional = {
														add_modifier = {
															modifier = als_tactic_foresight_modifiers_1
															days = 60
														}
													}
												}
												if = {
													limit = {
														exists = event_target:als_target_fleet_scope_additional_additional
													}
													event_target:als_target_fleet_scope_additional_additional = {
														add_modifier = {
															modifier = als_tactic_foresight_modifiers_1
															days = 60
														}
													}
												}
											}
											als_trait_tactic_immune_expert = {
												event_target:als_target_fleet_scope = {
													add_modifier = {
														modifier = als_tactic_foresight_modifiers_1
														days = 120
													}
												}
												if = {
													limit = {
														exists = event_target:als_target_fleet_scope_additional
													}
													event_target:als_target_fleet_scope_additional = {
														add_modifier = {
															modifier = als_tactic_foresight_modifiers_1
															days = 120
														}
													}
												}
												if = {
													limit = {
														exists = event_target:als_target_fleet_scope_additional_additional
													}
													event_target:als_target_fleet_scope_additional_additional = {
														add_modifier = {
															modifier = als_tactic_foresight_modifiers_1
															days = 120
														}
													}
												}
											}
										}
									}
								}
							}
							als_trait_tactic_foresight_actived = {
								event_target:als_fleet_scope = {
									leader = {
										switch = {
											trigger = has_trait
											als_trait_tactic_immune = {
												event_target:als_target_fleet_scope = {
													add_modifier = {
														modifier = als_tactic_foresight_modifiers_2
														days = 60
													}
												}
												if = {
													limit = {
														exists = event_target:als_target_fleet_scope_additional
													}
													event_target:als_target_fleet_scope_additional = {
														add_modifier = {
															modifier = als_tactic_foresight_modifiers_2
															days = 60
														}
													}
												}
												if = {
													limit = {
														exists = event_target:als_target_fleet_scope_additional_additional
													}
													event_target:als_target_fleet_scope_additional_additional = {
														add_modifier = {
															modifier = als_tactic_foresight_modifiers_2
															days = 60
														}
													}
												}
											}
											als_trait_tactic_immune_expert = {
												event_target:als_target_fleet_scope = {
													add_modifier = {
														modifier = als_tactic_foresight_modifiers_2
														days = 120
													}
												}
												if = {
													limit = {
														exists = event_target:als_target_fleet_scope_additional
													}
													event_target:als_target_fleet_scope_additional = {
														add_modifier = {
															modifier = als_tactic_foresight_modifiers_2
															days = 120
														}
													}
												}
												if = {
													limit = {
														exists = event_target:als_target_fleet_scope_additional_additional
													}
													event_target:als_target_fleet_scope_additional_additional = {
														add_modifier = {
															modifier = als_tactic_foresight_modifiers_2
															days = 120
														}
													}
												}
											}
										}
									}
								}
							}
							als_trait_tactic_foresight_expert = {
								event_target:als_fleet_scope = {
									leader = {
										switch = {
											trigger = has_trait
											als_trait_tactic_immune = {
												event_target:als_target_fleet_scope = {
													add_modifier = {
														modifier = als_tactic_foresight_modifiers_1
														days = 60
													}
												}
												if = {
													limit = {
														exists = event_target:als_target_fleet_scope_additional
													}
													event_target:als_target_fleet_scope_additional = {
														add_modifier = {
															modifier = als_tactic_foresight_modifiers_1
															days = 60
														}
													}
												}
												if = {
													limit = {
														exists = event_target:als_target_fleet_scope_additional_additional
													}
													event_target:als_target_fleet_scope_additional_additional = {
														add_modifier = {
															modifier = als_tactic_foresight_modifiers_1
															days = 60
														}
													}
												}
											}
											als_trait_tactic_immune_expert = {
												event_target:als_target_fleet_scope = {
													add_modifier = {
														modifier = als_tactic_foresight_modifiers_1
														days = 120
													}
												}
												if = {
													limit = {
														exists = event_target:als_target_fleet_scope_additional
													}
													event_target:als_target_fleet_scope_additional = {
														add_modifier = {
															modifier = als_tactic_foresight_modifiers_1
															days = 120
														}
													}
												}
												if = {
													limit = {
														exists = event_target:als_target_fleet_scope_additional_additional
													}
													event_target:als_target_fleet_scope_additional_additional = {
														add_modifier = {
															modifier = als_tactic_foresight_modifiers_1
															days = 120
														}
													}
												}
											}
										}
									}
								}
							}
							als_trait_tactic_foresight_expert_actived = {
								event_target:als_fleet_scope = {
									leader = {
										switch = {
											trigger = has_trait
											als_trait_tactic_immune = {
												event_target:als_target_fleet_scope = {
													add_modifier = {
														modifier = als_tactic_foresight_modifiers_2
														days = 60
													}
												}
												if = {
													limit = {
														exists = event_target:als_target_fleet_scope_additional
													}
													event_target:als_target_fleet_scope_additional = {
														add_modifier = {
															modifier = als_tactic_foresight_modifiers_2
															days = 60
														}
													}
												}
												if = {
													limit = {
														exists = event_target:als_target_fleet_scope_additional_additional
													}
													event_target:als_target_fleet_scope_additional_additional = {
														add_modifier = {
															modifier = als_tactic_foresight_modifiers_2
															days = 60
														}
													}
												}
											}
											als_trait_tactic_immune_expert = {
												event_target:als_target_fleet_scope = {
													add_modifier = {
														modifier = als_tactic_foresight_modifiers_2
														days = 120
													}
												}
												if = {
													limit = {
														exists = event_target:als_target_fleet_scope_additional
													}
													event_target:als_target_fleet_scope_additional = {
														add_modifier = {
															modifier = als_tactic_foresight_modifiers_2
															days = 120
														}
													}
												}
												if = {
													limit = {
														exists = event_target:als_target_fleet_scope_additional_additional
													}
													event_target:als_target_fleet_scope_additional_additional = {
														add_modifier = {
															modifier = als_tactic_foresight_modifiers_2
															days = 120
														}
													}
												}
											}
										}
									}
								}
							}
							als_trait_tactic_jammer = {
								event_target:als_fleet_scope = {
									leader = {
										switch = {
											trigger = has_trait
											als_trait_tactic_immune = {
												event_target:als_target_fleet_scope = {
													add_modifier = {
														modifier = als_tactic_jammer_modifiers_1
														days = 60
													}
												}
												if = {
													limit = {
														exists = event_target:als_target_fleet_scope_additional
													}
													event_target:als_target_fleet_scope_additional = {
														add_modifier = {
															modifier = als_tactic_jammer_modifiers_1
															days = 60
														}
													}
												}
												if = {
													limit = {
														exists = event_target:als_target_fleet_scope_additional_additional
													}
													event_target:als_target_fleet_scope_additional_additional = {
														add_modifier = {
															modifier = als_tactic_jammer_modifiers_1
															days = 60
														}
													}
												}
											}
											als_trait_tactic_immune_expert = {
												event_target:als_target_fleet_scope = {
													add_modifier = {
														modifier = als_tactic_jammer_modifiers_1
														days = 120
													}
												}
												if = {
													limit = {
														exists = event_target:als_target_fleet_scope_additional
													}
													event_target:als_target_fleet_scope_additional = {
														add_modifier = {
															modifier = als_tactic_jammer_modifiers_1
															days = 120
														}
													}
												}
												if = {
													limit = {
														exists = event_target:als_target_fleet_scope_additional_additional
													}
													event_target:als_target_fleet_scope_additional_additional = {
														add_modifier = {
															modifier = als_tactic_jammer_modifiers_1
															days = 120
														}
													}
												}
											}
										}
									}
								}
							}
							als_trait_tactic_jammer_expert = {
								event_target:als_fleet_scope = {
									leader = {
										switch = {
											trigger = has_trait
											als_trait_tactic_immune = {
												event_target:als_target_fleet_scope = {
													add_modifier = {
														modifier = als_tactic_jammer_modifiers_2
														days = 60
													}
												}
												if = {
													limit = {
														exists = event_target:als_target_fleet_scope_additional
													}
													event_target:als_target_fleet_scope_additional = {
														add_modifier = {
															modifier = als_tactic_jammer_modifiers_2
															days = 60
														}
													}
												}
												if = {
													limit = {
														exists = event_target:als_target_fleet_scope_additional_additional
													}
													event_target:als_target_fleet_scope_additional_additional = {
														add_modifier = {
															modifier = als_tactic_jammer_modifiers_2
															days = 60
														}
													}
												}
											}
											als_trait_tactic_immune_expert = {
												event_target:als_target_fleet_scope = {
													add_modifier = {
														modifier = als_tactic_jammer_modifiers_2
														days = 120
													}
												}
												if = {
													limit = {
														exists = event_target:als_target_fleet_scope_additional
													}
													event_target:als_target_fleet_scope_additional = {
														add_modifier = {
															modifier = als_tactic_jammer_modifiers_2
															days = 120
														}
													}
												}
												if = {
													limit = {
														exists = event_target:als_target_fleet_scope_additional_additional
													}
													event_target:als_target_fleet_scope_additional_additional = {
														add_modifier = {
															modifier = als_tactic_jammer_modifiers_2
															days = 120
														}
													}
												}
											}
										}
									}
								}
							}
							als_trait_tactic_surprise_attack = {
								event_target:als_fleet_scope = {
									leader = {
										switch = {
											trigger = has_trait
											als_trait_tactic_immune = {
												event_target:als_target_fleet_scope = {
													add_modifier = {
														modifier = als_tactic_surprise_attack_modifiers_1
														days = 60
													}
												}
												if = {
													limit = {
														exists = event_target:als_target_fleet_scope_additional
													}
													event_target:als_target_fleet_scope_additional = {
														add_modifier = {
															modifier = als_tactic_surprise_attack_modifiers_1
															days = 60
														}
													}
												}
												if = {
													limit = {
														exists = event_target:als_target_fleet_scope_additional_additional
													}
													event_target:als_target_fleet_scope_additional_additional = {
														add_modifier = {
															modifier = als_tactic_surprise_attack_modifiers_1
															days = 60
														}
													}
												}
											}
											als_trait_tactic_immune_expert = {
												event_target:als_target_fleet_scope = {
													add_modifier = {
														modifier = als_tactic_surprise_attack_modifiers_1
														days = 120
													}
												}
												if = {
													limit = {
														exists = event_target:als_target_fleet_scope_additional
													}
													event_target:als_target_fleet_scope_additional = {
														add_modifier = {
															modifier = als_tactic_surprise_attack_modifiers_1
															days = 120
														}
													}
												}
												if = {
													limit = {
														exists = event_target:als_target_fleet_scope_additional_additional
													}
													event_target:als_target_fleet_scope_additional_additional = {
														add_modifier = {
															modifier = als_tactic_surprise_attack_modifiers_1
															days = 120
														}
													}
												}
											}
										}
									}
								}
							}
							als_trait_tactic_surprise_attack_expert = {
								event_target:als_fleet_scope = {
									leader = {
										switch = {
											trigger = has_trait
											als_trait_tactic_immune = {
												event_target:als_target_fleet_scope = {
													add_modifier = {
														modifier = als_tactic_surprise_attack_modifiers_2
														days = 60
													}
												}
												if = {
													limit = {
														exists = event_target:als_target_fleet_scope_additional
													}
													event_target:als_target_fleet_scope_additional = {
														add_modifier = {
															modifier = als_tactic_surprise_attack_modifiers_2
															days = 60
														}
													}
												}
												if = {
													limit = {
														exists = event_target:als_target_fleet_scope_additional_additional
													}
													event_target:als_target_fleet_scope_additional_additional = {
														add_modifier = {
															modifier = als_tactic_surprise_attack_modifiers_2
															days = 60
														}
													}
												}
											}
											als_trait_tactic_immune_expert = {
												event_target:als_target_fleet_scope = {
													add_modifier = {
														modifier = als_tactic_surprise_attack_modifiers_2
														days = 120
													}
												}
												if = {
													limit = {
														exists = event_target:als_target_fleet_scope_additional
													}
													event_target:als_target_fleet_scope_additional = {
														add_modifier = {
															modifier = als_tactic_surprise_attack_modifiers_2
															days = 120
														}
													}
												}
												if = {
													limit = {
														exists = event_target:als_target_fleet_scope_additional_additional
													}
													event_target:als_target_fleet_scope_additional_additional = {
														add_modifier = {
															modifier = als_tactic_surprise_attack_modifiers_2
															days = 120
														}
													}
												}
											}
										}
									}
								}
							}
							als_trait_tactic_untoachable = {
								event_target:als_fleet_scope = {
									leader = {
										switch = {
											trigger = has_trait
											als_trait_tactic_immune = {
												event_target:als_target_fleet_scope = {
													add_modifier = {
														modifier = als_tactic_untouchable_modifiers_1
														days = 60
													}
												}
												if = {
													limit = {
														exists = event_target:als_target_fleet_scope_additional
													}
													event_target:als_target_fleet_scope_additional = {
														add_modifier = {
															modifier = als_tactic_untouchable_modifiers_1
															days = 60
														}
													}
												}
												if = {
													limit = {
														exists = event_target:als_target_fleet_scope_additional_additional
													}
													event_target:als_target_fleet_scope_additional_additional = {
														add_modifier = {
															modifier = als_tactic_untouchable_modifiers_1
															days = 60
														}
													}
												}
											}
											als_trait_tactic_immune_expert = {
												event_target:als_target_fleet_scope = {
													add_modifier = {
														modifier = als_tactic_untouchable_modifiers_1
														days = 120
													}
												}
												if = {
													limit = {
														exists = event_target:als_target_fleet_scope_additional
													}
													event_target:als_target_fleet_scope_additional = {
														add_modifier = {
															modifier = als_tactic_untouchable_modifiers_1
															days = 120
														}
													}
												}
												if = {
													limit = {
														exists = event_target:als_target_fleet_scope_additional_additional
													}
													event_target:als_target_fleet_scope_additional_additional = {
														add_modifier = {
															modifier = als_tactic_untouchable_modifiers_1
															days = 120
														}
													}
												}
											}
										}
									}
								}
							}
							als_trait_tactic_untoachable_expert = {
								event_target:als_fleet_scope = {
									leader = {
										switch = {
											trigger = has_trait
											als_trait_tactic_immune = {
												event_target:als_target_fleet_scope = {
													add_modifier = {
														modifier = als_tactic_untouchable_modifiers_2
														days = 60
													}
												}
												if = {
													limit = {
														exists = event_target:als_target_fleet_scope_additional
													}
													event_target:als_target_fleet_scope_additional = {
														add_modifier = {
															modifier = als_tactic_untouchable_modifiers_2
															days = 60
														}
													}
												}
												if = {
													limit = {
														exists = event_target:als_target_fleet_scope_additional_additional
													}
													event_target:als_target_fleet_scope_additional_additional = {
														add_modifier = {
															modifier = als_tactic_untouchable_modifiers_2
															days = 60
														}
													}
												}
											}
											als_trait_tactic_immune_expert = {
												event_target:als_target_fleet_scope = {
													add_modifier = {
														modifier = als_tactic_untouchable_modifiers_2
														days = 120
													}
												}
												if = {
													limit = {
														exists = event_target:als_target_fleet_scope_additional
													}
													event_target:als_target_fleet_scope_additional = {
														add_modifier = {
															modifier = als_tactic_untouchable_modifiers_2
															days = 120
														}
													}
												}
												if = {
													limit = {
														exists = event_target:als_target_fleet_scope_additional_additional
													}
													event_target:als_target_fleet_scope_additional_additional = {
														add_modifier = {
															modifier = als_tactic_untouchable_modifiers_2
															days = 120
														}
													}
												}
											}
										}
									}
								}
							}
						}
					}
				}				
			}
		}
	}
}

###for copycat tactic with on_entering_battle 
country_event = {
	id = als.101
	hide_window = yes
	is_triggered_only = yes
	trigger = {
		exists = fromfrom
		fromfrom = {
			is_scope_type = fleet
			is_scope_valid = yes
			exists = leader
			leader = {
				leader_class = admiral
				OR = {
					has_trait = als_trait_tactic_copycat
					has_trait = als_trait_tactic_copycat_expert
				}
				NOR = {
					has_leader_flag = als_admiral_changing_strategic_traits
					has_leader_flag = als_admiral_changing_tactic_traits
				}
			}
		}
	}
	immediate = {
		if = {
			limit = {
				exists = fromfromfrom
				fromfromfrom = {
					is_scope_type = fleet
				}
			}
			fromfromfrom = {
				save_event_target_as = als_target_fleet_scope
			}
		}
		
		fromfrom = {
			save_event_target_as = als_fleet_scope
			leader = {
				save_event_target_as = als_tactic_copycater
			}
			if = {
				limit = {
					leader = {
						has_trait = als_trait_tactic_copycat
					}
					event_target:als_target_fleet_scope = {
						exists = leader
						leader = {
							leader_class = admiral
						}
					}	
				}
				
				event_target:als_target_fleet_scope = {
					leader = {
						switch = {
							trigger = has_trait
							als_trait_strategic_energy = {
								event_target:als_tactic_copycater = {
									leader = {
										remove_trait = als_trait_tactic_copycat
										add_timed_trait = {
											trait = als_trait_tactic_copycat_energy
											days = 60
										}
										set_cooldown = 60
									}
								}
							}
							als_trait_strategic_energy_expert = {
								event_target:als_tactic_copycater = {
									leader = {
										remove_trait = als_trait_tactic_copycat
										add_timed_trait = {
											trait = als_trait_tactic_copycat_energy
											days = 60
										}
										set_cooldown = 60
									}
								}
							}
							als_trait_strategic_explosive = {
								event_target:als_tactic_copycater = {
									leader = {
										remove_trait = als_trait_tactic_copycat
										add_timed_trait = {
											trait = als_trait_tactic_copycat_explosive
											days = 60
										}
										set_cooldown = 60
									}
								}
							}
							als_trait_strategic_explosive_expert = {
								event_target:als_tactic_copycater = {
									leader = {
										remove_trait = als_trait_tactic_copycat
										add_timed_trait = {
											trait = als_trait_tactic_copycat_explosive
											days = 60
										}
										set_cooldown = 60
									}
								}
							}
							als_trait_strategic_kinetic = {
								event_target:als_tactic_copycater = {
									leader = {
										remove_trait = als_trait_tactic_copycat
										add_timed_trait = {
											trait = als_trait_tactic_copycat_kinetic
											days = 60
										}
										set_cooldown = 60
									}
								}
							}
							als_trait_strategic_kinetic_expert = {
								event_target:als_tactic_copycater = {
									leader = {
										remove_trait = als_trait_tactic_copycat
										add_timed_trait = {
											trait = als_trait_tactic_copycat_kinetic
											days = 60
										}
										set_cooldown = 60
									}
								}
							}
							als_trait_strategic_point_defense = {
								event_target:als_tactic_copycater = {
									leader = {
										remove_trait = als_trait_tactic_copycat
										add_timed_trait = {
											trait = als_trait_tactic_copycat_point_defense
											days = 60
										}
										set_cooldown = 60
									}
								}
							}
							als_trait_strategic_point_defense_expert = {
								event_target:als_tactic_copycater = {
									leader = {
										remove_trait = als_trait_tactic_copycat
										add_timed_trait = {
											trait = als_trait_tactic_copycat_point_defense
											days = 60
										}
										set_cooldown = 60
									}
								}
							}
							als_trait_strategic_strike_craft = {
								event_target:als_tactic_copycater = {
									leader = {
										remove_trait = als_trait_tactic_copycat
										add_timed_trait = {
											trait = als_trait_tactic_copycat_strike_craft
											days = 60
										}
										set_cooldown = 60
									}
								}
							}
							als_trait_strategic_strike_craft_expert = {
								event_target:als_tactic_copycater = {
									leader = {
										remove_trait = als_trait_tactic_copycat
										add_timed_trait = {
											trait = als_trait_tactic_copycat_strike_craft
											days = 60
										}
										set_cooldown = 60
									}
								}
							}
							als_trait_strategic_artillery = {
								event_target:als_tactic_copycater = {
									leader = {
										remove_trait = als_trait_tactic_copycat
										add_timed_trait = {
											trait = als_trait_tactic_copycat_artillery
											days = 60
										}
										set_cooldown = 60
									}
								}
							}
							als_trait_strategic_artillery_expert = {
								event_target:als_tactic_copycater = {
									leader = {
										remove_trait = als_trait_tactic_copycat
										add_timed_trait = {
											trait = als_trait_tactic_copycat_artillery
											days = 60
										}
										set_cooldown = 60
									}
								}
							}
							als_trait_strategic_anti_hull = {
								event_target:als_tactic_copycater = {
									leader = {
										remove_trait = als_trait_tactic_copycat
										add_timed_trait = {
											trait = als_trait_tactic_copycat_anti_hull
											days = 60
										}
										set_cooldown = 60
									}
								}
							}
							als_trait_strategic_anti_hull_expert = {
								event_target:als_tactic_copycater = {
									leader = {
										remove_trait = als_trait_tactic_copycat
										add_timed_trait = {
											trait = als_trait_tactic_copycat_anti_hull
											days = 60
										}
										set_cooldown = 60
									}
								}
							}
							als_trait_strategic_anti_armor = {
								event_target:als_tactic_copycater = {
									leader = {
										remove_trait = als_trait_tactic_copycat
										add_timed_trait = {
											trait = als_trait_tactic_copycat_anti_armor
											days = 60
										}
										set_cooldown = 60
									}
								}
							}
							als_trait_strategic_anti_armor_expert = {
								event_target:als_tactic_copycater = {
									leader = {
										remove_trait = als_trait_tactic_copycat
										add_timed_trait = {
											trait = als_trait_tactic_copycat_anti_armor
											days = 60
										}
										set_cooldown = 60
									}
								}
							}
							als_trait_strategic_anti_shield = {
								event_target:als_tactic_copycater = {
									leader = {
										remove_trait = als_trait_tactic_copycat
										add_timed_trait = {
											trait = als_trait_tactic_copycat_anti_shield
											days = 60
										}
										set_cooldown = 60
									}
								}
							}
							als_trait_strategic_anti_shield_expert = {
								event_target:als_tactic_copycater = {
									leader = {
										remove_trait = als_trait_tactic_copycat
										add_timed_trait = {
											trait = als_trait_tactic_copycat_anti_shield
											days = 60
										}
										set_cooldown = 60
									}
								}
							}
						}
					}	
				}
			}
			if = {
				limit = {
					leader = {
						has_trait = als_trait_tactic_copycat_expert
					}
					event_target:als_target_fleet_scope = {
						exists = leader
						leader = {
							leader_class = admiral
						}
					}	
				}
				event_target:als_target_fleet_scope = {
					leader = {
						switch = {
							trigger = has_trait
							als_trait_strategic_energy = {
								event_target:als_tactic_copycater = {
									leader = {
										remove_trait = als_trait_tactic_copycat
										add_timed_trait = {
											trait = als_trait_tactic_copycat_expert_energy
											days = 120
										}
										set_cooldown = 120
									}
								}
							}
							als_trait_strategic_energy_expert = {
								event_target:als_tactic_copycater = {
									leader = {
										remove_trait = als_trait_tactic_copycat
										add_timed_trait = {
											trait = als_trait_tactic_copycat_expert_energy
											days = 120
										}
										set_cooldown = 120
									}
								}
							}
							als_trait_strategic_explosive = {
								event_target:als_tactic_copycater = {
									leader = {
										remove_trait = als_trait_tactic_copycat
										add_timed_trait = {
											trait = als_trait_tactic_copycat_expert_explosive
											days = 120
										}
										set_cooldown = 120
									}
								}
							}
							als_trait_strategic_explosive_expert = {
								event_target:als_tactic_copycater = {
									leader = {
										remove_trait = als_trait_tactic_copycat
										add_timed_trait = {
											trait = als_trait_tactic_copycat_expert_explosive
											days = 120
										}
										set_cooldown = 120
									}
								}
							}
							als_trait_strategic_kinetic = {
								event_target:als_tactic_copycater = {
									leader = {
										remove_trait = als_trait_tactic_copycat
										add_timed_trait = {
											trait = als_trait_tactic_copycat_expert_kinetic
											days = 120
										}
										set_cooldown = 120
									}
								}
							}
							als_trait_strategic_kinetic_expert = {
								event_target:als_tactic_copycater = {
									leader = {
										remove_trait = als_trait_tactic_copycat
										add_timed_trait = {
											trait = als_trait_tactic_copycat_expert_kinetic
											days = 120
										}
										set_cooldown = 120
									}
								}
							}
							als_trait_strategic_point_defense = {
								event_target:als_tactic_copycater = {
									leader = {
										remove_trait = als_trait_tactic_copycat
										add_timed_trait = {
											trait = als_trait_tactic_copycat_expert_point_defense
											days = 120
										}
										set_cooldown = 120
									}
								}
							}
							als_trait_strategic_point_defense_expert = {
								event_target:als_tactic_copycater = {
									leader = {
										remove_trait = als_trait_tactic_copycat
										add_timed_trait = {
											trait = als_trait_tactic_copycat_expert_point_defense
											days = 120
										}
										set_cooldown = 120
									}
								}
							}
							als_trait_strategic_strike_craft = {
								event_target:als_tactic_copycater = {
									leader = {
										remove_trait = als_trait_tactic_copycat
										add_timed_trait = {
											trait = als_trait_tactic_copycat_expert_strike_craft
											days = 120
										}
										set_cooldown = 120
									}
								}
							}
							als_trait_strategic_strike_craft_expert = {
								event_target:als_tactic_copycater = {
									leader = {
										remove_trait = als_trait_tactic_copycat
										add_timed_trait = {
											trait = als_trait_tactic_copycat_expert_strike_craft
											days = 120
										}
										set_cooldown = 120
									}
								}
							}
							als_trait_strategic_artillery = {
								event_target:als_tactic_copycater = {
									leader = {
										remove_trait = als_trait_tactic_copycat
										add_timed_trait = {
											trait = als_trait_tactic_copycat_expert_artillery
											days = 120
										}
										set_cooldown = 120
									}
								}
							}
							als_trait_strategic_artillery_expert = {
								event_target:als_tactic_copycater = {
									leader = {
										remove_trait = als_trait_tactic_copycat
										add_timed_trait = {
											trait = als_trait_tactic_copycat_expert_artillery
											days = 120
										}
										set_cooldown = 120
									}
								}
							}
							als_trait_strategic_anti_hull = {
								event_target:als_tactic_copycater = {
									leader = {
										remove_trait = als_trait_tactic_copycat
										add_timed_trait = {
											trait = als_trait_tactic_copycat_expert_anti_hull
											days = 120
										}
										set_cooldown = 120
									}
								}
							}
							als_trait_strategic_anti_hull_expert = {
								event_target:als_tactic_copycater = {
									leader = {
										remove_trait = als_trait_tactic_copycat
										add_timed_trait = {
											trait = als_trait_tactic_copycat_expert_anti_hull
											days = 120
										}
										set_cooldown = 120
									}
								}
							}
							als_trait_strategic_anti_armor = {
								event_target:als_tactic_copycater = {
									leader = {
										remove_trait = als_trait_tactic_copycat
										add_timed_trait = {
											trait = als_trait_tactic_copycat_expert_anti_armor
											days = 120
										}
										set_cooldown = 120
									}
								}
							}
							als_trait_strategic_anti_armor_expert = {
								event_target:als_tactic_copycater = {
									leader = {
										remove_trait = als_trait_tactic_copycat
										add_timed_trait = {
											trait = als_trait_tactic_copycat_expert_anti_armor
											days = 120
										}
										set_cooldown = 120
									}
								}
							}
							als_trait_strategic_anti_shield = {
								event_target:als_tactic_copycater = {
									leader = {
										remove_trait = als_trait_tactic_copycat
										add_timed_trait = {
											trait = als_trait_tactic_copycat_expert_anti_shield
											days = 120
										}
										set_cooldown = 120
									}
								}
							}
							als_trait_strategic_anti_shield_expert = {
								event_target:als_tactic_copycater = {
									leader = {
										remove_trait = als_trait_tactic_copycat
										add_timed_trait = {
											trait = als_trait_tactic_copycat_expert_anti_shield
											days = 120
										}
										set_cooldown = 120
									}
								}
							}
						}
					}
				}
			}
		}
###fromfromfrom	
	}
}
###
###for copycat tactic with on_fleet_combat_joined_attacker
fleet_event = {
	id = als.151
	hide_window = yes
	is_triggered_only = yes
	trigger = {
		is_scope_type = fleet
		is_scope_valid = yes
		exists = leader
		leader = {
			leader_class = admiral
			OR = {
				has_trait = als_trait_tactic_copycat
				has_trait = als_trait_tactic_copycat_expert
			}
		}
	}
	immediate = {
		save_event_target_as = als_fleet_scope
		leader = {
			save_event_target_as = als_tactic_copycater
		}
		if = {
			limit = {
				exists = from
				from = {
					is_scope_type = fleet
				}
			}
			from = {
				save_event_target_as = als_target_fleet_scope
			}
		}
		if = {
			limit = {
				leader = {
					has_trait = als_trait_tactic_copycat
				}
				event_target:als_target_fleet_scope = {
					exists = leader
					leader = {
						leader_class = admiral
					}
				}	
			}
			
			event_target:als_target_fleet_scope = {
				leader = {
					switch = {
						trigger = has_trait
						als_trait_strategic_energy = {
							event_target:als_tactic_copycater = {
								leader = {
									remove_trait = als_trait_tactic_copycat
									add_timed_trait = {
										trait = als_trait_tactic_copycat_energy
										days = 60
									}
									set_cooldown = 60
								}
							}
						}
						als_trait_strategic_energy_expert = {
							event_target:als_tactic_copycater = {
								leader = {
									remove_trait = als_trait_tactic_copycat
									add_timed_trait = {
										trait = als_trait_tactic_copycat_energy
										days = 60
									}
									set_cooldown = 60
								}
							}
						}
						als_trait_strategic_explosive = {
							event_target:als_tactic_copycater = {
								leader = {
									remove_trait = als_trait_tactic_copycat
									add_timed_trait = {
										trait = als_trait_tactic_copycat_explosive
										days = 60
									}
									set_cooldown = 60
								}
							}
						}
						als_trait_strategic_explosive_expert = {
							event_target:als_tactic_copycater = {
								leader = {
									remove_trait = als_trait_tactic_copycat
									add_timed_trait = {
										trait = als_trait_tactic_copycat_explosive
										days = 60
									}
									set_cooldown = 60
								}
							}
						}
						als_trait_strategic_kinetic = {
							event_target:als_tactic_copycater = {
								leader = {
									remove_trait = als_trait_tactic_copycat
									add_timed_trait = {
										trait = als_trait_tactic_copycat_kinetic
										days = 60
									}
									set_cooldown = 60
								}
							}
						}
						als_trait_strategic_kinetic_expert = {
							event_target:als_tactic_copycater = {
								leader = {
									remove_trait = als_trait_tactic_copycat
									add_timed_trait = {
										trait = als_trait_tactic_copycat_kinetic
										days = 60
									}
									set_cooldown = 60
								}
							}
						}
						als_trait_strategic_point_defense = {
							event_target:als_tactic_copycater = {
								leader = {
									remove_trait = als_trait_tactic_copycat
									add_timed_trait = {
										trait = als_trait_tactic_copycat_point_defense
										days = 60
									}
									set_cooldown = 60
								}
							}
						}
						als_trait_strategic_point_defense_expert = {
							event_target:als_tactic_copycater = {
								leader = {
									remove_trait = als_trait_tactic_copycat
									add_timed_trait = {
										trait = als_trait_tactic_copycat_point_defense
										days = 60
									}
									set_cooldown = 60
								}
							}
						}
						als_trait_strategic_strike_craft = {
							event_target:als_tactic_copycater = {
								leader = {
									remove_trait = als_trait_tactic_copycat
									add_timed_trait = {
										trait = als_trait_tactic_copycat_strike_craft
										days = 60
									}
									set_cooldown = 60
								}
							}
						}
						als_trait_strategic_strike_craft_expert = {
							event_target:als_tactic_copycater = {
								leader = {
									remove_trait = als_trait_tactic_copycat
									add_timed_trait = {
										trait = als_trait_tactic_copycat_strike_craft
										days = 60
									}
									set_cooldown = 60
								}
							}
						}
						als_trait_strategic_artillery = {
							event_target:als_tactic_copycater = {
								leader = {
									remove_trait = als_trait_tactic_copycat
									add_timed_trait = {
										trait = als_trait_tactic_copycat_artillery
										days = 60
									}
									set_cooldown = 60
								}
							}
						}
						als_trait_strategic_artillery_expert = {
							event_target:als_tactic_copycater = {
								leader = {
									remove_trait = als_trait_tactic_copycat
									add_timed_trait = {
										trait = als_trait_tactic_copycat_artillery
										days = 60
									}
									set_cooldown = 60
								}
							}
						}
						als_trait_strategic_anti_hull = {
							event_target:als_tactic_copycater = {
								leader = {
									remove_trait = als_trait_tactic_copycat
									add_timed_trait = {
										trait = als_trait_tactic_copycat_anti_hull
										days = 60
									}
									set_cooldown = 60
								}
							}
						}
						als_trait_strategic_anti_hull_expert = {
							event_target:als_tactic_copycater = {
								leader = {
									remove_trait = als_trait_tactic_copycat
									add_timed_trait = {
										trait = als_trait_tactic_copycat_anti_hull
										days = 60
									}
									set_cooldown = 60
								}
							}
						}
						als_trait_strategic_anti_armor = {
							event_target:als_tactic_copycater = {
								leader = {
									remove_trait = als_trait_tactic_copycat
									add_timed_trait = {
										trait = als_trait_tactic_copycat_anti_armor
										days = 60
									}
									set_cooldown = 60
								}
							}
						}
						als_trait_strategic_anti_armor_expert = {
							event_target:als_tactic_copycater = {
								leader = {
									remove_trait = als_trait_tactic_copycat
									add_timed_trait = {
										trait = als_trait_tactic_copycat_anti_armor
										days = 60
									}
									set_cooldown = 60
								}
							}
						}
						als_trait_strategic_anti_shield = {
							event_target:als_tactic_copycater = {
								leader = {
									remove_trait = als_trait_tactic_copycat
									add_timed_trait = {
										trait = als_trait_tactic_copycat_anti_shield
										days = 60
									}
									set_cooldown = 60
								}
							}
						}
						als_trait_strategic_anti_shield_expert = {
							event_target:als_tactic_copycater = {
								leader = {
									remove_trait = als_trait_tactic_copycat
									add_timed_trait = {
										trait = als_trait_tactic_copycat_anti_shield
										days = 60
									}
									set_cooldown = 60
								}
							}
						}
					}
				}	
			}
		}
		if = {
			limit = {
				leader = {
					has_trait = als_trait_tactic_copycat_expert
				}
				event_target:als_target_fleet_scope = {
					exists = leader
					leader = {
						leader_class = admiral
					}
				}	
			}
			event_target:als_target_fleet_scope = {
				leader = {
					switch = {
						trigger = has_trait
						als_trait_strategic_energy = {
							event_target:als_tactic_copycater = {
								leader = {
									remove_trait = als_trait_tactic_copycat
									add_timed_trait = {
										trait = als_trait_tactic_copycat_expert_energy
										days = 120
									}
									set_cooldown = 120
								}
							}
						}
						als_trait_strategic_energy_expert = {
							event_target:als_tactic_copycater = {
								leader = {
									remove_trait = als_trait_tactic_copycat
									add_timed_trait = {
										trait = als_trait_tactic_copycat_expert_energy
										days = 120
									}
									set_cooldown = 120
								}
							}
						}
						als_trait_strategic_explosive = {
							event_target:als_tactic_copycater = {
								leader = {
									remove_trait = als_trait_tactic_copycat
									add_timed_trait = {
										trait = als_trait_tactic_copycat_expert_explosive
										days = 120
									}
									set_cooldown = 120
								}
							}
						}
						als_trait_strategic_explosive_expert = {
							event_target:als_tactic_copycater = {
								leader = {
									remove_trait = als_trait_tactic_copycat
									add_timed_trait = {
										trait = als_trait_tactic_copycat_expert_explosive
										days = 120
									}
									set_cooldown = 120
								}
							}
						}
						als_trait_strategic_kinetic = {
							event_target:als_tactic_copycater = {
								leader = {
									remove_trait = als_trait_tactic_copycat
									add_timed_trait = {
										trait = als_trait_tactic_copycat_expert_kinetic
										days = 120
									}
									set_cooldown = 120
								}
							}
						}
						als_trait_strategic_kinetic_expert = {
							event_target:als_tactic_copycater = {
								leader = {
									remove_trait = als_trait_tactic_copycat
									add_timed_trait = {
										trait = als_trait_tactic_copycat_expert_kinetic
										days = 120
									}
									set_cooldown = 120
								}
							}
						}
						als_trait_strategic_point_defense = {
							event_target:als_tactic_copycater = {
								leader = {
									remove_trait = als_trait_tactic_copycat
									add_timed_trait = {
										trait = als_trait_tactic_copycat_expert_point_defense
										days = 120
									}
									set_cooldown = 120
								}
							}
						}
						als_trait_strategic_point_defense_expert = {
							event_target:als_tactic_copycater = {
								leader = {
									remove_trait = als_trait_tactic_copycat
									add_timed_trait = {
										trait = als_trait_tactic_copycat_expert_point_defense
										days = 120
									}
									set_cooldown = 120
								}
							}
						}
						als_trait_strategic_strike_craft = {
							event_target:als_tactic_copycater = {
								leader = {
									remove_trait = als_trait_tactic_copycat
									add_timed_trait = {
										trait = als_trait_tactic_copycat_expert_strike_craft
										days = 120
									}
									set_cooldown = 120
								}
							}
						}
						als_trait_strategic_strike_craft_expert = {
							event_target:als_tactic_copycater = {
								leader = {
									remove_trait = als_trait_tactic_copycat
									add_timed_trait = {
										trait = als_trait_tactic_copycat_expert_strike_craft
										days = 120
									}
									set_cooldown = 120
								}
							}
						}
						als_trait_strategic_artillery = {
							event_target:als_tactic_copycater = {
								leader = {
									remove_trait = als_trait_tactic_copycat
									add_timed_trait = {
										trait = als_trait_tactic_copycat_expert_artillery
										days = 120
									}
									set_cooldown = 120
								}
							}
						}
						als_trait_strategic_artillery_expert = {
							event_target:als_tactic_copycater = {
								leader = {
									remove_trait = als_trait_tactic_copycat
									add_timed_trait = {
										trait = als_trait_tactic_copycat_expert_artillery
										days = 120
									}
									set_cooldown = 120
								}
							}
						}
						als_trait_strategic_anti_hull = {
							event_target:als_tactic_copycater = {
								leader = {
									remove_trait = als_trait_tactic_copycat
									add_timed_trait = {
										trait = als_trait_tactic_copycat_expert_anti_hull
										days = 120
									}
									set_cooldown = 120
								}
							}
						}
						als_trait_strategic_anti_hull_expert = {
							event_target:als_tactic_copycater = {
								leader = {
									remove_trait = als_trait_tactic_copycat
									add_timed_trait = {
										trait = als_trait_tactic_copycat_expert_anti_hull
										days = 120
									}
									set_cooldown = 120
								}
							}
						}
						als_trait_strategic_anti_armor = {
							event_target:als_tactic_copycater = {
								leader = {
									remove_trait = als_trait_tactic_copycat
									add_timed_trait = {
										trait = als_trait_tactic_copycat_expert_anti_armor
										days = 120
									}
									set_cooldown = 120
								}
							}
						}
						als_trait_strategic_anti_armor_expert = {
							event_target:als_tactic_copycater = {
								leader = {
									remove_trait = als_trait_tactic_copycat
									add_timed_trait = {
										trait = als_trait_tactic_copycat_expert_anti_armor
										days = 120
									}
									set_cooldown = 120
								}
							}
						}
						als_trait_strategic_anti_shield = {
							event_target:als_tactic_copycater = {
								leader = {
									remove_trait = als_trait_tactic_copycat
									add_timed_trait = {
										trait = als_trait_tactic_copycat_expert_anti_shield
										days = 120
									}
									set_cooldown = 120
								}
							}
						}
						als_trait_strategic_anti_shield_expert = {
							event_target:als_tactic_copycater = {
								leader = {
									remove_trait = als_trait_tactic_copycat
									add_timed_trait = {
										trait = als_trait_tactic_copycat_expert_anti_shield
										days = 120
									}
									set_cooldown = 120
								}
							}
						}
					}
				}
			}
		}

	}
}


###Hyperliner tactic
fleet_event = {
	id = als.110
	hide_window = yes
	is_triggered_only = yes
	trigger = {
		exists = leader
		is_scope_type = fleet
		is_scope_valid = yes
		leader = {
			leader_class = admiral
			OR = {
				has_trait = als_trait_tactic_hyperliner
				has_trait = als_trait_tactic_hyperliner_actived
				has_trait = als_trait_tactic_hyperliner_expert
				has_trait = als_trait_tactic_hyperliner_expert_actived
			}
		}
	}
	immediate = {
		save_event_target_as = als_fleet_scope
		effect_als_hyperliner_start = yes
		leader = {
			effect_als_refresh_admiral_traits = yes	
			effect_als_refresh_admiral_status = yes
			set_cooldown = 30
		}
	}
}
###self sacrifice effect, fire when own ship get destroyed
country_event = {
	id = als.115
	hide_window = yes
	is_triggered_only = yes
	trigger = {
		fromfrom = {
			is_scope_type = ship
			is_scope_valid = yes
			exists = leader
			is_in_combat = yes
			leader = {
				OR = {
					has_trait = als_trait_tactic_self_sacrifice
					has_trait = als_trait_tactic_self_sacrifice_expert
				}
			}
		}
		exists = fromfromfrom
		fromfromfrom = {
			is_scope_type = ship
		}
	}

	immediate = {
		fromfromfrom = {
			save_event_target_as = als_target_ship_scope
		}
		fromfrom = {
			leader = {
				switch = {
					trigger = has_trait
					als_trait_tactic_self_sacrifice = {
						event_target:als_target_ship_scope = {
							if = {
								limit = {
									has_hp > 120000
								}
								reduce_hp = 650
								reduce_hp_percent = 0.01
							}
							else_if = {
								limit = {
									has_hp > 80000
									has_hp < 120000
								}
								reduce_hp = 625
								reduce_hp_percent = 0.01
							}
							else_if = {
								limit = {
									has_hp > 50000
									has_hp < 80000
								}
								reduce_hp = 600
								reduce_hp_percent = 0.02
							}
							else_if = {
								limit = {
									has_hp > 30000
									has_hp < 50000
								}
								reduce_hp = 550
								reduce_hp_percent = 0.03
							}
							else_if = {
								limit = {
									has_hp > 15000
									has_hp < 30000
								}
								reduce_hp = 500
								reduce_hp_percent = 0.04
							}
							else_if = {
								limit = {
									has_hp > 10000
									has_hp < 15000
								}
								reduce_hp = 450
								reduce_hp_percent = 0.05
							}
							else_if = {
								limit = {
									has_hp > 5000
									has_hp < 10000
								}
								reduce_hp = 350
								reduce_hp_percent = 0.1
							}
							else_if = {
								limit = {
									has_hp > 2500
									has_hp < 5000
								}
								reduce_hp = 300
								reduce_hp_percent = 0.15
							}
							else_if = {
								limit = {
									has_hp > 1000
									has_hp < 2500
								}
								reduce_hp = 150
								reduce_hp_percent = 0.2
							}
							else_if = {
								limit = {
									has_hp < 1000
								}
								reduce_hp = 75
								reduce_hp_percent = 0.25
							}
							else = {
								reduce_hp_percent = 0.05
							}
						}
					}
					als_trait_tactic_self_sacrifice_expert = {
						event_target:als_target_ship_scope = {
							if = {
								limit = {
									has_hp > 120000
								}
								reduce_hp = 1300
								reduce_hp_percent = 0.0125
							}
							else_if = {
								limit = {
									has_hp > 80000
									has_hp < 120000
								}
								reduce_hp = 1250
								reduce_hp_percent = 0.025
							}
							else_if = {
								limit = {
									has_hp > 50000
									has_hp < 80000
								}
								reduce_hp = 1200
								reduce_hp_percent = 0.05
							}
							else_if = {
								limit = {
									has_hp > 30000
									has_hp < 50000
								}
								reduce_hp = 1100
								reduce_hp_percent = 0.075
							}
							else_if = {
								limit = {
									has_hp > 15000
									has_hp < 30000
								}
								reduce_hp = 1000
								reduce_hp_percent = 0.1
							}
							else_if = {
								limit = {
									has_hp > 10000
									has_hp < 15000
								}
								reduce_hp = 900
								reduce_hp_percent = 0.125
							}
							else_if = {
								limit = {
									has_hp > 5000
									has_hp < 10000
								}
								reduce_hp = 700
								reduce_hp_percent = 0.2
							}
							else_if = {
								limit = {
									has_hp > 2500
									has_hp < 5000
								}
								reduce_hp = 600
								reduce_hp_percent = 0.3
							}
							else_if = {
								limit = {
									has_hp > 1000
									has_hp < 2500
								}
								reduce_hp = 300
								reduce_hp_percent = 0.4
							}
							else_if = {
								limit = {
									has_hp < 1000
								}
								reduce_hp = 150
								reduce_hp_percent = 0.5
							}
							else = {
								reduce_hp_percent = 0.125
							}
						}
					}
				}
			}
		}
	}
}
###surprise attack modifier apply
fleet_event = {
	id = als.120
	hide_window = yes
	is_triggered_only = yes
	trigger = {
		is_scope_type = fleet
		is_scope_valid = yes
		exists = leader
		leader = {
			OR = {
				has_trait = als_trait_tactic_surprise_attack
				has_trait = als_trait_tactic_surprise_attack_expert
			}
		}
	}
	immediate = {
		save_event_target_as = als_surprise_attacker_fleet
		leader = {
			if = {
				limit = {
					has_trait = als_trait_tactic_surprise_attack
				}
				set_timed_leader_flag = {
					flag = als_admiral_has_tactic_surprise_attack_just_ftled
					days = 5
				}
			}
		}
		leader = {
			if = {
				limit = {
					has_trait = als_trait_tactic_surprise_attack_expert
				}
				set_timed_leader_flag = {
					flag = als_admiral_has_tactic_surprise_attack_just_ftled_expert
					days = 5
				}
			}
		}
		event = { id = als.121 }
	}
}

event = {
	id = als.121
	hide_window = yes
	is_triggered_only = yes
	

	immediate = {
		random_system = {
			limit = {
				any_fleet_in_system = {
					exists = leader
					exists = event_target:als_surprise_attacker_fleet
					leader = {
						is_scope_valid = yes
						OR = {
							has_leader_flag = als_admiral_has_tactic_surprise_attack_just_ftled
							has_leader_flag = als_admiral_has_tactic_surprise_attack_just_ftled_expert
						}	
					}
				}
			}
			save_event_target_as = als_system
			event_target:als_surprise_attacker_fleet = {
				if = {
					limit = {
						leader = {
							has_leader_flag = als_admiral_has_tactic_surprise_attack_just_ftled
						}
					}
					event_target:als_system = {
						every_fleet_in_system = {
							limit = {
								NOT = {
									is_same_value = event_target:als_surprise_attacker_fleet
								}
								NOT = {
									owner = {
										is_same_empire = root.owner
									}
								}
								NAND = {
									exists = leader
									leader = {
										has_leader_flag = als_admiral_has_tactic_hyperliner_effect
									}
								}	
								owner = {
									is_at_war_with = root.owner					
								}
							}
							add_modifier = {
								modifier = als_tactic_surprise_attack_modifiers_1
								days = 30
							}
						}
					}	
				}
				if = {
					limit = {
						leader = {
							has_leader_flag = als_admiral_has_tactic_surprise_attack_just_ftled_expert
						}
					}
					event_target:als_system = {
						every_fleet_in_system = {
							limit = {
								NOT = {
									is_same_value = event_target:als_surprise_attacker_fleet
								}
								NOT = {
									owner = {
										is_same_empire = root.owner
									}
								}
								NAND = {
									exists = leader
									leader = {
										has_leader_flag = als_admiral_has_tactic_hyperliner_effect
									}
								}	
								owner = {
									is_at_war_with = root.owner					
								}
							}
							add_modifier = {
								modifier = als_tactic_surprise_attack_modifiers_2
								days = 30
							}
						}
					}	
				}
			}
			
		}
		
		
	}
}

###Tactic effects end&remain gateway
fleet_event = {
	id = als.200
	hide_window = yes
	is_triggered_only = yes

	trigger = {
		exists = leader
		exists = event_target:als_fleet_scope
		is_scope_type = fleet
		is_scope_valid = yes
	}

	immediate = {
		leader = {
			if = {
				limit = {
					has_leader_flag = als_admiral_has_tactic_close_combat
				}
				add_trait = als_trait_tactic_ambush_inactive
			}
			if = {
				limit = {
					has_leader_flag = als_admiral_has_tactic_close_combat_expert
				}
				add_trait = als_trait_tactic_ambush_expert_inactive
			}
			if = {
				limit = {
					has_leader_flag = als_admiral_has_tactic_bottled_up
				}
				if = {
					limit = {
						root = {
							is_in_combat = yes
						}
					}
					add_timed_trait = { 
						trait = als_trait_tactic_bottled_up_actived
						days = 30
					}
					set_cooldown = 30
					root = {
						fleet_event = { id = als.200 days = 30 }
					}
				}
				else = {
					if = {
						limit = {
							has_leader_flag = als_admiral_own_bottled_up_expert
						}
						effect_als_bottled_up_expert_add_trait = yes
					}
					else = {
						effect_als_bottled_up_add_trait = yes
					}		
					remove_trait = als_trait_tactic_bottled_up_actived
					remove_leader_flag = als_admiral_has_tactic_bottled_up
				}
			}
			if = {
				limit = {
					has_leader_flag = als_admiral_has_tactic_bottled_up_expert
				}
				if = {
					limit = {
						root = {
							is_in_combat = yes
						}
					}
					add_timed_trait = { 
						trait = als_trait_tactic_bottled_up_expert_actived
						days = 30
					}
					set_cooldown = 30
					root = {
						fleet_event = { id = als.200 days = 30 }
					}
				}
				else = {
					effect_als_bottled_up_expert_add_trait = yes
					remove_trait = als_trait_tactic_bottled_up_expert_actived
					remove_leader_flag = als_admiral_has_tactic_bottled_up_expert
				}
			}
			if = {
				limit = {
					has_leader_flag = als_admiral_has_tactic_camper
				}
				if = {
					limit = {
						has_leader_flag = als_admiral_own_camper_expert
					}
					add_trait = als_trait_tactic_camper_expert
				}
				else = {
					add_trait = als_trait_tactic_camper
				}
			}
			if = {
				limit = {
					has_leader_flag = als_admiral_has_tactic_camper_expert
				}
				add_trait = als_trait_tactic_camper_expert
			}
			if = {
				limit = {
					has_leader_flag = als_admiral_has_tactic_copycat
				}
				if = {
					limit = {
						has_leader_flag = als_admiral_own_copycat_expert
					}
					add_trait = als_trait_tactic_copycat_expert
				}
				else = {
					add_trait = als_trait_tactic_copycat
				}
			}
			if = {
				limit = {
					has_leader_flag = als_admiral_has_tactic_copycat_expert
				}
				add_trait = als_trait_tactic_copycat_expert
			}
			if = {
				limit = {
					has_leader_flag = als_admiral_has_tactic_first_strike
				}
				switch = {
					trigger = has_trait
					als_trait_tactic_first_strike7 = {
						remove_trait = als_trait_tactic_first_strike7
						add_trait = als_trait_tactic_first_strike8	
					}
					als_trait_tactic_first_strike6 = {
						remove_trait = als_trait_tactic_first_strike6
						add_trait = als_trait_tactic_first_strike7
					}
					als_trait_tactic_first_strike5 = {
						remove_trait = als_trait_tactic_first_strike5
						add_trait = als_trait_tactic_first_strike6
					}
					als_trait_tactic_first_strike4 = {
						remove_trait = als_trait_tactic_first_strike4
						add_trait = als_trait_tactic_first_strike5
					}
					als_trait_tactic_first_strike3 = {
						remove_trait = als_trait_tactic_first_strike3
						add_trait = als_trait_tactic_first_strike4
					}
					als_trait_tactic_first_strike2 = {
						remove_trait = als_trait_tactic_first_strike2
						add_trait = als_trait_tactic_first_strike3
					}
					als_trait_tactic_first_strike1 = {
						remove_trait = als_trait_tactic_first_strike1
						add_trait = als_trait_tactic_first_strike2
					}
				}
				if = {
					limit = {
						root = {
							is_in_combat = no
						}
					}
					remove_leader_flag = als_admiral_has_tactic_first_strike
					effect_als_first_strike_cleanup = yes
					if = {
						limit = {
							has_leader_flag = als_admiral_own_first_strike_expert
						}
						add_trait = als_trait_tactic_first_strike_expert
					}
					else = {
						add_trait = als_trait_tactic_first_strike
					}
				}
				else = {
					set_cooldown = 7
					root = {
						fleet_event = { id = als.200 days = 7 }
					}
				}
			}
			if = {
				limit = {
					has_leader_flag = als_admiral_has_tactic_first_strike_expert
				}
				switch = {
					trigger = has_trait
					als_trait_tactic_first_strike7_expert = {
						remove_trait = als_trait_tactic_first_strike7_expert
						add_trait = als_trait_tactic_first_strike8_expert
						
					}
					als_trait_tactic_first_strike6_expert = {
						remove_trait = als_trait_tactic_first_strike6_expert
						add_trait = als_trait_tactic_first_strike7_expert
					}
					als_trait_tactic_first_strike5_expert = {
						remove_trait = als_trait_tactic_first_strike5_expert
						add_trait = als_trait_tactic_first_strike6_expert
					}
					als_trait_tactic_first_strike4_expert = {
						remove_trait = als_trait_tactic_first_strike4_expert
						add_trait = als_trait_tactic_first_strike5_expert
					}
					als_trait_tactic_first_strike3_expert = {
						remove_trait = als_trait_tactic_first_strike3_expert
						add_trait = als_trait_tactic_first_strike4_expert
					}
					als_trait_tactic_first_strike2_expert = {
						remove_trait = als_trait_tactic_first_strike2_expert
						add_trait = als_trait_tactic_first_strike3_expert
					}
					als_trait_tactic_first_strike1_expert = {
						remove_trait = als_trait_tactic_first_strike1_expert
						add_trait = als_trait_tactic_first_strike2_expert
					}
				}
				if = {
					limit = {
						root = {
							is_in_combat = no
						}
					}
					remove_leader_flag = als_admiral_has_tactic_first_strike_expert
					effect_als_first_strike_cleanup = yes
					add_trait = als_trait_tactic_first_strike_expert
				}
				else = {
					set_cooldown = 10
					root = {
						fleet_event = { id = als.200 days = 10 }
					}
				}
			}
			if = {
				limit = {
					has_leader_flag = als_admiral_has_tactic_foresight
				}
				if = {
					limit = {
						has_leader_flag = als_admiral_own_foresight_expert
					}
					add_trait = als_trait_tactic_foresight_expert
				}
				else = {
					add_trait = als_trait_tactic_foresight
				}
			}
			if = {
				limit = {
					has_leader_flag = als_admiral_has_tactic_foresight_expert
				}
				add_trait = als_trait_tactic_foresight_expert
			}
			if = {
				limit = {
					has_leader_flag = als_admiral_has_tactic_fox_tiger
				}
				if = {
					limit = {
						root = {
							is_in_combat = yes
						}
					}
					add_timed_trait = { 
						trait = als_trait_tactic_fox_tiger_actived
						days = 30
					}
					set_cooldown = 30
					root = {
						fleet_event = { id = als.200 days = 30 }
					}
					
				}
				else = {
					if = {
						limit = {
							has_leader_flag = als_admiral_own_fox_tiger_expert
						}
						effect_als_fox_tiger_expert_add_trait = yes
					}
					else = {
						effect_als_fox_tiger_add_trait = yes
					}
					remove_trait = als_trait_tactic_fox_tiger_actived
					remove_leader_flag = als_admiral_has_tactic_fox_tiger
				}
			}
			if = {
				limit = {
					has_leader_flag = als_admiral_has_tactic_fox_tiger_expert
				}
				if = {
					limit = {
						root = {
							is_in_combat = yes
						}
					}
					add_timed_trait = { 
						trait = als_trait_tactic_fox_tiger_expert_actived
						days = 30
					}
					set_cooldown = 30
					root = {
						fleet_event = { id = als.200 days = 30 }
					}
				}
				else = {
					effect_als_fox_tiger_expert_add_trait = yes
					remove_trait = als_trait_tactic_fox_tiger_expert_actived
					remove_leader_flag = als_admiral_has_tactic_fox_tiger_expert
				}
			}
			if = {
				limit = {
					NOT = {
						has_leader_flag = als_admiral_has_tactic_hyperliner
					}
					has_leader_flag = als_admiral_own_hyperliner
				}
				if = {
					limit = {
						has_leader_flag = als_admiral_own_hyperliner_expert
					}
					add_trait = als_trait_tactic_hyperliner_expert
				}
				else = {
					add_trait = als_trait_tactic_hyperliner
				}	
			}
			if = {
				limit = {
					NOT = {
						has_leader_flag = als_admiral_has_tactic_hyperliner_expert
					}
					has_leader_flag = als_admiral_own_hyperliner_expert
				}
				add_trait = als_trait_tactic_hyperliner_expert
			}
			if = {
				limit = {
					has_leader_flag = als_admiral_has_tactic_long_range
				}
				if = {
					limit = {
						has_leader_flag = als_admiral_own_long_range_expert
					}
					add_trait = als_trait_tactic_long_range_expert
				}
				else = {
					add_trait = als_trait_tactic_long_range
				}	
			}
			if = {
				limit = {
					has_leader_flag = als_admiral_has_tactic_long_range_expert
				}
				add_trait = als_trait_tactic_long_range_expert
			}
			if = {
				limit = {
					has_leader_flag = als_admiral_has_tactic_lurker
				}
				if = {
					limit = {
						root = {
							is_in_combat = yes
						}
					}
					add_timed_trait = { 
						trait = als_trait_tactic_lurker_actived
						days = 30
					}
					set_cooldown = 30
					root = {
						fleet_event = { id = als.200 days = 30 }
					}
				}
				else = {
					if = {
						limit = {
							has_leader_flag = als_admiral_own_lurker_expert
						}
						add_trait = als_trait_tactic_lurker_expert
					}
					else = {
						add_trait = als_trait_tactic_lurker
					}
					remove_leader_flag = als_admiral_has_tactic_lurker
				}
			}
			if = {
				limit = {
					has_leader_flag = als_admiral_has_tactic_lurker_expert
				}
				if = {
					limit = {
						root = {
							is_in_combat = yes
						}
					}
					add_timed_trait = { 
						trait = als_trait_tactic_lurker_expert_actived
						days = 30
					}
					set_cooldown = 30
					root = {
						fleet_event = { id = als.200 days = 30 }
					}
				}
				else = {
					remove_leader_flag = als_admiral_has_tactic_lurker_expert
					add_trait = als_trait_tactic_lurker_expert
				}
			}
			if = {
				limit = {
					has_leader_flag = als_admiral_has_tactic_snowball
				}
				switch = {
					trigger = has_trait
					als_trait_tactic_snowball5 = {
						remove_trait = als_trait_tactic_snowball5
						add_trait = als_trait_tactic_snowball6
					}
					als_trait_tactic_snowball4 = {
						remove_trait = als_trait_tactic_snowball4
						add_trait = als_trait_tactic_snowball5
					}
					als_trait_tactic_snowball3 = {
						remove_trait = als_trait_tactic_snowball3
						add_trait = als_trait_tactic_snowball4
					}
					als_trait_tactic_snowball2 = {
						remove_trait = als_trait_tactic_snowball2
						add_trait = als_trait_tactic_snowball3
					}
					als_trait_tactic_snowball1 = {
						remove_trait = als_trait_tactic_snowball1
						add_trait = als_trait_tactic_snowball2
					}
					als_trait_tactic_snowball = {
						remove_trait = als_trait_tactic_snowball
						add_trait = als_trait_tactic_snowball1
					}
				}
				if = {
					limit = {
						root = {
							is_in_combat = no
						}
					}
					remove_leader_flag = als_admiral_has_tactic_snowball
					effect_als_snowball_cleanup = yes
					if = {
						limit = {
							has_leader_flag = als_admiral_own_snowball_expert
						}
						add_trait = als_trait_tactic_snowball_expert
					}
					else = {
						add_trait = als_trait_tactic_snowball
					}
				}
				set_cooldown = 15
				root = {
					fleet_event = { id = als.200 days = 15 }
				}
			}
			if = {
				limit = {
					has_leader_flag = als_admiral_has_tactic_snowball_expert
				}
				switch = {
					trigger = has_trait
					als_trait_tactic_snowball5_expert = {
						remove_trait = als_trait_tactic_snowball5_expert
						add_trait = als_trait_tactic_snowball6_expert
					}
					als_trait_tactic_snowball4_expert = {
						remove_trait = als_trait_tactic_snowball4_expert
						add_trait = als_trait_tactic_snowball5_expert
					}
					als_trait_tactic_snowball3_expert = {
						remove_trait = als_trait_tactic_snowball3_expert
						add_trait = als_trait_tactic_snowball4_expert
					}
					als_trait_tactic_snowball2_expert = {
						remove_trait = als_trait_tactic_snowball2_expert
						add_trait = als_trait_tactic_snowball3_expert
					}
					als_trait_tactic_snowball1_expert = {
						remove_trait = als_trait_tactic_snowball1_expert
						add_trait = als_trait_tactic_snowball2_expert
					}
					als_trait_tactic_snowball_expert = {
						remove_trait = als_trait_tactic_snowball_expert
						add_trait = als_trait_tactic_snowball1_expert
					}
				}
				if = {
					limit = {
						root = {
							is_in_combat = no
						}
					}
					remove_leader_flag = als_admiral_has_tactic_snowball_expert
					effect_als_snowball_cleanup = yes
					add_trait = als_trait_tactic_snowball_expert
				}
				set_cooldown = 15
				root = {
					fleet_event = { id = als.200 days = 15 }
				}
			}
			if = {
				limit = {
					OR = {
						has_leader_flag = als_admiral_has_tactic_surprise_attack_just_ftled
						has_leader_flag = als_admiral_has_tactic_surprise_attack_just_ftled_expert
					}
					exists = event_target:als_target_fleet_scope
					event_target:als_target_fleet_scope = {
						is_scope_type = fleet
					}
				}
				switch = {
					trigger = has_trait
					als_trait_tactic_surprise_attack = {
						event_target:als_target_fleet_scope = {
							if = {
								limit = {
									OR = {
										NOT = { exists = leader }
										leader = {
											NOT = {
												has_leader_flag = als_admiral_has_tactic_hyperliner_effect
											}
										}
									}
								}
								add_modifier = {
									modifier = als_tactic_surprise_attack_modifiers_1
									days = 30
								}
							}
						}
					}
					als_trait_tactic_surprise_attack_expert = {
						event_target:als_target_fleet_scope = {
							if = {
								limit = {
									OR = {
										NOT = { exists = leader }
										leader = {
											NOT = {
												has_leader_flag = als_admiral_has_tactic_hyperliner_effect
											}
										}
									}
								}
								add_modifier = {
									modifier = als_tactic_surprise_attack_modifiers_2
									days = 30
								}
							}
						}
					}
				}
			}
			
			if = {
				limit = {
					has_leader_flag = als_admiral_has_tactic_unpredictable
				}
				effect_als_unpredictable_cleanup = yes
				if = {
					limit = {
						root = {
							is_in_combat = no
						}
					}
					if = {
						limit = {
							has_leader_flag = als_admiral_own_unpredictable_expert
						}
						add_trait = als_trait_tactic_unpredictable_expert
					}
					else = {
						add_trait = als_trait_tactic_unpredictable
					}
					remove_leader_flag = als_admiral_has_tactic_unpredictable
				}
				else = {
					random_list = {
						1 = { add_trait = als_trait_tactic_unpredictable1 }
						1 = { add_trait = als_trait_tactic_unpredictable2 }
						1 = { add_trait = als_trait_tactic_unpredictable3 }
						1 = { add_trait = als_trait_tactic_unpredictable4 }
						1 = { add_trait = als_trait_tactic_unpredictable5 }
						1 = { add_trait = als_trait_tactic_unpredictable6 }
						1 = { add_trait = als_trait_tactic_unpredictable7 }
					}
					set_cooldown = 15
					root = {
						fleet_event = { id = als.200 days = 15 }
					}
				}
			}
			if = {
				limit = {
					has_leader_flag = als_admiral_has_tactic_unpredictable_expert
				}
				effect_als_unpredictable_cleanup = yes
				if = {
					limit = {
						root = {
							is_in_combat = no
						}
					}
					add_trait = als_trait_tactic_unpredictable_expert
					remove_leader_flag = als_admiral_has_tactic_unpredictable_expert
				}
				else = {
					random_list = {
						1 = { add_trait = als_trait_tactic_unpredictable1_expert }
						1 = { add_trait = als_trait_tactic_unpredictable2_expert }
						1 = { add_trait = als_trait_tactic_unpredictable3_expert }
						1 = { add_trait = als_trait_tactic_unpredictable4_expert }
						1 = { add_trait = als_trait_tactic_unpredictable5_expert }
						1 = { add_trait = als_trait_tactic_unpredictable6_expert }
						1 = { add_trait = als_trait_tactic_unpredictable7_expert }
					}
					set_cooldown = 15
					root = {
						fleet_event = { id = als.200 days = 15 }
					}
				}
			}
			effect_als_admiral_clean_general_tactic_flags = yes
			effect_als_refresh_admiral_traits = yes	
			effect_als_refresh_admiral_status = yes
		}
	}
}

#Add expertised tactic (trigger)

fleet_event = {
	id = als.250
	hide_window = yes

	trigger = {
		exists = leader
		is_in_combat = no
		leader = {
			NOT = {
				has_leader_flag = att_admiral_expertised_tactic_trait_fire_once
			}
			check_als_admiral_expert_tactic_flag = yes
			NOT = {
				check_als_admiral_has_experted_tactic_traits = yes
			}
		}
	}

	mean_time_to_happen = {
		days = 5
	}

	immediate = {
		leader = {
			if = {
				limit = {
					root = {
						is_in_combat = no
					}
					NOT = {
						has_leader_flag = att_admiral_expertised_tactic_trait_fire_once
					}
					check_als_admiral_expert_tactic_flag = yes
					NOT = {
						check_als_admiral_has_experted_tactic_traits = yes
					}
				}
				set_leader_flag = att_admiral_expertised_tactic_trait_fire_once
				effect_als_admiral_clean_all_tactic_flags = yes #in case of weird effect from als.200 happens
				effect_als_admiral_expertise_tactic_trait = yes
				effect_als_refresh_admiral_traits = yes	
				effect_als_refresh_admiral_status = yes
			}
		}
	}
}


###In case of leader failed to gain any strategy tactics
event = {
	id = als.301
	hide_window = yes
	is_triggered_only = yes
	trigger = {
		any_playable_country = {
			NOR = {
				is_country_type = swarm
				is_country_type = extradimensional
				is_country_type = extradimensional_2
				is_country_type = extradimensional_3
				is_country_type = ai_empire
				is_country_type = cybrex_empire 
				is_country_type = dormant_marauders 
				is_country_type = ruined_marauders
				is_country_type = awakened_marauders
				is_country_type = fallen_empire
				is_country_type = awakened_fallen_empire
			}
			any_owned_leader = {
				leader_class = admiral
				NOR = {
					has_leader_flag = als_admiral_has_strategy_traits
					has_leader_flag = als_admiral_has_tactic_traits
				}
			}
		}
	}
	immediate = {
		every_playable_country = {
			limit = {
				NOR = {
					is_country_type = swarm
					is_country_type = extradimensional
					is_country_type = extradimensional_2
					is_country_type = extradimensional_3
					is_country_type = ai_empire
					is_country_type = cybrex_empire 
					is_country_type = dormant_marauders 
					is_country_type = ruined_marauders
					is_country_type = awakened_marauders
					is_country_type = fallen_empire
					is_country_type = awakened_fallen_empire
				}
			}
			save_event_target_as = als_country
			every_owned_leader = {
				limit = {
					leader_class = admiral
					NOR = {
						has_leader_flag = als_admiral_has_strategy_traits
						has_leader_flag = als_admiral_has_tactic_traits
					}
				}
				random_list = {
					15 = { #strategy
						modifier = {
							factor = 0
							leader = {
								has_trait = leader_trait_tactician
							}
						}
						set_leader_flag = als_admiral_has_strategy_traits
						random_list = {
							1 = {
								add_trait = als_trait_strategic_energy
							}
							1 = {
								add_trait = als_trait_strategic_explosive
							}
							1 = {
								add_trait = als_trait_strategic_kinetic
							}
							1 = {
								add_trait = als_trait_strategic_point_defense
							}
							1 = {
								add_trait = als_trait_strategic_strike_craft
							}
							1 = {
								add_trait = als_trait_strategic_artillery
							}
							1 = {
								add_trait = als_trait_strategic_anti_hull
							}
							1 = {
								add_trait = als_trait_strategic_anti_armor
							}
							1 = {
								add_trait = als_trait_strategic_anti_shield
							}
						}
					}
					10 = {
						modifier = {
							factor = 0
							leader = {
								has_trait = leader_trait_strategist
							}
						}
						set_leader_flag = als_admiral_has_tactic_traits
						effect_als_tactic_set = yes
					}
				}
			}
		}
	}
}

event = {
	id = als.1000
	hide_window = yes
	is_triggered_only = yes
	immediate = {
		every_playable_country = {
			every_owned_leader = {
				limit = {
					leader_class = admiral
				}
				set_skill = 10
			}
		}
	}
}

country_event = {
	id = als.2345
	title = als.2345.title
	desc = als.2345.desc
	picture = GFX_evt_als_star_wars_weapons
	show_sound = event_ship_thrusters
	is_triggered_only = yes
	fire_only_once = yes
	option = {
		name = als.2345.a
		custom_tooltip = als.2345.tooltip
	}
}