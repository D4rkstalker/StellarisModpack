############################
#
# The Infestation Game Start Events
#
# Written by Annatar
#
############################

namespace = theinfestation_game_start

### Start message and sets global flag “has_the_infestation_mod”
event = {
	id = theinfestation_game_start.1
	hide_window = yes
	is_triggered_only = yes
	
	immediate = {
		set_global_flag = "has_the_infestation_mod"
	}
}

#Starting Gatekeeper
event = {
	id = theinfestation_game_start.2
	hide_window = yes
	is_triggered_only = yes
	
	trigger = {
		NOT = { any_playable_country = { has_origin = origin_exomycosis } }
	}

	immediate = {
		random_system = {
			limit = {
				solar_system = {
					AND = {
						exists = space_owner
						space_owner = {
							NOT = { is_country_type = fallen_empire }
							NOT = { is_country_type = awakened_fallen_empire }
						}
					}
				}
			}
			system_event = { id = theinfestation_game_start.3 days = 3600 random = 1800 }
		}
	}
}

#Spawn Exomycosis Original System
system_event = {
	id = theinfestation_game_start.3
	hide_window = yes
	is_triggered_only = yes

	immediate = {
		spawn_system = {
			min_distance >= 50
			max_distance <= 100
			initializer = exomycosis_init_01
			hyperlane = yes
		}
	}
}

#Origin Start
event = {
	id = theinfestation_game_start.4
	hide_window = yes
	is_triggered_only = yes
	
	trigger = {
		any_playable_country = { has_origin = origin_exomycosis }
	}

	immediate = {
		#Exomycosis
		random_country = {
			limit = { has_origin = origin_exomycosis }
			capital_scope = {
				set_planet_flag = original_exomycosis_planet
				add_theinfestation_starting_deposits = yes
			}
		}
	}
}