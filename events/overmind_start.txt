namespace = complex_overmind

#overmind start
# set all the living standards
country_event = {
	id = complex_overmind.1
	hide_window = yes
	is_triggered_only = yes

	immediate = {
		
			
		if = { limit = { owner = { has_valid_civic = civic_hive_overmind } }
	
	random_owned_pop = {
	limit = { species = { has_species_flag = overminded_flag } } 
	 
				set_citizenship_type = {
					country = root.owner
					type = citizenship_full
				}		
				
				set_living_standard = {
					country = root.owner
					type = living_standard_hive_mind
				}
				
				set_migration_controls = {
				country = root.owner
				type = no
				}
				set_population_controls = {
				country = root.owner
				type = no
				}
					
	
				
			}


			}
	
	
	
		}
	}

planet_event = {
	id = complex_overmind.2
	hide_window = yes
	is_triggered_only = yes

	immediate = {
		if = { ## thriving prey
		limit = {
		owner = {
				has_civic = civic_hive_overmind
				}
		}

		## clear everything out
		every_deposit = {
				limit = {is_deposit_type = d_hibernating_lithoids}
				remove_deposit = yes
				##add_deposit = d_hibernating_lithoids_remote
			}
		
		every_deposit = {
				limit = {is_deposit_type = d_collapsed_burrows}
				remove_deposit = yes
				##add_deposit = d_collapsed_burrows_remote
			}

## create for remote drones
		random_owned_pop = {
			limit = { species = { has_species_flag = overminded_flag } } 
			species = { save_event_target_as = overminded_species }
			}	
			
		if = {limit = { event_target:overminded_species = { is_lithoid = yes}}
		while = {
			count = 4
			add_deposit = d_hibernating_lithoids_remote
		}
		if = {limit = {  owner_species = { is_lithoid = no } }
			## remove default districts and rebuild them based on overminded pop		
			remove_district = district_farming
			remove_district = district_farming
			add_district = district_mining
			add_district = district_mining
			owner = { add_modifier = {   modifier = overmind_lithoids  days = -1 } }
			owner = { add_resource = { food = -200 } }
			owner = { add_resource = { minerals = 200 } }
		}

		
		
		}
		else = {
		if = {limit = {  owner_species = { is_lithoid = yes } }
			## remove default districts and rebuild them based on overminded pop		
			add_district = district_farming
			add_district = district_farming
			remove_district = district_mining
			remove_district = district_mining
			## what about base resources
			owner = { add_modifier = {   modifier = overmind_biological  days = -1 } }
			owner = { add_resource = { minerals = -200 } }
			owner = { add_resource = { food = 200 } }
			
		}
		add_deposit = d_collapsed_burrows_remote
		
		}

	}
  }
}