namespace = legw_spawn_event

# Spawn Legendary Modifiers
# on habitalbe planets according to list
planet_event = {
	id = legw_spawn_event.0
	hide_window = yes
	is_triggered_only = yes
	
	immediate = {
		if = {
			limit = {
				NOR = {
					num_modifiers > 2
					has_planet_flag = "apsr_planet"
					has_planet_flag = forbid_guillis_planet_modifiers
				}
			} #avoid too much modifier-stacking
			random_list = { #changing this can result in crazy values
				72 = {}
				15 = { 
					legw_add_modifier_common = yes
				}
				9 = { #9
					legw_add_modifier_rare = yes 
				}
				4 = {
					legw_add_modifier_true = yes 
				}
			}
			random_list = { #changing this can result in crazy values
				62 = {}
				38 = {  #38
					legw_add_modifier_special = yes 
				}
			}
		}
	}
}

# Event for Primitive Planets
planet_event = {
	id = legw_spawn_event.1
	hide_window = yes
	is_triggered_only = yes
	
	# TESTING NEW
	trigger = {
		owner = {
			is_country_type = primitive
		}
	}
	
	immediate = {
			
				random_list = {
					1 = {}
					99 = { 
						legw_add_primitive = yes 
					}
				}
			
	}
}

# Event for fallen empire buffs
planet_event = {
	id = legw_spawn_event.5
	hide_window = yes
	is_triggered_only = yes
	
	immediate = {
		if = {
			limit = {
				NOR = {
					num_modifiers > 2
					has_planet_flag = "apsr_planet"
					has_planet_flag = forbid_guillis_planet_modifiers
					has_legw_modifier = yes
				}
			} #avoid too much modifier-stacking
			random_list = { #change values in legw_other using variables
				80 = {
					legw_add_modifier_fallen = yes
				}
				20 = {
					legw_add_modifier_fallen_big = yes
				}
			}

		}
	}
}

# Event for Non-habitable Planets
# on inhabitable planets/stars/asteroids
planet_event = {
	id = legw_spawn_event.2
	hide_window = yes
	is_triggered_only = yes
	
	immediate = {
			
				random_list = {
					0 = {}
					50 = { 
						legw_add_station = yes #is for treasure now
					}
					50 = {}
				}
			
	}
}

# Event for placing random lost buildings
# on every habitable planet according to list
# replaced by modifier and add building events
# planet_event = {
# 	id = legw_spawn_event.3
# 	hide_window = yes
# 	is_triggered_only = yes
	
# 	immediate = {
			
# 				random_list = {
# 					0 = {}
# 					100 = { 
# 						legw_add_building = yes
# 					}
# 					0 = {}
# 				}
			
# 	}
# }

# Event for Megastructure Planets
planet_event = {
	id = legw_spawn_event.4
	hide_window = yes
	is_triggered_only = yes
	
	immediate = {
		if = {
			limit = {
				NOR = {
					has_planet_flag = "legw_no_megabuff"
					has_planet_flag = "apsr_planet"
				}
			}
			random_list = {
				9= {
					set_planet_flag = "legw_no_megabuff" #planet can never get leg
				} 
				90 = { 
					legw_add_mega_all = yes 
				}
				1 = {} 
			}
		}	
	}
}

# Event for Megastructure Planets
planet_event = {
	id = legw_spawn_event.44
	hide_window = yes
	is_triggered_only = yes
	
	immediate = {
		if = {
			limit = {
				NOR = {
					has_planet_flag = "legw_no_megabuff"
					has_planet_flag = "apsr_planet"
				}
			}
			# small chances because of yearly pulse
			random_list = {
				30 = {
					set_planet_flag = "legw_no_megabuff" #avoids planets to be checked forever
				} 
				30 = { 
					legw_add_mega = yes 
				}
				40 = {} 
			}
		}	
	}
}

# Event for Origin Ancient Start
planet_event = {
	id = legw_spawn_event.7
	hide_window = yes
	is_triggered_only = yes
	
	immediate = {
		legw_tombstart = yes		
	}
}

planet_event = {
	id = legw_spawn_event.8
	hide_window = yes
	is_triggered_only = yes
	
	immediate = {
		legw_tombstart_hw = yes		
	}
}

planet_event = {
	id = legw_spawn_event.9
	hide_window = yes
	is_triggered_only = yes
	
	immediate = {
		legw_tombstart_deposits = yes		
	}
}