namespace = agencyNeighbors

country_event = {
    id = agencyNeighbors.1
    is_triggered_only = yes
    hide_window = yes

    immediate = { #LOOPS THROUGH ALL POTENTIAL TARGET COUNTRIES, ASSIGNS FLAGS TO THOSE WITHOUT FOR SELECTION
        save_event_target_as = playerAgency
        random_country = {
            limit = {
                neighborCountryFilter = yes
            }
            save_event_target_as = possibleAgencyTarget_1
        }
        random_country = {
            limit = {
                neighborCountryFilter = yes
            }
            save_event_target_as = possibleAgencyTarget_2
        }
        random_country = {
            limit = {
                neighborCountryFilter = yes
            }
            save_event_target_as = possibleAgencyTarget_3
        }
        random_country = {
            limit = {
                neighborCountryFilter = yes
            }
            save_event_target_as = possibleAgencyTarget_4
        }
        random_country = {
            limit = {
                neighborCountryFilter = yes
            }
            save_event_target_as = possibleAgencyTarget_5
        }
        random_country = {
            limit = {
                neighborCountryFilter = yes
            }
            save_event_target_as = possibleAgencyTarget_6
        }
        random_country = {
            limit = {
                neighborCountryFilter = yes
            }
            save_event_target_as = possibleAgencyTarget_7
        }
        random_country = {
            limit = {
                neighborCountryFilter = yes
            }
            save_event_target_as = possibleAgencyTarget_8
        }
        random_country = {
            limit = {
                neighborCountryFilter = yes
            }
            save_event_target_as = possibleAgencyTarget_9
        }
        random_country = {
            limit = {
                neighborCountryFilter = yes
            }
            save_event_target_as = possibleAgencyTarget_10
        }
        random_country = {
            limit = {
                neighborCountryFilter = yes
            }
            save_event_target_as = possibleAgencyTarget_11
        }
        random_country = {
            limit = {
                neighborCountryFilter = yes
            }
            save_event_target_as = possibleAgencyTarget_12
        }
        random_country = {
            limit = {
                neighborCountryFilter = yes
            }
            save_event_target_as = possibleAgencyTarget_13
        }
        random_country = {
            limit = {
                neighborCountryFilter = yes
            }
            save_event_target_as = possibleAgencyTarget_14
        }
        random_country = {
            limit = {
                neighborCountryFilter = yes
            }
            save_event_target_as = possibleAgencyTarget_15
        }
        random_country = {
            limit = {
                neighborCountryFilter = yes
            }
            save_event_target_as = possibleAgencyTarget_16
        }
        random_country = {
            limit = {
                neighborCountryFilter = yes
            }
            save_event_target_as = possibleAgencyTarget_17
        }
        random_country = {
            limit = {
                neighborCountryFilter = yes
            }
            save_event_target_as = possibleAgencyTarget_18
        }
        random_country = {
            limit = {
                neighborCountryFilter = yes
            }
            save_event_target_as = possibleAgencyTarget_19
        }
        random_country = {
            limit = {
                neighborCountryFilter = yes
            }
            save_event_target_as = possibleAgencyTarget_20
        }
        random_country = {
            limit = {
                neighborCountryFilter = yes
            }
            save_event_target_as = possibleAgencyTarget_21
        }
        random_country = {
            limit = {
                neighborCountryFilter = yes
            }
            save_event_target_as = possibleAgencyTarget_22
        }
        random_country = {
            limit = {
                neighborCountryFilter = yes
            }
            save_event_target_as = possibleAgencyTarget_23
        }
        random_country = {
            limit = {
                neighborCountryFilter = yes
            }
            save_event_target_as = possibleAgencyTarget_24
        }
        random_country = {
            limit = {
                neighborCountryFilter = yes
            }
            save_event_target_as = possibleAgencyTarget_25
        }
        random_country = {
            limit = {
                neighborCountryFilter = yes
            }
            save_event_target_as = possibleAgencyTarget_26
        }
        random_country = {
            limit = {
                neighborCountryFilter = yes
            }
            save_event_target_as = possibleAgencyTarget_27
        }
        random_country = {
            limit = {
                neighborCountryFilter = yes
            }
            save_event_target_as = possibleAgencyTarget_28
        }
        random_country = {
            limit = {
                neighborCountryFilter = yes
            }
            save_event_target_as = possibleAgencyTarget_29
        }
        random_country = {
            limit = {
                neighborCountryFilter = yes
            }
            save_event_target_as = possibleAgencyTarget_30
        }
        random_country = {
            limit = {
                neighborCountryFilter = yes
            }
            save_event_target_as = possibleAgencyTarget_31
        }
        random_country = {
            limit = {
                neighborCountryFilter = yes
            }
            save_event_target_as = possibleAgencyTarget_32
        }
        random_country = {
            limit = {
                neighborCountryFilter = yes
            }
            save_event_target_as = possibleAgencyTarget_33
        }
        random_country = {
            limit = {
                neighborCountryFilter = yes
            }
            save_event_target_as = possibleAgencyTarget_34
        }
        random_country = {
            limit = {
                neighborCountryFilter = yes
            }
            save_event_target_as = possibleAgencyTarget_35
        }
        random_country = {
            limit = {
                neighborCountryFilter = yes
            }
            save_event_target_as = possibleAgencyTarget_36
        }
        random_country = {
            limit = {
                neighborCountryFilter = yes
            }
            save_event_target_as = possibleAgencyTarget_37
        }
        random_country = {
            limit = {
                neighborCountryFilter = yes
            }
            save_event_target_as = possibleAgencyTarget_38
        }
        random_country = {
            limit = {
                neighborCountryFilter = yes
            }
            save_event_target_as = possibleAgencyTarget_39
        }
        random_country = {
            limit = {
                neighborCountryFilter = yes
            }
            save_event_target_as = possibleAgencyTarget_40
        }
        random_country = {
            limit = {
                neighborCountryFilter = yes
            }
            save_event_target_as = possibleAgencyTarget_41
        }
        random_country = {
            limit = {
                neighborCountryFilter = yes
            }
            save_event_target_as = possibleAgencyTarget_42
        }
        random_country = {
            limit = {
                neighborCountryFilter = yes
            }
            save_event_target_as = possibleAgencyTarget_43
        }
        random_country = {
            limit = {
                neighborCountryFilter = yes
            }
            save_event_target_as = possibleAgencyTarget_44
        }
        random_country = {
            limit = {
                neighborCountryFilter = yes
            }
            save_event_target_as = possibleAgencyTarget_45
        }
        random_country = {
            limit = {
                neighborCountryFilter = yes
            }
            save_event_target_as = possibleAgencyTarget_46
        }
        random_country = {
            limit = {
                neighborCountryFilter = yes
            }
            save_event_target_as = possibleAgencyTarget_47
        }
        random_country = {
            limit = {
                neighborCountryFilter = yes
            }
            save_event_target_as = possibleAgencyTarget_48
        }
        random_country = {
            limit = {
                neighborCountryFilter = yes
            }
            save_event_target_as = possibleAgencyTarget_49
        }
        random_country = {
            limit = {
                neighborCountryFilter = yes
            }
            save_event_target_as = possibleAgencyTarget_50
        }
        random_country = {
            limit = {
                neighborCountryFilter = yes
            }
            save_event_target_as = possibleAgencyTarget_51
        }
        random_country = {
            limit = {
                neighborCountryFilter = yes
            }
            save_event_target_as = possibleAgencyTarget_52
        }
        random_country = {
            limit = {
                neighborCountryFilter = yes
            }
            save_event_target_as = possibleAgencyTarget_53
        }
        random_country = {
            limit = {
                neighborCountryFilter = yes
            }
            save_event_target_as = possibleAgencyTarget_54
        }
        random_country = {
            limit = {
                neighborCountryFilter = yes
            }
            save_event_target_as = possibleAgencyTarget_55
        }

        country_event = {
            id = agencyNeighbors.3
        }
    }
}











country_event = { #Give list of country names to pick from
    id = agencyNeighbors.3
    title = agencyNeighborslist.title
    desc = agencyNeighborslist.desc
    is_triggered_only = yes
    picture_event_data = {
		portrait = event_target:playerAgency
		room = default_room
	} 
    custom_gui = quibble_spy_window
    diplomatic = yes

    immediate = {
        save_event_target_as = player_Agency
    }

    option = {
        name = agencyNeighborslistOption.1
        custom_gui = quibble_spy_option
        trigger = { exists = event_target:possibleAgencyTarget_1 } #Checks to see if event target exists
        allow = { 
            custom_tooltip = { fail_text = "spyBanned_tooltip" not = { has_relation_flag = { who = event_target:possibleAgencyTarget_1 flag = spy_banned } } } 
            custom_tooltip = { fail_text = "spyFedLaw_tooltip" 
                nand = {
                    is_in_federation_with = event_target:possibleAgencyTarget_1
                    federation = {
                        has_federation_law = spy_regulated_espionage
                    }
                }
            }
        }
            
        hidden_effect = {
            if = {
                limit = {
                    has_country_flag = agencyBetaF
                }
                event_target:possibleAgencyTarget_1 = { 
                    save_event_target_as = possibleBetaTarget_Final
                }    
            }
            else = {
                event_target:possibleAgencyTarget_1 = { 
                    save_event_target_as = possibleAlphaTarget_Final 
                }
            }
            country_event = { id = agencyNeighbors.4 }
        }
    }
    
    option = {
		name = agencyNeighborslistOption.2
        trigger = { exists = event_target:possibleAgencyTarget_2 } #Checks to see if event target exists
        allow = { 
            custom_tooltip = { fail_text = "spyBanned_tooltip" not = { has_relation_flag = { who = event_target:possibleAgencyTarget_2 flag = spy_banned } } } 
            custom_tooltip = { fail_text = "spyFedLaw_tooltip" 
                nand = {
                    is_in_federation_with = event_target:possibleAgencyTarget_2
                    federation = {
                        has_federation_law = spy_regulated_espionage
                    }
                }
            }
        }
        hidden_effect = {
            if = {
                limit = {
                    has_country_flag = agencyBetaF
                }
                event_target:possibleAgencyTarget_2 = { 
                    save_event_target_as = possibleBetaTarget_Final
                }    
            }
            else = {
                event_target:possibleAgencyTarget_2 = { 
                    save_event_target_as = possibleAlphaTarget_Final 
                }
            }
            country_event = { id = agencyNeighbors.4 }
        }
    }
    
    option = {
		name = agencyNeighborslistOption.3
        trigger = { exists = event_target:possibleAgencyTarget_3 } #Checks to see if event target exists
        allow = { custom_tooltip = { fail_text = "spyBanned_tooltip" not = { has_relation_flag = { who = event_target:possibleAgencyTarget_3 flag = spy_banned } } } 
        custom_tooltip = { fail_text = "spyFedLaw_tooltip" 
                nand = {
                    is_in_federation_with = event_target:possibleAgencyTarget_3
                    federation = {
                        has_federation_law = spy_regulated_espionage
                    }
                }
            }
        }
        hidden_effect = {
            if = {
                limit = {
                    has_country_flag = agencyBetaF
                }
                event_target:possibleAgencyTarget_3 = { 
                    save_event_target_as = possibleBetaTarget_Final
                }    
            }
            else = {
                event_target:possibleAgencyTarget_3 = { 
                    save_event_target_as = possibleAlphaTarget_Final 
                }
            }
            country_event = { id = agencyNeighbors.4 }
        }
	}

    option = {
		name = agencyNeighborslistOption.4
        trigger = { exists = event_target:possibleAgencyTarget_4 } #Checks to see if event target exists
        allow = { custom_tooltip = { fail_text = "spyBanned_tooltip" not = { has_relation_flag = { who = event_target:possibleAgencyTarget_4 flag = spy_banned } } } 
        custom_tooltip = { fail_text = "spyFedLaw_tooltip" 
                nand = {
                    is_in_federation_with = event_target:possibleAgencyTarget_4
                    federation = {
                        has_federation_law = spy_regulated_espionage
                    }
                }
            }
        }
        hidden_effect = {
            if = {
                limit = {
                    has_country_flag = agencyBetaF
                }
                event_target:possibleAgencyTarget_4 = { 
                    save_event_target_as = possibleBetaTarget_Final
                }    
            }
            else = {
                event_target:possibleAgencyTarget_4 = { 
                    save_event_target_as = possibleAlphaTarget_Final 
                }
            }
            country_event = { id = agencyNeighbors.4 }
        }
	}
    
    option = {
		name = agencyNeighborslistOption.5
        trigger = { exists = event_target:possibleAgencyTarget_5 } #Checks to see if event target exists
        allow = { custom_tooltip = { fail_text = "spyBanned_tooltip" not = { has_relation_flag = { who = event_target:possibleAgencyTarget_5 flag = spy_banned } } }
        custom_tooltip = { fail_text = "spyFedLaw_tooltip" 
                nand = {
                    is_in_federation_with = event_target:possibleAgencyTarget_5
                    federation = {
                        has_federation_law = spy_regulated_espionage
                    }
                }
            }
        }
        hidden_effect = {
            if = {
                limit = {
                    has_country_flag = agencyBetaF
                }
                event_target:possibleAgencyTarget_5 = { 
                    save_event_target_as = possibleBetaTarget_Final
                }    
            }
            else = {
                event_target:possibleAgencyTarget_5 = { 
                    save_event_target_as = possibleAlphaTarget_Final 
                }
            }
            country_event = { id = agencyNeighbors.4 }
        }
	}

    option = {
		name = agencyNeighborslistOption.6
        trigger = { exists = event_target:possibleAgencyTarget_6 } #Checks to see if event target exists
        allow = { custom_tooltip = { fail_text = "spyBanned_tooltip" not = { has_relation_flag = { who = event_target:possibleAgencyTarget_6 flag = spy_banned } } } 
        custom_tooltip = { fail_text = "spyFedLaw_tooltip" 
                nand = {
                    is_in_federation_with = event_target:possibleAgencyTarget_6
                    federation = {
                        has_federation_law = spy_regulated_espionage
                    }
                }
            }
        }
        hidden_effect = {
            if = {
                limit = {
                    has_country_flag = agencyBetaF
                }
                event_target:possibleAgencyTarget_6 = { 
                    save_event_target_as = possibleBetaTarget_Final
                }    
            }
            else = {
                event_target:possibleAgencyTarget_6 = { 
                    save_event_target_as = possibleAlphaTarget_Final 
                }
            }
            country_event = { id = agencyNeighbors.4 }
        }
	}

    option = {
		name = agencyNeighborslistOption.7
        trigger = { exists = event_target:possibleAgencyTarget_7 } #Checks to see if event target exists
        allow = { custom_tooltip = { fail_text = "spyBanned_tooltip" not = { has_relation_flag = { who = event_target:possibleAgencyTarget_7 flag = spy_banned } } } 
        custom_tooltip = { fail_text = "spyFedLaw_tooltip" 
                nand = {
                    is_in_federation_with = event_target:possibleAgencyTarget_7
                    federation = {
                        has_federation_law = spy_regulated_espionage
                    }
                }
            }
        }
        hidden_effect = {
            if = {
                limit = {
                    has_country_flag = agencyBetaF
                }
                event_target:possibleAgencyTarget_7 = { 
                    save_event_target_as = possibleBetaTarget_Final
                }    
            }
            else = {
                event_target:possibleAgencyTarget_7 = { 
                    save_event_target_as = possibleAlphaTarget_Final 
                }
            }
            country_event = { id = agencyNeighbors.4 }
        }
	}

    option = {
		name = agencyNeighborslistOption.8
        trigger = { exists = event_target:possibleAgencyTarget_8 } #Checks to see if event target exists
        allow = { custom_tooltip = { fail_text = "spyBanned_tooltip" not = { has_relation_flag = { who = event_target:possibleAgencyTarget_8 flag = spy_banned } } } 
        custom_tooltip = { fail_text = "spyFedLaw_tooltip" 
                nand = {
                    is_in_federation_with = event_target:possibleAgencyTarget_8
                    federation = {
                        has_federation_law = spy_regulated_espionage
                    }
                }
            }
        }
        hidden_effect = {
            if = {
                limit = {
                    has_country_flag = agencyBetaF
                }
                event_target:possibleAgencyTarget_8 = { 
                    save_event_target_as = possibleBetaTarget_Final
                }    
            }
            else = {
                event_target:possibleAgencyTarget_8 = { 
                    save_event_target_as = possibleAlphaTarget_Final 
                }
            }
            country_event = { id = agencyNeighbors.4 }
        }
	}

    option = {
		name = agencyNeighborslistOption.9
        trigger = { exists = event_target:possibleAgencyTarget_9 } #Checks to see if event target exists
        allow = { custom_tooltip = { fail_text = "spyBanned_tooltip" not = { has_relation_flag = { who = event_target:possibleAgencyTarget_9 flag = spy_banned } } } 
        custom_tooltip = { fail_text = "spyFedLaw_tooltip" 
                nand = {
                    is_in_federation_with = event_target:possibleAgencyTarget_9
                    federation = {
                        has_federation_law = spy_regulated_espionage
                    }
                }
            }
        }
        hidden_effect = {
            if = {
                limit = {
                    has_country_flag = agencyBetaF
                }
                event_target:possibleAgencyTarget_9 = { 
                    save_event_target_as = possibleBetaTarget_Final
                }    
            }
            else = {
                event_target:possibleAgencyTarget_9 = { 
                    save_event_target_as = possibleAlphaTarget_Final 
                }
            }
            country_event = { id = agencyNeighbors.4 }
        }
	}

    option = {
		name = agencyNeighborslistOption.10
        trigger = { exists = event_target:possibleAgencyTarget_10 } #Checks to see if event target exists
        allow = { custom_tooltip = { fail_text = "spyBanned_tooltip" not = { has_relation_flag = { who = event_target:possibleAgencyTarget_10 flag = spy_banned } } } 
        custom_tooltip = { fail_text = "spyFedLaw_tooltip" 
                nand = {
                    is_in_federation_with = event_target:possibleAgencyTarget_10
                    federation = {
                        has_federation_law = spy_regulated_espionage
                    }
                }
            }
        }
        hidden_effect = {
            if = {
                limit = {
                    has_country_flag = agencyBetaF
                }
                event_target:possibleAgencyTarget_10 = { 
                    save_event_target_as = possibleBetaTarget_Final
                }    
            }
            else = {
                event_target:possibleAgencyTarget_10 = { 
                    save_event_target_as = possibleAlphaTarget_Final 
                }
            }
            country_event = { id = agencyNeighbors.4 }
        }
	}
    option = {
		name = agencyNeighborslistOption.11
        trigger = { exists = event_target:possibleAgencyTarget_11 } #Checks to see if event target exists
        allow = { custom_tooltip = { fail_text = "spyBanned_tooltip" not = { has_relation_flag = { who = event_target:possibleAgencyTarget_11 flag = spy_banned } } } 
        custom_tooltip = { fail_text = "spyFedLaw_tooltip" 
                nand = {
                    is_in_federation_with = event_target:possibleAgencyTarget_11
                    federation = {
                        has_federation_law = spy_regulated_espionage
                    }
                }
            }
        }
        hidden_effect = {
            if = {
                limit = {
                    has_country_flag = agencyBetaF
                }
                event_target:possibleAgencyTarget_11 = { 
                    save_event_target_as = possibleBetaTarget_Final
                }    
            }
            else = {
                event_target:possibleAgencyTarget_11 = { 
                    save_event_target_as = possibleAlphaTarget_Final 
                }
            }
            country_event = { id = agencyNeighbors.4 }
        }
	}
    option = {
		name = agencyNeighborslistOption.12
        trigger = { exists = event_target:possibleAgencyTarget_12 } #Checks to see if event target exists
        allow = { custom_tooltip = { fail_text = "spyBanned_tooltip" not = { has_relation_flag = { who = event_target:possibleAgencyTarget_12 flag = spy_banned } } } 
        custom_tooltip = { fail_text = "spyFedLaw_tooltip" 
                nand = {
                    is_in_federation_with = event_target:possibleAgencyTarget_12
                    federation = {
                        has_federation_law = spy_regulated_espionage
                    }
                }
            }
        }
        hidden_effect = {
            if = {
                limit = {
                    has_country_flag = agencyBetaF
                }
                event_target:possibleAgencyTarget_12 = { 
                    save_event_target_as = possibleBetaTarget_Final
                }    
            }
            else = {
                event_target:possibleAgencyTarget_12 = { 
                    save_event_target_as = possibleAlphaTarget_Final 
                }
            }
            country_event = { id = agencyNeighbors.4 }
        }
	}
    option = {
		name = agencyNeighborslistOption.13
        trigger = { exists = event_target:possibleAgencyTarget_13 } #Checks to see if event target exists
        allow = { custom_tooltip = { fail_text = "spyBanned_tooltip" not = { has_relation_flag = { who = event_target:possibleAgencyTarget_13 flag = spy_banned } } } 
        custom_tooltip = { fail_text = "spyFedLaw_tooltip" 
                nand = {
                    is_in_federation_with = event_target:possibleAgencyTarget_13
                    federation = {
                        has_federation_law = spy_regulated_espionage
                    }
                }
            }
        }
        hidden_effect = {
            if = {
                limit = {
                    has_country_flag = agencyBetaF
                }
                event_target:possibleAgencyTarget_13 = { 
                    save_event_target_as = possibleBetaTarget_Final
                }    
            }
            else = {
                event_target:possibleAgencyTarget_13 = { 
                    save_event_target_as = possibleAlphaTarget_Final 
                }
            }
            country_event = { id = agencyNeighbors.4 }
        }
	}
    option = {
		name = agencyNeighborslistOption.14
        trigger = { exists = event_target:possibleAgencyTarget_14 } #Checks to see if event target exists
        allow = { custom_tooltip = { fail_text = "spyBanned_tooltip" not = { has_relation_flag = { who = event_target:possibleAgencyTarget_14 flag = spy_banned } } } 
        custom_tooltip = { fail_text = "spyFedLaw_tooltip" 
                nand = {
                    is_in_federation_with = event_target:possibleAgencyTarget_14
                    federation = {
                        has_federation_law = spy_regulated_espionage
                    }
                }
            }
        }
        hidden_effect = {
            if = {
                limit = {
                    has_country_flag = agencyBetaF
                }
                event_target:possibleAgencyTarget_14 = { 
                    save_event_target_as = possibleBetaTarget_Final
                }    
            }
            else = {
                event_target:possibleAgencyTarget_14 = { 
                    save_event_target_as = possibleAlphaTarget_Final 
                }
            }
            country_event = { id = agencyNeighbors.4 }
        }
	}
    option = {
		name = agencyNeighborslistOption.15
        trigger = { exists = event_target:possibleAgencyTarget_15 } #Checks to see if event target exists
        allow = { custom_tooltip = { fail_text = "spyBanned_tooltip" not = { has_relation_flag = { who = event_target:possibleAgencyTarget_15 flag = spy_banned } } } 
        custom_tooltip = { fail_text = "spyFedLaw_tooltip" 
                nand = {
                    is_in_federation_with = event_target:possibleAgencyTarget_15
                    federation = {
                        has_federation_law = spy_regulated_espionage
                    }
                }
            }
        }
        hidden_effect = {
            if = {
                limit = {
                    has_country_flag = agencyBetaF
                }
                event_target:possibleAgencyTarget_15 = { 
                    save_event_target_as = possibleBetaTarget_Final
                }    
            }
            else = {
                event_target:possibleAgencyTarget_15 = { 
                    save_event_target_as = possibleAlphaTarget_Final 
                }
            }
            country_event = { id = agencyNeighbors.4 }
        }
	}
    option = {
		name = agencyNeighborslistOption.16
        trigger = { exists = event_target:possibleAgencyTarget_16 } #Checks to see if event target exists
        allow = { custom_tooltip = { fail_text = "spyBanned_tooltip" not = { has_relation_flag = { who = event_target:possibleAgencyTarget_16 flag = spy_banned } } } 
        custom_tooltip = { fail_text = "spyFedLaw_tooltip" 
                nand = {
                    is_in_federation_with = event_target:possibleAgencyTarget_16
                    federation = {
                        has_federation_law = spy_regulated_espionage
                    }
                }
            }
        }
        hidden_effect = {
            if = {
                limit = {
                    has_country_flag = agencyBetaF
                }
                event_target:possibleAgencyTarget_16 = { 
                    save_event_target_as = possibleBetaTarget_Final
                }    
            }
            else = {
                event_target:possibleAgencyTarget_16 = { 
                    save_event_target_as = possibleAlphaTarget_Final 
                }
            }
            country_event = { id = agencyNeighbors.4 }
        }
	}
    option = {
		name = agencyNeighborslistOption.17
        trigger = { exists = event_target:possibleAgencyTarget_17 } #Checks to see if event target exists
        allow = { custom_tooltip = { fail_text = "spyBanned_tooltip" not = { has_relation_flag = { who = event_target:possibleAgencyTarget_17 flag = spy_banned } } } 
        custom_tooltip = { fail_text = "spyFedLaw_tooltip" 
                nand = {
                    is_in_federation_with = event_target:possibleAgencyTarget_17
                    federation = {
                        has_federation_law = spy_regulated_espionage
                    }
                }
            }
        }
        hidden_effect = {
            if = {
                limit = {
                    has_country_flag = agencyBetaF
                }
                event_target:possibleAgencyTarget_17 = { 
                    save_event_target_as = possibleBetaTarget_Final
                }    
            }
            else = {
                event_target:possibleAgencyTarget_17 = { 
                    save_event_target_as = possibleAlphaTarget_Final 
                }
            }
            country_event = { id = agencyNeighbors.4 }
        }
	}
    option = {
		name = agencyNeighborslistOption.18
        trigger = { exists = event_target:possibleAgencyTarget_18 } #Checks to see if event target exists
        allow = { custom_tooltip = { fail_text = "spyBanned_tooltip" not = { has_relation_flag = { who = event_target:possibleAgencyTarget_18 flag = spy_banned } } } 
        custom_tooltip = { fail_text = "spyFedLaw_tooltip" 
                nand = {
                    is_in_federation_with = event_target:possibleAgencyTarget_18
                    federation = {
                        has_federation_law = spy_regulated_espionage
                    }
                }
            }
        }
        hidden_effect = {
            if = {
                limit = {
                    has_country_flag = agencyBetaF
                }
                event_target:possibleAgencyTarget_18 = { 
                    save_event_target_as = possibleBetaTarget_Final
                }    
            }
            else = {
                event_target:possibleAgencyTarget_18 = { 
                    save_event_target_as = possibleAlphaTarget_Final 
                }
            }
            country_event = { id = agencyNeighbors.4 }
        }
	}
    option = {
		name = agencyNeighborslistOption.19
        trigger = { exists = event_target:possibleAgencyTarget_19 } #Checks to see if event target exists
        allow = { custom_tooltip = { fail_text = "spyBanned_tooltip" not = { has_relation_flag = { who = event_target:possibleAgencyTarget_19 flag = spy_banned } } } 
        custom_tooltip = { fail_text = "spyFedLaw_tooltip" 
                nand = {
                    is_in_federation_with = event_target:possibleAgencyTarget_19
                    federation = {
                        has_federation_law = spy_regulated_espionage
                    }
                }
            }
        }
        hidden_effect = {
            if = {
                limit = {
                    has_country_flag = agencyBetaF
                }
                event_target:possibleAgencyTarget_19 = { 
                    save_event_target_as = possibleBetaTarget_Final
                }    
            }
            else = {
                event_target:possibleAgencyTarget_19 = { 
                    save_event_target_as = possibleAlphaTarget_Final 
                }
            }
            country_event = { id = agencyNeighbors.4 }
        }
	}
    option = {
		name = agencyNeighborslistOption.20
        trigger = { exists = event_target:possibleAgencyTarget_20 } #Checks to see if event target exists
        allow = { custom_tooltip = { fail_text = "spyBanned_tooltip" not = { has_relation_flag = { who = event_target:possibleAgencyTarget_20 flag = spy_banned } } } 
        custom_tooltip = { fail_text = "spyFedLaw_tooltip" 
                nand = {
                    is_in_federation_with = event_target:possibleAgencyTarget_20
                    federation = {
                        has_federation_law = spy_regulated_espionage
                    }
                }
            }
        }
        hidden_effect = {
            if = {
                limit = {
                    has_country_flag = agencyBetaF
                }
                event_target:possibleAgencyTarget_20 = { 
                    save_event_target_as = possibleBetaTarget_Final
                }    
            }
            else = {
                event_target:possibleAgencyTarget_20 = { 
                    save_event_target_as = possibleAlphaTarget_Final 
                }
            }
            country_event = { id = agencyNeighbors.4 }
        }
    }
    





    option = {
		name = agencyNeighborslistOption.21
        trigger = { exists = event_target:possibleAgencyTarget_21 } #Checks to see if event target exists
        allow = { custom_tooltip = { fail_text = "spyBanned_tooltip" not = { has_relation_flag = { who = event_target:possibleAgencyTarget_21 flag = spy_banned } } } 
        custom_tooltip = { fail_text = "spyFedLaw_tooltip" 
                nand = {
                    is_in_federation_with = event_target:possibleAgencyTarget_21
                    federation = {
                        has_federation_law = spy_regulated_espionage
                    }
                }
            }
        }
        hidden_effect = {
            if = {
                limit = {
                    has_country_flag = agencyBetaF
                }
                event_target:possibleAgencyTarget_21 = { 
                    save_event_target_as = possibleBetaTarget_Final
                }    
            }
            else = {
                event_target:possibleAgencyTarget_21 = { 
                    save_event_target_as = possibleAlphaTarget_Final 
                }
            }
            country_event = { id = agencyNeighbors.4 }
        }
    }
    option = {
		name = agencyNeighborslistOption.22
        trigger = { exists = event_target:possibleAgencyTarget_22 } #Checks to see if event target exists
        allow = { custom_tooltip = { fail_text = "spyBanned_tooltip" not = { has_relation_flag = { who = event_target:possibleAgencyTarget_22 flag = spy_banned } } } 
        custom_tooltip = { fail_text = "spyFedLaw_tooltip" 
                nand = {
                    is_in_federation_with = event_target:possibleAgencyTarget_22
                    federation = {
                        has_federation_law = spy_regulated_espionage
                    }
                }
            }
        }
        hidden_effect = {
            if = {
                limit = {
                    has_country_flag = agencyBetaF
                }
                event_target:possibleAgencyTarget_22 = { 
                    save_event_target_as = possibleBetaTarget_Final
                }    
            }
            else = {
                event_target:possibleAgencyTarget_22 = { 
                    save_event_target_as = possibleAlphaTarget_Final 
                }
            }
            country_event = { id = agencyNeighbors.4 }
        }
    }
    option = {
		name = agencyNeighborslistOption.23
        trigger = { exists = event_target:possibleAgencyTarget_23 } #Checks to see if event target exists
        allow = { custom_tooltip = { fail_text = "spyBanned_tooltip" not = { has_relation_flag = { who = event_target:possibleAgencyTarget_23 flag = spy_banned } } } 
        custom_tooltip = { fail_text = "spyFedLaw_tooltip" 
                nand = {
                    is_in_federation_with = event_target:possibleAgencyTarget_23
                    federation = {
                        has_federation_law = spy_regulated_espionage
                    }
                }
            }
        }
        hidden_effect = {
            if = {
                limit = {
                    has_country_flag = agencyBetaF
                }
                event_target:possibleAgencyTarget_23 = { 
                    save_event_target_as = possibleBetaTarget_Final
                }    
            }
            else = {
                event_target:possibleAgencyTarget_23 = { 
                    save_event_target_as = possibleAlphaTarget_Final 
                }
            }
            country_event = { id = agencyNeighbors.4 }
        }
    }
    option = {
		name = agencyNeighborslistOption.24
        trigger = { exists = event_target:possibleAgencyTarget_24 } #Checks to see if event target exists
        allow = { custom_tooltip = { fail_text = "spyBanned_tooltip" not = { has_relation_flag = { who = event_target:possibleAgencyTarget_24 flag = spy_banned } } } 
        custom_tooltip = { fail_text = "spyFedLaw_tooltip" 
                nand = {
                    is_in_federation_with = event_target:possibleAgencyTarget_24
                    federation = {
                        has_federation_law = spy_regulated_espionage
                    }
                }
            }
        }
        hidden_effect = {
            if = {
                limit = {
                    has_country_flag = agencyBetaF
                }
                event_target:possibleAgencyTarget_24 = { 
                    save_event_target_as = possibleBetaTarget_Final
                }    
            }
            else = {
                event_target:possibleAgencyTarget_24 = { 
                    save_event_target_as = possibleAlphaTarget_Final 
                }
            }
            country_event = { id = agencyNeighbors.4 }
        }
    }
    option = {
		name = agencyNeighborslistOption.25
        trigger = { exists = event_target:possibleAgencyTarget_25 } #Checks to see if event target exists
        allow = { custom_tooltip = { fail_text = "spyBanned_tooltip" not = { has_relation_flag = { who = event_target:possibleAgencyTarget_25 flag = spy_banned } } } 
        custom_tooltip = { fail_text = "spyFedLaw_tooltip" 
                nand = {
                    is_in_federation_with = event_target:possibleAgencyTarget_25
                    federation = {
                        has_federation_law = spy_regulated_espionage
                    }
                }
            }
        }
        hidden_effect = {
            if = {
                limit = {
                    has_country_flag = agencyBetaF
                }
                event_target:possibleAgencyTarget_25 = { 
                    save_event_target_as = possibleBetaTarget_Final
                }    
            }
            else = {
                event_target:possibleAgencyTarget_25 = { 
                    save_event_target_as = possibleAlphaTarget_Final 
                }
            }
            country_event = { id = agencyNeighbors.4 }
        }
    }
    option = {
		name = agencyNeighborslistOption.26
        trigger = { exists = event_target:possibleAgencyTarget_26 } #Checks to see if event target exists
        allow = { custom_tooltip = { fail_text = "spyBanned_tooltip" not = { has_relation_flag = { who = event_target:possibleAgencyTarget_26 flag = spy_banned } } } 
        custom_tooltip = { fail_text = "spyFedLaw_tooltip" 
                nand = {
                    is_in_federation_with = event_target:possibleAgencyTarget_26
                    federation = {
                        has_federation_law = spy_regulated_espionage
                    }
                }
            }
        }
        hidden_effect = {
            if = {
                limit = {
                    has_country_flag = agencyBetaF
                }
                event_target:possibleAgencyTarget_26 = { 
                    save_event_target_as = possibleBetaTarget_Final
                }    
            }
            else = {
                event_target:possibleAgencyTarget_26 = { 
                    save_event_target_as = possibleAlphaTarget_Final 
                }
            }
            country_event = { id = agencyNeighbors.4 }
        }
    }
    option = {
		name = agencyNeighborslistOption.27
        trigger = { exists = event_target:possibleAgencyTarget_27 } #Checks to see if event target exists
        allow = { custom_tooltip = { fail_text = "spyBanned_tooltip" not = { has_relation_flag = { who = event_target:possibleAgencyTarget_27 flag = spy_banned } } } 
        custom_tooltip = { fail_text = "spyFedLaw_tooltip" 
                nand = {
                    is_in_federation_with = event_target:possibleAgencyTarget_27
                    federation = {
                        has_federation_law = spy_regulated_espionage
                    }
                }
            }
        }
        hidden_effect = {
            if = {
                limit = {
                    has_country_flag = agencyBetaF
                }
                event_target:possibleAgencyTarget_27 = { 
                    save_event_target_as = possibleBetaTarget_Final
                }    
            }
            else = {
                event_target:possibleAgencyTarget_27 = { 
                    save_event_target_as = possibleAlphaTarget_Final 
                }
            }
            country_event = { id = agencyNeighbors.4 }
        }
    }
    option = {
		name = agencyNeighborslistOption.28
        trigger = { exists = event_target:possibleAgencyTarget_28 } #Checks to see if event target exists
        allow = { custom_tooltip = { fail_text = "spyBanned_tooltip" not = { has_relation_flag = { who = event_target:possibleAgencyTarget_28 flag = spy_banned } } } 
        custom_tooltip = { fail_text = "spyFedLaw_tooltip" 
                nand = {
                    is_in_federation_with = event_target:possibleAgencyTarget_28
                    federation = {
                        has_federation_law = spy_regulated_espionage
                    }
                }
            }
        }
        hidden_effect = {
            if = {
                limit = {
                    has_country_flag = agencyBetaF
                }
                event_target:possibleAgencyTarget_28 = { 
                    save_event_target_as = possibleBetaTarget_Final
                }    
            }
            else = {
                event_target:possibleAgencyTarget_28 = { 
                    save_event_target_as = possibleAlphaTarget_Final 
                }
            }
            country_event = { id = agencyNeighbors.4 }
        }
    }
    option = {
		name = agencyNeighborslistOption.29
        trigger = { exists = event_target:possibleAgencyTarget_29 } #Checks to see if event target exists
        allow = { custom_tooltip = { fail_text = "spyBanned_tooltip" not = { has_relation_flag = { who = event_target:possibleAgencyTarget_29 flag = spy_banned } } } 
        custom_tooltip = { fail_text = "spyFedLaw_tooltip" 
                nand = {
                    is_in_federation_with = event_target:possibleAgencyTarget_29
                    federation = {
                        has_federation_law = spy_regulated_espionage
                    }
                }
            }
        }
        hidden_effect = {
            if = {
                limit = {
                    has_country_flag = agencyBetaF
                }
                event_target:possibleAgencyTarget_29 = { 
                    save_event_target_as = possibleBetaTarget_Final
                }    
            }
            else = {
                event_target:possibleAgencyTarget_29 = { 
                    save_event_target_as = possibleAlphaTarget_Final 
                }
            }
            country_event = { id = agencyNeighbors.4 }
        }
    }
    option = {
		name = agencyNeighborslistOption.30
        trigger = { exists = event_target:possibleAgencyTarget_30 } #Checks to see if event target exists
        allow = { custom_tooltip = { fail_text = "spyBanned_tooltip" not = { has_relation_flag = { who = event_target:possibleAgencyTarget_30 flag = spy_banned } } } 
        custom_tooltip = { fail_text = "spyFedLaw_tooltip" 
                nand = {
                    is_in_federation_with = event_target:possibleAgencyTarget_30
                    federation = {
                        has_federation_law = spy_regulated_espionage
                    }
                }
            }
        }
        hidden_effect = {
            if = {
                limit = {
                    has_country_flag = agencyBetaF
                }
                event_target:possibleAgencyTarget_30 = { 
                    save_event_target_as = possibleBetaTarget_Final
                }    
            }
            else = {
                event_target:possibleAgencyTarget_30 = { 
                    save_event_target_as = possibleAlphaTarget_Final 
                }
            }
            country_event = { id = agencyNeighbors.4 }
        }
    }
    option = {
		name = agencyNeighborslistOption.31
        trigger = { exists = event_target:possibleAgencyTarget_31 } #Checks to see if event target exists
        allow = { custom_tooltip = { fail_text = "spyBanned_tooltip" not = { has_relation_flag = { who = event_target:possibleAgencyTarget_31 flag = spy_banned } } } 
        custom_tooltip = { fail_text = "spyFedLaw_tooltip" 
                nand = {
                    is_in_federation_with = event_target:possibleAgencyTarget_31
                    federation = {
                        has_federation_law = spy_regulated_espionage
                    }
                }
            }
        }
        hidden_effect = {
            if = {
                limit = {
                    has_country_flag = agencyBetaF
                }
                event_target:possibleAgencyTarget_31 = { 
                    save_event_target_as = possibleBetaTarget_Final
                }    
            }
            else = {
                event_target:possibleAgencyTarget_31 = { 
                    save_event_target_as = possibleAlphaTarget_Final 
                }
            }
            country_event = { id = agencyNeighbors.4 }
        }
    }
    option = {
		name = agencyNeighborslistOption.32
        trigger = { exists = event_target:possibleAgencyTarget_32 } #Checks to see if event target exists
        allow = { custom_tooltip = { fail_text = "spyBanned_tooltip" not = { has_relation_flag = { who = event_target:possibleAgencyTarget_32 flag = spy_banned } } } 
        custom_tooltip = { fail_text = "spyFedLaw_tooltip" 
                nand = {
                    is_in_federation_with = event_target:possibleAgencyTarget_32
                    federation = {
                        has_federation_law = spy_regulated_espionage
                    }
                }
            }
        }
        hidden_effect = {
            if = {
                limit = {
                    has_country_flag = agencyBetaF
                }
                event_target:possibleAgencyTarget_32 = { 
                    save_event_target_as = possibleBetaTarget_Final
                }    
            }
            else = {
                event_target:possibleAgencyTarget_32 = { 
                    save_event_target_as = possibleAlphaTarget_Final 
                }
            }
            country_event = { id = agencyNeighbors.4 }
        }
    }
    option = {
		name = agencyNeighborslistOption.33
        trigger = { exists = event_target:possibleAgencyTarget_33 } #Checks to see if event target exists
        allow = { custom_tooltip = { fail_text = "spyBanned_tooltip" not = { has_relation_flag = { who = event_target:possibleAgencyTarget_33 flag = spy_banned } } } 
        custom_tooltip = { fail_text = "spyFedLaw_tooltip" 
                nand = {
                    is_in_federation_with = event_target:possibleAgencyTarget_33
                    federation = {
                        has_federation_law = spy_regulated_espionage
                    }
                }
            }
        }
        hidden_effect = {
            if = {
                limit = {
                    has_country_flag = agencyBetaF
                }
                event_target:possibleAgencyTarget_33 = { 
                    save_event_target_as = possibleBetaTarget_Final
                }    
            }
            else = {
                event_target:possibleAgencyTarget_33 = { 
                    save_event_target_as = possibleAlphaTarget_Final 
                }
            }
            country_event = { id = agencyNeighbors.4 }
        }
    }
    option = {
		name = agencyNeighborslistOption.34
        trigger = { exists = event_target:possibleAgencyTarget_34 } #Checks to see if event target exists
        allow = { custom_tooltip = { fail_text = "spyBanned_tooltip" not = { has_relation_flag = { who = event_target:possibleAgencyTarget_34 flag = spy_banned } } } 
        custom_tooltip = { fail_text = "spyFedLaw_tooltip" 
                nand = {
                    is_in_federation_with = event_target:possibleAgencyTarget_34
                    federation = {
                        has_federation_law = spy_regulated_espionage
                    }
                }
            }
        }
        hidden_effect = {
            if = {
                limit = {
                    has_country_flag = agencyBetaF
                }
                event_target:possibleAgencyTarget_34 = { 
                    save_event_target_as = possibleBetaTarget_Final
                }    
            }
            else = {
                event_target:possibleAgencyTarget_34 = { 
                    save_event_target_as = possibleAlphaTarget_Final 
                }
            }
            country_event = { id = agencyNeighbors.4 }
        }
    }
    option = {
		name = agencyNeighborslistOption.35
        trigger = { exists = event_target:possibleAgencyTarget_35 } #Checks to see if event target exists
        allow = { custom_tooltip = { fail_text = "spyBanned_tooltip" not = { has_relation_flag = { who = event_target:possibleAgencyTarget_35 flag = spy_banned } } } 
        custom_tooltip = { fail_text = "spyFedLaw_tooltip" 
                nand = {
                    is_in_federation_with = event_target:possibleAgencyTarget_35
                    federation = {
                        has_federation_law = spy_regulated_espionage
                    }
                }
            }
        }
        hidden_effect = {
            if = {
                limit = {
                    has_country_flag = agencyBetaF
                }
                event_target:possibleAgencyTarget_35 = { 
                    save_event_target_as = possibleBetaTarget_Final
                }    
            }
            else = {
                event_target:possibleAgencyTarget_35 = { 
                    save_event_target_as = possibleAlphaTarget_Final 
                }
            }
            country_event = { id = agencyNeighbors.4 }
        }
    }
    option = {
		name = agencyNeighborslistOption.36
        trigger = { exists = event_target:possibleAgencyTarget_36 } #Checks to see if event target exists
        allow = { custom_tooltip = { fail_text = "spyBanned_tooltip" not = { has_relation_flag = { who = event_target:possibleAgencyTarget_36 flag = spy_banned } } } 
        custom_tooltip = { fail_text = "spyFedLaw_tooltip" 
                nand = {
                    is_in_federation_with = event_target:possibleAgencyTarget_36
                    federation = {
                        has_federation_law = spy_regulated_espionage
                    }
                }
            }
        }
        hidden_effect = {
            if = {
                limit = {
                    has_country_flag = agencyBetaF
                }
                event_target:possibleAgencyTarget_36 = { 
                    save_event_target_as = possibleBetaTarget_Final
                }    
            }
            else = {
                event_target:possibleAgencyTarget_36 = { 
                    save_event_target_as = possibleAlphaTarget_Final 
                }
            }
            country_event = { id = agencyNeighbors.4 }
        }
    }
    option = {
		name = agencyNeighborslistOption.37
        trigger = { exists = event_target:possibleAgencyTarget_37 } #Checks to see if event target exists
        allow = { custom_tooltip = { fail_text = "spyBanned_tooltip" not = { has_relation_flag = { who = event_target:possibleAgencyTarget_37 flag = spy_banned } } } 
        custom_tooltip = { fail_text = "spyFedLaw_tooltip" 
                nand = {
                    is_in_federation_with = event_target:possibleAgencyTarget_37
                    federation = {
                        has_federation_law = spy_regulated_espionage
                    }
                }
            }
        }
        hidden_effect = {
            if = {
                limit = {
                    has_country_flag = agencyBetaF
                }
                event_target:possibleAgencyTarget_37 = { 
                    save_event_target_as = possibleBetaTarget_Final
                }    
            }
            else = {
                event_target:possibleAgencyTarget_37 = { 
                    save_event_target_as = possibleAlphaTarget_Final 
                }
            }
            country_event = { id = agencyNeighbors.4 }
        }
    }
    option = {
		name = agencyNeighborslistOption.38
        trigger = { exists = event_target:possibleAgencyTarget_38 } #Checks to see if event target exists
        allow = { custom_tooltip = { fail_text = "spyBanned_tooltip" not = { has_relation_flag = { who = event_target:possibleAgencyTarget_38 flag = spy_banned } } } 
        custom_tooltip = { fail_text = "spyFedLaw_tooltip" 
                nand = {
                    is_in_federation_with = event_target:possibleAgencyTarget_38
                    federation = {
                        has_federation_law = spy_regulated_espionage
                    }
                }
            }
        }
        hidden_effect = {
            if = {
                limit = {
                    has_country_flag = agencyBetaF
                }
                event_target:possibleAgencyTarget_38 = { 
                    save_event_target_as = possibleBetaTarget_Final
                }    
            }
            else = {
                event_target:possibleAgencyTarget_38 = { 
                    save_event_target_as = possibleAlphaTarget_Final 
                }
            }
            country_event = { id = agencyNeighbors.4 }
        }
    }
    option = {
		name = agencyNeighborslistOption.39
        trigger = { exists = event_target:possibleAgencyTarget_39 } #Checks to see if event target exists
        allow = { custom_tooltip = { fail_text = "spyBanned_tooltip" not = { has_relation_flag = { who = event_target:possibleAgencyTarget_39 flag = spy_banned } } } 
        custom_tooltip = { fail_text = "spyFedLaw_tooltip" 
                nand = {
                    is_in_federation_with = event_target:possibleAgencyTarget_39
                    federation = {
                        has_federation_law = spy_regulated_espionage
                    }
                }
            }
        }
        hidden_effect = {
            if = {
                limit = {
                    has_country_flag = agencyBetaF
                }
                event_target:possibleAgencyTarget_39 = { 
                    save_event_target_as = possibleBetaTarget_Final
                }    
            }
            else = {
                event_target:possibleAgencyTarget_39= { 
                    save_event_target_as = possibleAlphaTarget_Final 
                }
            }
            country_event = { id = agencyNeighbors.4 }
        }
    }
    option = {
		name = agencyNeighborslistOption.40
        trigger = { exists = event_target:possibleAgencyTarget_40 } #Checks to see if event target exists
        allow = { custom_tooltip = { fail_text = "spyBanned_tooltip" not = { has_relation_flag = { who = event_target:possibleAgencyTarget_40 flag = spy_banned } } } 
        custom_tooltip = { fail_text = "spyFedLaw_tooltip" 
                nand = {
                    is_in_federation_with = event_target:possibleAgencyTarget_40
                    federation = {
                        has_federation_law = spy_regulated_espionage
                    }
                }
            }
        }
        hidden_effect = {
            if = {
                limit = {
                    has_country_flag = agencyBetaF
                }
                event_target:possibleAgencyTarget_40 = { 
                    save_event_target_as = possibleBetaTarget_Final
                }    
            }
            else = {
                event_target:possibleAgencyTarget_40 = { 
                    save_event_target_as = possibleAlphaTarget_Final 
                }
            }
            country_event = { id = agencyNeighbors.4 }
        }
    }
    option = {
		name = agencyNeighborslistOption.41
        trigger = { exists = event_target:possibleAgencyTarget_41 } #Checks to see if event target exists
        allow = { custom_tooltip = { fail_text = "spyBanned_tooltip" not = { has_relation_flag = { who = event_target:possibleAgencyTarget_41 flag = spy_banned } } } 
        custom_tooltip = { fail_text = "spyFedLaw_tooltip" 
                nand = {
                    is_in_federation_with = event_target:possibleAgencyTarget_41
                    federation = {
                        has_federation_law = spy_regulated_espionage
                    }
                }
            }
        }
        hidden_effect = {
            if = {
                limit = {
                    has_country_flag = agencyBetaF
                }
                event_target:possibleAgencyTarget_41 = { 
                    save_event_target_as = possibleBetaTarget_Final
                }    
            }
            else = {
                event_target:possibleAgencyTarget_41 = { 
                    save_event_target_as = possibleAlphaTarget_Final 
                }
            }
            country_event = { id = agencyNeighbors.4 }
        }
    }
    option = {
		name = agencyNeighborslistOption.42
        trigger = { exists = event_target:possibleAgencyTarget_42 } #Checks to see if event target exists
        allow = { custom_tooltip = { fail_text = "spyBanned_tooltip" not = { has_relation_flag = { who = event_target:possibleAgencyTarget_42 flag = spy_banned } } } 
        custom_tooltip = { fail_text = "spyFedLaw_tooltip" 
                nand = {
                    is_in_federation_with = event_target:possibleAgencyTarget_42
                    federation = {
                        has_federation_law = spy_regulated_espionage
                    }
                }
            }
        }
        hidden_effect = {
            if = {
                limit = {
                    has_country_flag = agencyBetaF
                }
                event_target:possibleAgencyTarget_42 = { 
                    save_event_target_as = possibleBetaTarget_Final
                }    
            }
            else = {
                event_target:possibleAgencyTarget_42 = { 
                    save_event_target_as = possibleAlphaTarget_Final 
                }
            }
            country_event = { id = agencyNeighbors.4 }
        }
    }
    
    option = {
		name = agencyNeighborslistOption.43
        trigger = { exists = event_target:possibleAgencyTarget_43 } #Checks to see if event target exists
        allow = { custom_tooltip = { fail_text = "spyBanned_tooltip" not = { has_relation_flag = { who = event_target:possibleAgencyTarget_43 flag = spy_banned } } } 
        custom_tooltip = { fail_text = "spyFedLaw_tooltip" 
                nand = {
                    is_in_federation_with = event_target:possibleAgencyTarget_43
                    federation = {
                        has_federation_law = spy_regulated_espionage
                    }
                }
            }
        }
        hidden_effect = {
            if = {
                limit = {
                    has_country_flag = agencyBetaF
                }
                event_target:possibleAgencyTarget_43 = { 
                    save_event_target_as = possibleBetaTarget_Final
                }    
            }
            else = {
                event_target:possibleAgencyTarget_43 = { 
                    save_event_target_as = possibleAlphaTarget_Final 
                }
            }
            country_event = { id = agencyNeighbors.4 }
        }
    }
    option = {
		name = agencyNeighborslistOption.44
        trigger = { exists = event_target:possibleAgencyTarget_44 } #Checks to see if event target exists
        allow = { custom_tooltip = { fail_text = "spyBanned_tooltip" not = { has_relation_flag = { who = event_target:possibleAgencyTarget_44 flag = spy_banned } } } 
        custom_tooltip = { fail_text = "spyFedLaw_tooltip" 
                nand = {
                    is_in_federation_with = event_target:possibleAgencyTarget_44
                    federation = {
                        has_federation_law = spy_regulated_espionage
                    }
                }
            }
        }
        hidden_effect = {
            if = {
                limit = {
                    has_country_flag = agencyBetaF
                }
                event_target:possibleAgencyTarget_44 = { 
                    save_event_target_as = possibleBetaTarget_Final
                }    
            }
            else = {
                event_target:possibleAgencyTarget_44 = { 
                    save_event_target_as = possibleAlphaTarget_Final 
                }
            }
            country_event = { id = agencyNeighbors.4 }
        }
    }
    option = {
		name = agencyNeighborslistOption.45
        trigger = { exists = event_target:possibleAgencyTarget_45 } #Checks to see if event target exists
        allow  = { custom_tooltip = { fail_text = "spyBanned_tooltip" not = { has_relation_flag = { who = event_target:possibleAgencyTarget_45 flag = spy_banned } } } 
        custom_tooltip = { fail_text = "spyFedLaw_tooltip" 
                nand = {
                    is_in_federation_with = event_target:possibleAgencyTarget_45
                    federation = {
                        has_federation_law = spy_regulated_espionage
                    }
                }
            }
        }
        hidden_effect = {
            if = {
                limit = {
                    has_country_flag = agencyBetaF
                }
                event_target:possibleAgencyTarget_45 = { 
                    save_event_target_as = possibleBetaTarget_Final
                }    
            }
            else = {
                event_target:possibleAgencyTarget_45 = { 
                    save_event_target_as = possibleAlphaTarget_Final 
                }
            }
            country_event = { id = agencyNeighbors.4 }
        }
    }
    option = {
		name = agencyNeighborslistOption.46
        trigger = { exists = event_target:possibleAgencyTarget_46 } #Checks to see if event target exists
        allow = { custom_tooltip = { fail_text = "spyBanned_tooltip" not = { has_relation_flag = { who = event_target:possibleAgencyTarget_46 flag = spy_banned } } } 
        custom_tooltip = { fail_text = "spyFedLaw_tooltip" 
                nand = {
                    is_in_federation_with = event_target:possibleAgencyTarget_46
                    federation = {
                        has_federation_law = spy_regulated_espionage
                    }
                }
            }
        }
        hidden_effect = {
            if = {
                limit = {
                    has_country_flag = agencyBetaF
                }
                event_target:possibleAgencyTarget_46 = { 
                    save_event_target_as = possibleBetaTarget_Final
                }    
            }
            else = {
                event_target:possibleAgencyTarget_46 = { 
                    save_event_target_as = possibleAlphaTarget_Final 
                }
            }
            country_event = { id = agencyNeighbors.4 }
        }
    }
    option = {
		name = agencyNeighborslistOption.47
        trigger = { exists = event_target:possibleAgencyTarget_47 } #Checks to see if event target exists
        allow = { custom_tooltip = { fail_text = "spyBanned_tooltip" not = { has_relation_flag = { who = event_target:possibleAgencyTarget_47 flag = spy_banned } } } 
        custom_tooltip = { fail_text = "spyFedLaw_tooltip" 
                nand = {
                    is_in_federation_with = event_target:possibleAgencyTarget_47
                    federation = {
                        has_federation_law = spy_regulated_espionage
                    }
                }
            }
        }
        hidden_effect = {
            if = {
                limit = {
                    has_country_flag = agencyBetaF
                }
                event_target:possibleAgencyTarget_47 = { 
                    save_event_target_as = possibleBetaTarget_Final
                }    
            }
            else = {
                event_target:possibleAgencyTarget_47 = { 
                    save_event_target_as = possibleAlphaTarget_Final 
                }
            }
            country_event = { id = agencyNeighbors.4 }
        }
    }
    option = {
		name = agencyNeighborslistOption.48
        trigger = { exists = event_target:possibleAgencyTarget_48 } #Checks to see if event target exists
        allow = { custom_tooltip = { fail_text = "spyBanned_tooltip" not = { has_relation_flag = { who = event_target:possibleAgencyTarget_48 flag = spy_banned } } } 
        custom_tooltip = { fail_text = "spyFedLaw_tooltip" 
                nand = {
                    is_in_federation_with = event_target:possibleAgencyTarget_48
                    federation = {
                        has_federation_law = spy_regulated_espionage
                    }
                }
            }
        }
        hidden_effect = {
            if = {
                limit = {
                    has_country_flag = agencyBetaF
                }
                event_target:possibleAgencyTarget_48 = { 
                    save_event_target_as = possibleBetaTarget_Final
                }    
            }
            else = {
                event_target:possibleAgencyTarget_48 = { 
                    save_event_target_as = possibleAlphaTarget_Final 
                }
            }
            country_event = { id = agencyNeighbors.4 }
        }
    }
    option = {
		name = agencyNeighborslistOption.49
        trigger = { exists = event_target:possibleAgencyTarget_49 } #Checks to see if event target exists
        allow = { custom_tooltip = { fail_text = "spyBanned_tooltip" not = { has_relation_flag = { who = event_target:possibleAgencyTarget_49 flag = spy_banned } } } 
        custom_tooltip = { fail_text = "spyFedLaw_tooltip" 
                nand = {
                    is_in_federation_with = event_target:possibleAgencyTarget_49
                    federation = {
                        has_federation_law = spy_regulated_espionage
                    }
                }
            }
        }
        hidden_effect = {
            if = {
                limit = {
                    has_country_flag = agencyBetaF
                }
                event_target:possibleAgencyTarget_49 = { 
                    save_event_target_as = possibleBetaTarget_Final
                }    
            }
            else = {
                event_target:possibleAgencyTarget_49 = { 
                    save_event_target_as = possibleAlphaTarget_Final 
                }
            }
            country_event = { id = agencyNeighbors.4 }
        }
    }
    option = {
		name = agencyNeighborslistOption.50
        trigger = { exists = event_target:possibleAgencyTarget_50 } #Checks to see if event target exists
        allow = { custom_tooltip = { fail_text = "spyBanned_tooltip" not = { has_relation_flag = { who = event_target:possibleAgencyTarget_50 flag = spy_banned } } } 
        custom_tooltip = { fail_text = "spyFedLaw_tooltip" 
                nand = {
                    is_in_federation_with = event_target:possibleAgencyTarget_50
                    federation = {
                        has_federation_law = spy_regulated_espionage
                    }
                }
            }
        }
        hidden_effect = {
            if = {
                limit = {
                    has_country_flag = agencyBetaF
                }
                event_target:possibleAgencyTarget_50 = { 
                    save_event_target_as = possibleBetaTarget_Final
                }    
            }
            else = {
                event_target:possibleAgencyTarget_50 = { 
                    save_event_target_as = possibleAlphaTarget_Final 
                }
            }
            country_event = { id = agencyNeighbors.4 }
        }
    }
    option = {
		name = agencyNeighborslistOption.51
        trigger = { exists = event_target:possibleAgencyTarget_51 } #Checks to see if event target exists
        allow = { custom_tooltip = { fail_text = "spyBanned_tooltip" not = { has_relation_flag = { who = event_target:possibleAgencyTarget_51 flag = spy_banned } } } 
        custom_tooltip = { fail_text = "spyFedLaw_tooltip" 
                nand = {
                    is_in_federation_with = event_target:possibleAgencyTarget_51
                    federation = {
                        has_federation_law = spy_regulated_espionage
                    }
                }
            }
        }
        hidden_effect = {
            if = {
                limit = {
                    has_country_flag = agencyBetaF
                }
                event_target:possibleAgencyTarget_51 = { 
                    save_event_target_as = possibleBetaTarget_Final
                }    
            }
            else = {
                event_target:possibleAgencyTarget_51 = { 
                    save_event_target_as = possibleAlphaTarget_Final 
                }
            }
            country_event = { id = agencyNeighbors.4 }
        }
    }
    option = {
		name = agencyNeighborslistOption.52
        trigger = { exists = event_target:possibleAgencyTarget_52 } #Checks to see if event target exists
        allow = { custom_tooltip = { fail_text = "spyBanned_tooltip" not = { has_relation_flag = { who = event_target:possibleAgencyTarget_52 flag = spy_banned } } } 
        custom_tooltip = { fail_text = "spyFedLaw_tooltip" 
                nand = {
                    is_in_federation_with = event_target:possibleAgencyTarget_52
                    federation = {
                        has_federation_law = spy_regulated_espionage
                    }
                }
            }
        }
        hidden_effect = {
            if = {
                limit = {
                    has_country_flag = agencyBetaF
                }
                event_target:possibleAgencyTarget_52 = { 
                    save_event_target_as = possibleBetaTarget_Final
                }    
            }
            else = {
                event_target:possibleAgencyTarget_52 = { 
                    save_event_target_as = possibleAlphaTarget_Final 
                }
            }
            country_event = { id = agencyNeighbors.4 }
        }
    }
    option = {
		name = agencyNeighborslistOption.53
        trigger = { exists = event_target:possibleAgencyTarget_53 } #Checks to see if event target exists
        allow = { custom_tooltip = { fail_text = "spyBanned_tooltip" not = { has_relation_flag = { who = event_target:possibleAgencyTarget_53 flag = spy_banned } } } 
        custom_tooltip = { fail_text = "spyFedLaw_tooltip" 
                nand = {
                    is_in_federation_with = event_target:possibleAgencyTarget_53
                    federation = {
                        has_federation_law = spy_regulated_espionage
                    }
                }
            }
        }
        hidden_effect = {
            if = {
                limit = {
                    has_country_flag = agencyBetaF
                }
                event_target:possibleAgencyTarget_53 = { 
                    save_event_target_as = possibleBetaTarget_Final
                }    
            }
            else = {
                event_target:possibleAgencyTarget_53 = { 
                    save_event_target_as = possibleAlphaTarget_Final 
                }
            }
            country_event = { id = agencyNeighbors.4 }
        }
    }
    option = {
		name = agencyNeighborslistOption.54
        trigger = { exists = event_target:possibleAgencyTarget_54 } #Checks to see if event target exists
        allow = { custom_tooltip = { fail_text = "spyBanned_tooltip" not = { has_relation_flag = { who = event_target:possibleAgencyTarget_54 flag = spy_banned } } } 
        custom_tooltip = { fail_text = "spyFedLaw_tooltip" 
                nand = {
                    is_in_federation_with = event_target:possibleAgencyTarget_54
                    federation = {
                        has_federation_law = spy_regulated_espionage
                    }
                }
            }
        }
        hidden_effect = {
            if = {
                limit = {
                    has_country_flag = agencyBetaF
                }
                event_target:possibleAgencyTarget_54 = { 
                    save_event_target_as = possibleBetaTarget_Final
                }    
            }
            else = {
                event_target:possibleAgencyTarget_54 = { 
                    save_event_target_as = possibleAlphaTarget_Final 
                }
            }
            country_event = { id = agencyNeighbors.4 }
        }
    }
    option = {
		name = agencyNeighborslistOption.55
        trigger = { exists = event_target:possibleAgencyTarget_55 } #Checks to see if event target exists
        allow = { custom_tooltip = { fail_text = "spyBanned_tooltip" not = { has_relation_flag = { who = event_target:possibleAgencyTarget_55 flag = spy_banned } } } 
        custom_tooltip = { fail_text = "spyFedLaw_tooltip" 
                nand = {
                    is_in_federation_with = event_target:possibleAgencyTarget_55
                    federation = {
                        has_federation_law = spy_regulated_espionage
                    }
                }
            }
        }
        hidden_effect = {
            if = {
                limit = {
                    has_country_flag = agencyBetaF
                }
                event_target:possibleAgencyTarget_55 = { 
                    save_event_target_as = possibleBetaTarget_Final
                }    
            }
            else = {
                event_target:possibleAgencyTarget_55 = { 
                    save_event_target_as = possibleAlphaTarget_Final 
                }
            }
            country_event = { id = agencyNeighbors.4 }
        }
	}


    
    option = {  #RECALL ALPHA
        name = agencyNeighborslist.y
        custom_tooltip = agencyNeighborslist.y.a 
        trigger = {
            exists = event_target:alphaNetworkTarget_temp
            not = {
                has_country_flag = agencyBetaF
            }
        }
        hidden_effect = {
            remove_country_flag = redeployAlphaF
            removeSwingEthicsFlags_Alpha = yes
            removeFundCrimeFlags_Alpha = yes
            removeOpFlagsAlpha_F = yes
            remove_country_flag = gatherIntelAlpha
            if = {
                limit = {
                    hasGatherProgress_Alpha_F = yes
                }
                removeGatherProgress_Alpha_F = yes
                set_country_flag = cancelOngoing
            }
            country_event = {
                id = agencyGlobal.3
            }
            country_event = {
                id = agencyGlobal.2
                
            }
        }
    }



    option = {  #RECALL BETA
        name = agencyNeighborslist.y
        custom_tooltip = agencyNeighborslist.y.a 
        trigger = {
            exists = event_target:betaNetworkTarget_temp
            has_country_flag = agencyBetaF
        }
        hidden_effect = {
            remove_country_flag = redeployBetaF
            removeSwingEthicsFlags_Beta = yes
            removeFundCrimeFlags_Beta = yes

            removeOpFlagsBeta_F = yes
            remove_country_flag = gatherIntelBeta
            if = {
                limit = {
                    hasGatherProgress_Beta_F = yes
                }
                removeGatherProgress_Beta_F = yes
                set_country_flag = cancelOngoingBeta
            }
            country_event = {
                id = agencyGlobal.33
            }
            country_event = {
                id = agencyGlobal.2   
            }
        }
    }
    option = {  #CANCEL REDEPLOY
        name = agencyNeighborslist.z
        hidden_effect = {
            remove_country_flag = redeployAlphaF
            remove_country_flag = redeployBetaF
            country_event = {
                id = agencyGlobal.2
                
            }
            if = {
                limit = {
                    has_country_flag = agencyBetaF
                }
                remove_country_flag = REDEPLOY_COOLDOWN_BETA
            }
            else = {
                remove_country_flag = REDEPLOY_COOLDOWN_ALPHA
            }
            
        }
    }
}




country_event = { #CLEAR ANY FLAGS TO PREP FOR TARGET CHANGE
    id = agencyNeighbors.4
    is_triggered_only = yes
    hide_window = yes

    immediate = { 
        if = {
            limit = {
                not = {
                    has_country_flag = agencyBetaF
                }
            }

            removeSwingEthicsFlags_Alpha = yes
            removeOpFlagsAlpha_F = yes
            remove_country_flag = gatherIntelAlpha
            removeFundCrimeFlags_Alpha = yes

            if = {
                limit = {
                    hasGatherProgress_Alpha_F = yes
                }
                set_country_flag = cancelOngoing      
                removeGatherProgress_Alpha_F = yes
            }

            removeIntelPointsAlpha = yes


            remove_country_flag = redeployAlphaF

            set_country_flag = gatherIntelAlpha # BEGINS LONGTERM CHAIN

                        
            country_event = { id = agencyGlobal.3 }
            country_event = { id = progressTrackerA.1 }
            country_event = { id = agencyGlobal.1 }
        }
        else_if = {
            limit = {
                has_country_flag = agencyBetaF
            }

            removeSwingEthicsFlags_Beta = yes
            removeOpFlagsBeta_F = yes
            remove_country_flag = gatherIntelBeta
            removeFundCrimeFlags_Beta = yes

            if = {
                limit = {
                    or = {
                        hasGatherProgress_Beta_F = yes
                    }
                }
                set_country_flag = cancelOngoingBeta
                removeGatherProgress_Beta_F = yes
            }
            removeIntelPointsBeta = yes

            remove_country_flag = redeployBetaF
            remove_country_flag = agencyBetaF
            set_country_flag = gatherIntelBeta # BEGINS LONGTERM CHAIN
            
            country_event = { id = agencyGlobal.33 }
            country_event = { id = progressTrackerB.1 }
            country_event = { id = agencyGlobal.11 }
        }  
    }
}