namespace = EFE_machine_spawn

event = {
	id = EFE_machine_spawn.1

	is_triggered_only = yes
	hide_window = yes
	
	fire_only_once = yes
	
	trigger = { exists = event_target:EFE_Machine }
	
	immediate = {		
		event_target:EFE_Machine = {
			country_event = { id = EFE_machine_spawn.2 }
		}
	}
}

country_event = {
	id = EFE_machine_spawn.2
	hide_window = yes

	is_triggered_only = yes

	fire_only_once = yes

	immediate = {
		set_spawn_system_batch = begin
		# batch-processes the spawn_system effects between "begin" and "end",
		# so caches are recalculated only once rather than for every system spawned
		# can also be used when removing and adding hyperlanes
		no_scope = {
			# makes system positions originate from galactic core
			spawn_system = {
				min_distance >= 200
				max_distance <= 250
				min_orientation_angle = 120
				max_orientation_angle = 120
				initializer = EFE_Machine_02
			}
			spawn_system = {
				min_distance >= 200
				max_distance <= 250
				min_orientation_angle = 0
				max_orientation_angle = 0
				initializer = EFE_Machine_03
			}
			spawn_system = {
				min_distance >= 200
				max_distance <= 250
				min_orientation_angle = 220
				max_orientation_angle = 240
				initializer = EFE_Machine_04
			}
			spawn_system = {
				min_distance >= 150
				max_distance <= 250
				min_orientation_angle = 90
				max_orientation_angle = 150
				initializer = EFE_Machine_05
			}
			spawn_system = {
				min_distance >= 150
				max_distance <= 250
				min_orientation_angle = 270
				max_orientation_angle = 30
				initializer = EFE_Machine_06
			}
		}
		
		set_spawn_system_batch = end
	}
}