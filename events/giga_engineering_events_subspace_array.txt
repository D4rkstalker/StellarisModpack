namespace = gigaarray

#First popup
country_event = {
	id = gigaarray.1
	title = gigaarray.1.name
	desc = gigaarray.1.desc
	hide_window = no
	picture = GFX_evt_star_chart
	show_sound = event_sensor_ping
	is_triggered_only = yes
	
	#Basic search
	option = {
		name = gigaarray.1.a
		custom_tooltip = gigaarray.1.a.tooltip
		hidden_effect = {
			country_event = { id = gigaarray.11 days = 10 }
		}
	}
	
	#Advanced search
	option = {
		name = gigaarray.1.b
		custom_tooltip = gigaarray.1.b.tooltip
		hidden_effect = {
			country_event = { id = gigaarray.12 days = 2 }
		}
	}
	
	#Elite search
	option = {
		name = gigaarray.1.c
	}
	
	#Galactic Core
	option = {
		name = gigaarray.1.d
	}
	
	#Cancel
	option = {
		name = gigaarray.1.e
		hidden_effect = {
			remove_country_flag = giga_new_systems
		}
	}
}

#Found basic system
country_event = {
	id = gigaarray.11
	title = gigaarray.11.name
	desc = gigaarray.11.desc
	hide_window = no
	picture = GFX_evt_star_chart
	show_sound = event_sensor_ping
	is_triggered_only = yes
	
	immediate = {
		random_list = {
			20 = {
				random_system = {
					spawn_system = { initializer = "array_basic_init_01" }
				}
			}
			30 = {
				random_system = {
					spawn_system = { initializer = "array_basic_init_02" }
				}
			}
			30 = {
				random_system = {
					spawn_system = { initializer = "array_basic_init_03" }
				}
			}
			10 = {
				random_system = {
					spawn_system = { initializer = "array_primitive_init" }
				}
			}
			7 = {
				random_system = {
					spawn_system = { initializer = "array_browndwarf_init" }
				}
			}
			3 = {
				random_system = {
					spawn_system = { initializer = "array_abandoned_gateways_01" }
				}
			}
		}
		random_system = {
			limit = { has_star_flag = giga_system_array }
			save_event_target_as = latest_array_system
			every_system_planet = {
				limit = {
					is_star = yes
				}
				surveyed = {
					set_surveyed = yes
					surveyor = root
				}
			}
			random_neighbor_system = {
				ignore_hyperlanes = yes
				add_hyperlane = {
					from = PREV
					to = THIS
				}
			}
			random_neighbor_system = {
				ignore_hyperlanes = yes
				add_hyperlane = {
					from = PREV
					to = THIS
				}
			}
			remove_star_flag = giga_system_array
		}
	}
	
	option = {
		name = gigaarray.11.a
		hidden_effect = {
			remove_country_flag = giga_new_systems
		}
	}
}

#Found advanced system
country_event = {
	id = gigaarray.12
	title = gigaarray.12.name
	desc = gigaarray.12.desc
	hide_window = no
	picture = GFX_evt_star_chart
	show_sound = event_sensor_ping
	is_triggered_only = yes
	
	immediate = {
		random_list = {
			30 = {
				random_system = {
					spawn_system = { initializer = "array_basic_init_01" }
				}
			}
			15 = {
				random_system = {
					spawn_system = { initializer = "array_primitive_init" }
				}
			}
			15 = {
				random_system = {
					spawn_system = { initializer = "array_browndwarf_init" }
				}
			}
			15 = {
				random_system = {
					spawn_system = { initializer = "array_abandoned_gateways_01" }
				}
			}
			5 = {
				if = {
					limit = {
						NOT = {
							any_system = { has_star_flag = giga_flat_system }
						}
					}
					random_system = {
						spawn_system = { initializer = "array_flat_primitive_init" }
					}
				}
				else = {
					random_system = {
						spawn_system = { initializer = "array_triplebrowndwarf_init" }
					}
				}
			}
			5 = {
				if = {
					limit = {
						NOT = {
							any_system = { has_star_flag = Paluush_system }
						}
					}
					random_system = {
						spawn_system = { initializer = "array_giga_paluush_initializer" }
					}
				}
				else = {
					random_system = {
						spawn_system = { initializer = "array_guardians_init_hive" }
					}
				}
			}
			5 = {
				if = {
					limit = {
						NOT = {
							any_system = { has_star_flag = giga_great_wound }
						}
					}
					random_system = {
						spawn_system = { initializer = "array_great_wound_system" }
					}
				}
				else = {
					random_system = {
						spawn_system = { initializer = "array_browndwarf_init" }
					}
				}
			}
			5 = {
				if = {
					limit = {
						NOT = {
							any_system = { has_star_flag = kerbol_system }
						}
					}
					random_system = {
						spawn_system = { initializer = "array_giga_kerbol_initializer" }
					}
				}
				else = {
					random_system = {
						spawn_system = { initializer = "array_hostile_init_07" }
					}
				}
			}
			5 = {
				if = {
					limit = {
						NOT = {
							any_system = { has_star_flag = sanctuary_system }
						}
					}
					random_system = {
						spawn_system = { initializer = "array_sanctuary_system" }
					}
				}
				else = {
					random_system = {
						spawn_system = { initializer = "array_browndwarf_init" }
					}
				}
			}
		}
		random_system = {
			limit = { has_star_flag = giga_system_array }
			save_event_target_as = latest_array_system
			every_system_planet = {
				limit = {
					is_star = yes
				}
				surveyed = {
					set_surveyed = yes
					surveyor = root
				}
			}
			random_neighbor_system = {
				ignore_hyperlanes = yes
				add_hyperlane = {
					from = PREV
					to = THIS
				}
			}
			random_neighbor_system = {
				ignore_hyperlanes = yes
				add_hyperlane = {
					from = PREV
					to = THIS
				}
			}
			remove_star_flag = giga_system_array
		}
	}
	
	option = {
		name = gigaarray.12.a
		hidden_effect = {
			remove_country_flag = giga_new_systems
		}
	}
}












