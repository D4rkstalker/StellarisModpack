namespace = fleet_reinforcement

event = {
	id = fleet_reinforcement.1
	hide_window = yes
	is_triggered_only = yes
	
	immediate = {
		limit = {
			mid_game_years_passed > 0
		}
		every_country = {
			limit = {
				is_country_type = default
				is_at_war = yes
				NOT = { is_ai = no }
			}
			country_event = { id = fleet_reinforcement.2 }
		}
		every_country = {
			limit = {
				OR = {
					is_country_type = fallen_empire
					is_country_type = awakened_fallen_empire
				}
				is_at_war = yes
				NOT = { is_ai = no }
			}
			country_event = { id = fallen_empires.13 }
		}
	}
}

country_event = {
	id = fleet_reinforcement.2
	hide_window = yes
	is_triggered_only = yes

	immediate = {		
		if = {
			limit = { 
				OR = {
					has_civic = civic_machine_terminator 
					has_civic = civic_fanatic_purifiers 
					has_civic = civic_hive_devouring_swarm 
				}
			}
			
			# exterminator fleets, 150% naval cap
			while = {
				count = 2
				create_fleet_from_naval_cap = 0.1
				random_owned_starbase = {
					limit = {
						has_starbase_size >= starbase_starfortress
					}
					last_created_fleet = {
						set_location = prev
					}
				}

			}

		}
		else = {
			while = {
				count = 1
				create_fleet_from_naval_cap = 0.05
				random_owned_starbase = {
					limit = {
						has_starbase_size >= starbase_starfortress
					}
					last_created_fleet = {
						set_location = prev
					}
				}

			}
		}
		
		if = {
			limit = {
				has_technology = tech_colossus
			}
			create_fleet = {
				effect = {
					set_owner = prev
					create_ship = {
						graphical_culture = root.from
						random_existing_design = colossus
					}
				}
			}
		}
		if = {
			limit = {
				has_technology = tech_titans
			}
			create_fleet = {
				effect = {
					set_owner = prev
					while = {
						count = 3
						create_ship = {
							graphical_culture = root.from
							random_existing_design = titan
						}
					}
				}
			}
			
		}
	}
}
