namespace = eo_sibling_rivalry

planet_event = {
	id = eo_sibling_rivalry.1
	hide_window = yes
	is_triggered_only = yes
	
	immediate = {
		save_event_target_as = subjugated_planet
		owner = {
			start_situation = {
				type = situation_eo_sibling_rivalry
				target = event_target:subjugated_planet
			}
		}
	}
}

#################################
## Liberationist faction forms 
#################################

situation_event = {
	id = eo_sibling_rivalry.2
	title = eo_sibling_rivalry.2.title
	desc = eo_sibling_rivalry.2.desc
	is_triggered_only = yes
	picture = GFX_evt_conclave
	show_sound = event_whispering
	situation = this
	location = target

	immediate = {
		owner = {
			set_country_flag = liberationist_faction_formed
		}
		target = {
			while = {
				count = 7
				random_owned_pop = {
					limit = {
						NOT = {
							has_pop_flag = liberationist_sympathies
						}
					}
					set_pop_flag = liberationist_sympathies
				}
			}
		}
	}

	option = {
		name = colony.9855.a
		add_situation_progress = 20
	}
}

pop_faction_event = {
	id =  eo_sibling_rivalry.3
	title = eo_sibling_rivalry.3.title
	desc = eo_sibling_rivalry.3.desc

	picture = GFX_evt_open_revolt
	show_sound = event_open_revolt

	is_triggered_only = yes

	trigger = {
		#NOT = {
		#	owner = { has_country_flag = first_faction }
		#}
	}

	immediate = {
		random_owned_pop = {
			species = {
				save_event_target_as = oppressed_species
			}
		}
		random_list = {
			10 = {
				set_name = {
					key = NAME_Liberationist_Faction_Planet
					variable_string = "[event_target:oppressed_species.GetHomeWorldName]"
				}
			}
			10 = {
				set_name = {
					key = NAME_Liberationist_Faction_Species
					variable_string = "[event_target:oppressed_species.GetName]"
				}
			}
		}
	}

	option = {
		name = OK
		hidden_effect = {
	#		owner = {
	#			every_owned_planet = {
	#				every_owned_pop = {
	#					force_faction_evaluation = yes
	#				}
	#			}
	#		}
		}
	}
}