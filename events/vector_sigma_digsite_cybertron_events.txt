##########################
#CYBERTRON DIG SITE EVENTS
##########################

namespace = vector_sigma

 # physics_research = 1000
 # society_research = 1000
 # engineering_research = 1000
 
###VECTOR SIGMA###
#On Entering the Hadean System
ship_event = {
	id = vector_sigma.0
	title = vector_sigma.0.name
	desc = {
		text = vector_sigma.0.cyber_desc
		trigger = {
			owner = {
				has_trait = trait_cybertronian
			}
		}
	}
	desc = {
		text = vector_sigma.0.desc
		trigger = {
			owner = {
				NOT = {
					has_trait = trait_cybertronian
				}
			}
		}
	}
	picture = GFX_evt_cybertron_shutdown_total

	is_triggered_only = yes
	
	trigger = {
		owner = {
			is_ai = no 
		}
	}
	
	immediate = {
		from = { create_archaeological_site = vector_sigma_site }
	}
	
	option = {
		name = vector_sigma.0.a
		trigger = {
			owner = {
				has_trait = trait_cybertronian
			}
		}
	}
	option = {
		name = vector_sigma.0.b
		trigger = {
			owner = {
				NOT = {
					has_trait = trait_cybertronian
				}
			}
		}
	}
}


#VECTOR SIGMA EVENT
# Archaelogical Site
#VECTOR SIGMA - STAGE 1
fleet_event = {
    id = vector_sigma.1
    title = "vector_sigma.1.name"
    desc = "vector_sigma.1.desc"
    picture = GFX_evt_vector_sigma_key_location ## Finding the Site to the Key
    show_sound = event_wind_ruins

    archaeology = yes

    is_triggered_only = yes
	
	immediate = {
		from = { set_site_progress_locked = yes }
	}

	after = { 
		from = { set_site_progress_locked = no } 
	}
	
    option = {
        name = vector_sigma.1.a
		small_artifact_reward = yes
    }
}
#VECTOR SIGMA - STAGE 2
fleet_event = {
    id = vector_sigma.2
    title = "vector_sigma.2.name"
    desc = vector_sigma.2.desc
    picture = GFX_evt_vector_sigma_crypt ## Finding the Key to Vector Sigma
    show_sound = event_super_explosion

    archaeology = yes

    is_triggered_only = yes
	
	immediate = {
		from = { set_site_progress_locked = yes }
	}

	after = { 
		from = { set_site_progress_locked = no } 
	}
	
    option = {
        name = vector_sigma.2.a
		small_artifact_reward = yes
    }
}

#VECTOR SIGMA - STAGE 3
fleet_event = {
    id = vector_sigma.3
    title = "vector_sigma.3.name"
    desc = "vector_sigma.3.desc"
    picture = GFX_evt_vector_sigma_location ## Found the Chamber of Vector Sigma
    show_sound = event_finding_loot

    archaeology = yes

    is_triggered_only = yes
	
	immediate = {
		from = { set_site_progress_locked = yes }
	}

	after = { 
		from = { set_site_progress_locked = no } 
	}
	
	option = {
        name = vector_sigma.3.a
		medium_artifact_reward = yes
    }
}
#VECTOR SIGMA - STAGE 4
fleet_event = {
    id = vector_sigma.4
    title = "vector_sigma.4.name"
    desc = "vector_sigma.4.desc"
    picture = GFX_evt_vector_sigma ## Vector Sigma Awakens
    show_sound = event_mystic_reveal
	
	archaeology = yes
    
	is_triggered_only = yes
	
	immediate = {
		from = { set_site_progress_locked = yes }
	}

	after = { 
		from = { set_site_progress_locked = no } 
	}
	
	option = {
		name = vector_sigma.4.a
		large_artifact_reward = yes
		owner = {
			give_technology = { tech = tech_energon_mining }
			add_relic = r_vector_sigma
		}
	}
}


country_event = {
	id = vector_sigma.101
	title = "vector_sigma.101.name"
	desc = "vector_sigma.101.desc"
	picture = GFX_evt_vector_sigma
	show_sound = event_finding_loot
	
	is_triggered_only = yes
	
	option = {
		name = "FASCINATING"
		locked_random_list = {
			10 = {
				add_random_research_option = {
					add_progress = 0.75
					area = engineering
					ignore_prereqs = no
					fail_effects = {
						add_monthly_resource_mult = {
							resource = engineering_research
							value = @tier5researchreward
							min = @tier5researchmin
							max = @tier5researchmax
						}
					}
				}
			}
			10 = {
				add_random_research_option = {
					add_progress = 0.75
					area = physics
					ignore_prereqs = no
					fail_effects = {
						add_monthly_resource_mult = {
							resource = physics_research
							value = @tier5researchreward
							min = @tier5researchmin
							max = @tier5researchmax
						}
					}
				}
			}
			10 = {
				add_random_research_option = {
					add_progress = 0.75
					area = society
					ignore_prereqs = no
					fail_effects = {
						add_monthly_resource_mult = {
							resource = society_research
							value = @tier5researchreward
							min = @tier5researchmin
							max = @tier5researchmax
						}
					}
				}
			}
		}
	}
}

#ALLSPARK RELIC ACTIVATION
country_event = {
	id = vector_sigma.102
	hide_window = yes
	
	is_triggered_only = yes
	
	immediate = {
		if = {
			limit = {
				OR = {
					has_ethic = ethic_gestalt_consciousness
					has_trait = trait_cybertronian
				}
			}
			give_technology = { tech = tech_positronic_implants }
		}
		else = {
			give_technology = { tech = tech_sapient_ai }
			give_technology = { tech = tech_synthetic_workers }
			give_technology = { tech = tech_synthetic_leaders }
		}
		trigger = {
			NOR = {
				has_technology = tech_sapient_ai
				has_technology = tech_positronic_implants
				has_technology = tech_synthetic_workers
				has_technology = tech_synthetic_leaders
			}
		}
	}
}