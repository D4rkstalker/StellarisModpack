namespace = pspetc

event = {
	id = pspetc.1000
	hide_window = yes
	fire_only_once = yes

	trigger = {
		any_planet = {
			exists = archaeological_site
			archaeological_site = { is_site_type = PSP_astanine_site_3 }
		}
		NOT = { any_planet = { has_planet_flag = pspmod_astanine_near_home_colony } }
	}

	immediate = {
		random_planet = {
			limit = {
				exists = archaeological_site
				archaeological_site = { is_site_type = PSP_astanine_site_3 }
			}
			set_planet_flag = pspmod_astanine_near_home_colony
		}
	}
}
country_event = {
	id = pspetc.1001
	hide_window = yes
	is_triggered_only = yes

	immediate = {
		random_planet = {
			limit = { has_planet_flag = pspmod_astanine_colony }
			spawn_system = {
				min_jumps = 0
				max_jumps = 0
				min_distance = 5
				max_distance = 20
				initializer = pspmod_astanine_home_system
			}
		}
		owner = {
			create_point_of_interest = {
				id = pspmod_astanine_hidden_planet_4
				name = "pspmod_astanine_colony_5_coordinates_poi"
				desc = "pspmod_astanine_colony_5_coordinates_desc"
				event_chain = pspmod_astanine_chain
				location = event_target:pspmod_astanine_home_planet
			}
			add_event_chain_counter = {
				event_chain = pspmod_astanine_chain
				counter = pspmod_astanine_colonies
				amount = 1
			}
		}
	}
}
country_event = {
	id = pspetc.1002
	hide_window = yes
	is_triggered_only = yes

	immediate = {
		closest_system = {
			limit = { pspmod_sless_digsite_spawn_rules_alt = yes }
			min_steps = 1
			max_steps = 20
			random_system_planet = {
				limit = {
					has_anomaly = no
					OR = {
						is_planet_class = pc_barren
						is_planet_class = pc_barren_cold
						is_planet_class = pc_nuked
					}
					NOR = {
						exists = archaeological_site
						has_planet_flag = precursor_world
						has_planet_flag = pspmod_sless_colony
					}
				}
				save_event_target_as = pspmod_sless_colony_2
			}
		}
		event_target:pspmod_sless_colony_2 = {
			set_planet_flag = pspmod_sless_colony
			create_archaeological_site = PSP_sless_alliance_site_2
		}
		country_event = { id = pspetc.1003 }
	}
}
country_event = {
	id = pspetc.1003
	title = "pspmod_sless.4.name"
	desc = "pspmod_sless.4.desc"
	picture = GFX_evt_metropolis
	is_triggered_only = yes

	option = {
		name = pspmod_sless.4.a
		owner = {
			add_resource = { minor_artifacts = 5 }
			add_event_chain_counter = {
				event_chain = pspmod_sless_chain
				counter = pspmod_sless_colonies
				amount = 1
			}
		}
	}
}