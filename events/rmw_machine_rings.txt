namespace = rmw_machine_rings

event = {
	id = rmw_machine_rings.1
	hide_window = yes
	is_triggered_only = yes
	
	immediate = {
		every_planet = {
			limit = {
				has_planet_flag = had_rings
				is_planet_class = pc_machine
			}
			solar_system = {
				IF = {
					limit = { NOT = { has_star_flag = needs_machine_ring_maintenance } }
					set_star_flag = needs_machine_ring_maintenance
				}
			}
		}
		while = {
			limit = { any_system = { has_star_flag = needs_machine_ring_maintenance } }
			random_system = {
				limit = { has_star_flag = needs_machine_ring_maintenance }
				every_system_ambient_object = {
					limit = { has_ambient_object_flag = machine_world_rings }
					destroy_ambient_object = this
				}
				every_system_planet = {
					limit = {
						has_planet_flag = had_rings
						is_planet_class = pc_machine
					}
					create_machine_planet_rings = yes
				}
				remove_star_flag = needs_machine_ring_maintenance
			}
		}
	}
}
