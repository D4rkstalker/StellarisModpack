################################
#
# Ancient Relics Events
#
###############################

namespace = ancrel

################################
#
# Archaeology Site: David
#
###############################

### Zroni Precursor Chain ###
fleet_event = { 
	id = ancrel.3
	title = "ancrel.3.name"
	desc = ancrel.3.desc
	picture = GFX_evt_baol_datacrystals
	show_sound = event_whispering
	location = from

	archaeology = yes

	is_triggered_only = yes

	option = {
		name = ancrel.3.a
		owner = {
			add_monthly_resource_mult = {
				resource = physics_research
				value = @tier1researchreward
				min = @tier1researchmin
				max = @tier1researchmax
			}
			add_monthly_resource_mult = {
				resource = society_research
				value = @tier1researchreward
				min = @tier1researchmin
				max = @tier1researchmax
			}
		}
	}
}

fleet_event = {
	id = ancrel.4
	title = "ancrel.3.name"
	desc = ancrel.4.desc
	picture = GFX_evt_zro_1
	show_sound = event_energy_field
	location = from

	archaeology = yes

	is_triggered_only = yes
	
	immediate = {
		if = {
			limit = {
				any_system = {
					has_access_fleet = root.owner
					NOR = {
						is_same_value = root.solar_system
						has_star_flag = first_zoroni_site@root.owner
						is_same_value = root.owner.capital_scope.solar_system
					}
					exists = owner
					owner = { is_same_value = root.owner }
					any_system_planet = {
						habitable_planet = yes
						is_colony = no
						has_anomaly = no
						NOT = { exists = archaeological_site }
					}
					distance = {
						source = root.solar_system
						use_bypasses = no
						min_jumps = 1
						max_jumps = 25
					}
				}
			}
			closest_system = {
				limit = {
					has_access_fleet = root.owner
					NOR = {
						is_same_value = root.solar_system
						has_star_flag = first_zoroni_site@root.owner
						is_same_value = root.owner.capital_scope.solar_system
					}
					exists = owner
					owner = { is_same_value = root.owner }
					any_system_planet = {
						habitable_planet = yes
						is_colony = no
						has_anomaly = no
						NOT = { exists = archaeological_site }
					}
				}
				min_steps = 1
				max_steps = 25
				random_system_planet = {
					limit = {
						habitable_planet = yes
						has_anomaly = no
						is_colony = no
						NOT = { exists = archaeological_site }
					}
					create_archaeological_site = zroni_digsite_2
					add_deposit = d_zro_deposit_3
				}
			}
		}
		else_if = {
			limit = {
				any_system = {
					has_access_fleet = root.owner
					NOR = {
						is_same_value = root.solar_system
						has_star_flag = first_zoroni_site@root.owner
						is_same_value = root.owner.capital_scope.solar_system
					}
					OR = {
						has_owner = no
						owner = { is_same_value = root.owner }
					}
					any_system_planet = {
						habitable_planet = yes
						is_colony = no
						has_anomaly = no
						NOT = { exists = archaeological_site }
					}
					distance = {
						source = root.solar_system
						use_bypasses = no
						min_jumps = 1
						max_jumps = 25
					}
				}
			}
			closest_system = {
				limit = {
					has_access_fleet = root.owner
					NOR = {
						is_same_value = root.solar_system
						has_star_flag = first_zoroni_site@root.owner
						is_same_value = root.owner.capital_scope.solar_system
					}
					OR = {
						has_owner = no
						owner = { is_same_value = root.owner }
					}
					any_system_planet = {
						habitable_planet = yes
						is_colony = no
						has_anomaly = no
						NOT = { exists = archaeological_site }
					}
				}
				min_steps = 1
				max_steps = 25
				random_system_planet = {
					limit = {
						habitable_planet = yes
						has_anomaly = no
						is_colony = no
						NOT = { exists = archaeological_site }
					}
					create_archaeological_site = zroni_digsite_2
					add_deposit = d_zro_deposit_3
				}
			}
		}
		else = {
			solar_system = {
				spawn_system = {
					min_distance >= 20
					max_distance <= 200
					initializer = "ancrel_expanded_init_zroni_1"
				}
			}
		}
	}

	option = {
		name = OK
		small_artifact_reward = yes
		owner = {
			IF = {
				limit = {
					is_regular_empire = yes
					NOR = { 
						has_technology = tech_psionic_theory
						has_tech_option = tech_psionic_theory
					}
				}
				add_research_option = tech_psionic_theory
				add_tech_progress = {
					tech = tech_psionic_theory
					progress = 0.25
				}
			}
			ELSE = {
				add_monthly_resource_mult = {
					resource = society_research
					value = @tier4researchreward
					min = @tier4researchmin
					max = @tier4researchmax
				}
			}
		}
	}
}

fleet_event = { 
	id = ancrel.5
	title = "ancrel.1.name"
	desc = ancrel.5.desc
	picture = GFX_evt_overgrown_city
	show_sound = event_wind_ruins
	location = from

	archaeology = yes

	is_triggered_only = yes

	option = {
		name = ancrel.3.a
		small_artifact_reward = yes
	}
}

fleet_event = { 
	id = ancrel.6
	title = "ancrel.3.name"
	desc = ancrel.6.desc
	picture = GFX_evt_zro_2
	show_sound = event_finding_loot
	location = from

	archaeology = yes

	is_triggered_only = yes
	
	immediate = {
		if = {
			limit = {
				any_system = {
					has_access_fleet = root.owner
					NOR = {
						is_same_value = root.solar_system
						has_star_flag = first_zoroni_site@root.owner
						is_same_value = root.owner.capital_scope.solar_system
					}
					exists = owner
					owner = { is_same_value = root.owner }
					any_system_planet = {
						habitable_planet = yes
						is_colony = no
						has_anomaly = no
						NOT = { exists = archaeological_site }
					}
					distance = {
						source = root.solar_system
						use_bypasses = no
						min_jumps = 1
						max_jumps = 10
					}
				}
			}
			closest_system = {
				limit = {
					has_access_fleet = root.owner
					NOR = {
						is_same_value = root.solar_system
						has_star_flag = first_zoroni_site@root.owner
						is_same_value = root.owner.capital_scope.solar_system
					}
					exists = owner
					owner = { is_same_value = root.owner }
					any_system_planet = {
						habitable_planet = yes
						is_colony = no
						has_anomaly = no
						NOT = { exists = archaeological_site }
					}
				}
				min_steps = 1
				max_steps = 10
				random_system_planet = {
					limit = {
						habitable_planet = yes
						has_anomaly = no
						is_colony = no
						NOT = { exists = archaeological_site }
					}
					create_archaeological_site = zroni_digsite_3
					add_deposit = d_zro_deposit_3
				}
			}
		}
		else_if = {
			limit = {
				any_system = {
					has_access_fleet = root.owner
					NOR = {
						is_same_value = root.solar_system
						has_star_flag = first_zoroni_site@root.owner
						is_same_value = root.owner.capital_scope.solar_system
					}
					OR = {
						has_owner = no
						owner = { is_same_value = root.owner }
					}
					any_system_planet = {
						habitable_planet = yes
						is_colony = no
						has_anomaly = no
						NOT = { exists = archaeological_site }
					}
					distance = {
						source = root.solar_system
						use_bypasses = no
						min_jumps = 1
						max_jumps = 10
					}
				}
			}
			closest_system = {
				limit = {
					has_access_fleet = root.owner
					NOR = {
						is_same_value = root.solar_system
						has_star_flag = first_zoroni_site@root.owner
						is_same_value = root.owner.capital_scope.solar_system
					}
					OR = {
						has_owner = no
						owner = { is_same_value = root.owner }
					}
					any_system_planet = {
						habitable_planet = yes
						is_colony = no
						has_anomaly = no
						NOT = { exists = archaeological_site }
					}
				}
				min_steps = 1
				max_steps = 10
				random_system_planet = {
					limit = {
						habitable_planet = yes
						has_anomaly = no
						is_colony = no
						NOT = { exists = archaeological_site }
					}
					create_archaeological_site = zroni_digsite_3
					add_deposit = d_zro_deposit_3
				}
			}
		}
		else = {
			solar_system = {
				spawn_system = {
					min_distance >= 20
					max_distance <= 200
					initializer = "ancrel_expanded_init_zroni_2"
				}
			}
		}
	}

	option = {
		name = OK
		small_artifact_reward = yes
	}
}

fleet_event = { 
	id = ancrel.7
	title = zroni_digsite_2
	desc = ancrel.7.desc
	picture = GFX_evt_zro_3
	show_sound = event_whispering
	location = from

	archaeology = yes

	is_triggered_only = yes

	option = {
		name = INTERESTING
		owner = {
			add_monthly_resource_mult = {
				resource = society_research
				value = @tier3researchreward
				min = @tier3researchmin
				max = @tier3researchmax
			}
		}
	}
}

fleet_event = { 
	id = ancrel.8
	title = zroni_digsite_2
	desc = ancrel.8.desc
	picture = GFX_evt_zro_3
	show_sound = event_finding_loot
	location = from

	archaeology = yes

	is_triggered_only = yes
	
	immediate = {
		if = {
			limit = {
				any_system = {
					has_access_fleet = root.owner
					NOR = {
						is_same_value = root.solar_system
						has_star_flag = first_zoroni_site@root.owner
						is_same_value = root.owner.capital_scope.solar_system
					}
					exists = owner
					owner = { is_same_value = root.owner }
					any_system_planet = {
						habitable_planet = yes
						is_colony = no
						has_anomaly = no
						NOT = { exists = archaeological_site }
					}
					distance = {
						source = root.solar_system
						use_bypasses = no
						min_jumps = 1
						max_jumps = 10
					}
				}
			}
			closest_system = {
				limit = {
					has_access_fleet = root.owner
					NOR = {
						is_same_value = root.solar_system
						has_star_flag = first_zoroni_site@root.owner
						is_same_value = root.owner.capital_scope.solar_system
					}
					exists = owner
					owner = { is_same_value = root.owner }
					any_system_planet = {
						habitable_planet = yes
						is_colony = no
						has_anomaly = no
						NOT = { exists = archaeological_site }
					}
				}
				min_steps = 1
				max_steps = 10
				random_system_planet = {
					limit = {
						habitable_planet = yes
						has_anomaly = no
						is_colony = no
						NOT = { exists = archaeological_site }
					}
					create_archaeological_site = zroni_digsite_4
					add_deposit = d_zro_deposit_3
				}
			}
		}
		else_if = {
			limit = {
				any_system = {
					has_access_fleet = root.owner
					NOR = {
						is_same_value = root.solar_system
						has_star_flag = first_zoroni_site@root.owner
						is_same_value = root.owner.capital_scope.solar_system
					}
					OR = {
						has_owner = no
						owner = { is_same_value = root.owner }
					}
					any_system_planet = {
						habitable_planet = yes
						is_colony = no
						has_anomaly = no
						NOT = { exists = archaeological_site }
					}
					distance = {
						source = root.solar_system
						use_bypasses = no
						min_jumps = 1
						max_jumps = 10
					}
				}
			}
			closest_system = {
				limit = {
					has_access_fleet = root.owner
					NOR = {
						is_same_value = root.solar_system
						has_star_flag = first_zoroni_site@root.owner
						is_same_value = root.owner.capital_scope.solar_system
					}
					OR = {
						has_owner = no
						owner = { is_same_value = root.owner }
					}
					any_system_planet = {
						habitable_planet = yes
						is_colony = no
						has_anomaly = no
						NOT = { exists = archaeological_site }
					}
				}
				min_steps = 1
				max_steps = 10
				random_system_planet = {
					limit = {
						habitable_planet = yes
						has_anomaly = no
						is_colony = no
						NOT = { exists = archaeological_site }
					}
					create_archaeological_site = zroni_digsite_4
					add_deposit = d_zro_deposit_3
				}
			}
		}
		else = {
			solar_system = {
				spawn_system = {
					min_distance >= 20
					max_distance <= 200
					initializer = "ancrel_expanded_init_zroni_3"
				}
			}
		}
	}

	option = {
		name = OK
		small_artifact_reward = yes
	}
}

fleet_event = { 
	id = ancrel.9
	title = zroni_digsite_2
	desc = ancrel.9.desc
	picture = GFX_evt_baol_datacrystals
	show_sound = event_whispering
	location = from

	archaeology = yes

	is_triggered_only = yes

	option = {
		name = ancrel.9.a
		small_artifact_reward = yes
	}
}

fleet_event = { 
	id = ancrel.10
	title = "ancrel.3.name"
	desc = ancrel.10.desc
	picture = GFX_evt_synth_sabotage
	show_sound = event_energy_field
	location = from

	archaeology = yes

	is_triggered_only = yes
	
	immediate = {
		if = {
			limit = {
				any_system = {
					has_access_fleet = root.owner
					NOR = {
						is_same_value = root.solar_system
						has_star_flag = first_zoroni_site@root.owner
						is_same_value = root.owner.capital_scope.solar_system
					}
					exists = owner
					owner = { is_same_value = root.owner }
					any_system_planet = {
						habitable_planet = yes
						is_colony = no
						has_anomaly = no
						NOT = { exists = archaeological_site }
					}
					distance = {
						source = root.solar_system
						use_bypasses = no
						min_jumps = 1
						max_jumps = 10
					}
				}
			}
			closest_system = {
				limit = {
					has_access_fleet = root.owner
					NOR = {
						is_same_value = root.solar_system
						has_star_flag = first_zoroni_site@root.owner
						is_same_value = root.owner.capital_scope.solar_system
					}
					exists = owner
					owner = { is_same_value = root.owner }
					any_system_planet = {
						habitable_planet = yes
						is_colony = no
						has_anomaly = no
						NOT = { exists = archaeological_site }
					}
				}
				min_steps = 1
				max_steps = 10
				random_system_planet = {
					limit = {
						habitable_planet = yes
						has_anomaly = no
						is_colony = no
						NOT = { exists = archaeological_site }
					}
					create_archaeological_site = zroni_digsite_5
					add_deposit = d_zro_deposit_4
				}
			}
		}
		else_if = {
			limit = {
				any_system = {
					has_access_fleet = root.owner
					NOR = {
						is_same_value = root.solar_system
						has_star_flag = first_zoroni_site@root.owner
						is_same_value = root.owner.capital_scope.solar_system
					}
					OR = {
						has_owner = no
						owner = { is_same_value = root.owner }
					}
					any_system_planet = {
						habitable_planet = yes
						is_colony = no
						has_anomaly = no
						NOT = { exists = archaeological_site }
					}
					distance = {
						source = root.solar_system
						use_bypasses = no
						min_jumps = 1
						max_jumps = 10
					}
				}
			}
			closest_system = {
				limit = {
					has_access_fleet = root.owner
					NOR = {
						is_same_value = root.solar_system
						has_star_flag = first_zoroni_site@root.owner
						is_same_value = root.owner.capital_scope.solar_system
					}
					OR = {
						has_owner = no
						owner = { is_same_value = root.owner }
					}
					any_system_planet = {
						habitable_planet = yes
						is_colony = no
						has_anomaly = no
						NOT = { exists = archaeological_site }
					}
				}
				min_steps = 1
				max_steps = 10
				random_system_planet = {
					limit = {
						habitable_planet = yes
						has_anomaly = no
						is_colony = no
						NOT = { exists = archaeological_site }
					}
					create_archaeological_site = zroni_digsite_5
					add_deposit = d_zro_deposit_4
				}
			}
		}
		else = {
			solar_system = {
				spawn_system = {
					min_distance >= 20
					max_distance <= 200
					initializer = "ancrel_expanded_init_zroni_4"
				}
			}
		}
	}

	option = {
		name = INTRIGUING 
		small_artifact_reward = yes		
	}
}

fleet_event = { 
	id = ancrel.11
	title = zroni_digsite_5
	desc = ancrel.11.desc
	picture = GFX_evt_dead_city
	show_sound = event_whispering
	location = from

	archaeology = yes

	is_triggered_only = yes

	option = {
		name = ancrel.3.a
		small_artifact_reward = yes
	}
}
fleet_event = { 
	id = ancrel.12
	title = "ancrel.3.name"
	desc = ancrel.12.desc
	picture = GFX_evt_zro_3
	show_sound = event_bad_omen
	location = from

	archaeology = yes

	is_triggered_only = yes

	option = {
		name = ancrel.12.a
		owner = {
			add_resource = { sr_zro = 100 }
		}
	}
}

fleet_event = { 
	id = ancrel.15
	title = zroni_digsite_6
	desc = ancrel.15.desc
	picture = GFX_evt_archaeological_dig
	show_sound = event_whispering
	location = from

	archaeology = yes

	is_triggered_only = yes

	option = {
		name = ancrel.101.a
		owner = {
			add_monthly_resource_mult = {
				resource = society_research
				value = @tier3researchreward
				min = @tier3researchmin
				max = @tier3researchmax
			}
		}
	}
}
fleet_event = { 
	id = ancrel.16
	title = "ancrel.3.name"
	desc = ancrel.16.desc
	picture = GFX_evt_zro_3
	show_sound = event_bad_omen
	location = from

	archaeology = yes

	is_triggered_only = yes

	option = {
		name = ancrel.16.a
		small_artifact_reward = yes
	}
}
fleet_event = { 
	id = ancrel.17
	title = "ancrel.3.name"
	desc = ancrel.17.desc
	picture = GFX_evt_zro_3
	show_sound = event_whispering
	location = from

	archaeology = yes

	is_triggered_only = yes

	option = {
		name = ancrel.16.a
		owner = {
			add_monthly_resource_mult = {
				resource = physics_research
				value = @tier4researchreward
				min = @tier4researchmin
				max = @tier4researchmax
			}
		}
	}
}
fleet_event = { 
	id = ancrel.18
	title = "ancrel.3.name"
	desc = ancrel.18.desc
	picture = GFX_evt_zro_5
	show_sound = event_screams
	location = from

	archaeology = yes

	is_triggered_only = yes

	option = {
		name = ancrel.18.a
		small_artifact_reward = yes
	}
}

#Relic world
fleet_event = { 
	id = ancrel.22
	title = "ancrel.21.name"
	desc = ancrel.22.desc
	picture = GFX_evt_relic_world
	show_sound = event_wind_ruins
	location = from

	archaeology = yes

	is_triggered_only = yes

	option = {
		name = ancrel.9.a
		owner = {
			add_monthly_resource_mult = {
				resource = physics_research
				value = @tier3researchreward
				min = @tier3researchmin
				max = @tier3researchmax
			}
		}
	}
}

### Archaeology Events ###
fleet_event = { #Contents revealed
	id = ancrel.103
	title = "ancrel.103.name"
	desc = ancrel.103.desc
	picture = GFX_evt_treasure_pile
	show_sound = event_door_opening
	location = from

	archaeology = yes

	is_triggered_only = yes

	option = {
		name = ancrel.103.a
		owner = {
			locked_random_list = {
				10 = {
					add_random_research_option = {
						add_progress = 0.99
						area = engineering
						tier = 2
						ignore_prereqs = no
						fail_effects = {
							add_random_research_option = {
								add_progress = 0.5
								area = engineering
								tier = 3
								ignore_prereqs = no
								fail_effects = {
									add_monthly_resource_mult = {
										resource = engineering_research
										value = @tier5researchreward
										min = @tier5researchmin
										max = @tier5researchmax
									}
								}
							}
						}
					}
				}
				10 = {
					add_random_research_option = {
						add_progress = 0.99
						area = physics
						tier = 2
						ignore_prereqs = no
						fail_effects = {
							add_random_research_option = {
								add_progress = 0.5
								area = physics
								tier = 3
								ignore_prereqs = no
								fail_effects = {
									add_monthly_resource_mult = {
										resource = physics_research
										value = @tier5researchreward
										min = @tier5researchmin
										max = @tier5researchmax
									}
								}
							}
						}
					}
				}
				10 = {
					add_random_research_option = {
						add_progress = 0.99
						area = society
						tier = 2
						ignore_prereqs = no
						fail_effects = {
							add_random_research_option = {
								add_progress = 0.5
								area = society
								tier = 3
								ignore_prereqs = no
								fail_effects = {
									add_monthly_resource_mult = {
										resource = society_research
										value = @tier5researchreward
										min = @tier5researchmin
										max = @tier5researchmax
									}
								}
							}
						}
					}
				}
				10 = {
					add_monthly_resource_mult = {
						resource = physics_research
						value = @tier4researchreward
						min = @tier4researchmin
						max = @tier4researchmax
					}
					add_monthly_resource_mult = {
						resource = society_research
						value = @tier4researchreward
						min = @tier4researchmin
						max = @tier4researchmax
					}
					add_monthly_resource_mult = {
						resource = engineering_research
						value = @tier4researchreward
						min = @tier4researchmin
						max = @tier4researchmax
					}
				}
			}
		}
	}
	
	after = {
		medium_artifact_reward = yes
	}
}

### Ruins (Aliens) ###
fleet_event = { 
	id = ancrel.104
	title = "ancrel.104.name"
	desc = ancrel.104.desc
	picture = GFX_evt_relic_world_street
	show_sound = event_wind_ruins
	location = from

	archaeology = yes

	is_triggered_only = yes
	
	immediate = {
		from = {
			planet = {
				every_deposit = {
					limit = { is_deposit_type = d_dangerous_wildlife_blocker }
					clear_blocker = yes
				}
				add_deposit = d_city_ruins
				add_deposit = d_radioactive_wasteland
				add_deposit = d_failing_infrastructure
				if = {
					limit = { NOT = { is_planet_class = pc_nuked } }
					add_modifier = {
						modifier = "recovered_tomb_world"
						days = -1
					}
				}
			}
		}
	}

	option = {
		name = OK
		owner = {
			add_monthly_resource_mult = {
				resource = physics_research
				value = @tier1researchreward
				min = @tier1researchmin
				max = @tier1researchmax
			}
			add_monthly_resource_mult = {
				resource = society_research
				value = @tier1researchreward
				min = @tier1researchmin
				max = @tier1researchmax
			}
		}
		tooltip = {
			from = {
				planet = {
					if = {
						limit = { NOT = { is_planet_class = pc_nuked } }
						add_modifier = {
							modifier = "recovered_tomb_world"
							days = -1
						}
					}
				}
			}
		}
	}
}
fleet_event = { 
	id = ancrel.105
	title = "ancrel.105.name"
	desc = ancrel.105.desc
	picture = GFX_evt_derelict_interior
	show_sound = event_whispering
	location = from

	archaeology = yes

	is_triggered_only = yes

	option = {
		name = OK
		small_artifact_reward = yes
	}
}
fleet_event = { 
	id = ancrel.106
	title = "ancrel.106.name"
	desc = ancrel.106.desc
	picture = GFX_evt_nuclear_explosion
	show_sound = event_screams
	location = from

	archaeology = yes

	is_triggered_only = yes

	option = {
		name = OK
		medium_artifact_reward = yes
		owner = {
			add_monthly_resource_mult = {
				resource = society_research
				value = @tier4researchreward
				min = @tier4researchmin
				max = @tier4researchmax
			}
		}
		from = {
			planet = {
				add_deposit = d_underground_vault
			}
		}
		solar_system = {
			random_system_planet = {
				limit = {
					is_colony = no
				}
				add_anomaly =  {
					category = ANCREL_ARC_CAT
				}
			}
		}
	}
}
ship_event = {
	id = ancrel.107
	title = "ancrel.107.name"
	desc = {
		text = ancrel.107.junk.desc
		trigger = {
			FROM = { has_planet_flag = aliens_site_junk }
		}
	}
	desc = {
		text = ancrel.107.nothing.desc
		trigger = {
			FROM = { has_planet_flag = aliens_site_nothing }
		}
	}
	desc = {
		text = ancrel.107.aliens1.desc
		trigger = {
			FROM = { has_planet_flag = aliens_site_aliens }
		}
	}
	desc = {
		text = ancrel.107.aliens2.desc
		trigger = {
			FROM = { has_planet_flag = aliens_site_badaliens }
		}
	}
	desc = {
		text = ancrel.107.nothing.desc
		#text = ancrel.107.fallback.desc
		trigger = {
			
		}
	}
	picture = GFX_evt_ship_in_orbit
	show_sound = event_finding_loot
	location = from

	immediate = {
		FROM = { 
			random_list = {
				20 = {
					set_planet_flag = aliens_site_junk
				}
				20 = {
					set_planet_flag = aliens_site_nothing
				}
				10 = {
					set_planet_flag = aliens_site_aliens
				}
				10 = {
					set_planet_flag = aliens_site_badaliens
				}
			}
		}
	}

	is_triggered_only = yes
	
	option = {
		exclusive_trigger = {
			FROM = { has_planet_flag = aliens_site_junk }
		}
		FROM = {
			if = {
				limit = { colonizeable_planet = yes }
				add_deposit = d_aliens_site_junk
			}
			else = {
				set_deposit = d_alloys_1
			}
		}
		owner = {
			add_resource = { alloys = 5000 }
		}
		name = EXCELLENT
	}
	option = {
		exclusive_trigger = {
			FROM = { has_planet_flag = aliens_site_nothing }
		}
		FROM = {
			if = {
				limit = { colonizeable_planet = yes }
				if = {
					limit = { NOT = { has_modifier = mineral_rich } }
					add_modifier = { modifier = mineral_rich days = -1 }
				}
				else = {
					add_deposit = d_rich_mountain
				}
				add_deposit = d_rich_mountain
			}
			else = {
				set_deposit = d_minerals_8
			}
		}
		name = CURIOUS
	}
	option = {
		exclusive_trigger = {
			FROM = { has_planet_flag = aliens_site_aliens }
		}
		owner = {
			hidden_effect = { set_country_flag = aliens_site_aliens_flag }
			if = {
				limit = {
					has_technology = tech_sensors_3
					NOT = { has_technology = tech_sensors_4 }
				}
				add_research_option = tech_sensors_4
				add_tech_progress = {
					tech = tech_sensors_4
					progress = 0.5
				}
			}
			else_if = {
				limit = {
					has_technology = tech_sensors_2
					NOT = { has_technology = tech_sensors_3 }
				}
				give_technology = { tech = tech_sensors_3 }
			}
			else_if = {
				limit = {
					NOT = { has_technology = tech_sensors_2 }
				}
				give_technology = { tech = tech_sensors_2 }
				add_monthly_resource_mult = {
                    resource = physics_research
                    value = @tier2researchreward
                    min = @tier2researchmin
                    max = @tier2researchmax
                }
			}
			else = {
				add_monthly_resource_mult = {
                    resource = physics_research
                    value = @tier5researchreward
                    min = @tier5researchmin
                    max = @tier5researchmax
                }
			}
		}
		name = INTERESTING
	}
	option = {
		trigger = {
			FROM = { has_planet_flag = aliens_site_badaliens }
		}
		owner = {
			hidden_effect = { set_country_flag = aliens_site_badaliens_flag }
			if = {
				limit = {
					NOT = { has_technology = tech_combat_training }
				}
				add_research_option = tech_combat_training
				add_tech_progress = {
					tech = tech_combat_training
					progress = 0.75
				}
			}
			else_if = {
				limit = {
					allows_slavery = yes
					is_gestalt = no
					NOT = { has_technology = tech_neural_implants }
				}
				give_technology = { tech = tech_neural_implants }
			}
			else_if = {
				limit = {
					allows_slavery = yes
					is_gestalt = no
					NOT = { has_technology = tech_slave_colonies }
				}
				add_research_option = tech_slave_colonies
				add_tech_progress = {
					tech = tech_slave_colonies
					progress = 0.33
				}
			}
			else = {
				add_monthly_resource_mult = {
                    resource = society_research
                    value = @tier5researchreward
                    min = @tier5researchmin
                    max = @tier5researchmax
                }
			}
		}
		name = INTERESTING
	}
	option = {
		trigger = {
			FROM = { has_planet_flag = aliens_site_badaliens }
			host_has_dlc = "Utopia"
			owner = {
				OR = {
					is_xenophobe = yes
					is_hive_empire = yes
				}
				OR = {
					is_ai = no
					has_valid_civic = civic_hive_devouring_swarm
					any_owned_pop = {
						has_citizenship_type = { type = citizenship_slavery }
						has_slavery_type = { type = slavery_livestock }
					}
				}
			}
		}
		owner = {
			hidden_effect = { set_country_flag = aliens_site_badaliens_flag }
			add_research_option = tech_pain_farms
			add_tech_progress = {
				tech = tech_pain_farms
				progress = 0.25
			}
		}
		name = ancrel.107.a
	}

	after = {
		owner = {
			add_resource = { minor_artifacts = 4 }
		}
		FROM = { 
			remove_planet_flag = aliens_site_junk
			remove_planet_flag = aliens_site_nothing
			remove_planet_flag = aliens_site_aliens
			remove_planet_flag = aliens_site_badaliens
		}
	}
}

### aliens ###
fleet_event = { #Ancient battle
	id = ancrel.108
	title = "ancrel.108.name"
	desc = ancrel.108.desc
	show_sound = event_dig_site
	picture = GFX_evt_habitable_dig_site
	location = from

	archaeology = yes

	is_triggered_only = yes

	option = {
		name = CURIOUS
		from = {
			planet = { add_deposit = d_battle_graveyard }
		}
	}
}
fleet_event = { #Contents revealed
	id = ancrel.109
	title = "ancrel.109.name"
	desc = ancrel.109.desc
	picture = GFX_evt_ground_combat
	show_sound = event_drilling
	location = from

	archaeology = yes

	is_triggered_only = yes

	option = {
		name = EXCELLENT
		owner = {
			hidden_effect = { set_country_flag = ancrel_109_completed } # for potential follow-up elsewhere
			locked_random_list = {
				10 = {
					add_random_research_option = {
						add_progress = 0.99
						area = engineering
						tier = 2
						ignore_prereqs = no
						fail_effects = {
							add_random_research_option = {
								add_progress = 0.5
								area = engineering
								tier = 3
								ignore_prereqs = no
								fail_effects = {
									add_monthly_resource_mult = {
										resource = engineering_research
										value = @tier5researchreward
										min = @tier5researchmin
										max = @tier5researchmax
									}
								}
							}
						}
					}
				}
				10 = {
					add_random_research_option = {
						add_progress = 0.99
						area = physics
						tier = 2
						ignore_prereqs = no
						fail_effects = {
							add_random_research_option = {
								add_progress = 0.5
								area = physics
								tier = 3
								ignore_prereqs = no
								fail_effects = {
									add_monthly_resource_mult = {
										resource = physics_research
										value = @tier5researchreward
										min = @tier5researchmin
										max = @tier5researchmax
									}
								}
							}
						}
					}
				}
				10 = {
					add_random_research_option = {
						add_progress = 0.99
						area = society
						tier = 2
						ignore_prereqs = no
						fail_effects = {
							add_random_research_option = {
								add_progress = 0.5
								area = society
								tier = 3
								ignore_prereqs = no
								fail_effects = {
									add_monthly_resource_mult = {
										resource = society_research
										value = @tier5researchreward
										min = @tier5researchmin
										max = @tier5researchmax
									}
								}
							}
						}
					}
				}
				10 = {
					add_monthly_resource_mult = {
						resource = physics_research
						value = @tier4researchreward
						min = @tier4researchmin
						max = @tier4researchmax
					}
					add_monthly_resource_mult = {
						resource = society_research
						value = @tier4researchreward
						min = @tier4researchmin
						max = @tier4researchmax
					}
					add_monthly_resource_mult = {
						resource = engineering_research
						value = @tier4researchreward
						min = @tier4researchmin
						max = @tier4researchmax
					}
				}
			}
		}
	}
	
	after = {
		medium_artifact_reward = yes
	}
}

################################
#
# Archaeology Site: Dee
#
###############################

# Baol Introduction
ship_event = {
	id = ancrel.2000
	title = "ancrel.2000.name"
	desc = "ancrel.2000.desc"
	picture = GFX_evt_baol_grunur
	show_sound = event_default
	location = from

	fire_only_once = yes
	
	is_triggered_only = yes
	
	trigger = {
		host_has_dlc = "Ancient Relics Story Pack"
		owner = { is_ai = no }
		solar_system = {
			has_star_flag = precursor_baol_1
			NOR = {
				is_same_value = root.owner.capital_scope.solar_system
				has_star_flag = sol_system
			}
		}
		FROM = { 
			has_anomaly = no 
			is_star = no
			NOT = { exists = archaeological_site }
			NOR = {
				is_planet_class = pc_gas_giant
				is_planet_class = pc_molten
			}
		}
		owner = {
			NOR = {
				has_country_flag = baol_intro
				has_country_flag = vultaum_intro
				has_country_flag = yuht_intro
				has_country_flag = first_league_intro
				has_country_flag = irassian_intro
				has_country_flag = cybrex_intro
				has_country_flag = zroni_intro
			}
		}
	}
	
	immediate = {
		owner = { set_country_flag = baol_intro }
		solar_system = { set_star_flag = first_grunur_site@root.owner }
	}
	
	option = {
		name = CURIOUS
		FROM = {
			if = {
				limit = {
					from = {
						OR = {
							is_planet_class = pc_barren
							is_planet_class = pc_barren_cold
						}
						planet_size > 9
						planet_size < 26
					}
				}
				custom_tooltip = TERRAFORMING_CANDIDATE_EFFECT
				hidden_effect = {
					from = {
						add_modifier = {
							modifier = "terraforming_candidate"
							days = -1
						}
					}		
				}
			}
		}
		hidden_effect = {
			owner = { country_event = { id = story.5 days = 30 } }
			from = { create_archaeological_site = grunur_digsite_1 }
		}
	}
}

# Former Baol Colony: The Shattered found
# Digsite 3 Stage 4
fleet_event = {
	id = ancrel.2011
	title = "ancrel.2011.name"
	desc = "ancrel.2011.desc"
	picture = GFX_evt_baol_datacrystals
	show_sound = event_finding_loot
	location = from

	archaeology = yes

	is_triggered_only = yes

	immediate = {
		if = {
			limit = {
				any_system = {
					has_access_fleet = root.owner
					NOR = {
						is_same_value = root.solar_system
						has_star_flag = first_grunur_site@root.owner
						has_star_flag = sol_system
					}
					exists = owner
					owner = { is_same_value = root.owner }
					any_system_planet = {
						habitable_planet = yes
						NOT = { is_planet_class = pc_city }
						has_anomaly = no
						NOT = { exists = archaeological_site }
						is_colony = no
					}
				}
			}
			closest_system = {
				limit = {
					has_access_fleet = root.owner
					NOR = {
						is_same_value = root.solar_system
						has_star_flag = first_grunur_site@root.owner
						has_star_flag = sol_system
					}
					exists = owner
					owner = { is_same_value = root.owner }
					any_system_planet = {
						habitable_planet = yes
						NOT = { is_planet_class = pc_city }
						has_anomaly = no
						NOT = { exists = archaeological_site }
						is_colony = no
					}
					distance = {
						source = root.solar_system
						use_bypasses = no
						min_jumps = 1
						max_jumps = 10
					}
				}
				min_steps = 1
				max_steps = 10
				random_system_planet = {
					limit = {
						habitable_planet = yes
						NOT = { is_planet_class = pc_city }
						has_anomaly = no
						NOT = { exists = archaeological_site }
						is_colony = no
					} 
					save_event_target_as = baol_colony_3
				}
			}
		}
		else_if = {
			limit = {
				any_system = {
					has_access_fleet = root.owner
					NOR = {
						is_same_value = root.solar_system
						has_star_flag = first_grunur_site@root.owner
						has_star_flag = sol_system
					}
					OR = {
						has_owner = no
						owner = { is_same_value = root.owner }
					}
					any_system_planet = {
						habitable_planet = yes
						NOT = { is_planet_class = pc_city }
						has_anomaly = no
						NOT = { exists = archaeological_site }
						is_colony = no
					}
				}
			}
			closest_system = {
				limit = {
					has_access_fleet = root.owner
					NOR = {
						is_same_value = root.solar_system
						has_star_flag = first_grunur_site@root.owner
						has_star_flag = sol_system
					}
					OR = {
						has_owner = no
						owner = { is_same_value = root.owner }
					}
					any_system_planet = {
						habitable_planet = yes
						NOT = { is_planet_class = pc_city }
						has_anomaly = no
						NOT = { exists = archaeological_site }
						is_colony = no
					}
					distance = {
						source = root.solar_system
						use_bypasses = no
						min_jumps = 1
						max_jumps = 10
					}
				}
				min_steps = 1
				max_steps = 10
				random_system_planet = {
					limit = {
						habitable_planet = yes
						NOT = { is_planet_class = pc_city }
						has_anomaly = no
						NOT = { exists = archaeological_site }
						is_colony = no
					} 
					save_event_target_as = baol_colony_3
				}
			}
		}
		else = {
			solar_system = {
				spawn_system = {
					min_distance >= 10
					max_distance <= 100
					initializer = "ancrel_expanded_init_baol_1"
				}
			}
			random_planet = {
				limit = { has_planet_flag = baol_expanded_planet }
				save_event_target_as = baol_colony_3
			}
		}
	}

	option = {
		name = "ancrel.2011.a"
		owner = {
			add_resource = { minor_artifacts = 5 }
		}
		event_target:baol_colony_3 = {
			enable_special_project = {
				name = "BAOL_COLONY_3"
				location = this
				owner = root.owner
			}
		}
	}
}

planet_event = { #Baol Life-Seeding complete
	id = ancrel.2025
	title = "ancrel.2025.name"
	desc = {
		trigger = {
			owner = { NOT = { has_country_flag = has_used_baol_lifseeding } }
		}
		text = ancrel.2025.desc.first
	}
	desc = {
		trigger = {
			owner = { has_country_flag = has_used_baol_lifseeding }
		}
		text = ancrel.2025.desc
	}
	picture = GFX_evt_gaia
	location = root
	show_sound = event_mystic_reveal

	is_triggered_only = yes

	after = {
		owner = {
			set_country_flag = has_used_baol_lifseeding
		}
		hidden_effect = {
			if = {
				limit = { has_planet_flag = damaged_homeworld }
				planet_event = { id = countryexpanded.22 }
			}
			if = {
				limit = { has_planet_flag = has_new_frontiers_mod }
				planet_event = { id = newfrontiers_action.2 }
			}
			planet_event = { id = action.68 }
		}
	}

	option = {
		exclusive_trigger = {
			owner = { has_valid_civic = civic_machine_terminator }
		}
		name = EXTERMINATE
	}
	option = {
		exclusive_trigger = {
			owner = { has_valid_civic = civic_hive_devouring_swarm }
		}
		name = PREY
	}
	option = {
		exclusive_trigger = {
			owner = { has_valid_civic = civic_fanatic_purifiers }
		}
		name = SCUM
	}
	option = {
		trigger = {
			owner = {
				OR = {
					has_ethic = ethic_xenophile
					has_ethic = ethic_fanatic_xenophile
					has_valid_civic = civic_machine_servitor
				}
			}
		}
		name = ancrel.2025.a
	}
	option = {
		trigger = {
			owner = {
				allows_purge = yes
			}
		}
		name = ancrel.2025.b
	}
	option = {
		trigger = {
			owner = {
				OR = {
					has_valid_civic = civic_barbaric_despoilers
					has_ascension_perk = ap_nihilistic_acquisition
					has_policy_flag = slavery_allowed
					has_ethic = ethic_gestalt_consciousness
				}
				NOT = { has_valid_civic = civic_machine_servitor }
			}
		}
		name = ancrel.2025.c
	}
	option = {
		name = INCREDIBLE
	}
}

### The Host
# The Host Stage 3
fleet_event = {
	id = ancrel.2072
	title = "ancrel.2072.name"
	desc = "ancrel.2072.desc"
	picture = GFX_evt_analyzing_artifacts
	show_sound = event_dangerous_animals
	location = from

	archaeology = yes

	is_triggered_only = yes

	option = {
		name = "ancrel.2072.a.swarm"
		exclusive_trigger = {
			owner = { has_civic = civic_hive_devouring_swarm }
		}
		owner = {
			IF = {
				limit = {
					NOT = { has_technology = tech_colonization_3 }
					OR = {
						is_machine_empire = no
						has_civic = civic_machine_servitor
						has_civic = civic_machine_assimilator
					}
				}
				give_technology = { tech = tech_colonization_3 }
			}
			else_if = {
				limit = {
					NOT = { has_technology = tech_society_2 }
				}
				give_technology = { tech = tech_society_2 }
			}
			ELSE = {
				add_monthly_resource_mult = {
					resource = society_research
					value = @tier4researchreward
					min = @tier4researchmin
					max = @tier4researchmax
				}
			}
		}
	}
	option = {
		name = "ancrel.2072.a"
		owner = {
			IF = {
				limit = {
					NOT = { has_technology = tech_colonization_3 }
					OR = {
						is_machine_empire = no
						has_civic = civic_machine_servitor
						has_civic = civic_machine_assimilator
					}
				}
				give_technology = { tech = tech_colonization_3 }
			}
			else_if = {
				limit = {
					NOT = { has_technology = tech_society_2 }
				}
				give_technology = { tech = tech_society_2 }
			}
			ELSE = {
				add_monthly_resource_mult = {
					resource = society_research
					value = @tier4researchreward
					min = @tier4researchmin
					max = @tier4researchmax
				}
			}
		}
	}
}

################################
#
# Archaeology Site: Miranda
#
###############################

#### Whispers in the Stone ####
# An Ancient civilization of Lithoids

# Gate event
country_event = {
    id = ancrel.4008
	hide_window = yes

	is_triggered_only = yes 
    
    trigger = {
    	has_ancrel = yes
    	is_ai = no
    	last_increased_tech = tech_mining_3
    	any_owned_planet = {
			OR = {
				num_districts = { type = district_mining value > 1 }
				num_districts = { type = district_mining_uncapped value > 1 }
			}
			NOT = { exists = archaeological_site }
   		}

   		NOT = {
   			any_country = {
   				has_country_flag = discovered_lihtoids_arc_site
   			}
   		}
    }

    immediate = {
    	random_list = {
    		5 = {
				modifier = {
					factor = 9 # 32% chance for single player
					is_ai = no
					NOT = {
						count_country = {
							limit = { is_ai = no }
							count > 1
						}
					}
				}
				modifier = {
					factor = 4 # 17% chance for multiplayer
					is_ai = no
					count_country = {
						limit = { is_ai = no }
						count > 1
					}
				}
    			random_owned_planet = {
    				limit = {
   						OR = {
							num_districts = { type = district_mining value > 1 }
							num_districts = { type = district_mining_uncapped value > 1 }
						}
						NOT = { exists = archaeological_site }
    				}
    				planet_event = { id = ancrel.4000 days = 30 random = 90 }
    			}
    			set_country_flag = discovered_lihtoids_arc_site
    		}
    		95 = {}
    	}
    }
}

# Stage 5
fleet_event = {
	id = ancrel.4005
	title = ancrel.4005.name
	desc = ancrel.4005.desc
	picture = GFX_evt_underground_city
	show_sound = event_whispering
	location = from

	archaeology = yes

	is_triggered_only = yes
	
	immediate = {
		owner = { set_country_flag = lithoid_crystal_plant } # unlocks building_crystal_plant_2
		from = {
			set_site_progress_locked = yes
			planet = { remove_modifier = lithoids_arc_site_minerals }
		}
	}

	after = { 
		from = { set_site_progress_locked = no } 
	}

	option = {
		name = REMARKABLE
		custom_tooltip = ancrel.4004.tooltip
		owner = {
			add_resource = { rare_crystals = 500 }
			large_artifact_reward = yes
			if = {
				limit = {
					NOT = { has_technology = tech_rare_crystals }
				}
				give_technology = { tech = tech_rare_crystals } # Gives unique building 
			}
			if = {
				limit = {
					is_xenophobe = no
					OR = {
						is_xenophile = yes
						is_pacifist = yes
					}
				}
				gain_negative_media_coverage = yes # you murderer!
			}
		}
	}
}

#### The Rubricator ###
#A society of hoarders
# Special Project Complete
ship_event = {
	id = ancrel.4011
	title = ancrel.4011.name
	desc = ancrel.4011.desc
	picture = GFX_evt_space_debris
	show_sound = event_ship_bridge
	location = from

	is_triggered_only = yes

	option = {
		name = ancrel.4011.a
		begin_event_chain = {
			event_chain = "rubricator_chain"
			target = this.owner
		}

		hidden_effect = {
			if = {
				limit = { exists = event_target:rubricator_planet }
				create_point_of_interest = {
					id = hidden_planet
					name = "rubricator_coordinates_poi"
					desc = rubricator_coordinates_desc
					event_chain = rubricator_chain
					location = event_target:rubricator_planet
				}
			}
			else = {
				closest_system = {
					min_steps = 2
					max_steps = 4
					limit = {
						has_access_fleet = root.owner
						OR = {
							has_owner = no
							is_owned_by = root.owner
						}
						NOT = {
							any_ship_in_system = {
								owner = { 
									is_hostile = root.owner
								}
							}
						}
					}
					spawn_system = {
						min_distance >= 6
						max_distance <= 10
						initializer = rubricator_system
					}
					if = {
						limit = {
							any_system = {
								has_star_flag = rubricator_system
								NOT = { has_hyperlane_to = prev }
							}
						}
						random_system = {
							limit = {
								has_star_flag = rubricator_system
								NOT = { has_hyperlane_to = prev }
							}
							add_hyperlane = { from = this to = prev }
						}
					}
				}
				create_point_of_interest = {
					id = hidden_planet
					name = "rubricator_coordinates_poi"
					desc = rubricator_coordinates_desc
					event_chain = rubricator_chain
					location = event_target:rubricator_planet
				}
			}
		}
		
	}
	option = {
		name = ancrel.4011.b
	}
}

### The Oracle  ###
# Gateway event
planet_event = {
    id = ancrel.4030
	hide_window = yes

   	is_triggered_only = yes

   	trigger = {
   		has_ancrel = yes
		NOT = { exists = archaeological_site }
   		From = {
   			OR = {
   				is_deposit_type = d_dense_jungle
   				is_deposit_type = d_toxic_kelp
   				is_deposit_type = d_deep_sinkhole
   				is_deposit_type = d_collapsed_sinkhole
   				is_deposit_type = d_deep_sinkhole_mesa
   				is_deposit_type = d_quicksand_basin
   				is_deposit_type = d_noxious_swamp
   				is_deposit_type = d_noxious_swamp_bubbling
   				is_deposit_type = d_massive_glacier
   				is_deposit_type = d_exofungus_blocker
   				is_deposit_type = d_mountain_range
   			}
   		}
   		owner = {
   			is_ai = no
   		}
		NOT = {
			any_country = {
				has_country_flag = triggered_the_oracle_digsite
			}
		}
   	}

   	immediate = {
   		random_list = {
   			5 = {
				if = {
					limit = {
						from = {
							is_deposit_type = d_dense_jungle
						}
					}
					set_planet_flag = oracle_d_dense_jungle
				}
				if = {
					limit = {
						from = {
							is_deposit_type = d_exofungus_blocker
						}
					}
					set_planet_flag = oracle_d_exofungus
				}
				if = {
					limit = {
						from = {
							is_deposit_type = d_mountain_range
						}
					}
					set_planet_flag = oracle_d_mountain_range
				}
				if = {
					limit = {
						from = { is_deposit_type = d_toxic_kelp }
					}
					set_planet_flag = oracle_d_toxic_kelp
				}
				if = {
					limit = {
						from = {
							OR = {
								is_deposit_type = d_deep_sinkhole
								is_deposit_type = d_collapsed_sinkhole
								is_deposit_type = d_deep_sinkhole_mesa
							}
						}
					}
					set_planet_flag = oracle_d_deep_sinkhole
				}
				if = {
					limit = {
						from = { is_deposit_type = d_quicksand_basin }
					}
					set_planet_flag = oracle_d_quicksand_basin
				}
				if = {
					limit = {
						from = {
							OR = {
								is_deposit_type = d_noxious_swamp
								is_deposit_type = d_noxious_swamp_bubbling
							}
						}
					}
					set_planet_flag = oracle_d_noxious_swamp
				}
				if = {
					limit = {
						from = { is_deposit_type = d_massive_glacier }
					}
					set_planet_flag = oracle_d_massive_glacier
				}
   				planet_event = { id = ancrel.4031 days = 1 }
   				owner = {
   					set_country_flag = triggered_the_oracle_digsite
   				}
   			}

   			95 = {}
   		}
   	}
}
# Site Discovery
planet_event = {
    id = ancrel.4031
	title = ancrel.4031.name
	desc = {
		trigger = {
			has_planet_flag = oracle_d_dense_jungle
		}
		text = ancrel.4031.desc_jungle
	}
	desc = {
		trigger = {
			has_planet_flag = oracle_d_exofungus
		}
		text = ancrel.4031.desc_exofungus
	}
	desc = {
		trigger = {
			has_planet_flag = oracle_d_mountain_range
		}
		text = ancrel.4031.desc_mountain
	}
	desc = {
		trigger = {
			has_planet_flag = oracle_d_toxic_kelp
		}
		text = ancrel.4031.desc_kelp
	}
	desc = {
		trigger = {
			has_planet_flag = oracle_d_deep_sinkhole
		}
		text = ancrel.4031.desc_sinkhole
	}
	desc = {
		trigger = {
			has_planet_flag = oracle_d_quicksand_basin
		}
		text = ancrel.4031.desc_basin
	}
	desc = {
		trigger = {
			has_planet_flag = oracle_d_noxious_swamp
		}
		text = ancrel.4031.desc_swamp
	}
	desc = {
		trigger = {
			has_planet_flag = oracle_d_massive_glacier
		}
		text = ancrel.4031.desc_glacier
	}
	picture = GFX_evt_crashed_station
	show_sound = event_mystic_reveal
	location = this

   	is_triggered_only = yes

    option = {
		name = ancrel.4031.a
		create_archaeological_site = oracle_digsite
		add_deposit = d_archaeological_site
		save_global_event_target_as = oracle_digsite_planet
	}

	option = {
		name = ancrel.4031.b
	}
	after = {
		remove_planet_flag = oracle_d_dense_jungle
		remove_planet_flag = oracle_d_exofungus
		remove_planet_flag = oracle_d_mountain_range
		remove_planet_flag = oracle_d_toxic_kelp
		remove_planet_flag = oracle_d_deep_sinkhole
		remove_planet_flag = oracle_d_quicksand_basin
		remove_planet_flag = oracle_d_noxious_swamp
		remove_planet_flag = oracle_d_massive_glacier
	}
}

### Church of the Endless expanse
# Stage 4
fleet_event = {
    id = ancrel.4046
	title = ancrel.4046.name
	desc = ancrel.4046.desc
	picture = GFX_evt_surreal_visions
	show_sound = event_airlock
	location = from
	
	archaeology = yes

   	is_triggered_only = yes

   	immediate = {
		from = { set_site_progress_locked = yes }
	}

	after = { 
		from = { set_site_progress_locked = no } 
	}

    option = {
    	name = ancrel.4046.a
    	small_artifact_reward = yes
    	trigger = {
    		root.owner = {
    			NOR = {
    				has_ethic = ethic_xenophobe
    				has_ethic = ethic_fanatic_xenophobe
    			}
    		}
    	}
    	root.owner = {
    		home_planet = {
    			add_modifier = {
    				modifier = the_memorex
    			}
    		}
    	}
		custom_tooltip = ancrel.4046.a.tooltip
	}
	option = {
    	name = ancrel.4046.b
    	small_artifact_reward = yes
    	owner = { 
    		add_resource = {
    			influence = 500
    			alloys = 4000
				rare_crystals = 200
    		}
    	}
	}
	option = {
    	name = ancrel.4046.c
    	small_artifact_reward = yes
    	trigger = {
    		root.owner = {
    			OR = {
    				has_ethic = ethic_xenophobe
    				has_ethic = ethic_fanatic_xenophobe
    			}
    		}
    	}
    	root.owner = {
    		home_planet = {
    			add_modifier = {
    				modifier = the_memorex
    			}
    		}
    	}
		custom_tooltip = ancrel.4046.a.tooltip
	}
}

################################
#
# Archaeology Site: Henrik
#
###############################

### Archaeology: Hunting Grounds

# Spawn Site
planet_event = {
	id = ancrel.6049
	title = "ancrel.6049.name"
	desc = "ancrel.6049.desc"
	picture = GFX_evt_archaeology_camp
	show_sound = event_dig_site

	pre_triggers = {
		has_owner = yes
		is_homeworld = no
		original_owner = yes
		is_ai = no
		has_ground_combat = no
		is_capital = no
		is_occupied_flag = no
	}

	trigger = {
		has_ancrel = yes
		num_pops > 0
		habitable_planet = yes
		NOT = { exists = archaeological_site }
		NOR = { 
			has_global_flag = arc_hunting_grounds
			has_planet_flag = colony_event
		}
	}

	is_triggered_only = yes

	immediate = {
		set_global_flag = arc_hunting_grounds
		set_planet_flag = colony_event
	}
	
	option = {
		name = CURIOUS
		create_archaeological_site = site_hunting_ground
	}
}

### Archaeology: Zarqlan the Prophet

# Spawning Event (HIDDEN)
event = {
	id = ancrel.6098
	hide_window = yes
	
	is_triggered_only = yes

	trigger = {
		mid_game_years_passed >= 20
		OR = {
			NOT = { end_game_years_passed >= 100 }
			count_country = {
				limit = { is_ai = no }
				count > 1
			}
		}
		has_ancrel = yes
		NOT = { has_global_flag = zarqlan_spawned }
		has_crisis = no
		any_country = {
			OR = {
				is_country_type = fallen_empire
				is_country_type = awakened_fallen_empire
			}
			has_country_flag = fallen_empire_2
			any_playable_country = {
				is_ai = no
				has_communications = prev
			}
		}
	}

	immediate = {
		random_list = {
			100 = {}
			5 = {
				set_global_flag = zarqlan_spawned
				random_country = {
					limit = {
						OR = {
							is_country_type = fallen_empire
							is_country_type = awakened_fallen_empire
						}
						has_country_flag = fallen_empire_2
					}
					save_event_target_as = spiritualist_fallen_empire
				}
				random_playable_country = {
					limit = {
						is_ai = no
						has_communications = event_target:spiritualist_fallen_empire
					}
					country_event = { id = ancrel.6099 days = 1 random = 350 }
				}
			}
		}
	}
}

# Fallen Empire Transmission
country_event = {
	id = ancrel.6130
	title = TRANSMISSION
	desc = {
		text = "ancrel.6130.desc"
		trigger = {
			is_robot_empire = no
			is_homicidal = no
		}
	}
	desc = {
		text = "ancrel.6130.desc.robot"
		trigger = {
			is_robot_empire = yes
			is_homicidal = no
		}
	}
	desc = {
		text = "ancrel.6130.desc.homicidal"
		trigger = {
			is_homicidal = yes
		}
	}
	
	diplomatic = yes
	
	is_triggered_only = yes
	
	picture_event_data = {
		portrait = event_target:spiritualist_fallen_empire
		planet_background = event_target:spiritualist_fallen_empire
		graphical_culture = event_target:spiritualist_fallen_empire
		city_level = event_target:spiritualist_fallen_empire
		room = event_target:spiritualist_fallen_empire.ruler
	}

	trigger = {
		any_country = {
			OR = {
				is_country_type = fallen_empire
				is_country_type = awakened_fallen_empire
			}
			has_country_flag = fallen_empire_2
			has_communications = root
		}
	}
	
	immediate = {
		random_country = {
			limit = {
				OR = {
					is_country_type = fallen_empire
					is_country_type = awakened_fallen_empire
				}
				has_country_flag = fallen_empire_2
			}
			save_event_target_as = spiritualist_fallen_empire
			add_opinion_modifier = {
				who = root
				modifier = opinion_zarqlans_chosen
			}
		}
	}
	option = {
		name = ancrel.6130.a
		add_modifier = {
			modifier = chosen_of_zarqlan
		}
	}
	option = {
		name = ancrel.6130.b
		exclusive_trigger = {
			OR = {
				is_materialist = yes
				is_xenophobe = yes
			}
			is_spiritualist = no
			is_robot_empire = no
			is_homicidal = no
		}
		add_modifier = {
			modifier = chosen_of_zarqlan
		}
		hidden_effect = {
			country_event = { id = countryexpanded.105 }
		}
	}
	option = {
		name = ancrel.6130.b
		exclusive_trigger = {
			OR = {
				is_materialist = yes
				is_xenophobe = yes
				is_machine_empire = yes
			}
			is_robot_empire = yes
			is_spiritualist = no
			is_homicidal = no
		}
		response_text = ancrel.6130.b.response
		add_modifier = {
			modifier = chosen_of_zarqlan
		}
	}
	option = {
		name = ancrel.6130.fp
		exclusive_trigger = { has_valid_civic = civic_fanatic_purifiers }
		add_modifier = {
			modifier = chosen_of_zarqlan
		}
	}
	option = {
		name = TASTY
		exclusive_trigger = { has_valid_civic = civic_hive_devouring_swarm }
		add_modifier = {
			modifier = chosen_of_zarqlan
		}
	}
	option = {
		name = ancrel.6130.de
		exclusive_trigger = { has_valid_civic = civic_machine_terminator }
		add_modifier = {
			modifier = chosen_of_zarqlan
		}
	}
}

### Archaeology: Star Petal
# Stage 1 - Pleasure Planet
fleet_event = {
	id = ancrel.6200
	title = "ancrel.6200.name"
	desc = "ancrel.6200.desc"
	picture = GFX_evt_gas_giant_station
	show_sound = event_metal_fatigue
	
	archaeology = yes

	is_triggered_only = yes
	
	immediate = {
		from = { set_site_progress_locked = yes }
	}

	after = { 
		from = { set_site_progress_locked = no } 
	}
	
	option = {
		name = CURIOUS
		small_artifact_reward = yes
		owner = {
			if = {
				limit = { is_gestalt = no }
				add_monthly_resource_mult = {
					resource = energy
					value = @tier1materialreward
					min = @tier1materialmin
					max = @tier1materialmax
				}
				add_monthly_resource_mult = {
					resource = consumer_goods
					value = @tier1materialreward
					min = @tier1materialmin
					max = @tier1materialmax
				}
			}
			else = {
				add_monthly_resource_mult = {
					resource = energy
					value = @tier2materialreward
					min = @tier2materialmin
					max = @tier2materialmax
				}
			}
		}
	}
}
# Stage 2 - The Star Petal
fleet_event = {
	id = ancrel.6205
	title = "ancrel.6205.name"
	desc = "ancrel.6205.desc"
	picture = GFX_evt_derelict_interior
	show_sound = event_whispering
	
	archaeology = yes

	is_triggered_only = yes
	
	immediate = {
		from = { set_site_progress_locked = yes }
	}

	after = { 
		from = { set_site_progress_locked = no } 
	}
	
	option = {
		name = CURIOUS
		small_artifact_reward = yes
		owner = {
			if = {
				limit = {
					has_tech_option = tech_resort_colonies
				}
				add_research_option = tech_resort_colonies
				add_tech_progress = {
					tech = tech_resort_colonies
					progress = 0.05
				}
			}
			else_if = {
				limit = {
					NOT = { has_technology = tech_resort_colonies }
					is_gestalt = no
				}
				add_research_option = tech_resort_colonies
			}
			else = {
				add_monthly_resource_mult = {
					resource = society_research
					value = @tier1researchreward
					min = @tier1researchmin
					max = @tier1researchmax
				}
			}
		}
	}
}

# Stage 4 - Heart of the Pulsar
fleet_event = {
	id = ancrel.6215
	title = "ancrel.6215.name"
	desc = "ancrel.6215.desc"
	picture = GFX_evt_analyzing_artifacts
	show_sound = event_finding_loot
	
	archaeology = yes

	is_triggered_only = yes
	
	immediate = {
		from = { set_site_progress_locked = yes }
	}

	after = { 
		from = { set_site_progress_locked = no } 
	}
	
	option = {
		name = CURIOUS
		custom_tooltip = ancrel.6215.a.tooltip
		medium_artifact_reward = yes
		owner = {
			if = {
				limit = { is_gestalt = no }
				add_resource = { energy = 3000 }
				add_resource = { consumer_goods = 1000 }
			}
			else = {
				add_resource = { energy = 4000 }
			}
			set_country_flag = star_petal_completed # ability to make luxury habitats
		}
	}
}

### Archaeology: Robot Debris
# Stage 3 - The Treaty
fleet_event = {
	id = ancrel.6260
	title = "ancrel.6260.name"
	desc = "ancrel.6260.desc"
	picture = GFX_evt_barren_dig_site
	show_sound = event_finding_loot
	
	archaeology = yes

	is_triggered_only = yes
	
	immediate = {
		from = { set_site_progress_locked = yes }
	}

	after = { 
		from = { set_site_progress_locked = no } 
	}
	
	option = {
		name = CURIOUS
		medium_artifact_reward = yes
		owner = {
			if = {
				limit = { NOT = { has_technology = tech_powered_exoskeletons } }
				give_technology = { tech = tech_powered_exoskeletons }
			}
			if = {
				limit = {
					NOT = { has_technology = tech_robotic_workers }
					is_gestalt = no
				}
				give_technology = { tech = tech_robotic_workers }
				add_monthly_resource_mult = {
					resource = engineering_research
					value = @tier4researchreward
					min = @tier4researchmin
					max = @tier4researchmax
				}
			}
			else_if = {
				limit = {
					NOT = { has_technology = tech_robomodding }
					is_gestalt = no
				}
				give_technology = { tech = tech_robomodding }
				add_monthly_resource_mult = {
					resource = engineering_research
					value = @tier3researchreward
					min = @tier3researchmin
					max = @tier3researchmax
				}
			}
			else_if = {
				limit = {
					NOT = { has_technology = tech_droid_workers }
					is_gestalt = no
				}
				give_technology = { tech = tech_droid_workers }
				add_monthly_resource_mult = {
					resource = engineering_research
					value = @tier2researchreward
					min = @tier2researchmin
					max = @tier2researchmax
				}
			}
			else_if = {
				limit = {
					NOT = { has_technology = tech_robomodding_points_1 }
					is_gestalt = no
				}
				add_research_option = tech_robomodding_points_1
				add_tech_progress = {
					tech = tech_robomodding_points_1
					progress = 0.80
				}
			}
			else_if = {
				limit = {
					NOT = { has_technology = tech_robomodding_points_2 }
					is_gestalt = no
				}
				add_research_option = tech_robomodding_points_2
				add_tech_progress = {
					tech = tech_robomodding_points_2
					progress = 0.25
				}
			}
			else_if = {
				limit = {
					NOT = { has_technology = tech_robomodding_m }
					has_authority = auth_machine_intelligence
				}
				give_technology = { tech = tech_robomodding_m }
				add_monthly_resource_mult = {
					resource = engineering_research
					value = @tier3researchreward
					min = @tier3researchmin
					max = @tier3researchmax
				}
			}
			else_if = {
				limit = {
					NOT = { has_technology = tech_binary_motivators }
					has_authority = auth_machine_intelligence
				}
				add_research_option = tech_binary_motivators
				add_tech_progress = {
					tech = tech_binary_motivators
					progress = 0.80
				}
			}
			else_if = {
				limit = {
					NOT = { has_technology = tech_nanite_assemblers }
					has_authority = auth_machine_intelligence
				}
				add_research_option = tech_nanite_assemblers
				add_tech_progress = {
					tech = tech_nanite_assemblers
					progress = 0.25
				}
			}
			else = {
				add_monthly_resource_mult = {
					resource = engineering_research
					value = @tier5researchreward
					min = @tier5researchmin
					max = @tier5researchmax
				}
			}
			custom_tooltip = ancrel.6260.tooltip
			hidden_effect = {
				set_country_flag = battle_robot_completed
			}
		}
	}
}

################################
#
# Archaeology Site: Daniel
#
###############################

### Frozen Complex ###
# Stage 3 - Ancient Laboratory (Biological)
fleet_event = {
	id = ancrel.7004
	title = "ancrel.7004.name"
	desc = "ancrel.7004.desc"
	picture = GFX_evt_disease_outbreak
	
	archaeology = yes
	is_triggered_only = yes
	
	immediate = {
		fromfrom = { set_site_progress_locked = yes }
	}
    
	after = { 
		fromfrom = { set_site_progress_locked = no } 
	}
	
	option = {
		name = OK
		fromfrom = {
			planet = { set_planet_flag = d_society_3 }
		}
		owner = {
			add_random_research_option = {
				add_progress = 0.5
				category  = biology
				area = society
				ignore_prereqs = no
				fail_effects = {
					add_monthly_resource_mult = {
						resource = society_research
						value = @tier5researchreward
						min = @tier5researchmin
						max = @tier5researchmax
					}
				}
			}
		}
	}
}

# Stage 3 - Ancient Laboratory (Weapons)
fleet_event = {
	id = ancrel.7005
	title = "ancrel.7005.name"
	desc = "ancrel.7005.desc"
	picture = GFX_evt_engineering_research
	
	archaeology = yes
	is_triggered_only = yes
	
	immediate = {
		fromfrom = { set_site_progress_locked = yes }
	}
    
	after = { 
		fromfrom = { set_site_progress_locked = no } 
	}
	
	option = {
		name = OK
		fromfrom = {
			planet = { set_planet_flag = d_physics_3 }
		}
		owner = {
			if = {
				limit = {
					NOT = { has_technology = tech_plasma_2 }
				}
				add_research_option = tech_plasma_2
				add_tech_progress = {
					tech = tech_plasma_2
					progress = 0.5
				}
			}
			else_if = {
				limit = {
					NOT = { has_technology = tech_plasma_3 }
				}
				add_research_option = tech_plasma_3
				add_tech_progress = {
					tech = tech_plasma_3
					progress = 0.25
				}
			}
			else = {
				add_monthly_resource_mult = {
					resource = physics_research
					value = @tier5researchreward
					min = @tier5researchmin
					max = @tier5researchmax
				}
			}
		}
	}
}

################################
#
# Archaeology Site: Douglas
#
###############################

### Archaeology: Moon Bump
# Stage 2 - Alt. 1 - Just Got Reel
fleet_event = {
	id = ancrel.9010
	title = "ancrel.9010.name"
	desc = "ancrel.9010.desc"
	picture = GFX_evt_asteroid_approaching_planet
	show_sound = event_screams
	
	archaeology = yes
	is_triggered_only = yes
	
	immediate = {
		fromfrom = { set_site_progress_locked = yes }
	}

	after = { 
		fromfrom = { set_site_progress_locked = no } 
	}
	
	option = {
		name = FASCINATING
		owner = {
			add_research_option = tech_space_elevator
			if = {
				limit = {
					has_tech_option = tech_housing_2
				}
				add_tech_progress = {
					tech = tech_housing_2
					progress = 0.5
				}
			}
			else_if = {
				limit = {
					NOT = { has_technology = tech_housing_2 }
					NOT = { has_valid_civic = civic_agrarian_idyll }
				}
				add_research_option = tech_housing_2
				add_tech_progress = {
					tech = tech_housing_2
					progress = 0.1
				}
			}
			else_if = {
				limit = {
					has_tech_option = tech_housing_agrarian_idyll
				}
				add_tech_progress = {
					tech = tech_housing_agrarian_idyll
					progress = 0.5
				}
			}
			else_if = {
				limit = {
					NOT = { has_technology = tech_housing_agrarian_idyll }
					has_valid_civic = civic_agrarian_idyll
				}
				add_research_option = tech_housing_agrarian_idyll
				add_tech_progress = {
					tech = tech_housing_agrarian_idyll
					progress = 0.1
				}
			}
			else = {
				add_monthly_resource_mult = {
					resource = engineering_research
					value = @tier3researchreward
					min = @tier3researchmin
					max = @tier3researchmax
				}
			}
 		}
	}
}

# Stage 2 - Alt. 2 - Cosmic Nudge
fleet_event = {
	id = ancrel.9015
	title = "ancrel.9015.name"
	desc = "ancrel.9015.desc"
	picture = GFX_evt_nuclear_explosion
	show_sound = event_energy_field
	
	archaeology = yes
	is_triggered_only = yes
	
	immediate = {
		fromfrom = { set_site_progress_locked = yes }
	}

	after = { 
		fromfrom = { set_site_progress_locked = no } 
	}
	
	option = {
		name = ancrel.9015.a
		trigger = {
			owner = {
				is_pacifist = no
				NOT = { has_technology = tech_asteroid_strike }
			}
		}
		owner = { 
			hidden_effect = { set_country_flag = moon_bump_bombardment_completed }
			add_research_option = tech_asteroid_strike
			if = {
				limit = { NOT = { has_technology = tech_thrusters_2 } }
				give_technology = { tech = tech_thrusters_2 }
				add_monthly_resource_mult = {
     				resource = society_research
     				value = @tier1researchreward
     				min = @tier1researchmin
     				max = @tier1researchmax
     			}
			}
			else_if = {
				limit = { NOT = { has_technology = tech_thrusters_3 } }
				add_research_option = tech_thrusters_3
				add_tech_progress = {
					tech = tech_thrusters_3
					progress = 0.25
				}
				add_monthly_resource_mult = {
     				resource = society_research
     				value = @tier1researchreward
     				min = @tier1researchmin
     				max = @tier1researchmax
     			}
			}
			else = {
				add_monthly_resource_mult = {
     				resource = society_research
     				value = @tier3researchreward
     				min = @tier3researchmin
     				max = @tier3researchmax
     			}
			}
 		}
	}
	option = {
		name = ancrel.9015.b
		trigger = {
			owner = {
				NOT = { has_technology = tech_colonization_5 }
				OR = {
					is_machine_empire = no
					has_civic = civic_machine_assimilator
					has_civic = civic_machine_servitor
				}
			}
		}
		owner = { 
			if = {
				limit = {
					has_tech_option = tech_colonization_5
				}
				add_tech_progress = {
					tech = tech_colonization_5
					progress = 0.66
				}
			}
			else = {
				add_research_option = tech_colonization_5
				add_tech_progress = {
					tech = tech_colonization_5
					progress = 0.2
				}
			}
			add_monthly_resource_mult = {
				resource = society_research
				value = @tier3researchreward
				min = @tier3researchmin
				max = @tier3researchmax
			}
 		}
	}
	option = {
		name = ancrel.9015.c
		owner = {
			custom_tooltip = ancrel.9015.c.tooltip
			hidden_effect = {
				set_country_flag = moon_bump_shield_completed
			}
			if = {
				limit = {
					NOT = { has_technology = tech_planetary_shield_generator }
				}
				give_technology = { tech = tech_planetary_shield_generator }
				add_monthly_resource_mult = {
					resource = society_research
					value = @tier2researchreward
					min = @tier2researchmin
					max = @tier2researchmax
				}
			}
			else_if = {
				limit = {
					NOT = { has_technology = tech_shield_rechargers_1 }
				}
				give_technology = { tech = tech_shield_rechargers_1 }
				add_monthly_resource_mult = {
					resource = society_research
					value = @tier2researchreward
					min = @tier2researchmin
					max = @tier2researchmax
				}
			}
			else = {
				add_monthly_resource_mult = {
					resource = physics_research
					value = @tier2researchreward
					min = @tier2researchmin
					max = @tier2researchmax
				}
				add_monthly_resource_mult = {
					resource = society_research
					value = @tier3researchreward
					min = @tier3researchmin
					max = @tier3researchmax
				}
			}
 		}
	}
}

# Stage 2 - Alt. 3 - Grand Scale Attraction
fleet_event = {
	id = ancrel.9020
	title = "ancrel.9020.name"
	desc = "ancrel.9020.desc"
	picture = GFX_evt_atmospheric_entry
	show_sound = event_energy_field
	
	archaeology = yes
	is_triggered_only = yes
	
	immediate = {
		fromfrom = { set_site_progress_locked = yes }
	}

	after = { 
		fromfrom = { set_site_progress_locked = no } 
	}
	
	option = {
		name = OOPS
		owner = {
			add_resource = { alloys = 200 }
		}
		fromfrom = {
			planet = { add_deposit = d_alloys_5 }
		}
	}
}

### Archaeology: The Echoes Inside
fleet_event = {
	id = ancrel.9040
	title = "ancrel.9040.name"
	desc = "ancrel.9040.desc"
	picture = GFX_evt_mining_operations
	show_sound = event_bad_omen
	
	archaeology = yes
	is_triggered_only = yes
	
	immediate = {
		from = { set_site_progress_locked = yes }
	}

	after = { 
		from = { set_site_progress_locked = no } 
	}
	
	option = {
		name = WORRYING
		owner = { 
			add_monthly_resource_mult = {
     			resource = society_research
     			value = @tier4researchreward
     			min = @tier4researchmin
     			max = @tier4researchmax
     		}
			hidden_effect = { set_country_flag = echoes_inside_completed }
			if = {
				limit = { NOT = { has_tech_option = tech_hidden_worm } }
				add_research_option = tech_hidden_worm
			}
 		}
		from = {
			planet = {
				hidden_effect = { clear_deposits = yes }
				set_deposit = d_society_5
			}
		}
		hidden_effect = {
			every_planet = {
				limit = {
					colonizeable_planet = yes
					habitable_structure = no
					NOT = { has_planet_flag = checked_for_worms }
				}
				# sets flags of where the worms are
				planet_event = { id = expandedrelics.1 days = 1 random = 30 }
			}
		}
	}
}

### Archaeology: Target From Orbit
# Stage 3 - Alt. 1 - Treasure of the Wise
fleet_event = {
	id = ancrel.9055
	title = "ancrel.9055.name"
	desc = "ancrel.9055.desc"
	picture = GFX_evt_sapient_AI
	show_sound = event_energy_field
	
	archaeology = yes
	is_triggered_only = yes
	
	immediate = {
		fromfrom = { set_site_progress_locked = yes }
	}

	after = { 
		fromfrom = { set_site_progress_locked = no } 
	}
	
	option = {
		name = MARVELOUS
		fromfrom = {
			planet = {
				if = {
					limit = { colonizeable_planet = yes }
					add_deposit = d_wise_treasure
				}
				else = {
					set_deposit = d_physics_8
				}
				hidden_effect = { set_planet_flag = treasure_of_the_wise_planet }
			}
		}
		owner = { 
			if = {
				limit = {
					has_tech_option = tech_power_plant_3
				}
				add_tech_progress = {
					tech = tech_power_plant_3
					progress = 0.5
				}
			}
			else_if = {
				limit = {
					NOT = { has_technology = tech_power_plant_3 }
				}
				add_research_option = tech_power_plant_3
				add_tech_progress = {
					tech = tech_power_plant_3
					progress = 0.1
				}
			}
			else = {
				add_monthly_resource_mult = {
     				resource = physics_research
     				value = @tier4researchreward
     				min = @tier4researchmin
     				max = @tier4researchmax
     			}
			}
 		}
	}
}

# Stage 3 - Alt. 2 - Map to the Dust
fleet_event = {
	id = ancrel.9060
	title = "ancrel.9060.name"
	desc = "ancrel.9060.desc"
	picture = GFX_evt_asteroid_field
	show_sound = event_bad_omen
	
	archaeology = yes
	is_triggered_only = yes
	
	immediate = {
		fromfrom = {
			set_site_progress_locked = yes
			planet = {
				solar_system = {
					closest_system = {
						limit = {
							OR = {
								NOT = { exists = space_owner }
								AND = {
									exists = space_owner
									space_owner = { is_same_value = root.owner }
								}
							}
							any_system_planet = {
								is_asteroid = yes
								has_deposit = no
							}
						}
						min_steps = 8
						save_event_target_as = ex_planet_system_scope
						random_system_planet = {
							limit = {
								is_asteroid = yes
								has_deposit = no
							}
							save_event_target_as = ex_planet_scope
							add_modifier = { modifier = ex_planet_ancrel days = -1}
							set_deposit = d_alloys_3
							add_deposit = d_minerals_6
							set_planet_flag = ex_planet_ancrel_flag
							surveyed = {
								set_surveyed = yes
								surveyor = root.owner
							}
						}
					}
				}
			}
		}
	}

	after = { 
		fromfrom = { set_site_progress_locked = no } 
	}
	
	option = {
		name = UNFORTUNATE
		owner = {
			add_resource = { minerals = 1000 }
		}
		custom_tooltip = ancrel.9060.tooltip
		event_target:ex_planet_scope = {
			tooltip = {
				add_modifier = { modifier = ex_planet_ancrel days = -1}
				set_deposit = d_alloys_3
				add_deposit = d_minerals_6
			}
		}
	}
}

# Stage 3 - Alt. 3 - Ancient Approval
fleet_event = {
	id = ancrel.9065
	title = "ancrel.9065.name"
	desc = "ancrel.9065.desc"
	picture = GFX_evt_unity_symbol
	show_sound = event_whispering
	
	archaeology = yes
	is_triggered_only = yes
	
	immediate = {
		fromfrom = { set_site_progress_locked = yes }
	}

	after = { 
		fromfrom = { set_site_progress_locked = no } 
	}
	
	option = {
		name = PECULIAR
		owner = { 
			if = {
				limit = {
					has_tech_option = tech_society_2
				}
				add_tech_progress = {
					tech = tech_society_2
					progress = 0.5
				}
			}
			else_if = {
				limit = {
					NOT = { has_technology = tech_society_2 }
				}
				add_research_option = tech_society_2
				add_tech_progress = {
					tech = tech_society_2
					progress = 0.1
				}
			}
			else = {
				add_monthly_resource_mult = {
     				resource = society_research
     				value = @tier4researchreward
     				min = @tier4researchmin
     				max = @tier4researchmax
     			}
			}
			hidden_effect = {
				fromfrom = {
					planet = { save_event_target_as = blessed_planet }
				}
				random_list = {
					1 = {
						# Materialist FE Responds
						modifier = {
							factor = 0
							NOT = {
								any_country = {
									OR = {
										is_country_type = fallen_empire
										is_country_type = awakened_fallen_empire
									}
									has_ethic = ethic_fanatic_materialist
								}
							}
						}
						modifier = {
							factor = 0
							is_homicidal = yes
						}
						country_event = { id = expandedrelics.20 days = 360 random = 720 }
					}
					3 = {
						# blessing
						country_event = { id = expandedrelics.23 days = 30 random =  360 }
					}
				}
			}
 		}
	}
}

### Archaeology: Shot into the Ground
# Stage 3 - Alt. 1 - Six (Thousand) Feet Under
fleet_event = {
	id = ancrel.9080
	title = "ancrel.9080.name"
	desc = "ancrel.9080.desc"
	picture = GFX_evt_nuclear_explosion
	show_sound = event_metal_fatigue
	
	archaeology = yes
	is_triggered_only = yes
	
	immediate = {
		fromfrom = { set_site_progress_locked = yes }
	}

	after = { 
		fromfrom = { set_site_progress_locked = no } 
	}
	
	option = {
		name = FASCINATING
		owner = {
			if = {
				limit = {
					has_tech_option = tech_shields_4
				}
				add_tech_progress = {
					tech = tech_shields_4
					progress = 0.5
				}
			}
			else_if = {
				limit = {
					NOT = { has_technology = tech_shields_4 }
				}
				add_research_option = tech_shields_4
				add_tech_progress = {
					tech = tech_shields_4
					progress = 0.1
				}
			}
			else_if = {
				limit = { NOT = { has_technology = tech_shields_5 } }
				add_research_option = tech_shields_5
				add_tech_progress = {
					tech = tech_shields_5
					progress = 0.1
				}
			}
			else = {
				add_research_option = tech_repeatable_improved_shield_output
				add_tech_progress = {
					tech = tech_repeatable_improved_shield_output
					progress = 0.05
				}
			}
 		}
	}
}

# Stage 3 - Alt. 2 - Just A Drill
fleet_event = {
	id = ancrel.9085
	title = "ancrel.9085.name"
	desc = "ancrel.9085.desc"
	picture = GFX_evt_in_the_dark
	show_sound = event_metal_fatigue
	
	archaeology = yes
	is_triggered_only = yes
	
	immediate = {
		fromfrom = { set_site_progress_locked = yes }
	}

	after = { 
		fromfrom = { set_site_progress_locked = no } 
	}
	
	option = {
		name = CURIOUS
		fromfrom = {
			planet = {
				if = {
					limit = { has_deposit_for = shipclass_research_station }
					add_deposit = d_engineering_3
				}
				else = { add_deposit = d_minerals_3 }
			}
		}
		owner = { 
			add_resource = { volatile_motes = 100 }
			if = {
				limit = {
					has_tech_option = tech_mining_2
				}
				add_tech_progress = {
					tech = tech_mining_2
					progress = 0.5
				}
			}
			else_if = {
				limit = {
					NOT = { has_technology = tech_mining_2 }
				}
				add_research_option = tech_mining_2
				add_tech_progress = {
					tech = tech_mining_2
					progress = 0.1
				}
			}
			else = {
				add_monthly_resource_mult = {
					resource = engineering_research
					value = @tier2researchreward
					min = @tier2researchmin
					max = @tier2researchmax
				}
			}
 		}
	}
}

# Stage 3 - Alt. 3 - Surface-Burster
fleet_event = {
	id = ancrel.9090
	title = "ancrel.9090.name"
	desc = "ancrel.9090.desc"
	picture = GFX_evt_space_monster
	show_sound = event_dangerous_animals
	
	archaeology = yes
	is_triggered_only = yes
	
	immediate = {
		fromfrom = { set_site_progress_locked = yes }
	}

	after = { 
		fromfrom = { set_site_progress_locked = no } 
	}
	
	option = {
		name = INTRIGUING
		fromfrom = {
			planet = {
				hidden_effect = {
					set_planet_flag = hole_in_the_ground_monster_planet
					clear_deposits = yes
				}
				add_modifier = { modifier = planet_egg_ancrel days = -1 }
				set_deposit = d_society_5
			}
		}
		owner = {
			hidden_effect = { set_country_flag = hole_in_the_ground_monster_completed }
			if = {
				limit = {
					has_tech_option = tech_alien_life_studies
				}
				add_tech_progress = {
					tech = tech_alien_life_studies
					progress = 0.5
				}
			}
			else_if = {
				limit = {
					NOT = { has_technology = tech_alien_life_studies }
					is_gestalt = no
				}
				add_research_option = tech_alien_life_studies
				add_tech_progress = {
					tech = tech_alien_life_studies
					progress = 0.1
				}
			}
			else_if = {
				limit = {
					has_global_flag = expanded_megastructures_installed
					has_tech_option = tech_alien_life_studies_gestalt
				}
				add_tech_progress = {
					tech = tech_alien_life_studies_gestalt
					progress = 0.5
				}
			}
			else_if = {
				limit = {
					has_global_flag = expanded_megastructures_installed
					NOT = { has_technology = tech_alien_life_studies_gestalt }
					is_gestalt = yes
				}
				add_research_option = tech_alien_life_studies_gestalt
				add_tech_progress = {
					tech = tech_alien_life_studies_gestalt
					progress = 0.1
				}
			}
			else_if = {
				limit = {
					NOT = { has_technology = tech_society_2 }
				}
				add_research_option = tech_society_2
				add_tech_progress = {
					tech = tech_society_2
					progress = 0.1
				}
			}
			else = {
				add_monthly_resource_mult = {
     				resource = society_research
     				value = @tier4researchreward
     				min = @tier4researchmin
     				max = @tier4researchmax
     			}
			}
 		}
	}
}

### Cut to Fit ###
# Stage 3 - Alt. 1 - Limitless Art
fleet_event = {
	id = ancrel.9105
	title = "ancrel.9105.name"
	desc = "ancrel.9105.desc"
	picture = GFX_evt_strategic_resources
	show_sound = event_metal_fatigue
	
	archaeology = yes
	is_triggered_only = yes
	
	immediate = {
		fromfrom = { set_site_progress_locked = yes }
	}

	after = { 
		fromfrom = { set_site_progress_locked = no }
	}
	
	option = {
		name = FASCINATING
		fromfrom = {
			planet = {
				add_deposit = d_limitless_art
			}
		}
		owner = { 
			if = {
				limit = {
					has_tech_option = tech_mega_art
				}
				add_tech_progress = {
					tech = tech_mega_art
					progress = 0.5
				}
			}
			else_if = {
				limit = {
					NOT = { has_technology = tech_mega_art }
				}
				add_research_option = tech_mega_art
				add_tech_progress = {
					tech = tech_mega_art
					progress = 0.1
				}
			}
			else = {
				add_monthly_resource_mult = {
     				resource = society_research
     				value = @tier4researchreward
     				min = @tier4researchmin
     				max = @tier4researchmax
     			}
			}
 		}
	}
}

# Stage 3 - Alt. 2 - A Custom Job
fleet_event = {
	id = ancrel.9110
	title = "ancrel.9110.name"
	desc = "ancrel.9110.desc"
	picture = GFX_evt_surreal_visions
	show_sound = event_machinery
	
	archaeology = yes
	is_triggered_only = yes
	
	immediate = {
		fromfrom = { set_site_progress_locked = yes }
	}

	after = { 
		fromfrom = { set_site_progress_locked = no } 
	}
	
	option = {
		name = CURIOUS
		owner = {
			if = {
				limit = {
					has_tech_option = tech_terrestrial_sculpting
				}
				add_tech_progress = {
					tech = tech_terrestrial_sculpting
					progress = 0.5
				}
			}
			else_if = {
				limit = {
					NOT = { has_technology = tech_terrestrial_sculpting }
				}
				add_research_option = tech_terrestrial_sculpting
				add_tech_progress = {
					tech = tech_terrestrial_sculpting
					progress = 0.2
				}
			}
			else_if = {
				limit = {
					has_tech_option = tech_ecological_adaptation
				}
				add_tech_progress = {
					tech = tech_ecological_adaptation
					progress = 0.25
				}
			}
			else_if = {
				limit = {
					NOT = { has_technology = tech_ecological_adaptation }
				}
				add_research_option = tech_ecological_adaptation
				add_tech_progress = {
					tech = tech_ecological_adaptation
					progress = 0.1
				}
			}
			else = {
				add_monthly_resource_mult = {
					resource = society_research
					value = @tier5researchreward
					min = @tier5researchmin
					max = @tier5researchmax
				}
			}
		}
	}
}

# Stage 3 - Alt. 3 - Celestial Dismantling
fleet_event = {
	id = ancrel.9115
	title = "ancrel.9115.name"
	desc = "ancrel.9115.desc"
	picture = GFX_evt_gray_goo
	show_sound = event_drilling
	
	archaeology = yes
	is_triggered_only = yes
	
	immediate = {
		fromfrom = { set_site_progress_locked = yes }
	}

	after = {
		fromfrom = { set_site_progress_locked = no } 
	}
	
	option = {
		name = INTRIGUING
		owner = { 
			if = {
				limit = {
					has_tech_option = tech_space_mining_3
				}
				add_tech_progress = {
					tech = tech_space_mining_3
					progress = 0.5
				}
			}
			else_if = {
				limit = {
					NOT = { has_technology = tech_space_mining_3 }
				}
				add_research_option = tech_space_mining_3
				add_tech_progress = {
					tech = tech_space_mining_3
					progress = 0.25
				}
			}
			else_if = {
				limit = {
					has_tech_option = tech_space_mining_4
				}
				add_tech_progress = {
					tech = tech_space_mining_4
					progress = 0.33
				}
			}
			else_if = {
				limit = {
					NOT = { has_technology = tech_space_mining_4 }
				}
				add_research_option = tech_space_mining_4
				add_tech_progress = {
					tech = tech_space_mining_4
					progress = 0.15
				}
			}
			else = {
				add_monthly_resource_mult = {
     				resource = engineering_research
     				value = @tier4researchreward
     				min = @tier4researchmin
     				max = @tier4researchmax
     			}
			}
 		}
	}
}

### Archaeology: Dj Vu Dig
# Stage 3 - Alt. 3 - Defended Tomb
fleet_event = {
	id = ancrel.9140
	title = "ancrel.9140.name"
	desc = "ancrel.9140.desc"
	picture = GFX_evt_warm_barren
	show_sound = event_collapsing_ruins
	
	archaeology = yes
	is_triggered_only = yes
	
	immediate = {
		fromfrom = { set_site_progress_locked = yes }
	}

	after = { 
		fromfrom = { set_site_progress_locked = no } 
	}
	
	option = {
		name = NOTIME
		owner = { 
			if = {
				limit = {
					has_tech_option = tech_tomb_world_adaption
				}
				add_tech_progress = {
					tech = tech_tomb_world_adaption
					progress = 0.5
				}
			}
			else_if = {
				limit = {
					NOT = { has_technology = tech_tomb_world_adaption }
					OR = {
						is_machine_empire = no
						has_civic = civic_machine_assimilator
						has_civic = civic_machine_servitor
					}	
				}
				add_research_option = tech_tomb_world_adaption
				add_tech_progress = {
					tech = tech_tomb_world_adaption
					progress = 0.1
				}
			}
			else_if = {
				limit = { NOT = { has_technology = tech_quicksand_basin } }
				give_technology = { tech = tech_quicksand_basin }
			}
			else_if = {
				limit = { NOT = { has_technology = tech_deep_sinkhole } }
				give_technology = { tech = tech_deep_sinkhole }
			}
			else = {
				add_monthly_resource_mult = {
     				resource = society_research
     				value = @tier5researchreward
     				min = @tier5researchmin
     				max = @tier5researchmax
     			}
			}
 		}
	}
}

### Archaeology: Trench World
# Stage 2 - Alt. 2 - Irrigation Prep
fleet_event = {
	id = ancrel.9155
	title = "ancrel.9155.name"
	desc = "ancrel.9155.desc"
	picture = GFX_evt_desert
	show_sound = event_drilling
	
	archaeology = yes
	is_triggered_only = yes
	
	immediate = {
		fromfrom = { set_site_progress_locked = yes }
	}

	after = { 
		fromfrom = { set_site_progress_locked = no } 
	}
	
	option = {
		name = SCRAPIT
		owner = { 
			if = {
				limit = {
					has_tech_option = tech_robotic_workers
				}
				add_tech_progress = {
					tech = tech_robotic_workers
					progress = 0.75
				}
			}
			else_if = {
				limit = {
					NOT = { has_technology = tech_robotic_workers }
					is_gestalt = no
					is_spiritualist = no
				}
				add_research_option = tech_robotic_workers
				add_tech_progress = {
					tech = tech_robotic_workers
					progress = 0.25
				}
			}
			else_if = {
				limit = {
					has_tech_option = tech_droid_workers
				}
				add_tech_progress = {
					tech = tech_droid_workers
					progress = 0.5
				}
			}
			else_if = {
				limit = {
					NOT = { has_technology = tech_droid_workers }
					is_gestalt = no
					is_spiritualist = no
				}
				add_research_option = tech_droid_workers
				add_tech_progress = {
					tech = tech_droid_workers
					progress = 0.1
				}
			}
			else_if = {
				limit = {
					has_tech_option = tech_robomodding_m
					has_authority = auth_machine_intelligence
				}
				add_tech_progress = {
					tech = tech_robomodding_m
					progress = 0.5
				}
			}
			else_if = {
				limit = {
					NOT = { has_technology = tech_robomodding_m }
					has_authority = auth_machine_intelligence
				}
				add_research_option = tech_robomodding_m
				add_tech_progress = {
					tech = tech_robomodding_m
					progress = 0.15
				}
			}
			else_if = {
				limit = {
					has_tech_option = tech_food_processing_1
					OR = {
						has_authority = auth_hive_mind
						is_spiritualist = yes
					}
				}
				add_tech_progress = {
					tech = tech_food_processing_1
					progress = 0.5
				}
			}
			else_if = {
				limit = {
					NOT = { has_technology = tech_food_processing_1 }
					OR = {
						has_authority = auth_hive_mind
						is_spiritualist = yes
					}
				}
				add_research_option = tech_food_processing_1
				add_tech_progress = {
					tech = tech_food_processing_1
					progress = 0.15
				}
			}
			else = {
				add_resource = { alloys = 500 }
			}
 		}
	}
}

### Archaeology: Sky Glow Hymn
# Stage 3 - Alt. 1 - Hidden in Plain Sight
fleet_event = {
	id = ancrel.9200
	title = "ancrel.9200.name"
	desc = "ancrel.9200.desc"
	picture = GFX_evt_dead_city
	show_sound = event_whispering
	
	archaeology = yes
	is_triggered_only = yes
	
	immediate = {
		fromfrom = { set_site_progress_locked = yes }
	}

	after = { 
		fromfrom = { set_site_progress_locked = no } 
	}
	
	option = {
		name = INCREDIBLE
		owner = {
			add_monthly_resource_mult = {
				resource = society_research
				value = @tier4researchreward
				min = @tier4researchmin
				max = @tier4researchmax
			}
 		}
	}
}

# Stage 3 - Alt. 2 - Look to the Heavens for Answers
fleet_event = {
	id = ancrel.9205
	title = "ancrel.9205.name"
	desc = "ancrel.9205.desc"
	picture = GFX_evt_shrouded
	show_sound = event_energy_field
	
	archaeology = yes
	is_triggered_only = yes
	
	immediate = {
		fromfrom = { set_site_progress_locked = yes }
	}

	after = { 
		fromfrom = { set_site_progress_locked = no } 
	}
	
	option = {
		name = OOPS
		owner = { 
			if = {
				limit = {
					has_tech_option = tech_synthetic_thought_patterns
				}
				add_tech_progress = {
					tech = tech_synthetic_thought_patterns
					progress = 0.75
				}
			}
			else_if = {
				limit = {
					has_tech_option = tech_collective_production_methods
				}
				add_tech_progress = {
					tech = tech_collective_production_methods
					progress = 0.75
				}
			}
			else_if = {
				limit = {
					has_tech_option = tech_resource_processing_algorithms
				}
				add_tech_progress = {
					tech = tech_resource_processing_algorithms
					progress = 0.75
				}
			}
			else_if = {
				limit = {
					NOT = { has_technology = tech_synthetic_thought_patterns }
					is_gestalt = no
				}
				add_research_option = tech_synthetic_thought_patterns
				add_tech_progress = {
					tech = tech_synthetic_thought_patterns
					progress = 0.25
				}
			}
			else_if = {
				limit = {
					NOT = { has_technology = tech_collective_production_methods }
					is_hive_empire = yes
				}
				add_research_option = tech_collective_production_methods
				add_tech_progress = {
					tech = tech_collective_production_methods
					progress = 0.25
				}
			}
			else_if = {
				limit = {
					NOT = { has_technology = tech_resource_processing_algorithms }
					is_machine_empire = yes
				}
				add_research_option = tech_resource_processing_algorithms
				add_tech_progress = {
					tech = tech_resource_processing_algorithms
					progress = 0.25
				}
			}
			else = {
				add_monthly_resource_mult = {
					resource = society_research
					value = @tier4researchreward
					min = @tier4researchmin
					max = @tier4researchmax
				}
			}
 		}
	}
}

# Stage 3 - Alt. 3 - Song of the Solitaire
fleet_event = {
	id = ancrel.9210
	title = "ancrel.9210.name"
	desc = "ancrel.9210.desc"
	picture = GFX_evt_animal_wildlife
	show_sound = event_whispering
	
	archaeology = yes
	is_triggered_only = yes
	
	immediate = {
		fromfrom = { set_site_progress_locked = yes }
	}

	after = { 
		fromfrom = { set_site_progress_locked = no } 
	}
	
	option = {
		name = GOODBYE
		owner = { 
			add_modifier = {
				modifier = anthem_of_aurora
				days = -1
 			}
 		}
		fromfrom = {
			planet = {
				hidden_effect = { set_planet_flag = sky_glow_aurora_completed }
				if = {
					limit = {
						colonizeable_planet = yes
					}
					add_deposit = d_aurora_life
				}
				else = {
					hidden_effect = { clear_deposits = yes }
					set_deposit = d_society_3
				}
			}
		}
	}
}

### Archaeology: Warmer Climates
# Stage 1 - Nobody Home
fleet_event = {
	id = ancrel.9215
	title = "ancrel.9215.name"
	desc = "ancrel.9215.desc"
	picture = GFX_evt_dead_city
	show_sound = event_wind_ruins
	
	archaeology = yes
	is_triggered_only = yes
	
	immediate = {
		from = { set_site_progress_locked = yes }
	}

	after = { 
		from = { set_site_progress_locked = no } 
	}
	
	option = {
		name = DIG
		small_artifact_reward = yes
		from = {
			planet = {
				hidden_effect = {
					if = {
						limit = { habitable_planet = yes }
						add_deposit = d_city_ruins
						remove_modifier = lush_planet
						add_modifier = { modifier = bleak_planet days = -1 }
					}
				}
			}
		}
	}
}

# Stage 3 - Alt. 1 - The Deep Sleep
fleet_event = {
	id = ancrel.9225
	title = "ancrel.9225.name"
	desc = "ancrel.9225.desc"
	picture = GFX_evt_clones
	show_sound = event_screams
	
	archaeology = yes
	is_triggered_only = yes
	
	immediate = {
		fromfrom = { set_site_progress_locked = yes }
	}

	after = { 
		fromfrom = { set_site_progress_locked = no } 
	}
	
	option = {
		name = UNFORTUNATE
		fromfrom = {
			planet = {
				hidden_effect = { set_planet_flag = warmer_climates_deep_sleep_completed }
				if = {
					limit = { colonizeable_planet = no }
					hidden_effect = { clear_deposits = yes }
					set_deposit = d_society_3
					add_deposit = d_engineering_3
				}
				else = {
					add_deposit = d_warmer_climates_cyro_tubes
				}
			}
		}
		owner = { 
			if = {
				limit = {
					has_tech_option = tech_colonization_3
				}
				add_tech_progress = {
					tech = tech_colonization_3
					progress = 0.50
				}
			}
			else_if = {
				limit = {
					NOT = { has_technology = tech_colonization_3 }
					OR = {
						is_machine_empire = no
						has_civic = civic_machine_assimilator
						has_civic = civic_machine_servitor
					}
				}
				add_research_option = tech_colonization_3
				add_tech_progress = {
					tech = tech_colonization_3
					progress = 0.15
				}
			}
			else_if = {
				limit = {
					NOT = { has_technology = tech_cryostasis_1 }
				}
				give_technology = { tech = tech_cryostasis_1 }
				add_monthly_resource_mult = {
     				resource = society_research
     				value = @tier2researchreward
     				min = @tier2researchmin
     				max = @tier2researchmax
     			}
			}
			else_if = {
				limit = {
					has_tech_option = tech_cryostasis_2
				}
				add_tech_progress = {
					tech = tech_cryostasis_2
					progress = 0.4
				}
				add_monthly_resource_mult = {
     				resource = society_research
     				value = @tier1researchreward
     				min = @tier1researchmin
     				max = @tier1researchmax
     			}
			}
			else_if = {
				limit = {
					NOT = { has_technology = tech_cryostasis_2 }
				}
				add_research_option = tech_cryostasis_2
				add_tech_progress = {
					tech = tech_cryostasis_2
					progress = 0.1
				}
				add_monthly_resource_mult = {
     				resource = society_research
     				value = @tier1researchreward
     				min = @tier1researchmin
     				max = @tier1researchmax
     			}
			}
			else = {
				add_monthly_resource_mult = {
     				resource = society_research
     				value = @tier4researchreward
     				min = @tier4researchmin
     				max = @tier4researchmax
     			}
			}
 		}
	}
}

# Stage 3 - Alt. 2 - Fatal Heat Wave
fleet_event = {
	id = ancrel.9230
	title = "ancrel.9230.name"
	desc = "ancrel.9230.desc"
	picture = GFX_evt_molten
	show_sound = event_screams
	
	archaeology = yes
	is_triggered_only = yes
	
	immediate = {
		fromfrom = { set_site_progress_locked = yes }
	}

	after = { 
		fromfrom = { set_site_progress_locked = no } 
	}
	
	option = {
		name = OOPS
		fromfrom = {
			planet = {
				hidden_effect = { set_planet_flag = warmer_climates_heat_wave_completed }
				if = {
					limit = { colonizeable_planet = no }
					hidden_effect = { clear_deposits = yes }
					set_deposit = d_society_3
					add_deposit = d_engineering_3
				}
				else = {
					add_deposit = d_warmer_climates_core_tunnels
				}
			}
		}
		owner = { 
			if = {
				limit = {
					has_tech_option = tech_volcano
				}
				add_tech_progress = {
					tech = tech_volcano
					progress = 0.50
				}
				add_monthly_resource_mult = {
     				resource = physics_research
     				value = @tier3researchreward
     				min = @tier3researchmin
     				max = @tier3researchmax
     			}
			}
			else_if = {
				limit = {
					NOT = { has_technology = tech_volcano }
				}
				add_research_option = tech_volcano
				add_monthly_resource_mult = {
     				resource = physics_research
     				value = @tier3researchreward
     				min = @tier3researchmin
     				max = @tier3researchmax
     			}
			}
			else = {
				add_monthly_resource_mult = {
     				resource = physics_research
     				value = @tier4researchreward
     				min = @tier4researchmin
     				max = @tier4researchmax
     			}
			}
 		}
	}
}

# Stage 3 - Alt. 3 - Cold and Alone
fleet_event = {
	id = ancrel.9235
	title = "ancrel.9235.name"
	desc = "ancrel.9235.desc"
	picture = GFX_evt_cold_barren
	show_sound = event_whispering
	
	archaeology = yes
	is_triggered_only = yes
	
	immediate = {
		fromfrom = { set_site_progress_locked = yes }
	}

	after = { 
		fromfrom = { set_site_progress_locked = no } 
	}
	
	option = {
		name = GOODBYE
		fromfrom = {
			planet = {
				hidden_effect = { set_planet_flag = warmer_climates_alone_completed }
				if = {
					limit = { colonizeable_planet = no }
					hidden_effect = { clear_deposits = yes }
					set_deposit = d_society_3
					add_deposit = d_engineering_3
				}
				else = {
					add_deposit = d_warmer_climates_tunnels
				}
			}
		}
		owner = { 
			if = {
				limit = {
					is_gestalt = yes
				}
				if = {
					limit = {
						has_tech_option = tech_unity_of_purpose
					}
					add_tech_progress = {
						tech = tech_unity_of_purpose
						progress = 0.25
					}
				}
				else_if = {
					limit = {
						NOT = { has_technology = tech_unity_of_purpose }
					}
					add_research_option = tech_unity_of_purpose
					add_tech_progress = {
						tech = tech_unity_of_purpose
						progress = 0.1
					}
				}
				else = {
					add_monthly_resource_mult = {
     					resource = society_research
     					value = @tier4researchreward
     					min = @tier4researchmin
     					max = @tier4researchmax
     				}
				}
			}
			else = {
				if = {
					limit = {
						has_tech_option = tech_artificial_moral_codes
					}
					add_tech_progress = {
						tech = tech_artificial_moral_codes
						progress = 0.25
					}
				}
				else_if = {
					limit = {
						NOT = { has_technology = tech_artificial_moral_codes }
					}
					add_research_option = tech_artificial_moral_codes
					add_tech_progress = {
						tech = tech_artificial_moral_codes
						progress = 0.1
					}
				}
				else = {
					add_monthly_resource_mult = {
     					resource = society_research
     					value = @tier4researchreward
     					min = @tier4researchmin
     					max = @tier4researchmax
     				}
				}
			}
 		}
	}
}

### Archaeology: The Phoenix Collective
# Stage 1 - Defined Steps
fleet_event = {
	id = ancrel.9240
	title = "ancrel.9240.name"
	desc = "ancrel.9240.desc"
	picture = GFX_evt_dead_city
	show_sound = event_wind_ruins
	
	archaeology = yes
	is_triggered_only = yes
	
	immediate = {
		from = { set_site_progress_locked = yes }
	}

	after = { 
		from = { set_site_progress_locked = no } 
	}
	
	option = {
		name = DIG
		small_artifact_reward = yes
		hidden_effect = {
			from = {
				planet = {
					every_deposit = {
						limit = { is_deposit_type = d_dangerous_wildlife_blocker }
						clear_blocker = yes
					}
					add_deposit = d_city_ruins
					add_deposit = d_city_ruins
					add_deposit = d_deep_sinkhole
				}
			}
		}
	}
}

# Stage 4 - Alt. 1 - A Cycle Disturbed
fleet_event = {
	id = ancrel.9255
	title = "ancrel.9255.name"
	desc = "ancrel.9255.desc"
	picture = GFX_evt_atmospheric_entry
	show_sound = event_bad_omen
	
	archaeology = yes
	is_triggered_only = yes
	
	immediate = {
		fromfrom = { set_site_progress_locked = yes }
	}

	after = { 
		fromfrom = { set_site_progress_locked = no } 
	}
	
	option = {
		name = UNFORTUNATE
		owner = { 
			if = {
				limit = {
					has_tech_option = tech_colonization_3
				}
				add_tech_progress = {
					tech = tech_colonization_3
					progress = 0.50
				}
			}
			else_if = {
				limit = {
					NOT = { has_technology = tech_colonization_3 }
					OR = {
						is_machine_empire = no
						has_civic = civic_machine_assimilator
						has_civic = civic_machine_servitor
					}
				}
				add_research_option = tech_colonization_3
				add_tech_progress = {
					tech = tech_colonization_3
					progress = 0.25
				}
			}
			else_if = {
				limit = { NOT = { has_technology = tech_quicksand_basin } }
				give_technology = { tech = tech_quicksand_basin }
				add_monthly_resource_mult = {
     				resource = society_research
     				value = @tier3researchreward
     				min = @tier3researchmin
     				max = @tier3researchmax
     			}
			}
			else = {
				add_monthly_resource_mult = {
     				resource = society_research
     				value = @tier4researchreward
     				min = @tier4researchmin
     				max = @tier4researchmax
     			}
			}
 		}
	}
}

# Stage 4 - Alt. 3 - Will Rise Once More
fleet_event = {
	id = ancrel.9265
	title = "ancrel.9265.name"
	desc = "ancrel.9265.desc"
	picture = GFX_evt_animal_wildlife
	show_sound = event_whispering
	
	archaeology = yes
	is_triggered_only = yes
	
	immediate = {
		fromfrom = { set_site_progress_locked = yes }
	}

	after = { 
		fromfrom = { set_site_progress_locked = no } 
	}
	
	option = {
		name = INTRIGUING
		trigger = { owner = { is_homicidal = no } }
		hidden_effect = {
			owner = { set_country_flag = phoenix_collective_will_rise }
			fromfrom = {
				planet = { set_planet_flag = phoenix_collective_will_rise_planet }
			}
		}
		owner = { 
			if = {
				limit = {
					has_tech_option = tech_society_3
				}
				add_tech_progress = {
					tech = tech_society_3
					progress = 0.50
				}
			}
			else_if = {
				limit = {
					NOT = { has_technology = tech_society_3 }
				}
				add_research_option = tech_society_3
				add_tech_progress = {
					tech = tech_society_3
					progress = 0.1
				}
			}
			else = {
				add_monthly_resource_mult = {
     				resource = society_research
     				value = @tier4researchreward
     				min = @tier4researchmin
     				max = @tier4researchmax
     			}
			}
 		}
	}
	option = {
		name = ancrel.9265.a
		trigger = {
			owner = {
				OR = {
					has_civic = civic_fanatic_purifiers
					has_ethic = ethic_fanatic_xenophobe
				}
			}
		}
		owner = { 
			add_resource = { influence = 100 }
			if = {
				limit = {
					has_tech_option = tech_society_3
				}
				add_tech_progress = {
					tech = tech_society_3
					progress = 0.50
				}
			}
			else_if = {
				limit = {
					NOT = { has_technology = tech_society_3 }
				}
				add_research_option = tech_society_3
				add_tech_progress = {
					tech = tech_society_3
					progress = 0.1
				}
			}
			else = {
				add_monthly_resource_mult = {
     				resource = society_research
     				value = @tier4researchreward
     				min = @tier4researchmin
     				max = @tier4researchmax
     			}
			}
 		}
	}
	option = {
		name = TASTY
		trigger = { owner = { has_civic = civic_hive_devouring_swarm } }
		owner = { 
			add_resource = { food = 500 }
			if = {
				limit = {
					has_tech_option = tech_society_3
				}
				add_tech_progress = {
					tech = tech_society_3
					progress = 0.50
				}
			}
			else_if = {
				limit = {
					NOT = { has_technology = tech_society_3 }
				}
				add_research_option = tech_society_3
				add_tech_progress = {
					tech = tech_society_3
					progress = 0.1
				}
			}
			else = {
				add_monthly_resource_mult = {
     				resource = society_research
     				value = @tier4researchreward
     				min = @tier4researchmin
     				max = @tier4researchmax
     			}
			}
 		}
	}
	option = {
		name = distar.216.a.exter
		trigger = { owner = { has_civic = civic_machine_terminator } }
		owner = { 
			add_resource = { society_research = 1000 }
			if = {
				limit = {
					has_tech_option = tech_society_3
				}
				add_tech_progress = {
					tech = tech_society_3
					progress = 0.50
				}
			}
			else_if = {
				limit = {
					NOT = { has_technology = tech_society_3 }
				}
				add_research_option = tech_society_3
				add_tech_progress = {
					tech = tech_society_3
					progress = 0.1
				}
			}
			else = {
				add_monthly_resource_mult = {
     				resource = society_research
     				value = @tier4researchreward
     				min = @tier4researchmin
     				max = @tier4researchmax
     			}
			}
 		}
	}
}

### Archaeology: Hive Coral
# Stage 3 - Alt. 1 - The Hive Coral
fleet_event = {
	id = ancrel.9320
	title = "ancrel.9320.name"
	desc = "ancrel.9320.desc"
	picture = GFX_evt_ocean
	show_sound = event_whispering
	
	archaeology = yes
	is_triggered_only = yes
	
	immediate = {
		fromfrom = { set_site_progress_locked = yes }
	}

	after = { 
		fromfrom = { set_site_progress_locked = no } 
	}
	
	option = {
		name = INTERESTING
		owner = { 
			if = {
				limit = {
					has_tech_option = tech_colonization_2
				}
				add_tech_progress = {
					tech = tech_colonization_2
					progress = 0.25
				}
				add_monthly_resource_mult = {
     				resource = society_research
     				value = @tier3researchreward
     				min = @tier3researchmin
     				max = @tier3researchmax
     			}
			}
			else_if = {
				limit = {
					NOT = { has_technology = tech_colonization_2 }
					OR = {
						is_machine_empire = no
						has_civic = civic_machine_assimilator
						has_civic = civic_machine_servitor
					}
				}
				add_research_option = tech_colonization_2
				add_tech_progress = {
					tech = tech_colonization_2
					progress = 0.1
				}
				add_monthly_resource_mult = {
     				resource = society_research
     				value = @tier3researchreward
     				min = @tier3researchmin
     				max = @tier3researchmax
     			}
			}
			else_if = {
				limit = {
					NOT = { has_technology = tech_toxic_kelp }
				}
				give_technology = { tech = tech_toxic_kelp }
				add_monthly_resource_mult = {
     				resource = society_research
     				value = @tier3researchreward
     				min = @tier3researchmin
     				max = @tier3researchmax
     			}
			}
			else_if = {
				limit = {
					NOT = { has_technology = tech_alien_life_studies }
					is_gestalt = no
				}
				give_technology = { tech = tech_alien_life_studies }
				add_monthly_resource_mult = {
     				resource = society_research
     				value = @tier3researchreward
     				min = @tier3researchmin
     				max = @tier3researchmax
     			}
			}
			else_if = {
				limit = {
					has_global_flag = expanded_megastructures_installed
					NOT = { has_technology = tech_alien_life_studies_gestalt }
					is_gestalt = yes
				}
				give_technology = { tech = tech_alien_life_studies_gestalt }
				add_monthly_resource_mult = {
     				resource = society_research
     				value = @tier3researchreward
     				min = @tier3researchmin
     				max = @tier3researchmax
     			}
			}
			else = {
				add_monthly_resource_mult = {
     				resource = society_research
     				value = @tier4researchreward
     				min = @tier4researchmin
     				max = @tier4researchmax
     			}
			}
 		}
	}
}

# Stage 3 - Alt. 2 - Bio-Savior
fleet_event = {
	id = ancrel.9325
	title = "ancrel.9325.name" 
	desc = "ancrel.9325.desc"
	picture = GFX_evt_ocean
	show_sound = event_whispering
	
	archaeology = yes
	is_triggered_only = yes
	
	immediate = {
		fromfrom = { set_site_progress_locked = yes }
	}

	after = { 
		fromfrom = { set_site_progress_locked = no } 
	}
	
	option = {
		name = FASCINATING
		owner = { 
			if = {
				limit = {
					has_tech_option = tech_colonization_2
				}
				add_tech_progress = {
					tech = tech_colonization_2
					progress = 0.25
				}
				add_monthly_resource_mult = {
     				resource = engineering_research
     				value = @tier3researchreward
     				min = @tier3researchmin
     				max = @tier3researchmax
     			}
			}
			else_if = {
				limit = {
					NOT = { has_technology = tech_colonization_2 }
					OR = {
						is_machine_empire = no
						has_civic = civic_machine_assimilator
						has_civic = civic_machine_servitor
					}
				}
				add_research_option = tech_colonization_2
				add_tech_progress = {
					tech = tech_colonization_2
					progress = 0.1
				}
				add_monthly_resource_mult = {
     				resource = engineering_research
     				value = @tier3researchreward
     				min = @tier3researchmin
     				max = @tier3researchmax
     			}
			}
			else_if = {
				limit = {
					has_tech_option = tech_terrestrial_sculpting
				}
				add_tech_progress = {
					tech = tech_terrestrial_sculpting
					progress = 0.25
				}
				add_monthly_resource_mult = {
     				resource = engineering_research
     				value = @tier3researchreward
     				min = @tier3researchmin
     				max = @tier3researchmax
     			}
			}
			else_if = {
				limit = {
					NOT = { has_technology = tech_terrestrial_sculpting }
				}
				add_research_option = tech_terrestrial_sculpting
				add_tech_progress = {
					tech = tech_terrestrial_sculpting
					progress = 0.1
				}
				add_monthly_resource_mult = {
     				resource = engineering_research
     				value = @tier3researchreward
     				min = @tier3researchmin
     				max = @tier3researchmax
     			}
			}
			else = {
				add_monthly_resource_mult = {
     				resource = engineering_research
     				value = @tier4researchreward
     				min = @tier4researchmin
     				max = @tier4researchmax
     			}
			}
 		}
	}
}

### Archaeology: Orbital Rain
# Stage 3 - Alt. 2 - Submerged Storage
fleet_event = {
	id = ancrel.9350
	title = "ancrel.9350.name" 
	desc = "ancrel.9350.desc"
	picture = GFX_evt_ocean
	show_sound = event_finding_loot
	
	archaeology = yes
	is_triggered_only = yes
	
	immediate = {
		fromfrom = {
			set_site_progress_locked = yes
			planet = { set_planet_flag = orbital_rain_storage_completed }
		}
	}

	after = { 
		fromfrom = { set_site_progress_locked = no } 
	}
	
	option = {
		name = PECULIAR
		owner = { 
			if = {
				limit = {
					has_tech_option = tech_ecological_adaptation
				}
				add_tech_progress = {
					tech = tech_ecological_adaptation
					progress = 0.5
				}
			}
			else_if = {
				limit = {
					NOT = { has_technology = tech_ecological_adaptation }
				}
				add_research_option = tech_ecological_adaptation
				add_tech_progress = {
					tech = tech_ecological_adaptation
					progress = 0.1
				}
			}
			else = {
				add_monthly_resource_mult = {
     				resource = engineering_research
     				value = @tier4researchreward
     				min = @tier4researchmin
     				max = @tier4researchmax
     			}
			}
 		}
	}
}

### Archaeology: Fossilized Jellyfish
# Stage 3 - Alt. 1 - Frozen Jelly
fleet_event = {
	id = ancrel.9370
	title = "ancrel.9370.name"
	desc = "ancrel.9370.desc"
	picture = GFX_evt_arctic
	show_sound = event_finding_loot
	
	archaeology = yes
	is_triggered_only = yes
	
	immediate = {
		fromfrom = { set_site_progress_locked = yes }
	}

	after = { 
		fromfrom = { set_site_progress_locked = no } 
	}
	
	option = {
		name = UNFORTUNATE
		fromfrom = {
			planet = {
				if = {
					limit = { habitable_planet = yes }
					add_deposit = d_bubbling_swamp
					ROOT = {
						owner = { add_resource = { exotic_gases = 50 } }
					}
				}
				else = {
					ROOT = {
						owner = { add_resource = { exotic_gases = 250 } }
					}
				}
			}
		}
	}
}

# Stage 3 - Alt. 2 - Preposterous Snooze
fleet_event = {
	id = ancrel.9375
	title = "ancrel.9375.name" 
	desc = "ancrel.9375.desc"
	picture = GFX_evt_microscopic_life
	show_sound = event_finding_loot
	
	archaeology = yes
	is_triggered_only = yes
	
	immediate = {
		fromfrom = { set_site_progress_locked = yes }
	}

	after = { 
		fromfrom = { set_site_progress_locked = no } 
	}
	
	option = {
		name = PECULIAR
		owner = { 
			if = {
				limit = {
					has_tech_option = tech_vitality_boosters
				}
				add_tech_progress = {
					tech = tech_vitality_boosters
					progress = 0.5
				}
			}
			else_if = {
				limit = {
					NOT = { has_technology = tech_vitality_boosters }
					OR = {
						NOT = { has_authority = auth_machine_intelligence }
						has_civic = civic_machine_assimilator
					}
				}
				add_research_option = tech_vitality_boosters
				add_tech_progress = {
					tech = tech_vitality_boosters
					progress = 0.1
				}
			}
			else_if = {
				limit = {
					has_authority = auth_machine_intelligence
					NOT = { has_modifier = jellyfish_machine_upkeep }
				}
				add_modifier = { modifier = jellyfish_machine_upkeep days = -1 }
			}
			else_if = {
				limit = {
					has_tech_option = tech_biomechanics
				}
				add_tech_progress = {
					tech = tech_biomechanics
					progress = 0.25
				}
			}
			else_if = {
				limit = {
					NOT = { has_technology = tech_biomechanics }
					has_authority = auth_machine_intelligence
				}
				add_research_option = tech_biomechanics
			}
			else = {
				add_monthly_resource_mult = {
     				resource = society_research
     				value = @tier4researchreward
     				min = @tier4researchmin
     				max = @tier4researchmax
     			}
			}
 		}
	}
}

# Stage 3 - Alt. 3 - Big Ones Couldn't Cope
fleet_event = {
	id = ancrel.9380
	title = "ancrel.9380.name"
	desc = "ancrel.9380.desc"
	picture = GFX_evt_ocean
	show_sound = event_finding_loot
	
	archaeology = yes
	is_triggered_only = yes
	
	immediate = {
		fromfrom = { set_site_progress_locked = yes }
	}

	after = { 
		fromfrom = { set_site_progress_locked = no } 
	}
	
	option = {
		name = INTERESTING
		owner = { 
			if = {
				limit = {
					has_tech_option = tech_society_2
				}
				add_tech_progress = {
					tech = tech_society_2
					progress = 0.5
				}
			}
			else_if = {
				limit = {
					NOT = { has_technology = tech_society_2 }
				}
				add_research_option = tech_society_2
				add_tech_progress = {
					tech = tech_society_2
					progress = 0.1
				}
			}
			else_if = {
				limit = {
					has_tech_option = tech_society_3
				}
				add_tech_progress = {
					tech = tech_society_3
					progress = 0.33
				}
			}
			else_if = {
				limit = {
					NOT = { has_technology = tech_society_3 }
				}
				add_research_option = tech_society_3
			}
			else = {
				add_monthly_resource_mult = {
     				resource = society_research
     				value = @tier4researchreward
     				min = @tier4researchmin
     				max = @tier4researchmax
     			}
			}
 		}
	}
}

### Archaeology: Popular Rock
# Stage 2 - Alt. 1 - Stepping Stone
fleet_event = {
	id = ancrel.9390
	title = "ancrel.9390.name"
	desc = "ancrel.9390.desc"
	picture = GFX_evt_ancient_records
	show_sound = event_whispering
	
	archaeology = yes
	is_triggered_only = yes
	
	immediate = {
		fromfrom = { set_site_progress_locked = yes }
	}

	after = { 
		fromfrom = { set_site_progress_locked = no } 
	}
	
	option = {
		name = FASCINATING
		fromfrom = {
			planet = {
				hidden_effect = {
					clear_deposits = yes
					set_planet_flag = popular_rock_stepping_stone_completed
				}
				set_deposit = d_society_3
			}
		}
		owner = { 
			add_monthly_resource_mult = {
     			resource = physics_research
     			value = @tier3researchreward
     			min = @tier3researchmin
     			max = @tier3researchmax
     		}
     		add_monthly_resource_mult = {
     			resource = society_research
     			value = @tier3researchreward
     			min = @tier3researchmin
     			max = @tier3researchmax
     		}
     		add_monthly_resource_mult = {
     			resource = engineering_research
     			value = @tier3researchreward
     			min = @tier3researchmin
     			max = @tier3researchmax
     		}
 		}
	}
}

# Stage 2 - Alt. 2 - Deep Space Depot
fleet_event = {
	id = ancrel.9395
	title = "ancrel.9395.name"
	desc = "ancrel.9395.desc"
	picture = GFX_evt_resource_cache
	show_sound = event_finding_loot
	
	archaeology = yes
	is_triggered_only = yes
	
	immediate = {
		fromfrom = { set_site_progress_locked = yes }
	}

	after = { 
		fromfrom = { set_site_progress_locked = no } 
	}
	
	option = {
		name = EXCELLENT
		fromfrom = {
			planet = {
				hidden_effect = {
					clear_deposits = yes
				}
				set_deposit = d_engineering_3
			}
		}
		owner = { 
			add_resource = { alloys = 500 }
			add_resource = { exotic_gases = 150 }
			add_resource = { volatile_motes = 150 }
 		}
	}
}

# Stage 2 - Alt. 3 - Rise and Shine
fleet_event = {
	id = ancrel.9400
	title = "ancrel.9400.name"
	desc = "ancrel.9400.desc"
	picture = GFX_evt_asteroid_approaching_planet
	show_sound = event_power_down
	
	archaeology = yes
	is_triggered_only = yes
	
	immediate = {
		fromfrom = { set_site_progress_locked = yes }
	}

	after = { 
		fromfrom = { set_site_progress_locked = no } 
	}
	
	option = {
		name = PECULIAR
		fromfrom = {
			planet = {
				hidden_effect = {
					clear_deposits = yes
				}
				set_deposit = d_engineering_3
			}
		}
		owner = { 
			if = {
				limit = {
					has_tech_option = tech_cryostasis_2
				}
				add_tech_progress = {
					tech = tech_cryostasis_2
					progress = 0.5
				}
			}
			else_if = {
				limit = {
					NOT = { has_technology = tech_cryostasis_2 }
				}
				add_research_option = tech_cryostasis_2
				add_tech_progress = {
					tech = tech_cryostasis_2
					progress = 0.1
				}
			}
			else = {
				add_monthly_resource_mult = {
     				resource = engineering_research
     				value = @tier4researchreward
     				min = @tier4researchmin
     				max = @tier4researchmax
     			}
			}
 		}
	}
}

################################
#
# Archaeology Site Spawn Event
#
###############################

# Archaeology Site On Survey Spawn
ship_event = {
	id = ancrel.9999
	hide_window = yes

	is_triggered_only = yes

	trigger = {
		has_ancrel = yes
		FROM = {
			NOT = { exists = archaeological_site }
			NOT = { has_planet_flag = statue_world }
		}
	}

	immediate = {
		random_list = {
			400 = {}
			5 = {
				modifier = {
					factor = 0.05
					OR = {
						owner = { is_ai = yes }
						owner = { has_country_flag = discovered_site }
					}
				}
				modifier = {
					factor = 10
					from = {
						colonizeable_planet = yes
					}
				}
				from = {
					prevent_anomaly = yes
					create_archaeological_site = random
					if = {
						limit = {
							from = {
								OR = {
									is_planet_class = pc_barren
									is_planet_class = pc_barren_cold
								}
								planet_size > 9
								planet_size < 26
							}
						}
						custom_tooltip = TERRAFORMING_CANDIDATE_EFFECT
						hidden_effect = {
							from = {
								add_modifier = {
									modifier = "terraforming_candidate"
									days = -1
								}
							}		
						}
					}
				}
				owner = {
					if = {
						limit = {
							count_system = { count > 800 } 
						}
						set_timed_country_flag = {
							flag = discovered_site
							days = 3600
						}
					}
					else = {
						set_timed_country_flag = {
							flag = discovered_site
							days = 1800
						}
					}
				}
			}
		}
	}
}

################################
#
# Archaeology Site: Stephen
#
###############################

# Irassian Artifact Research Complete
country_event = {
	id = ancrel.9001
	title = ancrel.9001.name
	
	# Phobe
	desc = {
		trigger = {
			OR = {
				has_ethic = ethic_xenophobe
				has_ethic = ethic_fanatic_xenophobe
			}
		}
		text = ancrel.9001.desc.phobe
	}
	desc = {
		trigger = {
			NOR = {
				has_ethic = ethic_xenophobe
				has_ethic = ethic_fanatic_xenophobe
			}
		}
		text = ancrel.9001.desc
	}

	picture = GFX_evt_circuitry_modification
	location = from

	is_triggered_only = yes

	option = {
		name = INTERESTING
		
		random_owned_leader = {
			limit = {
				is_researching_area = society
			}

			if = {
				limit = {
					NOT = { has_trait = leader_trait_expertise_biology }
				}
				add_trait = leader_trait_expertise_biology
			}
			else = {
				add_experience = 200
			}
		}

		owner = {
			if = {
				limit = {
					OR = {
						NOT = { has_authority = auth_machine_intelligence }
						has_civic = civic_machine_assimilator
						has_civic = civic_machine_servitor	
					}
                    NOT = { has_technology = tech_genome_mapping }
                }
				give_technology = { tech = tech_genome_mapping }
			}
			else_if = {
				limit = {
					is_gestalt = no
                    NOT = { has_technology = tech_frontier_health }
                }
				give_technology = { tech = tech_frontier_health }
			}
			else_if = {
				limit = {
					is_gestalt = no
                    NOT = { has_technology = tech_frontier_hospital }
                }
				give_technology = { tech = tech_frontier_hospital }
			}
			else_if = {
				limit = {
					OR = {
						NOT = { has_authority = auth_machine_intelligence }
						has_civic = civic_machine_assimilator
						has_civic = civic_machine_servitor	
					}
                    NOT = { has_technology = tech_gene_tailoring }
                }
				add_research_option = tech_gene_tailoring
                add_tech_progress = {
                    tech = tech_gene_tailoring
                    progress = 0.5
                }
			}
			else_if = {
				limit = {
					has_global_flag = TechAscendant_active
					NOT = { has_technology = tech_biology_breakthrough }
					OR = {
						NOT = { has_authority = auth_machine_intelligence }
						has_civic = civic_machine_assimilator
						has_civic = civic_machine_servitor	
					}
				}
				add_research_option = tech_biology_breakthrough
				add_tech_progress = {
					tech = tech_biology_breakthrough
					progress = 0.1
				}
			}
			else_if = {
				limit = {
					NOT = { has_technology = tech_society_2 }
                }
				give_technology = { tech = tech_society_2 }
			}
			else_if = {
				limit = {
					NOT = { has_technology = tech_society_3 }
                }
				add_research_option = tech_society_3
                add_tech_progress = {
                    tech = tech_society_3
                    progress = 0.5
                }
			}
			else = {
				add_monthly_resource_mult = {
					resource = society_research
					value = @tier4researchreward
					min = @tier4researchmin
					max = @tier4researchmax
				}
			}
		}
		
		add_modifier = {
			modifier = artifact_irassian_research_completed # biology research and growth speed bonus
			days = -1
		}
	}
}

# Arcane Deciphering Events
country_event = {
	id = ancrel.10001
	title = "ancrel.10001.name"
	desc = "ancrel.10001.desc"
	picture = GFX_evt_ancient_records
	
	is_triggered_only = yes

	option = {
		name = "FASCINATING"
		if = {
			limit = {
				NOT = { mid_game_years_passed > 0 }
			}
			add_monthly_resource_mult = {
				resource = physics_research
				value = @tier3researchreward
				min = @tier3researchmin
				max = @tier3researchmax
			}
			add_monthly_resource_mult = {
				resource = society
				value = @tier3researchreward
				min = @tier3researchmin
				max = @tier3researchmax
			}
			add_monthly_resource_mult = {
				resource = engineering_research
				value = @tier3researchreward
				min = @tier3researchmin
				max = @tier3researchmax
			}
		}
		else_if = {
			limit = {
				NOT = { end_game_years_passed > 0 }
			}
			add_monthly_resource_mult = {
				resource = physics_research
				value = @tier4researchreward
				min = @tier4researchmin
				max = @tier4researchmax
			}
			add_monthly_resource_mult = {
				resource = society
				value = @tier4researchreward
				min = @tier4researchmin
				max = @tier4researchmax
			}
			add_monthly_resource_mult = {
				resource = engineering_research
				value = @tier4researchreward
				min = @tier4researchmin
				max = @tier4researchmax
			}
		}
		else = {
			add_monthly_resource_mult = {
				resource = physics_research
				value = @tier5researchreward
				min = @tier5researchmin
				max = @tier5researchmax
			}
			add_monthly_resource_mult = {
				resource = society
				value = @tier5researchreward
				min = @tier5researchmin
				max = @tier5researchmax
			}
			add_monthly_resource_mult = {
				resource = engineering_research
				value = @tier5researchreward
				min = @tier5researchmin
				max = @tier5researchmax
			}
		}
    }
}

country_event = {
	id = ancrel.10003
	title = "ancrel.10003.name"
	desc = "ancrel.10003.desc"
	picture = GFX_evt_ancient_records
	
	is_triggered_only = yes

	option = {
		name = "FASCINATING"
        locked_random_list = {
            10 = {
                add_random_research_option = {
                    add_progress = 0.33
                    area = engineering
                    ignore_prereqs = no
                    fail_effects = {
                        add_monthly_resource_mult = {
                            resource = engineering_research
                            value = @tier3researchreward
                            min = @tier3researchmin
                            max = @tier3researchmax
                        }
                    }
                }
            }
            10 = {
                add_random_research_option = {
                    add_progress = 0.33
                    area = physics
                    ignore_prereqs = no
                    fail_effects = {
                        add_monthly_resource_mult = {
                            resource = physics_research
                            value = @tier3researchreward
                            min = @tier3researchmin
                            max = @tier3researchmax
                        }
                    }
                }
            }
            10 = {
                add_random_research_option = {
                    add_progress = 0.33
                    area = society
                    ignore_prereqs = no
                    fail_effects = {
                        add_monthly_resource_mult = {
                            resource = society_research
                            value = @tier3researchreward
                            min = @tier3researchmin
                            max = @tier3researchmax
                        }
                    }
                }
            }
        }
    }
}

# Yuht Artifact Research Complete
country_event = {
	id = ancrel.10050
	title = ancrel.10050.name
	
	# Phobe
	desc = {
		trigger = {
			OR = {
				has_ethic = ethic_xenophobe
				has_ethic = ethic_fanatic_xenophobe
			}
		}
		text = ancrel.10050.desc.1.phobe
	}
	desc = {
		trigger = {
			NOR = {
				has_ethic = ethic_xenophobe
				has_ethic = ethic_fanatic_xenophobe
			}
		}
		text = ancrel.10050.desc.1
	}

	picture = GFX_evt_animal_wildlife
	location = from

	is_triggered_only = yes

	option = {
		name = INTERESTING

		random_owned_leader = {
			limit = {
				is_researching_area = society
			}

			if = {
				limit = {
					NOT = { has_trait = leader_trait_expertise_new_worlds }
				}
				add_trait = leader_trait_expertise_new_worlds
			}
			else = {
				add_experience = 200
			}
		}

        custom_tooltip = "ancrel.10050.unlock"
		owner = {
			if = {
				limit = {
                    NOT = { has_technology = tech_colonization_2 }  # Atmospheric Filtering
					OR = {
						is_machine_empire = no
						has_civic = civic_machine_assimilator
						has_civic = civic_machine_servitor
					}
                }
				give_technology = { tech = tech_colonization_2 }
			}
			if = {
				limit = {
                    NOT = { has_technology = tech_dangerous_wildlife }
                }
				give_technology = { tech = tech_dangerous_wildlife }
				add_monthly_resource_mult = {
					resource = society_research
					value = @tier2researchreward
					min = @tier2researchmin
					max = @tier2researchmax
				}
			}
			else_if = {
				limit = {
                    NOT = { has_technology = tech_colonization_3 }
					OR = {
						is_machine_empire = no
						has_civic = civic_machine_assimilator
						has_civic = civic_machine_servitor
					}
                }
                add_research_option = tech_colonization_3
                add_tech_progress = {
                    tech = tech_colonization_3
                    progress = 0.5
                }
            }
			else_if = {
				limit = {
					has_global_flag = TechAscendant_active
					NOT = { has_technology = tech_rocketry_breakthrough }
				}
				add_research_option = tech_rocketry_breakthrough
				add_tech_progress = {
					tech = tech_rocketry_breakthrough
					progress = 0.1
				}
			}
			else = {
				add_monthly_resource_mult = {
					resource = society_research
					value = @tier4researchreward
					min = @tier4researchmin
					max = @tier4researchmax
				}
			}
			
		}
        hidden_effect = {
            set_country_flag = artifact_yuht_research_completed
        }	
	}
}

# First League Research Complete
country_event = {
	id = ancrel.10200
	title = ancrel.10200.name
	
	# Phobe
	desc = {
		trigger = {
			OR = {
				has_ethic = ethic_xenophobe
				has_ethic = ethic_fanatic_xenophobe
			}
		}
		text = ancrel.10200.desc.phobe
	}
	desc = {
		trigger = {
			NOR = {
				has_ethic = ethic_xenophobe
				has_ethic = ethic_fanatic_xenophobe
			}
		}
		text = ancrel.10200.desc
	}

	picture = GFX_evt_city_planet
	location = from

	is_triggered_only = yes

	option = {
		name = INTERESTING

		random_owned_leader = {
			limit = {
				is_researching_area = engineering
			}

			if = {
				limit = {
					NOT = { has_trait = leader_trait_expertise_industry }
				}
				add_trait = leader_trait_expertise_industry
			}
			else = {
				add_experience = 200
			}
		}

		owner = {
			if = {
				limit = {
					NOT = { has_technology = tech_housing_1 }
					NOT = { has_valid_civic = civic_agrarian_idyll }
				}
				give_technology = { tech = tech_housing_1 }
				add_research_option = tech_housing_2
			}
			else_if = {
				limit = {
					NOT = { has_technology = tech_housing_1 }
					has_valid_civic = civic_agrarian_idyll
				}
				give_technology = { tech = tech_housing_1 }
				add_research_option = tech_housing_agrarian_idyll
			}
			else_if = {
				limit = {
					NOT = { has_technology = tech_housing_2 }
					NOT = { has_valid_civic = civic_agrarian_idyll }
				}
				add_research_option = tech_housing_2
				add_tech_progress = {
					tech = tech_housing_2
					progress = 0.5
				}
			}
			else_if = {
				limit = {
					NOT = { has_technology = tech_housing_agrarian_idyll }
					has_valid_civic = civic_agrarian_idyll
				}
				add_research_option = tech_housing_agrarian_idyll
				add_tech_progress = {
					tech = tech_housing_agrarian_idyll
					progress = 0.5
				}
			}
			else_if = {
				limit = {
					has_global_flag = TechAscendant_active
					NOT = { has_technology = tech_statecraft_breakthrough }
				}
				add_research_option = tech_statecraft_breakthrough
				add_tech_progress = {
					tech = tech_statecraft_breakthrough
					progress = 0.1
				}
			}
			else = {
				add_monthly_resource_mult = {
					resource = engineering_research
					value = @tier4researchreward
					min = @tier4researchmin
					max = @tier4researchmax
				}
			}
		}
		add_modifier = {
			modifier = artifact_league_research_completed # industry research and building build speed
			days = -1
		}
	}
}

# Vultaum Artifact Research Complete
country_event = {
	id = ancrel.10100
	title = ancrel.10100.name
	
	desc = {
		trigger = { is_machine_empire = yes	}
		text = ancrel.10100.desc_machine
	}
	desc = {
		trigger = { is_hive_empire = yes }
		text = ancrel.10100.desc_hive
	}
    desc = {
        trigger = {
		    is_regular_empire = yes
        	has_ethic = ethic_fanatic_materialist
		}
        text = ancrel.10100.desc_fm
    }
    desc = {
        trigger = {
		    is_regular_empire = yes
        	NOT = { has_ethic = ethic_fanatic_materialist }
		}
        text = ancrel.10100.desc
    }

	picture = GFX_evt_ancient_databank
	location = from

	is_triggered_only = yes

    option = {
        exclusive_trigger = { is_machine_empire = yes }

		name = progress.2.a.mech # Acknowledged.

		random_owned_leader = {
			limit = {
				is_researching_area = physics
			}

			if = {
				limit = {
					NOT = { has_trait = leader_trait_expertise_computing }
				}
				add_trait = leader_trait_expertise_computing
			}
			else = {
				add_experience = 200
			}
		}

		owner = {
			if = {
				limit = { NOT = { has_technology = tech_administrative_ai } }
				give_technology = { tech = tech_administrative_ai }
				add_research_option = tech_self_aware_logic
			}
			else_if = {
				limit = { NOT = { has_technology = tech_self_aware_logic } }
				give_technology = { tech = tech_self_aware_logic }
			}
			else_if = {
				limit = {
					has_global_flag = TechAscendant_active
					NOT = { has_technology = tech_military_theory_breakthrough }
				}
				add_research_option = tech_military_theory_breakthrough
				add_tech_progress = {
					tech = tech_military_theory_breakthrough
					progress = 0.1
				}
			}
			else_if = {
				limit = { NOT = { has_technology = tech_positronic_implants } }
				add_research_option = tech_positronic_implants
				add_tech_progress = {
					tech = tech_positronic_implants
					progress = 0.2
				}
			}
			else = {
				add_monthly_resource_mult = {
					resource = physics_research
					value = @tier4researchreward
					min = @tier4researchmin
					max = @tier4researchmax
				}
			}
		}

		add_modifier = {
			modifier = artifact_vultaum_research_completed_machine # computer research and assembly speed
			days = -1
		}
	}

    option = {
        exclusive_trigger = { is_hive_empire = yes }

		name = story.210.a # Noted.

		random_owned_leader = {
			limit = {
				is_researching_area = physics
			}

			if = {
				limit = {
					NOT = { has_trait = leader_trait_expertise_computing }
				}
				add_trait = leader_trait_expertise_computing
			}
			else = {
				add_experience = 200
			}
		}

		owner = {
			if = {
				limit = { NOT = { has_technology = tech_administrative_ai } }
				give_technology = { tech = tech_administrative_ai }
				add_research_option = tech_self_aware_logic
			}
			else_if = {
				limit = { NOT = { has_technology = tech_self_aware_logic } }
				give_technology = { tech = tech_self_aware_logic }
			}
			else_if = {
				limit = {
					has_global_flag = TechAscendant_active
					NOT = { has_technology = tech_military_theory_breakthrough }
				}
				add_research_option = tech_military_theory_breakthrough
				add_tech_progress = {
					tech = tech_military_theory_breakthrough
					progress = 0.1
				}
			}
			else_if = {
				limit = { NOT = { has_technology = tech_positronic_implants } }
				add_research_option = tech_positronic_implants
				add_tech_progress = {
					tech = tech_positronic_implants
					progress = 0.2
				}
			}
			else = {
				add_monthly_resource_mult = {
					resource = physics_research
					value = @tier4researchreward
					min = @tier4researchmin
					max = @tier4researchmax
				}
			}
		}

		add_modifier = {
			modifier = artifact_vultaum_research_completed_hive # computer research
			days = -1
		}
	}

	option = {
        trigger = {
            owner = {
                is_regular_empire = yes
                NOT = { has_ethic = ethic_fanatic_materialist } 
            }
        }

		name = INTERESTING

		random_owned_leader = {
			limit = {
				is_researching_area = physics
			}

			if = {
				limit = {
					NOT = { has_trait = leader_trait_expertise_computing }
				}
				add_trait = leader_trait_expertise_computing
			}
			else = {
				add_experience = 200
			}
		}

		owner = {
			if = {
				limit = { NOT = { has_technology = tech_administrative_ai } }
				give_technology = { tech = tech_administrative_ai }
				add_research_option = tech_self_aware_logic
			}
			else_if = {
				limit = { NOT = { has_technology = tech_self_aware_logic } }
				give_technology = { tech = tech_self_aware_logic }
			}
			else_if = {
				limit = {
					has_global_flag = TechAscendant_active
					NOT = { has_technology = tech_military_theory_breakthrough }
				}
				add_research_option = tech_military_theory_breakthrough
				add_tech_progress = {
					tech = tech_military_theory_breakthrough
					progress = 0.1
				}
			}
			else_if = {
				limit = { NOT = { has_technology = tech_sapient_ai } }
				add_research_option = tech_sapient_ai
				add_tech_progress = {
					tech = tech_sapient_ai
					progress = 0.2
				}
			}
			else = {
				add_monthly_resource_mult = {
					resource = physics_research
					value = @tier4researchreward
					min = @tier4researchmin
					max = @tier4researchmax
				}
			}
		}
    
		add_modifier = {
			modifier = artifact_vultaum_research_completed_suppressed # computer research and amenities bonus
			days = -1
		}
	}

    option = {
        trigger = {
            owner = { has_ethic = ethic_fanatic_materialist }
        }

		name = ancrel.10100.option.fm_enough

		random_owned_leader = {
			limit = {
				is_researching_area = physics
			}

			if = {
				limit = {
					NOT = { has_trait = leader_trait_expertise_computing }
				}
				add_trait = leader_trait_expertise_computing
			}
			else = {
				add_experience = 200
			}
		}

		owner = {
			if = {
				limit = { NOT = { has_technology = tech_administrative_ai } }
				give_technology = { tech = tech_administrative_ai }
				add_research_option = tech_self_aware_logic
			}
			else_if = {
				limit = { NOT = { has_technology = tech_self_aware_logic } }
				give_technology = { tech = tech_self_aware_logic }
			}
			else_if = {
				limit = {
					has_global_flag = TechAscendant_active
					NOT = { has_technology = tech_military_theory_breakthrough }
				}
				add_research_option = tech_military_theory_breakthrough
				add_tech_progress = {
					tech = tech_military_theory_breakthrough
					progress = 0.1
				}
			}
			else_if = {
				limit = { NOT = { has_technology = tech_sapient_ai } }
				add_research_option = tech_sapient_ai
				add_tech_progress = {
					tech = tech_sapient_ai
					progress = 0.125
				}
			}
			else = {
				add_monthly_resource_mult = {
					resource = physics_research
					value = @tier4researchreward
					min = @tier4researchmin
					max = @tier4researchmax
				}
			}
		}
    
		add_modifier = {
			modifier = artifact_vultaum_research_completed_suppressed # computer research and amenities bonus
			days = -1
		}
	}

    option = {
        trigger = {
			owner = {
				has_ethic = ethic_fanatic_materialist
			}
		}

		name = ancrel.10100.option.fm_delve_deeper

		random_owned_leader = {
			limit = {
				is_researching_area = physics
			}

			if = {
				limit = {
					NOT = { has_trait = leader_trait_expertise_computing }
				}
				add_trait = leader_trait_expertise_computing
			}
			else = {
				add_experience = 200
			}
		}

		owner = {
			if = {
				limit = { NOT = { has_technology = tech_administrative_ai } }
				give_technology = { tech = tech_administrative_ai }
				add_research_option = tech_self_aware_logic
			}
			else_if = {
				limit = { NOT = { has_technology = tech_self_aware_logic } }
				give_technology = { tech = tech_self_aware_logic }
			}
			else_if = {
				limit = {
					has_global_flag = TechAscendant_active
					NOT = { has_technology = tech_military_theory_breakthrough }
				}
				add_research_option = tech_military_theory_breakthrough
				add_tech_progress = {
					tech = tech_military_theory_breakthrough
					progress = 0.1
				}
			}
			else_if = {
				limit = { NOT = { has_technology = tech_sapient_ai } }
				add_research_option = tech_sapient_ai
				add_tech_progress = {
					tech = tech_sapient_ai
					progress = 0.125
				}
			}
			else = {
				add_monthly_resource_mult = {
					resource = physics_research
					value = @tier4researchreward
					min = @tier4researchmin
					max = @tier4researchmax
				}
			}
		}

		add_modifier = {
			modifier = artifact_vultaum_research_completed_suppressed # computer research and amenities bonus
			days = -1
		}

        enable_special_project = {
			name = "VULTAUM_SECRETS_2"
			location = capital_scope
			owner = ROOT
		}
	}
}

# Cybrex Artifact Research Complete
country_event = {
	id = ancrel.10250
	title = ancrel.10250.name

	desc = {
		trigger = {
			OR = {
                has_policy_flag = ai_outlawed
                has_ethic = ethic_spiritualist
                has_ethic = ethic_fanatic_spiritualist
            }
		}
		text = ancrel.10250.desc.antimachine
	}
	desc = {
		trigger = {
			NOR = {
                has_policy_flag = ai_outlawed
                has_ethic = ethic_spiritualist
                has_ethic = ethic_fanatic_spiritualist
            }
		}
		text = ancrel.10250.desc
	}
	
	picture = GFX_evt_ringworld
	location = from

	is_triggered_only = yes

    option = {
		exclusive_trigger = {
			has_technology = tech_mega_engineering
		}
		name = INTERESTING

		random_owned_leader = {
			limit = {
				is_researching_area = engineering
			}

			if = {
				limit = {
					NOT = { has_trait = leader_trait_expertise_voidcraft }
				}
				add_trait = leader_trait_expertise_voidcraft
			}
			else = {
				add_experience = 200
			}
		}

		owner = {
			add_monthly_resource_mult = {
				resource = engineering_research
				value = @tier4researchreward
				min = @tier4researchmin
				max = @tier4researchmax
			}
		}
        add_modifier = {
			modifier = artifact_cybrex_research_completed # megastructure build speed
			days = -1
		}
	}

	option = {
		name = INTERESTING
     
		random_owned_leader = {
			limit = {
				is_researching_area = engineering
			}

			if = {
				limit = {
					NOT = { has_trait = leader_trait_expertise_voidcraft }
				}
				add_trait = leader_trait_expertise_voidcraft
			}
			else = {
				add_experience = 200
			}
		}

		owner = {
			if = {
				limit = { NOT = { has_technology = tech_mega_engineering } }
				add_research_option = tech_mega_engineering
				add_tech_progress = {
					tech = tech_mega_engineering
					progress = 0.10
				}
			}
			else_if = {
				limit = {
					has_global_flag = TechAscendant_active
					NOT = { has_technology = tech_materials_breakthrough }
				}
				add_research_option = tech_materials_breakthrough
				add_tech_progress = {
					tech = tech_materials_breakthrough
					progress = 0.1
				}
			}
		}
        add_modifier = {
			modifier = artifact_cybrex_research_completed # megastructure build speed
			days = -1
		}        
	}
}

# Baol Artifact Research Complete
country_event = {
	id = ancrel.10300
	title = ancrel.10300.name
	desc = {
		trigger = { has_technology = tech_epigenetic_triggers }
		text = ancrel.10300.desc.terraform
	}
	desc = {
		trigger = { 
			NOT = { has_technology = tech_epigenetic_triggers }
		}
		text = ancrel.10300.desc.uplift
	}

	picture = GFX_evt_baol_grunur
	location = from

	is_triggered_only = yes
	
	option = {
		name = INTERESTING
		random_owned_leader = {
			limit = {
				is_researching_area = society
			}

			if = {
				limit = {
					NOT = { has_trait = leader_trait_expertise_biology }
				}
				add_trait = leader_trait_expertise_biology
			}
			else = {
				add_experience = 200
			}
		}
		owner = {
			if = {
				limit = { NOT = { has_technology = tech_epigenetic_triggers } }
				give_technology = { tech = tech_epigenetic_triggers }
			}
			else_if = {
				limit = { NOT = { has_technology = tech_terrestrial_sculpting } }
				give_technology = { tech = tech_terrestrial_sculpting }
			}
			else_if = {
				limit = {
					has_global_flag = TechAscendant_active
					NOT = { has_technology = tech_voidcraft_breakthrough }
				}
				add_research_option = tech_voidcraft_breakthrough
				add_tech_progress = {
					tech = tech_voidcraft_breakthrough
					progress = 0.1
				}
			}
			else = {
				add_monthly_resource_mult = {
					resource = society_research
					value = @tier4researchreward
					min = @tier4researchmin
					max = @tier4researchmax
				}
			}
		}
		add_modifier = {
			modifier = artifact_baol_research_completed # terraforming speed
			days = -1
		}
	}
}

# Zroni Artifact Research Complete
country_event = {
	id = ancrel.10350
	title = ancrel.10350.name
	desc = {
		trigger = {
		    is_regular_empire = yes
		}
        text = ancrel.10350.desc
	}
	desc = {
		trigger = {
		    is_gestalt = yes
		}
        text = ancrel.10350.desc.gestalt
	}

	picture = GFX_evt_surreal_visions
	location = from

	is_triggered_only = yes

	option = {
		name = INTERESTING

		random_owned_leader = {
			limit = {
				is_researching_area = society
			}

			if = {
				limit = {
					NOT = { has_trait = leader_trait_expertise_psionics }
				}
				add_trait = leader_trait_expertise_psionics
			}
			else = {
				add_experience = 200
			}
		}
		
        owner = {
			if = {
				limit = {
                    NOT = { has_technology = tech_mine_zro }  # zro distillation
                }
				add_research_option = tech_mine_zro
				add_tech_progress = {
                    tech = tech_mine_zro
                    progress = 0.5
                }
			}
			else_if = {
				limit = {
					has_global_flag = TechAscendant_active
					NOT = { has_technology = tech_psionics_breakthrough }
					is_gestalt = no
				}
				add_research_option = tech_psionics_breakthrough
				add_tech_progress = {
					tech = tech_psionics_breakthrough
					progress = 0.1
				}
			}
			else = {
                add_monthly_resource_mult = {
					resource = society_research
					value = @tier4researchreward
					min = @tier4researchmin
					max = @tier4researchmax
				}
            }
		}

		if = {
			limit = { is_gestalt = yes}
			add_modifier = {
				modifier = artifact_zroni_research_completed_gestalt # field manipulation research bonus
				days = -1
			}
		}
		else = {
			add_modifier = {
				modifier = artifact_zroni_research_completed # psionic research bonus
				days = -1
			}
		}
	}
}