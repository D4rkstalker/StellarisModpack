namespace = machinedlc_relic

#event chain started by event machinedlc.17
fleet_event = {
    id = machinedlc_relic.1
    title = "machinedlc_relic.1.name"
    desc = "machinedlc_relic.1.desc" 
    picture = GFX_evt_archaeology_camp
    location = from
  
    is_triggered_only = yes
    fire_only_once = yes
 
    immediate = {
        if = {
            limit = { owner = { has_country_flag = country_machinedlc_relic } }
            from = { create_archaeological_site = machinedlcmod_digsite_1 }
        }
    }

    option = {
        name = "machinedlc_relic.1.a"
        begin_event_chain = {
            event_chain = "machinedlcrelic_chain"
            target = this.owner
        }
    }
}
#home world digsite
#stage 1
fleet_event = {
    id = machinedlc_relic.2
    title = "machinedlc_relic.2.name"
    desc = "machinedlc_relic.2.desc"
    picture = GFX_evt_derelict_interior
    show_sound = event_wind_ruins

    is_triggered_only = yes
    archaeology = yes

    immediate = {
        from = { set_site_progress_locked = yes }
    }
	
	after = {
		from = { set_site_progress_locked = no } 
    }
    
    option = {
        name = machinedlc_relic.2.a
        custom_tooltip = machinedlc_relic.2.a.tooltip
        small_artifact_reward = yes    
        hidden_effect = {
            owner = {
                country_event = { id = machinedlc_relic.6 }
            }
        }
    }
}
#stage 2
fleet_event = {
    id = machinedlc_relic.3
    title = "machinedlc_relic.3.name"
    desc = "machinedlc_relic.3.desc"
    picture = GFX_evt_synth_sabotage
    show_sound = relic_activation_isolated_contingency_core

    is_triggered_only = yes
    archaeology = yes

    immediate = {
		from = { set_site_progress_locked = yes }
	}

	after = {
		from = { set_site_progress_locked = no } 
    }
    
    option = {
        name = machinedlc_relic.3.a
		medium_artifact_reward = yes
    }
}
#stage 3
fleet_event = {
    id = machinedlc_relic.4
    title = "machinedlc_relic.4.name"
    desc = "machinedlc_relic.4.desc"
    picture = GFX_evt_organic_oppression
    show_sound = event_bad_omen
    
    is_triggered_only = yes
    archaeology = yes

    immediate = {
        from = { set_site_progress_locked = yes }
    }
  
    after = {
        from = { set_site_progress_locked = no } 
    }
      
    option = {
        name = machinedlc_relic.4.a
        medium_artifact_reward = yes
    }
}
#stage 4
fleet_event = {
    id = machinedlc_relic.5
    title = "machinedlc_relic.5.name"
    desc = "machinedlc_relic.5.desc"
    picture = GFX_evt_clones
    show_sound = archeology_log_entry_positive
    
    is_triggered_only = yes
    archaeology = yes

    immediate = {
        from = { set_site_progress_locked = yes }
    }
  
    after = {
        from = { set_site_progress_locked = no } 
    }
      
    option = {
        name = machinedlc_relic.5.a
        large_artifact_reward = yes
        hidden_effect = {
            owner = {
                country_event = { id = machinedlc_relic.7 days = 90 }
            }
        }
    }
}
#country event to add mod_machine_drone_storage_2 in planet
country_event = {
    id = machinedlc_relic.6
    hide_window = yes
	is_triggered_only = yes

    immediate = {
        every_owned_planet = {
            limit = {
                has_planet_flag = planet_machinedlc_relic_1
            }
            add_modifier = {
                modifier = mod_machine_drone_storage_2
                days = -1
            }
            remove_modifier = mod_machine_drone_storage
        }
    }
}
#outer world creating event
country_event = {
    id = machinedlc_relic.7
    title = "machinedlc_relic.7.name"
    desc = "machinedlc_relic.7.desc"
    picture = GFX_evt_star_chart
    show_sound = archeology_notifications_new_dig_site
	is_triggered_only = yes

    immediate = {
        closest_system = {
            min_steps = 1
            max_steps = 3
            limit = {
                has_access_fleet = root.owner
                has_owner = no
                NOT = {
                    any_ship_in_system = {
                        owner = { 
                            is_hostile = root.owner
                        }
                    }
                }
            }
            spawn_system = {
                min_distance >= 19
                max_distance <= 21
                initializer = "machinedlc_relic_2_system"
            }
        }
    }
    option = {
        name = machinedlc_relic.7.a
        create_point_of_interest = {
            id = hidden_planet
            name = "machinedlc_relic_2_system_coordinates_poi"
            desc = "machinedlc_relic_2_system_coordinates_desc"
            event_chain = "machinedlcrelic_chain"
            location = event_target:machinedlc_relic_2_system_planet
        }
    }
}
#machine world intro #machine world digsite spawn effect event
ship_event = {
    id = machinedlc_relic.8
    title = "machinedlc_relic.8.name"
    desc = "machinedlc_relic.8.desc"   
    picture = GFX_evt_contingency_planet
    is_triggered_only = yes

    trigger = {
        owner = { NOT = { has_country_flag = found_relic_2_system } }
        from = { has_star_flag = machinedlc_relic_2_system }
    }

    immediate = {
        owner = {
            set_country_flag = found_relic_2_system 
            set_country_flag = country_machinedlc_relic_2
        }
    }

    option = {
        name = machinedlc_relic.8.a
    }
}
#last digsite
#stage 1
fleet_event = {
    id = machinedlc_relic.9
    title = "machinedlc_relic.9.name"
    desc = "machinedlc_relic.9.desc"
    picture = GFX_evt_glitchy_matrix
    show_sound = event_energy_field
    
    is_triggered_only = yes
    archaeology = yes

    immediate = {
        from = { set_site_progress_locked = yes }
    }
  
    after = {
        from = { set_site_progress_locked = no }
    }
      
    option = {
        name = machinedlc_relic.9.a
        large_artifact_reward = yes
        hidden_effect = {
            owner = { country_event = { id = machinedlc_relic.10 } }
        }
    }
}
#diplomatic event
country_event = {
	id = machinedlc_relic.10
	title = "machinedlc_relic.10.name"
	picture_event_data = { portrait = ai_crisis_1 }
	desc = { text = machinedlc_relic.10.desc }

	diplomatic = yes	
	is_triggered_only = yes

    option = {
		name = machinedlc_relic.10.a
        hidden_effect = { owner = { country_event = { id = machinedlc_relic.11 } } }
	}
}
country_event = {
	id = machinedlc_relic.11
	title = "machinedlc_relic.10.name"
	picture_event_data = { portrait = ai_crisis_1 }
	desc = { text = machinedlc_relic.11.desc }

	diplomatic = yes	
	is_triggered_only = yes

    option = {
		name = machinedlc_relic.11.a
        hidden_effect = { owner = { country_event = { id = machinedlc_relic.12 } } }
	}
}
country_event = {
	id = machinedlc_relic.12
	title = "machinedlc_relic.12.name"
	picture_event_data = { portrait = ai_crisis_1 }
	desc = { text = machinedlc_relic.12.desc }

	diplomatic = yes	
	is_triggered_only = yes

    option = {
		name = machinedlc_relic.12.a
        hidden_effect = { owner = { country_event = { id = machinedlc_relic.13 } } }
	}
}
country_event = {
	id = machinedlc_relic.13
	title = "machinedlc_relic.12.name"
	picture_event_data = { portrait = ai_crisis_1 }
	desc = { text = machinedlc_relic.13.desc }

	diplomatic = yes
	is_triggered_only = yes

    option = {
        name = machinedlc_relic.13.a
        custom_tooltip = machinedlc_relic.13.a.tooltip
        hidden_effect = {
            owner = {
                capital_scope = {
                    enable_special_project = {
                        name = "XT_489_HACKING_PROJECT"
                        location = this
                        owner = root
                    }
                }
            } 
        }
	}
}
country_event = {
	id = machinedlc_relic.14
	title = "machinedlc_relic.12.name"
	picture_event_data = { portrait = ai_crisis_1 }
	desc = { text = machinedlc_relic.14.desc }

	diplomatic = yes	
	is_triggered_only = yes

	option = {
		name = machinedlc_relic.14.a
		is_dialog_only = yes
		response_text = machinedlc_relic.14.a.response
	}
    option = {
		name = machinedlc_relic.14.b
		is_dialog_only = yes
		response_text = machinedlc_relic.14.b.response
	}
    option = {
		name = machinedlc_relic.14.c
		is_dialog_only = yes
		response_text = machinedlc_relic.14.c.response
	}
    option = {
		name = machinedlc_relic.14.d
        custom_tooltip = machinedlc_relic.14.d.tooltip
        owner = { add_relic = r_machine_core }
	}
}