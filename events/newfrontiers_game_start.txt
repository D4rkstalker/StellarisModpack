namespace = newfrontiers

### Start message and sets global flag “has_new_frontiers_mod”
event = {
	id = newfrontiers.3
	hide_window = yes
	is_triggered_only = yes
	
	immediate = {
		set_global_flag = "has_new_frontiers_mod"
		every_country = {
			limit = { is_ai = no }
			country_event = { id = newfrontiers.13}
		}
	}
}

#Adding modifiers Two and Three suns
event = {
	id = newfrontiers.4
	title = OK
	desc = OK
	hide_window = yes
	#is_triggered_only = yes
	fire_only_once = yes
	
	immediate = {
		every_planet = {
			limit = {
				AND = {
					is_colonizable = yes
					NOT = { num_modifiers > 2 }
				}
			}
			if = {
				limit = {
					solar_system = { is_binary = yes }
				}
				add_modifier = {
					modifier = "two_suns"
					days = -1
				}
			}
			else = {
				limit = {
					solar_system = {
						OR = {
							is_trinary = yes
							is_paired = yes
						}
					}
				}
				add_modifier = {
					modifier = "three_suns"
					days = -1
				}
			}
		}
#		every_planet = {
#			limit = { has_planet_flag = test_anomaly}
#			planet_event = { id = newfrontiers_star_event.1 days = 3}
#		}
	}
}

#Gas giant reconfiguration
event = {
	id = newfrontiers.5
	title = OK
	desc = OK
	hide_window = yes
	#is_triggered_only = yes
	fire_only_once = yes
	
	immediate = {
		every_planet = {	
			limit = {
				AND = {
					is_planet_class = "pc_gas_giant"
					is_hot_zone = yes
					#NOT = { num_modifiers > 1 }
					NOT = { has_planet_flag = prescripted_planet }
					NOR = { 
						has_planet_modifier = "pm_hot_jupiter"
						has_planet_modifier = "pm_puffy_planet"
					}
				}
			}
			random_list = {
				50 = {
					add_modifier = {
						modifier = "hot_jupiter"
						days = -1
					}
					set_hot_jupiter_entity = yes
				}
				50 = {
					add_modifier = {
						modifier = "puffy_planet"
						days = -1
					}
					set_puffy_planet_entity = yes
				}
			}
		}
		every_planet = {	
			limit = {
				AND = {
					is_planet_class = "pc_gas_giant"
					is_hot_zone = no
					NOT = { has_planet_modifier = "pm_ice_giant" }
					#NOT = { num_modifiers > 1 }
					NOT = { has_planet_flag = prescripted_planet }
					solar_system = { NOT = { has_star_flag = sol } }
					planet_size <= 20
				}
			}
			add_modifier = {
				modifier = "ice_giant"
				days = -1
			}
			set_ice_giant_entity = yes
		}
		every_planet = {	
			limit = {
				AND = {
					is_planet_class = "pc_gas_giant"
					planet_size >= 21
					is_hot_zone = no
					NOT = { has_planet_flag = prescripted_planet }
					solar_system = { NOT = { has_star_flag = sol } }
				}
			}
			set_warm_giant_entity = yes
		}
	}
}

#Sol System Customization
event = {
	id = newfrontiers.6
	title = OK
	desc = OK
	hide_window = yes
	#is_triggered_only = yes
	fire_only_once = yes
	
	immediate = {
		every_planet = {	
			limit = {
				has_planet_flag = io
			}
			add_modifier = {
				modifier = "sulfur_world"
				days = -1
			}
			set_planet_entity = { 
				picture = pc_sulfur
				entity = sulfur_planet_01_entity
			}
		}
		every_planet = {	
			limit = {
				has_planet_flag = mercury
			}
			add_modifier = {
				modifier = "hot_barren_world"
				days = -1
			}
			set_planet_entity = { 
				picture = pc_hot_barren
				entity = hot_barren_planet_01_entity
			}
		}
		every_planet = {	
			limit = {
				has_planet_flag = venus
			}
			add_modifier = {
				modifier = "greenhouse_world"
				days = -1
			}
			set_planet_entity = { 
				picture = pc_greenhouse
				entity = greenhouse_planet_01_entity
			}
		}
		every_planet = {	
			limit = {
				has_planet_flag = titan
			}
			add_modifier = {
				modifier = "methane_world"
				days = -1
			}
			set_planet_entity = { 
				picture = pc_methane
				entity = methane_planet_01_entity
			}
		}
		every_planet = {	
			limit = {
				has_planet_flag = ceres
			}
			add_modifier = {
				modifier = "planetoid"
				days = -1
			}
			set_planet_entity = { 
				picture = pc_planetoid
				entity = planetoid_planet_01_entity
			}
		}
		every_planet = {	
			limit = {
				OR = {
					has_planet_flag = pluto
					has_planet_flag = makemake
					has_planet_flag = haumea
				}
			}
			add_modifier = {
				modifier = "ice_planetoid"
				days = -1
			}
			set_planet_entity = { 
				picture = pc_ice_planetoid
				entity = ice_planetoid_planet_01_entity
			}
		}
		every_planet = {	
			limit = {
				has_planet_flag = europa
			}
			add_modifier = {
				modifier = "frozen_ocean"
				days = -1
			}
			set_planet_entity = { 
				picture = pc_frozen_ocean
				entity = frozen_ocean_planet_01_entity
			}
		}
		every_planet = {
			limit = { has_planet_flag = uranus }
			add_modifier = {
				modifier = "ice_giant"
				days = -1
			}
			set_planet_entity = { 
				picture = pc_ice_giant 
				entity = "gas_giant_uranus_entity"
			}
		}
		
		every_planet = {	
			limit = { has_planet_flag = neptune }
			add_modifier = {
				modifier = "ice_giant"
				days = -1
			}
			set_planet_entity = { 
				picture = pc_ice_giant 
				entity = "gas_giant_neptune_entity"
			}
		}
		
	}
}

#Adding modifiers Night
event = {
	id = newfrontiers.7
	title = OK
	desc = OK
	hide_window = yes
	#is_triggered_only = yes
	fire_only_once = yes
	
	immediate = {
		every_planet = {	
			
			limit = {
				AND = {
					OR = {
						solar_system = {
							OR = {
								is_star_class = sc_l
								is_star_class = sc_t
								is_star_class = sc_y
								is_star_class = sc_d
							}
						}
						AND = {
							solar_system = {
								is_star_class = sc_m
							}
							has_planet_flag = cold_zone
						}
					}
					OR = {
						is_planet_class = "pc_desert"
						is_planet_class = "pc_arid"
						is_planet_class = "pc_ocean"
						is_planet_class = "pc_tundra"
						is_planet_class = "pc_arctic"
						is_planet_class = "pc_alpine"
					}
					NOT = { num_modifiers > 2 }
					NOT = { has_planet_modifier = "pm_long_night" }
					NOT = { has_planet_modifier = "pm_atmospheric_lights" }
				}
			}
			add_modifier = {
				modifier = "eternal_night"
				days = -1
			}
		}
	}
}

#Adding modifiers Giants
event = {
	id = newfrontiers.8
	title = OK
	desc = OK
	hide_window = yes
	#is_triggered_only = yes
	fire_only_once = yes
	
	immediate = {
		every_planet = {	
			# Red Giant
			if = {
				limit = {
					AND = {
						solar_system = {
							OR = {
								is_red_giant = yes
								is_red_supergiant = yes
							}
						}
						is_colonizable = yes
						NOR = {
							num_modifiers > 2
							has_planet_modifier = "pm_red_giant"
							has_planet_modifier = "pm_yellow_giant"
							has_planet_modifier = "pm_blue_giant"
						}
					}
				}
				add_modifier = {
					modifier = "red_giant"
					days = -1
				}
			}
			# Yellow Giant
			if = {
				limit = {
					AND = {
						solar_system = {
							OR = {
								is_yellow_giant = yes
								is_yellow_supergiant = yes
							}
						}
						is_colonizable = yes
						NOR = {
							num_modifiers > 2
							has_planet_modifier = "pm_red_giant"
							has_planet_modifier = "pm_yellow_giant"
							has_planet_modifier = "pm_blue_giant"
						}
					}
				}
				add_modifier = {
					modifier = "yellow_giant"
					days = -1
				}
			}
			# Blue Giant
			if = {
				limit = {
					AND = {
						solar_system = {
							is_blue_supergiant = yes 
						}
						is_colonizable = yes
						NOR = {
							num_modifiers > 2
							has_planet_modifier = "pm_red_giant"
							has_planet_modifier = "pm_yellow_giant"
							has_planet_modifier = "pm_blue_giant"
						}
					}
				}
				add_modifier = {
					modifier = "blue_giant"
					days = -1
				}
			}
		}
	}
}

#Adding modifiers Beautiful Sky
event = {
	id = newfrontiers.9
	title = OK
	desc = OK
	hide_window = yes
	#is_triggered_only = yes
	fire_only_once = yes
	
	immediate = {
		every_planet = {	
			limit = {
				AND = {
					solar_system = {
						OR = {
							is_star_class = sc_nova_1
							is_star_class = sc_nova_2
							is_star_class = sc_w_azure
							is_star_class = sc_w_red
							is_star_class = sc_w_green
							is_star_class = sc_w_purple
							is_star_class = sc_lbv_blue
							is_star_class = sc_lbv_green
							is_star_class = sc_lbv_red
							is_star_class = sc_p_purple
							is_star_class = sc_p_green
							is_star_class = sc_p_red
						}
					}
					is_colonizable = yes
					NOT = { num_modifiers > 2 }
				}
			}
			add_modifier = {
				modifier = "beautiful_sky"
				days = -1
			}
		}
	}
}

#Adding modifiers Scorched and Dead World
event = {
	id = newfrontiers.10
	title = OK
	desc = OK
	hide_window = yes
	#is_triggered_only = yes
	fire_only_once = yes
	
	immediate = {
		every_planet = {	
			limit = {
				AND = {
					is_planet_class = pc_barren
					has_planet_flag = hot_zone
					NOT = { num_modifiers > 2 }
				}
			}
			random_list = {
				70 = {
					add_modifier = {
						modifier = "hot_barren_world"
						days = -1
					}
					set_planet_entity = { 
						picture = pc_hot_barren
						entity = hot_barren_planet_01_entity
					}
				}
				30 = {
					add_modifier = {
						modifier = "scorched_world"
						days = -1
					}
					set_planet_entity = { 
						picture = pc_scorched
						entity = scorched_planet_01_entity
					}
				}
			}
		}

		every_planet = {	
			limit = {
				AND = {
					has_planet_modifier = "pm_death_world"
					NOT = { has_planet_modifier = "pm_dangerous_wildlife" }
					NOT = { has_planet_modifier = "pm_heavy_wear" }
					NOT = { has_planet_modifier = "pm_meteorite_showers" }
					NOT = { num_modifiers > 2 }
				}
			}
			random_list = {
				40 = {
					add_modifier = {
						modifier = "dangerous_wildlife"
						days = -1
					}
				}
				20 = {
					add_modifier = {
						modifier = "heavy_wear"
						days = -1
					}
				}
				10 = {
					add_modifier = {
						modifier = "meteorite_showers"
						days = -1
					}
				}
				30 = {
					#Null
				}
			}
		}
	}
}

#Adding modifiers Rings
event = {
	id = newfrontiers.11
	title = OK
	desc = OK
	hide_window = yes
	#is_triggered_only = yes
	fire_only_once = yes
	
	immediate = {
		every_planet = {	
			
			limit = {
				AND = {
					has_ring = yes
					NOT = { num_modifiers > 2 }
				}
			}
			if = {
				limit = { is_colonizable = yes }
				random_list = {
					10 = {
						add_modifier = {
							modifier = "picturesque_rings"
							days = -1
						}
					}
					10 = {
						add_modifier = {
							modifier = "desynchronous_rings"
							days = -1
						}
					}
					10 = {
						add_modifier = {
							modifier = "rich_rings"
							days = -1
						}
					}
					10 = {
						add_modifier = {
							modifier = "diamond_rings"
							days = -1
						}
					}
					60 = {
						# Null
					}
				}
				
			}
			else = {
				random_list = {
					10 = {
						add_modifier = {
							modifier = "rich_rings"
							days = -1
						}
						if = {
							limit = { has_deposit_for = shipclass_mining_station }
							random_list = {
								80 = {
									set_deposit = d_minerals_4
								}
								18 = {
									set_deposit = d_minerals_6
								}
								2 = { 
									set_deposit = d_minerals_8
								}
							}
						}
					}
					10 = {
						add_modifier = {
							modifier = "diamond_rings"
							days = -1
						}
						if = {
							limit = { has_deposit_for = shipclass_mining_station }
							random_list = {
								80 = {
									set_deposit = d_energy_4
								}
								18 = {
									set_deposit = d_energy_6
								}
								2 = {
									set_deposit = d_energy_8
								}
							}
						}
					}
					80 = {
						if = {
							limit = { has_deposit_for = shipclass_mining_station }
							random_list = {
								40 = {
									set_deposit = d_minerals_2
								}
								9 = {
									set_deposit = d_minerals_4
								}
								1 = {
									set_deposit = d_minerals_6
								}
								50 = {
									# Null
								}
							}
						}
					}
				}
			}
		}
	}
}

#Set Subclass
event = {
	id = newfrontiers.12
	title = OK
	desc = OK
	hide_window = yes
	#is_triggered_only = yes
	fire_only_once = yes
	
	immediate = {
		every_planet = {
			limit = {
				OR = {
					AND = {
						is_planet_subclass = yes
						solar_system = { NOT = { has_star_flag = sol } }
					}
					has_modifier = "tidal_locked"
				}
			}
			set_subclass = yes
		}
	}
}

#Сatastrophic event option
country_event = {
	id = newfrontiers.13
	title = "newfrontiers.13.name"
	desc = "newfrontiers.13.desc"
	picture = GFX_evt_eclipse
	show_sound = event_ship_thrusters
	location = ROOT
	
	is_triggered_only = yes

	option = {
		name = "newfrontiers.13.a"
		custom_tooltip = newfrontiers.13.a.tooltip
		set_global_flag = catastrophic_event_on

	}
	option = {
		name = "newfrontiers.13.b"
		custom_tooltip = newfrontiers.13.b.tooltip

	}
}


