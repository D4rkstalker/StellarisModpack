###############################################################
#                 Psionic Species Expension                   #
#                                         By: jasonpepe       #
###############################################################
namespace = pse

country_event = { #Set global flag
	id = pse.1
	is_triggered_only = yes
	hide_window = yes
	trigger = {
		NOT = {
			has_global_flag = has_pse_started
		}
	}
	immediate = {
		set_global_flag = has_pse_started
	}
}

country_event = {
	id = pse.2
	is_triggered_only = yes
	hide_window = yes
	trigger = {
		has_country_flag = pse_access_power
	}
	immediate = {
		set_variable = {
			which = pse_psionic_pop
			value = 0
		}
		set_variable = {
			which = pse_telepath_num
			value = 0
		}
		set_variable = {
			which = pse_leader_num
			value = 0
		}
		every_owned_pop = {
			limit = {
				has_trait = trait_latent_psionic
				root = {
					check_variable = {
						which = pse_psionic_pop
						value < 5000
					}
				}
			}
			root = {
				change_variable = {
					which = pse_psionic_pop
					value = 2.5
				}
			}
		}
		every_owned_pop = {
			limit = {
				has_trait = trait_psionic
				root = {
					check_variable = {
						which = pse_psionic_pop
						value < 5000
					}
				}
			}
			root = {
				change_variable = {
					which = pse_psionic_pop
					value = 5
				}
			}
		}
		if = {
			limit = {
				has_ethic = ethic_gestalt_consciousness
			}
			multiply_variable = {
				which = pse_psionic_pop
				value = 2
			}
		}
		if = {
			limit = {
				has_edict = pse_psi_power
			}
			multiply_variable = {
				which = pse_psionic_pop
				value = 1.5
			}
		}
		every_owned_pop = {
			limit = {
				has_job = telepath
			}
			root = {
				if = {
					limit = {
						check_variable = {
							which = pse_telepath_num
							value < 25
						}
					}
					change_variable = {
						which = pse_telepath_num
						value = 1
					}
				}
			}
		}
		every_owned_leader = {
			limit = {
				OR = {
					has_trait = leader_trait_admiral_psionic
					has_trait = leader_trait_general_psionic
					has_trait = leader_trait_governor_psionic
					has_trait = leader_trait_scientist_psionic
					has_trait = leader_trait_ruler_psionic
					has_trait = leader_trait_admiral_chosen
					has_trait = leader_trait_general_chosen
					has_trait = leader_trait_governor_chosen
					has_trait = leader_trait_scientist_chosen
					has_trait = leader_trait_ruler_chosen
				}
			}
			root = {
				if = {
					limit = {
						check_variable = {
							which = pse_leader_num
							value < 20
						}
					}
					change_variable = {
						which = pse_leader_num
						value = 1
					}
				}
			}
		}
		if = {
			limit = {
				has_ethic = ethic_gestalt_consciousness
			}
			multiply_variable = {
				which = pse_leader_num
				value = 2
			}
		}
		pse_power_cap_calc = yes
		pse_monthly_power_calc = yes
		pse_cost_pre_use_power_clac = yes
	}
}
#narrow escape
country_event = {
	id = pse.3
	is_triggered_only = yes
	hide_window = yes
	trigger = {
		has_technology = tech_pse_leader_1
		fromfrom = {
			exists = leader
			leader = {
				OR = {
					has_trait = leader_trait_ruler_chosen
					has_trait = leader_trait_admiral_chosen
					has_trait = leader_trait_governor_chosen
					has_trait = leader_trait_general_chosen
					has_trait = leader_trait_admiral_chosen
					has_trait = leader_trait_scientist_chosen
					has_trait = leader_trait_ruler_psionic
					has_trait = leader_trait_admiral_psionic
					has_trait = leader_trait_governor_psionic
					has_trait = leader_trait_general_psionic
					has_trait = leader_trait_admiral_psionic
					has_trait = leader_trait_scientist_psionic
				}
			}
			fleet = {
				num_ships < 1
			}
		}
	}
	immediate = {
		random_list = {
			10 = {

			}
			10 = {
				modifier = {
					add = 15
					has_technology = tech_pse_leader_2
				}
				capital_scope = {
					save_event_target_as = pse_capital
				}
				fromfrom = {
					leader = {
						save_event_target_as = pse_narrow_escape_leader
						exile_leader_as = pse_narrow_escape_leader
					}
				}
				create_fleet = {
					name = "NAME_Other_Science_Ship"
					effect = {
						set_owner = root
						create_ship_design = {
							design = "NAME_Prototype"
						}
						create_ship = {
							name = "NAME_From_Beyond"
							design = last_created_design
							graphical_culture = "extra_dimensional_01"
							prefix = no
							upgradable = no
						}
						set_location = root.capital_scope
						save_event_target_as = deleted_ship
					}
				}
				event_target:deleted_ship = {
					set_leader = pse_narrow_escape_leader
					leader = { unassign_leader = this }
					delete_fleet = this
				}
				create_message = {
					type = PSE_NARROW_ESCAPED
					localization = pse_narrow_escape_tooltip
					days = 60
					target = THIS
					variable = {
						type = name
						localization = pse_leader
						scope = event_target:pse_narrow_escape_leader
					}
					variable = {
						type = name
						localization = pse_capital
						scope = event_target:pse_capital
					}
				}
			}
		}
	}
}

#Accessable psi power
country_event = {
	id = pse.90
	title = pse.90.title
	desc = {
		trigger = {
			hidden:root = {
				success_text = {
					text = pse.90.normal
					NOT = {
						has_ethic = ethic_gestalt_consciousness
					}
				}
				success_text = {
					text = pse.90.desc
					has_ethic = ethic_gestalt_consciousness
				}
			}
		}
	} 
	picture = GFX_evt_psionics
	show_sound = event_psionic
	is_triggered_only = yes
	trigger = {
		NOT = {
			has_country_flag = pse_access_power
		}
#		NOT = {
#			has_ethic = ethic_gestalt_consciousness
#		}
		OR = {
			AND = {
				species = {
					OR = {
						has_trait = trait_latent_psionic
						has_trait = trait_psionic
					}
				}
				has_technology = tech_psionic_theory
			}
			leader = {
				has_trait = leader_trait_ruler_chosen
			}
		}
	}
	after = {
		custom_tooltip = pse.90.tooltip
	}
	immediate = {
		set_country_flag = pse_access_power
		set_country_flag = pse_top_bar_enabled
		country_event = {
			id = pse.2
		}
		pse_power_cap_calc = yes
		pse_monthly_power_calc = yes
		pse_cost_pre_use_power_clac = yes
	}
	option = {
		name = pse.90.a
		custom_tooltip = edict_pse_psi_ruler_ui_tooltip
		hidden_effect = {
			country_event = {
				id = pse.1000
			}
		}
	}
	option = {
		name = uplift.6000.b
	}
}


#COOLDOWN NOTIFY
country_event = {
	id = pse.99
	is_triggered_only = yes
	hide_window = yes
	trigger = {
		has_country_flag = pse_access_power
	}
	immediate = {
		if = {
			limit = {
				has_country_flag = pse_power_leader_find_cooldown
				NOT = {
					has_country_flag = pse_power_leader_find_pre_note_flag
				}
			}
			set_country_flag = pse_power_leader_find_pre_note_flag
		}
		if = {
			limit = {
				has_country_flag = pse_power_leader_exp_up_cooldown
				NOT = {
					has_country_flag = pse_power_leader_exp_up_pre_note_flag
				}
			}
			set_country_flag = pse_power_leader_exp_up_pre_note_flag
		}
		if = {
			limit = {
				has_country_flag = pse_power_leader_tech_cooldown
				NOT = {
					has_country_flag = pse_power_leader_tech_pre_note_flag
				}
			}
			set_country_flag = pse_power_leader_tech_pre_note_flag
		}
		if = {
			limit = {
				has_country_flag = pse_power_leader_remove_negative_trait_cooldown
				NOT = {
					has_country_flag = pse_power_leader_remove_negative_trait_pre_note_flag
				}
			}
			set_country_flag = pse_power_leader_remove_negative_trait_pre_note_flag
		}
		if = {
			limit = {
				has_country_flag = pse_power_shroud_boon_cooldown
				NOT = {
					has_country_flag = pse_power_shroud_boon_pre_note_flag
				}
			}
			set_country_flag = pse_power_shroud_boon_pre_note_flag
		}
		if = {
			limit = {
				has_country_flag = pse_power_shroud_enter_cooldown
				NOT = {
					has_country_flag = pse_power_shroud_enter_pre_note_flag
				}
			}
			set_country_flag = pse_power_shroud_enter_pre_note_flag
		}
		if = {
			limit = {
				has_country_flag = pse_power_shroud_cause_left_cooldown
				NOT = {
					has_country_flag = pse_power_shroud_cause_left_pre_note_flag
				}
			}
			set_country_flag = pse_power_shroud_cause_left_pre_note_flag
		}
		if = {
			limit = {
				has_country_flag = pse_power_planet_unity_cooldown
				NOT = {
					has_country_flag = pse_power_planet_unity_pre_note_flag
				}
			}
			set_country_flag = pse_power_planet_unity_pre_note_flag
		}
		if = {
			limit = {
				has_country_flag = pse_power_planet_crime_cooldown
				NOT = {
					has_country_flag = pse_power_planet_crime_pre_note_flag
				}
			}
			set_country_flag = pse_power_planet_crime_pre_note_flag
		}
		if = {
			limit = {
				has_country_flag = pse_power_planet_ethic_cooldown
				NOT = {
					has_country_flag = pse_power_planet_ethic_pre_note_flag
				}
			}
			set_country_flag = pse_power_planet_ethic_pre_note_flag
		}
		if = {
			limit = {
				has_country_flag = pse_power_planet_build_cooldown
				NOT = {
					has_country_flag = pse_power_planet_build_pre_note_flag
				}
			}
			set_country_flag = pse_power_planet_build_pre_note_flag
		}
		if = {
			limit = {
				has_country_flag = pse_power_cleanse_psi_cooldown
				NOT = {
					has_country_flag = pse_power_cleanse_psi_pre_note_flag
				}
			}
			set_country_flag = pse_power_cleanse_psi_pre_note_flag
		}
		if = {
			limit = {
				has_country_flag = pse_power_cleanse_cap_cooldown
				NOT = {
					has_country_flag = pse_power_cleanse_cap_pre_note_flag
				}
			}
			set_country_flag = pse_power_cleanse_cap_pre_note_flag
		}
		if = {
			limit = {
				has_country_flag = pse_power_cleanse_zro_cooldown
				NOT = {
					has_country_flag = pse_power_cleanse_zro_pre_note_flag
				}
			}
			set_country_flag = pse_power_cleanse_zro_pre_note_flag
		}

		if = {
			limit = {
				has_country_flag = pse_power_summon_spacefaring_cooldown
				NOT = {
					has_country_flag = pse_power_summon_spacefaring_pre_note_flag
				}
			}
			set_country_flag = pse_power_summon_spacefaring_pre_note_flag
		}
		if = {
			limit = {
				has_country_flag = pse_power_summon_avatar_cooldown
				NOT = {
					has_country_flag = pse_power_summon_avatar_pre_note_flag
				}
			}
			set_country_flag = pse_power_summon_avatar_pre_note_flag
		}
		if = {
			limit = {
				has_country_flag = pse_power_summon_resource_used_flag
				NOT = {
					has_country_flag = pse_power_summon_resource_pre_note_flag
				}
			}
			set_country_flag = pse_power_summon_resource_pre_note_flag
		}
		if = {
			limit = {
				has_country_flag = pse_power_combat_boon_cooldown
				NOT = {
					has_country_flag = pse_power_combat_boon_pre_note_flag
				}
			}
			set_country_flag = pse_power_combat_boon_pre_note_flag
		}
		if = {
			limit = {
				has_country_flag = pse_power_combat_range_cooldown
				NOT = {
					has_country_flag = pse_power_combat_range_pre_note_flag
				}
			}
			set_country_flag = pse_power_combat_range_pre_note_flag
		}
		if = {
			limit = {
				has_country_flag = pse_power_combat_arc_cooldown
				NOT = {
					has_country_flag = pse_power_combat_arc_pre_note_flag
				}
			}
			set_country_flag = pse_power_combat_arc_pre_note_flag
		}
		if = {
			limit = {
				has_country_flag = pse_power_combat_ship_cooldown
				NOT = {
					has_country_flag = pse_power_combat_ship_pre_note_flag
				}
			}
			set_country_flag = pse_power_combat_ship_pre_note_flag
		}
		if = {
			limit = {
				has_country_flag = pse_power_break_unity_cooldown
				NOT = {
					has_country_flag = pse_power_break_unity_pre_note_flag
				}
			}
			set_country_flag = pse_power_break_unity_pre_note_flag
		}
		if = {
			limit = {
				has_country_flag = pse_power_break_stability_cooldown
				NOT = {
					has_country_flag = pse_power_break_stability_pre_note_flag
				}
			}
			set_country_flag = pse_power_break_stability_pre_note_flag
		}
		if = {
			limit = {
				has_country_flag = pse_power_break_building_cooldown
				NOT = {
					has_country_flag = pse_power_break_building_pre_note_flag
				}
			}
			set_country_flag = pse_power_break_building_pre_note_flag
		}
		if = {
			limit = {
				has_country_flag = pse_power_galaxy_storm_cooldown
				NOT = {
					has_country_flag = pse_power_galaxy_storm_pre_note_flag
				}
			}
			set_country_flag = pse_power_galaxy_storm_pre_note_flag
		}
		if = {
			limit = {
				has_country_flag = pse_power_galaxy_field_cooldown
				NOT = {
					has_country_flag = pse_power_galaxy_field_pre_note_flag
				}
			}
			set_country_flag = pse_power_galaxy_field_pre_note_flag
		}
		if = {
			limit = {
				has_country_flag = pse_power_galaxy_spacefaring_cooldown
				NOT = {
					has_country_flag = pse_power_galaxy_spacefaring_pre_note_flag
				}
			}
			set_country_flag = pse_power_galaxy_spacefaring_pre_note_flag
		}
		if = {
			limit = {
				has_country_flag = pse_power_galaxy_cause_cooldown
				NOT = {
					has_country_flag = pse_power_galaxy_cause_pre_note_flag
				}
			}
			set_country_flag = pse_power_galaxy_cause_pre_note_flag
		}
		if = {
			limit = {
				has_country_flag = pse_power_chosen_worship_cooldown
				NOT = {
					has_country_flag = pse_power_chosen_worship_pre_note_flag
				}
			}
			set_country_flag = pse_power_chosen_worship_pre_note_flag
		}
		if = {
			limit = {
				has_country_flag = pse_power_chosen_speed_cooldown
				NOT = {
					has_country_flag = pse_power_chosen_speed_pre_note_flag
				}
			}
			set_country_flag = pse_power_chosen_speed_pre_note_flag
		}
		if = {
			limit = {
				has_country_flag = pse_power_chosen_shroud_cooldown
				NOT = {
					has_country_flag = pse_power_chosen_shroud_pre_note_flag
				}
			}
			set_country_flag = pse_power_chosen_shroud_pre_note_flag
		}
		if = {
			limit = {
				has_country_flag = pse_power_chosen_backstab_cooldown
				NOT = {
					has_country_flag = pse_power_chosen_backstab_pre_note_flag
				}
			}
			set_country_flag = pse_power_chosen_backstab_pre_note_flag
		}
		if = {
			limit = {
				has_country_flag = pse_power_chosen_bomb_cooldown
				NOT = {
					has_country_flag = pse_power_chosen_bomb_pre_note_flag
				}
			}
			set_country_flag = pse_power_chosen_bomb_pre_note_flag
		}
		if = {
			limit = {
				has_country_flag = pse_power_covenant_composer_life_cooldown
				NOT = {
					has_country_flag = pse_power_covenant_composer_life_pre_note_flag
				}
			}
			set_country_flag = pse_power_covenant_composer_life_pre_note_flag
		}
		if = {
			limit = {
				has_country_flag = pse_power_covenant_composer_pop_cooldown
				NOT = {
					has_country_flag = pse_power_covenant_composer_pop_pre_note_flag
				}
			}
			set_country_flag = pse_power_covenant_composer_pop_pre_note_flag
		}
		if = {
			limit = {
				has_country_flag = pse_power_covenant_eater_fleet_cooldown
				NOT = {
					has_country_flag = pse_power_covenant_eater_fleet_pre_note_flag
				}
			}
			set_country_flag = pse_power_covenant_eater_fleet_pre_note_flag
		}
		if = {
			limit = {
				has_country_flag = pse_power_covenant_eater_army_cooldown
				NOT = {
					has_country_flag = pse_power_covenant_eater_army_pre_note_flag
				}
			}
			set_country_flag = pse_power_covenant_eater_army_pre_note_flag
		}
		if = {
			limit = {
				has_country_flag = pse_power_covenant_desire_income_cooldown
				NOT = {
					has_country_flag = pse_power_covenant_desire_income_pre_note_flag
				}
			}
			set_country_flag = pse_power_covenant_desire_income_pre_note_flag
		}
		if = {
			limit = {
				has_country_flag = pse_power_covenant_desire_borrow_cooldown
				NOT = {
					has_country_flag = pse_power_covenant_desire_borrow_pre_note_flag
				}
			}
			set_country_flag = pse_power_covenant_desire_borrow_pre_note_flag
		}
		if = {
			limit = {
				has_country_flag = pse_power_covenant_knowledge_tech_cooldown
				NOT = {
					has_country_flag = pse_power_covenant_knowledge_tech_pre_note_flag
				}
			}
			set_country_flag = pse_power_covenant_knowledge_tech_pre_note_flag
		}
		if = {
			limit = {
				has_country_flag = pse_power_covenant_knowledge_code_cooldown
				NOT = {
					has_country_flag = pse_power_covenant_knowledge_code_pre_note_flag
				}
			}
			set_country_flag = pse_power_covenant_knowledge_code_pre_note_flag
		}
		if = {
			limit = {
				has_country_flag = pse_power_covenant_all_bribe_cooldown
				NOT = {
					has_country_flag = pse_power_covenant_all_bribe_pre_note_flag
				}
			}
			set_country_flag = pse_power_covenant_all_bribe_pre_note_flag
		}
###	
		effect_pse_cooldown_notify = {
			POWER_MAIN = leader
			POWER_NAME = find
		}
		effect_pse_cooldown_notify = {
			POWER_MAIN = leader
			POWER_NAME = exp_up
		}
		effect_pse_cooldown_notify = {
			POWER_MAIN = leader
			POWER_NAME = tech
		}
		effect_pse_cooldown_notify = {
			POWER_MAIN = leader
			POWER_NAME = remove_negative_trait
		}
		effect_pse_cooldown_notify = {
			POWER_MAIN = shroud
			POWER_NAME = boon
		}
		effect_pse_cooldown_notify = {
			POWER_MAIN = shroud
			POWER_NAME = enter
		}
		effect_pse_cooldown_notify = {
			POWER_MAIN = shroud
			POWER_NAME = cause_left
		}
		effect_pse_cooldown_notify = {
			POWER_MAIN = planet
			POWER_NAME = unity
		}
		effect_pse_cooldown_notify = {
			POWER_MAIN = planet
			POWER_NAME = crime
		}
		effect_pse_cooldown_notify = {
			POWER_MAIN = planet
			POWER_NAME = ethic
		}
		effect_pse_cooldown_notify = {
			POWER_MAIN = planet
			POWER_NAME = build
		}
		effect_pse_cooldown_notify = {
			POWER_MAIN = cleanse
			POWER_NAME = psi
		}
		effect_pse_cooldown_notify = {
			POWER_MAIN = cleanse
			POWER_NAME = cap
		}
		effect_pse_cooldown_notify = {
			POWER_MAIN = cleanse
			POWER_NAME = zro
		}
		effect_pse_cooldown_notify = {
			POWER_MAIN = summon
			POWER_NAME = spacefaring
		}
		effect_pse_cooldown_notify = {
			POWER_MAIN = summon
			POWER_NAME = avatar
		}
		effect_pse_cooldown_notify = {
			POWER_MAIN = summon
			POWER_NAME = resource
		}
		effect_pse_cooldown_notify = {
			POWER_MAIN = combat
			POWER_NAME = boon
		}
		effect_pse_cooldown_notify = {
			POWER_MAIN = combat
			POWER_NAME = range
		}
		effect_pse_cooldown_notify = {
			POWER_MAIN = combat
			POWER_NAME = arc
		}
		effect_pse_cooldown_notify = {
			POWER_MAIN = combat
			POWER_NAME = ship
		}
		effect_pse_cooldown_notify = {
			POWER_MAIN = break
			POWER_NAME = unity
		}
		effect_pse_cooldown_notify = {
			POWER_MAIN = break
			POWER_NAME = stability
		}
		effect_pse_cooldown_notify = {
			POWER_MAIN = break
			POWER_NAME = building
		}
		effect_pse_cooldown_notify = {
			POWER_MAIN = galaxy
			POWER_NAME = storm
		}
		effect_pse_cooldown_notify = {
			POWER_MAIN = galaxy
			POWER_NAME = field
		}
		effect_pse_cooldown_notify = {
			POWER_MAIN = galaxy
			POWER_NAME = spacefaring
		}
		effect_pse_cooldown_notify = {
			POWER_MAIN = galaxy
			POWER_NAME = cause
		}
		effect_pse_cooldown_notify = {
			POWER_MAIN = chosen
			POWER_NAME = worship
		}
		effect_pse_cooldown_notify = {
			POWER_MAIN = chosen
			POWER_NAME = speed
		}
		effect_pse_cooldown_notify = {
			POWER_MAIN = chosen
			POWER_NAME = shroud
		}
		effect_pse_cooldown_notify = {
			POWER_MAIN = chosen
			POWER_NAME = backstab
		}
		effect_pse_cooldown_notify = {
			POWER_MAIN = chosen
			POWER_NAME = bomb
		}
		effect_pse_cooldown_notify = {
			POWER_MAIN = covenant_composer
			POWER_NAME = life
		}
		effect_pse_cooldown_notify = {
			POWER_MAIN = covenant_composer
			POWER_NAME = pop
		}
		effect_pse_cooldown_notify = {
			POWER_MAIN = covenant_eater
			POWER_NAME = fleet
		}
		effect_pse_cooldown_notify = {
			POWER_MAIN = covenant_eater
			POWER_NAME = army
		}
		effect_pse_cooldown_notify = {
			POWER_MAIN = covenant_desire
			POWER_NAME = income
		}
		effect_pse_cooldown_notify = {
			POWER_MAIN = covenant_desire
			POWER_NAME = borrow
		}
		effect_pse_cooldown_notify = {
			POWER_MAIN = covenant_knowledge
			POWER_NAME = tech
		}
		effect_pse_cooldown_notify = {
			POWER_MAIN = covenant_knowledge
			POWER_NAME = code
		}
		effect_pse_cooldown_notify = {
			POWER_MAIN = covenant_all
			POWER_NAME = bribe
		}
	}
}

#stolen from utopia.2605
# Psychic Identified
country_event = {
	id = pse.100
	title = "utopia.2605.name"
	desc = "utopia.2605.desc"
	picture = GFX_evt_psionics
	show_sound = event_psionic
	is_triggered_only = yes

	trigger = {
		any_owned_leader = {
			species = {
				OR = {
					has_trait = trait_latent_psionic
					has_trait = trait_psionic
				}
			}
			NOT = {
				OR = {
					has_trait = leader_trait_admiral_psionic
					has_trait = leader_trait_general_psionic
					has_trait = leader_trait_governor_psionic
					has_trait = leader_trait_scientist_psionic
					has_trait = leader_trait_ruler_psionic
					has_trait = leader_trait_admiral_chosen
					has_trait = leader_trait_general_chosen
					has_trait = leader_trait_governor_chosen
					has_trait = leader_trait_scientist_chosen
					has_trait = leader_trait_ruler_chosen
				}
			}
		}
	}

	immediate = {
		random_owned_leader = {
			limit = {
				species = {
					OR = {
						has_trait = trait_latent_psionic
						has_trait = trait_psionic
					}
				}
				NOT = {
					OR = {
						has_trait = leader_trait_admiral_psionic
						has_trait = leader_trait_general_psionic
						has_trait = leader_trait_governor_psionic
						has_trait = leader_trait_scientist_psionic
						has_trait = leader_trait_ruler_psionic
						has_trait = leader_trait_admiral_chosen
						has_trait = leader_trait_general_chosen
						has_trait = leader_trait_governor_chosen
						has_trait = leader_trait_scientist_chosen
						has_trait = leader_trait_ruler_chosen
					}
				}
			}
			save_event_target_as = psionic_leader
		}
	}

	option = {
		name = "utopia.2605.a"
		event_target:psionic_leader = {
			if = {
				limit = { leader_class = admiral }
				add_trait = leader_trait_admiral_psionic
				hidden_effect = { add_ruler_trait = leader_trait_ruler_psionic }
				break = yes
			}
			if = {
				limit = { leader_class = general }
				add_trait = leader_trait_general_psionic
				hidden_effect = { add_ruler_trait = leader_trait_ruler_psionic }
				break = yes
			}
			if = {
				limit = { leader_class = governor }
				add_trait = leader_trait_governor_psionic
				hidden_effect = { add_ruler_trait = leader_trait_ruler_psionic }
				break = yes
			}
			if = {
				limit = { leader_class = scientist }
				add_trait = leader_trait_scientist_psionic
				hidden_effect = { add_ruler_trait = leader_trait_ruler_psionic }
				break = yes
			}
			if = {
				limit = { leader_class = ruler }
				hidden_effect = { add_trait = leader_trait_ruler_psionic }
				add_ruler_trait = leader_trait_ruler_psionic
				break = yes
			}
		}
	}
}


#TECH
country_event = {
	id = pse.101
	title = pse.101.title
	desc = pse.101.desc
	desc = pse.101.desc2
	desc = pse.101.desc3
	desc = pse.101.desc4
	desc = pse.101.desc5
	picture = GFX_evt_surreal_visions
	show_sound = event_sls_eureka
	is_triggered_only = yes
	immediate = {
		random_owned_leader = {
			limit = {
				is_researching_area = physics
			}
			pse_power_leader_tech_effect = yes
			save_event_target_as = pse_physics_scientist
		}
		random_owned_leader = {
			limit = {
				is_researching_area = society
			}
			pse_power_leader_tech_effect = yes
			save_event_target_as = pse_society_scientist
		}
		random_owned_leader = {
			limit = {
				is_researching_area = engineering
			}
			pse_power_leader_tech_effect = yes
			save_event_target_as = pse_engineering_scientist
		}
	}
	option = {
		name = BREAKTHROUGH

##PHY		
		if = {
			limit = {
				exists = event_target:pse_physics_scientist
			}
			event_target:pse_physics_scientist = {
				if = {
					limit = {
						has_trait = leader_trait_expertise_computing
						NOR = {
							has_leader_flag = pse_scientist_leader_has_mulit_physics_expert
							has_trait = leader_trait_expertise_field_manipulation
							has_trait = leader_trait_expertise_particles
						}
					}
					root = {
						add_random_research_option = {
							category = computing
							area = physics
							tier = 2
							ignore_prereqs = no
							add_progress = 0.33
							fail_effects = {
								add_random_research_option = {
									category = computing
									area = physics
									tier = 3
									ignore_prereqs = no
									add_progress = 0.33
									fail_effects = {
										add_random_research_option = {
											category = computing
											area = physics
											ignore_prereqs = no
											add_progress = 0.33
											fail_effects = {
												root = {
													add_monthly_resource_mult = {
														resource = physics_research
														value = 12
													}
												}
											}
										}	
									}
								}
							}
						}
					}
					
				}
				if = {
					limit = {
						has_trait = leader_trait_expertise_field_manipulation
						NOR = {
							has_leader_flag = pse_scientist_leader_has_mulit_physics_expert
							has_trait = leader_trait_expertise_computing
							has_trait = leader_trait_expertise_particles
						}
					}
					root = {
						add_random_research_option = {
							category = field_manipulation
							area = physics
							tier = 2
							ignore_prereqs = no
							add_progress = 0.33
							fail_effects = {
								add_random_research_option = {
									category = field_manipulation
									area = physics
									tier = 3
									ignore_prereqs = no
									add_progress = 0.33
									fail_effects = {
										add_random_research_option = {
											category = field_manipulation
											area = physics
											ignore_prereqs = no
											add_progress = 0.33
											fail_effects = {
												root = {
													add_monthly_resource_mult = {
														resource = physics_research
														value = 12
													}
												}
											}
										}
									}
								}
							}
						}
					}
					
				}
				if = {
					limit = {
						has_trait = leader_trait_expertise_particles
						NOR = {
							has_leader_flag = pse_scientist_leader_has_mulit_physics_expert
							has_trait = leader_trait_expertise_computing
							has_trait = leader_trait_expertise_field_manipulation
						}
					}
					root = {
						add_random_research_option = {
							category = particles
							area = physics
							tier = 2
							ignore_prereqs = no
							add_progress = 0.33
							fail_effects = {
								add_random_research_option = {
									category = particles
									area = physics
									tier = 3
									ignore_prereqs = no
									add_progress = 0.33
									fail_effects = {
										add_random_research_option = {
											category = particles
											area = physics
											ignore_prereqs = no
											add_progress = 0.33
											fail_effects = {
												root = {
													add_monthly_resource_mult = {
														resource = physics_research
														value = 12
													}
												}
											}
										}
									}
								}
							}
						}
					}
					
				}
				if = {
					limit = {
						OR = {
							has_leader_flag = pse_scientist_leader_has_mulit_physics_expert
							NOR = {
								has_trait = leader_trait_expertise_computing
								has_trait = leader_trait_expertise_field_manipulation
								has_trait = leader_trait_expertise_particles
							}
						}
					}
					root = {
						add_monthly_resource_mult = {
							resource = physics_research
							value = 24
						}
					}
					
				}
			}
		}

##SOC
		if = {
			limit = {
				exists = event_target:pse_society_scientist
			}
			if = {
				limit = {
					event_target:pse_society_scientist = {
						has_trait = leader_trait_expertise_biology
						NOR = {
							has_leader_flag = pse_scientist_leader_has_mulit_society_expert
							has_trait = leader_trait_expertise_military_theory
							has_trait = leader_trait_expertise_new_worlds
							has_trait = leader_trait_expertise_statecraft
							has_trait = leader_trait_expertise_good_trading
							has_trait = leader_trait_expertise_psionics
						}
					}
				}
				add_random_research_option = {
					category = biology
					area = society
					tier = 2
					ignore_prereqs = no
					add_progress = 0.33
					fail_effects = {
						add_random_research_option = {
							category = biology
							area = society
							tier = 3
							ignore_prereqs = no
							add_progress = 0.33
							fail_effects = {
								add_random_research_option = {
									category = biology
									area = society
									ignore_prereqs = no
									add_progress = 0.33
									fail_effects = {
										root = {
											add_monthly_resource_mult = {
												resource = society_research
												value = 12
											}
										}
									}
								}
							}
						}
					}
				}
			}
			if = {
				limit = {
					event_target:pse_society_scientist = {
						has_trait = leader_trait_expertise_military_theory
						NOR = {
							has_leader_flag = pse_scientist_leader_has_mulit_society_expert
							has_trait = leader_trait_expertise_biology
							has_trait = leader_trait_expertise_new_worlds
							has_trait = leader_trait_expertise_statecraft
							has_trait = leader_trait_expertise_good_trading
							has_trait = leader_trait_expertise_psionics
						}
					}
				}
				add_random_research_option = {
					category = military_theory
					area = society
					tier = 2
					ignore_prereqs = no
					add_progress = 0.33
					fail_effects = {
						add_random_research_option = {
							category = military_theory
							area = society
							tier = 3
							ignore_prereqs = no
							add_progress = 0.33
							fail_effects = {
								add_random_research_option = {
									category = military_theory
									area = society
									ignore_prereqs = no
									add_progress = 0.33
									fail_effects = {
										root = {
											add_monthly_resource_mult = {
												resource = society_research
												value = 12
											}
										}
									}
								}
							}
						}
					}
				}
			}
			if = {
				limit = {
					event_target:pse_society_scientist = {
						has_trait = leader_trait_expertise_new_worlds
						NOR = {
							has_leader_flag = pse_scientist_leader_has_mulit_society_expert
							has_trait = leader_trait_expertise_biology
							has_trait = leader_trait_expertise_military_theory
							has_trait = leader_trait_expertise_statecraft
							has_trait = leader_trait_expertise_good_trading
							has_trait = leader_trait_expertise_psionics
						}
					}
				}
				add_random_research_option = {
					category = new_worlds
					area = society
					tier = 2
					ignore_prereqs = no
					add_progress = 0.33
					fail_effects = {
						add_random_research_option = {
							category = new_worlds
							area = society
							tier = 3
							ignore_prereqs = no
							add_progress = 0.33
							fail_effects = {
								add_random_research_option = {
									category = new_worlds
									area = society
									ignore_prereqs = no
									add_progress = 0.33
									fail_effects = {
										root = {
											add_monthly_resource_mult = {
												resource = society_research
												value = 12
											}
										}
									}
								}
							}
						}
					}
				}
			}
			if = {
				limit = {
					event_target:pse_society_scientist = {
						has_trait = leader_trait_expertise_statecraft
						NOR = {
							has_leader_flag = pse_scientist_leader_has_mulit_society_expert
							has_trait = leader_trait_expertise_biology
							has_trait = leader_trait_expertise_military_theory
							has_trait = leader_trait_expertise_new_worlds
							has_trait = leader_trait_expertise_good_trading
							has_trait = leader_trait_expertise_psionics
						}
					}
				}
				add_random_research_option = {
					category = statecraft
					area = society
					tier = 2
					ignore_prereqs = no
					add_progress = 0.33
					fail_effects = {
						add_random_research_option = {
							category = statecraft
							area = society
							tier = 3
							ignore_prereqs = no
							add_progress = 0.33
							fail_effects = {
								add_random_research_option = {
									category = statecraft
									area = society
									ignore_prereqs = no
									add_progress = 0.33
									fail_effects = {
										root = {
											add_monthly_resource_mult = {
												resource = society_research
												value = 12
											}
										}
									}
								}
							}
						}
					}
				}
			}
			if = {
				limit = {
					event_target:pse_society_scientist = {
						has_trait = leader_trait_expertise_good_trading
						NOR = {
							has_leader_flag = pse_scientist_leader_has_mulit_society_expert
							has_trait = leader_trait_expertise_biology
							has_trait = leader_trait_expertise_military_theory
							has_trait = leader_trait_expertise_new_worlds
							has_trait = leader_trait_expertise_statecraft
							has_trait = leader_trait_expertise_psionics
						}
					}
				}
				add_random_research_option = {
					category = good_trading
					area = society
					tier = 2
					ignore_prereqs = no
					add_progress = 0.33
					fail_effects = {
						add_random_research_option = {
							category = good_trading
							area = society
							tier = 3
							ignore_prereqs = no
							add_progress = 0.33
							fail_effects = {
								add_random_research_option = {
									category = good_trading
									area = society
									ignore_prereqs = no
									add_progress = 0.33
									fail_effects = {
										root = {
											add_monthly_resource_mult = {
												resource = society_research
												value = 12
											}
										}
									}
								}
							}
						}
					}
				}
			}
			if = {
				limit = {
					event_target:pse_society_scientist = {
						has_trait = leader_trait_expertise_psionics
						NOR = {
							has_leader_flag = pse_scientist_leader_has_mulit_society_expert
							has_trait = leader_trait_expertise_biology
							has_trait = leader_trait_expertise_military_theory
							has_trait = leader_trait_expertise_new_worlds
							has_trait = leader_trait_expertise_statecraft
							has_trait = leader_trait_expertise_good_trading
						}
					}
				}
				add_random_research_option = {
					category = psionics
					area = society
					tier = 2
					ignore_prereqs = no
					add_progress = 0.33
					fail_effects = {
						add_random_research_option = {
							category = psionics
							area = society
							tier = 3
							ignore_prereqs = no
							add_progress = 0.33
							fail_effects = {
								add_random_research_option = {
									category = psionics
									area = society
									ignore_prereqs = no
									add_progress = 0.33
									fail_effects = {
										root = {
											add_monthly_resource_mult = {
												resource = society_research
												value = 12
											}
										}
									}
								}
							}
						}
					}
				}
			}
			if = {
				limit = {
					event_target:pse_society_scientist = {
						OR = {
							has_leader_flag = pse_scientist_leader_has_mulit_society_expert
							NOR = {
								has_trait = leader_trait_expertise_biology
								has_trait = leader_trait_expertise_military_theory
								has_trait = leader_trait_expertise_new_worlds
								has_trait = leader_trait_expertise_psionics
								has_trait = leader_trait_expertise_statecraft
								has_trait = leader_trait_expertise_good_trading
							}
						}
					}
				}
				root = {
					add_monthly_resource_mult = {
						resource = society_research
						value = 24
					}
				}		
			}
		}
		
##ENG
		if = {
			limit = {
				exists = event_target:pse_engineering_scientist
			}
			if = {
				limit = {
					event_target:pse_engineering_scientist = {
						has_trait = leader_trait_expertise_industry
						NOR = {
							has_leader_flag = pse_scientist_leader_has_mulit_engineering_expert
							has_trait = leader_trait_expertise_materials
							has_trait = leader_trait_expertise_propulsion
							has_trait = leader_trait_expertise_voidcraft
						}
					}
				}
				add_random_research_option = {
					category = industry
					area = engineering
					tier = 2
					ignore_prereqs = no
					add_progress = 0.33
					fail_effects = {
						add_random_research_option = {
							category = industry
							area = engineering
							tier = 3
							ignore_prereqs = no
							add_progress = 0.33
							fail_effects = {
								add_random_research_option = {
									category = industry
									area = engineering
									ignore_prereqs = no
									add_progress = 0.33
									fail_effects = {
										root = {
											add_monthly_resource_mult = {
												resource = engineering_research
												value = 12
											}
										}
									}
								}
							}
						}
					}
				}
			}
			if = {
				limit = {
					event_target:pse_engineering_scientist = {
						has_trait = leader_trait_expertise_materials
						NOR = {
							has_leader_flag = pse_scientist_leader_has_mulit_engineering_expert
							has_trait = leader_trait_expertise_industry
							has_trait = leader_trait_expertise_propulsion
							has_trait = leader_trait_expertise_voidcraft
						}
					}
				}
				add_random_research_option = {
					category = materials
					area = engineering
					tier = 2
					ignore_prereqs = no
					add_progress = 0.33
					fail_effects = {
						add_random_research_option = {
							category = materials
							area = engineering
							tier = 3
							ignore_prereqs = no
							add_progress = 0.33
							fail_effects = {
								add_random_research_option = {
									category = materials
									area = engineering
									ignore_prereqs = no
									add_progress = 0.33
									fail_effects = {
										root = {
											add_monthly_resource_mult = {
												resource = engineering_research
												value = 12
											}
										}
									}
								}
							}
						}
					}
				}
			}
			if = {
				limit = {
					event_target:pse_engineering_scientist = {
						has_trait = leader_trait_expertise_propulsion
						NOR = {
							has_leader_flag = pse_scientist_leader_has_mulit_engineering_expert
							has_trait = leader_trait_expertise_industry
							has_trait = leader_trait_expertise_materials
							has_trait = leader_trait_expertise_voidcraft
						}
					}
				}
				add_random_research_option = {
					category = propulsion
					area = engineering
					tier = 2
					ignore_prereqs = no
					add_progress = 0.33
					fail_effects = {
						add_random_research_option = {
							category = propulsion
							area = engineering
							tier = 3
							ignore_prereqs = no
							add_progress = 0.33
							fail_effects = {
								add_random_research_option = {
									category = propulsion
									area = engineering
									ignore_prereqs = no
									add_progress = 0.33
									fail_effects = {
										root = {
											add_monthly_resource_mult = {
												resource = engineering_research
												value = 12
											}
										}
									}
								}
							}
						}
					}
				}
			}
			if = {
				limit = {
					event_target:pse_engineering_scientist = {
						has_trait = leader_trait_expertise_voidcraft
						NOR = {
							has_leader_flag = pse_scientist_leader_has_mulit_engineering_expert
							has_trait = leader_trait_expertise_industry
							has_trait = leader_trait_expertise_materials
							has_trait = leader_trait_expertise_propulsion
						}
					}
				}
				add_random_research_option = {
					category = voidcraft
					area = engineering
					tier = 2
					ignore_prereqs = no
					add_progress = 0.33
					fail_effects = {
						add_random_research_option = {
							category = voidcraft
							area = engineering
							tier = 3
							ignore_prereqs = no
							add_progress = 0.33
							fail_effects = {
								add_random_research_option = {
									category = voidcraft
									area = engineering
									ignore_prereqs = no
									add_progress = 0.33
									fail_effects = {
										root = {
											add_monthly_resource_mult = {
												resource = engineering_research
												value = 12
											}
										}
									}
								}
							}
						}
					}
				}
			}
			if = {
				limit = {
					event_target:pse_engineering_scientist = {
						OR = {
							has_leader_flag = pse_scientist_leader_has_mulit_engineering_expert
							NOR = {
								has_trait = leader_trait_expertise_industry
								has_trait = leader_trait_expertise_materials
								has_trait = leader_trait_expertise_propulsion
								has_trait = leader_trait_expertise_voidcraft
							}
						}
					}
				}
				root = {
					add_monthly_resource_mult = {
						resource = engineering_research
						value = 24
					}
				}
			}
		}
	}
}

country_event = {
	id = pse.102
    title = pse.102.name
    desc = {
		trigger = { 
			success_text = {
				text = pse.102.desc
				always = yes
			}
            success_text = {
				text = pse.102.desc_a
				event_target:selected_leader = {
                    has_trait = leader_trait_stubborn
                }
			}
            success_text = {
				text = pse.102.desc_b
				event_target:selected_leader = {
                    has_trait = leader_trait_substance_abuser
                }
			}
            success_text = {
				text = pse.102.desc_c
				event_target:selected_leader = {
                    has_trait = leader_trait_arrested_development
                }
			}
            success_text = {
				text = pse.102.desc_d
				event_target:selected_leader = {
                    has_trait = leader_trait_nervous
                }
			}
            success_text = {
				text = pse.102.desc_e
				event_target:selected_leader = {
                    has_trait = leader_trait_lethargic
                }
			}
            success_text = {
				text = pse.102.desc_f
				event_target:selected_leader = {
                    has_trait = leader_trait_armchair_commander
                }
			}
            success_text = {
				text = pse.102.desc_g
				event_target:selected_leader = {
                    has_trait = leader_trait_corrupt
                }
			}
            success_text = {
				text = pse.102.desc_h
				event_target:selected_leader = {
                    has_trait = leader_trait_paranoid
                }
			}
		}
	}
    picture = GFX_evt_psionics
    show_sound = event_psionic
	trigger = {
        has_country_flag = pse_power_leader_remove_negative_trait_effect_flag
        NOT = { has_country_flag = pse_power_leader_remove_negative_trait_effect_flag_cooldown }
        any_owned_leader = {
			OR = {
				has_trait = leader_trait_ruler_chosen
				has_trait = leader_trait_admiral_chosen
				has_trait = leader_trait_governor_chosen
				has_trait = leader_trait_general_chosen
				has_trait = leader_trait_admiral_chosen
				has_trait = leader_trait_scientist_chosen
				has_trait = leader_trait_ruler_psionic
				has_trait = leader_trait_admiral_psionic
				has_trait = leader_trait_governor_psionic
				has_trait = leader_trait_general_psionic
				has_trait = leader_trait_admiral_psionic
				has_trait = leader_trait_scientist_psionic
			}
            OR = {
                has_trait = leader_trait_stubborn
                has_trait = leader_trait_substance_abuser
                has_trait = leader_trait_arrested_development
                #
                has_trait = leader_trait_nervous
                has_trait = leader_trait_lethargic
                #
                has_trait = leader_trait_armchair_commander
                #
                has_trait = leader_trait_corrupt
                #
                has_trait = leader_trait_paranoid
            }
        }
	}
    
    mean_time_to_happen = {
        days = 720
    }
    
	immediate = {
        set_timed_country_flag = {
            flag = pse_power_leader_remove_negative_trait_effect_flag_cooldown
            days = 360
        }
		random_owned_leader = {
            limit = {
				OR = {
					has_trait = leader_trait_ruler_chosen
					has_trait = leader_trait_admiral_chosen
					has_trait = leader_trait_governor_chosen
					has_trait = leader_trait_general_chosen
					has_trait = leader_trait_admiral_chosen
					has_trait = leader_trait_scientist_chosen
					has_trait = leader_trait_ruler_psionic
					has_trait = leader_trait_admiral_psionic
					has_trait = leader_trait_governor_psionic
					has_trait = leader_trait_general_psionic
					has_trait = leader_trait_admiral_psionic
					has_trait = leader_trait_scientist_psionic
				}
                OR = {
                    has_trait = leader_trait_stubborn
                    has_trait = leader_trait_substance_abuser
                    has_trait = leader_trait_arrested_development
                    has_trait = leader_trait_nervous
                    has_trait = leader_trait_lethargic
                    has_trait = leader_trait_armchair_commander
                    has_trait = leader_trait_corrupt
                    has_trait = leader_trait_paranoid
                }
            }
            save_event_target_as = selected_leader
        }
	}
    option = {
        name = GOOD
    }
    after = {
        event_target:selected_leader = {
            switch = {
                trigger = has_trait
                leader_trait_stubborn = {
                    remove_trait = leader_trait_stubborn
                }
                leader_trait_substance_abuser = {
                    remove_trait = leader_trait_substance_abuser
                }
                leader_trait_arrested_development = {
                    remove_trait = leader_trait_arrested_development
                }
                leader_trait_nervous = {
                    remove_trait = leader_trait_nervous
                }
                leader_trait_lethargic = {
                    remove_trait = leader_trait_lethargic
                }
                leader_trait_armchair_commander = {
                    remove_trait = leader_trait_armchair_commander
                }
                leader_trait_corrupt = {
                    remove_trait = leader_trait_corrupt
                }
                leader_trait_paranoid = {
                    remove_trait = leader_trait_paranoid
                }
            }
        }
    }
}
##CURSE LEFT
country_event = {
	id = pse.103
	title = pse.103.name
	desc = pse.103.desc
	is_triggered_only = yes
	picture = GFX_evt_psionics
    show_sound = event_psionic
	after = {
		if = {
			limit = {
				has_modifier = shroud_neg_happiness
			}
			remove_modifier = shroud_neg_happiness
		}
		if = {
			limit = {
				has_modifier = shroud_neg_ethic
			}
			remove_modifier = shroud_neg_ethic
		}
		if = {
			limit = {
				has_modifier = shroud_neg_armor
			}
			remove_modifier = shroud_neg_armor
		}
		if = {
			limit = {
				has_modifier = shroud_neg_growth
			}
			remove_modifier = shroud_neg_growth
		}
		if = {
			limit = {
				has_modifier = shroud_neg_research
			}
			remove_modifier = shroud_neg_research
		}
		if = {
			limit = {
				has_modifier = shroud_neg_influence
			}
			remove_modifier = shroud_neg_influence
		}
		if = {
			limit = {
				has_modifier = shroud_neg_unity
			}
			remove_modifier = shroud_neg_unity
		}
		if = {
			limit = {
				has_modifier = shroud_neg_speed
			}
			remove_modifier = shroud_neg_speed
		}
		if = {
			limit = {
				has_modifier = shroud_neg_morale
			}
			remove_modifier = shroud_neg_morale
		}
		if = {
			limit = {
				has_modifier = shroud_neg_sensors
			}
			remove_modifier = shroud_neg_sensors
		}
		if = {
			limit = {
				has_modifier = MOD_pse_power_break_unity_modifier_effect
			}
			remove_modifier = MOD_pse_power_break_unity_modifier_effect
		}
		if = {
			limit = {
				has_modifier = MOD_pse_power_break_stability_modifier_effect
			}
			remove_modifier = MOD_pse_power_break_stability_modifier_effect
		}
	}
	option = {
		name = PRAISE
	}
}

country_event = {
	id = pse.104
	title = pse.104.title
	desc = pse.104.desc
	desc = pse.104.desc2
	desc = pse.104.desc3
	is_triggered_only = yes
	picture = GFX_evt_surreal_visions
	show_sound = event_psionic
	immediate = {
		set_variable = {
			which = pse_energy
			value = 0
		}
		set_variable = {
			which = pse_minerals
			value = 0
		}
		set_variable = {
			which = pse_food
			value = 0
		}
		set_variable = {
			which = pse_alloys
			value = 0
		}
		set_variable = {
			which = pse_consumer_goods
			value = 0
		}
		set_variable = {
			which = pse_exotic_gases
			value = 0
		}
		set_variable = {
			which = pse_volatile_motes
			value = 0
		}
		set_variable = {
			which = pse_rare_crystals
			value = 0
		}
		set_variable = {
			which = pse_sr_dark_matter
			value = 0
		}
		set_variable = {
			which = pse_sr_living_metal
			value = 0
		}
		set_variable = {
			which = pse_minor_artifacts
			value = 0
		}
		if = {
			limit = {
				has_monthly_income = {
					resource = energy
					value > 0
				}
			}
			random = {
				chance = 33
				add_monthly_resource_mult = {
					resource = energy
					value = 1
				}
				export_resource_income_to_variable = {
					resource = energy
					variable = pse_energy
				}
				round_variable = pse_energy
			}
		}
		if = {
			limit = {
				has_monthly_income = {
					resource = minerals
					value > 0
				}
			}
			random = {
				chance = 33
				add_monthly_resource_mult = {
					resource = minerals
					value = 1
				}
				export_resource_income_to_variable = {
					resource = minerals
					variable = pse_minerals
				}
				round_variable = pse_minerals
			}
		}
		
		if = {
			limit = {
				has_monthly_income = {
					resource = food
					value > 0
				}
			}
			random = {
				chance = 33
				add_monthly_resource_mult = {
					resource = food
					value = 1
				}
				export_resource_income_to_variable = {
					resource = food
					variable = pse_food
				}
				round_variable = pse_food
			}
		}
		
		if = {
			limit = {
				has_monthly_income = {
					resource = alloys
					value > 0
				}
			}
			random = {
				chance = 33
				add_monthly_resource_mult = {
					resource = alloys
					value = 1
				}
				export_resource_income_to_variable = {
					resource = alloys
					variable = pse_alloys
				}
				round_variable = pse_alloys
			}
		}
		
		if = {
			limit = {
				has_monthly_income = {
					resource = consumer_goods
					value > 0
				}
			}
			random = {
				chance = 33
				add_monthly_resource_mult = {
					resource = consumer_goods
					value = 1
				}
				export_resource_income_to_variable = {
					resource = consumer_goods
					variable = pse_consumer_goods
				}
				round_variable = pse_consumer_goods
			}
		}

		if = {
			limit = {
				has_monthly_income = {
					resource = exotic_gases
					value > 0
				}
			}
			random = {
				chance = 33
				add_monthly_resource_mult = {
					resource = exotic_gases
					value = 1
				}
				export_resource_income_to_variable = {
					resource = exotic_gases
					variable = pse_exotic_gases
				}
				round_variable = pse_exotic_gases
			}
		}

		if = {
			limit = {
				has_monthly_income = {
					resource = volatile_motes
					value > 0
				}
			}
			random = {
				chance = 33
				add_monthly_resource_mult = {
					resource = volatile_motes
					value = 1
				}
				export_resource_income_to_variable = {
					resource = volatile_motes
					variable = pse_volatile_motes
				}
				round_variable = pse_volatile_motes
			}
		}

		if = {
			limit = {
				has_monthly_income = {
					resource = rare_crystals
					value > 0
				}
			}
			random = {
				chance = 33
				add_monthly_resource_mult = {
					resource = rare_crystals
					value = 1
				}
				export_resource_income_to_variable = {
					resource = rare_crystals
					variable = pse_rare_crystals
				}
				round_variable = pse_rare_crystals
			}
		}

		if = {
			limit = {
				has_monthly_income = {
					resource = sr_dark_matter
					value > 0
				}
			}
			random = {
				chance = 33
				add_monthly_resource_mult = {
					resource = sr_dark_matter
					value = 1
				}
				export_resource_income_to_variable = {
					resource = sr_dark_matter
					variable = pse_sr_dark_matter
				}
				round_variable = pse_sr_dark_matter
			}
		}

		if = {
			limit = {
				has_monthly_income = {
					resource = sr_living_metal
					value > 0
				}
			}
			random = {
				chance = 33
				add_monthly_resource_mult = {
					resource = sr_living_metal
					value = 1
				}
				export_resource_income_to_variable = {
					resource = sr_living_metal
					variable = pse_sr_living_metal
				}
				round_variable = pse_sr_living_metal
			}
		}
		
		while = {
			count = 100
			random = {
				chance = 33
				add_resource = {
					energy = 15
				}
				change_variable = {
					which = pse_energy
					value = 15
				}
			}
			random = {
				chance = 33
				add_resource = {
					minerals = 15
				}
				change_variable = {
					which = pse_minerals
					value = 15
				}
			}
			random = {
				chance = 33
				add_resource = {
					food = 15
				}
				change_variable = {
					which = pse_food
					value = 15
				}
			}
			random = {
				chance = 33
				add_resource = {
					alloys = 10
				}
				change_variable = {
					which = pse_alloys
					value = 10
				}
			}
			random = {
				chance = 33
				add_resource = {
					consumer_goods = 10
				}
				change_variable = {
					which = pse_consumer_goods
					value = 10
				}
			}
			random = {
				chance = 33
				add_resource = {
					rare_crystals = 5
				}
				change_variable = {
					which = pse_rare_crystals
					value = 5
				}
			}
			random = {
				chance = 33
				add_resource = {
					volatile_motes = 5
				}
				change_variable = {
					which = pse_volatile_motes
					value = 5
				}
			}
			random = {
				chance = 33
				add_resource = {
					exotic_gases = 5
				}
				change_variable = {
					which = pse_exotic_gases
					value = 5
				}
			}
			random = {
				chance = 33
				add_resource = {
					sr_dark_matter = 5
				}
				change_variable = {
					which = pse_sr_dark_matter
					value = 5
				}
			}
			random = {
				chance = 33
				add_resource = {
					sr_living_metal = 5
				}
				change_variable = {
					which = pse_sr_living_metal
					value = 5
				}
			}
			
			random = {
				chance = 10
				if = {
					limit = {
						has_ancrel = yes
					}
					add_resource = {
						minor_artifacts = 1
					}
					change_variable = {
						which = pse_minor_artifacts
						value = 1
					}
				}	
			}

			random_list = {
				1 = {
					modifier = {
						factor = 2
						has_resource = {
							type = energy
							amount < 5000
						}
					}
					add_resource = {
						energy = 66
					}
					change_variable = {
						which = pse_energy
						value = 66
					}
				}
				1 = {
					modifier = {
						factor = 2
						has_resource = {
							type = minerals
							amount < 5000
						}
					}
					add_resource = {
						minerals = 66
					}
					change_variable = {
						which = pse_minerals
						value = 66
					}
				}
				1 = {
					modifier = {
						factor = 2
						has_resource = {
							type = food
							amount < 5000
						}
					}
					add_resource = {
						food = 66
					}
					change_variable = {
						which = pse_food
						value = 66
					}
				}
				1 = {
					if = {
						limit = {
							has_resource = {
								type = alloys
								amount < 5000
							}
						}
						add_resource = {
							alloys = 12
						}
						change_variable = {
							which = pse_alloys
							value = 12
						}
					}
					add_resource = {
						alloys = 33
					}
					change_variable = {
						which = pse_alloys
						value = 33
					}
					random = {
						chance = 33
						add_resource = {
							alloys = 7
						}
						change_variable = {
							which = pse_alloys
							value = 7
						}
					}
				}
				1 = {
					if = {
						limit = {
							has_resource = {
								type = consumer_goods
								amount < 5000
							}
						}
						add_resource = {
							consumer_goods = 12
						}
						change_variable = {
							which = pse_consumer_goods
							value = 12
						}
					}
					add_resource = {
						consumer_goods = 33
					}
					change_variable = {
						which = pse_consumer_goods
						value = 33
					}
					random = {
						chance = 33
						add_resource = {
							consumer_goods = 7
						}
						change_variable = {
							which = pse_consumer_goods
							value = 7
						}
					}
				}
				1 = {
					if = {
						limit = {
							has_resource = {
								type = exotic_gases
								amount < 5000
							}
						}
						add_resource = {
							exotic_gases = 3
						}
						change_variable = {
							which = pse_exotic_gases
							value = 3
						}
					}
					add_resource = {
						exotic_gases = 8
					}
					change_variable = {
						which = pse_exotic_gases
						value = 8
					}
					random = {
						chance = 33
						add_resource = {
							exotic_gases = 3
						}
						change_variable = {
							which = pse_exotic_gases
							value = 3
						}
					}
				}
				1 = {
					if = {
						limit = {
							has_resource = {
								type = rare_crystals
								amount < 5000
							}
						}
						add_resource = {
							rare_crystals = 3
						}
						change_variable = {
							which = pse_rare_crystals
							value = 3
						}
					}
					add_resource = {
						rare_crystals = 8
					}
					change_variable = {
						which = pse_rare_crystals
						value = 8
					}
					random = {
						chance = 33
						add_resource = {
							rare_crystals = 3
						}
						change_variable = {
							which = pse_rare_crystals
							value = 3
						}
					}
				}
				1 = {
					if = {
						limit = {
							has_resource = {
								type = volatile_motes
								amount < 5000
							}
						}
						add_resource = {
							volatile_motes = 3
						}
						change_variable = {
							which = pse_volatile_motes
							value = 3
						}
					}
					add_resource = {
						volatile_motes = 8
					}
					change_variable = {
						which = pse_volatile_motes
						value = 8
					}
					random = {
						chance = 33
						add_resource = {
							volatile_motes = 3
						}
						change_variable = {
							which = pse_volatile_motes
							value = 3
						}
					}
				}
				1 = {
					if = {
						limit = {
							has_resource = {
								type = sr_dark_matter
								amount < 5000
							}
						}
						add_resource = {
							sr_dark_matter = 3
						}
						change_variable = {
							which = pse_sr_dark_matter
							value = 3
						}
					}
					add_resource = {
						sr_dark_matter = 8
					}
					change_variable = {
						which = pse_sr_dark_matter
						value = 8
					}
					random = {
						chance = 33
						add_resource = {
							sr_dark_matter = 3
						}
						change_variable = {
							which = pse_sr_dark_matter
							value = 3
						}
					}
				}
				1 = {
					if = {
						limit = {
							has_resource = {
								type = sr_living_metal
								amount < 5000
							}
						}
						add_resource = {
							sr_living_metal = 3
						}
						change_variable = {
							which = pse_sr_living_metal
							value = 3
						}
					}
					add_resource = {
						sr_living_metal = 8
					}
					change_variable = {
						which = pse_sr_living_metal
						value = 8
					}
					random = {
						chance = 33
						add_resource = {
							sr_living_metal = 3
						}
						change_variable = {
							which = pse_sr_living_metal
							value = 3
						}
					}
				}
			}
		}
		
	}
	option = {
		name = GOOD
		custom_tooltip = pse.104.tooltip
	}
}
###ADD RANGE EFFECT
country_event = {
	id = pse.105
	is_triggered_only = yes
	hide_window = yes
	immediate = {
		
		every_owned_ship = {
			add_modifier = {
				modifier = MOD_pse_power_combat_range_modifier
				days = 360
			}
			set_timed_ship_flag = {
				flag = pse_power_combat_range
				days = 360
			}
			create_ambient_object = {
				type = pse_range_effect
				scale = 0.5
				location = this
				use_3d_location = yes
				entity_offset = { min = 0 max = 0 }
				entity_offset_angle = { min = 0 max = 0 }
				entity_offset_height = { min = 0 max = 0 }
				entity_scale_to_size = yes
				duration = 15
			}
		}
	}
}
##ADD INVINCIBLE FLAG TO ALL SHIPS
country_event = {
	id = pse.106
	is_triggered_only = yes
	hide_window = yes
	immediate = {
		country_event = {
			id = pse.108
			days = 100
		}
		every_owned_ship = {
			limit = {
				NOR = {
					is_ship_size = space_cloud
					is_ship_class = shipclass_starbase
				}
			}
			set_disable_at_health = 0.33
			set_timed_ship_flag = {
				flag = pse_power_combat_ship
				days = 101
			}
			create_ambient_object = {
				type = pse_ship_effect
				scale = 0.75
				location = this
				use_3d_location = yes
				entity_offset = { min = 0 max = 0 }
				entity_offset_angle = { min = 0 max = 0 }
				entity_offset_height = { min = 0 max = 0 }
				entity_scale_to_size = yes
				duration = 15
			}
		}
	}
}
#SHOW COMEBACK EFFECT
ship_event = {
	id = pse.107
	is_triggered_only = yes
	hide_window = yes
	trigger = {
		has_ship_flag = pse_power_combat_ship
	}
	immediate = {
		repair_ship = yes
		set_disabled = no	
		if = {
			limit = {
				NOT = {
					has_ship_flag = pse_power_combat_ship_visual_effect_cooldown
				}
			}
			set_timed_ship_flag = {
				flag = pse_power_combat_ship_visual_effect_cooldown
				days = 15
			}
			create_ambient_object = {
				type = pse_ship_effect
				scale = 0.75
				location = this
				use_3d_location = yes
				entity_offset = { min = 0 max = 0 }
				entity_offset_angle = { min = 0 max = 0 }
				entity_offset_height = { min = 0 max = 0 }
				entity_scale_to_size = yes
				duration = 15
			}
		}	
	}
}
##REMOVE THE INVICIBLE
country_event = {
	id = pse.108
	is_triggered_only = yes
	hide_window = yes
	immediate = {
		create_message = { 
			type = PSE_EXPIRED
			localization = pse_power_botton_combat_ship_effect_over
			days = 60
			target = root
		}
		every_owned_ship = {
			limit = {
				has_ship_flag = pse_power_combat_ship
			}
			set_disable_at_health = -1
			repair_ship = yes
			create_ambient_object = {
				type = pse_ship_effect
				scale = 0.75
				location = this
				use_3d_location = yes
				entity_offset = { min = 0 max = 0 }
				entity_offset_angle = { min = 0 max = 0 }
				entity_offset_height = { min = 0 max = 0 }
				entity_scale_to_size = yes
				duration = 15
			}
		}
	}
}
##SHOWS RANGE EFFECT UPON DESTROY ONE OF THIER TARGETS
country_event = {
	id = pse.109
	is_triggered_only = yes
	hide_window = yes
	trigger = {
		fromfrom = {
			has_ship_flag = pse_power_combat_range
		}
		
	}
	immediate = {
		fromfrom = {
			create_ambient_object = {
				type = pse_range_effect
				scale = 0.5
				location = this
				use_3d_location = yes
				entity_offset = { min = 0 max = 0 }
				entity_offset_angle = { min = 0 max = 0 }
				entity_offset_height = { min = 0 max = 0 }
				entity_scale_to_size = yes
				duration = 15
			}
		}
		
	}
}

#COMEBACK EFFECT AT ENTERING BATTLE
country_event = {
	id = pse.110
	is_triggered_only = yes
	hide_window = yes
	trigger = {
		fromfrom = {
			any_owned_ship = {
				has_ship_flag = pse_power_combat_ship
			}
		}
		
	}
	immediate = {
		fromfrom = {
			every_owned_ship = {
				limit = {
					has_ship_flag = pse_power_combat_ship
				}
				create_ambient_object = {
					type = pse_ship_effect
					scale = 0.75
					location = this
					use_3d_location = yes
					entity_offset = { min = 0 max = 0 }
					entity_offset_angle = { min = 0 max = 0 }
					entity_offset_height = { min = 0 max = 0 }
					entity_scale_to_size = yes
					duration = 15
				}
			}
		}
	}
}

#RANGE EFFECT AT ENTERING BATTLE
country_event = {
	id = pse.111
	is_triggered_only = yes
	hide_window = yes
	trigger = {
		fromfrom = {
			any_owned_ship = {
				has_ship_flag = pse_power_combat_range
			}
		}
		
	}
	immediate = {
		fromfrom = {
			every_owned_ship = {
				limit = {
					has_ship_flag = pse_power_combat_range
				}
				create_ambient_object = {
					type = pse_range_effect
					scale = 0.5
					location = this
					use_3d_location = yes
					entity_offset = { min = 0 max = 0 }
					entity_offset_angle = { min = 0 max = 0 }
					entity_offset_height = { min = 0 max = 0 }
					entity_scale_to_size = yes
					duration = 15
				}
			}
		}
		
	}
}


# Criminal Branch Office Closes
event = {
	id = pse.112
	hide_window = yes

	is_triggered_only = yes

	trigger = {
		any_playable_country = {
			has_country_flag = pse_power_planet_crime_effect_flag
			NOT = {
				has_country_flag = pse_power_planet_crime_effect_cooldown
			}
			any_owned_planet = {
				has_branch_office = yes
				branch_office_owner = { 
					is_criminal_syndicate = yes
				}
				planet_crime < 1
			}
		}
	}

	immediate = {
		random_list = {
			85 = {}
			15 = {
				modifier = {
					factor = 1.25
					num_assigned_jobs = {
						job = telepath
						value > 2
					}
				}
				modifier = {
					factor = 1.25
					num_assigned_jobs = {
						job = telepath
						value > 5
					}
				}
				modifier = {
					factor = 1.25
					num_assigned_jobs = {
						job = telepath
						value > 8
					}
				}
				modifier = {
					factor = 1.25
					num_assigned_jobs = {
						job = telepath
						value > 11
					}
				}
				random_playable_country = {
					limit = {
						has_country_flag = pse_power_planet_crime_effect_flag
						NOT = {
							has_country_flag = pse_power_planet_crime_effect_cooldown
						}
						any_owned_planet = {
							has_branch_office = yes
							branch_office_owner = { 
								is_criminal_syndicate = yes
							}
							planet_crime < 1
						}
					}
					random_owned_planet = {
						limit = {
							has_branch_office = yes
							branch_office_owner = { 
								is_criminal_syndicate = yes
							}
							planet_crime < 1
						}
						branch_office_owner = { save_event_target_as = office_owner }
						planet_event = { id = pse.113 days = 3 random = 10 }
					}
				}
			}
		}
	}
}

###ANTI PIRATE###
planet_event = {
	id = pse.113
	title = crime.1001.name
	desc = crime.1001.desc
	picture = GFX_evt_dark_alley
	show_sound = event_criminal_activity
	location = root

	is_triggered_only = yes

	trigger = {
		planet_crime < 1
		has_branch_office = yes
		branch_office_owner = { 
			is_criminal_syndicate = yes
		}
	}

	immediate = {
		owner = {
			set_timed_country_flag = {
				flag = pse_power_planet_crime_effect_cooldown
				days = 360
			}
		}
		branch_office_owner = { save_event_target_as = office_owner }
	}

	option = {
		name = crime.1001.a
		close_branch_office = yes
		hidden_effect = {
			set_timed_planet_flag = { flag = criminal_branch_closed_cooldown_planet@event_target:office_owner days = 3600 }
			event_target:office_owner = {
			 	country_event = { id = crime.1002 }
			}
		}
	}
}

###BOOST

# Criminal Underworld Disappears (Low Crime)
planet_event = {
	id = pse.114
	title = crime.41.name
	desc = {
		trigger = {
			owner = {
				NOT = { has_ethic = ethic_gestalt_consciousness }
			}
		}
		text = crime.41.desc
	}
	desc = {
		trigger = { 
			owner = { has_authority = auth_hive_mind }
		}
		text = crime.41.b.desc
	}
	desc = {
		trigger = { 
			owner = { has_authority = auth_machine_intelligence }
		}
		text = crime.41.c.desc
	}
	picture = {
		trigger = { 
			owner = {
				NOT = { has_ethic = ethic_gestalt_consciousness }
			}
		}
		picture = GFX_evt_dark_alley
	}
	picture = {
		trigger = { 
			owner = { has_authority = auth_hive_mind }
		}
		picture = GFX_evt_hive_mind
	}
	picture = {
		trigger = { 
			owner = { has_authority = auth_machine_intelligence }
		}
		picture = GFX_evt_circuitry_modification
	}
	show_sound = event_cityscape
	location = root

	pre_triggers = {
		has_owner = yes
	}

	trigger = {
		
		owner = { 
			has_country_flag = pse_power_planet_crime_effect_flag
		}
		OR = {
			has_modifier = criminal_underworld
			has_modifier = drone_deviancy
			has_modifier = drone_corruption
			has_modifier = gang_wars
			has_modifier = center_of_drug_trade
			has_modifier = mob_rule
		}
		NOT = { has_planet_flag = criminal_underworld_appeared } # Cooldown
		num_pops > 0
		planet_crime <= 10
	}

	mean_time_to_happen = {
		months = 24

		modifier = {
			factor = 0.9
			num_assigned_jobs = {
				job = enforcer
				value > 1
			}
		}
		modifier = {
			factor = 0.9
			num_assigned_jobs = {
				job = enforcer
				value > 2
			}
		}
		modifier = {
			factor = 0.9
			num_assigned_jobs = {
				job = enforcer
				value > 3
			}
		}	
		modifier = {
			factor = 0.9
			num_assigned_jobs = {
				job = enforcer
				value > 4
			}
		}	
		modifier = {
			factor = 0.8
			num_assigned_jobs = {
				job = telepath
				value > 1
			}
		}	
		modifier = {
			factor = 0.8
			num_assigned_jobs = {
				job = telepath
				value > 2
			}
		}	
		modifier = {
			factor = 0.8
			num_assigned_jobs = {
				job = telepath
				value > 3
			}
		}	
		modifier = {
			factor = 0.8
			num_assigned_jobs = {
				job = telepath
				value > 4
			}
		}	
	}
	
	option = {
		name = GOOD
		if = {
			limit = { has_modifier = criminal_underworld }
			remove_modifier = criminal_underworld
		}
		if = {
			limit = { has_modifier = gang_wars }
			remove_modifier = gang_wars
		}
		if = {
			limit = { has_modifier = center_of_drug_trade }
			remove_modifier = center_of_drug_trade
		}
		if = {
			limit = { has_modifier = mob_rule }
			remove_modifier = mob_rule
		}
		if = {
			limit = { has_modifier = bribed_officials }
			remove_modifier = bribed_officials
		}
		if = {
			limit = { has_modifier = substance_abuse }
			remove_modifier = substance_abuse
		}
		if = {
			limit = { has_modifier = smuggler_activity }
			remove_modifier = smuggler_activity
		}
		if = {
			limit = { has_modifier = crime_wave }
			remove_modifier = crime_wave
		}
		if = {
			limit = { has_modifier = cartel_war }
			remove_modifier = cartel_war
		}
		if = {
			limit = { has_modifier = protection_racket }
			remove_modifier = protection_racket
		}
		if = {
			limit = { has_modifier = corrupt_administration }
			remove_modifier = corrupt_administration
		}
		if = {
			limit = { has_modifier = trade_pilfering }
			remove_modifier = trade_pilfering
		}
		if = {
			limit = { has_modifier = drone_deviancy }
			remove_modifier = drone_deviancy
		}
		if = {
			limit = { has_modifier = deviant_interference }
			remove_modifier = deviant_interference
		}
		if = {
			limit = { has_modifier = drone_corruption }
			remove_modifier = drone_corruption
		}
		if = {
			limit = { has_modifier = drone_signal_interference }
			remove_modifier = drone_signal_interference
		}
		hidden_effect = {
			set_timed_planet_flag = { flag = criminal_underworld_disappeared days = 3600 }
		}
	}
}
#COUNTRY ETHIC SHIFT, MONTHLY
country_event = {
	id = pse.115
	is_triggered_only = yes
	hide_window = yes
	trigger = {
		has_country_flag = pse_power_planet_ethic_effect_flag
	}
	immediate = {
		pse_power_ethic_effect = yes
	}
}
#PLANET ETHIC SHIFT, YEARLY
country_event = {
	id = pse.116
	is_triggered_only = yes
	hide_window = yes
	trigger = {
		has_country_flag = pse_power_planet_ethic_effect_flag
	}
	immediate = {
		every_owned_planet = {
			limit = {
				is_under_colonization = no
				is_occupied_flag = no
				num_pops > 0
			}
			if = {
				limit = {
					num_pops > 74
				}
				pse_power_ethic_effect_planet = yes
			}
			if = {
				limit = {
					num_pops > 149
				}
				pse_power_ethic_effect_planet = yes
			}
			pse_power_ethic_effect_planet = yes
		}
	}
}

###Range effect is over
country_event = {
	id = pse.117
	is_triggered_only = yes
	hide_window = yes
	immediate = {
		create_message = { 
			type = PSE_EXPIRED
			localization = pse_power_botton_combat_range_effect_over
			days = 60
			target = root
		}
	}
}
#Unity
country_event = {
	id = pse.118
	is_triggered_only = yes
	hide_window = yes
	immediate = {
		save_event_target_as = pse_country
		every_neighbor_country = {
			limit = {
				has_communications = root
				OR = {
					is_berserker_to = root
					is_belligerent_to = root
					is_angry_to = root
					is_domineering_to = root
					is_unfriendly_to = root
					is_disloyal_to = root
					is_hostile_to = root
					is_hostile = root
					is_rival = root
					is_harming_relations_with = root
					is_at_war_with = root
				}
				NOT = {
					is_same_empire = root
				}
			}
			random_list = {
				1 = {
					modifier = {
						factor = 0
						has_country_flag = pse_access_power
					}
					country_event = {
						id = pse.226
					}
				}
				1 = {
					country_event = {
						id = pse.225
					}
				}
			}
			add_modifier = {
				modifier = MOD_pse_power_break_unity_modifier_effect_pop
				days = 720
			}
			add_modifier = {
				modifier = MOD_pse_power_break_unity_modifier_effect
				days = 1800
			}
		}
	}
}
#Stability
country_event = {
	id = pse.119
	is_triggered_only = yes
	hide_window = yes
	immediate = {
		save_event_target_as = pse_country
		every_neighbor_country = {
			limit = {
				has_communications = root
				OR = {
					is_berserker_to = root
					is_belligerent_to = root
					is_angry_to = root
					is_domineering_to = root
					is_unfriendly_to = root
					is_disloyal_to = root
					is_hostile_to = root
					is_hostile = root
					is_rival = root
					is_harming_relations_with = root
					is_at_war_with = root
				}
				NOT = {
					is_same_empire = root
				}
			}
			random_list = {
				1 = {
					modifier = {
						factor = 0
						has_country_flag = pse_access_power
					}
					country_event = {
						id = pse.221
					}
				}
				1 = {
					country_event = {
						id = pse.220
					}
				}
			}
			add_modifier = {
				modifier = MOD_pse_power_break_stability_modifier_effect
				days = 1800
			}
		}
	}
}

#Building
country_event = {
	id = pse.120
	title = pse.120.title
	desc = pse.120.desc
	picture = GFX_evt_psionics
	show_sound = event_psionic
	is_triggered_only = yes
	hide_window = yes
	after = {
		create_message = { 
			type = PLANET_DESTROYED
			localization = pse_power_botton_break_building_effect_result
			days = 60
			target = root
			variable = {
				type = variable
				varname = pse_power_break_affected_num
				localization = pse_power_break_affected_num
				scope = event_target:pse_country
			}
		}
	}
	immediate = {
		save_event_target_as = pse_country
		set_variable = {
			which = pse_power_break_affected_num
			value = 0
		}
		every_playable_country = {
			limit = {
				is_at_war_with = root
				NOT = {
					is_same_empire = root
				}
			}
			while = {
				limit = {
					any_owned_planet = {
						has_building = yes
						num_pops > 9
						is_occupied_flag = no
						is_under_colonization = no
						NOT = {
							has_planet_flag = pse_power_break_building_planet_flag
						}
					}
				}
				random_owned_planet = {
					limit = {
						has_building = yes
						num_pops > 9
						is_occupied_flag = no
						is_under_colonization = no
						NOT = {
							has_planet_flag = pse_power_break_building_planet_flag
						}
					}
					set_timed_planet_flag = {
						flag = pse_power_break_building_planet_flag
						days = 7
					}
					random_list = {
						67 = {}
						33 = {
							owner = {
								add_opinion_modifier = {
									who = event_target:pse_country
									modifier = opinion_pse_bomb_uprooting_our_planet
								}
								country_event = {
									id = pse.230
								}
							}
							create_ambient_object = {
								type = pse_travel_effect
								scale = 2.0
								location = this
								use_3d_location = yes
								entity_offset = { min = 0 max = 0 }
								entity_offset_angle = { min = 0 max = 0 }
								entity_offset_height = { min = 0 max = 0 }
								entity_scale_to_size = yes
								duration = 15
							}
							event_target:pse_country = {
								change_variable = {
									which = pse_power_break_affected_num
									value = 1
								}
							}
							if = {
								limit = {
									num_pops > 4
									num_pops < 10
								}
								add_modifier = {
									modifier = MOD_pse_power_break_building_modifier_1
									days = 1
								}
								add_planet_devastation = 10
							}
							else_if = {
								limit = {
									num_pops > 9
									num_pops < 15
								}
								add_modifier = {
									modifier = MOD_pse_power_break_building_modifier_2
									days = 1
								}
								add_planet_devastation = 20
							}
							else_if = {
								limit = {
									num_pops > 14
									num_pops < 20
								}
								add_modifier = {
									modifier = MOD_pse_power_break_building_modifier_3
									days = 1
								}
								add_planet_devastation = 30
							}
							else_if = {
								limit = {
									num_pops > 19
									num_pops < 25
								}
								add_modifier = {
									modifier = MOD_pse_power_break_building_modifier_4
									days = 1
								}
								add_planet_devastation = 40
							}
							else_if = {
								limit = {
									num_pops > 24
									num_pops < 30
								}
								add_modifier = {
									modifier = MOD_pse_power_break_building_modifier_5
									days = 1
								}
								add_planet_devastation = 50
							}
							else_if = {
								limit = {
									num_pops > 29
									num_pops < 35
								}
								add_modifier = {
									modifier = MOD_pse_power_break_building_modifier_5
									days = 1
								}
								add_modifier = {
									modifier = MOD_pse_power_break_building_modifier_1
									days = 1
								}
								add_planet_devastation = 55
							}
							else_if = {
								limit = {
									num_pops > 34
									num_pops < 40
								}
								add_modifier = {
									modifier = MOD_pse_power_break_building_modifier_5
									days = 1
								}
								add_modifier = {
									modifier = MOD_pse_power_break_building_modifier_2
									days = 1
								}
								add_planet_devastation = 60
							}
							else_if = {
								limit = {
									num_pops > 39
									num_pops < 45
								}
								add_modifier = {
									modifier = MOD_pse_power_break_building_modifier_5
									days = 1
								}
								add_modifier = {
									modifier = MOD_pse_power_break_building_modifier_3
									days = 1
								}
								add_planet_devastation = 65
							}
							else_if = {
								limit = {
									num_pops > 44
									num_pops < 50
								}
								add_modifier = {
									modifier = MOD_pse_power_break_building_modifier_5
									days = 1
								}
								add_modifier = {
									modifier = MOD_pse_power_break_building_modifier_4
									days = 1
								}
								add_planet_devastation = 70
							}
							else_if = {
								limit = {
									num_pops > 49
								}
								add_modifier = {
									modifier = MOD_pse_power_break_building_modifier_5
									days = 1
								}
								add_modifier = {
									modifier = MOD_pse_power_break_building_modifier_5
									days = 1
								}
								add_planet_devastation = 75
							}
						}
					}
				}
			}
			
		}
		
	}
}

#range destroy target effect
# This = owner of ship 1 (combatant)
# From = owner of ship 2 (destroyed)
# FromFrom = ship 1
# FromFromFrom = ship 2
country_event = {
	id = pse.121
	hide_window = yes
	is_triggered_only = yes
	trigger = {
		fromfrom = {
			has_ship_flag = pse_power_combat_range
		}
	}
	immediate = {
		fromfromfrom = {
			create_ambient_object = {
				type = pse_range_hit_effect
				scale = 1.0
				location = this
				use_3d_location = yes
				entity_offset = { min = 0 max = 0 }
				entity_offset_angle = { min = 90 max = 90 }
				entity_offset_height = { min = 0 max = 0 }
				entity_scale_to_size = yes
				entity_face_object = fromfrom
				duration = 30
			}
		}
	}
}

country_event = {
	id = pse.125
	title = "utopia.3024.name"
	desc = "pse.125.desc"
	picture = GFX_evt_psionics
	show_sound = event_mind_over_matter
#	location = event_target:shroud_spawn_system
	
	is_triggered_only = yes

	immediate = {
		save_event_target_as = pse_country
		set_variable = {
			which = pse_spacefaring_num
			value = 0
		}
		set_timed_global_flag = {
			flag = pse_power_fury_in_effect
			days = 3600
		}
		every_system = {
			limit = {
				exists = owner
			}
			event_target:pse_country = {
				change_variable = {
					which = pse_spacefaring_num
					value = 1
				}
			}
			if = {
				limit = {
					owner = {
						has_communications = root
						OR = {
							has_overlord = root
							has_defensive_pact = root
							has_non_aggression_pact = root
							is_in_federation_with = root
							has_commercial_pact = root
							has_migration_access = root
						}
					}
				}
				set_timed_star_flag = {
					flag = pse_spacefaring_excluded_flag
					days = 2
				}
			}
		}
		if = {
			limit = { NOT = { exists = event_target:shroud_country } }
			create_country = {
				name = "NAME_Creatures_of_the_Shroud"
				type = shroud_spirits
				flag = {
					icon = {
						category = "special"
						file = "the_shroud.dds"
					}
					background= {
						category = "backgrounds"
						file = "00_solid.dds"
					}
					colors={
						"dark_purple"
						"black"
						"null"
						"null"
					}
				}
			}
			last_created_country = {
				establish_communications_no_message = root
				save_global_event_target_as = shroud_country
			}
		}
		while = {
			limit = {
				check_variable = {
					which = pse_spacefaring_num
					value > 0
				}
			}
			change_variable = {
				which = pse_spacefaring_num
				value = -5
			}
			random_system = {
				limit = {
					NOR = {
						is_owned_by = root
						has_star_flag = pse_spacefaring_excluded_flag
					}
				}
				random_system_planet = { save_event_target_as = shroud_spawn_planet }
				if = {
					limit = {
						exists = owner
						owner = {
							NOT = {
								has_country_flag = pse.129.happened
							}
							NOT = {
								is_same_empire = root
							}
						}
					}
					save_event_target_as = shroud_spawn_system
					owner = {
						country_event = { id = pse.129 days = 1 }
					}
				}
			}
			random_list = {
				1 = { #1
					create_fleet = {
						name = "NAME_Corrupted_Avatar"
						settings = {
							spawn_debris = no
							is_boss = yes
						}			
						effect = {
							set_owner = event_target:shroud_country
							create_ship = {
								name = "NAME_Corrupted_Avatar"
								design = "NAME_Corrupted_Avatar"
							}
							set_location = event_target:shroud_spawn_planet
							set_fleet_stance = aggressive
							set_aggro_range_measure_from = return_point
							set_aggro_range = 300
						}
					}
				}
			}
			last_created_fleet = { # Despawn if enough time passes without being destroyed
				fleet_event = { id = pse.126 days = 3600 }
				
			}
		}
	}
	
	option = {
		name = "OK"
	}
}

# Shroud Avatar Banished (HIDDEN)
fleet_event = {
	id = pse.126
	hide_window = yes
	
	is_triggered_only = yes
	
	immediate = {
		from = {
			if = {
				limit = {
					NOT = {
						has_country_flag = pse_power_galaxy_spacefaring_country_effect_over_notify_flag
					}
				}
				set_country_flag = pse_power_galaxy_spacefaring_country_effect_over_notify_flag
				country_event = { id = pse.127 }
			}
		}
		solar_system = {
			if = {
				limit = {
					exists = owner
					owner = {
						NOT = {
							is_same_empire = from
						}
						NOT = {
							has_country_flag = pse_power_galaxy_spacefaring_country_effect_over_notify_flag
						}
					}
				}
				owner = {
					set_country_flag = pse_power_galaxy_spacefaring_country_effect_over_notify_flag
					country_event = {
						id = pse.128
					}
				}
			}
		}
		destroy_fleet = this
	}
}
###Summor inform
country_event = {
	id = pse.127
	title = utopia.3026.name
	desc = pse.127.desc
	picture = GFX_evt_psionics
	show_sound = event_psionic
	is_triggered_only = yes
	trigger = {
		has_country_flag = pse_power_galaxy_spacefaring_country_effect_over_notify_flag
	}
	after = {
		hidden_effect = {
			remove_country_flag = pse_power_galaxy_spacefaring_country_effect_over_notify_flag
		}
	}
	option = {
		name = OK
	}
}
###Victor inform
country_event = {
	id = pse.128
	title = utopia.3026.name
	desc = pse.128.desc
	picture = GFX_evt_psionics
	show_sound = event_psionic
	is_triggered_only = yes
	trigger = {
		has_country_flag = pse_power_galaxy_spacefaring_country_effect_over_notify_flag
	}
	after = {
		hidden_effect = {
			remove_country_flag = pse_power_galaxy_spacefaring_country_effect_over_notify_flag
		}
	}
	option = {
		name = utopia.3026.a
	}
}
##INFORM BAD LUCK SPACE OWNER
country_event = {
	id = pse.129
	title = pse.129.title
	desc = {
		text = pse.129.desc
		trigger = {
			NOT = {
				has_country_flag = breached_shroud
			}
		}
		
	}
	desc = {
		text = utopia.3024.desc
		trigger = {
			has_country_flag = breached_shroud
		}
		
	}
	is_triggered_only = yes
	picture = GFX_evt_psionics
	show_sound = event_psionic
	location = event_target:shroud_spawn_system
	trigger = {
		NOT = {
			has_country_flag = pse.129.happened
		}
	}
	immediate = {
		set_timed_country_flag = {
			flag = pse.129.happened
			days = 30
		}
	}
	option = {
		name = utopia.3024.a
	}
}

country_event = {
	id = pse.130
	is_triggered_only = yes
	hide_window = yes
	immediate = {
		random_list = {
			1 = {
				set_timed_global_flag = {
					flag = shroud_neg_happiness
					days = 2
				}
			}
			1 = {
				set_timed_global_flag = {
					flag = shroud_neg_ethic
					days = 2
				}
			}
			1 = {
				set_timed_global_flag = {
					flag = shroud_neg_armor
					days = 2
				}
			}
			1 = {
				set_timed_global_flag = {
					flag = shroud_neg_growth
					days = 2
				}
			}
			1 = {
				set_timed_global_flag = {
					flag = shroud_neg_research
					days = 2
				}
			}
			1 = {
				set_timed_global_flag = {
					flag = shroud_neg_influence
					days = 2
				}
			}
			1 = {
				set_timed_global_flag = {
					flag = shroud_neg_unity
					days = 2
				}
			}
			1 = {
				set_timed_global_flag = {
					flag = shroud_neg_speed
					days = 2
				}
			}
			1 = {
				set_timed_global_flag = {
					flag = shroud_neg_morale
					days = 2
				}
			}
			1 = {
				set_timed_global_flag = {
					flag = shroud_neg_sensors
					days = 2
				}
			}
		}
		every_playable_country = {
			limit = {
				NOT = {
					is_same_empire = from
				}
			}
			switch = {
				trigger = has_global_flag
				shroud_neg_happiness = {
					add_modifier = {
						modifier = shroud_neg_happiness
						days = 1800
					}
				}
				shroud_neg_ethic = {
					add_modifier = {
						modifier = shroud_neg_ethic
						days = 1800
					}
				}
				shroud_neg_armor = {
					add_modifier = {
						modifier = shroud_neg_armor
						days = 1800
					}
				}
				shroud_neg_growth = {
					add_modifier = {
						modifier = shroud_neg_growth
						days = 1800
					}
				}
				shroud_neg_research = {
					add_modifier = {
						modifier = shroud_neg_research
						days = 1800
					}
				}
				shroud_neg_influence = {
					add_modifier = {
						modifier = shroud_neg_influence
						days = 1800
					}
				}
				shroud_neg_unity = {
					add_modifier = {
						modifier = shroud_neg_unity
						days = 1800
					}
				}
				shroud_neg_speed = {
					add_modifier = {
						modifier = shroud_neg_speed
						days = 1800
					}
				}
				shroud_neg_morale = {
					add_modifier = {
						modifier = shroud_neg_morale
						days = 1800
					}
				}
				shroud_neg_sensors = {
					add_modifier = {
						modifier = shroud_neg_sensors
						days = 1800
					}
				}
			}
			country_event = {
				id = pse.131
			}
		}
	}
}

country_event = {
	id = pse.131
	title = pse.131.title
	desc = {
		trigger = {
			hidden:root = {
				success_text = {
					text = pse.131.desc.a
					has_global_flag = shroud_neg_happiness
					NOT = {
						has_ethic = ethic_gestalt_consciousness
					}
				}
				success_text = {
					text = pse.131.desc.b
					has_global_flag = shroud_neg_ethic
					NOT = {
						has_ethic = ethic_gestalt_consciousness
					}
				}
				success_text = {
					text = pse.131.desc.c
					has_global_flag = shroud_neg_armor
				}
				success_text = {
					text = pse.131.desc.d
					has_global_flag = shroud_neg_growth
					NOT = {
						has_authority = auth_machine_intelligence
					}
				}
				success_text = {
					text = pse.131.desc.e
					has_global_flag = shroud_neg_research
				}
				success_text = {
					text = pse.131.desc.f
					has_global_flag = shroud_neg_influence
				}
				success_text = {
					text = pse.131.desc.g
					has_global_flag = shroud_neg_unity
				}
				success_text = {
					text = pse.131.desc.h
					has_global_flag = shroud_neg_speed
				}
				success_text = {
					text = pse.131.desc.i
					has_global_flag = shroud_neg_morale
					NOT = {
						has_authority = auth_machine_intelligence
					}
				}
				success_text = {
					text = pse.131.desc.j
					has_global_flag = shroud_neg_sensors
				}
				success_text = {
					text = pse.131.desc.geth
					has_authority = auth_machine_intelligence
					OR = {
						has_global_flag = shroud_neg_growth
						has_global_flag = shroud_neg_morale
					}
				}
				success_text = {
					text = pse.131.desc.geth
					has_ethic = ethic_gestalt_consciousness
					OR = {
						has_global_flag = shroud_neg_happiness
						has_global_flag = shroud_neg_ethic
					}
				}
			}
		}
	}
	is_triggered_only = yes
	picture = GFX_evt_psionics
	show_sound = event_psionic
	force_open = yes
	after = {
		switch = {
			trigger = has_modifier
			shroud_neg_happiness = {
				tooltip = {
					add_modifier = {
						modifier = shroud_neg_happiness
						days = 1800
					}
				}
			}
			shroud_neg_ethic = {
				tooltip = {
					add_modifier = {
						modifier = shroud_neg_ethic
						days = 1800
					}
				}
			}
			shroud_neg_armor = {
				tooltip = {
					add_modifier = {
						modifier = shroud_neg_armor
						days = 1800
					}
				}
				
			}
			shroud_neg_growth = {
				tooltip = {
					add_modifier = {
						modifier = shroud_neg_growth
						days = 1800
					}
				}
				
			}
			shroud_neg_research = {
				tooltip = {
					add_modifier = {
						modifier = shroud_neg_research
						days = 1800
					}
				}
				
			}
			shroud_neg_influence = {
				tooltip = {
					add_modifier = {
						modifier = shroud_neg_influence
						days = 1800
					}
				}
				
			}
			shroud_neg_unity = {
				tooltip = {
					add_modifier = {
						modifier = shroud_neg_unity
						days = 1800
					}
				}
				
			}
			shroud_neg_speed = {
				tooltip = {
					add_modifier = {
						modifier = shroud_neg_speed
						days = 1800
					}
				}
				
			}
			shroud_neg_morale = {
				tooltip = {
					add_modifier = {
						modifier = shroud_neg_morale
						days = 1800
					}
				}
				
			}
			shroud_neg_sensors = {
				tooltip = {
					add_modifier = {
						modifier = shroud_neg_sensors
						days = 1800
					}
				}
				
			}
		}
	}
	option = {
		name = UNFORTUNATE
		ai_chance = {
			factor = 1
		}
		trigger = {
			OR = {
				AND = {
					NOT = {
						has_ethic = ethic_gestalt_consciousness
					}
					NOR = {
						has_global_flag = shroud_neg_happiness
						has_global_flag = shroud_neg_ethic
					}
				}
				AND = {
					NOT = {
						has_authority = auth_machine_intelligence
					}
					OR = {
						has_global_flag = shroud_neg_growth
						has_global_flag = shroud_neg_morale
					}
				}
			}
		}
	}
	option = {
		name = pse.131.a
		ai_chance = {
			factor = 1
		}
		trigger = {
			OR = {
				AND = {
					has_ethic = ethic_gestalt_consciousness
					OR = {
						has_global_flag = shroud_neg_happiness
						has_global_flag = shroud_neg_ethic
					}
				}
				AND = {
					has_authority = auth_machine_intelligence
					OR = {
						has_global_flag = shroud_neg_growth
						has_global_flag = shroud_neg_morale
					}
				}
			}
		}
	}
}

###WORSHIP EFFECT
country_event = {
	id = pse.135
	is_triggered_only = yes
	hide_window = yes
	after = {
	}
	immediate = {
		set_variable = {
			which = pse_pop_worship
			value = 0
		}
		save_event_target_as = pse_worship_country
		every_neighbor_country = {
			limit = {
				has_communications = root
				OR = {
					is_berserker_to = root
					is_belligerent_to = root
					is_angry_to = root
					is_domineering_to = root
					is_unfriendly_to = root
					is_disloyal_to = root
					is_hostile_to = root
					is_hostile = root
					is_rival = root
					is_harming_relations_with = root
					is_at_war_with = root
				}
				NOT = {
					is_same_empire = root
				}
				NOT = {
					has_ethic = ethic_gestalt_consciousness
				}
			}
			every_owned_pop = {
				random_list = {
					4 = {}
					1 = {
						if = {
							limit = {
								pop_has_happiness = yes
							}
							add_modifier = {
								modifier = MOD_pse_power_worship_pop_modifier_happiness
								days = 1800
							}
						}	
					}
				}
				random_list = {
					5 = {
					}
					5 = {
						add_modifier = {
							modifier = MOD_pse_power_worship_pop_modifier_ethic
							days = 1800
						}
					}
					10 = {
						pse_power_worship_effect = yes
						event_target:pse_worship_country = {
							change_variable = {
								which = pse_pop_worship
								value = 1
							}
						}
						owner = {
							add_opinion_modifier = {
								who = event_target:pse_worship_country
								modifier = opinion_pse_brainwash_us
							}
						}
					}
				}
			}
		}
		create_message = {
			type = PSE_WORSHIPPED
			localization = pse.135.casted
			days = 60
			target = event_target:pse_worship_country
			variable = {
				type = variable
				varname = pse_pop_worship
				localization = pse_pop_worship
				scope = event_target:pse_worship_country
			}
		}
	}
}

###ADD SPEED EFFECT
country_event = {
	id = pse.140
	is_triggered_only = yes
	hide_window = yes
	trigger = {
		has_modifier = MOD_pse_power_chosen_speed_modifier_fake
	}
	immediate = {
		every_owned_ship = {
			limit = {
				is_in_combat = no
			}
			add_modifier = {
				modifier = MOD_pse_power_chosen_speed_modifier
				days = 30
			}
			create_ambient_object = {
				type = pse_travel_effect
				scale = 1
				location = this
				use_3d_location = yes
				entity_offset = { min = 0 max = 0 }
				entity_offset_angle = { min = 0 max = 0 }
				entity_offset_height = { min = 0 max = 0 }
				entity_scale_to_size = yes
				duration = 15
			}
		}
	}
}

###REMOVE SPEED EFFECT IN COMBAT
country_event = {
	id = pse.141
	is_triggered_only = yes
	hide_window = yes
	trigger = {
		OR = {
			has_modifier = MOD_pse_power_chosen_speed_modifier_fake
			from = {
				has_modifier = MOD_pse_power_chosen_speed_modifier_fake
			}
		}
	}
	immediate = {
		fromfrom = {
			remove_modifier = MOD_pse_power_chosen_speed_modifier
		}
		fromfromfrom = {
			remove_modifier = MOD_pse_power_chosen_speed_modifier
		}
	}
}

###speed effect is over
country_event = {
	id = pse.142
	is_triggered_only = yes
	hide_window = yes
	immediate = {
		create_message = { 
			type = PSE_EXPIRED
			localization = pse_power_botton_chosen_speed_effect_over
			days = 60
			target = root
		}
	}
}
##ROAMING SHROUD
country_event = {
	id = pse.145
	title = pse.145.title
	desc = pse.145.desc1
	desc = pse.145.desc2
	desc = pse.145.desc3
	desc = pse.145.desc4
	desc = pse.145.desc5
	desc = pse.145.desc6
	desc = pse.145.desc7
	desc = pse.145.desc8
	desc = pse.145.desc9
	desc = pse.145.desc10
	desc = pse.145.desc11
	desc = pse.145.desc12
	desc = pse.145.desc13
	desc = pse.145.desc14
	desc = pse.145.desc15
	desc = pse.145.desc16
	desc = pse.145.desc17
	desc = pse.145.desc18
	desc = pse.145.desc19
	desc = pse.145.desc20
	desc = pse.145.desc21
	desc = pse.145.desc22
	desc = pse.145.desc23
	desc = pse.145.desc24
	is_triggered_only = yes
	diplomatic_title = BLANK_STRING
	diplomatic = yes
	force_open = yes
	
	picture_event_data = {
		portrait = shroud1
		room = shroud_room
	}

	immediate = {
		set_country_flag = shroud_diplomacy_engaged
	}

	after = {
		hidden_effect = {
			remove_country_flag = shroud_diplomacy_engaged
		}
	}

	option = {
		name = pse.145.0
		custom_tooltip = pse.145.0.tooltip
		hidden_effect = {
			random_list = {
				10 = { 
					if = {
						limit = { NOT = { has_country_flag = shroud_vision_1 } }
						country_event = { id = utopia.3100 }
					}
					else = { country_event = { id = utopia.3200 } }
				}
				10 = {
					if = {
						limit = { NOT = { has_country_flag = shroud_vision_3 } }
						country_event = { id = utopia.3120 }
					}
					else = { country_event = { id = utopia.3200 } }
				}
				10 = {
					if = {
						limit = { NOT = { has_country_flag = shroud_vision_4 } }
						country_event = { id = utopia.3130 }
					}
					else = { country_event = { id = utopia.3200 } }
				}
				10 = {
					if = {
						limit = { NOT = { has_country_flag = shroud_vision_5 } }
						country_event = { id = utopia.3140 }
					}
					else = { country_event = { id = utopia.3200 } }
				}		
				10 = { country_event = { id = utopia.3200 } }
			}			
		}
		default_hide_option = yes
	}
	option = {
		name = pse.145.1
		custom_tooltip = pse.145.1.tooltip
		trigger = {
			any_country = {
				is_country_type = fallen_empire
				NOT = { has_ethic = ethic_gestalt_consciousness }
				has_communications = root
				NOT = { is_at_war_with = root }
			}
			NOT = {
				has_country_flag = pse_fallen_empire_cooldown
			}
		}
		hidden_effect = {
			country_event = { id = pse.146 }
		}
	}

	option = {
		name = pse.145.a
		custom_tooltip = pse.145.a.tooltip
		trigger = {
			NOR = {
				has_technology = tech_psi_jump_drive_1
				has_tech_option = tech_psi_jump_drive_1
			}
		}
		hidden_effect = {
			country_event = { id = utopia.3160 }			
		}
	}
	option = {
		name = pse.145.b
		custom_tooltip = pse.145.b.tooltip
		trigger = {
			NOR = {
				has_technology = tech_psionic_shield
				has_tech_option = tech_psionic_shield
			}
		}
		hidden_effect = {
			country_event = { id = utopia.3170 }			
		}
	}
	option = {
		name = pse.145.c
		custom_tooltip = pse.145.c.tooltip
		trigger = {
			NOR = {
				has_technology = tech_precognition_interface
				has_tech_option = tech_precognition_interface
			}
		}
		hidden_effect = {
			country_event = { id = utopia.3180 }			
		}
	}
	option = {
		name = pse.145.d
		custom_tooltip = pse.145.d.tooltip
		trigger = {
			NOT = { 
				has_country_flag = has_shroud_patron
			} 
		}
		hidden_effect = {
			country_event = { id = utopia.3304 }			
		}
	}
	option = {
		name = pse.145.e
		custom_tooltip = pse.145.e.tooltip
		trigger = {
			NOT = { 
				has_country_flag = has_shroud_patron
			} 
		}
		hidden_effect = {
			country_event = { id = utopia.3305 }			
		}
	}
	option = {
		name = pse.145.f
		custom_tooltip = pse.145.f.tooltip
		trigger = {
			NOT = { 
				has_country_flag = has_shroud_patron
			} 
		}
		hidden_effect = {
			country_event = { id = utopia.3306 }			
		}
	}
	option = {
		name = pse.145.g
		custom_tooltip = pse.145.g.tooltip
		trigger = {
			NOT = { 
				has_country_flag = has_shroud_patron
			} 
		}
		hidden_effect = {
			country_event = { id = utopia.3307 }			
		}
	}
	option = {
		name = pse.145.h
		custom_tooltip = pse.145.h.tooltip
		trigger = {
			NOT = { 
				has_country_flag = has_shroud_patron
			} 
		}
		hidden_effect = {
			country_event = { id = utopia.3308 }			
		}
	}
	option = {
		name = pse.145.nope
		trigger = {
			NOT = {
				has_country_flag = pse_chosen_trolled
			}
		}
		hidden_effect = {
			random_list = {
				0 = {
					modifier = {
						add = 1
						check_variable = {
							which = pse_trolled_chosen
							value > 0
						}
					}
					set_timed_country_flag = {
						flag = pse_power_chosen_shroud_nevermind
						days = 3600
					}
					country_event = {
						id = pse.147
					}
				}
				1 = {
					modifier = {
						factor = 0
						check_variable = {
							which = pse_trolled_chosen
							value = 2
						}
					}
					change_variable = {
						which = pse_trolled_chosen
						value = 1
					}
				}	
			}
		}
	}
}

country_event = {
	id = pse.146
	title = "utopia.3000.name"
	desc = {
		trigger = {
			text = "utopia.3150.desc"
			text = "newline"
			success_text = {
				text = utopia.3151.v1.desc
				has_country_flag = pse_random_1
			}
			success_text = {
				text = utopia.3151.v2.desc
				has_country_flag = pse_random_2
			}
			success_text = {
				text = utopia.3151.v3.desc
				has_country_flag = pse_random_3
			}
		}
	} 
	diplomatic = yes
	diplomatic_title = BLANK_STRING
	force_open = yes
	
	picture_event_data = {
		portrait = shroud1
		room = shroud_room
	}
	
	is_triggered_only = yes

	immediate = {
		set_timed_country_flag = {
			flag = pse_fallen_empire_cooldown
			days = 3600
		}
		random_list = {
			1 = { set_country_flag = pse_random_1 }
			1 = { set_country_flag = pse_random_2 }
			1 = { set_country_flag = pse_random_3 }
		}
		set_country_flag = shroud_diplomacy_engaged
		random_country = {
			limit = {
				is_country_type = fallen_empire
				NOT = { has_ethic = ethic_gestalt_consciousness }
				NOT = { is_at_war_with = root }
				has_communications = root
			}
			save_event_target_as = fallen_empire
		}
	}

	after = {
		hidden_effect = {
			remove_country_flag = shroud_diplomacy_engaged
			remove_country_flag = pse_random_1
			remove_country_flag = pse_random_2
			remove_country_flag = pse_random_3
		}
	}

	option = {
		name = "exit.shroud"
		give_fe_tech = yes
		default_hide_option = yes
	}

}
###CHOSEN ONE IS NOT AMUSED
country_event = {
	id = pse.147
	title = pse.147.title
	desc = pse.147.desc
	picture = GFX_evt_psionics
	show_sound = event_psionic
	is_triggered_only = yes
	immediate = {
		set_country_flag = pse_chosen_trolled
	}
	option = {
		name = pse.147.a
		trigger = {
			leader = {
				has_trait = leader_trait_ruler_chosen
			}
		}
		custom_tooltip = pse.147.tooltip
	}
}

###BACKSTABBING
country_event = {
	id = pse.150
	is_triggered_only = yes
	hide_window = yes



	immediate = {
		save_event_target_as = pse_country
		every_playable_country = {
			limit = {
				is_neighbor_of = root
				has_communications = root
				OR = {
					is_berserker_to = root
					is_belligerent_to = root
					is_angry_to = root
					is_domineering_to = root
					is_unfriendly_to = root
					is_disloyal_to = root
					is_hostile_to = root
					is_hostile = root
					is_rival = root
					is_harming_relations_with = root
					is_at_war_with = root
				}
				NOT = {
					is_same_empire = root
				}
			}

			every_owned_planet = {
				random_list = {
					1 = {}
					1 = {
						if = {
							limit = {
								any_owned_pop = {
									is_enslaved = yes
								}
							}
							planet_event = {
								id = pse.152
								days = 15
								random = 1800
							}
						}
						else = {
							planet_event = {
								id = pse.151
								days = 15
								random = 1800
							}
						}
					}
				}
				
			}
		}
		
	}
}

##STOLEN FROM unrest.4200
######## SECESSION/NATIONALIST REVOLT ##########

# check if original_owner matches any pop on planet, if so defect to them, otherwise form independent nation

# on battle won check previous_owner and original_owner to determine if they should desire return or independence

planet_event = {
	id = pse.151
	title = unrest.4200.name
	desc = {
		trigger = {
			has_planet_flag = nationalist_revolt
			owner = { NOT = { has_ethic = ethic_gestalt_consciousness } }
		}
		text = unrest.4200.desc.returner
	}
	desc = {
		trigger = {
			has_planet_flag = secessionist_revolt
			owner = { NOT = { has_ethic = ethic_gestalt_consciousness } }
		}
		text = unrest.4200.desc.secession
	}
	desc = {
		trigger = {
			has_planet_flag = nationalist_revolt
			owner = { has_ethic = ethic_gestalt_consciousness }
		}
		text = unrest.4200.desc.returner.gesta
	}
	desc = {
		trigger = {
			has_planet_flag = secessionist_revolt
			owner = { has_ethic = ethic_gestalt_consciousness }
		}
		text = unrest.4200.desc.secession.gesta
	}
	picture = GFX_evt_surrender
	show_sound = event_ground_battle
	location = root
	is_triggered_only = yes

	pre_triggers = {
		has_ground_combat = no
	}

	trigger = {
		OR = {
			planet_stability < 25
			planet_crime > 74
			happiness_planet < 25
		}
		NOR = {
			has_planet_flag = slave_stirring
			has_planet_flag = slave_resistance
			has_planet_flag = slave_riots
			has_planet_flag = slave_revolt
		}
		has_orbital_bombardment = no
		any_owned_species = {
			species_has_happiness_with_owner = root.owner
		}
	}

	immediate = {
		create_ambient_object = {
			type = pse_travel_effect
			scale = 2.0
			location = this
			use_3d_location = yes
			entity_offset = { min = 0 max = 0 }
			entity_offset_angle = { min = 0 max = 0 }
			entity_offset_height = { min = 0 max = 0 }
			entity_scale_to_size = yes
			duration = 15
		}
		owner = {
			random_list = {
				1 = {}
				1 = {
					add_opinion_modifier = {
						who = event_target:pse_country
						modifier = opinion_pse_stirring_us
					}
				}
			}
		}
		
		set_planet_flag = revolt_in_progress
		set_variable = {
			which = unrest_50
			value = 0
		}
		set_variable = {
			which = rebel_armies_var
			value = 0
		}
		every_owned_pop = {
			planet = {
				change_variable = {
					which = rebel_armies_var
					value = 1
				}
			}
		}
		multiply_variable = {
			which = rebel_armies_var
			value = 0.67
		}
		if = {
			limit = { # has original owner
				original_owner = no
				any_country = {
					NOT = { is_same_value = root.owner }
					is_subject = no
					NOT = { has_ethic = ethic_gestalt_consciousness }
					root = {
						is_original_owner = prev
						any_owned_pop = {
							is_same_species = prevprev
						}
					}
				}
			}
			random_country = {
				limit = {
					NOT = { is_same_value = root.owner }
					is_subject = no
					NOT = { has_ethic = ethic_gestalt_consciousness }
					root = {
						is_original_owner = prev
						any_owned_pop = {
							is_same_species = prevprev
						}
					}
				}
				save_event_target_as = fatherland
			}
			random_owned_pop = {
				limit = { is_same_species = event_target:fatherland }
				save_event_target_as = nationalist_pop
			}
			create_rebels = {
				name = random
				ethos = event_target:fatherland
				authority = event_target:fatherland
				#civics = event_target:fatherland
				civics = random
				origin = "origin_separatists"
				species = event_target:fatherland
				flag = random
				effect = {
					if = {
						limit = {
							has_trait = trait_necrophage
						}
						set_origin = origin_necrophage
					}
					set_country_flag = standard_unrest_rebels
					save_event_target_as = nationalist_rebels
					establish_communications_no_message = root.owner
					establish_communications_no_message = event_target:fatherland
					root = {
						owner = {
							every_relation = {
								establish_communications_no_message = prevprevprev
							}
						}
					}
				}
			}
			while = {
				limit = {
					check_variable = {
						which = rebel_armies_var
						value > 0
					}
				}
				create_army = {
					owner = event_target:nationalist_rebels
					species = event_target:fatherland
					type = "assault_army"
				}
				change_variable = {
					which = rebel_armies_var
					value = -1
				}
			}
			set_planet_flag = nationalist_revolt
			set_timed_planet_flag = {
				flag = recent_unrest_event
				days = 720
			}
		}
		else = { # no original owner
			random_owned_pop = {
				limit = {
					is_sapient = yes
					pop_has_happiness = yes
				}
				save_event_target_as = rebel_pop
			}
			if = {
				limit = {
					NOT = { exists = event_target:rebel_pop }
				}
				random_owned_pop = {
					limit = {
						is_sapient = yes
					}
					save_event_target_as = rebel_pop
				}
			}
			if = {
				limit = {
					NOT = { exists = event_target:rebel_pop }
				}
				random_owned_pop = {
					save_event_target_as = rebel_pop
				}
			}
			create_rebels = {
				species = event_target:rebel_pop.species
				ethos = random
				authority = random
				origin = "origin_separatists"
				name = random
				flag = random
				effect = {
					if = {
						limit = {
							has_trait = trait_necrophage
						}
						set_origin = origin_necrophage
					}
					set_country_flag = standard_unrest_rebels
					save_event_target_as = secessionist_rebels
					establish_communications_no_message = root.owner
					root = {
						owner = {
							every_relation = {
								establish_communications_no_message = prevprevprev
							}
						}
					}
				}
			}
			while = {
				limit = {
					check_variable = {
						which = rebel_armies_var
						value > 0
					}
				}
				create_army = {
					owner = event_target:secessionist_rebels
					species = event_target:secessionist_rebels
					type = "assault_army"
				}
				change_variable = {
					which = rebel_armies_var
					value = -1
				}
			}
			set_planet_flag = secessionist_revolt
			set_timed_planet_flag = {
				flag = recent_unrest_event
				days = 720
			}
		}
		set_variable = {
			which = rebel_armies_var
			value = 0
		}
	}

	option = {
		name = UNFORTUNATE
	}
}

###STOLEN FROM unrest.160
# Revolt
planet_event = {
	id = pse.152
	title = unrest.160.name
	desc = unrest.160.desc
	picture = GFX_evt_surrender
	show_sound = event_planetary_riot
	location = root

	pre_triggers = {
		has_owner = yes
	}
	
	trigger = {
		OR = {
			planet_stability < 25
			planet_crime > 74
			happiness_planet < 25
		}
		owner = { is_country_type = default }
 		any_owned_pop = {
			is_enslaved = yes
		}
		NOR = { 
			has_planet_flag = slave_revolt
			has_planet_flag = recent_unrest_event
		}
	}

	is_triggered_only = yes

	immediate = {
		create_ambient_object = {
			type = pse_travel_effect
			scale = 2.0
			location = this
			use_3d_location = yes
			entity_offset = { min = 0 max = 0 }
			entity_offset_angle = { min = 0 max = 0 }
			entity_offset_height = { min = 0 max = 0 }
			entity_scale_to_size = yes
			duration = 15
		}
		owner = {
			random_list = {
				1 = {}
				1 = {
					add_opinion_modifier = {
						who = event_target:pse_country
						modifier = opinion_pse_stirring_us
					}
				}
			}
		}
		random_owned_pop = {
			limit = {
				is_enslaved = yes
			}
			save_event_target_as = leader_pop
		}
		create_rebels = {
			name = random
			ethos = {
				ethic = "ethic_fanatic_egalitarian"
				ethic = "ethic_militarist"
			}
			authority = auth_democratic
			civics = random
			origin = "origin_separatists"
			species = event_target:leader_pop.species
			flag = random

			effect = {
				set_country_flag = slave_rebels
				save_event_target_as = rebelling_slaves
				establish_communications_no_message = root.owner
				set_relation_flag = {
					flag = rebelling_slaves_former_owner
					who = root.owner
				}
				root = {
					owner = {
						every_relation = {
							limit = { has_communications = prev }
							establish_communications_no_message = prevprevprev
						}
					}
					every_planet_army = {
						limit = { army_type = slave_army }
						set_owner = event_target:rebelling_slaves
					}
					every_owned_pop = {
						limit = {
							is_enslaved = yes
						}
						planet = {
							while = {
								count = 2
								create_army = {
									name = "NAME_Freedom_Fighters"
									owner = event_target:rebelling_slaves
									species = event_target:leader_pop.species
									type = "rebel_slave_defense_army"
								}
							}
						}
					}
				}
				create_leader = {
					class = ruler
					species = owner_main_species
					name = random
					skill = 2
					traits = {}
				}
				assign_leader = last_created_leader
				ruler = {
					add_random_leader_trait = yes
				}
			}
		}

		set_planet_flag = slave_revolt
		set_timed_planet_flag = {
			flag = recent_unrest_event
			days = 720
		}
	}
	
	option = {
		name = unrest.160.a
		custom_tooltip = unrest.160.a.tooltip
	}
}

##backstab is over
country_event = {
	id = pse.153
	hide_window = yes
	is_triggered_only = yes
	immediate = {
		create_message = { 
			type = PSE_EXPIRED
			localization = pse_power_botton_chosen_backstab_effect_over
			days = 60
			target = root
		}
	}
}

##SUMMON A SPIRIT BOMB
country_event = {
	id = pse.160
	title = pse.160.title
	desc = pse.160.desc
	picture = GFX_evt_psionics
	show_sound = event_mind_over_matter
	location = event_target:pse_bomb
	is_triggered_only = yes
	immediate = {
		random = {
			chance = 10
			if = {
				limit = {
					NOT = {
						has_country_flag = pse.163.happened
					} 
				}
				play_sound = event_bombpl
				set_country_flag = pse_meme
			}
		}
		set_country_flag = pse_has_bomb
		if = {
			limit = {
				has_technology = tech_pse_bomb_1
			}
			create_fleet = {
				name = "NAME_pse_bomb"
				settings = { 
					can_upgrade = no 
					can_change_composition = no 
					can_change_leader = no 
					uses_naval_capacity = no
					spawn_debris = no
					is_boss = yes
					can_disband = yes
				}			
				effect = {
					set_owner = root
					create_ship = {
						name = "NAME_pse_bomb"
						design = "NAME_pse_bomb"
						prefix = no
						upgradable = no
					}
					add_modifier = {
						modifier = pse_ship_bomb
						days = -1
					}
					set_fleet_flag = pse_bomb_fleet
					set_location = root.capital_scope
					save_event_target_as = pse_bomb
				}
			}
		}
		else = {
			create_fleet = {
				name = "NAME_pse_bomb"
				settings = { 
					can_upgrade = no 
					can_change_composition = no 
					can_change_leader = no 
					uses_naval_capacity = no
					spawn_debris = no
					is_boss = yes
					can_disband = no
				}			
				effect = {
					set_owner = root
					create_ship = {
						name = "NAME_pse_bomb"
						design = "NAME_pse_bomb"
						prefix = no
						upgradable = no
						
					}
					add_modifier = {
						modifier = pse_ship_bomb
						days = -1
					}
					set_fleet_flag = pse_bomb_fleet
					set_location = root.capital_scope
					save_event_target_as = pse_bomb
				}
			}
		}
	}
	after = {
		custom_tooltip = pse.160.tooltip
	}
	option = {
		name = pse.160.a
		trigger = {
			NOT = {
				has_country_flag = pse_meme
			}
		}
	}
	option = {
		name = pse.160.meme
		trigger = {
			has_country_flag = pse_meme
		}
	}
}

#DEBUG WITH DISBAND
country_event = {
	id = pse.161
	hide_window = yes
	is_triggered_only = yes
	trigger = {
		from = {
			has_fleet_flag = pse_bomb_fleet
		}
	}
	immediate = {
		remove_country_flag = pse_has_bomb
		save_event_target_as = pse_country
		set_variable = {
			which = pse_count_ambient_num
			value = 0
		}
		from = {
			create_ambient_object = {
				type = pse_bomb_effect
				scale = 50
				location = this
				use_3d_location = no
				entity_offset = { min = 0 max = 0 }
				entity_offset_angle = { min = 0 max = 0 }
				entity_offset_height = { min = 0 max = 0 }
				entity_scale_to_size = no
				duration = 60
			}
			solar_system = {
				save_event_target_as = pse_system
				every_system_ambient_object = {
					limit = {
						has_ambient_object_flag = pse_bomb_object
					}
					destroy_ambient_object = this
				}
				remove_modifier = space_storm
				add_modifier = {
					modifier = space_storm
					days = 1800
				}
				star = {
					create_ambient_object = {
						type = "pse_bomb_am"
						location = this
						duration = 1800
						scale = 33
						entity_offset = { min = 0 max = 0 }
						entity_offset_angle = { min = 0 max = 0 }
						entity_offset_height = { min = -14 max = -14 }
						entity_scale_to_size = yes
					}
					last_created_ambient_object = {
						set_ambient_object_flag = pse_bomb_object
						set_location = {
							target = prev
							distance = 0
							angle = random
						}
					}
				}
				every_fleet_in_system = {
					limit = {
						owner = {
							NAND = {
								has_technology = tech_pse_bomb_1
								is_same_empire = root	
							}
						}
					}
					
					every_owned_ship = {
						owner = {
							add_opinion_modifier = {
								who = event_target:pse_country
								modifier = opinion_pse_bomb_exploded_our_fleet
							}
							add_threat = { 
								who = event_target:pse_country
								amount = 0.1
							}
						}
					}
					destroy_and_spawn_debris_for = event_target:pse_country
					if = {
						limit = {
							owner = {
								NOT = {
									is_same_empire = root
								}
								NOT = {
									has_country_flag = pse_bomb_just_exploded
								}
							}
						}
						owner = {
							set_timed_country_flag = {
								flag = pse_bomb_just_exploded
								days = 15
							}
							log = "ship owner triggered"
							create_message = { 
								type = PSE_BOMB_EXPLODED
								localization = pse.162.bomb_exploded2
								days = 60
								target = event_target:pse_system
								variable = {
									type = name
									localization = pse_system
									scope = event_target:pse_system
								}
								variable = {
									type = name
									localization = pse_country
									scope = event_target:pse_country
								}
							}
						}
					}
				}
				every_system_planet = {
					limit = {
						num_pops > 0
						owner = {
							NAND = {
								has_technology = tech_pse_bomb_1
								is_same_empire = root	
							}
						}
					}
					create_ambient_object = {
						type = "psi_storm_1"
						location = this
						duration = 1800
						scale = 1
						entity_scale_to_size = yes
					}
					last_created_ambient_object = {
						set_ambient_object_flag = pse_bomb_object
						set_location = {
							target = prev
							distance = 0
							angle = random
						}
					}
					owner = {
						add_opinion_modifier = {
							who = event_target:pse_country
							modifier = opinion_pse_bomb_exploded_our_planet
						}
						add_static_war_exhaustion = {
							attacker = event_target:pse_country
							location = prev
							value_for_planet_destruction = 0.5
						}
						add_threat = { 
							who = event_target:pse_country
							amount = 2
						}
					}	
					add_planet_devastation = 75
					add_modifier = {
						modifier = MOD_pse_power_break_building_modifier_max
						days = 1
					}
					remove_all_districts = yes
					remove_all_armies = yes
					
				}
				every_system_planet = {
					limit = {
						is_star = no
						is_asteroid = no
						is_moon = no
						is_colonizable = no
					}
					random_list = {
						0 = {
							modifier = {
								add = 10000
								check_variable = {
									which = pse_count_ambient_num
									value > 2
								}
							}
						}
						1 = {
							create_ambient_object = {
								type = "space_storm_1"
								location = this
								duration = 1800
								scale = 1
								entity_scale_to_size = yes
							}
							last_created_ambient_object = {
								set_ambient_object_flag = pse_bomb_object
								set_location = {
									target = prev
									distance = 0
									angle = random
								}
							}
							root = {
								change_variable = {
									which = pse_count_ambient_num
									value = 1
								}
							}
						}
						1 = {
							create_ambient_object = {
								type = "space_storm_2"
								location = this
								duration = 1800
								scale = 1
								entity_scale_to_size = yes
							}
							last_created_ambient_object = {
								set_ambient_object_flag = pse_bomb_object
								set_location = {
									target = prev
									distance = 0
									angle = random
								}
							}
							root = {
								change_variable = {
									which = pse_count_ambient_num
									value = 1
								}
							}
						}
					}
					if = {
						limit = {
							NOT = {
								has_planet_flag = pse_bombed_planet
							}
							has_deposit = no
						}
						random_list = {
							1 = {}
							2 = {
								create_ambient_object = {
									type = "pse_bomb_am"
									location = this
									duration = 1800
									scale = 24
									entity_offset = { min = 0 max = 0 }
									entity_offset_angle = { min = 0 max = 0 }
									entity_offset_height = { min = -14 max = -14 }
									entity_scale_to_size = yes
								}
								last_created_ambient_object = {
									set_ambient_object_flag = pse_bomb_object
									set_location = {
										target = prev
										distance = 0
										angle = random
									}
								}
								set_planet_flag = pse_bombed_planet
								random_list = {
									1 = {
										add_deposit = d_zro_deposit_1
									}
									1 = {
										add_deposit = d_zro_deposit_2
									}
									1 = {
										add_deposit = d_zro_deposit_3
									}
								}
							}
						}
					}
				}
				if = {
					limit = {
						exists = owner
						owner = {
							NOT = {
								is_same_empire = root
							}
							NOT = {	
								has_country_flag = pse_bomb_just_exploded
							}
						}
					}
					owner = {
						set_timed_country_flag = {
							flag = pse_bomb_just_exploded
							days = 60
						}
						log = "space owner triggered"
						create_message = { 
							type = PSE_BOMB_EXPLODED
							localization = pse.162.bomb_exploded2
							days = 60
							target = event_target:pse_system
							variable = {
								type = name
								localization = pse_system
								scope = event_target:pse_system
							}
							variable = {
								type = name
								localization = pse_country
								scope = event_target:pse_country
							}
						}
					}
				}
			}
		}
		set_variable = {
			which = pse_count_ambient_num
			value = 0
		}
		create_message = { 
			type = PSE_BOMB_EXPLODED
			localization = pse.162.bomb_exploded
			days = 60
			target = event_target:pse_system
			variable = {
				type = name
				localization = pse_system
				scope = event_target:pse_system
			}
		}
		
		country_event = {
			id = pse.163
		}
	}
}

##DESTROY BY OPPOMENTS
country_event = {
	id = pse.162
	hide_window = yes
	is_triggered_only = yes
	trigger = {
		fromfrom = {
			has_fleet_flag = pse_bomb_fleet
		}
	}

	immediate = {
		remove_country_flag = pse_has_bomb
		save_event_target_as = pse_country
		set_variable = {
			which = pse_count_ambient_num
			value = 0
		}
		fromfrom = {
			create_ambient_object = {
				type = pse_bomb_effect
				scale = 50
				location = this
				use_3d_location = no
				entity_offset = { min = 0 max = 0 }
				entity_offset_angle = { min = 0 max = 0 }
				entity_offset_height = { min = 0 max = 0 }
				entity_scale_to_size = no
				duration = 60
			}
			solar_system = {
				save_event_target_as = pse_system
				every_system_ambient_object = {
					limit = {
						has_ambient_object_flag = pse_bomb_object
					}
					destroy_ambient_object = this
				}
				remove_modifier = space_storm
				add_modifier = {
					modifier = space_storm
					days = 1800
				}
				star = {
					create_ambient_object = {
						type = "pse_bomb_am"
						location = this
						duration = 1800
						scale = 33
						entity_offset = { min = 0 max = 0 }
						entity_offset_angle = { min = 0 max = 0 }
						entity_offset_height = { min = -14 max = -14 }
						entity_scale_to_size = yes
					}
					last_created_ambient_object = {
						set_ambient_object_flag = pse_bomb_object
						set_location = {
							target = prev
							distance = 0
							angle = random
						}
					}
				}
				every_fleet_in_system = {
					limit = {
						owner = {
							NAND = {
								has_technology = tech_pse_bomb_1
								is_same_empire = root	
							}
						}
					}
					every_owned_ship = {
						owner = {
							add_opinion_modifier = {
								who = event_target:pse_country
								modifier = opinion_pse_bomb_exploded_our_fleet
							}
							add_threat = { 
								who = event_target:pse_country
								amount = 0.1
							}
						}
					}
					destroy_and_spawn_debris_for = event_target:pse_country
					if = {
						limit = {
							owner = {
								NOR = {
									is_same_empire = root
									is_same_empire = from
									is_same_empire = fromfrom.solar_system.owner
								}
								NOT = {
									has_country_flag = pse_bomb_just_exploded
								}
							}
						}
						owner = {
							set_timed_country_flag = {
								flag = pse_bomb_just_exploded
								days = 15
							}
							log = "ship owner triggered"
							create_message = { 
								type = PSE_BOMB_EXPLODED
								localization = pse.162.bomb_exploded2
								days = 60
								target = event_target:pse_system
								variable = {
									type = name
									localization = pse_system
									scope = event_target:pse_system
								}
								variable = {
									type = name
									localization = pse_country
									scope = event_target:pse_country
								}
							}
						}
					}
				}
				every_system_planet = {
					limit = {
						num_pops > 0
						owner = {
							NAND = {
								has_technology = tech_pse_bomb_1
								is_same_empire = root	
							}
						}
					}
					create_ambient_object = {
						type = "psi_storm_1"
						location = this
						duration = 1800
						scale = 1
						entity_scale_to_size = yes
					}
					last_created_ambient_object = {
						set_ambient_object_flag = pse_bomb_object
						set_location = {
							target = prev
							distance = 0
							angle = random
						}
					}
					owner = {
						add_opinion_modifier = {
							who = event_target:pse_country
							modifier = opinion_pse_bomb_exploded_our_planet
						}
						add_static_war_exhaustion = {
							attacker = event_target:pse_country
							location = prev
							value_for_planet_destruction = 0.5
						}
						add_threat = { 
							who = event_target:pse_country
							amount = 2
						}
					}
					add_planet_devastation = 75
					add_modifier = {
						modifier = MOD_pse_power_break_building_modifier_max
						days = 1
					}
					remove_all_districts = yes
					remove_all_armies = yes
				}
				every_system_planet = {
					limit = {
						is_star = no
						is_asteroid = no
						is_moon = no
						is_colonizable = no
					}
					random_list = {
						0 = {
							modifier = {
								add = 10000
								check_variable = {
									which = pse_count_ambient_num
									value > 2
								}
							}
						}
						1 = {
							create_ambient_object = {
								type = "space_storm_1"
								location = this
								duration = 1800
								scale = 1
								entity_scale_to_size = yes
							}
							last_created_ambient_object = {
								set_ambient_object_flag = pse_bomb_object
								set_location = {
									target = prev
									distance = 0
									angle = random
								}
							}
							root = {
								change_variable = {
									which = pse_count_ambient_num
									value = 1
								}
							}
						}
						1 = {
							create_ambient_object = {
								type = "space_storm_2"
								location = this
								duration = 1800
								scale = 1
								entity_scale_to_size = yes
							}
							last_created_ambient_object = {
								set_ambient_object_flag = pse_bomb_object
								set_location = {
									target = prev
									distance = 0
									angle = random
								}
							}
							root = {
								change_variable = {
									which = pse_count_ambient_num
									value = 1
								}
							}
						}
					}
					if = {
						limit = {
							NOT = {
								has_planet_flag = pse_bombed_planet
							}
							has_deposit = no
						}
						random_list = {
							1 = {}
							2 = {
								create_ambient_object = {
									type = "pse_bomb_am"
									location = this
									duration = 1800
									scale = 24
									entity_offset = { min = 0 max = 0 }
									entity_offset_angle = { min = 0 max = 0 }
									entity_offset_height = { min = -14 max = -14 }
									entity_scale_to_size = yes
								}
								last_created_ambient_object = {
									set_ambient_object_flag = pse_bomb_object
									set_location = {
										target = prev
										distance = 0
										angle = random
									}
								}
								set_planet_flag = pse_bombed_planet
								random_list = {
									1 = {
										add_deposit = d_zro_deposit_1
									}
									1 = {
										add_deposit = d_zro_deposit_2
									}
									1 = {
										add_deposit = d_zro_deposit_3
									}
								}
							}
						}
					}
				}
				if = {
					limit = {
						exists = owner
						owner = {
							NOR = {
								is_same_empire = root
								is_same_empire = from
							}
						}
					}
					owner = {
						log = "space owner triggered"
						create_message = { 
							type = PSE_BOMB_EXPLODED
							localization = pse.162.bomb_exploded2
							days = 60
							target = event_target:pse_system
							variable = {
								type = name
								localization = pse_system
								scope = event_target:pse_system
							}
							variable = {
								type = name
								localization = pse_country
								scope = event_target:pse_country
							}
						}
					}
				}
			}
		}
		set_variable = {
			which = pse_count_ambient_num
			value = 0
		}
		create_message = { 
			type = PSE_BOMB_EXPLODED
			localization = pse.162.bomb_exploded
			days = 60
			target = event_target:pse_system
			variable = {
				type = name
				localization = pse_system
				scope = event_target:pse_system
			}
		}
		from = {
			log = "attacker owner triggered"
			create_message = { 
				type = PSE_BOMB_EXPLODED
				localization = pse.162.bomb_exploded2
				days = 60
				target = event_target:pse_system
				variable = {
					type = name
					localization = pse_system
					scope = event_target:pse_system
				}
				variable = {
					type = name
					localization = pse_country
					scope = event_target:pse_country
				}
			}
		}
		country_event = {
			id = pse.163
		}
	}
}

country_event = {
	id = pse.163
	title = pse.163.title
	desc = {
		text = pse.163.desc
		trigger = {
			NOT = {
				has_technology = tech_pse_bomb_1
			}	
		}
	} 
	desc = {
		text = pse.163.desc_has_tech
		trigger = {
			has_technology = tech_pse_bomb_1
		}
	} 
	picture = GFX_evt_large_explosion
	show_sound = event_super_explosion
	location = event_target:pse_system
	is_triggered_only = yes
	trigger = {
		NOT = {
			has_country_flag = pse.163.happened
		}
	}
	immediate = {
		if = {
			limit = {
				has_country_flag = pse_meme
			}
			play_sound = event_terwin
		}
	}
	after = {
		hidden_effect = {
			remove_country_flag = pse_meme
			set_country_flag = pse.163.happened
		}
		custom_tooltip = pse.163.tooltip
	}
	option = {
		name = pse.163.a
		trigger = {
			OR = {
				has_ethic = ethic_spiritualist
				has_ethic = ethic_fanatic_spiritualist
			}
			NOT = {
				has_valid_civic = civic_fanatic_purifiers
			}
			NOT = {
				has_country_flag = pse_meme
			}
		}
	}
	option = {
		name = pse.163.b
		trigger = {
			is_spiritualist = no
			NOT = {
				has_valid_civic = civic_fanatic_purifiers
			}
			NOT = {
				has_country_flag = pse_meme
			}
		}
	}
	option = {
		name = pse.163.xeno
		trigger = {
			has_valid_civic = civic_fanatic_purifiers
			NOT = {
				has_country_flag = pse_meme
			}
		}
	}
	option = {
		name = pse.163.meme
		trigger = {
			has_country_flag = pse_meme
		}
	}
}

country_event = {
	id = pse.170
	hide_window = yes
	is_triggered_only = yes
	trigger = {
		last_increased_tech = tech_pse_bomb_1
	}
	immediate = {
		if = {
			limit = {
				any_owned_fleet = {
					has_fleet_flag = pse_bomb_fleet
				}
			}
			random_owned_fleet = {
				limit = {
					has_fleet_flag = pse_bomb_fleet
				}
				save_event_target_as = pse_location
				dismantle = yes
			}
			create_fleet = {
				name = "NAME_pse_bomb"
				settings = { 
					can_upgrade = no 
					can_change_composition = no 
					can_change_leader = no 
					uses_naval_capacity = no
					spawn_debris = no
					is_boss = yes
					can_disband = yes
				}			
				effect = {
					set_owner = root
					create_ship = {
						name = "NAME_pse_bomb"
						design = "NAME_pse_bomb"
						prefix = no
						upgradable = no
						
					}
					add_modifier = {
						modifier = pse_ship_bomb
						days = -1
					}
					set_fleet_flag = pse_bomb_fleet
					set_location = event_target:pse_location
					set_name = event_target:pse_location
					
				}
			}
		}
	}
}

#Mine zro gives
country_event = {
	id = pse.171
	hide_window = yes
	is_triggered_only = yes
	trigger = {
		last_increased_tech = tech_pse_power_2
	}
	immediate = {
		if = {
			limit = {
				NOR = {
					has_technology = tech_mine_zro
					has_tech_option = tech_mine_zro
				}
			}
			add_research_option = tech_mine_zro
			add_tech_progress = {
				tech = tech_mine_zro
				progress = 0.25
			}
		}
	}
}

###Potential gains from tech_pse_circle_1
# This = owner of ship 1 (combatant)
# From = owner of ship 2 (destroyed)
# FromFrom = ship 1
# FromFromFrom = ship 2
country_event = {
	id = pse.172
	hide_window = yes
	is_triggered_only = yes
	trigger = {
		has_technology = tech_pse_circle_1
		check_variable = {
			which = pse_power
			value < pse_power_cap
		}
	}
	immediate = {
		change_variable = {
			which = pse_power
			value = 0.25
		}
		if = {
			limit = {
				check_variable = {
					which = pse_power
					value > pse_power_cap
				}
			}
			set_variable = {
				which = pse_power
				value = pse_power_cap
			}
		}
	}
}



##ADD ARC FLAG TO ALL SHIPS
country_event = {
	id = pse.173
	is_triggered_only = yes
	hide_window = yes
	immediate = {
		every_owned_ship = {
			limit = {
				NOT = {
					is_ship_size = space_cloud
				}
			}
			set_ship_flag = pse_power_combat_arc_ship_in_effect
			create_ambient_object = {
				type = pse_arc_effect
				scale = 1
				location = this
				use_3d_location = yes
				entity_offset = { min = 0 max = 0 }
				entity_offset_angle = { min = 0 max = 0 }
				entity_offset_height = { min = 0 max = 0 }
				entity_scale_to_size = yes
				duration = 15
			}
		}
	}
}

# This = owner of ship 1 (destroyed)
# From = owner of ship 2 (combatant)
# FromFrom = ship 1
# FromFromFrom = ship 2
country_event = {
	id = pse.174
	hide_window = yes
	is_triggered_only = yes
	trigger = {
		fromfrom = {
			has_ship_flag = pse_power_combat_arc_ship_in_effect
		}
	}
	immediate = {
		fromfrom = {
			create_ambient_object = {
				type = pse_arc_effect
				scale = 1
				location = this
				use_3d_location = yes
				entity_scale_to_size = yes
				duration = 15
			}
		}
		if = {
			limit = {
				exists = fromfrom
			}
			fromfrom = {
				remove_ship_flag = pse_power_combat_arc_ship_in_effect
			}
		}
		fromfromfrom = {
			if = {
				limit = {
					has_hp_percentage > 0.2
				}
				reduce_hp_percent = 20
				create_ambient_object = {
					type = pse_range_hit_effect
					scale = 1.0
					location = this
					use_3d_location = yes
					entity_scale_to_size = yes
					duration = 30
				}
			}
			else_if = {
				limit = {
					has_hp_percentage < 0.2
					has_hp_percentage > 0.05
				}
				reduce_hp_percent = 4
				create_ambient_object = {
					type = pse_range_hit_effect
					scale = 1.0
					location = this
					use_3d_location = yes
					entity_scale_to_size = yes
					duration = 30
				}
			}
			else_if = {
				limit = {
					has_hp_percentage < 0.05
				}
				reduce_hp_percent = 1
				create_ambient_object = {
					type = pse_range_hit_effect
					scale = 1.0
					location = this
					use_3d_location = yes
					entity_scale_to_size = yes
					duration = 30
				}
			}
		}
	}
}

#Covenant Composer Life
country_event = {
	id = pse.180
	title = pse.180.title
	desc = pse.180.desc
	desc = pse.180.desc2
	desc = pse.180.desc3
	desc = pse.180.desc4
	picture = GFX_evt_psionics
	show_sound = event_psionic
	is_triggered_only = yes
	trigger = {
		any_owned_leader = {
			OR = {
				has_trait = leader_trait_admiral_psionic
				has_trait = leader_trait_general_psionic
				has_trait = leader_trait_governor_psionic
				has_trait = leader_trait_scientist_psionic
				has_trait = leader_trait_ruler_psionic
			}
			NOT = {
				has_trait = pse_leader_trait_shroud_age
			}
		}
	}
	immediate = {
		random_owned_leader = {
			limit = {
				OR = {
					has_trait = leader_trait_admiral_psionic
					has_trait = leader_trait_general_psionic
					has_trait = leader_trait_governor_psionic
					has_trait = leader_trait_scientist_psionic
					has_trait = leader_trait_ruler_psionic
				}	
			}
			remove_trait = leader_trait_shroud_age
			add_trait = pse_leader_trait_shroud_age
			save_event_target_as = pse_leader
		}
	}
	option = {
		name = GOOD
		tooltip = {
			event_target:pse_leader = {
				add_trait = pse_leader_trait_shroud_age
			}
		}
	}
}

#Back to 20, lol
country_event = {
	id = pse.181
	title = pse.180.title
	desc = pse.181.desc
	picture = GFX_evt_psionics
	show_sound = event_psionic
	is_triggered_only = yes
	trigger = {
		any_owned_leader = {
			has_skill > 4
			OR = {
				has_trait = leader_trait_admiral_psionic
				has_trait = leader_trait_general_psionic
				has_trait = leader_trait_governor_psionic
				has_trait = leader_trait_scientist_psionic
				has_trait = leader_trait_ruler_psionic
			}
			NOT = {
				has_trait = pse_leader_trait_shroud_age
			}
		}
	}
	immediate = {
		random_owned_leader = {
			limit = {
				has_skill > 4
				OR = {
					has_trait = leader_trait_admiral_psionic
					has_trait = leader_trait_general_psionic
					has_trait = leader_trait_governor_psionic
					has_trait = leader_trait_scientist_psionic
					has_trait = leader_trait_ruler_psionic
				}	
			}
			if = {
				limit = {
					species = {
						OR = {
							has_trait = trait_machine_unit
							has_trait = trait_mechanical
						}
					}
				}
				random_list = {
					1 = {
						set_age = 1
					}
					1 = {
						set_age = 2
					}
					1 = {
						set_age = 3
					}
					1 = {
						set_age = 4
					}
				}
			}
			else = {
				random_list = {
					1 = {
						set_age = 20
					}
					1 = {
						set_age = 21
					}
					1 = {
						set_age = 22
					}
					1 = {
						set_age = 23
					}
					1 = {
						set_age = 24
					}
				}
			}
			
			set_skill = 1
			remove_leader_flag = has_gained_level_trait
			remove_trait = leader_trait_shroud_age
			add_trait = pse_leader_trait_shroud_age
			save_event_target_as = pse_leader
		}
	}
	option = {
		name = pse.181.a
		custom_tooltip = pse.181.a.tooltip
		tooltip = {
			event_target:pse_leader = {
				add_trait = pse_leader_trait_shroud_age
			}
		}
	}
}

#population boom
country_event = {
	id = pse.185
	title = pse.185.title
	desc = pse.185.desc
	desc = pse.185.desc2
	desc = pse.185.desc3
	desc = pse.185.desc4
	picture = GFX_evt_psionics
	show_sound = event_psionic
	is_triggered_only = yes

	after = {

	}

	immediate = {
		set_variable = {
			which = pse_population
			value = 0
		}
		every_owned_pop = {
			limit = {
				is_robot_pop = no
			}
			root = {
				change_variable = {
					which = pse_population
					value = 1
				}
			}
		}
		divide_variable = {
			which = pse_population
			value = 20
		}
		round_variable = pse_population
		if = {
			limit = {
				check_variable = {
					which = pse_population
					value > 100
				}
			}
			set_variable = {
				which = pse_population
				value = 100
			}
		}
		country_event = {
			id = pse.186
		}
	}
	option = {
		name = EXCELLENT
		custom_tooltip = pse.185.tooltip
	}
}
#Give pop gateway
country_event = {
	id = pse.186
	hide_window = yes
	is_triggered_only = yes
	trigger = {
		check_variable = {
			which = pse_population
			value > 0
		}
	}
	immediate = {
		random_owned_planet = {
			random_owned_pop = {
				limit = {
					is_robot_pop = no
				}
				save_event_target_as = pse_pop
			}
			create_pop = {
				species = event_target:pse_pop
			}
		}
		change_variable = {
			which = pse_population
			value = -1
		}
		country_event = {
			id = pse.186
			days = 1
		}	
	}
}

#Eater fleet effect is over
country_event = {
	id = pse.190
	is_triggered_only = yes
	hide_window = yes
	immediate = {
		create_message = { 
			type = PSE_EXPIRED
			localization = pse_power_botton_covenant_eater_fleet_effect_over
			days = 60
			target = root
		}
	}
}

#Eater army effect is over
country_event = {
	id = pse.195
	is_triggered_only = yes
	hide_window = yes
	immediate = {
		create_message = { 
			type = PSE_EXPIRED
			localization = pse_power_botton_covenant_eater_army_effect_over
			days = 60
			target = root
		}
	}
}

#Desire economic boom
country_event = {
	id = pse.200
	title = pse.200.title
	desc = {
		trigger = {
			hidden:root = {
				success_text = {
					text = pse.200.desc1
					has_modifier = MOD_pse_power_covenant_desire_income_modifier_effect_1
				}
				success_text = {
					text = pse.200.desc2
					has_modifier = MOD_pse_power_covenant_desire_income_modifier_effect_2
				}
				success_text = {
					text = pse.200.desc3
					has_modifier = MOD_pse_power_covenant_desire_income_modifier_effect_3
				}
				success_text = {
					text = pse.200.desc4
					has_modifier = MOD_pse_power_covenant_desire_income_modifier_effect_4
				}
				success_text = {
					text = pse.200.desc5
					has_modifier = MOD_pse_power_covenant_desire_income_modifier_effect_5
				}
				success_text = {
					text = pse.200.desc6
					has_modifier = MOD_pse_power_covenant_desire_income_modifier_effect_6
				}
				success_text = {
					text = pse.200.desc7
					has_modifier = MOD_pse_power_covenant_desire_income_modifier_effect_7
				}
				success_text = {
					text = pse.200.desc8
					has_modifier = MOD_pse_power_covenant_desire_income_modifier_effect_8
				}
				success_text = {
					text = pse.200.desc9
					has_modifier = MOD_pse_power_covenant_desire_income_modifier_effect_9
				}
				success_text = {
					text = pse.200.desc10
					has_modifier = MOD_pse_power_covenant_desire_income_modifier_effect_10
				}
				success_text = {
					text = pse.200.desc11
					has_modifier = MOD_pse_power_covenant_desire_income_modifier_effect_11
				}
				success_text = {
					text = pse.200.desc12
					has_modifier = MOD_pse_power_covenant_desire_income_modifier_effect_12
				}
				success_text = {
					text = pse.200.desc13
					has_modifier = MOD_pse_power_covenant_desire_income_modifier_effect_13
				}
				success_text = {
					text = pse.200.desc14
					has_modifier = MOD_pse_power_covenant_desire_income_modifier_effect_14
				}
				success_text = {
					text = pse.200.desc15
					has_modifier = MOD_pse_power_covenant_desire_income_modifier_effect_15
				}
				success_text = {
					text = pse.200.desc16
					has_modifier = MOD_pse_power_covenant_desire_income_modifier_effect_16
				}
				success_text = {
					text = pse.200.desc17
					has_modifier = MOD_pse_power_covenant_desire_income_modifier_effect_17
				}
				success_text = {
					text = pse.200.desc18
					has_modifier = MOD_pse_power_covenant_desire_income_modifier_effect_18
				}
			}
		}
		
	}
	picture = GFX_evt_galactic_market
	show_sound = event_galactic_market
	is_triggered_only = yes
	after = {
		hidden_effect = {
			remove_country_flag = pse_200_meme
		}
		tooltip = {
			switch = {
				trigger = has_modifier
				MOD_pse_power_covenant_desire_income_modifier_effect_1 = {
					add_modifier = {
						modifier = MOD_pse_power_covenant_desire_income_modifier_effect_1
						days = 1800
					}
				}
				MOD_pse_power_covenant_desire_income_modifier_effect_2 = {
					add_modifier = {
						modifier = MOD_pse_power_covenant_desire_income_modifier_effect_2
						days = 1800
					}
				}
				MOD_pse_power_covenant_desire_income_modifier_effect_3 = {
					add_modifier = {
						modifier = MOD_pse_power_covenant_desire_income_modifier_effect_3
						days = 1800
					}
				}
				MOD_pse_power_covenant_desire_income_modifier_effect_4 = {
					add_modifier = {
						modifier = MOD_pse_power_covenant_desire_income_modifier_effect_4
						days = 1800
					}
				}
				MOD_pse_power_covenant_desire_income_modifier_effect_5 = {
					add_modifier = {
						modifier = MOD_pse_power_covenant_desire_income_modifier_effect_5
						days = 1800
					}
				}
				MOD_pse_power_covenant_desire_income_modifier_effect_6 = {
					add_modifier = {
						modifier = MOD_pse_power_covenant_desire_income_modifier_effect_6
						days = 1800
					}
				}
				MOD_pse_power_covenant_desire_income_modifier_effect_7 = {
					add_modifier = {
						modifier = MOD_pse_power_covenant_desire_income_modifier_effect_7
						days = 1800
					}
				}
				MOD_pse_power_covenant_desire_income_modifier_effect_8 = {
					add_modifier = {
						modifier = MOD_pse_power_covenant_desire_income_modifier_effect_8
						days = 1800
					}
				}
				MOD_pse_power_covenant_desire_income_modifier_effect_9 = {
					add_modifier = {
						modifier = MOD_pse_power_covenant_desire_income_modifier_effect_9
						days = 1800
					}
				}
				MOD_pse_power_covenant_desire_income_modifier_effect_10 = {
					add_modifier = {
						modifier = MOD_pse_power_covenant_desire_income_modifier_effect_10
						days = 1800
					}
				}
				MOD_pse_power_covenant_desire_income_modifier_effect_11 = {
					add_modifier = {
						modifier = MOD_pse_power_covenant_desire_income_modifier_effect_11
						days = 1800
					}
				}
				MOD_pse_power_covenant_desire_income_modifier_effect_12 = {
					add_modifier = {
						modifier = MOD_pse_power_covenant_desire_income_modifier_effect_12
						days = 1800
					}
				}
				MOD_pse_power_covenant_desire_income_modifier_effect_13 = {
					add_modifier = {
						modifier = MOD_pse_power_covenant_desire_income_modifier_effect_13
						days = 1800
					}
				}
				MOD_pse_power_covenant_desire_income_modifier_effect_14 = {
					add_modifier = {
						modifier = MOD_pse_power_covenant_desire_income_modifier_effect_14
						days = 1800
					}
				}
				MOD_pse_power_covenant_desire_income_modifier_effect_15 = {
					add_modifier = {
						modifier = MOD_pse_power_covenant_desire_income_modifier_effect_15
						days = 1800
					}
				}
				MOD_pse_power_covenant_desire_income_modifier_effect_16 = {
					add_modifier = {
						modifier = MOD_pse_power_covenant_desire_income_modifier_effect_16
						days = 1800
					}
				}
				MOD_pse_power_covenant_desire_income_modifier_effect_17 = {
					add_modifier = {
						modifier = MOD_pse_power_covenant_desire_income_modifier_effect_17
						days = 1800
					}
				}
				MOD_pse_power_covenant_desire_income_modifier_effect_18 = {
					add_modifier = {
						modifier = MOD_pse_power_covenant_desire_income_modifier_effect_18
						days = 1800
					}
				}
			}
		}
	}
	immediate = {
		random = {
			chance = 5
			set_country_flag = pse_200_meme
		}
		random_list = {
			1 = {
				modifier = {
					factor = 0
					country_uses_food = no
				}
				add_modifier = {
					modifier = MOD_pse_power_covenant_desire_income_modifier_effect_1
					days = 1800
				}
			}
			1 = {
				modifier = {
					factor = 0
					country_uses_food = no
				}
				add_modifier = {
					modifier = MOD_pse_power_covenant_desire_income_modifier_effect_2
					days = 1800
				}
			}
			1 = {
				modifier = {
					factor = 0
					country_uses_food = no
				}
				add_modifier = {
					modifier = MOD_pse_power_covenant_desire_income_modifier_effect_3
					days = 1800
				}
			}
			1 = {
				add_modifier = {
					modifier = MOD_pse_power_covenant_desire_income_modifier_effect_4
					days = 1800
				}
			}
			1 = {
				add_modifier = {
					modifier = MOD_pse_power_covenant_desire_income_modifier_effect_5
					days = 1800
				}
			}
			1 = {
				add_modifier = {
					modifier = MOD_pse_power_covenant_desire_income_modifier_effect_6
					days = 1800
				}
			}
			1 = {
				add_modifier = {
					modifier = MOD_pse_power_covenant_desire_income_modifier_effect_7
					days = 1800
				}
			}
			1 = {
				add_modifier = {
					modifier = MOD_pse_power_covenant_desire_income_modifier_effect_8
					days = 1800
				}
			}
			1 = {
				add_modifier = {
					modifier = MOD_pse_power_covenant_desire_income_modifier_effect_9
					days = 1800
				}
			}
			1 = {
				add_modifier = {
					modifier = MOD_pse_power_covenant_desire_income_modifier_effect_10
					days = 1800
				}
			}
			1 = {
				add_modifier = {
					modifier = MOD_pse_power_covenant_desire_income_modifier_effect_11
					days = 1800
				}
			}
			1 = {
				add_modifier = {
					modifier = MOD_pse_power_covenant_desire_income_modifier_effect_12
					days = 1800
				}
			}
			1 = {
				modifier = {
					factor = 0
					country_uses_consumer_goods = no
				}
				add_modifier = {
					modifier = MOD_pse_power_covenant_desire_income_modifier_effect_13
					days = 1800
				}
			}
			1 = {
				modifier = {
					factor = 0
					country_uses_consumer_goods = no
				}
				add_modifier = {
					modifier = MOD_pse_power_covenant_desire_income_modifier_effect_14
					days = 1800
				}
			}
			1 = {
				modifier = {
					factor = 0
					country_uses_consumer_goods = no
				}
				add_modifier = {
					modifier = MOD_pse_power_covenant_desire_income_modifier_effect_15
					days = 1800
				}
			}
			1 = {
				modifier = {
					factor = 0
					has_ethic = ethic_gestalt_consciousness
				}
				add_modifier = {
					modifier = MOD_pse_power_covenant_desire_income_modifier_effect_16
					days = 1800
				}
			}
			1 = {
				add_modifier = {
					modifier = MOD_pse_power_covenant_desire_income_modifier_effect_17
					days = 1800
				}
			}
			1 = {
				modifier = {
					factor = 0
					has_ethic = ethic_gestalt_consciousness
				}
				add_modifier = {
					modifier = MOD_pse_power_covenant_desire_income_modifier_effect_18
					days = 1800
				}
			}
		}
	}
	option = {
		name = pse.200.a
		trigger = {
			NOT = {
				has_country_flag = pse_200_meme
			}
		}
	}
	option = {
		name = pse.200.meme
		trigger = {
			has_country_flag = pse_200_meme
		}
	}
}

country_event = {
	id = pse.205
	title = pse.205.title
	desc = pse.205.desc
	picture = GFX_evt_psionics
	show_sound = event_mind_over_matter
	is_triggered_only = yes

	after = {
		hidden_effect = {
			country_event = {
				id = pse.206
			}
			divide_variable = {
				which = pse_resource_go_out_amount
				value = 50
			}
			round_variable = pse_resource_go_out_inital_number
		}
		
	}

	option = {
		name = pse.205.energy
		trigger = {
			resource_stockpile_compare = {
				resource = energy
				value > 0
			}
		}
		hidden_effect = {
			set_country_flag = pse_exchange_with_energy
			export_resource_stockpile_to_variable = {
				resource = energy
				variable = pse_resource_go_out_amount
			}
			set_variable = {
				which = pse_resource_go_out_inital_number
				value = pse_resource_go_out_amount
			}
			add_resource = {
				energy = -1
				mult = pse_resource_go_out_amount
			}
		}
	}
	option = {
		name = pse.205.food
		trigger = {
			resource_stockpile_compare = {
				resource = food
				value > 0
			}
		}
		hidden_effect = {
			set_country_flag = pse_exchange_with_food
			export_resource_stockpile_to_variable = {
				resource = food
				variable = pse_resource_go_out_amount
			}
			set_variable = {
				which = pse_resource_go_out_inital_number
				value = pse_resource_go_out_amount
			}
			add_resource = {
				food = -1
				mult = pse_resource_go_out_amount
			}
		}
	}
	option = {
		name = pse.205.minerals
		trigger = {
			resource_stockpile_compare = {
				resource = minerals
				value > 0
			}
		}
		hidden_effect = {
			set_country_flag = pse_exchange_with_minerals
			export_resource_stockpile_to_variable = {
				resource = minerals
				variable = pse_resource_go_out_amount
			}
			set_variable = {
				which = pse_resource_go_out_inital_number
				value = pse_resource_go_out_amount
			}
			add_resource = {
				minerals = -1
				mult = pse_resource_go_out_amount
			}
		}
	}
	option = {
		name = pse.205.alloys
		trigger = {
			resource_stockpile_compare = {
				resource = alloys
				value > 0
			}
		}
		hidden_effect = {
			set_country_flag = pse_exchange_with_alloys
			export_resource_stockpile_to_variable = {
				resource = alloys
				variable = pse_resource_go_out_amount
			}
			set_variable = {
				which = pse_resource_go_out_inital_number
				value = pse_resource_go_out_amount
			}
			add_resource = {
				alloys = -1
				mult = pse_resource_go_out_amount
			}
			multiply_variable = {
				which = pse_resource_go_out_amount
				value = 4
			}
		}
	}
	option = {
		name = pse.205.consumer_goods
		trigger = {
			resource_stockpile_compare = {
				resource = consumer_goods
				value > 0
			}
		}
		hidden_effect = {
			set_country_flag = pse_exchange_with_consumer_goods
			export_resource_stockpile_to_variable = {
				resource = consumer_goods
				variable = pse_resource_go_out_amount
			}
			set_variable = {
				which = pse_resource_go_out_inital_number
				value = pse_resource_go_out_amount
			}
			add_resource = {
				consumer_goods = -1
				mult = pse_resource_go_out_amount
			}
			multiply_variable = {
				which = pse_resource_go_out_amount
				value = 2
			}
		}
	}
	option = {
		name = pse.205.exotic_gases
		trigger = {
			resource_stockpile_compare = {
				resource = exotic_gases
				value > 0
			}
		}
		hidden_effect = {
			set_country_flag = pse_exchange_with_exotic_gases
			export_resource_stockpile_to_variable = {
				resource = exotic_gases
				variable = pse_resource_go_out_amount
			}
			set_variable = {
				which = pse_resource_go_out_inital_number
				value = pse_resource_go_out_amount
			}
			add_resource = {
				exotic_gases = -1
				mult = pse_resource_go_out_amount
			}
			multiply_variable = {
				which = pse_resource_go_out_amount
				value = 8
			}
		}
	}
	option = {
		name = pse.205.rare_crystals
		trigger = {
			resource_stockpile_compare = {
				resource = rare_crystals
				value > 0
			}
		}
		hidden_effect = {
			set_country_flag = pse_exchange_with_rare_crystals
			export_resource_stockpile_to_variable = {
				resource = rare_crystals
				variable = pse_resource_go_out_amount
			}
			set_variable = {
				which = pse_resource_go_out_inital_number
				value = pse_resource_go_out_amount
			}
			add_resource = {
				rare_crystals = -1
				mult = pse_resource_go_out_amount
			}
			multiply_variable = {
				which = pse_resource_go_out_amount
				value = 8
			}
		}
	}
	option = {
		name = pse.205.volatile_motes
		trigger = {
			resource_stockpile_compare = {
				resource = volatile_motes
				value > 0
			}
		}
		hidden_effect = {
			set_country_flag = pse_exchange_with_volatile_motes
			export_resource_stockpile_to_variable = {
				resource = volatile_motes
				variable = pse_resource_go_out_amount
			}
			set_variable = {
				which = pse_resource_go_out_inital_number
				value = pse_resource_go_out_amount
			}
			add_resource = {
				volatile_motes = -1
				mult = pse_resource_go_out_amount
			}
			multiply_variable = {
				which = pse_resource_go_out_amount
				value = 8
			}
		}
	}
	option = {
		name = pse.205.sr_living_metal
		trigger = {
			resource_stockpile_compare = {
				resource = sr_living_metal
				value > 0
			}
		}
		hidden_effect = {
			set_country_flag = pse_exchange_with_sr_living_metal
			export_resource_stockpile_to_variable = {
				resource = sr_living_metal
				variable = pse_resource_go_out_amount
			}
			set_variable = {
				which = pse_resource_go_out_inital_number
				value = pse_resource_go_out_amount
			}
			add_resource = {
				sr_living_metal = -1
				mult = pse_resource_go_out_amount
			}
			multiply_variable = {
				which = pse_resource_go_out_amount
				value = 15
			}
		}
	}
	option = {
		name = pse.205.sr_dark_matter
		trigger = {
			resource_stockpile_compare = {
				resource = sr_dark_matter
				value > 0
			}
		}
		hidden_effect = {
			set_country_flag = pse_exchange_with_sr_dark_matter
			export_resource_stockpile_to_variable = {
				resource = sr_dark_matter
				variable = pse_resource_go_out_amount
			}
			set_variable = {
				which = pse_resource_go_out_inital_number
				value = pse_resource_go_out_amount
			}
			add_resource = {
				sr_dark_matter = -1
				mult = pse_resource_go_out_amount
			}
			multiply_variable = {
				which = pse_resource_go_out_amount
				value = 15
			}
		}
	}
}

country_event = {
	id = pse.206
	title = pse.205.title
	desc = pse.206.desc
	picture = GFX_evt_strategic_resources
	show_sound = archeology_log_entry_neutral
	is_triggered_only = yes

	after = {
		hidden_effect = {
			country_event = {
				id = pse.207
			}
			remove_country_flag = pse_exchange_with_energy
			remove_country_flag = pse_exchange_with_food
			remove_country_flag = pse_exchange_with_minerals
			remove_country_flag = pse_exchange_with_alloys
			remove_country_flag = pse_exchange_with_consumer_goods
			remove_country_flag = pse_exchange_with_exotic_gases
			remove_country_flag = pse_exchange_with_rare_crystals
			remove_country_flag = pse_exchange_with_volatile_motes
			remove_country_flag = pse_exchange_with_sr_dark_matter
			remove_country_flag = pse_exchange_with_sr_living_metal
		}
	}

	option = {
		name = pse.205.energy
		trigger = {
			NOT = {
				has_country_flag = pse_exchange_with_energy
			}
		}
		add_resource = {
			energy = 50
			mult = pse_resource_go_out_amount
		}
	}
	option = {
		name = pse.205.minerals
		trigger = {
			NOT = {
				has_country_flag = pse_exchange_with_minerals
			}
		}
		add_resource = {
			minerals = 50
			mult = pse_resource_go_out_amount
		}
	}
	option = {
		name = pse.205.food
		trigger = {
			NOT = {
				has_country_flag = pse_exchange_with_food
			}
		}
		add_resource = {
			food = 50
			mult = pse_resource_go_out_amount
		}
	}
	option = {
		name = pse.205.consumer_goods
		trigger = {
			NOT = {
				has_country_flag = pse_exchange_with_consumer_goods
			}
		}
		add_resource = {
			consumer_goods = 25
			mult = pse_resource_go_out_amount
		}
	}
	option = {
		name = pse.205.alloys
		trigger = {
			NOT = {
				has_country_flag = pse_exchange_with_alloys
			}
		}
		add_resource = {
			alloys = 12.5
			mult = pse_resource_go_out_amount
		}
	}
	option = {
		name = pse.205.exotic_gases
		trigger = {
			NOT = {
				has_country_flag = pse_exchange_with_exotic_gases
			}
		}
		add_resource = {
			exotic_gases = 6.25
			mult = pse_resource_go_out_amount
		}
	}
	option = {
		name = pse.205.rare_crystals
		trigger = {
			NOT = {
				has_country_flag = pse_exchange_with_rare_crystals
			}
		}
		add_resource = {
			rare_crystals = 6.25
			mult = pse_resource_go_out_amount
		}
	}
	option = {
		name = pse.205.volatile_motes
		trigger = {
			NOT = {
				has_country_flag = pse_exchange_with_volatile_motes
			}
		}
		add_resource = {
			volatile_motes = 6.25
			mult = pse_resource_go_out_amount
		}
	}
	option = {
		name = pse.205.sr_living_metal
		trigger = {
			NOT = {
				has_country_flag = pse_exchange_with_sr_living_metal
			}
		}
		add_resource = {
			sr_living_metal = 3.4
			mult = pse_resource_go_out_amount
		}
	}
	option = {
		name = pse.205.sr_dark_matter
		trigger = {
			NOT = {
				has_country_flag = pse_exchange_with_sr_dark_matter
			}
		}
		add_resource = {
			sr_dark_matter = 3.4
			mult = pse_resource_go_out_amount
		}
	}
}

country_event = {
	id = pse.207
	title = pse.205.title
	desc = pse.207.desc
	picture = GFX_evt_treasure_pile
	show_sound = button_senate_floor_propose_law
	is_triggered_only = yes
	option = {
		name = GOOD
	}
}

#Knowledge
country_event = {
	id = pse.210
	title = pse.210.title
	desc = pse.210.desc
	desc = pse.210.desc2
	desc = pse.210.desc3
	picture = GFX_evt_surreal_visions
	show_sound = event_sls_eureka
	is_triggered_only = yes
	immediate = {
		while = {
			count = 5
			random_list = {
				1 = {
					add_random_research_option = {
						area = physics
						add_progress = 0.25
						ignore_prereqs = yes
					}
				}
				1 = {
					add_random_research_option = {
						area = society
						add_progress = 0.25
						ignore_prereqs = yes
					}
				}
				1 = {
					add_random_research_option = {
						area = engineering
						add_progress = 0.25
						ignore_prereqs = yes
					}
				}
			}
			
			random_list = {
				1 = {
					modifier = {
						factor = 0
						is_researching_technology = tech_repeatable_improved_tile_mineral_output
					}
					give_technology = {
						tech = tech_repeatable_improved_tile_mineral_output
						message = yes
					}
				}
				1 = {
					modifier = {
						factor = 0
						is_researching_technology = tech_repeatable_improved_military_station_damage
					}
					give_technology = {
						tech = tech_repeatable_improved_military_station_damage
						message = yes
					}
				}
				1 = {
					modifier = {
						factor = 0
						is_researching_technology = tech_repeatable_improved_military_station_health
					}
					give_technology = {
						tech = tech_repeatable_improved_military_station_health
						message = yes
					}
				}
				1 = {
					modifier = {
						factor = 0
						is_researching_technology = tech_repeatable_improved_armor_output
					}
					give_technology = {
						tech = tech_repeatable_improved_armor_output
						message = yes
					}
				}
				1 = {
					modifier = {
						factor = 0
						is_researching_technology = tech_repeatable_weapon_type_explosive_damage
					}
					give_technology = {
						tech = tech_repeatable_weapon_type_explosive_damage
						message = yes
					}
				}
				1 = {
					modifier = {
						factor = 0
						is_researching_technology = tech_repeatable_weapon_type_explosive_fire_rate
					}
					give_technology = {
						tech = tech_repeatable_weapon_type_explosive_fire_rate
						message = yes
					}
				}
				1 = {
					modifier = {
						factor = 0
						is_researching_technology = tech_repeatable_weapon_type_kinetic_damage
					}
					give_technology = {
						tech = tech_repeatable_weapon_type_kinetic_damage
						message = yes
					}
				}
				1 = {
					modifier = {
						factor = 0
						is_researching_technology = tech_repeatable_weapon_type_kinetic_fire_rate
					}
					give_technology = {
						tech = tech_repeatable_weapon_type_kinetic_fire_rate
						message = yes
					}
				}
				1 = {
					modifier = {
						factor = 0
						is_researching_technology = tech_repeatable_weapon_type_strike_craft_fire_damage
					}
					give_technology = {
						tech = tech_repeatable_weapon_type_strike_craft_fire_damage
						message = yes
					}
				}
				1 = {
					modifier = {
						factor = 0
						is_researching_technology = tech_repeatable_weapon_type_strike_craft_fire_rate
					}
					give_technology = {
						tech = tech_repeatable_weapon_type_strike_craft_fire_rate
						message = yes
					}
				}

				1 = {
					modifier = {
						factor = 0
						is_researching_technology = tech_repeatable_improved_tile_energy_output
					}
					give_technology = {
						tech = tech_repeatable_improved_tile_energy_output
						message = yes
					}
				}
				1 = {
					modifier = {
						factor = 0
						is_researching_technology = tech_repeatable_improved_shield_output
					}
					give_technology = {
						tech = tech_repeatable_improved_shield_output
						message = yes
					}
				}
				1 = {
					modifier = {
						factor = 0
						is_researching_technology = tech_repeatable_weapon_type_energy_damage
					}
					give_technology = {
						tech = tech_repeatable_weapon_type_energy_damage
						message = yes
					}
				}
				1 = {
					modifier = {
						factor = 0
						is_researching_technology = tech_repeatable_weapon_type_energy_fire_rate
					}
					give_technology = {
						tech = tech_repeatable_weapon_type_energy_fire_rate
						message = yes
					}
				}


				1 = {
					modifier = {
						factor = 0
						is_researching_technology = tech_repeatable_improved_tile_food_output
					}
					give_technology = {
						tech = tech_repeatable_improved_tile_food_output
						message = yes
					}
				}
				1 = {
					modifier = {
						factor = 0
						is_researching_technology = tech_repeatable_improved_core_system_cap
					}
					give_technology = {
						tech = tech_repeatable_improved_core_system_cap
						message = yes
					}
				}
				1 = {
					modifier = {
						factor = 0
						is_researching_technology = tech_repeatable_improved_edict_length
					}
					give_technology = {
						tech = tech_repeatable_improved_edict_length
						message = yes
					}
				}
				1 = {
					modifier = {
						factor = 0
						is_researching_technology = tech_repeatable_improved_army_damage
					}
					give_technology = {
						tech = tech_repeatable_improved_army_damage
						message = yes
					}
				}
				1 = {
					modifier = {
						factor = 0
						is_researching_technology = tech_repeatable_improved_army_health
					}
					give_technology = {
						tech = tech_repeatable_improved_army_health
						message = yes
					}
				}
				1 = {
					modifier = {
						factor = 0
						is_researching_technology = tech_repeatable_improved_leader_life_span
					}
					give_technology = {
						tech = tech_repeatable_improved_leader_life_span
						message = yes
					}
				}
			}
		}
	}
	option = {
		name = BREAKTHROUGH
	}
}

#bribe the convenant so negative events won't trigger for a while
country_event = {
	id = pse.215
	title = pse.215.title
	desc = pse.215.desc
	desc = pse.215.desc2
	picture = GFX_evt_surreal_visions
	show_sound = event_psionic
	is_triggered_only = yes
	after = {
		
	}
	immediate = {
		remove_country_flag = covenant_side_effects
		set_timed_country_flag = {
			flag = covenant_side_effects
			days = 3630
		}
		add_modifier = {
			modifier = MOD_pse_power_covenant_all_bribe_effect
			days = 3600
		}
	}
	option = {
		name = GOOD
		tooltip = {
			add_modifier = {
				modifier = MOD_pse_power_covenant_all_bribe_effect
				days = 3600
			}
		}
	}
}

country_event = {
	id = pse.220
	title = pse.220.title
	desc = {
		trigger = {
			text = pse.220.desc
			text = newline
			hidden:root = {
				success_text = {
					text = pse.220.desc_no_psionic
					NOT = {
						has_country_flag = pse_access_power
					}
				}
				success_text = {
					text = pse.220.desc_psionic
					has_country_flag = pse_access_power
				}
			}
		}
	}
	picture = GFX_evt_smear_campaign
	show_sound = event_assembly_fight
	is_triggered_only = yes
	location = event_target:pse_country
	immediate = {
		
	}
	option = {
		name = pse.220.a
		tooltip = {
			add_modifier = {
				modifier = MOD_pse_power_break_stability_modifier_effect
				days = 1800
			}
		}
		add_opinion_modifier = {
			who = event_target:pse_country
			modifier = opinion_pse_stirring_us
		}
	}
}

country_event = {
	id = pse.221
	title = pse.220.title
	desc = pse.221.desc
	picture = GFX_evt_smear_campaign
	show_sound = event_assembly_fight
	is_triggered_only = yes
	option = {
		name = UNFORTUNATE
		tooltip = {
			add_modifier = {
				modifier = MOD_pse_power_break_stability_modifier_effect
				days = 1800
			}
		}
	}
}

country_event = {
	id = pse.225
	title = pse.225.title
	desc = {
		trigger = {
			text = pse.225.desc
			text = newline
			hidden:root = {
				success_text = {
					text = pse.220.desc_no_psionic
					NOT = {
						has_country_flag = pse_access_power
					}
				}
				success_text = {
					text = pse.220.desc_psionic
					has_country_flag = pse_access_power
				}
			}
		}
	}
	picture = GFX_evt_civil_action
	show_sound = event_assembly_fight
	is_triggered_only = yes
	location = event_target:pse_country
	immediate = {
		
	}
	option = {
		name = pse.220.a
		tooltip = {
			add_modifier = {
				modifier = MOD_pse_power_break_unity_modifier_effect_pop
				days = 720
			}
			add_modifier = {
				modifier = MOD_pse_power_break_unity_modifier_effect
				days = 1800
			}
		}
		add_opinion_modifier = {
			who = event_target:pse_country
			modifier = opinion_pse_stirring_us
		}
	}
}

country_event = {
	id = pse.226
	title = pse.225.title
	desc = pse.226.desc
	picture = GFX_evt_civil_action
	show_sound = event_assembly_fight
	is_triggered_only = yes
	option = {
		name = UNFORTUNATE
		tooltip = {
			add_modifier = {
				modifier = MOD_pse_power_break_unity_modifier_effect_pop
				days = 720
			}
			add_modifier = {
				modifier = MOD_pse_power_break_unity_modifier_effect
				days = 1800
			}
		}
	}
}
#building collapse event
country_event = {
	id = pse.230
	title = pse.230.title
	desc = {
		trigger = {
			text = pse.230.desc
			text = newline
			hidden:root = {
				success_text = {
					text = pse.220.desc_no_psionic
					NOT = {
						has_country_flag = pse_access_power
					}
				}
				success_text = {
					text = pse.220.desc_psionic
					has_country_flag = pse_access_power
				}
			}
		}
	}
	picture = GFX_evt_collapsing_roof
	show_sound = event_collapsing_ruins
	location = event_target:pse_country
	is_triggered_only = yes
	trigger = {
		NOT = {
			has_country_flag = pse_230_flag
		}
	}

	after = {
		hidden_effect = {
			remove_country_flag = pse_230_flag
		}
	}
	immediate = {
		set_country_flag = pse_230_flag
	}
	option = {
		name = pse.220.a
		custom_tooltip = pse.230.tooltip
		tooltip = {
			add_opinion_modifier = {
				who = event_target:pse_country
				modifier = opinion_pse_bomb_uprooting_our_planet
			}
		}
	}
}

#Gigastructure psy siphon
#Need has_global_flag = gigastructures_enabled
country_event = {
	id = pse.235
	title = pse.235.title
	desc = pse.235.desc
	picture = GFX_evt_psionics
	show_sound = event_psionic
	is_triggered_only = yes
	location = event_target:pse_system
	trigger = {
		has_global_flag = gigastructures_enabled
		has_country_flag = pse_access_power
		OR = {
			has_megastructure = psychic_hypersiphon_1
			has_megastructure = psychic_hypersiphon_2
		}
		
		NOR = {
			has_country_flag = pse_235_happened
			has_country_flag = pse_240_happened
		}
	}
	immediate = {
		random_owned_megastructure = {
			limit = {
				OR = {
					is_megastructure_type = psychic_hypersiphon_1
					is_megastructure_type = psychic_hypersiphon_2
				}
				
			}
			solar_system = {
				save_event_target_as = pse_system
			}
		}
		set_country_flag = pse_235_happened
	}
	option = {
		name = pse.235.a
		custom_tooltip = pse.235.tooltip
	}
}

country_event = {
	id = pse.240
	title = pse.235.title
	desc = pse.240.desc
	picture = GFX_evt_psionics
	show_sound = event_psionic
	is_triggered_only = yes
	location = event_target:pse_system
	trigger = {
		has_global_flag = gigastructures_enabled
		has_country_flag = pse_access_power
		OR = {
			has_megastructure = psychic_hypersiphon_3
			has_megastructure = psychic_hypersiphon_3_aeternum
		}
		NOT = {
			has_country_flag = pse_240_happened
		}
	}
	immediate = {
		random_owned_megastructure = {
			limit = {
				OR = {
					is_megastructure_type = psychic_hypersiphon_3
					is_megastructure_type = psychic_hypersiphon_3_aeternum
				}
			}
			solar_system = {
				save_event_target_as = pse_system
			}
		}
		set_country_flag = pse_240_happened
	}
	option = {
		name = EXCELLENT
		custom_tooltip = pse.240.tooltip
	}
}

country_event = {
	id = pse.245
	title = pse.245.title
	desc = pse.245.desc
	desc = pse.245.desc2
	desc = pse.245.desc3
	picture = GFX_evt_strategic_resources
	show_sound = event_psionic
	is_triggered_only = yes

	trigger = {
		has_global_flag = gigastructures_enabled
	}
	immediate = {
		export_resource_stockpile_to_variable = {
			resource = sr_psionic_sublimate
			variable = pse_sublimate_count
		}
		multiply_variable = {
			which = pse_sublimate_count
			value = 0.1
		}
		set_variable = {
			which = pse_sublimate_int_num
			value = pse_corruption
		}
		random_list = {
			1 = { #15%
				multiply_variable = { 
					which = pse_corruption
					value = 0.85
				}
			}
			1 = { #20%
				multiply_variable = { 
					which = pse_corruption
					value = 0.8
				}
			}
			1 = { #25%
				multiply_variable = { 
					which = pse_corruption
					value = 0.75
				}
			}
			1 = { #30%
				multiply_variable = { 
					which = pse_corruption
					value = 0.7
				}
			}
			1 = { #35%
				multiply_variable = { 
					which = pse_corruption
					value = 0.65
				}
			}
			1 = { #40%
				multiply_variable = { 
					which = pse_corruption
					value = 0.6
				}
			}
			1 = { #45%
				multiply_variable = { 
					which = pse_corruption
					value = 0.55
				}
			}
			1 = { #50%
				multiply_variable = { 
					which = pse_corruption
					value = 0.5
				}
			}
		}
		subtract_variable = {
			which = pse_sublimate_int_num
			value = pse_corruption
		}
		multiply_variable = {
			which = pse_sublimate_int_num
			value = 3
		}
		change_variable = {
			which = pse_sublimate_int_num
			value = pse_sublimate_count
		}
		round_variable = pse_sublimate_int_num
		add_resource = {
			sr_psionic_sublimate = 1
			mult = pse_sublimate_int_num
		}
	}
	after = {
		
		hidden_effect = {
			clear_variable = pse_sublimate_int_num
			clear_variable = pse_sublimate_count
		}
	}
	option = {
		name = EXCELLENT
		custom_tooltip = pse.245.tooltip
	}
}

#Field
country_event = {
	id = pse.250
	hide_window = yes
	is_triggered_only = yes

	trigger = {

	}
	immediate = {
		set_timed_country_flag = {
			flag = ongoing_pse_field
			days = 1800
		} 
		every_system_within_border = {
			limit = {
				NOT = {
					has_star_flag = pse_field_system
				}
			}
			set_timed_star_flag = {
				flag = pse_field_system
				days = 1800
			}
			add_modifier = {
				modifier = MOD_pse_power_galaxy_field_effect_tooltip
				days = 1800
				clear_on_owner_change = yes
			}
			star = {
				create_ambient_object = {
					type = pse_field_effect
					scale = 15
					location = this
					use_3d_location = yes
					entity_offset = { min = 0 max = 0 }
					entity_offset_angle = { min = 0 max = 0 }
					entity_offset_height = { min = -20 max = -20 }
					duration = 1800
				}
				last_created_ambient_object = {
					set_ambient_object_flag = pse_field_object_flag
					set_location = {
						target = prev
						distance = 0
						angle = random
					}
				}
			}
		}
	}
}

# Scope = Fleet
# From = System
fleet_event = {
	id = pse.251
	hide_window = yes
	is_triggered_only = yes
	trigger = {
		from = {
			has_owner = yes
			has_star_flag = pse_field_system
			owner = {
				has_country_flag = ongoing_pse_field
				NOT = {
					is_same_empire = root.owner
				}
				OR = {
					is_berserker_to = root.owner
					is_belligerent_to = root.owner
					is_angry_to = root.owner
					is_domineering_to = root.owner
					is_unfriendly_to = root.owner
					is_disloyal_to = root.owner
					is_hostile_to = root.owner
					is_hostile = root.owner
					is_rival = root.owner
					is_harming_relations_with = root.owner
					is_at_war_with = root.owner
				}
			}
		}
	}
	immediate = {
		add_modifier = {
			modifier = MOD_pse_power_galaxy_field_effect
			days = 30
		}
		every_owned_ship = {
			create_ambient_object = {
				type = pse_travel_effect
				scale = 1
				location = this
				use_3d_location = yes
				entity_offset = { min = 0 max = 0 }
				entity_offset_angle = { min = 0 max = 0 }
				entity_offset_height = { min = 0 max = 0 }
				entity_scale_to_size = yes
				duration = 15
			}
		}
	}
}

# Scope = Fleet
# From = System
#Field but no owner
fleet_event = {
	id = pse.252
	hide_window = yes
	is_triggered_only = yes
	trigger = {
		from = {
			has_owner = no
			has_star_flag = pse_field_system
		}
	}
	immediate = {
		add_modifier = {
			modifier = MOD_pse_power_galaxy_field_effect
			days = 30
		}
		every_owned_ship = {
			create_ambient_object = {
				type = pse_travel_effect
				scale = 1
				location = this
				use_3d_location = yes
				entity_offset = { min = 0 max = 0 }
				entity_offset_angle = { min = 0 max = 0 }
				entity_offset_height = { min = 0 max = 0 }
				entity_scale_to_size = yes
				duration = 15
			}
		}
	}
}

# From = system
# FromFrom = country (new owner)
# This = country (previous owner)
country_event = {
	id = pse.253
	is_triggered_only = yes
	hide_window = yes
	trigger = {
		from = {
			has_star_flag = pse_field_system
		}
	}
	immediate = {
		from = {
			remove_star_flag = pse_field_system
			random_system_ambient_object = {
				limit = {
					has_ambient_object_flag = pse_field_object_flag
				}
				destroy_ambient_object = this
			}
		}
	}
}

#Field expired
country_event = {
	id = pse.254
	is_triggered_only = yes
	hide_window = yes
	immediate = {
		create_message = { 
			type = PSE_EXPIRED
			localization = pse_power_botton_galaxy_field_effect_over
			days = 60
			target = root
		}
	}
}

#unity expired
country_event = {
	id = pse.255
	is_triggered_only = yes
	hide_window = yes
	immediate = {
		create_message = { 
			type = PSE_EXPIRED
			localization = pse_power_botton_break_unity_effect_over
			days = 60
			target = root
		}
	}
}

#stabiliy expired
country_event = {
	id = pse.256
	is_triggered_only = yes
	hide_window = yes
	immediate = {
		create_message = { 
			type = PSE_EXPIRED
			localization = pse_power_botton_break_stability_effect_over
			days = 60
			target = root
		}
	}
}

#ship from beyond
country_event = {
	id = pse.260
	is_triggered_only = yes
	hide_window = yes
	location = event_target:pse_location
	immediate = {
		random_system_within_border = {
			limit = {
				is_capital_system = yes
			}
			save_event_target_as = pse_location
		}
		create_fleet_from_naval_cap = {
			fraction = 0.15
			ship_owner_type = country
		}
		event_target:pse_location = {
			random_system_planet = {
				last_created_fleet = {
					set_location = prev
				}
			}
		}
	}
}

#Patron for free gateway event as they ask for help, unless you are the one trying to destroy them
country_event = {
	id = pse.265
	title = pse.265.title
	desc = pse.265.desc
	picture = GFX_evt_surreal_visions
	show_sound = event_psionic
	is_triggered_only = yes
	location = event_target:pse_system
	trigger = {
		NOT = {
			has_country_flag = pse_patron_doubled
		}
		any_country = {
			NOT = {
				is_same_empire = root
			}
			has_country_flag = built_crisis_sphere
			OR = {
				has_megastructure = crisis_sphere_0
				has_megastructure = crisis_sphere_1
				has_megastructure = crisis_sphere_2
				has_megastructure = crisis_sphere_3
				has_megastructure = crisis_sphere_4
			}
		}
		NOT = {
			has_country_flag = built_crisis_sphere
		}
		has_country_flag = has_shroud_patron
#		has_country_flag = crisis_psionic_alert
		OR = {
			has_modifier = covenant_whisperers_in_the_void
			has_modifier = covenant_eater_of_worlds
			has_modifier = covenant_instrument_of_desire
			has_modifier = covenant_composer_of_strands
		}
	}
	immediate = {
		remove_country_flag = covenant_side_effects
		set_country_flag = covenant_side_effects
		random_country = {
			limit = {
				NOT = {
					is_same_empire = root
				}
				OR = {
					has_megastructure = crisis_sphere_0
					has_megastructure = crisis_sphere_1
					has_megastructure = crisis_sphere_2
					has_megastructure = crisis_sphere_3
					has_megastructure = crisis_sphere_4
				}
				has_country_flag = built_crisis_sphere
			}
			save_event_target_as = pse_target_country
			random_system_within_border = {
				limit = {
					OR = {
						has_megastructure = crisis_sphere_0
						has_megastructure = crisis_sphere_1
						has_megastructure = crisis_sphere_2
						has_megastructure = crisis_sphere_3
						has_megastructure = crisis_sphere_4
					}	
				}
				save_event_target_as = pse_system
			}
		}
		set_country_flag = pse_patron_doubled
	}
	option = {
		name = pse.265.a
		switch = {
			trigger = has_modifier
			covenant_whisperers_in_the_void = {
				add_modifier = {
					modifier = MOD_pse_power_patron_double_knowledge_effect
					days = -1
				} 
			}
			covenant_eater_of_worlds = {
				add_modifier = {
					modifier = MOD_pse_power_patron_double_eater_effect
					days = -1
				} 
			}
			covenant_instrument_of_desire = {
				add_modifier = {
					modifier = MOD_pse_power_patron_double_desire_effect
					days = -1
				} 
			}
			covenant_composer_of_strands = {
				add_modifier = {
					modifier = MOD_pse_power_patron_double_composer_effect
					days = -1
				} 
			}
		}
	}
}

#
country_event = {
	id = pse.266
	hide_window = yes
	is_triggered_only = yes
	trigger = {
		has_modifier = MOD_pse_power_patron_double_eater_effect
	}
	immediate = {
		remove_modifier = MOD_pse_power_patron_double_eater_effect_mult1
		remove_modifier = MOD_pse_power_patron_double_eater_effect_mult2
		remove_modifier = MOD_pse_power_patron_double_eater_effect_mult3
		remove_modifier = MOD_pse_power_patron_double_eater_effect_mult4
		remove_modifier = MOD_pse_power_patron_double_eater_effect_mult5
		remove_modifier = MOD_pse_power_patron_double_eater_effect_mult6
		remove_modifier = MOD_pse_power_patron_double_eater_effect_mult7
		remove_modifier = MOD_pse_power_patron_double_eater_effect_mult8
		remove_modifier = MOD_pse_power_patron_double_eater_effect_mult9
		remove_modifier = MOD_pse_power_patron_double_eater_effect_mult10
		if = {
			limit = {
				check_variable = {
					which = pse_cooldown_power_count
					value = 1
				}
			}
			add_modifier = {
				modifier = MOD_pse_power_patron_double_eater_effect_mult1
				days = -1
			}
		}
		else_if = {
			limit = {
				check_variable = {
					which = pse_cooldown_power_count
					value = 2
				}
			}
			add_modifier = {
				modifier = MOD_pse_power_patron_double_eater_effect_mult2
				days = -1
			}
		}
		else_if = {
			limit = {
				check_variable = {
					which = pse_cooldown_power_count
					value = 3
				}
			}
			add_modifier = {
				modifier = MOD_pse_power_patron_double_eater_effect_mult3
				days = -1
			}
		}
		else_if = {
			limit = {
				check_variable = {
					which = pse_cooldown_power_count
					value = 4
				}
			}
			add_modifier = {
				modifier = MOD_pse_power_patron_double_eater_effect_mult4
				days = -1
			}
		}
		else_if = {
			limit = {
				check_variable = {
					which = pse_cooldown_power_count
					value = 5
				}
			}
			add_modifier = {
				modifier = MOD_pse_power_patron_double_eater_effect_mult5
				days = -1
			}
		}
		else_if = {
			limit = {
				check_variable = {
					which = pse_cooldown_power_count
					value = 6
				}
			}
			add_modifier = {
				modifier = MOD_pse_power_patron_double_eater_effect_mult6
				days = -1
			}
		}
		else_if = {
			limit = {
				check_variable = {
					which = pse_cooldown_power_count
					value = 7
				}
			}
			add_modifier = {
				modifier = MOD_pse_power_patron_double_eater_effect_mult7
				days = -1
			}
		}
		else_if = {
			limit = {
				check_variable = {
					which = pse_cooldown_power_count
					value = 8
				}
			}
			add_modifier = {
				modifier = MOD_pse_power_patron_double_eater_effect_mult8
				days = -1
			}
		}
		else_if = {
			limit = {
				check_variable = {
					which = pse_cooldown_power_count
					value = 9
				}
			}
			add_modifier = {
				modifier = MOD_pse_power_patron_double_eater_effect_mult9
				days = -1
			}
		}
		else_if = {
			limit = {
				check_variable = {
					which = pse_cooldown_power_count
					value > 9
				}
			}
			add_modifier = {
				modifier = MOD_pse_power_patron_double_eater_effect_mult10
				days = -1
			}
		}
	}
}

country_event = {
	id = pse.267
	hide_window = yes
	is_triggered_only = yes
	trigger = {
		has_modifier = MOD_pse_power_patron_double_desire_effect
	}
	immediate = {
		remove_modifier = MOD_pse_power_patron_double_desire_effect_mult1
		remove_modifier = MOD_pse_power_patron_double_desire_effect_mult2
		remove_modifier = MOD_pse_power_patron_double_desire_effect_mult3
		remove_modifier = MOD_pse_power_patron_double_desire_effect_mult4
		remove_modifier = MOD_pse_power_patron_double_desire_effect_mult5
		remove_modifier = MOD_pse_power_patron_double_desire_effect_mult6
		remove_modifier = MOD_pse_power_patron_double_desire_effect_mult7
		remove_modifier = MOD_pse_power_patron_double_desire_effect_mult8
		remove_modifier = MOD_pse_power_patron_double_desire_effect_mult9
		remove_modifier = MOD_pse_power_patron_double_desire_effect_mult10
		if = {
			limit = {
				check_variable = {
					which = pse_cooldown_power_count
					value = 1
				}
			}
			add_modifier = {
				modifier = MOD_pse_power_patron_double_desire_effect_mult1
				days = -1
			}
		}
		else_if = {
			limit = {
				check_variable = {
					which = pse_cooldown_power_count
					value = 2
				}
			}
			add_modifier = {
				modifier = MOD_pse_power_patron_double_desire_effect_mult2
				days = -1
			}
		}
		else_if = {
			limit = {
				check_variable = {
					which = pse_cooldown_power_count
					value = 3
				}
			}
			add_modifier = {
				modifier = MOD_pse_power_patron_double_desire_effect_mult3
				days = -1
			}
		}
		else_if = {
			limit = {
				check_variable = {
					which = pse_cooldown_power_count
					value = 4
				}
			}
			add_modifier = {
				modifier = MOD_pse_power_patron_double_desire_effect_mult4
				days = -1
			}
		}
		else_if = {
			limit = {
				check_variable = {
					which = pse_cooldown_power_count
					value = 5
				}
			}
			add_modifier = {
				modifier = MOD_pse_power_patron_double_desire_effect_mult5
				days = -1
			}
		}
		else_if = {
			limit = {
				check_variable = {
					which = pse_cooldown_power_count
					value = 6
				}
			}
			add_modifier = {
				modifier = MOD_pse_power_patron_double_desire_effect_mult6
				days = -1
			}
		}
		else_if = {
			limit = {
				check_variable = {
					which = pse_cooldown_power_count
					value = 7
				}
			}
			add_modifier = {
				modifier = MOD_pse_power_patron_double_desire_effect_mult7
				days = -1
			}
		}
		else_if = {
			limit = {
				check_variable = {
					which = pse_cooldown_power_count
					value = 8
				}
			}
			add_modifier = {
				modifier = MOD_pse_power_patron_double_desire_effect_mult8
				days = -1
			}
		}
		else_if = {
			limit = {
				check_variable = {
					which = pse_cooldown_power_count
					value = 9
				}
			}
			add_modifier = {
				modifier = MOD_pse_power_patron_double_desire_effect_mult9
				days = -1
			}
		}
		else_if = {
			limit = {
				check_variable = {
					which = pse_cooldown_power_count
					value > 9
				}
			}
			add_modifier = {
				modifier = MOD_pse_power_patron_double_desire_effect_mult10
				days = -1
			}
		}
	}
}

#Instant build
planet_event = {
	id = pse.270
	hide_window = yes
	is_triggered_only = yes
	pre_triggers = {
		has_owner = yes
	}
	trigger = {		
		owner = {
			has_modifier = MOD_pse_power_planet_build_modifier_fake
			check_variable = {
				which = pse_instant_build_num
				value > 0
			}
			
		}
	}
	immediate = {
		owner = {
			change_variable = {
				which = pse_instant_build_num
				value = -1
			}
			if = {
				limit = {
					check_variable = {
						which = pse_instant_build_num
						value = 0
					}
				}
				remove_modifier = MOD_pse_power_planet_build_modifier_fake
				create_message = { 
					type = PSE_EXPIRED
					localization = pse_power_botton_planet_build_effect_over
					days = 60
					target = root
				}
			}
		}
	}
}

#Undo
planet_event = {
	id = pse.271
	hide_window = yes
	is_triggered_only = yes
	pre_triggers = {
		has_owner = yes
	}
	trigger = {
		owner = {
			has_modifier = MOD_pse_power_planet_build_modifier_fake
			check_variable = {
				which = pse_instant_build_num
				value < 20
			}
		}
	}
	immediate = {
		owner = {
			change_variable = {
				which = pse_instant_build_num
				value = 1
			}
		}
	}
}


#Corruption maxed and keep happening until below 100
country_event = {
	id = pse.500
	title = pse.500.title
	desc = pse.500.desc
	picture = GFX_evt_large_explosion
	show_sound = event_super_explosion
	is_triggered_only = yes
	trigger = {
		check_variable = {
			which = pse_corruption
			value > 100
		}
	}
	after = {
		custom_tooltip = pse.104.tooltip
		if = {
			limit = {
				check_variable = {
					which = pse_pop
					value > 0
				}
			}
			custom_tooltip = pse.500.pop
		}
		if = {
			limit = {
				check_variable = {
					which = pse_ship
					value > 0
				}
			}
			custom_tooltip = pse.500.ship
		}
		if = {
			limit = {
				has_country_flag = shroud_neg_happiness
			}
			tooltip = {
				add_modifier = {
					modifier = shroud_neg_happiness
					days = 1800
				}
			}
		}
		if = {
			limit = {
				has_country_flag = shroud_neg_ethic
			}
			tooltip = {
				add_modifier = {
					modifier = shroud_neg_ethic
					days = 1800
				}
			}
		}
		if = {
			limit = {
				has_country_flag = shroud_neg_armor
			}
			tooltip = {
				add_modifier = {
					modifier = shroud_neg_armor
					days = 1800
				}
			}
		}
		if = {
			limit = {
				has_country_flag = shroud_neg_growth
			}
			tooltip = {
				add_modifier = {
					modifier = shroud_neg_growth
					days = 1800
				}
			}
		}
		if = {
			limit = {
				has_country_flag = shroud_neg_research
			}
			tooltip = {
				add_modifier = {
					modifier = shroud_neg_research
					days = 1800
				}
			}
		}
		if = {
			limit = {
				has_country_flag = shroud_neg_influence
			}
			tooltip = {
				add_modifier = {
					modifier = shroud_neg_influence
					days = 1800
				}
			}
		}
		if = {
			limit = {
				has_country_flag = shroud_neg_unity
			}
			tooltip = {
				add_modifier = {
					modifier = shroud_neg_unity
					days = 1800
				}
			}
		}
		if = {
			limit = {
				has_country_flag = shroud_neg_speed
			}
			tooltip = {
				add_modifier = {
					modifier = shroud_neg_speed
					days = 1800
				}
			}
		}
		if = {
			limit = {
				has_country_flag = shroud_neg_morale
			}
			tooltip = {
				add_modifier = {
					modifier = shroud_neg_morale
					days = 1800
				}
			}
		}
		if = {
			limit = {
				has_country_flag = shroud_neg_sensors
			}
			tooltip = {
				add_modifier = {
					modifier = shroud_neg_sensors
					days = 1800
				}
			}
		}
		hidden_effect = {
			remove_country_flag = pse.500_meme
			remove_country_flag = shroud_neg_happiness
			remove_country_flag = shroud_neg_ethic
			remove_country_flag = shroud_neg_armor
			remove_country_flag = shroud_neg_growth
			remove_country_flag = shroud_neg_research
			remove_country_flag = shroud_neg_influence
			remove_country_flag = shroud_neg_unity
			remove_country_flag = shroud_neg_speed
			remove_country_flag = shroud_neg_morale
			remove_country_flag = shroud_neg_sensors
			set_variable = {
				which = pse_corruption_count
				value = 0
			}
		}
	}
	immediate = {
		random_list = {
			95 = {}
			5 = {
				set_country_flag = pse.500_meme
			}
		}
		set_variable = {
			which = pse_ship
			value = 0
		}
		set_variable = {
			which = pse_pop
			value = 0
		}
		set_variable = {
			which = pse_energy
			value = 0
		}
		set_variable = {
			which = pse_minerals
			value = 0
		}
		set_variable = {
			which = pse_food
			value = 0
		}
		set_variable = {
			which = pse_alloys
			value = 0
		}
		set_variable = {
			which = pse_consumer_goods
			value = 0
		}
		set_variable = {
			which = pse_influence
			value = 0
		}
		set_variable = {
			which = pse_unity
			value = 0
		}
		set_variable = {
			which = pse_rare_crystals
			value = 0
		}
		set_variable = {
			which = pse_exotic_gases
			value = 0
		}
		set_variable = {
			which = pse_volatile_motes
			value = 0
		}
		set_variable = {
			which = pse_sr_dark_matter
			value = 0
		}
		set_variable = {
			which = pse_sr_living_metal
			value = 0
		}
		set_variable = {
			which = pse_minor_artifacts
			value = 0
		}
		every_owned_pop = {
			limit = {
				planet = {
					num_pops > 1
					is_occupied_flag = no
					is_under_colonization = no
				}
			}
			random_list = {
				9 = {}
				1 = {
					kill_pop = yes
					root = {
						change_variable = {
							which = pse_pop
							value = 1
						}
					}
				}
			}
	
		}
		while = {
			limit = {
				check_variable = {
					which = pse_corruption
					value > 100
				}
			}
			if = { #Lose some resource
				limit = {
					resource_stockpile_compare = {
						resource = energy
						value > 0
					}
				}
				random = {
					chance = 50
					add_resource = {
						energy = -15
					}
					change_variable = {
						which = pse_energy
						value = -15
					}
					change_variable = {
						which = pse_corruption_count
						value = 0.05
					}
				}
				random = {
					chance = 50
					add_resource = {
						energy = -66
					}
					change_variable = {
						which = pse_energy
						value = -66
					}
					change_variable = {
						which = pse_corruption_count
						value = 0.1
					}
				}
				if = {
					limit = {
						resource_stockpile_compare = {
							resource = energy
							value > 5000
						}
					}
					random = {
						chance = 50
						add_resource = {
							energy = -123
						}
						change_variable = {
							which = pse_energy
							value = -123
						}
						change_variable = {
							which = pse_corruption_count
							value = 0.15
						}
					}
					random = {
						chance = 50
						add_resource = {
							energy = -150
						}
						change_variable = {
							which = pse_energy
							value = -150
						}
						change_variable = {
							which = pse_corruption_count
							value = 0.2
						}
					}
				}
			}
			if = { #Lose some resource
				limit = {
					resource_stockpile_compare = {
						resource = minerals
						value > 0
					}
				}
				random = {
					chance = 50
					add_resource = {
						minerals = -15
					}
					change_variable = {
						which = pse_minerals
						value = -15
					}
					change_variable = {
						which = pse_corruption_count
						value = 0.05
					}
				}
				random = {
					chance = 50
					add_resource = {
						minerals = -66
					}
					change_variable = {
						which = pse_minerals
						value = -66
					}
					change_variable = {
						which = pse_corruption_count
						value = 0.1
					}
				}
				if = {
					limit = {
						resource_stockpile_compare = {
							resource = minerals
							value > 5000
						}
					}
					random = {
						chance = 50
						add_resource = {
							minerals = -123
						}
						change_variable = {
							which = pse_minerals
							value = -123
						}
						change_variable = {
							which = pse_corruption_count
							value = 0.15
						}
					}
					random = {
						chance = 50
						add_resource = {
							minerals = -150
						}
						change_variable = {
							which = pse_minerals
							value = -150
						}
						change_variable = {
							which = pse_corruption_count
							value = 0.2
						}
					}
				}
			}
			if = { #Lose some resource
				limit = {
					resource_stockpile_compare = {
						resource = food
						value > 0
					}
				}
				random = {
					chance = 50
					add_resource = {
						food = -15
					}
					change_variable = {
						which = pse_food
						value = -15
					}
					change_variable = {
						which = pse_corruption_count
						value = 0.05
					}
				}
				random = {
					chance = 50
					add_resource = {
						food = -66
					}
					change_variable = {
						which = pse_food
						value = -66
					}
					change_variable = {
						which = pse_corruption_count
						value = 0.1
					}
				}
				if = {
					limit = {
						resource_stockpile_compare = {
							resource = food
							value > 5000
						}
					}
					random = {
						chance = 50
						add_resource = {
							food = -123
						}
						change_variable = {
							which = pse_food
							value = -123
						}
						change_variable = {
							which = pse_corruption_count
							value = 0.15
						}
					}
					random = {
						chance = 50
						add_resource = {
							food = -150
						}
						change_variable = {
							which = pse_food
							value = -150
						}
						change_variable = {
							which = pse_corruption_count
							value = 0.2
						}
					}
				}
			}
			if = { #Lose some resource
				limit = {
					resource_stockpile_compare = {
						resource = alloys
						value > 0
					}
				}
				random = {
					chance = 50
					add_resource = {
						alloys = -15
					}
					change_variable = {
						which = pse_alloys
						value = -15
					}
					change_variable = {
						which = pse_corruption_count
						value = 0.05
					}
				}
				random = {
					chance = 50
					add_resource = {
						alloys = -66
					}
					change_variable = {
						which = pse_alloys
						value = -66
					}
					change_variable = {
						which = pse_corruption_count
						value = 0.1
					}
				}
				if = {
					limit = {
						resource_stockpile_compare = {
							resource = alloys
							value > 5000
						}
					}
					random = {
						chance = 50
						add_resource = {
							alloys = -123
						}
						change_variable = {
							which = pse_alloys
							value = -123
						}
						change_variable = {
							which = pse_corruption_count
							value = 0.15
						}
					}
					random = {
						chance = 50
						add_resource = {
							alloys = -150
						}
						change_variable = {
							which = pse_alloys
							value = -150
						}
						change_variable = {
							which = pse_corruption_count
							value = 0.2
						}
					}
				}
			}
			if = { #Lose some resource
				limit = {
					resource_stockpile_compare = {
						resource = consumer_goods
						value > 0
					}
				}
				random = {
					chance = 50
					add_resource = {
						consumer_goods = -15
					}
					change_variable = {
						which = pse_consumer_goods
						value = -15
					}
					change_variable = {
						which = pse_corruption_count
						value = 0.05
					}
				}
				random = {
					chance = 50
					add_resource = {
						consumer_goods = -66
					}
					change_variable = {
						which = pse_consumer_goods
						value = -66
					}
					change_variable = {
						which = pse_corruption_count
						value = 0.1
					}
				}
				if = {
					limit = {
						resource_stockpile_compare = {
							resource = consumer_goods
							value > 5000
						}
					}
					random = {
						chance = 50
						add_resource = {
							consumer_goods = -123
						}
						change_variable = {
							which = pse_consumer_goods
							value = -123
						}
						change_variable = {
							which = pse_corruption_count
							value = 0.15
						}
					}
					random = {
						chance = 50
						add_resource = {
							consumer_goods = -150
						}
						change_variable = {
							which = pse_consumer_goods
							value = -150
						}
						change_variable = {
							which = pse_corruption_count
							value = 0.2
						}
					}
				}
			}
			if = { #Lose some resource
				limit = {
					resource_stockpile_compare = {
						resource = influence
						value > 0
					}
				}
				random = {
					chance = 50
					add_resource = {
						influence = -2
					}
					change_variable = {
						which = pse_influence
						value = -2
					}
					change_variable = {
						which = pse_corruption_count
						value = 0.05
					}
				}
				random = {
					chance = 50
					add_resource = {
						influence = -3
					}
					change_variable = {
						which = pse_influence
						value = -3
					}
					change_variable = {
						which = pse_corruption_count
						value = 0.1
					}
				}
				if = {
					limit = {
						resource_stockpile_compare = {
							resource = influence
							value > 500
						}
					}
					random = {
						chance = 50
						add_resource = {
							influence = -12
						}
						change_variable = {
							which = pse_influence
							value = -12
						}
						change_variable = {
							which = pse_corruption_count
							value = 0.15
						}
					}
					random = {
						chance = 50
						add_resource = {
							influence = -15
						}
						change_variable = {
							which = pse_influence
							value = -15
						}
						change_variable = {
							which = pse_corruption_count
							value = 0.2
						}
					}
				}
			}
			if = { #Lose some resource
				limit = {
					resource_stockpile_compare = {
						resource = unity
						value > 0
					}
				}
				random = {
					chance = 50
					add_resource = {
						unity = -45
					}
					change_variable = {
						which = pse_unity
						value = -45
					}
					change_variable = {
						which = pse_corruption_count
						value = 0.05
					}
				}
				random = {
					chance = 50
					add_resource = {
						unity = -126
					}
					change_variable = {
						which = pse_unity
						value = -126
					}
					change_variable = {
						which = pse_corruption_count
						value = 0.1
					}
				}
				if = {
					limit = {
						resource_stockpile_compare = {
							resource = unity
							value > 5000
						}
					}
					random = {
						chance = 50
						add_resource = {
							unity = -123
						}
						change_variable = {
							which = pse_unity
							value = -123
						}
						change_variable = {
							which = pse_corruption_count
							value = 0.15
						}
					}
					random = {
						chance = 50
						add_resource = {
							unity = -250
						}
						change_variable = {
							which = pse_unity
							value = -250
						}
						change_variable = {
							which = pse_corruption_count
							value = 0.2
						}
					}
				}
			} 
			while = {
				count = 4
				random = { #Lose some ship&stations
					chance = 85
					random_owned_ship = {
						limit = {
							exists = this
						}
						destroy_ship = this
					}
					change_variable = {
						which = pse_ship
						value = 1
					}
					subtract_variable = {
						which = pse_corruption
						value = 0.2
					}
					change_variable = {
						which = pse_corruption_count
						value = 1
					}
				}
			}
			if = { #Lose some leaders
				limit = {
					any_owned_leader = {
						exists = this
						NOR = {
							has_trait = leader_trait_admiral_chosen
							has_trait = leader_trait_scientist_chosen
							has_trait = leader_trait_general_chosen
							has_trait = leader_trait_governor_chosen
							has_trait = leader_trait_ruler_chosen
						}
					}
				}
				random = {
					chance = 25
					random_owned_leader = {
						limit = {
							NOR = {
								has_trait = leader_trait_admiral_chosen
								has_trait = leader_trait_scientist_chosen
								has_trait = leader_trait_general_chosen
								has_trait = leader_trait_governor_chosen
								has_trait = leader_trait_ruler_chosen
							}
						}
						save_event_target_as = pse_leader
						kill_leader = {
							show_notification = no
						}
					}
					create_message = {
						type = LEADER_DEATH
						localization = pse.500.leader_death
						days = 60
						target = THIS
						variable = {
							type = name
							localization = leader_name
							scope = event_target:pse_leader
						}
					}
					subtract_variable = {
						which = pse_corruption
						value = 4
					}
					change_variable = {
						which = pse_corruption_count
						value = 4
					}
				}
			}
			while = {
				count = 2
				random = { #Buildings went ruined
					chance = 25
					random_owned_planet = {
						limit = {
							has_building = yes
							num_pops > 9
							is_under_colonization = no
							is_occupied_flag = no
							NOT = {
								has_planet_flag = pse_power_break_building_planet_flag
							}
						}
						create_message = { 
							type = PLANET_DESTROYED
							localization = pse.500.planet_ruin
							days = 60
							target = root
							variable = {
								type = name
								localization = planet_name
								scope = this
							}
						}
						set_timed_planet_flag = {
							flag = pse_power_break_building_planet_flag
							days = 7
						}
						if = {
							limit = {
								num_pops > 9
								num_pops < 15
							}
							add_modifier = {
								modifier = MOD_pse_power_break_building_modifier_1
								days = 1
							}
							add_planet_devastation = 10
						}
						else_if = {
							limit = {
								num_pops > 14
								num_pops < 25
							}
							add_modifier = {
								modifier = MOD_pse_power_break_building_modifier_2
								days = 1
							}
							add_planet_devastation = 20
						}
						else_if = {
							limit = {
								num_pops > 24
								num_pops < 35
							}
							add_modifier = {
								modifier = MOD_pse_power_break_building_modifier_3
								days = 1
							}
							add_planet_devastation = 30
						}
						else_if = {
							limit = {
								num_pops > 34
								num_pops < 45
							}
							add_modifier = {
								modifier = MOD_pse_power_break_building_modifier_4
								days = 1
							}
							add_planet_devastation = 40
						}
						else_if = {
							limit = {
								num_pops > 44
								num_pops < 55
							}
							add_modifier = {
								modifier = MOD_pse_power_break_building_modifier_5
								days = 1
							}
							add_planet_devastation = 50
						}
						else_if = {
							limit = {
								num_pops > 54
								num_pops < 65
							}
							add_modifier = {
								modifier = MOD_pse_power_break_building_modifier_5
								days = 1
							}
							add_modifier = {
								modifier = MOD_pse_power_break_building_modifier_1
								days = 1
							}
							add_planet_devastation = 55
						}
						else_if = {
							limit = {
								num_pops > 64
								num_pops < 75
							}
							add_modifier = {
								modifier = MOD_pse_power_break_building_modifier_5
								days = 1
							}
							add_modifier = {
								modifier = MOD_pse_power_break_building_modifier_2
								days = 1
							}
							add_planet_devastation = 60
						}
						else_if = {
							limit = {
								num_pops > 74
								num_pops < 85
							}
							add_modifier = {
								modifier = MOD_pse_power_break_building_modifier_5
								days = 1
							}
							add_modifier = {
								modifier = MOD_pse_power_break_building_modifier_3
								days = 1
							}
							add_planet_devastation = 65
						}
						else_if = {
							limit = {
								num_pops > 84
								num_pops < 95
							}
							add_modifier = {
								modifier = MOD_pse_power_break_building_modifier_5
								days = 1
							}
							add_modifier = {
								modifier = MOD_pse_power_break_building_modifier_4
								days = 1
							}
							add_planet_devastation = 70
						}
						else_if = {
							limit = {
								num_pops > 94
							}
							add_modifier = {
								modifier = MOD_pse_power_break_building_modifier_5
								days = 1
							}
							add_modifier = {
								modifier = MOD_pse_power_break_building_modifier_5
								days = 1
							}
							add_planet_devastation = 75
						}
					}
					subtract_variable = {
						which = pse_corruption
						value = 5
					}
					change_variable = {
						which = pse_corruption_count
						value = 5
					}
				}
			}
			
			random = { #Random curses
				chance = 15
				subtract_variable = {
					which = pse_corruption
					value = 5
				}
				change_variable = {
					which = pse_corruption_count
					value = 5
				}
				random_list = {
					1 = {
						modifier = {
							factor = 0
							has_modifier = shroud_neg_happiness
						}
						set_timed_country_flag = {
							flag = shroud_neg_happiness
							days = 30
						}
						add_modifier = {
							modifier = shroud_neg_happiness
							days = 1800
						}
					}
					1 = {
						modifier = {
							factor = 0
							has_modifier = shroud_neg_ethic
						}
						set_timed_country_flag = {
							flag = shroud_neg_ethic
							days = 30
						}
						add_modifier = {
							modifier = shroud_neg_ethic
							days = 1800
						}
					}
					1 = {
						modifier = {
							factor = 0
							has_modifier = shroud_neg_armor
						}
						set_timed_country_flag = {
							flag = shroud_neg_armor
							days = 30
						}
						add_modifier = {
							modifier = shroud_neg_armor
							days = 1800
						}
					}
					1 = {
						modifier = {
							factor = 0
							has_modifier = shroud_neg_growth
						}
						set_timed_country_flag = {
							flag = shroud_neg_growth
							days = 30
						}
						add_modifier = {
							modifier = shroud_neg_growth
							days = 1800
						}
					}
					1 = {
						modifier = {
							factor = 0
							has_modifier = shroud_neg_research
						}
						set_timed_country_flag = {
							flag = shroud_neg_research
							days = 30
						}
						add_modifier = {
							modifier = shroud_neg_research
							days = 1800
						}
					}
					1 = {
						modifier = {
							factor = 0
							has_modifier = shroud_neg_influence
						}
						set_timed_country_flag = {
							flag = shroud_neg_influence
							days = 30
						}
						add_modifier = {
							modifier = shroud_neg_influence
							days = 1800
						}
					}
					1 = {
						modifier = {
							factor = 0
							has_modifier = shroud_neg_unity
						}
						set_timed_country_flag = {
							flag = shroud_neg_unity
							days = 30
						}
						add_modifier = {
							modifier = shroud_neg_unity
							days = 1800
						}
					}
					1 = {
						modifier = {
							factor = 0
							has_modifier = shroud_neg_speed
						}
						set_timed_country_flag = {
							flag = shroud_neg_speed
							days = 30
						}
						add_modifier = {
							modifier = shroud_neg_speed
							days = 1800
						}
					}
					1 = {
						modifier = {
							factor = 0
							has_modifier = shroud_neg_morale
						}
						set_timed_country_flag = {
							flag = shroud_neg_morale
							days = 30
						}
						add_modifier = {
							modifier = shroud_neg_morale
							days = 1800
						}
					}
					1 = {
						modifier = {
							factor = 0
							has_modifier = shroud_neg_sensors
						}
						set_timed_country_flag = {
							flag = shroud_neg_sensors
							days = 30
						}
						add_modifier = {
							modifier = shroud_neg_sensors
							days = 1800
						}
					}
				}
			}
			subtract_variable = {
				which = pse_corruption
				value = 0.3
			}
		}
		divide_variable = {
			which = pse_corruption
			value = 2
		}
		
	}
	option = {
		name = utopia.3335.opt.a
		trigger = {
			check_variable = {
				which = pse_corruption_count
				value < 5
			}
		}
	}
	option = {
		name = utopia.3336.opt.a
		trigger = {
			check_variable = {
				which = pse_corruption_count
				value > 4.99
			}
			check_variable = {
				which = pse_corruption_count
				value < 10
			}
		}
	}
	option = {
		name = utopia.3338.opt.a
		trigger = {
			check_variable = {
				which = pse_corruption_count
				value > 9.99
			}
			check_variable = {
				which = pse_corruption_count
				value < 20
			}
		}
	}
	option = {
		name = utopia.3339.opt.a
		trigger = {
			check_variable = {
				which = pse_corruption_count
				value > 19.99
			}
			check_variable = {
				which = pse_corruption_count
				value < 30
			}
		}
	}
	option = {
		name = utopia.3337.opt.a
		trigger = {
			check_variable = {
				which = pse_corruption_count
				value > 29.99
			}
			check_variable = {
				which = pse_corruption_count
				value < 40
			}
		}
	}
	option = {
		name = colony.107.a
		trigger = {
			check_variable = {
				which = pse_corruption_count
				value > 39.99
			}
		}
	}
	option = {
		name = pse.500.meme
		trigger = {
			has_country_flag = pse.500_meme
		}
	}
}

#POWER CAST GATEWAY
country_event = {
	id = pse.5000
	is_triggered_only = yes
	hide_window = yes
	trigger = {
		
	}
	
	immediate = {
		if = {
			limit = {
				has_modifier = MOD_pse_power_patron_double_eater_effect
			}
			country_event = {
				id = pse.266
			}
		}
		if = {
			limit = {
				has_modifier = MOD_pse_power_patron_double_desire_effect
			}
			country_event = {
				id = pse.267
			}
		}
		if = {
			limit = {
				has_modifier = MOD_pse_power_patron_double_knowledge_effect
			}
			add_monthly_resource_mult = {
				resource = physics_research
				value = 3
			}
			add_monthly_resource_mult = {
				resource = society_research
				value = 3
			}
			add_monthly_resource_mult = {
				resource = engineering_research
				value = 3
			}
		}
		if = {
			limit = {
				has_modifier = MOD_pse_power_patron_double_composer_effect
				any_owned_pop = {
					is_robot_pop = no
				}
			}
			random_list = {
				1 = {
					change_variable = {
						which = pse_population
						value = 1
					}
				}
				1 = {
					change_variable = {
						which = pse_population
						value = 2
					}
				}
			}
			if = {
				limit = {
					NOT = {
						has_country_flag = pse_event_cooldown_flag
					}
				}
				country_event = {
					id = pse.186
				}
			}
			set_timed_country_flag = {
				flag = pse_event_cooldown_flag
				days = 2
			}
		}
		switch = {
			trigger = has_country_flag
			pse_power_leader_find_used_flag = {
				country_event = {
					id = pse.100
				}
#				effect_pse_power_cooldown_3_years = {
#					POWER_MAIN = leader
#					POWER_NAME = find
#				}
			}
			pse_power_leader_exp_up_used_flag = {
				set_timed_country_flag = {
					flag = pse_power_leader_exp_up_effect_flag
					days = 1800
				}
				add_modifier = {
					modifier = MOD_pse_power_leader_exp_up_modifier_fake
					days = 1800
				}
				effect_pse_power_cooldown_5_years = {
					POWER_MAIN = leader
					POWER_NAME = exp_up
				}
			}
			pse_power_leader_tech_used_flag = {
				country_event = {
					id = pse.101
				}
				effect_pse_power_cooldown_10_years = {
					POWER_MAIN = leader
					POWER_NAME = tech
				}
			}
			pse_power_leader_remove_negative_trait_used_flag = {
				set_timed_country_flag = {
					flag = pse_power_leader_remove_negative_trait_effect_flag
					days = 1800
				}
				add_modifier = {
					modifier = MOD_pse_power_leader_remove_negative_trait_modifier_fake
					days = 1800
				}
				effect_pse_power_cooldown_5_years = {
					POWER_MAIN = leader
					POWER_NAME = remove_negative_trait
				}
			}

			pse_power_shroud_boon_used_flag = {
				effect_pse_power_cooldown_5_years = {
					POWER_MAIN = shroud
					POWER_NAME = boon
				}
				random_list = {
					1 = {
						modifier = {
							factor = 0
							has_modifier = shroud_happiness
						}
						country_event = { id = utopia.3030 }
					}
					1 = {
						modifier = {
							factor = 0
							has_modifier = shroud_research_speed
						}
						country_event = { id = utopia.3032 }
					}
					1 = {
						modifier = {
							factor = 0
							has_modifier = shroud_ethic_boost
						}
						country_event = { id = utopia.3036 }
					}
					1 = {
						modifier = {
							factor = 0
							has_modifier = shroud_influence_boost
						}
						country_event = { id = utopia.3037 }
					}
					1 = {
						modifier = {
							factor = 0
							has_modifier = shroud_unity_boost
						}
						country_event = { id = utopia.3038 }
					}
					0 = { #BLOCKED AS IT IS +1S EVENT, ELDERS FAVORITE
						country_event = { id = utopia.3041 }
					}
#					1 = {
#						modifier = {
#							factor = 0
#							has_modifier = shroud_morale
#						}
#						country_event = { id = utopia.3043 }
#					}
					1 = {
						modifier = {
							factor = 0
							has_modifier = shroud_sensors
						}
						country_event = { id = utopia.3044 }
					}
				}
			}
			pse_power_shroud_enter_used_flag = {
				remove_modifier = shroud_cooldown
				remove_modifier = shroud_precog_cooldown
				effect_pse_power_cooldown_5_years = {
					POWER_MAIN = shroud
					POWER_NAME = enter
				}
			}
			pse_power_shroud_cause_left_used_flag = {
				effect_pse_power_cooldown_3_years = {
					POWER_MAIN = shroud
					POWER_NAME = cause_left
				}
				country_event = {
					id = pse.103
				}
			}

			pse_power_planet_unity_used_flag = {
				add_modifier = {
					modifier = MOD_pse_power_planet_unity_modifier
					days = 1800
				}
				effect_pse_power_cooldown_5_years = {
					POWER_MAIN = planet
					POWER_NAME = unity
				}
			}
			pse_power_planet_crime_used_flag = {
				set_timed_country_flag = {
					flag = pse_power_planet_crime_effect_flag
					days = 1800
				}
				add_modifier = {
					modifier = MOD_pse_power_planet_crime_modifier_fake
					days = 1800
				}
				effect_pse_power_cooldown_5_years = {
					POWER_MAIN = planet
					POWER_NAME = crime
				}
			}
			pse_power_planet_ethic_used_flag = {
				set_timed_country_flag = {
					flag = pse_power_planet_ethic_effect_flag
					days = 1800
				}
				add_modifier = {
					modifier = MOD_pse_power_planet_ethic_modifier_fake
					days = 1800
				}
				effect_pse_power_cooldown_5_years = {
					POWER_MAIN = planet
					POWER_NAME = ethic
				}
			}
			pse_power_planet_build_used_flag = {
				add_modifier = {
					modifier = MOD_pse_power_planet_build_modifier_mega
					days = 2
				}
				add_modifier = {
					modifier = MOD_pse_power_planet_build_modifier_fake
					days = -1
				}
				set_variable = {
					which = pse_instant_build_num
					value = 20
				}
				effect_pse_power_cooldown_10_years = {
					POWER_MAIN = planet
					POWER_NAME = build
				}
			}

			pse_power_cleanse_psi_used_flag = {
				change_variable = {
					which = pse_corruption
					value = -20
				}
				effect_pse_power_cooldown_3_years = {
					POWER_MAIN = cleanse
					POWER_NAME = psi
				}
			}
			pse_power_cleanse_cap_used_flag = {
				add_modifier = {
					modifier = MOD_pse_power_cleanse_cap_modifier_fake
					days = 1800
				}
				change_variable = { #ACT AS EFFECT
					which = pse_power_cap
					value = -35
				}
				effect_pse_power_cooldown_10_years = {
					POWER_MAIN = cleanse
					POWER_NAME = cap
				}
			}
			pse_power_cleanse_zro_used_flag = {
				effect_pse_power_cooldown_5_years = {
					POWER_MAIN = cleanse
					POWER_NAME = zro
				}
				while = {
					limit = {
						check_variable = {
							which = pse_corruption_purify_zro_requirement
							value > 0
						}
						resource_stockpile_compare = {
							resource = sr_zro
							value > 0
						}
					}
					subtract_variable = {
						which = pse_corruption_purify_zro_requirement
						value = 20
					}
					add_resource = {
						sr_zro = -20
					}
					change_variable = {
						which = pse_corruption
						value = -1
					}
				}	
			}

			pse_power_cleanse_sublimate_used_flag = {
				country_event = {
					id = pse.245
				}
				effect_pse_power_cooldown_10_years = {
					POWER_MAIN = cleanse
					POWER_NAME = sublimate
				}
			}

			pse_power_summon_spacefaring_used_flag = {
				effect_pse_power_cooldown_5_years = {
					POWER_MAIN = summon
					POWER_NAME = spacefaring
				}
				country_event = { id = utopia.3020 }
			}
			pse_power_summon_avatar_used_flag = {
				effect_pse_power_cooldown_5_years = {
					POWER_MAIN = summon
					POWER_NAME = avatar
				}
				country_event = { id = utopia.3021 }
			}
			pse_power_summon_resource_used_flag = {
				effect_pse_power_cooldown_5_years = {
					POWER_MAIN = summon
					POWER_NAME = resource
				}
				country_event = { id = pse.104 }
			}

			pse_power_combat_boon_used_flag = {
				effect_pse_power_cooldown_5_years = {
					POWER_MAIN = combat
					POWER_NAME = boon
				}
				random_list = {
					1 = {
						modifier = {
							factor = 0
							has_modifier = shroud_ship_upkeep
						}
						country_event = { id = utopia.3031 }
					}
					1 = {
						modifier = {
							factor = 0
							has_modifier = shroud_shield_boost
						}
						country_event = { id = utopia.3033 }
					}
					1 = {
						modifier = {
							factor = 0
							has_modifier = shroud_weapon_boost
						}
						country_event = { id = utopia.3034 }
					}
					1 = {
						modifier = {
							factor = 0
							has_modifier = shroud_firing_rate
						}
						country_event = { id = utopia.3035 }
					}
					1 = {
						modifier = {
							factor = 0
							has_modifier = shroud_evasion
						}
						country_event = { id = utopia.3039 }
					}
					1 = {
						modifier = {
							factor = 0
							has_modifier = shroud_repair
						}
						country_event = { id = utopia.3040 }
					}
					1 = {
						modifier = {
							factor = 0
							has_modifier = shroud_speed
						}
						country_event = { id = utopia.3042 }
					}
				}
			}
			pse_power_combat_range_used_flag = {
				effect_pse_power_cooldown_10_years = {
					POWER_MAIN = combat
					POWER_NAME = range
				}
				add_modifier = {
					modifier = MOD_pse_power_combat_range_modifier_fake
					days = 360
				}
				country_event = { id = pse.105 }
				country_event = { id = pse.117 days = 360 }
			}
			pse_power_combat_arc_used_flag = {
				country_event = {
					id = pse.173
				}
				effect_pse_power_cooldown_10_years = {
					POWER_MAIN = combat
					POWER_NAME = arc
				}
			}
			pse_power_combat_ship_used_flag = {
				effect_pse_power_cooldown_20_years = {
					POWER_MAIN = combat
					POWER_NAME = ship
				}
				add_modifier = {
					modifier = MOD_pse_power_combat_ship_modifier_fake
					days = 100
				}
				country_event = { id = pse.106 }
			}

			pse_power_break_unity_used_flag = {
				add_modifier = {
					modifier = MOD_pse_power_break_unity_modifier_fake
					days = 1800
				}
				country_event = {
					id = pse.118
				}
				country_event = {
					id = pse.255
					days = 1800
				}
				effect_pse_power_cooldown_10_years = {
					POWER_MAIN = break
					POWER_NAME = unity
				}
			}
			pse_power_break_stability_used_flag = {
				add_modifier = {
					modifier = MOD_pse_power_break_stability_modifier_fake
					days = 1800
				}
				country_event = {
					id = pse.119
				}
				country_event = {
					id = pse.256
					days = 1800
				}
				effect_pse_power_cooldown_10_years = {
					POWER_MAIN = break
					POWER_NAME = stability
				}
			}
			pse_power_break_building_used_flag = {
				country_event = {
					id = pse.120
				}
				effect_pse_power_cooldown_10_years = {
					POWER_MAIN = break
					POWER_NAME = building
				}
			}

			pse_power_galaxy_storm_used_flag = {
				event_target:global_event_country = {
					country_event = { id = galactic_features.401 }
				}
				effect_pse_power_cooldown_20_years = {
					POWER_MAIN = galaxy
					POWER_NAME = storm
				}
			}

			pse_power_galaxy_field_used_flag = {
				add_modifier = {
					modifier = MOD_pse_power_galaxy_field_modifier_fake
					days = 1800
				}
				country_event = { id = pse.250 }
				country_event = {
					id = pse.254
					days = 1800
				}
				effect_pse_power_cooldown_20_years = {
					POWER_MAIN = galaxy
					POWER_NAME = field
				}
			}

			pse_power_galaxy_spacefaring_used_flag = {
				country_event = {
					id = pse.125
				}
				effect_pse_power_cooldown_20_years = {
					POWER_MAIN = galaxy
					POWER_NAME = spacefaring
				}
			}
			pse_power_galaxy_cause_used_flag = {
				event_target:global_event_country = {
					country_event = { id = pse.130 }
				}
				effect_pse_power_cooldown_20_years = {
					POWER_MAIN = galaxy
					POWER_NAME = cause
				}
			}

			pse_power_chosen_worship_used_flag = {
				country_event = { id = pse.135 }
				effect_pse_power_cooldown_20_years = {
					POWER_MAIN = chosen
					POWER_NAME = worship
				}
			}
			pse_power_chosen_speed_used_flag = {
				add_modifier = {
					modifier = MOD_pse_power_chosen_speed_modifier_fake
					days = 360
				}
				country_event = { id = pse.140 }
				country_event = {
					id = pse.142
					days = 360
				}
				effect_pse_power_cooldown_20_years = {
					POWER_MAIN = chosen
					POWER_NAME = speed
				}
			}
			pse_power_chosen_shroud_used_flag = {
				country_event = { id = pse.145 }
				effect_pse_power_cooldown_5_years = {
					POWER_MAIN = chosen
					POWER_NAME = shroud
				}
			}
			pse_power_chosen_backstab_used_flag = {
				add_modifier = {
					modifier = MOD_pse_power_chosen_backstab_modifier_fake
					days = 1800
				}
				country_event = {
					id = pse.150
				}
				country_event = {
					id = pse.153
					days = 1800
				}
				effect_pse_power_cooldown_20_years = {
					POWER_MAIN = chosen
					POWER_NAME = backstab
				}
			}
			pse_power_chosen_bomb_used_flag = {
				country_event = { id = pse.160 }
				effect_pse_power_cooldown_20_years = {
					POWER_MAIN = chosen
					POWER_NAME = bomb
				}
			}

			pse_power_covenant_composer_life_used_flag = {
				random_list = {
					3 = {
						country_event = {
							id = pse.180
						}
					}
					0 = {
						modifier = {
							add = 1
							any_owned_leader = {
								has_skill > 4
								OR = {
									has_trait = leader_trait_admiral_psionic
									has_trait = leader_trait_general_psionic
									has_trait = leader_trait_governor_psionic
									has_trait = leader_trait_scientist_psionic
									has_trait = leader_trait_ruler_psionic
								}
								NOT = {
									has_trait = pse_leader_trait_shroud_age
								}
							}
						}
						country_event = {
							id = pse.181
						}
					}
				}
				effect_pse_power_cooldown_3_years = {
					POWER_MAIN = covenant_composer
					POWER_NAME = life
				}
			}
			pse_power_covenant_composer_pop_used_flag = {
				country_event = {
					id = pse.185
				}
				effect_pse_power_cooldown_10_years = {
					POWER_MAIN = covenant_composer
					POWER_NAME = pop
				}
			}
			pse_power_covenant_eater_fleet_used_flag = {
				add_modifier = {
					modifier = MOD_pse_power_covenant_eater_fleet_modifier_effect
					days = 720
				}
				country_event = {
					id = pse.190
					days = 720
				}
				effect_pse_power_cooldown_10_years = {
					POWER_MAIN = covenant_eater
					POWER_NAME = fleet
				}
			}
			pse_power_covenant_eater_army_used_flag = {
				add_modifier = {
					modifier = MOD_pse_power_covenant_eater_army_modifier_effect
					days = 720
				}
				country_event = {
					id = pse.195
					days = 720
				}
				effect_pse_power_cooldown_10_years = {
					POWER_MAIN = covenant_eater
					POWER_NAME = army
				}
			}
			pse_power_covenant_desire_income_used_flag = {
				country_event = {
					id = pse.200
				}
				effect_pse_power_cooldown_10_years = {
					POWER_MAIN = covenant_desire
					POWER_NAME = income
				}
			}
			pse_power_covenant_desire_borrow_used_flag = {
				country_event = {
					id = pse.205
				}
				effect_pse_power_cooldown_10_years = {
					POWER_MAIN = covenant_desire
					POWER_NAME = borrow
				}
			}
			pse_power_covenant_knowledge_tech_used_flag = {
				country_event = {
					id = pse.210
				}
				effect_pse_power_cooldown_10_years = {
					POWER_MAIN = covenant_knowledge
					POWER_NAME = tech
				}
			}
			pse_power_covenant_knowledge_code_used_flag = {
				add_modifier = {
					modifier = MOD_pse_power_covenant_knowledge_code_effect
					days = 1800
				}
				effect_pse_power_cooldown_5_years = {
					POWER_MAIN = covenant_knowledge
					POWER_NAME = code
				}
			}
			pse_power_covenant_all_bribe_used_flag = {
				country_event = {
					id = pse.215
				}
				effect_pse_power_cooldown_10_years = {
					POWER_MAIN = covenant_all
					POWER_NAME = bribe
				}
			}
		}
		
	}
	after = {
		effect_pse_remove_power_used_flag = yes
		remove_country_flag = pse_power_selected_one_of_them
		if = {
			limit = {
				check_variable = {
					which = pse_corruption
					value > 100
				}
			}
			
			country_event = {
				id = pse.500
			}
		}
	}
}

###monthly country pulse
country_event = {
	id = pse.3000
	is_triggered_only = yes
	hide_window = yes
	trigger = {
		has_country_flag = pse_access_power
	}
	immediate = {
		
		if = {
			limit = {
				has_country_flag = pse_has_bomb
				NOT = {
					any_owned_fleet = {
						has_fleet_flag = pse_bomb_fleet
					}
				}
			}
			remove_country_flag = pse_has_bomb
		}
		if = {
			limit = {
				NOT = {
					has_country_flag = pse_has_bomb
				}
				any_owned_fleet = {
					has_fleet_flag = pse_bomb_fleet
				}
			}
			set_country_flag = pse_has_bomb
		}
		if = { #LEADER EXP UP
			limit = {
				has_country_flag = pse_power_leader_exp_up_effect_flag
			}
			every_owned_leader = {
				limit = {
					OR = {
						has_trait = leader_trait_ruler_chosen
						has_trait = leader_trait_admiral_chosen
						has_trait = leader_trait_governor_chosen
						has_trait = leader_trait_general_chosen
						has_trait = leader_trait_admiral_chosen
						has_trait = leader_trait_scientist_chosen
						has_trait = leader_trait_ruler_psionic
						has_trait = leader_trait_admiral_psionic
						has_trait = leader_trait_governor_psionic
						has_trait = leader_trait_general_psionic
						has_trait = leader_trait_admiral_psionic
						has_trait = leader_trait_scientist_psionic
					}
				}
				add_experience = 10
			}
		}
		if = {
			limit = {
				has_technology = tech_pse_circle_1
			}
			change_variable = {
				which = pse_corruption
				value = -0.1
			}
		}
		if = {
			limit = {
				check_variable = {
					which = pse_power
					value = pse_power_cap
				}
				has_technology = tech_pse_circle_1
			}
			if = {
				limit = {
					check_variable = {
						which = pse_monthly_power
						value > 0.9
					}
					check_variable = {
						which = pse_monthly_power
						value < 1.9
					}
				}
				change_variable = {
					which = pse_corruption
					value = -0.05
				}
			}
			if = {
				limit = {
					check_variable = {
						which = pse_monthly_power
						value > 1.9
					}
					check_variable = {
						which = pse_monthly_power
						value < 2.9
					}
				}
				change_variable = {
					which = pse_corruption
					value = -0.1
				}
			}
			if = {
				limit = {
					check_variable = {
						which = pse_monthly_power
						value > 2.9
					}
					check_variable = {
						which = pse_monthly_power
						value < 3.9
					}
				}
				change_variable = {
					which = pse_corruption
					value = -0.15
				}
			}
			if = {
				limit = {
					check_variable = {
						which = pse_monthly_power
						value > 3.9
					}
					check_variable = {
						which = pse_monthly_power
						value < 4.9
					}
				}
				change_variable = {
					which = pse_corruption
					value = -0.2
				}
			}
			if = {
				limit = {
					check_variable = {
						which = pse_monthly_power
						value > 4.9
					}
					check_variable = {
						which = pse_monthly_power
						value < 5.9
					}
				}
				change_variable = {
					which = pse_corruption
					value = -0.25
				}
			}
			if = {
				limit = {
					check_variable = {
						which = pse_monthly_power
						value > 5.9
					}
					check_variable = {
						which = pse_monthly_power
						value < 6.9
					}
				}
				change_variable = {
					which = pse_corruption
					value = -0.3
				}
			}
			if = {
				limit = {
					check_variable = {
						which = pse_monthly_power
						value > 6.9
					}
					check_variable = {
						which = pse_monthly_power
						value < 7.9
					}
				}
				change_variable = {
					which = pse_corruption
					value = -0.35
				}
			}
			if = {
				limit = {
					check_variable = {
						which = pse_monthly_power
						value > 7.9
					}
					check_variable = {
						which = pse_monthly_power
						value < 8.9
					}
				}
				change_variable = {
					which = pse_corruption
					value = -0.4
				}
			}
			if = {
				limit = {
					check_variable = {
						which = pse_monthly_power
						value > 8.9
					}
					check_variable = {
						which = pse_monthly_power
						value < 9.9
					}
				}
				change_variable = {
					which = pse_corruption
					value = -0.45
				}
			}
			if = {
				limit = {
					check_variable = {
						which = pse_monthly_power
						value > 9.9
					}
				}
				change_variable = {
					which = pse_corruption
					value = -0.5
				}
			}
		}
		if = {
			limit = {
				has_modifier = MOD_pse_power_cleanse_cap_modifier_fake
			}
			change_variable = {
				which = pse_corruption
				value = -0.5
			}
		}
		if = {
			limit = {
				check_variable = {
					which = pse_corruption
					value < 0
				}
			}
			set_variable = {
				which = pse_corruption
				value = 0
			}
		}
		if = {
			limit = {
				has_country_flag = pse_power_cleanse_main_selected
			}
			pse_zro_to_purify_corruption_pre_calc = yes
		}
		if = {
			limit = {
				check_variable = {
					which = pse_corruption
					value > 100
				}
			}
			country_event = {
				id = pse.500
			}
		}
	}
}


###UI gateway###
country_event = {
	id = pse.1000
	is_triggered_only = yes
	hide_window = yes
	
	trigger = {
		NOT = {
			has_country_flag = pse_view_opened
		}
	}

	immediate = {
		set_country_flag = pse_view_opened  
		country_event = {
			id = pse.1001
		}
	}

}
###UI###
country_event = {
	id = pse.1001
	is_triggered_only = yes
	show_sound = event_pse_shroud_amb
	diplomatic = yes
	custom_gui = "pse_window"
	picture_event_data = {
		portrait = root.leader
		room = pse_shroud_room
    }

	title = TEST
	desc = ""
	
	trigger = {
	}

	immediate = {
		leader = {
			save_event_target_as = pse_country_ruler
		}
	}

	after = {
		remove_country_flag = pse_view_opened
		hidden_effect = {
            country_event = { #Reset zro calc
                id = pse.1999
            }
            country_event = { #Deselect main
                id = pse.2002
            }  
            country_event = { #Deselect power
                id = pse.2003
            }
            country_event = { #Calc require power cost reset
                id = pse.2005
            }
			if = {
				limit = {
					NOT = {
						has_country_flag = pse_ui_opened_once
					}
				}
				country_event = {
					id = pse.1002
				}
			}
        }
	}

	option = {
		name = OK
		
	}
}

country_event = {
	id = pse.1002
	title = pse.1002.title
	desc = pse.1002.desc
	picture = GFX_evt_psionic_battle
	is_triggered_only = yes
	trigger = {
		NOT = {
			has_country_flag = pse_ui_opened_once
		}
	}
	immediate = {
		set_country_flag = pse_ui_opened_once
	}
	option = {
		name = OK
	}
}

###Zro calc reset
country_event = {
	id = pse.1999
	is_triggered_only = yes
	hide_window = yes
	immediate = {
		effect_pse_reset_zro_discount_calc = yes
	}
}

###Zro discount calc
country_event = {
	id = pse.2001
	is_triggered_only = yes
	hide_window = yes
	immediate = {
		effect_pse_zro_discount_calc = yes
	}
}

###disselect main selection
country_event = {
	id = pse.2002
	is_triggered_only = yes
	hide_window = yes
	immediate = {
		effect_pse_deselect_other_main = yes
	}
}


###disselect power
country_event = {
	id = pse.2003
	is_triggered_only = yes
	hide_window = yes
	immediate = {
        effect_pse_deselect_other_power = yes
	}
}

###power pre cost calc
country_event = {
	id = pse.2004
	is_triggered_only = yes
	hide_window = yes
	immediate = {
		pse_cost_pre_use_power_clac = yes
#		set_country_flag = pse_power_selected_one_of_them
	}
}

###power pre cost calc reset
country_event = {
	id = pse.2005
	is_triggered_only = yes
	hide_window = yes
	immediate = {
        pse_cost_pre_use_power_clac_reset = yes
	}
}

###cleanse zro calc
country_event = {
	id = pse.2006
	is_triggered_only = yes
	hide_window = yes
	immediate = {
        pse_zro_to_purify_corruption_pre_calc = yes
	}
}

###Count back the cooldown power number
country_event = {
	id = pse.2007
	is_triggered_only = yes
	hide_window = yes
	immediate = {
		change_variable = {
			which = pse_cooldown_power_count
			value = -1
		}
	}
}

country_event = {
	id = pse.10000
	
	title = pse.10000.title
	desc = pse.10000.desc
	is_triggered_only = yes
	immediate = {
		set_variable = {
			which = pse_power
			value = 1000
		}
		set_variable = {
			which = pse_corruption
			value = 0
		}
		
	}
	option = {
		name = OK
		add_resource = {
			sr_psionic_sublimate = 1000
		}
	}
}

###AI handle cast gateway###
country_event = {
	id = pse.15000
	is_triggered_only = yes
	hide_window = yes
	trigger = {
		is_ai = yes
		has_country_flag = pse_access_power
		NOR = {
			has_country_flag = pse_ai_idle
			has_country_flag = pse_ai_save_power
		}
		check_variable = {
			which = pse_power
			value > 30
		}
	}
	immediate = {
		random_list = {
			0 = { #DO nothing for 6 months
				modifier = {
					add = 15
					check_variable = {
						which = pse_power
						value < 50
					}
					check_variable = {
						which = pse_power_cap
						value > 100
					}
				}
				modifier = {
					add = 20
					check_variable = {
						which = pse_power
						value < 100
					}
					check_variable = {
						which = pse_power_cap
						value > 150
					}
				}
				modifier = {
					add = 25
					check_variable = {
						which = pse_power
						value < 150
					}
					check_variable = {
						which = pse_power_cap
						value > 200
					}
				}
				modifier = {
					add = 30
					check_variable = {
						which = pse_power
						value < 200
					}
					check_variable = {
						which = pse_power_cap
						value > 250
					}
				}
				modifier = { #ruler is chosen and let's cast something big more often
					add = 300
					leader = {
						has_trait = leader_trait_ruler_chosen
					}
					check_variable = {
						which = pse_power
						value < 300
					}
					check_variable = {
						which = pse_power_cap
						value > 300
					}
				}
				modifier = { #MUST PURIFY OR ELSE
					add = 1000
					check_variable = {
						which = pse_power
						value < 125
					}
					check_variable = {
						which = pse_power_cap
						value > 125
					}
					check_variable = {
						which = pse_corruption
						value > 60
					}
				}
				modifier = { #Too high
					add = 100000
					check_variable = {
						which = pse_corruption
						value > 80
					}
				}
				set_timed_country_flag = {
					flag = pse_ai_idle
					days = 180
				}
			}
			0 = { #find 30
				modifier = {
					add = 10
					any_owned_leader = {
						species = {
							OR = {
								has_trait = trait_latent_psionic
								has_trait = trait_psionic
							}
						}
						NOT = {
							OR = {
								has_trait = leader_trait_admiral_psionic
								has_trait = leader_trait_general_psionic
								has_trait = leader_trait_governor_psionic
								has_trait = leader_trait_scientist_psionic
								has_trait = leader_trait_ruler_psionic
								has_trait = leader_trait_admiral_chosen
								has_trait = leader_trait_general_chosen
								has_trait = leader_trait_governor_chosen
								has_trait = leader_trait_scientist_chosen
								has_trait = leader_trait_ruler_chosen
							}
						}
					}
				}
				modifier = {
					factor = 5
					has_ascension_perk = ap_mind_over_matter
					NOT = {
						has_ascension_perk = ap_transcendence
					}
				}
				modifier = {
					factor = 0
					has_country_flag = pse_power_leader_find_cooldown
				}
				modifier = {
					factor = 0
					check_variable = {
						which = pse_power
						value < 35
					}
				}
				modifier = {
					factor = 0.25
					check_variable = {
						which = pse_corruption
						value > 75
					}
				}
				set_country_flag = pse_power_leader_find_selected
				set_country_flag = pse_power_selected_one_of_them
                set_variable = {
                    which = pse_power_cost
                    value = 35
                }
			}
			0 = { #exp up 40
				modifier = {
					add = 10
					any_owned_leader = {
						has_skill < 5
						OR = {
							has_trait = leader_trait_admiral_psionic
							has_trait = leader_trait_general_psionic
							has_trait = leader_trait_governor_psionic
							has_trait = leader_trait_scientist_psionic
							has_trait = leader_trait_ruler_psionic
							has_trait = leader_trait_admiral_chosen
							has_trait = leader_trait_general_chosen
							has_trait = leader_trait_governor_chosen
							has_trait = leader_trait_scientist_chosen
							has_trait = leader_trait_ruler_chosen
						}
					}
				}
				modifier = {
					factor = 0.25
					has_ascension_perk = ap_mind_over_matter
				}
				modifier = {
					factor = 3
					has_ascension_perk = ap_transcendence
				}
				modifier = {
					factor = 0
					has_country_flag = pse_power_leader_exp_up_cooldown
				}
				modifier = {
					factor = 0
					check_variable = {
						which = pse_power
						value < 40
					}
				}
				modifier = {
					factor = 0.25
					check_variable = {
						which = pse_corruption
						value > 75
					}
				}
				modifier = {
					factor = 0.1
					check_variable = {
						which = pse_corruption
						value > 90
					}
				}
				set_country_flag = pse_power_leader_exp_up_selected
				set_country_flag = pse_power_selected_one_of_them
                set_variable = {
                    which = pse_power_cost
                    value = 40
                }
			}
			25 = { #tech up 75
				modifier = {
					factor = 0
					has_country_flag = pse_power_leader_tech_cooldown
				}
				modifier = {
					factor = 0
					check_variable = {
						which = pse_power
						value < 75
					}
				}
				modifier = {
					factor = 0.25
					check_variable = {
						which = pse_corruption
						value > 75
					}
				}
				modifier = {
					factor = 0
					check_variable = {
						which = pse_corruption
						value > 90
					}
				}
				set_country_flag = pse_power_leader_tech_selected
				set_country_flag = pse_power_selected_one_of_them
                set_variable = {
                    which = pse_power_cost
                    value = 75
                }
			}
			0 = { #remove negative trait 35
				modifier = {
					add = 15
					any_owned_leader = {
						OR = {
							has_trait = leader_trait_admiral_psionic
							has_trait = leader_trait_general_psionic
							has_trait = leader_trait_governor_psionic
							has_trait = leader_trait_scientist_psionic
							has_trait = leader_trait_ruler_psionic
							has_trait = leader_trait_admiral_chosen
							has_trait = leader_trait_general_chosen
							has_trait = leader_trait_governor_chosen
							has_trait = leader_trait_scientist_chosen
							has_trait = leader_trait_ruler_chosen
						}
						OR = {
							has_trait = leader_trait_stubborn
							has_trait = leader_trait_substance_abuser
							has_trait = leader_trait_arrested_development
							has_trait = leader_trait_nervous
							has_trait = leader_trait_lethargic
							has_trait = leader_trait_armchair_commander
							has_trait = leader_trait_corrupt
							has_trait = leader_trait_paranoid
						}
					}
				}
				modifier = {
					factor = 0
					has_country_flag = pse_power_leader_tech_cooldown
				}
				modifier = {
					factor = 0
					check_variable = {
						which = pse_power
						value < 35
					}
				}
				modifier = {
					factor = 0.25
					check_variable = {
						which = pse_corruption
						value > 75
					}
				}
				modifier = {
					factor = 0.1
					check_variable = {
						which = pse_corruption
						value > 90
					}
				}
				set_country_flag = pse_power_leader_tech_selected
				set_country_flag = pse_power_selected_one_of_them
                set_variable = {
                    which = pse_power_cost
                    value = 35
                }
			}
			15 = { #shroud boon 65
				modifier = {
					factor = 0
					NOT = {
						has_country_flag = breached_shroud
					}
				}
				modifier = {
					factor = 0
					has_country_flag = pse_power_shroud_boon_cooldown
				}
				modifier = {
					factor = 0
					check_variable = {
						which = pse_power
						value < 65
					}
				}
				modifier = {
					factor = 0.25
					check_variable = {
						which = pse_corruption
						value > 75
					}
				}
				modifier = {
					factor = 0.1
					check_variable = {
						which = pse_corruption
						value > 90
					}
				}
				modifier = {
					factor = 0.5
					empire_size < 149
				}
				set_country_flag = pse_power_shroud_boon_selected
				set_country_flag = pse_power_selected_one_of_them
                set_variable = {
                    which = pse_power_cost
                    value = 65
                }
			}
			#NO RETRY SHROUD AS AI IS DUMB
			0 = { #cause left 50
				modifier = {
					factor = 30
					OR = {
						has_modifier = shroud_neg_happiness
						has_modifier = shroud_neg_ethic
						has_modifier = shroud_neg_armor
						has_modifier = shroud_neg_growth
						has_modifier = shroud_neg_research
						has_modifier = shroud_neg_influence
						has_modifier = shroud_neg_unity
						has_modifier = shroud_neg_speed
						has_modifier = shroud_neg_morale
						has_modifier = shroud_neg_sensors
						has_modifier = MOD_pse_power_break_unity_modifier_effect
						has_modifier = MOD_pse_power_break_stability_modifier_effect
					}
				}
				modifier = {
					factor = 0
					NOT = {
						has_country_flag = breached_shroud
					}
				}
				modifier = {
					factor = 0
					has_country_flag = pse_power_shroud_cause_left_cooldown
				}
				modifier = {
					factor = 0
					check_variable = {
						which = pse_power
						value < 50
					}
				}
				modifier = {
					factor = 0.25
					check_variable = {
						which = pse_corruption
						value > 75
					}
				}
				modifier = {
					factor = 0.1
					check_variable = {
						which = pse_corruption
						value > 90
					}
				}
				set_country_flag = pse_power_shroud_cause_left_selected
				set_country_flag = pse_power_selected_one_of_them
                set_variable = {
                    which = pse_power_cost
                    value = 50
                }
			}

			10 = { #unity 85
				modifier = {
					factor = 0
					NOT = {
						check_variable = {
							which = pse_psionic_pop
							value > 250
						}
					}
				}
				modifier = {
					factor = 1.5
					check_variable = {
						which = pse_psionic_pop
						value > 500
					}
				}
				modifier = {
					factor = 1.5
					check_variable = {
						which = pse_psionic_pop
						value > 1000
					}
				}
				modifier = {
					factor = 2
					has_monthly_income = {
						resource = unity
						value < 1000
					}
				}
				modifier = {
					factor = 0
					has_country_flag = pse_power_planet_unity_cooldown
				}
				modifier = {
					factor = 0
					check_variable = {
						which = pse_power
						value < 85
					}
				}
				modifier = {
					factor = 0.25
					check_variable = {
						which = pse_corruption
						value > 75
					}
				}
				modifier = {
					factor = 0
					check_variable = {
						which = pse_corruption
						value > 90
					}
				}
				set_country_flag = pse_power_planet_unity_selected
				set_country_flag = pse_power_selected_one_of_them
                set_variable = {
                    which = pse_power_cost
                    value = 85
                }
			}

			10 = { #cleanse 125
				modifier = {
					factor = 0
					check_variable = {
						which = pse_corruption
						value < 25
					}
				}
				modifier = {
					factor = 2
					check_variable = {
						which = pse_corruption
						value > 50
					}
				}
				modifier = { #MUST PURIFY
					factor = 10000000
					check_variable = {
						which = pse_corruption
						value > 80
					}
				}
				modifier = {
					factor = 0
					has_country_flag = pse_power_cleanse_psi_cooldown
				}
				modifier = {
					factor = 0
					check_variable = {
						which = pse_power
						value < 125
					}
				}
				set_country_flag = pse_power_cleanse_psi_selected
				set_country_flag = pse_power_selected_one_of_them
                set_variable = {
                    which = pse_power_cost
                    value = 125
                }
			}
			10 = { #cap 50
				modifier = {
					factor = 0
					check_variable = {
						which = pse_corruption
						value < 35
					}
				}
				modifier = {
					factor = 2
					check_variable = {
						which = pse_corruption
						value > 50
					}
				}
				modifier = { #MUST PURIFY
					factor = 10000000
					check_variable = {
						which = pse_corruption
						value > 80
					}
				}
				modifier = {
					factor = 0
					has_country_flag = pse_power_cleanse_cap_cooldown
				}
				modifier = {
					factor = 0
					check_variable = {
						which = pse_power_cap
						value < 75
					}
				}
				modifier = {
					factor = 0.1
					check_variable = {
						which = pse_power_cap
						value < 125
					}
				}
				modifier = {
					factor = 0
					check_variable = {
						which = pse_power
						value < 50
					}
				}
				set_country_flag = pse_power_cleanse_cap_selected
				set_country_flag = pse_power_selected_one_of_them
                set_variable = {
                    which = pse_power_cost
                    value = 50
                }
			}
			10 = { #zro 15 as AI is dumb so they can use it without restrictions
				modifier = {
					factor = 0
					check_variable = {
						which = pse_corruption
						value < 66
					}
				}
				modifier = {
					factor = 10000000
					check_variable = {
						which = pse_corruption
						value > 90
					}
				}
				modifier = {
					factor = 0
					resource_stockpile_compare = {
						resource = sr_zro
						value < 200
					}
				}
				modifier = {
					factor = 1.5
					resource_stockpile_compare = {
						resource = sr_zro
						value > 400
					}
				}
				modifier = {
					factor = 2
					resource_stockpile_compare = {
						resource = sr_zro
						value > 600
					}
				}
				modifier = {
					factor = 2.5
					resource_stockpile_compare = {
						resource = sr_zro
						value > 800
					}
				}
				modifier = {
					factor = 3
					resource_stockpile_compare = {
						resource = sr_zro
						value > 1000
					}
				}
				modifier = {
					factor = 3.5
					resource_stockpile_compare = {
						resource = sr_zro
						value > 1200
					}
				}
				modifier = {
					factor = 4
					resource_stockpile_compare = {
						resource = sr_zro
						value > 1400
					}
				}
				modifier = {
					factor = 4.5
					resource_stockpile_compare = {
						resource = sr_zro
						value > 1600
					}
				}
				modifier = {
					factor = 5
					resource_stockpile_compare = {
						resource = sr_zro
						value > 1800
					}
				}
				modifier = {
					factor = 100
					resource_stockpile_compare = {
						resource = sr_zro
						value > 2000
					}
				}
				modifier = {
					factor = 0
					has_country_flag = pse_power_cleanse_zro_cooldown
				}
				modifier = {
					factor = 0
					check_variable = {
						which = pse_power
						value < 15
					}
				}
				set_country_flag = pse_power_cleanse_zro_selected
				set_country_flag = pse_power_selected_one_of_them
                set_variable = {
                    which = pse_power_cost
                    value = 15
                }
			}

			10 = { #spacefaring 125
				modifier = {
					factor = 3
					NOT = {
						has_technology = tech_battleships
					}
				}
				modifier = {
					factor = 0
					NOT = {
						has_country_flag = breached_shroud
					}
				}
				modifier = {
					factor = 0
					has_country_flag = pse_power_summon_spacefaring_cooldown
				}
				modifier = {
					factor = 0
					check_variable = {
						which = pse_power
						value < 125
					}
				}
				modifier = {
					factor = 0.25
					check_variable = {
						which = pse_corruption
						value > 65
					}
				}
				modifier = {
					factor = 0
					check_variable = {
						which = pse_corruption
						value > 85
					}
				}
				modifier = {
					factor = 2
					fleet_power < 20000
				}
				modifier = {
					factor = 0.5
					fleet_power > 50000
				}
				modifier = {
					factor = 0
					fleet_power > 150000
				}
				set_country_flag = pse_power_summon_spacefaring_selected
				set_country_flag = pse_power_selected_one_of_them
				set_variable = {
					which = pse_power_cost
					value = 125
				}
			}

			10 = { #avatar 50
				modifier = {
					factor = 0
					NOT = {
						has_country_flag = breached_shroud
					}
				}
				modifier = {
					factor = 0
					has_country_flag = pse_power_summon_avatar_cooldown
				}
				modifier = {
					factor = 0
					check_variable = {
						which = pse_power
						value < 50
					}
				}
				modifier = {
					factor = 0.25
					check_variable = {
						which = pse_corruption
						value > 75
					}
				}
				modifier = {
					factor = 0.1
					check_variable = {
						which = pse_corruption
						value > 90
					}
				}
				set_country_flag = pse_power_summon_avatar_selected
				set_country_flag = pse_power_selected_one_of_them
				set_variable = {
					which = pse_power_cost
					value = 50
				}
			}
			10 = { #resource 
				modifier = {
					factor = 0
					NOT = {
						has_country_flag = breached_shroud
					}
				}
				modifier = {
					factor = 0
					has_country_flag = pse_power_summon_resource_cooldown
				}
				modifier = {
					factor = 1.25
					resource_stockpile_compare = {
						resource = energy
						value < 2000
					}
				}
				modifier = {
					factor = 1.25
					resource_stockpile_compare = {
						resource = minerals
						value < 2000
					}
				}
				modifier = {
					factor = 1.25
					resource_stockpile_compare = {
						resource = food
						value < 2000
					}
				}
				modifier = {
					factor = 1.25
					resource_stockpile_compare = {
						resource = consumer_goods
						value < 2000
					}
				}
				modifier = {
					factor = 1.25
					resource_stockpile_compare = {
						resource = alloys
						value < 2000
					}
				}
				modifier = {
					factor = 0
					check_variable = {
						which = pse_power
						value < 95
					}
				}
				modifier = {
					factor = 0.25
					check_variable = {
						which = pse_corruption
						value > 75
					}
				}
				modifier = {
					factor = 0
					check_variable = {
						which = pse_corruption
						value > 90
					}
				}
				set_country_flag = pse_power_summon_resource_selected
				set_country_flag = pse_power_selected_one_of_them
				set_variable = {
					which = pse_power_cost
					value = 95
				}
			}

			0 = { #combat boon
				modifier = {
					factor = 0
					NOT = {
						has_country_flag = breached_shroud
					}
				}
				modifier = {
					factor = 0
					has_country_flag = pse_power_combat_boon_cooldown
				}
				modifier = {
					add = 15
					OR = {
						is_at_war = yes
						has_crisis = yes
					}
				}
				modifier = {
					factor = 3
					any_owned_fleet = {
						is_in_combat = yes
					}
				}
				modifier = {
					factor = 0
					check_variable = {
						which = pse_power
						value < 70
					}
				}
				modifier = {
					factor = 0.25
					check_variable = {
						which = pse_corruption
						value > 75
					}
				}
				modifier = {
					factor = 0.1
					check_variable = {
						which = pse_corruption
						value > 85
					}
				}
				set_country_flag = pse_power_combat_boon_selected
				set_country_flag = pse_power_selected_one_of_them
				set_variable = {
					which = pse_power_cost
					value = 70
				}
			}
			0 = { #combat range 165
				modifier = {
					factor = 0
					has_country_flag = pse_power_combat_range_cooldown
				}
				modifier = {
					add = 25
					any_owned_fleet = {
						is_in_combat = yes
					}
				}
				modifier = {
					factor = 0.5
					count_owned_ship = {
						count < 99
					}
				}
				modifier = {
					factor = 0.5
					count_owned_ship = {
						count < 199
					}
				}
				modifier = {
					factor = 0
					check_variable = {
						which = pse_power
						value < 165
					}
				}
				modifier = {
					factor = 0.25
					check_variable = {
						which = pse_corruption
						value > 50
					}
				}
				modifier = {
					factor = 0
					check_variable = {
						which = pse_corruption
						value > 75
					}
				}
				set_country_flag = pse_power_combat_range_selected
				set_country_flag = pse_power_selected_one_of_them
				set_variable = {
					which = pse_power_cost
					value = 165
				}
			}

			10 = { #combat arc 150
				modifier = {
					factor = 0
					has_country_flag = pse_power_combat_arc_cooldown
				}
				modifier = {
					factor = 5
					OR = {
						is_at_war = yes
						has_crisis = yes
					}
				}
				modifier = {
					factor = 2.5
					any_owned_fleet = {
						is_in_combat = yes
					}
				}
				modifier = {
					factor = 0.5
					count_owned_ship = {
						count < 99
					}
				}
				modifier = {
					factor = 0.5
					count_owned_ship = {
						count < 199
					}
				}
				modifier = {
					factor = 0
					check_variable = {
						which = pse_power
						value < 150
					}
				}
				modifier = {
					factor = 0.25
					check_variable = {
						which = pse_corruption
						value > 65
					}
				}
				modifier = {
					factor = 0
					check_variable = {
						which = pse_corruption
						value > 80
					}
				}
				set_country_flag = pse_power_combat_arc_selected
				set_country_flag = pse_power_selected_one_of_them
				set_variable = {
					which = pse_power_cost
					value = 150
				}
			}

			0 = { #ship 275
				modifier = {
					factor = 0
					has_country_flag = pse_power_combat_ship_cooldown
				}
				modifier = {
					add = 500
					any_owned_fleet = {
						is_in_combat = yes
					}
				}
				modifier = {
					factor = 0
					check_variable = {
						which = pse_power
						value < 275
					}
				}
				modifier = {
					factor = 0.25
					check_variable = {
						which = pse_corruption
						value > 50
					}
				}
				modifier = {
					factor = 0
					check_variable = {
						which = pse_corruption
						value > 75
					}
				}
				set_country_flag = pse_power_combat_ship_selected
				set_country_flag = pse_power_selected_one_of_them
				set_variable = {
					which = pse_power_cost
					value = 275
				}
			}

			0 = { #break unity 100
				modifier = {
					factor = 0
					has_country_flag = pse_power_break_unity_cooldown
				}
				modifier = {
					add = 10
					any_neighbor_country = {
						has_communications = root
						OR = {
							is_berserker_to = root
							is_belligerent_to = root
							is_angry_to = root
							is_domineering_to = root
							is_unfriendly_to = root
							is_hostile_to = root
							is_hostile = root
							is_rival = root
							is_harming_relations_with = root
							is_at_war_with = root
						}
						NOT = {
							is_same_empire = root
						}
					}
				}
				modifier = {
					factor = 0
					check_variable = {
						which = pse_power
						value < 100
					}
				}
				modifier = {
					factor = 0.25
					check_variable = {
						which = pse_corruption
						value > 75
					}
				}
				modifier = {
					factor = 0
					check_variable = {
						which = pse_corruption
						value > 88
					}
				}
				set_country_flag = pse_power_break_unity_selected
				set_country_flag = pse_power_selected_one_of_them
				set_variable = {
					which = pse_power_cost
					value = 100
				}
			}

			0 = { #break stabiliy 135
				modifier = {
					factor = 0
					has_country_flag = pse_power_break_stability_cooldown
				}
				modifier = {
					add = 10
					any_neighbor_country = {
						has_communications = root
						OR = {
							is_berserker_to = root
							is_belligerent_to = root
							is_angry_to = root
							is_domineering_to = root
							is_unfriendly_to = root
							is_hostile_to = root
							is_hostile = root
							is_rival = root
							is_harming_relations_with = root
							is_at_war_with = root
						}
						NOT = {
							is_same_empire = root
						}
					}
				}
				modifier = {
					factor = 0
					check_variable = {
						which = pse_power
						value < 135
					}
				}
				modifier = {
					factor = 0.25
					check_variable = {
						which = pse_corruption
						value > 75
					}
				}
				modifier = {
					factor = 0
					check_variable = {
						which = pse_corruption
						value > 82
					}
				}
				set_country_flag = pse_power_break_stability_selected
				set_country_flag = pse_power_selected_one_of_them
				set_variable = {
					which = pse_power_cost
					value = 135
				}
			}
			0 = { #break building 175
				modifier = {
					factor = 0
					has_country_flag = pse_power_break_building_cooldown
				}
				modifier = {
					add = 15
					OR = {
						is_at_war = yes
						has_crisis = yes
						has_global_flag = war_in_heaven_ongoing
						has_global_flag = gray_goo_crisis_active
						AND = {
							has_global_flag = great_khan_announcement
							NOT = { has_global_flag = great_khan_dead }
						}
					}
				}
				modifier = {
					factor = 0
					check_variable = {
						which = pse_power
						value < 175
					}
				}
				modifier = {
					factor = 0.25
					check_variable = {
						which = pse_corruption
						value > 50
					}
				}
				modifier = {
					factor = 0
					check_variable = {
						which = pse_corruption
						value > 75
					}
				}
				set_country_flag = pse_power_break_building_selected
				set_country_flag = pse_power_selected_one_of_them
				set_variable = {
					which = pse_power_cost
					value = 175
				}
			}

			10 = { #galaxy storm 220
				modifier = {
					factor = 0
					has_country_flag = pse_power_galaxy_storm_cooldown
				}
				modifier = {
					factor = 0
					has_global_flag = ongoing_space_storm
				}
				modifier = {
					factor = 0
					check_variable = {
						which = pse_power
						value < 210
					}
				}
				modifier = {
					factor = 0.25
					check_variable = {
						which = pse_corruption
						value > 25
					}
				}
				modifier = {
					factor = 0
					check_variable = {
						which = pse_corruption
						value > 75
					}
				}
				set_country_flag = pse_power_galaxy_storm_selected
				set_country_flag = pse_power_selected_one_of_them
				set_variable = {
					which = pse_power_cost
					value = 210
				}
			}

			10 = { #galaxy field 235
				modifier = {
					factor = 0
					has_country_flag = pse_power_galaxy_field_cooldown
				}
				modifier = {
					factor = 0
					is_at_war = no
				}
				modifier = {
					factor = 0
					check_variable = {
						which = pse_power
						value < 235
					}
				}
				modifier = {
					factor = 2
					galaxy_percentage > 0.05
				}
				modifier = {
					factor = 2
					galaxy_percentage > 0.15
				}
				modifier = {
					factor = 0.25
					check_variable = {
						which = pse_corruption
						value > 33
					}
				}
				modifier = {
					factor = 0
					check_variable = {
						which = pse_corruption
						value > 75
					}
				}
				set_country_flag = pse_power_galaxy_field_selected
				set_country_flag = pse_power_selected_one_of_them
				set_variable = {
					which = pse_power_cost
					value = 235
				}
			}

			15 = { #galaxy fury 200
				modifier = {
					factor = 0
					has_country_flag = pse_power_galaxy_spacefaring_cooldown
				}
				modifier = {
					factor = 0
					NOT = {
						has_country_flag = breached_shroud
					}
				}
				modifier = {
					factor = 0
					has_global_flag = pse_power_fury_in_effect
				}
				modifier = {
					factor = 0
					check_variable = {
						which = pse_power
						value < 200
					}
				}
				modifier = {
					factor = 0.25
					check_variable = {
						which = pse_corruption
						value > 50
					}
				}
				modifier = {
					factor = 0
					check_variable = {
						which = pse_corruption
						value > 75
					}
				}
				set_country_flag = pse_power_galaxy_spacefaring_selected
				set_country_flag = pse_power_selected_one_of_them
				set_variable = {
					which = pse_power_cost
					value = 200
				}
			}

			20 = { #cause 130
				modifier = {
					factor = 0
					has_country_flag = pse_power_galaxy_cause_cooldown
				}
				modifier = {
					factor = 0
					NOT = {
						has_country_flag = breached_shroud
					}
				}
				modifier = {
					factor = 0
					check_variable = {
						which = pse_power
						value < 130
					}
				}
				modifier = {
					factor = 0.25
					check_variable = {
						which = pse_corruption
						value > 50
					}
				}
				modifier = {
					factor = 0
					check_variable = {
						which = pse_corruption
						value > 80
					}
				}
				set_country_flag = pse_power_galaxy_cause_selected
				set_country_flag = pse_power_selected_one_of_them
				set_variable = {
					which = pse_power_cost
					value = 130
				}
			}



			0 = { #worship 215
				modifier = {
					factor = 0
					has_country_flag = pse_power_chosen_worship_cooldown
				}
				modifier = {
					factor = 0
					leader = {
						NOT = {
							has_trait = leader_trait_ruler_chosen
						}
					}
				}
				modifier = {
					add = 50
					any_neighbor_country = {
						has_communications = root
						OR = {
							is_berserker_to = root
							is_belligerent_to = root
							is_angry_to = root
							is_domineering_to = root
							is_unfriendly_to = root
							is_hostile_to = root
							is_hostile = root
							is_rival = root
							is_harming_relations_with = root
							is_at_war_with = root
						}
						NOT = {
							is_same_empire = root
						}
						NOT = {
							has_ethic = ethic_gestalt_consciousness
						}
					}
				}
				modifier = {
					factor = 0
					check_variable = {
						which = pse_power
						value < 215
					}
				}
				modifier = {
					factor = 0.25
					check_variable = {
						which = pse_corruption
						value > 50
					}
				}
				modifier = {
					factor = 0
					check_variable = {
						which = pse_corruption
						value > 75
					}
				}
				set_country_flag = pse_power_chosen_worship_selected
				set_country_flag = pse_power_selected_one_of_them
				set_variable = {
					which = pse_power_cost
					value = 215
				}
			}

			5 = { #speed 280
				modifier = {
					factor = 0
					has_country_flag = pse_power_chosen_speed_cooldown
				}
				modifier = {
					factor = 0
					leader = {
						NOT = {
							has_trait = leader_trait_ruler_chosen
						}
					}
				}
				modifier = {
					add = 25
					is_at_war = yes
				}
				modifier = {
					factor = 0
					check_variable = {
						which = pse_power
						value < 280
					}
				}
				modifier = {
					factor = 0.25
					check_variable = {
						which = pse_corruption
						value > 50
					}
				}
				modifier = {
					factor = 0
					check_variable = {
						which = pse_corruption
						value > 70
					}
				}
				set_country_flag = pse_power_chosen_speed_selected
				set_country_flag = pse_power_selected_one_of_them
				set_variable = {
					which = pse_power_cost
					value = 280
				}
			}

			0 = { #backstab 265
				modifier = {
					factor = 0
					has_country_flag = pse_power_chosen_backstab_cooldown
				}
				modifier = {
					factor = 0
					leader = {
						NOT = {
							has_trait = leader_trait_ruler_chosen
						}
					}
				}
				modifier = {
					add = 35
					any_playable_country = {
						has_communications = root
						OR = {
							is_berserker_to = root
							is_belligerent_to = root
							is_angry_to = root
							is_domineering_to = root
							is_unfriendly_to = root
							is_disloyal_to = root
							is_hostile_to = root
							is_hostile = root
							is_rival = root
							is_harming_relations_with = root
							is_at_war_with = root
						}
						NOT = {
							is_same_empire = root
						}
					}
				}
				modifier = {
					factor = 0
					check_variable = {
						which = pse_power
						value < 265
					}
				}
				modifier = {
					factor = 0.25
					check_variable = {
						which = pse_corruption
						value > 50
					}
				}
				modifier = {
					factor = 0
					check_variable = {
						which = pse_corruption
						value > 70
					}
				}
				set_country_flag = pse_power_chosen_backstab_selected
				set_country_flag = pse_power_selected_one_of_them
				set_variable = {
					which = pse_power_cost
					value = 265
				}
			}

			100 = { #bomb 300
				modifier = {
					factor = 0
					has_country_flag = pse_power_chosen_bomb_cooldown
				}
				modifier = {
					factor = 0
					leader = {
						NOT = {
							has_trait = leader_trait_ruler_chosen
						}
					}
				}
				modifier = {
					factor = 0
					has_country_flag = pse_has_bomb
				}
				modifier = {
					factor = 0
					check_variable = {
						which = pse_power
						value < 300
					}
				}
				modifier = {
					factor = 0.25
					check_variable = {
						which = pse_corruption
						value > 50
					}
				}
				modifier = {
					factor = 0
					check_variable = {
						which = pse_corruption
						value > 70
					}
				}
				set_country_flag = pse_power_chosen_bomb_selected
				set_country_flag = pse_power_selected_one_of_them
				set_variable = {
					which = pse_power_cost
					value = 300
				}
			}
		}

		if = { #Cast it!
			limit = {
				has_country_flag = pse_power_selected_one_of_them
			}
			set_variable = {
				which = pse_corruption_calc
				value = pse_power_cost
			}
			divide_variable = {
				which = pse_corruption_calc
				value = 10
			}
			if = {
				limit = {
					has_technology = tech_pse_power_3
				}
				multiply_variable = {
					which = pse_corruption_calc
					value = 1.2
				}
			}
			else = {
				multiply_variable = {
					which = pse_corruption_calc
					value = 1.5
				}
			}
			
			change_variable = {
				which = pse_corruption
				value = pse_corruption_calc
			}
			set_variable = {
				which = pse_corruption_calc
				value = 0
			}
			if = {
                limit = {
                    NOT = {
                        has_country_flag = pse_power_leader_find_selected
                    }
                }
                ###USED POWER AND CAP
                change_variable = {
                    which = pse_cooldown_power_count
                    value = 1
                }
                change_variable = { #ACT AS EFFECT
                    which = pse_power_cap
                    value = -15
                }
            }
            switch = {
                trigger = has_country_flag
                pse_power_leader_find_selected = { #35
                    set_country_flag = pse_power_leader_find_used_flag
                }
                pse_power_leader_exp_up_selected = { #40
                    set_country_flag = pse_power_leader_exp_up_used_flag
                    set_timed_country_flag = {
                        flag = pse_power_leader_exp_up_cooldown
                        days = 1800
                    }
                }
                pse_power_leader_tech_selected = { #60
                    set_country_flag = pse_power_leader_tech_used_flag
                    set_timed_country_flag = {
                        flag = pse_power_leader_tech_cooldown
                        days = 3600
                    }
                }
                pse_power_leader_remove_negative_trait_selected = { #35
                    set_country_flag = pse_power_leader_remove_negative_trait_used_flag
                    set_timed_country_flag = {
                        flag = pse_power_leader_remove_negative_trait_cooldown
                        days = 1800
                    }
                    
                }
                pse_power_shroud_boon_selected = { #85
                    set_country_flag = pse_power_shroud_boon_used_flag
                    set_timed_country_flag = {
                        flag = pse_power_shroud_boon_cooldown
                        days = 1800
                    }
                    
                }
                pse_power_shroud_enter_selected = { #60
                    set_country_flag = pse_power_shroud_enter_used_flag
                    set_timed_country_flag = {
                        flag = pse_power_shroud_enter_cooldown
                        days = 1800
                    }
                    
                }
                pse_power_shroud_cause_left_selected = { #50
                    set_country_flag = pse_power_shroud_cause_left_used_flag
                    set_timed_country_flag = {
                        flag = pse_power_shroud_cause_left_cooldown
                        days = 1080
                    }
                    
                }
                pse_power_planet_unity_selected = { #85
                    set_country_flag = pse_power_planet_unity_used_flag
                    set_timed_country_flag = {
                        flag = pse_power_planet_unity_cooldown
                        days = 1800
                    }
                    
                }
                pse_power_planet_crime_selected = { #75
                    set_country_flag = pse_power_planet_crime_used_flag
                    set_timed_country_flag = {
                        flag = pse_power_planet_crime_cooldown
                        days = 1800
                    }
                    
                }
                pse_power_planet_ethic_selected = { #100
                    set_country_flag = pse_power_planet_ethic_used_flag
                    set_timed_country_flag = {
                        flag = pse_power_planet_ethic_cooldown
                        days = 1800
                    }
                    
                }
                pse_power_cleanse_psi_selected = { #125
                    set_country_flag = pse_power_cleanse_psi_used_flag
                    if = {
                        limit = {
                            check_variable = {
                                which = pse_corruption
                                value < 10
                            }
                        }
                        custom_tooltip = pse_power_botton_cleanse_corruption_is_too_low
                    }
                    set_timed_country_flag = {
                        flag = pse_power_cleanse_psi_cooldown
                        days = 1080
                    }
                }
                pse_power_cleanse_cap_selected = { #50
                    set_country_flag = pse_power_cleanse_cap_used_flag
                    if = {
                        limit = {
                            check_variable = {
                                which = pse_corruption
                                value < 10
                            }
                        }
                        custom_tooltip = pse_power_botton_cleanse_corruption_is_too_low
                    }
                    set_timed_country_flag = {
                        flag = pse_power_cleanse_cap_cooldown
                        days = 3600
                    }
                }
                pse_power_cleanse_zro_selected = { #10
                    custom_tooltip = PSE_COST_CLEANSE_TOOLTIP
                    set_country_flag = pse_power_cleanse_zro_used_flag
                    if = {
                        limit = {
                            check_variable = {
                                which = pse_corruption
                                value < 10
                            }
                        }
                        custom_tooltip = pse_power_botton_cleanse_corruption_is_too_low
                    }
                    set_timed_country_flag = {
                        flag = pse_power_cleanse_zro_cooldown
                        days = 1800
                    }
                }
    
                pse_power_summon_spacefaring_selected = { #125 (13,25,38)
                    set_country_flag = pse_power_summon_spacefaring_used_flag
                    set_timed_country_flag = {
                        flag = pse_power_summon_spacefaring_cooldown
                        days = 1800
                    }
                   
                }
                pse_power_summon_avatar_selected = { #50 (5,10,15)
                    set_country_flag = pse_power_summon_avatar_used_flag
                    set_timed_country_flag = {
                        flag = pse_power_summon_avatar_cooldown
                        days = 1800
                    }
                    
                }
                pse_power_summon_resource_selected = { #60 (6,12,18)
                    set_country_flag = pse_power_summon_resource_used_flag
                    set_timed_country_flag = {
                        flag = pse_power_summon_resource_cooldown
                        days = 1800
                    }
                   
                }
    
                pse_power_combat_boon_selected = { #90 (9,18,24)
                    set_country_flag = pse_power_combat_boon_used_flag
                    set_timed_country_flag = {
                        flag = pse_power_combat_boon_cooldown
                        days = 1800
                    }
                   
                }
                pse_power_combat_range_selected = { #135 (14,27,41)
                    set_country_flag = pse_power_combat_range_used_flag
                    set_timed_country_flag = {
                        flag = pse_power_combat_range_cooldown
                        days = 3600
                    }
                    
                }
                pse_power_combat_arc_selected = {
                    set_country_flag = pse_power_combat_arc_used_flag
                    set_timed_country_flag = {
                        flag = pse_power_combat_arc_cooldown
                        days = 3600
                    }
                    
                }
                pse_power_combat_ship_selected = { #155 (16,31,47)
                    set_country_flag = pse_power_combat_ship_used_flag
                    set_timed_country_flag = {
                        flag = pse_power_combat_ship_cooldown
                        days = 7200
                    }
                    
                }
    
    
                pse_power_break_unity_selected = { #120 (12,24,36)
                    set_country_flag = pse_power_break_unity_used_flag
                    set_timed_country_flag = {
                        flag = pse_power_break_unity_cooldown
                        days = 3600
                    }
                    
                }
                pse_power_break_stability_selected = { #160 (16,32,48)
                    set_country_flag = pse_power_break_stability_used_flag
                    set_timed_country_flag = {
                        flag = pse_power_break_stability_cooldown
                        days = 3600
                    }
                    
                }
                pse_power_break_building_selected = { #200 (20,40,60)
                    set_country_flag = pse_power_break_building_used_flag
                    set_timed_country_flag = {
                        flag = pse_power_break_building_cooldown
                        days = 3600
                    }
                    
                }
    
                pse_power_galaxy_storm_selected = { #240 (24,48,72)
                    set_country_flag = pse_power_galaxy_storm_used_flag
                    set_timed_country_flag = {
                        flag = pse_power_galaxy_storm_cooldown
                        days = 7200
                    }
                   
                }

				pse_power_galaxy_field_selected = { #235
                    set_country_flag = pse_power_galaxy_field_used_flag
                    set_timed_country_flag = {
                        flag = pse_power_galaxy_field_cooldown
                        days = 7200
                    }
                   
                }
                pse_power_galaxy_spacefaring_selected = { #200 (20,40,60)
                    set_country_flag = pse_power_galaxy_spacefaring_used_flag
                    set_timed_country_flag = {
                        flag = pse_power_galaxy_spacefaring_cooldown
                        days = 7200
                    }
                    
                }
                pse_power_galaxy_cause_selected = { #150 (15,30,45)
                    set_country_flag = pse_power_galaxy_cause_used_flag
                    set_timed_country_flag = {
                        flag = pse_power_galaxy_cause_cooldown
                        days = 7200
                    } 
                }
                pse_power_chosen_worship_selected = { 
                    set_country_flag = pse_power_chosen_worship_used_flag
                    set_timed_country_flag = {
                        flag = pse_power_chosen_worship_cooldown
                        days = 7200
                    } 
                }
                pse_power_chosen_speed_selected = { #150 (15,30,45)
                    set_country_flag = pse_power_chosen_speed_used_flag
                    set_timed_country_flag = {
                        flag = pse_power_chosen_speed_cooldown
                        days = 7200
                    } 
                }
                pse_power_chosen_shroud_selected = { #50 (5,10,15)
                    set_country_flag = pse_power_chosen_shroud_used_flag
                    set_timed_country_flag = {
                        flag = pse_power_chosen_shroud_cooldown
                        days = 1800
                    } 
                }
                pse_power_chosen_backstab_selected = { #150 (15,30,45)
                    set_country_flag = pse_power_chosen_backstab_used_flag
                    set_timed_country_flag = {
                        flag = pse_power_chosen_backstab_cooldown
                        days = 7200
                    } 
                }
                pse_power_chosen_bomb_selected = { #150 (15,30,45)
                    set_country_flag = pse_power_chosen_bomb_used_flag
                    set_timed_country_flag = {
                        flag = pse_power_chosen_bomb_cooldown
                        days = 7200
                    } 
                }
            }
            country_event = { #Effect gateway
                id = pse.5000
            }
            subtract_variable = {
                which = pse_power
                value = pse_power_cost
            }
            country_event = { #Reset zro calc
                id = pse.1999
            }
            country_event = { #Deselect power
                id = pse.2003
            }
            country_event = { #Calc require power cost reset
                id = pse.2005
            }            
        }
	}
}

country_event = {
	id = pse.15001
	hide_window = yes
	is_triggered_only = yes
	trigger = {
		is_ai = yes
		is_at_war = yes
		any_owned_fleet = {
			has_fleet_flag = pse_bomb_fleet
		}
		NOT = {
			has_country_flag = pse_bomb_ai_moved
		}
	}
	immediate = {
		random_playable_country = {
			limit = {
				is_at_war_with = root
				NOT = {
					is_same_empire = root
				}	
			}
			capital_scope = {
				save_event_target_as = pse_bomb_target_capital
			}
		}
		set_timed_country_flag = {
			flag = pse_bomb_ai_moved
			days = 360
		}
		random_owned_fleet = {
			limit = {
				has_fleet_flag = pse_bomb_fleet
			}
			auto_move_to_planet = {
				target = event_target:pse_bomb_target_capital
				clear_auto_move_on_arrival = yes
			}
		}
	}
}
#Force ai to go shrouded as they only go there once and that's it
#ALSO THEY ALWAYS KEEP ENERGY LOW
country_event = { 
	id = pse.15002
	hide_window = yes
	is_triggered_only = yes
	trigger = {
		is_ai = yes
		has_country_flag = breached_shroud
		NOR = { 
			has_country_flag = shroud_diplomacy_engaged
			has_modifier = shroud_cooldown
			has_modifier = shroud_precog_cooldown
		}
	}
	immediate = {
		random_list = {
			10 = { 
				if = {
					limit = { NOT = { has_country_flag = shroud_vision_1 } }
					country_event = { id = utopia.3100 }
				}
				else = { country_event = { id = utopia.3200 } }
			}
			10 = {
				if = {
					limit = { 
						count_owned_ship = {
							limit = { is_ship_size = psionic_avatar }
							count < 1
						}
						count_armies = {
							limit = { army_type = shroud_army }
							count < 1
						}
					}
					country_event = { id = utopia.3110 }
				}
				else = { country_event = { id = utopia.3200 } }
			}
			10 = {
				if = {
					limit = { NOT = { has_country_flag = shroud_vision_3 } }
					country_event = { id = utopia.3120 }
				}
				else = { country_event = { id = utopia.3200 } }
			}
			10 = {
				if = {
					limit = { NOT = { has_country_flag = shroud_vision_4 } }
					country_event = { id = utopia.3130 }
				}
				else = { country_event = { id = utopia.3200 } }
			}
			10 = {
				if = {
					limit = { NOT = { has_country_flag = shroud_vision_5 } }
					country_event = { id = utopia.3140 }
				}
				else = { country_event = { id = utopia.3200 } }
			}
			10 = {
				if = {
					limit = {
						any_country = {
							is_country_type = fallen_empire
							NOT = { has_ethic = ethic_gestalt_consciousness }
							has_communications = root
							NOT = { is_at_war_with = root }
						}
						NOT = { has_country_flag = shroud_fallen_empire }
					}
					country_event = { id = utopia.3150 }
				}
				else = { country_event = { id = utopia.3200 } }
			}
			10 = {
				if = {
					limit = { NOT = { has_technology = tech_psionic_shield } }
					country_event = { id = utopia.3170 }
				}
				else = { country_event = { id = utopia.3200 } }
			}
			10 = {
				if = {
					limit = { NOT = { has_technology = tech_precognition_interface } }
					country_event = { id = utopia.3180 }
				}
				else = { country_event = { id = utopia.3200 } }
			}
			10 = {
				if = {
					limit = { NOT = { has_technology = tech_psi_jump_drive_1 } }
					country_event = { id = utopia.3160 }
				}
				else = { country_event = { id = utopia.3200 } }
			}				
			10 = {
				if = {
					limit = { 
						NOR = { 
							has_country_flag = shroud_vision_10
							any_owned_leader = {
								OR = {
									has_trait = leader_trait_admiral_chosen
									has_trait = leader_trait_general_chosen
									has_trait = leader_trait_governor_chosen
									has_trait = leader_trait_ruler_chosen
									has_trait = leader_trait_scientist_chosen
								}
							}
						} 

					}
					country_event = { id = utopia.3190 }
				}
				else = { country_event = { id = utopia.3200 } }
			}
			20 = {
				if = {
					limit = { 
						NOT = { 
							has_country_flag = has_shroud_patron
						} 

					}
					country_event = { id = utopia.3300 }
				}				
				else = { country_event = { id = utopia.3200 } }
			}
			10 = { country_event = { id = utopia.3200 } }
		}
		if = {
			limit = { 
				has_relic = r_zro_crystal
			}
			add_modifier = {
				modifier = "shroud_cooldown"
				days = 900
			}
		}				
		else = {
			add_modifier = {
				modifier = "shroud_cooldown"
				days = 1800
			}
		}
	}
}
#AI: save power for something big?
country_event = {
	id = pse.15004
	hide_window = yes
	is_triggered_only = yes
	trigger = {
		is_ai = yes
		has_country_flag = pse_access_power
		NOT = {
			has_country_flag = pse_ai_was_save_power
		}
		check_variable = {
			which = pse_corruption
			value < 80
		}
	}
	immediate = {
		if = {
			limit = {
				has_country_flag = pse_ai_save_power
				check_variable = {
					which = pse_power
					value > pse_max_power_cap_num
				}
			}
			remove_country_flag = pse_ai_save_power
			set_timed_country_flag = {
				flag = pse_ai_was_save_power
				days = 1080
			}
		}
		if = { #No time for caution
			limit = {
				has_country_flag = pse_ai_save_power
				NOT = {
					has_country_flag = pse_ai_was_save_power
				}
				check_variable = {
					which = pse_power
					value = pse_power_cap
				}
			}
			random_list = { 
				100 = {}
				0 = {
					modifier = {
						add = 2
						OR = {
							is_at_war = yes
							has_crisis = yes
						}
					}
					modifier = {
						add = 2
						any_owned_fleet = {
							is_in_combat = yes
						}
					}
					modifier = {
						add = 2
						any_owned_planet = {
							OR = {
								is_under_crisis_bombardment = yes
								has_ground_combat = yes
								is_occupied_flag = yes
							}
						}
					}
					remove_country_flag = pse_ai_save_power
					set_timed_country_flag = {
						flag = pse_ai_was_save_power
						days = 1080
					}
				}
			}
		}
		random_list = {
			100 = {}
			0 = {
				modifier = {
					add = 1
					check_variable = {
						which = pse_max_power_cap_num
						value > 125
					}
				}
				modifier = {
					add = 1
					check_variable = {
						which = pse_max_power_cap_num
						value > 175
					}
				}
				modifier = {
					add = 1
					check_variable = {
						which = pse_max_power_cap_num
						value > 225
					}
				}
				modifier = {
					add = 1
					check_variable = {
						which = pse_max_power_cap_num
						value > 275
					}
				}
				modifier = {
					add = 1
					check_variable = {
						which = pse_max_power_cap_num
						value > 350
					}
				}
				set_timed_country_flag = { #save 10 years
					flag = pse_ai_save_power
					days = 3600
				}
			}
		}
	}
}
#Auto-Notify
country_event = {
	id = pse.15005
	title = pse.90.title
	desc = pse.15005.desc
	picture = GFX_evt_psionics
	is_triggered_only = yes
	trigger = {
		has_country_flag = pse_notify_enabled
		check_variable = {
			which = pse_power
			value >= pse_power_cap
		}
		NOT = {
			has_country_flag = pse_notify_onhold
		}
	}
	immediate = {
		set_country_flag = pse_notify_onhold
		set_variable = {
			which = pse_power_notify_cap
			value = pse_power_cap
		}
		divide_variable = {
			which = pse_power_notify_cap
			value = 1.5
		}
	}
	option = {
		name = OK
	}
}
#Use some power and remove
country_event = {
	id = pse.15006
	hide_window = yes
	is_triggered_only = yes
	trigger = {
		has_country_flag = pse_notify_onhold
		check_variable = {
			which = pse_power
			value < pse_power_notify_cap
		}
	}
	immediate = {
		remove_country_flag = pse_notify_onhold
	}
}