namespace = ag_ship_action

fleet_event = {
	id = ag_ship_action.1
	title = "ag_ship_action.1.name"
	desc = "ag_ship_action.1.name"
	is_triggered_only = yes
	diplomatic = yes
	custom_gui = "ag_ship_action_window"
	picture_event_data = { room = ag_ancient_empire_mod_settings_room }
	immediate = {
		set_variable = { which = ag_num_gamma_stations value = 0 }
		set_variable = { which = ag_num_delta_platforms value = 0 }
		set_variable = { which = ag_num_epsilon_titans value = 0 }
		set_variable = { which = ag_num_zeta_titans value = 0 }
		set_variable = { which = ag_num_zeta_titans_gra value = 0 }
		set_variable = { which = ag_num_zeta_titans_psi value = 0 }
		set_variable = { which = ag_num_zeta_battleships value = 0 }
		set_variable = { which = ag_num_zeta_battleships_gra value = 0 }
		set_variable = { which = ag_num_zeta_battleships_psi value = 0 }
		set_variable = { which = ag_num_zeta_destroyers value = 0 }
		set_variable = { which = ag_num_zeta_destroyers_gra value = 0 }
		set_variable = { which = ag_num_zeta_destroyers_psi value = 0 }
		every_owned_ship = {
			switch = {
				trigger = is_ship_size
				ag_gamma_station_0 = { root = { change_variable = { which = ag_num_gamma_stations value = 1 } } }
				ag_gamma_station_1 = { root = { change_variable = { which = ag_num_gamma_stations value = 1 } } }
				ag_delta_platform_00 = { root = { change_variable = { which = ag_num_delta_platforms value = 1 } } }
				ag_delta_platform_10 = { root = { change_variable = { which = ag_num_delta_platforms value = 1 } } }
				ag_epsilon_titan_1 = { root = { change_variable = { which = ag_num_epsilon_titans value = 1 } } }
				ag_zeta_titan = {
					root = { change_variable = { which = ag_num_zeta_titans value = 1 } }
					if = {
						limit = { NOT = { has_ship_flag = ag_zeta_ship_gravity_weapon } }
						root = { change_variable = { which = ag_num_zeta_titans_psi value = 1 } }
					}
					else = { root = { change_variable = { which = ag_num_zeta_titans_gra value = 1 } } }
				}
				ag_zeta_battleship = {
					root = { change_variable = { which = ag_num_zeta_battleships value = 1 } }
					if = {
						limit = { NOT = { has_ship_flag = ag_zeta_ship_gravity_weapon } }
						root = { change_variable = { which = ag_num_zeta_battleships_psi value = 1 } }
					}
					else = { root = { change_variable = { which = ag_num_zeta_battleships_gra value = 1 } } }
				}
				ag_zeta_destroyer = {
					root = { change_variable = { which = ag_num_zeta_destroyers value = 1 } }
					if = {
						limit = { NOT = { has_ship_flag = ag_zeta_ship_gravity_weapon } }
						root = { change_variable = { which = ag_num_zeta_destroyers_psi value = 1 } }
					}
					else = { root = { change_variable = { which = ag_num_zeta_destroyers_gra value = 1 } } }
				}
			}
		}
	}
	after = { hidden_effect = {
		clear_variable = ag_num_gamma_stations
		clear_variable = ag_num_delta_platforms
		clear_variable = ag_num_epsilon_titans
		clear_variable = ag_num_zeta_titans
		clear_variable = ag_num_zeta_titans_gra
		clear_variable = ag_num_zeta_titans_psi
		clear_variable = ag_num_zeta_battleships
		clear_variable = ag_num_zeta_battleships_gra
		clear_variable = ag_num_zeta_battleships_psi
		clear_variable = ag_num_zeta_destroyers
		clear_variable = ag_num_zeta_destroyers_gra
		clear_variable = ag_num_zeta_destroyers_psi
	} }
	option = {
		name = "ag_ship_action.1.1" custom_gui = "ag_action_background_option"
		trigger = { check_variable = { which = ag_num_gamma_stations value > 0 } }
		default_hide_option = yes
	}
	option = {
		name = "" custom_gui = "ag_action_fleet_jumpdrive_option" custom_tooltip = "ag_action_fleet_jumpdrive_enable_effect"
		trigger = { check_variable = { which = ag_num_gamma_stations value > 0 } owner = { has_country_flag = ag_ship_subsystem_enabled_301_10 } NOT = { has_fleet_flag = ag_gamma_fleet_jumpdrive_enabled } }
		hidden_effect = { set_fleet_flag = ag_gamma_fleet_jumpdrive_enabled fleet_event = { id = ag_ship_action.1 days = 1 } }
	}
	option = {
		name = "" custom_gui = "ag_action_fleet_jumpdrive_selected_option" custom_tooltip = "ag_action_fleet_jumpdrive_disable_effect"
		trigger = { check_variable = { which = ag_num_gamma_stations value > 0 } owner = { has_country_flag = ag_ship_subsystem_enabled_301_10 } has_fleet_flag = ag_gamma_fleet_jumpdrive_enabled }
		hidden_effect = { remove_fleet_flag = ag_gamma_fleet_jumpdrive_enabled fleet_event = { id = ag_ship_action.1 days = 1 } }
	}
	option = { name = "ag_ship_action.1.2" custom_gui = "ag_action_background_option"
		trigger = { check_variable = { which = ag_num_delta_platforms value > 0 } }
		default_hide_option = yes
	}
	option = {
		name = "" custom_gui = "ag_action_deploying_option" custom_tooltip = "ag_ancient_turret_deploying_effect"
		trigger = { check_variable = { which = ag_num_delta_platforms value > 0 } has_fleet_flag = ag_delta_platform_deploying }
		is_dialog_only = yes
		response_text = ""
	}
	option = {
		name = "" custom_gui = "ag_action_turret_deploy_single_option" custom_tooltip = "ag_deploy_ancient_turret_single_effect"
		trigger = { check_variable = { which = ag_num_delta_platforms value > 0 } NOT = { has_fleet_flag = ag_delta_platform_deploying } }
		hidden_effect = {
			if = {
				limit = { owner = { has_country_flag = ag_ship_subsystem_enabled_402_14 } }
				ag_deploy_ancient_turret_preparation = { ag_delay = 2 }
			}
			else = { ag_deploy_ancient_turret_preparation = { ag_delay = 5 } }
			fleet_event = { id = ag_ship_action.1 }
		}
	}
	option = {
		name = "" custom_gui = "ag_action_deploy_system_option" custom_tooltip = "ag_deploy_ancient_turret_system_effect"
		trigger = { check_variable = { which = ag_num_delta_platforms value > 0 } }
		hidden_effect = {
			if = {
				limit = { owner = { has_country_flag = ag_ship_subsystem_enabled_402_14 } }
				solar_system = {
					every_fleet_in_system = {
						limit = {
							exists = owner
							owner = { is_same_value = root.owner }
							has_fleet_flag = ag_delta_platform_player
							NOT = { has_fleet_flag = ag_delta_platform_deploying }
						}
						ag_deploy_ancient_turret_preparation = { ag_delay = 2 }
					}
				}
			}
			else = {
				solar_system = {
					every_fleet_in_system = {
						limit = {
							exists = owner
							owner = { is_same_value = root.owner }
							has_fleet_flag = ag_delta_platform_player
							NOT = { has_fleet_flag = ag_delta_platform_deploying }
						}
						ag_deploy_ancient_turret_preparation = { ag_delay = 5 }
					}
				}
			}
			fleet_event = { id = ag_ship_action.1 }
		}
	}
	option = {
		name = "" custom_gui = "ag_action_deploy_galaxy_option" custom_tooltip = "ag_deploy_ancient_turret_all_effect"
		trigger = { check_variable = { which = ag_num_delta_platforms value > 0 } }
		hidden_effect = {
			if = {
				limit = { owner = { has_country_flag = ag_ship_subsystem_enabled_402_14 } }
				owner = {
					every_owned_fleet = {
						limit = {
							has_fleet_flag = ag_delta_platform_player
							NOT = { has_fleet_flag = ag_delta_platform_deploying }
						}
						ag_deploy_ancient_turret_preparation = { ag_delay = 2 }
					}
				}
			}
			else = {
				owner = {
					every_owned_fleet = {
						limit = {
							has_fleet_flag = ag_delta_platform_player
							NOT = { has_fleet_flag = ag_delta_platform_deploying }
						}
						ag_deploy_ancient_turret_preparation = { ag_delay = 5 }
					}
				}
			}
			fleet_event = { id = ag_ship_action.1 }
		}
	}
	option = {
		name = "ag_ship_action.1.3" custom_gui = "ag_action_background_option"
		trigger = { check_variable = { which = ag_num_epsilon_titans value > 0 } }
		default_hide_option = yes
	}
	option = {
		name = "" custom_gui = "ag_action_star_killer_option" custom_tooltip = "ag_epsilon_star_killer_weapon_effect"
		trigger = {
			check_variable = { which = ag_num_epsilon_titans value > 0 }
			owner = {
				has_country_flag = ag_ship_subsystem_enabled_501_19
				OR = {
					has_country_flag = ag_epsilon_star_killer_planet_killer_mode
					has_country_flag = ag_epsilon_star_killer_planet_sweeper_mode
				}
			}
		}
		hidden_effect = {
			remove_fleet_flag = ag_epsilon_star_killer_planet_killer_mode
			remove_fleet_flag = ag_epsilon_star_killer_planet_sweeper_mode
			owner = {
				remove_country_flag = ag_epsilon_star_killer_planet_killer_mode
				remove_country_flag = ag_epsilon_star_killer_planet_sweeper_mode
			}
		}
		is_dialog_only = yes
		response_text = ""
	}
	option = {
		name = "" custom_gui = "ag_action_star_killer_option_alt" custom_tooltip = "ag_epsilon_star_killer_target_selector_effect"
		trigger = {
			check_variable = { which = ag_num_epsilon_titans value > 0 }
			owner = { has_country_flag = ag_ship_subsystem_enabled_501_18 }
		}
		allow = {
			custom_tooltip = {
				fail_text = "ag_requires_no_charging_star_killer"
				any_owned_ship = {
					is_ship_size = ag_epsilon_titan_1
					NOT = { has_ship_flag = ag_epsilon_firing_star_killer_weapon }
				}
			}
			custom_tooltip = {
				fail_text = "ag_requires_no_coldown"
				any_owned_ship = {
					is_ship_size = ag_epsilon_titan_1
					NOT = { has_ship_flag = ag_epsilon_star_weapon_remote_target_cooldown }
				}
			}
		}
		hidden_effect = { owner = {
			set_country_flag = ag_enabled_epsilon_planet_killer_selector
			country_event = { id = ag_system_selector.1 }
		} }
	}
	option = {
		name = "" custom_gui = "ag_action_star_killer_selected_option" custom_tooltip = "ag_epsilon_star_killer_weapon_effect_alt"
		trigger = {
			check_variable = { which = ag_num_epsilon_titans value > 0 }
			owner = { 
				has_country_flag = ag_ship_subsystem_enabled_501_19
				NOR = {
					has_country_flag = ag_epsilon_star_killer_planet_killer_mode
					has_country_flag = ag_epsilon_star_killer_planet_sweeper_mode
				}
			}
		}
		is_dialog_only = yes
		response_text = ""
	}
	option = {
		name = "" custom_gui = "ag_action_planet_killer_option" custom_tooltip = "ag_epsilon_planet_killer_weapon_effect"
		trigger = {
			check_variable = { which = ag_num_epsilon_titans value > 0 }
			owner = {
				has_country_flag = ag_ship_subsystem_enabled_501_19
				NOT = { has_country_flag = ag_epsilon_star_killer_planet_killer_mode }
			}
		}
		hidden_effect = {
			set_fleet_flag = ag_epsilon_star_killer_planet_killer_mode
			remove_fleet_flag = ag_epsilon_star_killer_planet_sweeper_mode
			owner = {
				set_country_flag = ag_epsilon_star_killer_planet_killer_mode
				remove_country_flag = ag_epsilon_star_killer_planet_sweeper_mode
			}
		}
		is_dialog_only = yes
		response_text = ""
	}
	option = {
		name = "" custom_gui = "ag_action_planet_killer_selected_option" custom_tooltip = "ag_epsilon_planet_killer_weapon_effect_alt"
		trigger = {
			check_variable = { which = ag_num_epsilon_titans value > 0 }
			owner = {
				has_country_flag = ag_ship_subsystem_enabled_501_19
				has_country_flag = ag_epsilon_star_killer_planet_killer_mode
			}
		}
		is_dialog_only = yes
		response_text = ""
	}
	option = {
		name = "" custom_gui = "ag_action_planet_sweeper_option" custom_tooltip = "ag_epsilon_planet_sweeper_weapon_effect"
		trigger = {
			check_variable = { which = ag_num_epsilon_titans value > 0 }
			owner = {
				has_country_flag = ag_ship_subsystem_enabled_501_19
				NOT = { has_country_flag = ag_epsilon_star_killer_planet_sweeper_mode }
			}
		}
		hidden_effect = {
			remove_fleet_flag = ag_epsilon_star_killer_planet_killer_mode
			set_fleet_flag = ag_epsilon_star_killer_planet_sweeper_mode
			owner = {
				remove_country_flag = ag_epsilon_star_killer_planet_killer_mode
				set_country_flag = ag_epsilon_star_killer_planet_sweeper_mode
			}
		}
		is_dialog_only = yes
		response_text = ""
	}
	option = {
		name = "" custom_gui = "ag_action_planet_sweeper_selected_option" custom_tooltip = "ag_epsilon_planet_sweeper_weapon_effect_alt"
		trigger = {
			check_variable = { which = ag_num_epsilon_titans value > 0 }
			owner = {
				has_country_flag = ag_ship_subsystem_enabled_501_19
				has_country_flag = ag_epsilon_star_killer_planet_sweeper_mode
			}
		}
		is_dialog_only = yes
		response_text = ""
	}
	option = {
		name = "ag_ship_action.1.4" custom_gui = "ag_action_background_option"
		trigger = { check_variable = { which = ag_num_zeta_titans value > 0 } owner = { has_country_flag = ag_ship_subsystem_enabled_701_30 } }
		default_hide_option = yes
	}
	option = {
		name = "" custom_gui = "ag_action_gravity_weapon_option" custom_tooltip = "ag_zeta_ship_gravity_weapon_titans_effect"
		trigger = {
			check_variable = { which = ag_num_zeta_titans value > 0 } owner = { has_country_flag = ag_ship_subsystem_enabled_701_30 }
			NOT = { check_variable = { which = ag_num_zeta_titans value = ag_num_zeta_titans_gra } }
		}
		allow = {
			custom_tooltip = { fail_text = "ag_requires_no_in_battle" is_in_combat = no }
			custom_tooltip = { fail_text = "ag_requires_no_in_badly_damaged" any_owned_ship = { has_hp_percentage > 0.85 } }
			custom_tooltip = { fail_text = "ag_requires_no_change_weapon_cooldown" any_owned_ship = {
				is_ship_size = ag_zeta_titan
				NOR = { has_ship_flag = ag_zeta_ship_gravity_weapon has_ship_flag = ag_zeta_ship_change_weapon_cooldown }
			} }
		}
		hidden_effect = {
			every_owned_ship = {
				limit = { is_ship_size = ag_zeta_titan NOR = { has_ship_flag = ag_zeta_ship_gravity_weapon has_ship_flag = ag_zeta_ship_change_weapon_cooldown } }
				ag_zeta_ship_change_weapon_effect = yes
			}
			fleet_event = { id = ag_ship_action.1 days = 1 }
		}
	}
	option = {
		name = "" custom_gui = "ag_action_gravity_weapon_selected_option" custom_tooltip = "ag_zeta_ship_gravity_weapon_titans_effect"
		trigger = {
			check_variable = { which = ag_num_zeta_titans value > 0 } owner = { has_country_flag = ag_ship_subsystem_enabled_701_30 }
			check_variable = { which = ag_num_zeta_titans value = ag_num_zeta_titans_gra }
		}
		is_dialog_only = yes
		response_text = ""
	}
	option = {
		name = "" custom_gui = "ag_action_psionics_option" custom_tooltip = "ag_zeta_ship_anti_psi_weapon_titans_effect"
		trigger = {
			check_variable = { which = ag_num_zeta_titans value > 0 } owner = { has_country_flag = ag_ship_subsystem_enabled_701_30 }
			NOT = { check_variable = { which = ag_num_zeta_titans value = ag_num_zeta_titans_psi } }
		}
		allow = {
			custom_tooltip = { fail_text = "ag_requires_no_in_battle" is_in_combat = no }
			custom_tooltip = { fail_text = "ag_requires_no_in_badly_damaged" any_owned_ship = { has_hp_percentage > 0.85 } }
			custom_tooltip = { fail_text = "ag_requires_no_change_weapon_cooldown" any_owned_ship = {
				is_ship_size = ag_zeta_titan has_ship_flag = ag_zeta_ship_gravity_weapon
				NOT = { has_ship_flag = ag_zeta_ship_change_weapon_cooldown }
			} }
		}
		hidden_effect = {
			every_owned_ship = {
				limit = { is_ship_size = ag_zeta_titan has_ship_flag = ag_zeta_ship_gravity_weapon NOT = { has_ship_flag = ag_zeta_ship_change_weapon_cooldown } }
				ag_zeta_ship_change_weapon_effect = yes
			}
			fleet_event = { id = ag_ship_action.1 days = 1 }
		}
	}
	option = {
		name = "" custom_gui = "ag_action_psionics_selected_option" custom_tooltip = "ag_zeta_ship_anti_psi_weapon_titans_effect"
		trigger = {
			check_variable = { which = ag_num_zeta_titans value > 0 } owner = { has_country_flag = ag_ship_subsystem_enabled_701_30 }
			check_variable = { which = ag_num_zeta_titans value = ag_num_zeta_titans_psi }
		}
		is_dialog_only = yes
		response_text = ""
	}
	option = {
		name = "ag_ship_action.1.5" custom_gui = "ag_action_background_option"
		trigger = { check_variable = { which = ag_num_zeta_battleships value > 0 } owner = { has_country_flag = ag_ship_subsystem_enabled_702_30 } }
		default_hide_option = yes
	}
	option = {
		name = "" custom_gui = "ag_action_gravity_weapon_option" custom_tooltip = "ag_zeta_ship_gravity_weapon_battleships_effect"
		trigger = {
			check_variable = { which = ag_num_zeta_battleships value > 0 } owner = { has_country_flag = ag_ship_subsystem_enabled_702_30 }
			NOT = { check_variable = { which = ag_num_zeta_battleships value = ag_num_zeta_battleships_gra } }
		}
		allow = {
			custom_tooltip = { fail_text = "ag_requires_no_in_battle" is_in_combat = no }
			custom_tooltip = { fail_text = "ag_requires_no_in_badly_damaged" any_owned_ship = { has_hp_percentage > 0.85 } }
			custom_tooltip = { fail_text = "ag_requires_no_change_weapon_cooldown" any_owned_ship = {
				is_ship_size = ag_zeta_battleship
				NOR = { has_ship_flag = ag_zeta_ship_gravity_weapon has_ship_flag = ag_zeta_ship_change_weapon_cooldown }
			} }
		}
		hidden_effect = {
			every_owned_ship = {
				limit = { is_ship_size = ag_zeta_battleship NOR = { has_ship_flag = ag_zeta_ship_gravity_weapon has_ship_flag = ag_zeta_ship_change_weapon_cooldown } }
				ag_zeta_ship_change_weapon_effect = yes
			}
			fleet_event = { id = ag_ship_action.1 days = 1 }
		}
	}
	option = {
		name = "" custom_gui = "ag_action_gravity_weapon_selected_option" custom_tooltip = "ag_zeta_ship_gravity_weapon_battleships_effect"
		trigger = {
			check_variable = { which = ag_num_zeta_battleships value > 0 } owner = { has_country_flag = ag_ship_subsystem_enabled_702_30 }
			check_variable = { which = ag_num_zeta_battleships value = ag_num_zeta_battleships_gra }
		}
		is_dialog_only = yes
		response_text = ""
	}
	option = {
		name = "" custom_gui = "ag_action_psionics_option" custom_tooltip = "ag_zeta_ship_anti_psi_weapon_battleships_effect"
		trigger = {
			check_variable = { which = ag_num_zeta_battleships value > 0 } owner = { has_country_flag = ag_ship_subsystem_enabled_702_30 }
			NOT = { check_variable = { which = ag_num_zeta_battleships value = ag_num_zeta_battleships_psi } }
		}
		allow = {
			custom_tooltip = { fail_text = "ag_requires_no_in_battle" is_in_combat = no }
			custom_tooltip = { fail_text = "ag_requires_no_in_badly_damaged" any_owned_ship = { has_hp_percentage > 0.85 } }
			custom_tooltip = { fail_text = "ag_requires_no_change_weapon_cooldown" any_owned_ship = {
				is_ship_size = ag_zeta_battleship has_ship_flag = ag_zeta_ship_gravity_weapon
				NOT = { has_ship_flag = ag_zeta_ship_change_weapon_cooldown }
			} }
		}
		hidden_effect = {
			every_owned_ship = {
				limit = { is_ship_size = ag_zeta_battleship has_ship_flag = ag_zeta_ship_gravity_weapon NOT = { has_ship_flag = ag_zeta_ship_change_weapon_cooldown } }
				ag_zeta_ship_change_weapon_effect = yes
			}
			fleet_event = { id = ag_ship_action.1 days = 1 }
		}
	}
	option = {
		name = "" custom_gui = "ag_action_psionics_selected_option" custom_tooltip = "ag_zeta_ship_anti_psi_weapon_battleships_effect"
		trigger = {
			check_variable = { which = ag_num_zeta_battleships value > 0 } owner = { has_country_flag = ag_ship_subsystem_enabled_702_30 }
			check_variable = { which = ag_num_zeta_battleships value = ag_num_zeta_battleships_psi }
		}
		is_dialog_only = yes
		response_text = ""
	}
	option = {
		name = "ag_ship_action.1.6" custom_gui = "ag_action_background_option"
		trigger = { check_variable = { which = ag_num_zeta_destroyers value > 0 } owner = { has_country_flag = ag_ship_subsystem_enabled_703_30 } }
		default_hide_option = yes
	}
	option = {
		name = "" custom_gui = "ag_action_gravity_weapon_option" custom_tooltip = "ag_zeta_ship_gravity_weapon_destroyers_effect"
		trigger = {
			check_variable = { which = ag_num_zeta_destroyers value > 0 } owner = { has_country_flag = ag_ship_subsystem_enabled_703_30 }
			NOT = { check_variable = { which = ag_num_zeta_destroyers value = ag_num_zeta_destroyers_gra } }
		}
		allow = {
			custom_tooltip = { fail_text = "ag_requires_no_in_battle" is_in_combat = no }
			custom_tooltip = { fail_text = "ag_requires_no_in_badly_damaged" any_owned_ship = { has_hp_percentage > 0.85 } }
			custom_tooltip = { fail_text = "ag_requires_no_change_weapon_cooldown" any_owned_ship = {
				is_ship_size = ag_zeta_destroyer
				NOR = { has_ship_flag = ag_zeta_ship_gravity_weapon has_ship_flag = ag_zeta_ship_change_weapon_cooldown }
			} }
		}
		hidden_effect = {
			every_owned_ship = {
				limit = { is_ship_size = ag_zeta_destroyer NOR = { has_ship_flag = ag_zeta_ship_gravity_weapon has_ship_flag = ag_zeta_ship_change_weapon_cooldown } }
				ag_zeta_ship_change_weapon_effect = yes
			}
			fleet_event = { id = ag_ship_action.1 days = 1 }
		}
	}
	option = {
		name = "" custom_gui = "ag_action_gravity_weapon_selected_option" custom_tooltip = "ag_zeta_ship_gravity_weapon_destroyers_effect"
		trigger = {
			check_variable = { which = ag_num_zeta_destroyers value > 0 } owner = { has_country_flag = ag_ship_subsystem_enabled_703_30 }
			check_variable = { which = ag_num_zeta_destroyers value = ag_num_zeta_destroyers_gra }
		}
		is_dialog_only = yes
		response_text = ""
	}
	option = {
		name = "" custom_gui = "ag_action_psionics_option" custom_tooltip = "ag_zeta_ship_anti_psi_weapon_destroyers_effect"
		trigger = {
			check_variable = { which = ag_num_zeta_destroyers value > 0 } owner = { has_country_flag = ag_ship_subsystem_enabled_703_30 }
			NOT = { check_variable = { which = ag_num_zeta_destroyers value = ag_num_zeta_destroyers_psi } }
		}
		allow = {
			custom_tooltip = { fail_text = "ag_requires_no_in_battle" is_in_combat = no }
			custom_tooltip = { fail_text = "ag_requires_no_in_badly_damaged" any_owned_ship = { has_hp_percentage > 0.85 } }
			custom_tooltip = { fail_text = "ag_requires_no_change_weapon_cooldown" any_owned_ship = {
				is_ship_size = ag_zeta_destroyer has_ship_flag = ag_zeta_ship_gravity_weapon
				NOT = { has_ship_flag = ag_zeta_ship_change_weapon_cooldown }
			} }
		}
		hidden_effect = {
			every_owned_ship = {
				limit = { is_ship_size = ag_zeta_destroyer has_ship_flag = ag_zeta_ship_gravity_weapon NOT = { has_ship_flag = ag_zeta_ship_change_weapon_cooldown } }
				ag_zeta_ship_change_weapon_effect = yes
			}
			fleet_event = { id = ag_ship_action.1 days = 1 }
		}
	}
	option = {
		name = "" custom_gui = "ag_action_psionics_selected_option" custom_tooltip = "ag_zeta_ship_anti_psi_weapon_destroyers_effect"
		trigger = {
			check_variable = { which = ag_num_zeta_destroyers value > 0 } owner = { has_country_flag = ag_ship_subsystem_enabled_703_30 }
			check_variable = { which = ag_num_zeta_destroyers value = ag_num_zeta_destroyers_psi }
		}
		is_dialog_only = yes
		response_text = ""
	}
}
