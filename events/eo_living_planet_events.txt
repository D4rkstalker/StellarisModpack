namespace = eo_living_planet

# Living planet main menu
country_event = {
	id = eo_living_planet.1
	title = eo_living_planet.1.title
	desc = {
		text = eo_living_planet.1.desc.planet_not_owned
		trigger = {
			owns_living_planet_of_from = no
		}
	}
############### Generic friendly
	desc = {
		text = eo_living_planet.1.desc.friendly.1
		trigger = {
			owns_living_planet_of_from = yes
			from = {
				opinion ={
					who = root
					value > 0
				}
			}
		}
	}
	desc = {
		text = eo_living_planet.1.desc.friendly.2
		trigger = {
			owns_living_planet_of_from = yes
			from = {
				opinion ={
					who = root
					value > 0
				}
			}
		}
	}
	desc = {
		text = eo_living_planet.1.desc.friendly.3
		trigger = {
			owns_living_planet_of_from = yes
			from = {
				opinion ={
					who = root
					value > 0
				}
			}
		}
	}
	desc = {
		text = eo_living_planet.1.desc.friendly.4
		trigger = {
			owns_living_planet_of_from = yes
			from = {
				opinion ={
					who = root
					value > 0
				}
			}
		}
	}
############### Hostile
	desc = {
		text = eo_living_planet.1.desc.hostile.1
		trigger = {
			owns_living_planet_of_from = yes
			from = {
				opinion ={
					who = root
					value < -90
				}
			}
		}
	}
	diplomatic_title = BLANK_STRING
	diplomatic = yes
	force_open = yes

	picture_event_data = {
		room = living_planet_room
	}

	is_triggered_only = yes

	trigger = {
		from = { is_country_type = living_planet }
		owns_living_planet_of_from = yes
		NOT = {
			has_country_flag = living_planet_diplomacy_engaged
		}
	}

	immediate = {
		set_country_flag = living_planet_diplomacy_engaged
	}

	after = {
		hidden_effect = {
			remove_country_flag = living_planet_diplomacy_engaged
		}
	}

	option = { # What are you
		name = eo_living_planet.1.a
		response_text = eo_living_planet.1.a.desc
		is_dialog_only = yes
	}
	option = { # Can we help you?
		name = eo_living_planet.1.b
		trigger = {
			owns_living_planet_of_from = yes
			from = {
				opinion ={
					who = root
					value >= -30
				}
			}
		}
		response_text = eo_living_planet.1.b.desc
		is_dialog_only = yes
	}
	option = { # Goodbye
		name = GOODBYE
		trigger = {
			owns_living_planet_of_from = yes
		}
	}
	option = { # No communications
		name = eo_living_planet.1.planet_not_owned
		trigger = {
			owns_living_planet_of_from = no
		}
		default_hide_option = yes
	}
}

planet_event = {
	id = eo_living_planet.2
	hide_window = yes
	is_triggered_only = yes

	trigger = {
		has_modifier = living_planet
	}

	immediate = {
		random_country = {
			limit = {
				has_country_flag = living_planet_@prev
			}
			set_name = {
				key = NAME_Living_Planet
				variable_string = "[prev.GetName]"
			}
		}
	}
}