namespace = projcrim_diplo

# The Crimson Thong: Comms Opened
country_event = {
	id = projcrim_diplo.0
	title = projcrim_diplo.0.name
	desc = {
		text = projcrim_diplo.0.desc_01
		trigger = {
			has_country_flag = throng_translated
		}
	}
	desc = {
		text = projcrim_diplo.0.desc_02
		trigger = {
			has_country_flag = throng_translated
		}
	}
	desc = {
		text = projcrim_diplo.0.desc_03
		trigger = {
			has_country_flag = throng_translated
		}
	}
	desc = {
		text = projcrim_diplo.0.desc_04
		trigger = {
			has_country_flag = throng_translated
		}
	}
	desc = {
		text = projcrim_diplo.0.desc_05
		trigger = {
			has_country_flag = throng_translated
		}
	}
	desc = {
		text = projcrim_diplo.0.desc_06
		trigger = {
			NOT = { has_country_flag = throng_translated }
		}
	}
	desc = {
		text = projcrim_diplo.0.desc_07
		trigger = {
			NOT = { has_country_flag = throng_translated }
		}
	}
	desc = {
		text = projcrim_diplo.0.desc_08
		trigger = {
			NOT = { has_country_flag = throng_translated }
		}
	}

	diplomatic = yes
	custom_gui = "crimson_throng_window"
	custom_gui_option = "crimson_throng_option"
	force_open = yes
	is_triggered_only = yes

	trigger = {
		FROM = { is_country_type = throng_country }
        NOR = {
			has_country_flag = throng_diplomacy_engaged
		}
		has_country_flag = projcrim_story_chain_completed
		# has_global_flag = projcrim_in_progress #readd
		# has_global_flag = crimson_throng_united
	}

	picture_event_data = {
		portrait = event_target:crimson_throng_country
		planet_background = pc_projcrim_afflicted
		#graphical_culture = event_target:throng_origin_world
		room = organic_room
	}

	immediate = {
		set_country_flag = throng_diplomacy_engaged
	}

	after = {
		hidden_effect = { remove_country_flag = throng_diplomacy_engaged }
	}

	option = {
		name = "projcrim_diplo.0.a"
		response_text = projcrim_diplo.0.a_reply
		is_dialog_only = yes
		trigger = {
			has_country_flag = throng_translated
		}
	}

	option = {
		name = "projcrim_diplo.0.b"
		response_text = projcrim_diplo.0.b_reply
		is_dialog_only = yes
		trigger = {
			has_country_flag = throng_translated
		}
	}

	option = {
		name = "projcrim_diplo.0.c"
		response_text = projcrim_diplo.0.c_reply
		is_dialog_only = yes
		trigger = {
			OR = {
				has_ethic = ethic_fanatic_xenophile
				has_ethic = ethic_xenophile
				has_ethic = ethic_fanatic_materialist
				has_ethic = ethic_materialist
			}
			has_country_flag = throng_translated
		}
	}

	option = {
		name = "projcrim_diplo.0.d"
		response_text = projcrim_diplo.0.d_reply
		is_dialog_only = yes
		trigger = {
			OR = {
				has_ethic = ethic_fanatic_xenophobe
				has_ethic = ethic_xenophobe
				has_ethic = ethic_fanatic_militarist
				has_ethic = ethic_militarist
			}
			has_country_flag = throng_translated
		}
	}

	option = {
		name = "projcrim_diplo.0.e"
		response_text = projcrim_diplo.0.e_reply
		trigger = {
			has_country_flag = throng_translated
		}
	}

	option = {
		name = "projcrim_diplo.0.a"
		response_text = projcrim_diplo.0.f_reply
		is_dialog_only = yes
		trigger = {
			NOT = { has_country_flag = throng_translated }
		}
	}

	option = {
		name = "projcrim_diplo.0.b"
		response_text = projcrim_diplo.0.g_reply
		is_dialog_only = yes
		trigger = {
			NOT = { has_country_flag = throng_translated }
		}
	}

	option = {
		name = "projcrim_diplo.0.e"
		response_text = projcrim_diplo.0.h_reply
		trigger = {
			NOT = { has_country_flag = throng_translated }
		}
	}
}

# The Crimson Thong: Contact Not Established
country_event = {
	id = projcrim_diplo.1
	title = projcrim_diplo.0.name
	desc = projcrim_diplo.1.desc

	diplomatic = yes
	custom_gui = "crimson_throng_window"
	custom_gui_option = "crimson_throng_option"
	force_open = yes
	is_triggered_only = yes

	trigger = {
		FROM = { is_country_type = throng_country }
        NOR = {
			has_country_flag = throng_diplomacy_engaged
			has_country_flag = projcrim_story_chain_completed
		}
		# has_global_flag = projcrim_in_progress #readd
		# has_global_flag = crimson_throng_united
	}

	picture_event_data = {
		room = no_video_feed_room
	}

	immediate = {
		set_country_flag = throng_diplomacy_engaged
	}

	after = {
		hidden_effect = { remove_country_flag = throng_diplomacy_engaged }
	}

	option = {
		name = "projcrim_diplo.1.a"
		response_text = projcrim_diplo.1.a_reply
		is_dialog_only = yes
	}

	option = {
		name = "projcrim_diplo.1.b"
		response_text = projcrim_diplo.1.b_reply
		is_dialog_only = yes
	}

	option = {
		name = "projcrim_diplo.0.e"
		response_text = projcrim_diplo.1.c_reply
	}
}

# The Crimson Thong: Comms Opened (THROUGH EVENT)
country_event = {
	id = projcrim_diplo.2
	title = projcrim_diplo.0.name
	desc = {
		text = projcrim_diplo.0.desc_01
		trigger = {
			has_country_flag = throng_translated
		}
	}
	desc = {
		text = projcrim_diplo.0.desc_02
		trigger = {
			has_country_flag = throng_translated
		}
	}
	desc = {
		text = projcrim_diplo.0.desc_03
		trigger = {
			has_country_flag = throng_translated
		}
	}
	desc = {
		text = projcrim_diplo.0.desc_04
		trigger = {
			has_country_flag = throng_translated
		}
	}
	desc = {
		text = projcrim_diplo.0.desc_05
		trigger = {
			has_country_flag = throng_translated
		}
	}
	desc = {
		text = projcrim_diplo.0.desc_06
		trigger = {
			NOT = { has_country_flag = throng_translated }
		}
	}
	desc = {
		text = projcrim_diplo.0.desc_07
		trigger = {
			NOT = { has_country_flag = throng_translated }
		}
	}
	desc = {
		text = projcrim_diplo.0.desc_08
		trigger = {
			NOT = { has_country_flag = throng_translated }
		}
	}

	diplomatic = yes
	custom_gui = "crimson_throng_window"
	custom_gui_option = "crimson_throng_option"
	force_open = yes
	is_triggered_only = yes

	trigger = {
		# Occurs on first discovering Throng origins
	}

	picture_event_data = {
		portrait = event_target:crimson_throng_country
		planet_background = pc_projcrim_afflicted
		#graphical_culture = event_target:throng_origin_world
		room = organic_room
	}

	immediate = {
		set_country_flag = throng_diplomacy_engaged
	}

	after = {
		hidden_effect = { remove_country_flag = throng_diplomacy_engaged }
	}

	option = {
		name = "projcrim_diplo.0.a"
		response_text = projcrim_diplo.0.a_reply
		is_dialog_only = yes
		trigger = {
			has_country_flag = throng_translated
		}
	}

	option = {
		name = "projcrim_diplo.0.b"
		response_text = projcrim_diplo.0.b_reply
		is_dialog_only = yes
		trigger = {
			has_country_flag = throng_translated
		}
	}

	option = {
		name = "projcrim_diplo.0.c"
		response_text = projcrim_diplo.0.c_reply
		is_dialog_only = yes
		trigger = {
			OR = {
				has_ethic = ethic_fanatic_xenophile
				has_ethic = ethic_xenophile
				has_ethic = ethic_fanatic_materialist
				has_ethic = ethic_materialist
			}
			has_country_flag = throng_translated
		}
	}

	option = {
		name = "projcrim_diplo.0.d"
		response_text = projcrim_diplo.0.d_reply
		trigger = {
			OR = {
				has_ethic = ethic_fanatic_xenophobe
				has_ethic = ethic_xenophobe
				has_ethic = ethic_fanatic_militarist
				has_ethic = ethic_militarist
			}
			has_country_flag = throng_translated
		}
	}

	option = {
		name = "projcrim_diplo.0.e"
		response_text = projcrim_diplo.0.e_reply
		trigger = {
			has_country_flag = throng_translated
		}
	}

	option = {
		name = "projcrim_diplo.0.a"
		response_text = projcrim_diplo.0.f_reply
		is_dialog_only = yes
		trigger = {
			NOT = { has_country_flag = throng_translated }
		}
	}

	option = {
		name = "projcrim_diplo.0.b"
		response_text = projcrim_diplo.0.g_reply
		is_dialog_only = yes
		trigger = {
			NOT = { has_country_flag = throng_translated }
		}
	}

	option = {
		name = "projcrim_diplo.0.e"
		response_text = projcrim_diplo.0.h_reply
		trigger = {
			NOT = { has_country_flag = throng_translated }
		}
	}
}