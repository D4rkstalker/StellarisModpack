namespace = z_performance

#_添加基础flag
event = {
	id = z_performance.1
	hide_window = yes
	is_triggered_only = yes

	trigger = {
		NOT = {
			has_global_flag = z_performance_installed
		}
	}
	immediate = {
		set_global_flag = z_performance_installed	#_MOD安装
		set_global_flag = z_performance_always		#_每日
		set_global_flag = z_allow_job_check			#_激活工作检测
		
	}
}

#_z_modmenu
country_event = {
	id = z_performance.11
	title = z_performance_title
	desc = z_performance_title_desc
	picture = GFX_evt_z_performance
	is_triggered_only = yes

	#_9天/月
	option = {
		name = z_performance.11.a
		custom_tooltip = z_performance.11.a.tooltip
		trigger = { has_global_flag = z_performance_always }
		hidden_effect = {
			remove_global_flag = z_allow_job_check
			remove_global_flag = z_performance_always
			set_global_flag = z_performance_high
			
			country_event = { id = z_performance.11 }
		}
	}
	#_6天/月
	option = {
		name = z_performance.11.b
		custom_tooltip = z_performance.11.b.tooltip
		trigger = { has_global_flag = z_performance_high }
		hidden_effect = {
			remove_global_flag = z_performance_high
			set_global_flag = z_performance_mid
			
			country_event = { id = z_performance.11 }
		}
	}
	#_3天/月
	option = {
		name = z_performance.11.c
		custom_tooltip = z_performance.11.c.tooltip
		trigger = { has_global_flag = z_performance_mid }
		hidden_effect = {
			
			remove_global_flag = z_performance_mid
			set_global_flag = z_performance_low
			
			country_event = { id = z_performance.11 }
		}
	}
	#_3天/2月
	option = {
		name = z_performance.11.d
		custom_tooltip = z_performance.11.d.tooltip
		trigger = { has_global_flag = z_performance_low }
		hidden_effect = {
			remove_global_flag = z_performance_low
			set_global_flag = z_performance_late
			set_global_flag = z_job_check_month_1
			
			country_event = { id = z_performance.11 }
		}
	}
	#_每日
	option = {
		name = z_performance.11.e
		custom_tooltip = z_performance.11.e.tooltip
		trigger = { has_global_flag = z_performance_late }
		hidden_effect = {
			remove_global_flag = z_allow_job_check
			remove_global_flag = z_job_check_month_1
			remove_global_flag = z_job_check_month_2
			remove_global_flag = z_performance_late
			set_global_flag = z_performance_always
			set_global_flag = z_allow_job_check
			
			country_event = { id = z_performance.11 }
		}
	}
	#_重启
	option = {
		name = z_performance.11.f
		custom_tooltip = z_performance.11.f.tooltip
		trigger = { has_global_flag = z_performance_never }
		hidden_effect = {
			remove_global_flag = z_performance_never
			set_global_flag = z_performance_high
			
			country_event = { id = z_performance.11 }
		}
	}
	#_关闭检测
	option = {
		name = z_performance.11.f1
		custom_tooltip = z_performance.11.f1.tooltip
		hidden_effect = {
			remove_global_flag = z_allow_job_check
			remove_global_flag = z_job_check_month_1
			remove_global_flag = z_job_check_month_2
			remove_global_flag = z_performance_always
			remove_global_flag = z_performance_high
			remove_global_flag = z_performance_mid
			remove_global_flag = z_performance_low
			remove_global_flag = z_performance_late
			
			set_global_flag = z_performance_never
			country_event = { id = z_performance.11 }
		}
	}
	#_Debug
	option = {
		name = z_performance.11.f2
		custom_tooltip = z_performance.11.f2.tooltip
		hidden_effect = {
			remove_global_flag = z_allow_job_check
			remove_global_flag = z_job_check_month_1
			remove_global_flag = z_job_check_month_2
			remove_global_flag = z_performance_always
			remove_global_flag = z_performance_high
			remove_global_flag = z_performance_mid
			remove_global_flag = z_performance_low
			remove_global_flag = z_performance_late
			remove_global_flag = z_performance_never
			
			set_global_flag = z_performance_always
			set_global_flag = z_allow_job_check
			
			country_event = { id = z_performance.11 }
		}
	}
	#_退回z_modmenu
	option = {
		name = z_performance.11.g
		custom_tooltip = z_performance.11.g.tooltip
		hidden_effect = {
			country_event = { id = z_modmenu.1 }
		}
	}
	#_关闭设置
	option = {
		name = z_performance.11.h
		custom_tooltip = z_performance.11.h.tooltip
	}
}



#_9天/月
event = {
	id = z_performance.2
	hide_window = yes
	is_triggered_only = yes
	
	trigger = {
		has_global_flag = z_performance_high
	}
	
	immediate = {
		set_timed_global_flag = { flag = z_performance1 days = 1 }
		set_timed_global_flag = { flag = z_allow_job_check days = 10 }
	}
}

#_6天/月
event = {
	id = z_performance.3
	hide_window = yes
	is_triggered_only = yes
	
	trigger = {
		has_global_flag = z_performance_mid
	}
	
	immediate = {
		set_timed_global_flag = { flag = z_performance1 days = 1 }
		set_timed_global_flag = { flag = z_allow_job_check days = 7 }
	}
}

#_3天/月
event = {
	id = z_performance.4
	hide_window = yes
	is_triggered_only = yes
	
	trigger = {
		has_global_flag = z_performance_low
	}
	
	immediate = {
		set_timed_global_flag = { flag = z_performance1 days = 1 }
		set_timed_global_flag = { flag = z_allow_job_check days = 4 }
	}
}

#_3天/2月
event = {
	id = z_performance.5
	hide_window = yes
	is_triggered_only = yes
	
	trigger = {
		has_global_flag = z_performance_late
	}
	
	immediate = {
		switch = {
			trigger = has_global_flag
			z_job_check_month_1 = {
				remove_global_flag = z_job_check_month_1
				set_global_flag = z_job_check_month_2
				set_timed_global_flag = { flag = z_performance1 days = 1 }
				set_timed_global_flag = { flag = z_allow_job_check days = 4 }
			}
			z_job_check_month_2 = {
				remove_global_flag = z_job_check_month_2
				set_global_flag = z_job_check_month_1
			}
		}
	}
}

#_23日手动检测
country_event = {
	id = z_performance.6
	hide_window = yes
	is_triggered_only = yes
	
	immediate = {
		set_timed_global_flag = { flag = z_manual_job_check days = 23 }
	}
}