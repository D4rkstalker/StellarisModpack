

namespace = ancrel


fleet_event = { 
	id = ancrel.13
	title = "ancrel.3.name"
	desc = ancrel.13.desc
	picture = GFX_evt_zro_4
	show_sound = event_finding_loot
	location = from

	archaeology = yes

	is_triggered_only = yes

	option = {
		name = ancrel.13.a
		medium_artifact_reward = yes
		owner = {
			set_global_flag = Zrocursor_system_discovered
			set_country_flag = last_zroni_system
			if = {
				limit = {
					any_system_within_border = { has_star_flag = precursor_zroni_1 }
				}
				random_system_within_border = {
					limit = { has_star_flag = precursor_zroni_1 }
					spawn_system = {
						min_distance = 10
						max_distance = 30
						max_jumps = 0
						initializer = "Zrocursor_system"
					}
				}
			}
			else = {
				random_system = {
					limit = { has_star_flag = precursor_zroni_1 }
					spawn_system = {
						min_distance = 10
						max_distance = 30
						max_jumps = 0
						initializer = "Zrocursor_system"
					}
				}
			}
		}
		random_system = {
			limit = { has_star_flag = Zrocursor }
			random_system_planet = {
				limit = { has_planet_flag = Zrocursor_homeworld }
				# Start -guilli
				# broken planet thus we give it a guaranteed shipyards and a deposit bonus
				if = {
					limit = {
						NOT = { has_global_flag = gpm_modifiers_precursor_disabled }
					}
					add_modifier = { days = -1 modifier = "gpm_precursor_shipyards" }
					solar_system = {
						set_star_flag = gpm_precursor_shipyards_star
					}
					gpm_set_shipyards_objects = yes
					set_planet_flag = "gpm_is_precursor_world"
				}
			}
			gpm_precursor_home_system_loop = yes
		}
	}
}