#############################################
# Primitive Surveyed
#############################################
namespace = nep_surveyed
ship_event = {
	id = nep_surveyed.1
	is_triggered_only = yes
	hide_window = yes

	trigger = {
		FROM = {
			AND = {
				has_owner = yes
				owner = {
					OR = {
						is_country_type = nep_primitive_highlander
						is_country_type = nep_primitive_machina
					}
				}
			}
		}
	}

	immediate = {
		owner = {
			save_event_target_as = ship_owner
			if = {
				limit = {
					NOT = { has_country_flag = encountered_first_primitive }
				}
				set_country_flag = encountered_first_primitive
			}
		}
		FROM = {
			if = {
				limit = {
					exists = owner
				}
				owner = {
					establish_contact = { who = event_target:ship_owner }
					establish_communications = event_target:ship_owner
					save_event_target_as = primitive_civ
				}
				save_event_target_as = primitive_planet
			}
		}
		if = {
			limit = {
				exists = event_target:primitive_civ
				event_target:primitive_civ = {
					NOT = { has_country_flag = humans_late_medieval_age }
					NOT = { has_country_flag = benefactor_empire }
					OR = {
						has_country_flag = stone_age
						has_country_flag = bronze_age
						has_country_flag = iron_age
						has_country_flag = late_medieval_age
						has_country_flag = renaissance_age
						has_country_flag = steam_age
					}
				}
			}
			owner = { country_event = { id = action.5 } }
			break = yes
		}
		if = {
			limit = {
				exists = event_target:primitive_civ
				event_target:primitive_civ = {
					NOR = {
						has_country_flag = humans_machine_age
						has_country_flag = humans_early_space_age
						has_country_flag = benefactor_empire
					}
					OR = {
						has_country_flag = industrial_age
						has_country_flag = machine_age
						has_country_flag = atomic_age
						has_country_flag = early_space_age
					}
				}
			}
			owner = { country_event = { id = action.6 } }
			break = yes
		}
	}
}

country_event = {
	id = nep_surveyed.2
	title = apoc.5.name
	desc = "apoc.5.desc"
	picture = GFX_evt_wormhole
	show_sound = event_radio_chatter
	location = fromfrom.solar_system

	is_triggered_only = yes

	trigger = {
		NOT = { has_country_flag = encountered_first_wormhole }
	}

	immediate = {
		set_country_flag = encountered_first_wormhole
		add_seen_bypass_type = wormhole
		fromfrom.solar_system = { save_event_target_as = wormhole_system }
	}

	option = {
		name = apoc.5.a
	}
}

ship_event = {
	id = nep_surveyed.3
	title = apoc.5.name
	desc = "apoc.5.desc"
	picture = GFX_evt_wormhole
	show_sound = event_radio_chatter
	location = FROM

	is_triggered_only = yes

	trigger = {
		owner = {
			NOT = { has_country_flag = encountered_first_wormhole }
		}
		FROM = {
			any_system_megastructure = {
				OR = {
					is_megastructure_type = nep_wormhole_wohp_mega
					is_megastructure_type = nep_wormhole_deus_mega
					is_megastructure_type = nep_wormhole_ugo_mega
				}
			}
		}
	}

	immediate = {
		from = { save_event_target_as = wormhole_system }
		owner = {
			set_country_flag = encountered_first_wormhole
			add_seen_bypass_type = wormhole
		}
	}

	option = {
		name = apoc.5.a
	}
}
#############################################
# Roll failed
#############################################
# namespace = nep_fail

# ship_event = {
	# id = nep_fail.1
	# title = "nep_fail.1.name"
	# desc = "nep_fail.1.desc"
	# picture = GFX_evt_ship_in_orbit
	# show_sound = event_ship_bridge
	# location = FROM
	
	# is_triggered_only = yes
	# immediate = {
		# if = {
			# limit = {
				# AND = {
					# has_global_flag = nep_X_creatures_spawn
					# has_global_flag = nep_wohp_spawn
					# has_global_flag = nep_omega_spawn
					# has_global_flag = nep_deus_spawn
				# }
			# }
			# remove_global_flag = nep_X_creatures_spawn
			# remove_global_flag = nep_wohp_spawn
			# remove_global_flag = nep_omgea_spawn
			# remove_global_flag = nep_deus_spawn
			# set_global_flag = nep_SEoOC_side_story_all_spawn
		# }
	# }
	
	# option = {
		# name = OK
	# }
# }


#############################################
# War of heaven primitive
#############################################

namespace = nep_wohp

ship_event = {
	id = nep_wohp.1
	hide_window = yes
	
	is_triggered_only = yes
	
	fire_only_once = yes
	
	immediate = {
		set_global_flag = nep_wohp_spawn
		owner = { set_country_flag = nep_wohp_player }
		no_scope = {
			spawn_system = {
				min_distance >= 509
				max_distance <= 520
				min_orientation_angle = -84
				max_orientation_angle = -92
				hyperlane = no
				initializer = nep_wohp_init
			}
		}
		event_target:nep_gaia_country = {
			set_country_flag = recently_advanced
		}
		event_target:nep_highlander_country = {
			set_country_flag = recently_advanced
			set_country_type = nep_primitive_highlander
			declare_war = {
				target = event_target:nep_gaia_country
				attacker_war_goal = wg_war_in_heaven_primitive
			}
		}
		# solar_system = {
			# if = {
				# limit = { has_natural_wormhole = no }
				# spawn_natural_wormhole = {
					# bypass_type = wormhole
					# random_pos = yes
				# }
			# }
			# else = {
				# closest_system = {
					# min_steps = 1
					# limit = { 
						# has_natural_wormhole = no 
						# is_fe_cluster = no
						# NOT = { has_star_flag = sealed_system }
						# NOT = { has_star_flag = hostile_system }
						# NOT = { has_star_flag = guardian }
					# }
					# spawn_natural_wormhole = {
						# bypass_type = wormhole
						# random_pos = yes
					# }
					# save_global_event_target_as = nep_wohp_system_alternative
				# }
				# set_global_flag = nep_wohp_system_alternative
			# }
		# }
		# random_system = {
			# limit = {
				# has_star_flag = nep_wohp_system
			# }
			# spawn_natural_wormhole = {
				# bypass_type = wormhole
				# random_pos = yes
			# }
			# if = { 
				# limit = { has_global_flag = nep_wohp_system_alternative }
				# link_wormholes = event_target:nep_wohp_system_alternative
			# }
			# else = {
				# link_wormholes = root.solar_system
			# }
		# }
		solar_system = {
			spawn_megastructure = {
				type = "nep_wormhole_wohp_mega"
				random_pos = yes
				orbit_angle = 360		# range of the randomization
			}
		}
		random_system = {
			limit = {
				has_star_flag = nep_wohp_system
			}
			#save_global_event_target_as = nep_wohp_system
			spawn_megastructure = {
				type = "nep_wormhole_wohp_mega"
				random_pos = yes
				orbit_angle = 360		# range of the randomization
			}			
		}
		owner = { country_event = { id = nep_wohp.1000 } }
	}
}

country_event = {
	id = nep_wohp.1000
	title = "nep_wohp.1000.name"
	desc = {
		trigger = { has_country_flag = encountered_first_wormhole }
		text = "nep_wohp.1000.desc"
	}
	desc = {
		trigger = { NOT = { has_country_flag = encountered_first_wormhole } }
		text = "nep_wohp.1000.desc.c"
	}
	# desc = {
		# trigger = { has_global_flag = nep_wohp_system_alternative } 
		# text = "nep_wohp.1000.desc.b"
	# }
	picture = GFX_evt_wormhole
	show_sound = event_ship_bridge
	location = FROM
	
	is_triggered_only = yes
	
	immediate = {
	
	}
	
	option = {
		name = OK
	}
	
	after = {		
		# remove_global_flag = nep_wohp_system_alternative
		# clear_global_event_target = nep_wohp_system_alternative
		if = {
			limit  = { NOT = { has_country_flag = encountered_first_wormhole } }
			country_event = { id = nep_surveyed.2 }
		}		
	}
}

fleet_event = {
	id = nep_wohp.2
	hide_window = yes
	
	is_triggered_only = yes
	
	fire_only_once = yes
	
	trigger = {
		owner = { has_country_flag = nep_wohp_player }
		from = { has_star_flag = nep_wohp_system }
	}
	
	immediate = {
		owner = { country_event = { id = nep_wohp.2000 } }
	}
}

country_event = {
	id = nep_wohp.2000
	title = "nep_wohp.2000.name"
	desc = "nep_wohp.2000.desc"
	picture = GFX_evt_fallen_empire
	show_sound = event_ship_bridge
	location = FROM
	
	is_triggered_only = yes
	
	immediate = { }
	
	option = {
		name = OK
	}
}

#When observation station complete
ship_event = {
	id = nep_wohp.3000
	title = "nep_wohp.3000.name"
	desc = "nep_wohp.3000.desc"
	picture = GFX_evt_interior_battle
	show_sound = event_airlock
	location = THIS
	
	is_triggered_only = yes
	
	fire_only_once = yes
	
	trigger = {
		owner = { has_country_flag = nep_wohp_player }
		solar_system = { has_star_flag = nep_wohp_system }
	}
	
	immediate = {
		owner = {
			if = {
				limit = { NOT = { has_communications = event_target:nep_gaia_country } }
				establish_communications_no_message = event_target:nep_gaia_country
			}
			if = {
				limit = { NOT = { has_communications = event_target:nep_highlander_country } }
				establish_communications_no_message = event_target:nep_highlander_country
			}
		}
	}
	
	option = {
		name = OK
	}
}

country_event = {
	id = nep_wohp.3
	title = "nep_wohp.3.name"
	desc = "nep_wohp.3.desc"
	picture = GFX_evt_interior_battle
	show_sound = event_ground_battle
	location = FROMFROM.solar_system
	
	is_triggered_only = yes
	
	trigger = {	
		event_target:nep_highlander_country = {
			capital_scope = {
				has_observation_outpost = yes
				observation_outpost_owner = { 
					exists = this
					is_same_value = root.owner
				}
			}
		}
		NOR = {
			is_hostile = event_target:nep_gaia_country
			is_hostile = event_target:nep_highlander_country
		}
	}
	
	immediate = {
	}
	
	option = {
		name = nep_wohp.3.a
		trigger = {
			NOT = {
				OR = {
					has_ethic = ethic_gestalt_consciousness
					has_ethic = ethic_xenophobe
					has_ethic = ethic_fanatic_xenophobe
					has_ethic = ethic_fanatic_pacifist
					has_ethic = ethic_fanatic_authoritarian
				}
			}
		}
		hidden_effect = {
			country_event = { id = nep_wohp.4 }
		}
	}
	
	option = {
		name = nep_wohp.3.b
		trigger = {
			NOT = {
				OR = {
					has_ethic = ethic_gestalt_consciousness
					has_ethic = ethic_xenophobe
					has_ethic = ethic_fanatic_xenophobe
					has_ethic = ethic_pacifist
					has_ethic = ethic_fanatic_pacifist
					has_ethic = ethic_fanatic_egalitarian
					has_ethic = ethic_xenophile
					has_ethic = ethic_fanatic_xenophile
				}
			}
		}
		hidden_effect = {
			country_event = { id = nep_wohp.5 }
		}
	}
	
	option = {
		name = nep_wohp.3.c
		hidden_effect = {
			country_event = { id = nep_wohp.6 }
		}
	}
}

#When you choose Gaia
country_event = {
	id = nep_wohp.4
	title = "nep_wohp.4.name"
	desc = "nep_wohp.4.desc"

	diplomatic = yes
	
	is_triggered_only = yes
		
	picture_event_data = {
		portrait = event_target:nep_gaia_country
		planet_background = event_target:nep_gaia_country
		graphical_culture = event_target:nep_gaia_country
		city_level = event_target:nep_gaia_country
		room = event_target:nep_gaia_country
	}
	
	trigger = {
		NOR = {
			is_hostile = event_target:nep_gaia_country
			is_hostile = event_target:nep_highlander_country
		}
	}
	
	immediate = {
	
	}
	
	option = {
		name = nep_wohp.4.a
		response_text = nep_wohp.4.a.response
		is_dialog_only = yes
	}
	
	option = {
		name = nep_wohp.4.b
		default_hide_option = yes
		hidden_effect = {
			country_event = { id = nep_wohp.41 }
		}
	}
}

country_event = {
	id = nep_wohp.41
	title = "nep_wohp.41.name"
	desc = "nep_wohp.41.desc"

	diplomatic = yes
	
	is_triggered_only = yes
		
	picture_event_data = {
		portrait = event_target:nep_gaia_country
		planet_background = event_target:nep_gaia_country
		graphical_culture = event_target:nep_gaia_country
		city_level = event_target:nep_gaia_country
		room = event_target:nep_gaia_country
	}
	
	immediate = {
	
	}
	
	option = {
		name = nep_wohp.41.a
		default_hide_option = yes
		hidden_effect = {
			country_event = { id = nep_wohp.6 }
		}
	}
	
	option = {
		name = nep_wohp.41.b
		custom_tooltip = nep_wohp.41.b.tooltip
		enable_special_project = {
			name = nep_gaia_assist_project
			owner = this
			location = event_target:nep_gaia_country.capital_scope
		}
		hidden_effect = {
			country_event = { id = nep_wohp.42 days = 30 random = 60 }
			set_country_flag = nep_gaia_assist
		}
	}
}

country_event = {
	id = nep_wohp.42
	title = "nep_wohp.42.name"
	desc = "nep_wohp.42.desc"
	
	diplomatic = yes
	
	is_triggered_only = yes
	
	trigger = {
		NOT = {
			is_hostile = event_target:nep_gaia_country
		}
	}
	
	picture_event_data = {
		portrait = event_target:nep_gaia_country
		planet_background = event_target:nep_gaia_country
		graphical_culture = event_target:nep_gaia_country
		city_level = event_target:nep_gaia_country
		room = event_target:nep_gaia_country
	}
	
	immediate = {
	
	}
	
	option = {
		name = nep_wohp.42.a
		add_resource = {
			energy = -500
			consumer_goods = -250
			alloys = -150
		}
		hidden_effect = {
			set_country_flag = nep_gaia_assist_2
		}
	}
	
	option = {
		name = nep_wohp.42.b
		default_hide_option = yes
		hidden_effect = {
			country_event = { id = nep_wohp.42 days = 60 }
		}
	}
	
	option = {
		name = nep_wohp.42.c
		hidden_effect = {
			country_event = { id = nep_wohp.42 days = 180 }
		}
	}
}

country_event = {
	id = nep_wohp.43
	title = "nep_wohp.43.name"
	desc = "nep_wohp.43.desc"
	
	diplomatic = yes
	
	mean_time_to_happen = {
		days = 90
	}
	
	trigger = {
		has_country_flag = nep_gaia_assist_1
		has_country_flag = nep_gaia_assist_2
		NOT = { has_special_project = nep_gaia_assist_project_2 }
		NOT = {
			is_hostile = event_target:nep_gaia_country
		}
	}
	
	picture_event_data = {
		portrait = event_target:nep_gaia_country
		planet_background = event_target:nep_gaia_country
		graphical_culture = event_target:nep_gaia_country
		city_level = event_target:nep_gaia_country
		room = event_target:nep_gaia_country
	}
	
	immediate = {
	
	}
	
	option = {
		name = nep_wohp.43.a
		custom_tooltip = nep_wohp.43.a.tooltip
		enable_special_project = {
			name = nep_gaia_assist_project_2
			owner = this
			location = event_target:nep_highlander_country.capital_scope
		}
	}
}

country_event = {
	id = nep_wohp.44
	title = "nep_wohp.44.name"
	desc = "nep_wohp.44.desc"
	picture = GFX_evt_interior_battle
	show_sound = event_ground_battle
	
	is_triggered_only = yes
	
	trigger = {
		NOT = {
			is_hostile = event_target:nep_gaia_country
		}
	}
	
	immediate = {
		country_event = { id = nep_wohp.45 days = 10 }
		remove_country_flag = nep_gaia_assist_1
		remove_country_flag = nep_gaia_assist_2
	}
	
	option = {
		name = OK
	}
}
	
country_event = {
	id = nep_wohp.45
	title = "nep_wohp.45.name"
	desc = "nep_wohp.45.desc"
	picture = GFX_evt_interior_battle
	show_sound = event_ground_battle
	location = event_target:nep_highlander_country.capital_scope
	
	is_triggered_only = yes
		
	trigger = {
		NOT = {
			is_hostile = event_target:nep_gaia_country
		}
	}
	
	immediate = {
		set_country_flag = nep_gaia_assist_war
		event_target:nep_highlander_country.capital_scope = {
			while = {
				count = 10
				create_army = {
					name = "NAME_nep_Gaia_assault_force"
					owner = event_target:nep_gaia_country
					species = event_target:nep_gaia_species
					type = nep_gaia_super_army
				}
			}
		}
		if = {
			limit = { NOT = { is_at_war_with = event_target:nep_highlander_country } }
			declare_war = {
				target = event_target:nep_highlander_country
				attacker_war_goal = wg_war_in_heaven_primitive
			}
		}
	}
	
	option = {
		name = OK
	}
}

country_event = {
	id = nep_wohp.46
	hide_window = yes
	
	is_triggered_only = yes
	
	trigger = {
		has_global_flag = nep_wohp_spawn
		OR = {
			has_country_flag = nep_gaia_assist_war
			is_same_value = event_target:nep_gaia_country
		}
		any_country = { has_country_flag = nep_gaia_assist_war }
		FromFrom = { is_same_value = event_target:nep_highlander_country.capital_scope }
		NOT = {
			is_hostile = event_target:nep_gaia_country
		}
	}
	
	immediate = {
		set_global_flag = nep_wohp_end
		random_country = {
			limit = { has_country_flag = nep_gaia_assist_war }
			remove_country_flag = nep_gaia_assist_war
			country_event = { id = nep_wohp.460 }
			country_event = { id = nep_wohp.48 days = 720 random = 360 }
		}
		fromfrom = {
			set_owner = event_target:nep_gaia_country
		}
	}
}

country_event = {
	id = nep_wohp.460
	title = "nep_wohp.460.name"
	desc = "nep_wohp.460.desc"
	picture = GFX_evt_victorious_army
	show_sound = event_ground_battle
	location = event_target:nep_gaia_country.capital_scope
	
	is_triggered_only = yes
	
	immediate = { }
	
	option = {
		name = OK
	}
}

country_event = {
	id = nep_wohp.47
	hide_window = yes
	
	is_triggered_only = yes
	
	trigger = {
		has_global_flag = nep_wohp_spawn
		exists = event_target:nep_gaia_country
		OR = {
			has_country_flag = nep_gaia_assist_war
			is_same_value = event_target:nep_gaia_country
		}
		any_country = { has_country_flag = nep_gaia_assist_war }
		FromFrom = { is_same_value = event_target:nep_highlander_country.capital_scope }
		NOT = {
			is_hostile = event_target:nep_gaia_country
		}
	}
	
	immediate = {
		random_country = {
			limit = { has_country_flag = nep_gaia_assist_war }
			remove_country_flag = nep_gaia_assist_war
			country_event = { id = nep_wohp.470 }
			country_event = { id = nep_wohp.42 days = 30 random = 60 }
		}
	}
}

country_event = {
	id = nep_wohp.470
	title = "nep_wohp.470.name"
	desc = "nep_wohp.470.desc"
	picture = GFX_evt_interior_battle
	show_sound = event_ground_battle
	location = event_target:nep_highlander_country.capital_scope
	
	is_triggered_only = yes
	
	trigger = {
		NOT = {
			is_hostile = event_target:nep_gaia_country
		}
	}
	
	immediate = { }
	
	option = {
		name = nep_wohp.470.a
		enable_special_project = {
			name = nep_gaia_assist_project
			owner = this
			location = event_target:nep_gaia_country.capital_scope
		}
	}
}

country_event = {
	id = nep_wohp.48
	title = "nep_wohp.48.name"
	desc = "nep_wohp.48.desc"
	picture = GFX_evt_metropolis
	show_sound = event_factions
	location = event_target:nep_gaia_country.capital_scope
	
	is_triggered_only = yes
	
	trigger = {
		event_target:nep_gaia_country = {
			capital_scope = {
				exists = this
				is_planet_class = pc_nuked
				OR = {
					NOT = { exists = controller	}
					controller = { is_same_value = event_target:nep_gaia_country }
				}
			}
		}
		NOT = {
			is_hostile = event_target:nep_gaia_country
		}
	}
	
	immediate = {
		remove_country_flag = nep_wohp_player
		remove_country_flag = nep_wohp_see_resistance
		remove_country_flag = nep_wohp_see_colosseum
		event_target:nep_gaia_country.capital_scope = {
			solar_system = {
				every_system_planet = {
					limit = { has_observation_outpost = yes }
					observation_outpost_owner = {
						# Xenoist Faction Enlightenment Demand
						set_timed_country_flag = {
							flag = recent_enlightenment_timed
							days = 7200 # 20 years
						}
					}
					observation_outpost = {
						dismantle = yes
					}
				}
			}
			owner = { save_event_target_as = primitive_country }
			solar_system = {
				if = {
					limit = {
						starbase = { owner = { is_same_value = root } }
					}
					starbase = {
						set_owner = event_target:primitive_country
					}
				}
				every_system_planet = {
					limit = {
						exists = owner
						owner = { is_same_value = root }
					}
					set_owner = event_target:primitive_country			
				}
			}
			change_pc = pc_gaia
			set_planet_entity = { entity = pc_gaia }
		}
		event_target:primitive_country = {
			set_awareness = 100
			remove_country_flag = recently_advanced
			set_country_flag = early_space_age
			set_country_flag = primitives_can_into_space
			set_country_type = default
			set_species_graphical_culture = yes
			add_resource = { minerals = 10000 }
			add_resource = { energy = 10000 }
			add_resource = { food = 3000 }
			add_resource = { consumer_goods = 3000 }
			add_resource = { alloys = 7000 }
			add_resource = { influence = 1000 }
			add_resource = { unity = 27000 }
			if = {
				limit = {
					has_technology = tech_destroyers
				}
				create_fleet = {
					effect = {
						set_owner = prev
						while = {
							count = 8
							create_ship = {
								name = random
								random_existing_design = destroyer
								graphical_culture = prev
							}
						}
						set_location = {
							target = prev.capital_scope
							distance = 10
							angle = random
						}
					}
				}
			}
			if = {
				limit = {
					has_technology = tech_cruisers
				}
				create_fleet = {
					effect = {
						set_owner = prev
						while = {
							count = 6
							create_ship = {
								name = random
								random_existing_design = cruiser
								graphical_culture = prev
							}
						}
						set_location = {
							target = prev.capital_scope
							distance = 10
							angle = random
						}
					}
				}
			}
			if = {
				limit = {
					has_technology = tech_battleships
				}
				create_fleet = {
					effect = {
						set_owner = prev
						while = {
							count = 2
							create_ship = {
								name = random
								random_existing_design = battleship
								graphical_culture = prev
							}
						}
						set_location = {
							target = prev.capital_scope
							distance = 10
							angle = random
						}
					}
				}
			}
			create_fleet = {
				effect = {
					set_owner = prev
					while = {
						count = 10
						create_ship = {
							name = random
							random_existing_design = corvette
							graphical_culture = prev
						}
					}
				}
			}
			capital_scope = {
				observation_outpost = {
					dismantle = yes
				}
				clear_blockers = yes
				remove_all_buildings = yes
				generate_start_buildings_and_districts = yes
				solar_system.starbase = {
					set_owner = root.from
				}
			}
			change_government = {
				authority = auth_democratic
				civics = {
					civic = civic_free_haven
					civic = civic_beacon_of_liberty
				}
			}
			set_name = "NAME_nep_Gaia_Republic"
			add_opinion_modifier = { who = root modifier = nep_you_are_our_Savior }
			if = {
				limit = {
					root = { is_country_type = default }
				}
				if = {
					limit = {
						root = { has_valid_civic = "civic_inwards_perfection" }
					}
					set_subject_of = {
						who = root
						preset = preset_tributary
					}
				}			
				else = {
					set_subject_of = {
						who = root
						preset = preset_protectorate
					}
				}
			}
			give_technology = { tech = tech_gaia_super_weapon message = no }
			give_technology = { tech = tech_wormhole_stabilization message = no }
			capital_scope = {
				solar_system = {
					every_system_planet = {
						limit = { 
							exists = owner 
						}
						add_modifier = {
							modifier = nep_black_technologies
							days = -1
						}
					}
				}
			}
			#science
			create_fleet = {
				effect = {
					set_owner = event_target:nep_gaia_country

					create_ship = {
						#name = random
						random_existing_design = science
					}

					set_fleet_stance = evasive				
					set_location = event_target:nep_gaia_country.capital_scope
					
					owner = {
						create_leader = {
							class = scientist
							sub_type = survey
							name = random
							species = owner_main_species
						}
					}
					set_leader = last_created_leader
				}			
			}				
			#constructor
			create_fleet = {
				effect = {
					set_owner = event_target:nep_gaia_country
					
					create_ship = {
						#name = random
						random_existing_design = constructor
					}
					
					set_fleet_stance = evasive
					set_location = event_target:nep_gaia_country.capital_scope
				}
			}
		}
		if = {
			limit = { exists = event_target:nep_highlander_country }
			event_target:nep_highlander_country = {
				destroy_country = yes
			}
		}
	}
	
	option = {
		name = "observation.2000.a"
		add_research_option = tech_gaia_super_weapon
	}
}

#When you choose Highlander
country_event = {
	id = nep_wohp.5
	title = "nep_wohp.5.name"
	desc = "nep_wohp.5.desc"

	diplomatic = yes
	
	trigger = {
		NOR = {
			is_hostile = event_target:nep_gaia_country
			is_hostile = event_target:nep_highlander_country
		}
	}
	
	is_triggered_only = yes
		
	picture_event_data = {
		portrait = event_target:nep_highlander_country
		planet_background = event_target:nep_highlander_country
		graphical_culture = event_target:nep_highlander_country
		city_level = event_target:nep_highlander_country
		room = event_target:nep_highlander_country
	}
	
	immediate = {
	
	}
	
	option = {
		name = nep_wohp.5.a
		response_text = nep_wohp.5.a.response
		is_dialog_only = yes
	}
	
	option = {
		name = nep_wohp.5.b
		default_hide_option = yes
		hidden_effect = {
			country_event = { id = nep_wohp.51 }
		}
	}
}

country_event = {
	id = nep_wohp.51
	title = "nep_wohp.51.name"
	desc = "nep_wohp.51.desc"

	diplomatic = yes
	
	is_triggered_only = yes
		
	picture_event_data = {
		portrait = event_target:nep_highlander_country
		planet_background = event_target:nep_highlander_country
		graphical_culture = event_target:nep_highlander_country
		city_level = event_target:nep_highlander_country
		room = event_target:nep_highlander_country
	}
	
	immediate = {
	
	}
	
	option = {
		name = nep_wohp.51.a
		default_hide_option = yes
		hidden_effect = {
			country_event = { id = nep_wohp.6 }
		}
	}
	
	option = {
		name = nep_wohp.51.b
		enable_special_project = {
			name = nep_highlander_conquer_project
			owner = this
			location = event_target:nep_gaia_country.capital_scope
		}
		hidden_effect = {
			country_event = { id = nep_wohp.52 days = 30 random = 60 }
			set_country_flag = nep_highlander_assist
		}
	}
}

country_event = {
	id = nep_wohp.52
	title = "nep_wohp.52.name"
	desc = "nep_wohp.52.desc"
	
	diplomatic = yes
	
	is_triggered_only = yes
	
	trigger = {
		NOT = {
			is_hostile = event_target:nep_highlander_country
		}
	}
	
	picture_event_data = {
		portrait = event_target:nep_highlander_country
		planet_background = event_target:nep_highlander_country
		graphical_culture = event_target:nep_highlander_country
		city_level = event_target:nep_highlander_country
		room = event_target:nep_highlander_country
	}
	
	immediate = {
	
	}
	
	option = {
		name = nep_wohp.52.a
		add_resource = {
			energy = -1000
			consumer_goods = -300
		}
		hidden_effect = {
			set_country_flag = nep_highlander_assist_2
		}
	}
	
	option = {
		name = nep_wohp.42.b
		default_hide_option = yes
		hidden_effect = {
			country_event = { id = nep_wohp.52 days = 60 }
		}
	}
	
	option = {
		name = nep_wohp.42.c
		hidden_effect = {
			country_event = { id = nep_wohp.52 days = 180 }
		}
	}
}

country_event = {
	id = nep_wohp.53
	title = "nep_wohp.53.name"
	desc = "nep_wohp.53.desc"
	
	diplomatic = yes
	
	mean_time_to_happen = {
		days = 90
	}
	
	trigger = {
		has_country_flag = nep_highlander_assist_1
		has_country_flag = nep_highlander_assist_2
		NOT = { has_special_project = nep_highlander_conquer_project_2 }
		NOT = {
			is_hostile = event_target:nep_highlander_country
		}
	}
	
	picture_event_data = {
		portrait = event_target:nep_highlander_country
		planet_background = event_target:nep_highlander_country
		graphical_culture = event_target:nep_highlander_country
		city_level = event_target:nep_highlander_country
		room = event_target:nep_highlander_country
	}
	
	immediate = {
	
	}
	
	option = {
		name = nep_wohp.53.a
		enable_special_project = {
			name = nep_highlander_conquer_project_2
			owner = this
			location = event_target:nep_gaia_country.capital_scope
		}
	}
}

country_event = {
	id = nep_wohp.54
	title = "nep_wohp.54.name"
	desc = "nep_wohp.54.desc"
	picture = GFX_evt_interior_battle
	show_sound = event_ground_battle
	
	is_triggered_only = yes
	
	trigger = {
		NOT = {
			is_hostile = event_target:nep_highlander_country
		}
	}
	
	immediate = {
		country_event = { id = nep_wohp.55 days = 10 }
		remove_country_flag = nep_highlander_assist_1
		remove_country_flag = nep_highlander_assist_2
	}
	
	option = {
		name = OK
	}
}
	
country_event = {
	id = nep_wohp.55
	title = "nep_wohp.55.name"
	desc = "nep_wohp.55.desc"
	picture = GFX_evt_interior_battle
	show_sound = event_ground_battle
	location = event_target:nep_gaia_country.capital_scope
	
	is_triggered_only = yes
	
	trigger = {
		NOT = {
			is_hostile = event_target:nep_highlander_country
		}
	}
		
	immediate = {
		set_country_flag = nep_highlander_assist_war
		event_target:nep_gaia_country.capital_scope = {
			while = {
				count = 10
				create_army = {
					name = "NAME_Gaia_assault_force"
					owner = event_target:nep_highlander_country
					species = event_target:nep_gaia_species
					type = nep_gene_slave_army
				}
			}
		}
		if = {
			limit = { NOT = { is_at_war_with = event_target:nep_gaia_country } }
			declare_war = {
				target = event_target:nep_gaia_country
				attacker_war_goal = wg_war_in_heaven_primitive
			}
		}
	}
	
	option = {
		name = OK
	}
}

country_event = {
	id = nep_wohp.56
	hide_window = yes
	
	is_triggered_only = yes
	
	trigger = {
		has_global_flag = nep_wohp_spawn
		OR = {
			has_country_flag = nep_highlander_assist_war
			is_same_value = event_target:nep_highlander_country
		}
		any_country = { has_country_flag = nep_highlander_assist_war }
		FromFrom = { is_same_value = event_target:nep_gaia_country.capital_scope }
		NOT = {
			is_hostile = event_target:nep_highlander_country
		}
	}
	
	immediate = {
		set_global_flag = nep_wohp_end
		random_country = {
			limit = { has_country_flag = nep_highlander_assist_war }
			remove_country_flag = nep_highlander_assist_war
			country_event = { id = nep_wohp.560 }
			country_event = { id = nep_wohp.58 days = 720 random = 360 }
		}
		fromfrom = {
			set_owner = event_target:nep_highlander_country
		}
	}
}

country_event = {
	id = nep_wohp.560
	title = "nep_wohp.560.name"
	desc = "nep_wohp.560.desc"
	picture = GFX_evt_victorious_army
	show_sound = event_ground_battle
	location = event_target:nep_highlander_country.capital_scope
	
	is_triggered_only = yes
	
	immediate = { }
	
	option = {
		name = nep_wohp.560.a
	}	
}

country_event = {
	id = nep_wohp.57
	hide_window = yes
	
	is_triggered_only = yes
	
	trigger = {
		has_global_flag = nep_wohp_spawn
		exists = event_target:nep_highlander_country
		OR = {
			has_country_flag = nep_highlander_assist_war
			is_same_value = event_target:nep_highlander_country
		}
		any_country = { has_country_flag = nep_highlander_assist_war }
		FromFrom = { is_same_value = event_target:nep_gaia_country.capital_scope }
		NOT = {
			is_hostile = event_target:nep_highlander_country
		}
	}
	
	immediate = {
		random_country = {
			limit = { has_country_flag = nep_highlander_assist_war }
			remove_country_flag = nep_highlander_assist_war
			country_event = { id = nep_wohp.570 }
			country_event = { id = nep_wohp.52 days = 30 random = 60 }
		}
	}
}

country_event = {
	id = nep_wohp.570
	title = "nep_wohp.570.name"
	desc = "nep_wohp.570.desc"
	picture = GFX_evt_interior_battle
	show_sound = event_ground_battle
	location = event_target:nep_gaia_country.capital_scope
	
	is_triggered_only = yes
	
	immediate = { }
	
	option = {
		name = nep_wohp.570.a
		enable_special_project = {
			name = nep_highlander_conquer_project
			owner = this
			location = event_target:nep_gaia_country.capital_scope
		}
	}
}

country_event = {
	id = nep_wohp.58
	title = "nep_wohp.58.name"
	desc = "nep_wohp.58.desc"
	picture = GFX_evt_metropolis
	show_sound = event_factions
	location = event_target:nep_highlander_country.capital_scope
	
	is_triggered_only = yes
	
	trigger = {		
		event_target:nep_highlander_country = {
			exists = capital_scope
			capital_scope = {
				is_planet_class = pc_habitat
				OR = {
					controller = { is_same_value = event_target:nep_highlander_country }
				}
			}
		}
		NOT = {
			is_hostile = event_target:nep_highlander_country
		}
	}
	
	immediate = {
		remove_country_flag = nep_wohp_player
		remove_country_flag = nep_wohp_see_resistance
		remove_country_flag = nep_wohp_see_colosseum
		event_target:nep_highlander_country = {
			set_country_type = primitive
		}
		event_target:nep_highlander_country.capital_scope = {
			solar_system = {
				every_system_planet = {
					limit = { has_observation_outpost = yes }
					observation_outpost_owner = {
						# Xenoist Faction Enlightenment Demand
						set_timed_country_flag = {
							flag = recent_enlightenment_timed
							days = 7200 # 20 years
						}
					}
					observation_outpost = {
						dismantle = yes
					}
				}
			}
			owner = { save_event_target_as = primitive_country }
			solar_system = {
				if = {
					limit = {
						starbase = { owner = { is_same_value = root } }
					}
					starbase = {
						set_owner = event_target:primitive_country
					}
				}
				every_system_planet = {
					limit = {
						is_planet_class = pc_nuked
					}
					change_pc = pc_shattered
					set_planet_entity = { entity = pc_shattered }
					clear_deposits = yes
					add_deposit = d_minerals_10
					add_deposit = d_energy_6
				}
				every_system_planet = {
					limit = {
						exists = owner
						owner = { is_same_value = root }
					}
					set_owner = event_target:primitive_country			
				}
			}
			set_planet_size = 25
		}
		event_target:primitive_country = {
			remove_country_flag = recently_advanced
			set_country_flag = primitives_can_into_space
			set_country_type = default
			change_country_flag = random
			if = {
				limit = { is_species_class = MAM }
				set_graphical_culture = mammalian_01
			}
			if = {
				limit = { is_species_class = REP }
				set_graphical_culture = reptilian_01
			}
			if = {
				limit = { is_species_class = AVI }
				set_graphical_culture = avian_01
			}
			if = {
				limit = { is_species_class = ART }
				set_graphical_culture = arthropoid_01
			}
			if = {
				limit = { is_species_class = MOL }
				set_graphical_culture = molluscoid_01
			}
			if = {
				limit = { is_species_class = FUN }
				set_graphical_culture = fungoid_01
			}
			if = {
				limit = { is_species_class = PLANT }
				set_graphical_culture = plantoid_01
			}
			change_government = {
				authority = auth_imperial
				civics = {
					civic = civic_imperial_cult
					civic = civic_aristocratic_elite
				}
			}
			set_name = "NAME_nep_Highlander_Kingdom"
			add_resource = {
				energy = 500
				minerals = 1000 # enough for a spaceport and then some
				influence = 300
			}
			capital_scope = {
				clear_blockers = yes
				while = {
					limit = { 
						num_pops < 8
						#free_housing > 0
					}
					create_pop = {
						species = owner
					}
				}
				while = {
					limit = { has_building = building_primitive_farm }
					remove_building = building_primitive_farm
				}
				while = {
					limit = { has_building = building_primitive_factory }
					remove_building = building_primitive_factory
				}
				while = {
					limit = { has_building = building_urban_dwellings }
					remove_building = building_urban_dwellings
				}
				while = {
					limit = { has_building = building_primitive_mine }
					remove_building = building_primitive_mine
				}
				while = {
					limit = { has_building = building_primitive_power_plant }
					remove_building = building_primitive_power_plant
				}
				while = {
					count = 10
					create_pop = { species = event_target:nep_gaia_country }
				}
				add_building = building_nep_gaia_emulator
				add_building = building_nep_gaia_emulator
				add_district = district_hab_housing
				add_district = district_hab_housing
				add_district = district_hab_housing
				add_district = district_hab_housing
				add_district = district_hab_cultural
				remove_building = building_primitive_capital
				add_building = building_capital
				add_building = building_research_lab_1
				add_building = building_foundry_1
				add_building = building_factory_1
				
				remove_all_armies = yes
				solar_system = {
					if = {
						limit = {
							NOT = { exists = starbase }
						}
						create_starbase = {
							size = starbase_outpost
							owner = root
						}
					}
					else_if = {
						limit = {
							starbase = {
								NOT = { owner = { is_same_value = root } }
							}
						}	
						starbase = {
							set_owner = event_target:primitive_country
						}
					}
				}				
			}
			add_opinion_modifier = { who = root modifier = nep_you_are_very_strong }
			if = {
				limit = {
					root = { is_country_type = default }
				}
				if = {
					limit = {
						root = { has_valid_civic = "civic_inwards_perfection" }
					}
					set_subject_of = {
						who = root
						preset = preset_tributary
					}
				}			
				else = {
					set_subject_of = {
						who = root
						preset = preset_protectorate
					}
				}
			}
			set_country_flag = nep_can_use_gene_slave
			give_technology = { tech = tech_wormhole_stabilization message = no }
			capital_scope = {
				solar_system = {
					every_system_planet = {
						limit = { 
							exists = owner 
						}
						add_modifier = {
							modifier = nep_black_technologies
							days = -1
						}
					}
				}
			}
			event_target:nep_gaia_species = {
				set_citizenship_type = { country = prev type = citizenship_slavery cooldown = no }
			}
			#science
			create_fleet = {
				effect = {
					set_owner = event_target:nep_highlander_country

					create_ship = {
						#name = random
						random_existing_design = science
					}

					set_fleet_stance = evasive				
					set_location = event_target:nep_highlander_country.capital_scope
					
					owner = {
						create_leader = {
							class = scientist
							sub_type = survey
							name = random
							species = owner_main_species
						}
					}
					set_leader = last_created_leader
				}			
			}
				
			#constructor
			create_fleet = {
				effect = {
					set_owner = event_target:nep_highlander_country
					
					create_ship = {
						#name = random
						random_existing_design = constructor
					}
					
					set_fleet_stance = evasive
					set_location = event_target:nep_highlander_country.capital_scope
				}
			}
			event_target:nep_gaia_country = {
				destroy_country = yes
			}
		}
	}
	
	option = {
		name = "observation.2000.a"
		#custom_tooltip = nep_wohp.58.a.tooltip
		hidden_effect = { root = { set_country_flag = nep_can_use_gene_slave } }
	}
}


#When you choose ignore them
country_event = {
	id = nep_wohp.6
	hide_window = yes
	
	is_triggered_only = yes
	
	immediate = {
		set_global_flag = nep_wohp_end
	}
}

#When invate Gaia
country_event = {
	id = nep_wohp.7
	title = "nep_wohp.7.name"
	desc = "nep_wohp.7.desc"
	picture = GFX_evt_interior_battle
	show_sound = event_ground_battle
	location = fromfrom
	
	is_triggered_only = yes
	
	trigger = {
		has_global_flag = nep_wohp_spawn
		NOT = { has_global_flag = nep_wohp_end }
		FromFrom = { is_same_value = event_target:nep_gaia_country.capital_scope }
		is_country_type = default
		NOR = {
			has_country_flag = nep_highlander_assist_war
			is_same_value = event_target:nep_highlander_country
		}
	}
	
	immediate = {
		set_global_flag = nep_wohp_end
	}
	
	option = { name = nep_wohp.7.a }
	option = { name = nep_wohp.7.b }
}

#When invate Highland
country_event = {
	id = nep_wohp.8
	title = "nep_wohp.8.name"
	desc = "nep_wohp.8.desc"
	picture = GFX_evt_interior_battle
	show_sound = event_ground_battle
	location = fromfrom
	
	is_triggered_only = yes
	
	trigger = {	
		has_global_flag = nep_wohp_spawn
		NOT = { has_global_flag = nep_wohp_end }
		FromFrom = { is_same_value = event_target:nep_highlander_country.capital_scope }
		is_country_type = default
		NOR = {
			has_country_flag = nep_gaia_assist_war
			is_same_value = event_target:nep_gaia_country
		}
	}
	
	immediate = {
		set_global_flag = nep_wohp_end
	}
	
	option = { name = nep_wohp.8.a }
	option = { name = nep_wohp.8.b }
}

#On_monthly_pulse
event = {
	id = nep_wohp.9
	hide_window = yes
	
	is_triggered_only = yes
	
	trigger = {
		has_global_flag = nep_wohp_spawn
		NOT = { has_global_flag = nep_wohp_end }
	}
	
	immediate = {
		if = {
			limit = { exists = event_target:nep_gaia_country }
			event_target:nep_gaia_country = {
				capital_scope = {
					if = {
						limit = { planet_devastation > 90 }
						if = { limit = { has_ground_combat = no } add_planet_devastation = -10 }					
					}
					else = {
						random_list = {
							1 = { if = { limit = { has_ground_combat = no } add_planet_devastation = -7 } }
							1 = { if = { limit = { has_ground_combat = no } add_planet_devastation = -4 } }
							1 = { if = { limit = { has_ground_combat = no } add_planet_devastation = -1 } }
							1 = { add_planet_devastation = 1 }
							1 = { add_planet_devastation = 4 }
							1 = { add_planet_devastation = 7 }
							1 = { if = { limit = { has_ground_combat = yes } add_planet_devastation = 5 }  }
						}
					}
					if = {
						limit = {
							has_ground_combat = no
							count_planet_army = {
								count < 12
							}
						}
						create_army = {
							name = "NAME_nep_Gaia_resist_force"
							owner = event_target:nep_gaia_country
							species = event_target:nep_gaia_species
							type = nep_gaia_super_army_defensive
						}
					}
					if = {
						limit = {
							has_ground_combat = no
							count_planet_army = {
								count < 12
							}
						}
						create_army = {
							name = "NAME_nep_Gaia_resist_force"
							owner = event_target:nep_gaia_country
							species = event_target:nep_gaia_species
							type = nep_gaia_super_army_defensive
						}
					}
					if = {
						limit = {
							has_ground_combat = no
							count_planet_army = {
								count < 12
							}
						}
						create_army = {
							name = "NAME_nep_Gaia_resist_force"
							owner = event_target:nep_gaia_country
							species = event_target:nep_gaia_species
							type = nep_gaia_super_army_defensive
						}
					}
					if = {
						limit = {
							has_ground_combat = no
							count_planet_army = {
								count < 12
							}
						}
						create_army = {
							name = "NAME_nep_Gaia_resist_force"
							owner = event_target:nep_gaia_country
							species = event_target:nep_gaia_species
							type = nep_gaia_super_army_defensive
						}
					}
					if = {
						limit = {
							has_ground_combat = no
							count_planet_army = {
								count < 12
							}
						}
						create_army = {
							name = "NAME_nep_Gaia_resist_force"
							owner = event_target:nep_gaia_country
							species = event_target:nep_gaia_species
							type = nep_gaia_super_army_defensive
						}
					}
				}
			}
		}
		if = {
			limit = { exists = event_target:nep_highlander_country }
			event_target:nep_highlander_country = {
				capital_scope = {
					if = {
						limit = {
							has_ground_combat = no
							count_planet_army = {
								count < 12
							}
						}
						create_army = {
							name = "NAME_nep_highlander_royal_ashes"
							owner = event_target:nep_highlander_country
							species = event_target:nep_gaia_species
							type = nep_gene_slave_army_defensive
						}
					}
					if = {
						limit = {
							has_ground_combat = no
							count_planet_army = {
								count < 12
							}
						}
						create_army = {
							name = "NAME_nep_highlander_royal_ashes"
							owner = event_target:nep_highlander_country
							species = event_target:nep_gaia_species
							type = nep_gene_slave_army_defensive
						}
					}
					if = {
						limit = {
							has_ground_combat = no
							count_planet_army = {
								count < 12
							}
						}
						create_army = {
							name = "NAME_nep_highlander_royal_ashes"
							owner = event_target:nep_highlander_country
							species = event_target:nep_gaia_species
							type = nep_gene_slave_army_defensive
						}
					}
					if = {
						limit = {
							has_ground_combat = no
							count_planet_army = {
								count < 12
							}
						}
						create_army = {
							name = "NAME_nep_highlander_royal_ashes"
							owner = event_target:nep_highlander_country
							species = event_target:nep_gaia_species
							type = nep_gene_slave_army_defensive
						}
					}
					if = {
						limit = {
							has_ground_combat = no
							count_planet_army = {
								count < 12
							}
						}
						create_army = {
							name = "NAME_nep_highlander_royal_ashes"
							owner = event_target:nep_highlander_country
							species = event_target:nep_gaia_species
							type = nep_gene_slave_army_defensive
						}
					}
					if = {
						limit = {
							has_observation_outpost = yes
							observation_outpost = { 							
								mission_progress > 0.2
							}
						}
						observation_outpost_owner = {
							country_event = { id = nep_wohp.9000 }
						}
					}
				}
			}
		}
	}
}

country_event = {
	id = nep_wohp.9000
	title = "nep_wohp.9000.name"
	desc = "nep_wohp.9000.desc"
	picture = GFX_evt_interior_battle
	show_sound = event_ground_battle
	location = event_target:nep_highlander_country.capital_scope

	is_triggered_only = yes
	
	immediate = {
		event_target:nep_highlander_country = { 
			capital_scope = { 
				observation_outpost = { 
					add_mission_progress = -1
					set_mission = no_observation
				 } 
			} 	
		}
	}
	
	option = {
		name = nep_wohp.9000.a
	}
}

#on_yearly_pulse
event = {
	id = nep_wohp.90
	hide_window = yes
	
	is_triggered_only = yes
	
	trigger = {
		has_global_flag = nep_wohp_spawn
		NOT = { has_global_flag = nep_wohp_end }
	}
	
	immediate = {
		if = {
			limit = { has_global_flag = nep_wohp_not_first_year }
			event_target:nep_gaia_country = {
				capital_scope = {
					planet_event = { id = nep_wohp.92 days = 150 random = 60 }
				}
			}
			event_target:nep_highlander_country = {
				capital_scope = {
					planet_event = { id = nep_wohp.91 days = 15 random = 15 }
				}
			}
		}
		else = {
			set_global_flag = nep_wohp_not_first_year
		}
	}
}

planet_event = {
	id = nep_wohp.91
	hide_window = yes
	
	is_triggered_only = yes
	
	trigger = {
		has_global_flag = nep_wohp_spawn
		NOT = { has_global_flag = nep_wohp_end }
		NOT = {
			any_country = {
				has_country_flag = nep_gaia_assist
			}
		}
	}
	
	immediate = {
		while = {
			count = 5
			create_army = {
				name = "NAME_Gaia_assault_force"
				owner = event_target:nep_gaia_country
				species = event_target:nep_gaia_species
				type = nep_gaia_super_army
			}
		}
		solar_system = {
			every_system_planet = {
				limit = { has_observation_outpost = yes }
				observation_outpost_owner = {
					if = {
						limit = { 
							has_country_flag = nep_wohp_player
							NOT = { has_country_flag = nep_wohp_see_resistance } 
						}
						set_country_flag = nep_wohp_see_resistance
						country_event = { id = nep_wohp.910 }
					}
				}
			}
		}
	}
}

country_event = {
	id = nep_wohp.910
	title = "nep_wohp.910.name"
	desc = "nep_wohp.910.desc"
	picture = GFX_evt_interior_battle
	show_sound = event_ground_battle
	location = event_target:nep_highlander_country.capital_scope

	is_triggered_only = yes
	
	immediate = {
		if = {
			limit = { has_country_flag = nep_wohp_see_colosseum }
			country_event = { id = nep_wohp.3 days = 5 }
		}
	}
	
	
	option = {
		name = nep_wohp.910.a
		trigger = {
			NOR = { 
				has_valid_civic = civic_fanatic_purifiers
				has_valid_civic = civic_hive_devouring_swarm
				has_valid_civic = civic_machine_terminator
			}
		}
	}
	option = {
		name = nep_wohp.910.b
		trigger = {
			OR = { 
				has_valid_civic = civic_fanatic_purifiers
				has_valid_civic = civic_hive_devouring_swarm
				has_valid_civic = civic_machine_terminator
			}
		}
	}
}

planet_event = {
	id = nep_wohp.92
	hide_window = yes
	
	is_triggered_only = yes
	
	trigger = {
		has_global_flag = nep_wohp_spawn
		NOT = { has_global_flag = nep_wohp_end }
		NOT = {
			any_country = {
				has_country_flag = nep_highlander_assist
			}
		}
	}
	
	immediate = {
		while = {
			count = 5
			create_army = {
				name = "NAME_nep_highlander_gladiators"
				owner = event_target:nep_highlander_country
				species = event_target:nep_gaia_species
				type = nep_gene_slave_army
			}
		}
		solar_system = {
			every_system_planet = {
				limit = { has_observation_outpost = yes }
				observation_outpost_owner = {
					if = {
						limit = {
							has_country_flag = nep_wohp_player
							NOT = { has_country_flag = nep_wohp_see_colosseum } 
						}
						set_country_flag = nep_wohp_see_colosseum
						country_event = { id = nep_wohp.920 }
					}
				}
			}
		}
	}
}

country_event = {
	id = nep_wohp.920
	title = "nep_wohp.920.name"
	desc = "nep_wohp.920.desc"
	picture = GFX_evt_interior_battle
	show_sound = event_ground_battle
	location = event_target:nep_gaia_country.capital_scope

	is_triggered_only = yes
	
	immediate = {
		if = {
			limit = { has_country_flag = nep_wohp_see_resistance }
			country_event = { id = nep_wohp.3 days = 5 }
		}
	}
	
	option = {
		name = nep_wohp.920.a
		trigger = {
			NOR = { 
				has_valid_civic = civic_fanatic_purifiers
				has_valid_civic = civic_hive_devouring_swarm
				has_valid_civic = civic_machine_terminator
			}
		}
	}
	option = {
		name = nep_wohp.920.b
		trigger = {
			OR = { 
				has_valid_civic = civic_fanatic_purifiers
				has_valid_civic = civic_hive_devouring_swarm
				has_valid_civic = civic_machine_terminator
			}
		}
	}
}

#############################################
# Omega Virus
#############################################
namespace = nep_omega
ship_event = {
	id = nep_omega.1
	hide_window = yes
	
	is_triggered_only = yes
	
	fire_only_once = yes
	
	immediate = {
		set_global_flag = nep_omega_spawn
	}
}

#############################################
# Deus Ex Machina
#############################################
namespace = nep_deus
ship_event = {
	id = nep_deus.0
	hide_window = yes
	
	is_triggered_only = yes
	
	fire_only_once = yes
	
	immediate = {
		set_spawn_system_batch = begin
		no_scope = {
			spawn_system = {
				min_distance >= 494
				max_distance <= 500
				min_orientation_angle = -142
				max_orientation_angle = -134
				hyperlane = no
				initializer = nep_deus_init_01
			}
		}
		random_system = {
			limit = {
				has_star_flag = nep_deus_system
			}
			while = {
				count = 3
				spawn_system = {
					min_distance >= 10
					max_distance <= 20
					hyperlane = no
					initializer = nep_deus_init_02
				}
			}
			spawn_system = {
				min_distance >= 10
				max_distance <= 20
				min_orientation_angle = -124
				max_orientation_angle = -132
				hyperlane = no
				initializer = nep_deus_init_03
			}
			random_system = {
				limit = { has_star_flag = nep_deus_system_3 }
				while = {
					count = 3
					spawn_system = {
						min_distance >= 10
						max_distance <= 20
						min_orientation_angle = -124
						max_orientation_angle = -132
						hyperlane = no
						initializer = nep_deus_init_04
					}
				}
				save_event_target_as = nep_deus_system_3
			}
			save_global_event_target_as = nep_deus_system
			every_system = {
				limit = { has_star_flag = nep_deus_system_2 }
				add_hyperlane = { from = event_target:nep_deus_system to = this }
				random_system_planet = {
					limit = { is_colonizable = yes }
					if = {
						limit = {
							event_target:nep_deus_home = {
								OR = {
									is_planet_class = pc_desert
									is_planet_class = pc_arid
									is_planet_class = pc_savannah
								}
							}
						}
						random_list = {
							1 = { change_pc = pc_desert }
							1 = { change_pc = pc_arid }
							1 = { change_pc = pc_savannah }
						}
					}					
					if = {
						limit = {
							event_target:nep_deus_home = {
								OR = {
									is_planet_class = pc_tropical
									is_planet_class = pc_continental
									is_planet_class = pc_ocean
								}
							}
						}
						random_list = {
							1 = { change_pc = pc_tropical }
							1 = { change_pc = pc_continental }
							1 = { change_pc = pc_ocean }
						}
					}					
					if = {
						limit = {
							event_target:nep_deus_home = {
								OR = {
									is_planet_class = pc_tundra
									is_planet_class = pc_arctic
									is_planet_class = pc_alpine
								}
							}
						}
						random_list = {
							1 = { change_pc = pc_tundra }
							1 = { change_pc = pc_arctic }
							1 = { change_pc = pc_alpine }
						}
					}
				}
			}
			add_hyperlane = { from = event_target:nep_deus_system to = event_target:nep_deus_system_3 }
			every_system = {
				limit = { has_star_flag = nep_deus_system_4 }
				add_hyperlane = { from = event_target:nep_deus_system_3 to = this }
			}
		}
		set_spawn_system_batch = end
		# solar_system = {
			# if = {
				# limit = { has_natural_wormhole = no }
				# spawn_natural_wormhole = {
					# bypass_type = wormhole
					# random_pos = yes
				# }
			# }
			# else = {
				# closest_system = {
					# min_steps = 1
					# limit = { 
						# has_natural_wormhole = no 
						# is_fe_cluster = no
						# NOT = { has_star_flag = sealed_system }
						# NOT = { has_star_flag = hostile_system }
						# NOT = { has_star_flag = guardian }
					# }
					# spawn_natural_wormhole = {
						# bypass_type = wormhole
						# random_pos = yes
					# }
					# save_global_event_target_as = nep_deus_system_alternative
				# }
				# set_global_flag = nep_deus_system_alternative
			# }
		# }
		# random_system = {
			# limit = {
				# has_star_flag = nep_deus_system
			# }
			# spawn_natural_wormhole = {
				# bypass_type = wormhole
				# random_pos = yes
			# }
			# if = { 
				# limit = { has_global_flag = nep_deus_system_alternative }
				# link_wormholes = event_target:nep_deus_system_alternative
			# }
			# else = {
				# link_wormholes = root.solar_system
			# }
		# }
		solar_system = {
			spawn_megastructure = {
				type = "nep_wormhole_deus_mega"
				random_pos = yes
				orbit_angle = 360		# range of the randomization
			}
		}
		random_system = {
			limit = {
				has_star_flag = nep_deus_system
			}
			spawn_megastructure = {
				type = "nep_wormhole_deus_mega"
				random_pos = yes
				orbit_angle = 360		# range of the randomization
			}			
		}
		owner = { country_event = { id = nep_deus.1000 } }
		random_list = {
			28 = { ship_event = { id = nep_deus.1 } }
			13 = { ship_event = { id = nep_deuspi.1 } }
		}
	}
}

country_event = {
	id = nep_deus.1000
	title = "nep_deus.1000.name"
	desc = {
		trigger = { has_country_flag = encountered_first_wormhole }
		text = "nep_deus.1000.desc"
	}
	desc = {
		trigger = { NOT = { has_country_flag = encountered_first_wormhole } }
		text = "nep_deus.1000.desc.c"
	}
	# desc = {
		# trigger = { has_global_flag = nep_deus_system_alternative } 
		# text = "nep_deus.1000.desc.b"
	# }
	picture = GFX_evt_wormhole
	show_sound = event_ship_bridge
	location = FROM
	
	is_triggered_only = yes
	
	immediate = {
	
	}
	
	option = {
		name = OK
	}
	
	after = {		
		# remove_global_flag = nep_deus_system_alternative
		# clear_global_event_target = nep_deus_system_alternative
		if = {
			limit  = { NOT = { has_country_flag = encountered_first_wormhole } }
			country_event = { id = nep_surveyed.2 }
		}
	}
}

ship_event = {
	id = nep_deus.1
	hide_window = yes
	
	is_triggered_only = yes
		
	immediate = {
		set_global_flag = nep_deus_spawn
		random_system = {
			limit = {
				has_star_flag = nep_deus_system
			}
			random_system_planet = {
				limit = { is_colonizable = yes }
				create_species = {
					name = random
					class = HUM
					portrait = random
					traits = {
						trait = trait_nep_servent_of_machina
						trait = trait_charismatic
						trait = random_traits
					}
					homeworld = this
				}
				create_country = {
					name = NAME_nep_Country_of_Machina
					type = default
					auto_delete = yes
					species = last_created_species
					authority = auth_dictatorial
					ethos = {
						ethic = ethic_fanatic_spiritualist
						ethic = ethic_authoritarian
					}
					civics = {
						civic = civic_philosopher_king
						civic = civic_exalted_priesthood
					}
					origin = origin_nep_deus_ex_machina
					flag = random
				}
				last_created_country = {
					save_global_event_target_as = nep_deus_country
					IF = {
						LIMIT = { host_has_dlc = "Synthetic Dawn Story Pack" }
						create_species = {
							name = random
							class = ROBOT
							portrait = random
							namelist = "AI"
							traits = {
								trait = trait_mechanical
								trait = random_traits
							}
							effect = {
								save_event_target_as = nep_machina_species
							}
						}
						ELSE = {
							create_species = {
								name = random
								class = ROBOT
								portrait = 2dsynth_01
								namelist = "AI"
								traits = {
									trait = trait_mechanical
									trait = random_traits
								}
								effect = {
									save_event_target_as = nep_machina_species
								}
							}
						}
					}
					create_leader = {
						class = governor
						species = event_target:nep_machina_species
						name = "NAME_nep_machina"
						skill = 10
						event_leader = yes						
						immortal = yes
					}
					set_leader = last_created_leader
					# last_created_leader = {
						# add_ruler_trait = leader_trait_nep_machina
					# }
					random_country = {
						limit = {
							is_ai = no
						}
						save_event_target_as = nep_temp_country
					}
					copy_techs_from = { 
						target = event_target:nep_temp_country
					}
					give_technology = { tech = tech_destroyers message = yes }
					give_technology = { tech = tech_cruisers message = yes }
					give_technology = { tech = tech_battleships message = yes }
					give_technology = { tech = tech_starbase_2 message = yes }
					give_technology = { tech = tech_starbase_3 message = yes }
					give_technology = { tech = tech_starbase_4 message = yes }
					give_technology = { tech = tech_starbase_5 message = yes }
				}
				create_colony = {
					owner = event_target:nep_deus_country
					species = event_target:nep_deus_country
				}
				set_capital = yes
			}
		}
		every_system = {
			limit = {
				has_star_flag = nep_deus_system
			}
			create_starbase = {
				owner = event_target:nep_deus_country
				size = starbase_citadel
				module = shipyard
				module = shipyard
			}
			starbase = {
				save_event_target_as = nep_deus_system_starbase
			}
			create_fleet = {
				name = "NAME_Enigmatic_Fortress"
				settings = {
					spawn_debris = no
					is_boss = yes
					uses_naval_capacity = no
					garrison = yes
				}
				effect = {
					set_owner = event_target:nep_deus_country
					while = {
						count = 1 #just to show-case that formation will tile
						create_ship = {
							name = ""
							design = "NAME_Ancient_Vault"
							graphical_culture = "ancient"
						}
						create_ship = {
							name = ""
							design = "NAME_Ancient_Guardian"
							graphical_culture = "ancient"
						}			
						create_ship = {
							name = ""
							design = "NAME_Ancient_Guardian"
							graphical_culture = "ancient"
						}
						create_ship = {
							name = ""
							design = "NAME_Ancient_Warden"
							graphical_culture = "ancient"
						}
						create_ship = {
							name = ""
							design = "NAME_Ancient_Warden"
							graphical_culture = "ancient"
						}
						create_ship = {
							name = ""
							design = "NAME_Ancient_Defender"
							graphical_culture = "ancient"
						}
						create_ship = {
							name = ""
							design = "NAME_Ancient_Defender"
							graphical_culture = "ancient"
						}
						create_ship = {
							name = ""
							design = "NAME_Ancient_Defender"
							graphical_culture = "ancient"
						}
						create_ship = {
							name = ""
							design = "NAME_Ancient_Defender"
							graphical_culture = "ancient"
						}
						create_ship = {
							name = ""
							design = "NAME_Ancient_Sentinel"
							graphical_culture = "ancient"
						}
						create_ship = {
							name = ""
							design = "NAME_Ancient_Sentinel"
							graphical_culture = "ancient"
						}
						create_ship = {
							name = ""
							design = "NAME_Ancient_Sentinel"
							graphical_culture = "ancient"
						}
						create_ship = {
							name = ""
							design = "NAME_Ancient_Sentinel"
							graphical_culture = "ancient"
						}
						create_ship = {
							name = ""
							design = "NAME_Ancient_Sentinel"
							graphical_culture = "ancient"
						}
						create_ship = {
							name = ""
							design = "NAME_Ancient_Sentinel"
							graphical_culture = "ancient"
						}
						create_ship = {
							name = ""
							design = "NAME_Ancient_Sentinel"
							graphical_culture = "ancient"
						}
						create_ship = {
							name = ""
							design = "NAME_Ancient_Sentinel"
							graphical_culture = "ancient"
						}
					}
					set_fleet_formation = {
						position = { x = 13.0	y = -7.0	} #17
						position = { x = 11.5	y = -13.0	} #16
						position = { x = 0.0	y = -15.5	} #15
						position = { x = 13.0	y = 7.0		} #14
						position = { x = -11.8	y = -4.0	} #13
						position = { x = -15.8	y = 6.5		} #12
						position = { x = -10.0	y = 8.5		} #11
						position = { x = -1.6	y = 15.0	} #10
						position = { x = 14.0	y = -3.0	} #9
						position = { x = 1.3	y = -11.0	} #8
						position = { x = -10.5	y = 1.0		} #7
						position = { x = 3.0	y = 8.0		} #6
						position = { x = -4.3	y = -7.0	} #5
						position = { x = 8.0	y = 9.0		} #4
						position = { x = -4.0	y = 7.3		} #3 
						position = { x = 7.5	y = -10.5	} #2
						position = { x = 0.0	y = 0.0		} #1
					}
					set_formation_scale = 0.5
					set_location = {
						target = event_target:nep_deus_system_starbase
						distance = 45
						angle = 1
					}
					add_modifier = {
						modifier = nep_deus_ship_modifier
						days = -1
					}
				}
			}
		}
		every_system = {
			limit = {
				OR = {
					has_star_flag = nep_deus_system_3
					has_star_flag = nep_deus_system_2
					has_star_flag = nep_deus_system_4
				}
			}
			create_starbase = {
				owner = event_target:nep_deus_country
				size = starbase_citadel
				module = shipyard
			}
		}
		every_system = {
			limit = {
				has_star_flag = nep_deus_system_2
			}
			every_system_planet = {
				limit = { is_colonizable = yes }
				create_colony = {
					owner = event_target:nep_deus_country
					species = event_target:nep_deus_country
				}
			}
		}
		event_target:nep_deus_country = {
			every_owned_planet = {
				while = {
					count = 5
					create_pop = { species = event_target:nep_deus_country }
				}
				add_district = district_city
				add_district = district_farming
				random_list = {
					1 = { add_district = district_mining }
					1 = { add_district = district_generator }
				}
			}
			capital_scope = {
				while = {
					count = 5
					create_pop = { species = event_target:nep_deus_country }
				}
				add_district = district_city
				add_district = district_city
				add_district = district_farming
				add_district = district_mining
				add_district = district_generator
				add_building = building_nep_palace_of_machina
			}
			add_resource = {
				food = 2000
				minerals = 4000
				alloys = 2000
				energy = 2000
				consumer_goods = 2000
				influence = 300
			}
		}
	}
}

fleet_event = {
	id = nep_deus.2000
	title = "nep_wohp.2000.name"
	desc = "nep_deus.2000.desc"
	picture = GFX_evt_city_planet
	show_sound = event_ship_bridge
	location = FROM
	
	is_triggered_only = yes
	
	trigger = {
		exists = event_target:nep_deus_country
		has_global_flag = nep_deus_spawn
		from = { has_star_flag = nep_deus_system }
		owner = { NOT = { has_country_flag = nep_deus_visited } }
	}
	
	immediate = {
		owner = { set_country_flag = nep_deus_visited }
		random_country = {
			limit = { 
				is_same_value = event_target:nep_deus_country				
				NOT = { has_communications = root }
			}
			establish_communications_no_message = root
		}
	}
	
	option = {
		name = OK
	}
}

country_event = {
	id = nep_deus.2
	hide_window = yes
	
	fire_only_once = yes
		
	trigger = {
		years_passed > 100
		has_global_flag = nep_deus_spawn
		exists = event_target:nep_deus_country
		root = { is_same_value = event_target:nep_deus_country }
	}
	
	mean_time_to_happen = {
		years = 70
	}
	
	immediate = {
		add_modifier = { 
			modifier = nep_deus_malfunction
			days = -1
		}
		set_country_flag = nep_deus_malfunction
		country_event = { id = nep_deus.3 days = 360 random = 360 }
	}
}


country_event = {
	id = nep_deus.3
	hide_window = yes
	
	is_triggered_only = yes
	
	immediate = {
		set_country_type = nep_machina_broken
		set_policy = {
			policy = orbital_bombardment_Krahen
			option = orbital_bombardment_armageddon
			cooldown = no
		}
		set_subject_of = {
			who = none
		}
		every_subject = {		
			set_subject_of = {
				who = none
			}
		}
		remove_from_galactic_community = yes
		every_playable_country = {
			limit = { 
				is_country_type = default 
				NOT = { is_same_value = event_target:nep_deus_country }
			}
			if = {
				limit = { NOT = { has_communications = event_target:nep_deus_country } }
				establish_communications_no_message = event_target:nep_deus_country
			}
			# event_target:nep_deus_country = {
				# declare_war = {
					# target = prev
					# attacker_war_goal = wg_nep_deus_cleaning_war
				# }
			# }
			country_event = { id = nep_deus.4 }
		}
	}
}

country_event = {
	id = nep_deus.4
	title = nep_deus.4.name
	desc = nep_deus.4.desc
	
	is_triggered_only = yes
	
	diplomatic = yes
	
	picture_event_data = {
		portrait = event_target:nep_deus_country.leader
		planet_background = event_target:nep_deus_country
		graphical_culture = event_target:nep_deus_country
		city_level = event_target:nep_deus_country
		room = event_target:nep_deus_country
	}
	
	immediate = {
	}
	
	option = {
		name = nep_deus.4.a
		default_hide_option = yes
		hidden_effect = { country_event = { id = nep_deus.4000 days = 5 } }
	}
}

country_event = {
	id = nep_deus.4000
	title = nep_deus.4000.name
	desc = nep_deus.4000.desc
	picture = GFX_evt_sapient_AI
	show_sound = event_radio_chatter
	
	is_triggered_only = yes
	
	immediate = {}
	
	option = {
		name = nep_deus.4000.a
	}
	
	option = {
		name = nep_deus.4000.b
		trigger = {
			is_synthetic_empire = yes
		}
	}
}

country_event = {
	id = nep_deus.5
	title = nep_deus.5.name
	desc = nep_deus.5.desc
	picture = GFX_evt_fleet_from_surface
	show_sound = event_space_battle
	is_triggered_only = yes
	
	trigger = {
		has_global_flag = nep_deus_spawn
		exists = event_target:nep_deus_country
		From = { is_same_value = event_target:nep_deus_country }
		FROMFROM = { is_same_value = event_target:nep_deus_home }
	}
		
	immediate = {
		FromFrom = {
			remove_building = building_nep_palace_of_machina
			owner = {
				leader = { kill_leader = { show_notification = yes } }
				set_country_flag = nep_deus_killed_leader
			}
		}
		From = {
			remove_modifier = nep_deus_malfunction
			remove_country_flag = nep_deus_malfunction
		}
	}
	
	option = {
		name = nep_deus.5.a
	}
}

event = {
	id = nep_deus.6
	hide_window = yes
	is_triggered_only = yes
	
	trigger = {
		has_global_flag = nep_deus_spawn
		exists = event_target:nep_deus_country
		any_galaxy_planet = {
			exists = owner
			exists = controller
			owner = { is_same_value = event_target:nep_deus_country }
			controller = { NOT = { is_same_value = event_target:nep_deus_country } }
		}
	}
	
	immediate = {
		every_galaxy_planet = {
			limit = {
				exists = owner
				exists = controller
				owner = { is_same_value = event_target:nep_deus_country }
				controller = { NOT = { is_same_value = event_target:nep_deus_country } }
			}
			if = {
				limit = {
					count_owned_pop = { count > 2 }
				}
				random_owned_pop = {
					species = { save_event_target_as = nep_deus_6_temp }
					kill_pop = yes
				}
				random_owned_pop = {
					species = { save_event_target_as = nep_deus_6_temp }
					kill_pop = yes
				}
				create_army = {
					name = random
					owner = event_target:nep_deus_country
					species = event_target:nep_deus_6_temp
					type = defense_army
				}
				create_army = {
					name = random
					owner = event_target:nep_deus_country
					species = event_target:nep_deus_6_temp
					type = defense_army
				}
			}
			else = {
				set_owner = controller
			}
		}
	}
}

event = {
	id = nep_deus.7
	hide_window = yes
	is_triggered_only = yes
	
	trigger = {
		has_global_flag = nep_deus_spawn
		exists = event_target:nep_deus_country
		any_galaxy_planet = {
			exists = owner
			exists = controller
			controller = { is_same_value = event_target:nep_deus_country }
			owner = { NOT = { is_same_value = event_target:nep_deus_country } }
		}
	}
	
	immediate = {
		every_galaxy_planet = {
			limit = {
				exists = owner
				exists = controller
				controller = { is_same_value = event_target:nep_deus_country }
				owner = { NOT = { is_same_value = event_target:nep_deus_country } }
			}
			if = {
				limit = {
					count_owned_pop = { count > 2 }
				}
				random_owned_pop = {
					kill_pop = yes
				}
			}
			else = {
				set_owner = controller
			}
		}
	}
}

#on_space_battle_lost
country_event = {
	id = nep_deus.8
	hide_window = yes
	is_triggered_only = yes
	
	trigger = {
		exists = root
		exists = from
		exists = fromfrom
		exists = fromfromfrom
		is_country_type = nep_machina_broken
		from = { has_communications = root }
		fromfrom = { is_ship_class = shipclass_starbase }
	}
	
	immediate = {
		destroy_ship = fromfrom
	}
}
	
#on_yearly_pulse
event = {
	id = nep_deus.9
	hide_window = yes
	
	is_triggered_only = yes
	
	trigger = {
		exists = event_target:nep_deus_country
		event_target:nep_deus_country = { 
			is_ai = yes
			has_country_flag = nep_deus_malfunction 
		}
	}
	
	immediate = {
		# random_country = {
			# limit = { 
				# if = {
					# limit = { any_country = { is_ai = no } }
					# is_ai = no
				# }
				# else_if = {
					# limit = { any_country = { is_fallen_empire = yes } }
					# is_fallen_empire = yes
				# }
				# else = {
					# always = yes
				# }
			# }
			# save_event_target_as = nep_temp_country
		# }
		event_target:nep_deus_country = {
			add_resource = {
				physics_research = 10000
				society_research = 10000
				engineering_research = 10000
			}
		}
		event_target:nep_deus_country = {
			add_resource = {
				food = 2000
				minerals = 2000
				alloys = 2000
				energy = 2000
				consumer_goods = 2000
				influence = 100
				unity = 2000
			}
		}
		create_fleet = {
			#name = random
			effect = {
				set_owner = event_target:nep_deus_country
				while = {
					count = 20
					create_ship = {
						name = random
						random_existing_design = battleship
					}
				}
				set_location = {
					target = event_target:nep_deus_country.capital_scope
					distance = 150
					angle = random
				}
				add_modifier = {
					modifier = nep_deus_ship_modifier
					days = -1
				}
			}
			settings = {
				uses_naval_capacity = no
				can_disband = no
				can_change_composition = no
			}
		}
		# event_target:nep_deus_country.capital_scope.solar_system = {
			# random_system_planet = {
				# limit = {
					# is_colony = no
				# }
				# while = {
					# count = 13
					# create_army = {
						# owner = event_target:nep_deus_country
						# species = event_target:nep_deus_country
						# type = "clone_army"
					# }
				# }
			# }
		# }
	}
}

namespace = nep_deuspi
ship_event = {
	id = nep_deuspi.1
	hide_window = yes
	
	is_triggered_only = yes
	
	fire_only_once = yes
	
	immediate = {
		set_global_flag = nep_deuspi_spawn
		random_system = {
			limit = {
				has_star_flag = nep_deus_system
			}
			random_system_planet = {
				limit = { is_colonizable = yes }
				create_species = {
					name = random
					class = HUM
					portrait = random
					traits = {
						trait = trait_nep_servent_of_machina
						trait = trait_charismatic
						trait = random_traits
					}
					homeworld = this
				}
				last_created_species = {
					save_event_target_as = nep_deus_species				
				}
				if = {
					limit = {
						NOT = {
							exists = event_target:nep_deus_country
						}
					}
					create_country = {
						name = NAME_nep_Country_of_Machina
						type = nep_primitive_machina
						auto_delete = no
						species = last_created_species
						origin = origin_nep_deus_ex_machina
						ethos = {
							ethic = ethic_fanatic_spiritualist
							ethic = ethic_authoritarian
						}
					}
					last_created_country = {
						set_pre_ftl_age_effect = { PRE_FTL_AGE = late_medieval_age }
						save_global_event_target_as = nep_deus_country
						set_country_flag = nep_deus_country					
					}
				}
				setup_pre_ftl_planet = yes
				add_modifier = { modifier = "planet_population_control" days = -1 }
				add_building = building_nep_palace_of_machina
				add_building = building_primitive_farm				
				while = {
					count = 5
					create_pop = { species = event_target:nep_deus_country }
					last_created_pop = { clear_pop_category = yes }
				}				
				last_created_country = {
					IF = {
						LIMIT = { host_has_dlc = "Synthetic Dawn Story Pack" }
						create_species = {
							name = random
							class = ROBOT
							portrait = random
							namelist = "AI"
							traits = {
								trait = trait_mechanical
								trait = random_traits
							}
							effect = {
								save_event_target_as = nep_machina_species
							}
						}
						ELSE = {
							create_species = {
								name = random
								class = ROBOT
								portrait = 2dsynth_01
								namelist = "AI"
								traits = {
									trait = trait_mechanical
									trait = random_traits
								}
								effect = {
									save_event_target_as = nep_machina_species
								}
							}
						}
					}
					create_leader = {
						class = governor
						species = event_target:nep_machina_species
						name = "NAME_nep_machina"
						skill = 10
						event_leader = yes
						immortal = yes
					}
					set_leader = last_created_leader
				}
			}
			create_country = {
				name = random
				type = nep_global_for_protrait
				auto_delete = no
			}
			last_created_country = {
				save_global_event_target_as = nep_global_deus
				create_leader = {
					name = random
					species = event_target:nep_deus_species
					gender = male
					skill = random
					set_age = 14
				}
				last_created_leader = {
					save_global_event_target_as = nep_deus_male
				}
				create_leader = {
					name = random
					species = event_target:nep_deus_species
					gender = female
					skill = random
					set_age = 14
				}
				last_created_leader = {
					save_global_event_target_as = nep_deus_female
				}
			}
		}
	}
}

fleet_event = {
	id = nep_deuspi.2
	hide_window = yes
	
	is_triggered_only = yes
		
	trigger = {
		has_global_flag = nep_deuspi_spawn
		NOT = { owner = { has_country_flag = nep_deuspi_visited } }
		from = { has_star_flag = nep_deus_system }
		exists = event_target:nep_deus_country
	}
	
	immediate = {
		owner = { 
			set_country_flag = nep_deuspi_visited
			country_event = { id = nep_deuspi.2000 } 
		}
	}
}

country_event = {
	id = nep_deuspi.2000
	title = "nep_deuspi.2000.name"
	desc = "nep_deuspi.2000.desc"
	picture = GFX_evt_medieval_alien_civilization
	show_sound = event_ship_bridge
	location = FROM
	
	is_triggered_only = yes
	
	immediate = { }
	
	option = {
		name = OK
	}
}

#When observation station complete
ship_event = {
	id = nep_deuspi.3
	title = "nep_deuspi.3.name"
	desc = "nep_deuspi.3.desc"
	picture = GFX_evt_arguing_senate
	show_sound = event_ship_bridge
	location = THIS
	
	is_triggered_only = yes
	
	fire_only_once = yes
	
	trigger = {
		has_global_flag = nep_deuspi_spawn
		solar_system = { has_star_flag = nep_deus_system }
	}
	
	immediate = {
		owner = {
			if = {
				limit = { NOT = { has_communications = event_target:nep_deus_country } }
				establish_communications_no_message = event_target:nep_deus_country
			}
		}
	}

	option = {
		name = OK
		default_hide_option = yes
		hidden_effect = {
			owner = { country_event = { id = nep_deuspi.6 days = 15 random = 3600 } }
		}
	}

	option = {
		name = nep_deuspi.3.a
		trigger = {
			owner = {
				OR = {
					has_ethic = "ethic_fanatic_materialist"
					AND = {
						has_authority = auth_machine_intelligence
						NOT = { has_valid_civic = civic_machine_terminator }
					}
				}
			}
		}
		owner = {
			enable_special_project = {
				name = "nep_deuspi_hack_project"
				owner = root.owner
				location = event_target:nep_deus_home
			}
		}
	}
}

#Hack
country_event = {
	id = nep_deuspi.4
	hide_window = yes
	
	is_triggered_only = yes
	
	fire_only_once = yes
	
	immediate = {
		random_list = {
			29 = { country_event = { id = nep_deuspi.41 } } #success
			31 = { country_event = { id = nep_deuspi.42 } } #fail
		}
	}
}


country_event = {
	id = nep_deuspi.41
	title = "nep_deuspi.41.name"
	desc = "nep_deuspi.41.desc"
	picture = GFX_evt_metropolis
	show_sound = event_laboratory_sound
	location = event_target:nep_deus_home
	
	is_triggered_only = yes
	
	immediate = {
		set_global_flag = nep_deuspi_end
	}
	
	option = {
		name = nep_deuspi.41.a
		default_hide_option = yes
		#protectorate
		hidden_effect = { country_event = { id = nep_deuspi.51 } }
	}
	
	option = {
		name = nep_deuspi.41.b
		default_hide_option = yes
		trigger = {
			NOT = { has_authority = auth_machine_intelligence }
		}
		#join
		hidden_effect = { country_event = { id = nep_deuspi.53 } }
	}
	
	option = {
		name = nep_deuspi.41.c
		default_hide_option = yes
		trigger = {
			OR = {
				has_ethic = ethic_xenophobe
				has_ethic = ethic_fanatic_xenophobe
				has_authority = auth_hive_mind
				has_authority = auth_machine_intelligence
			}
		}
		#Die!
		event_target:nep_deus_home = { 
			destroy_colony = yes
		}
		event_target:nep_deus_country = {
			destroy_country = yes
		}
		hidden_effect = {
			event_target:nep_global_deus = {
				destroy_country = yes
			}
		}
	}
}

country_event = {
	id = nep_deuspi.42
	title = "nep_deuspi.42.name"
	desc = "nep_deuspi.42.desc"
	picture = GFX_evt_metropolis
	show_sound = event_laboratory_sound
	location = event_target:nep_deus_home
	
	is_triggered_only = yes
	
	immediate = {
		set_global_flag = nep_deuspi_end
	}
	
	option = {
		name = nep_deuspi.42.a
		custom_tooltip = nep_deuspi.42.a.tooltip
		default_hide_option = yes
		#Enlightenment with Hate
		hidden_effect = { country_event = { id = nep_deuspi.52 } }
	}
}

#protectorate
country_event = {
	id = nep_deuspi.51
	hide_window = yes
	
	is_triggered_only = yes
	
	immediate = {
		event_target:nep_deus_country = {
			set_country_type = primitive
			remove_country_flag = late_medieval_age
			remove_country_flag = recently_advanced
			set_country_type = default
			change_country_flag = random
			set_graphical_culture = humanoid_01
			change_government = {
				authority = auth_dictatorial
				civics = random
			}
			set_name = NAME_nep_Country_of_Machina
			if = {
				limit = {
					home_planet = {
						has_observation_outpost = yes
					}
				}
				home_planet = {
					observation_outpost = {
						dismantle = yes
					}
					observation_outpost_owner = {
						add_intel = {
							who = prevprev
							amount = 100
						}
					}
				}
			}
			add_resource = {
				energy = 500
				minerals = 1000 # enough for a spaceport and then some
				alloys = 100
			}
			add_resource = { influence = 300 }
			capital_scope = {
				observation_outpost = {
					dismantle = yes
				}
				clear_blockers = yes
				while = {
					limit = { 
						num_pops < 8
						#free_housing > 0
					}
					create_pop = {
						species = owner
					}
				}
				remove_building = building_primitive_farm
				remove_building = building_primitive_farm
				remove_building = building_primitive_farm
				remove_building = building_primitive_factory
				remove_building = building_primitive_factory
				remove_building = building_primitive_factory
				remove_building = building_primitive_capital
				remove_building = building_primitive_capital
				remove_building = building_primitive_capital
				remove_building = building_urban_dwellings
				remove_building = building_urban_dwellings
				remove_building = building_urban_dwellings
				add_district = district_city
				add_district = district_city
				add_district = district_city
				add_district = district_city
				add_district = district_farming
				add_district = district_farming
				add_district = district_farming
				add_district = district_mining
				add_district = district_mining
				add_district = district_generator
				add_district = district_generator
				add_building = building_capital
				add_building = building_research_lab_1
				add_building = building_foundry_1
				add_building = building_factory_1
				
				remove_all_armies = yes
				solar_system = {
					if = {
						limit = {
							NOT = { exists = starbase }
						}
						create_starbase = {
							size = starbase_outpost
							owner = event_target:nep_deus_country
						}
					}
					else = {
						starbase = { set_owner = event_target:nep_deus_country }
					}
				}
			}
			random_owned_ship = {
				limit = { is_ship_size = primitive_space_station }
				fleet = { destroy_fleet = THIS }
			}
			if = {
				limit = {
					root = { is_country_type = default }
				}
				if = {
					limit = {
						root = { has_valid_civic = "civic_inwards_perfection" }
					}
					set_subject_of = {
						who = root
						preset = preset_tributary
					}
				}
				else = {
					set_subject_of = {
						who = root
						preset = preset_protectorate
					}						
				}
				if = {
					limit = { root = { has_country_flag = nep_deus_you_want_save } }
					add_opinion_modifier = { who = root modifier = nep_you_are_our_Savior }
				}
				else = {
					add_opinion_modifier = { who = root modifier = opinion_nep_was_hacked }
				}
			}
		}
		set_country_flag = nep_enli_deus_by_hack
		if = {
			limit = { NOT = { has_communications = event_target:nep_deus_country } }
			establish_communications_no_message = event_target:nep_deus_country
		}
		country_event = { id = nep_deuspi.5 }
	}
}

#Enlightenment with Hate
country_event = {
	id = nep_deuspi.52
	hide_window = yes
	
	is_triggered_only = yes
	
	immediate = {
		event_target:nep_deus_country = {
			set_country_type = primitive
			remove_country_flag = late_medieval_age
			remove_country_flag = recently_advanced
			set_country_type = default
			change_country_flag = random
			set_graphical_culture = humanoid_01
			change_government = {
				authority = auth_dictatorial
				civics = random
			}
			set_name = NAME_nep_Country_of_Machina
			add_resource = {
				energy = 5000
				minerals = 10000 # enough for a spaceport and then some
			}
			add_resource = { influence = 500 }
			capital_scope = {
				observation_outpost = {
					dismantle = yes
				}
				clear_blockers = yes
				while = {
					limit = {
						num_pops < 12
						#free_housing > 0
					}
					create_pop = {
						species = owner
					}
				}
				remove_building = building_primitive_farm
				remove_building = building_primitive_farm
				remove_building = building_primitive_farm
				remove_building = building_primitive_factory
				remove_building = building_primitive_factory
				remove_building = building_primitive_factory
				remove_building = building_primitive_capital
				remove_building = building_primitive_capital
				remove_building = building_primitive_capital
				remove_building = building_urban_dwellings
				remove_building = building_urban_dwellings
				remove_building = building_urban_dwellings
				add_district = district_city
				add_district = district_city
				add_district = district_city
				add_district = district_city
				add_district = district_city
				add_district = district_farming
				add_district = district_farming
				add_district = district_farming
				add_district = district_mining
				add_district = district_mining
				add_district = district_generator
				add_district = district_generator
				add_building = building_capital
				add_building = building_research_lab_1
				add_building = building_foundry_1
				add_building = building_factory_1
				
				remove_all_armies = yes
				solar_system = {
					if = {
						limit = {
							NOT = { exists = starbase }
						}
						create_starbase = {
							size = starbase_outpost
							owner = event_target:nep_deus_country
						}
					}
					else = {
						starbase = { set_owner = event_target:nep_deus_country }
					}
				}
			}
			random_owned_ship = {
				limit = { is_ship_size = primitive_space_station }
				fleet = { destroy_fleet = THIS }
			}
			add_opinion_modifier = { who = root modifier = opinion_nep_you_angry_me }
			country_event = { id = nep_deuspi.520 days = 15 }
		}
		every_system = {
			limit = {
				OR = {
					has_star_flag = nep_deus_system_2
					has_star_flag = nep_deus_system_3
					has_star_flag = nep_deus_system_4
				}				
			}
			add_claims = { 
				who = event_target:nep_deus_country 
				num_of_claims = 10 
				show_notification = yes 
			}
		}
		set_country_flag = nep_enli_deus_by_hate
		if = {
			limit = { NOT = { has_communications = event_target:nep_deus_country } }
			establish_communications_no_message = event_target:nep_deus_country
		}
		country_event = { id = nep_deuspi.5 }
	}
}

country_event = {
	id = nep_deuspi.520
	hide_window = yes
	
	is_triggered_only = yes
	
	immediate = {
		capital_scope = {
			create_fleet = {
				#name = random
				effect = {
					set_owner = event_target:nep_deus_country
					while = {
						count = 10
						create_ship = {
							name = random
							random_existing_design = battleship
						}
					}
					set_location = {
						target = event_target:nep_deus_country.capital_scope
						distance = 150
						angle = random
					}
				}
				settings = {
					uses_naval_capacity = no
				}
			}
			while = {
				count = 13
				create_army = {
					name = "NAME_Machina_Guardians"
					owner = event_target:nep_deus_country
					type = nep_Legnahcras_defensive_army
				}
			}
		}
	}
}

#join
country_event = {
	id = nep_deuspi.53
	hide_window = yes
	
	is_triggered_only = yes
	
	immediate = {
		event_target:nep_deus_country = {
			set_country_type = primitive
			remove_country_flag = late_medieval_age
			remove_country_flag = recently_advanced
			capital_scope = {
				observation_outpost = {
					dismantle = yes
				}
				clear_blockers = yes
				while = {
					limit = { 
						num_pops < 8
						#free_housing > 0
					}
					create_pop = {
						species = owner
					}
				}
				remove_building = building_primitive_farm
				remove_building = building_primitive_farm
				remove_building = building_primitive_farm
				remove_building = building_primitive_factory
				remove_building = building_primitive_factory
				remove_building = building_primitive_factory
				remove_building = building_primitive_capital
				remove_building = building_primitive_capital
				remove_building = building_primitive_capital
				remove_building = building_urban_dwellings
				remove_building = building_urban_dwellings
				remove_building = building_urban_dwellings
				add_district = district_city
				add_district = district_city
				add_district = district_city
				add_district = district_city
				add_district = district_farming
				add_district = district_farming
				add_district = district_farming
				add_district = district_mining
				add_district = district_mining
				add_district = district_generator
				add_district = district_generator
				add_building = building_capital
				add_building = building_research_lab_1
				add_building = building_foundry_1
				add_building = building_factory_1
				
				remove_all_armies = yes
				set_owner = root
				solar_system = {
					if = {
						limit = {
							NOT = { exists = starbase }
						}
						create_starbase = {
							size = starbase_outpost
							owner = root
						}
					}
					else = {
						starbase = { set_owner = root }
					}
				}
			}
			random_owned_ship = {
				limit = { is_ship_size = primitive_space_station }
				fleet = { destroy_fleet = THIS }
			}
		}
		set_country_flag = nep_deus_joined
		country_event = { id = nep_deuspi.5 }
		add_modifier = {
			modifier = nep_deus_super_computer
			days = -1
		}
	}
}

country_event = {
	id = nep_deuspi.5
	title = "nep_deuspi.5.name"
	desc = { 
		trigger = { 
			has_country_flag = nep_enli_deus_by_hack
			NOT = { has_country_flag = nep_deus_you_want_save }
		}
		text = nep_deuspi.5.desc.a
	}
	desc = { 
		trigger = { has_country_flag = nep_enli_deus_by_hate }
		text = nep_deuspi.5.desc.b
	}
	desc = { 
		trigger = { has_country_flag = nep_deus_joined }
		text = nep_deuspi.5.desc.c
	}
	desc = { 
		trigger = { 
			has_country_flag = nep_enli_deus_by_hack
			has_country_flag = nep_deus_you_want_save
		}
		text = nep_deuspi.5.desc.d
	}
	
	picture = GFX_evt_metropolis
	show_sound = event_laboratory_sound
	location = event_target:nep_deus_home
	
	is_triggered_only = yes
	
	immediate = {		
		set_global_flag = nep_deuspi_end
	}

	after = {
		if = { 
			limit = { has_country_flag = nep_deus_you_want_save }
			remove_country_flag = nep_deus_you_want_save
		}
	}
	
	option = {
		name = OK
	}
}

#Lost Radio
country_event = {
	id = nep_deuspi.6
	title = "nep_deuspi.6.name"
	desc = "nep_deuspi.6.desc"
	picture = GFX_evt_alien_planet
	show_sound = event_laboratory_sound
	location = event_target:nep_deus_home
	
	is_triggered_only = yes

	fire_only_once = yes	

	immediate = { }
	
	option = {
		name = nep_deuspi.6.a
		hidden_effect = { country_event = { id = nep_deuspi.61 days = 10 random = 10 } }
	}
	
	option = {
		name = nep_deuspi.6.b
	}
	
	option = {
		name = nep_deuspi.6.c
		trigger = {
			OR = {
				has_ethic = ethic_xenophobe
				has_ethic = ethic_fanatic_xenophobe
				has_ethic = ethic_fanatic_authoritarian
				has_ethic = ethic_fanatic_militarist
				has_authority = auth_machine_intelligence
				has_authority = auth_hive_mind
			}
			NOR = {
				has_ethic = ethic_pacifist
				has_ethic = ethic_fanatic_pacifist
				has_ethic = ethic_xenophile
				has_ethic = ethic_fanatic_xenophile
			}
		}
		event_target:nep_deus_home = {
			random_owned_pop = {
				kill_pop = yes
			}
		}
		hidden_effect = { country_event = { id = nep_deuspi.52 } }
	}
}

country_event = {
	id = nep_deuspi.61
	hide_window = yes
	
	is_triggered_only = yes
	
	immediate = {
		if = {
			limit = {
				any_owned_planet = {
					is_colony = yes
					free_housing >= 2
				}
			}
			random_list = {
				1 = { country_event = { id = nep_deuspi.7 } } # Virus
				1 = { country_event = { id = nep_deuspi.8 } } # Miko
			}
		}
		else = {
			country_event = { id = nep_deuspi.7 }
		}
	}
}

country_event = {
	id = nep_deuspi.7
	title = nep_deuspi.7.name
	desc = nep_deuspi.7.desc
	
	diplomatic = yes
	
	is_triggered_only = yes
		
	picture_event_data = {
		portrait = event_target:nep_deus_country.leader
		planet_background = event_target:nep_deus_country
		graphical_culture = event_target:nep_deus_country
		city_level = event_target:nep_deus_country
		room = event_target:nep_deus_country
	}
	
	immediate = {
	
	}
	
	option = {
		name = nep_deuspi.7.a
		enable_special_project = {
			name = nep_deus_virus_emergency
			location = event_target:nep_deus_home
			owner = root
		}
		hidden_effect = {
			set_country_flag = nep_deus_you_want_save
			event_target:nep_deus_home = {
				planet_event = { id = nep_deuspi.71 days = 45 random = 30  }
			}
		}
	}
	option = {
		name = nep_deuspi.7.b
		hidden_effect = {
			set_country_flag = nep_deus_dont_save
			event_target:nep_deus_home = {
				planet_event = { id = nep_deuspi.71 days = 45 random = 30  }
			}
		}
	}
}

planet_event = {
	id = nep_deuspi.71
	hide_window = yes
	
	is_triggered_only = yes
	
	trigger = {
		NOT = { has_planet_flag = nep_deus_virus_clear }
	}
	
	immediate = {
		if = {
			limit = { num_pops >= 2 } 
			random_owned_pop = { kill_pop = yes }
			planet_event = { id = nep_deuspi.71 days = 45 random = 30 }
		}
		else = {
			event_target:nep_deus_country = {
				set_country_type = faction
				create_fleet = {
					name = "NAME_Enigmatic_Fortress"
					settings = {
						spawn_debris = no
						is_boss = yes
					}
					effect = {
						set_owner = event_target:nep_deus_country
						while = {
							count = 1 #just to show-case that formation will tile
							create_ship = {
								name = ""
								design = "NAME_Ancient_Vault"
								graphical_culture = "ancient"
							}
							create_ship = {
								name = ""
								design = "NAME_Ancient_Guardian"
								graphical_culture = "ancient"
							}			
							create_ship = {
								name = ""
								design = "NAME_Ancient_Guardian"
								graphical_culture = "ancient"
							}
							create_ship = {
								name = ""
								design = "NAME_Ancient_Warden"
								graphical_culture = "ancient"
							}
							create_ship = {
								name = ""
								design = "NAME_Ancient_Warden"
								graphical_culture = "ancient"
							}
							create_ship = {
								name = ""
								design = "NAME_Ancient_Defender"
								graphical_culture = "ancient"
							}
							create_ship = {
								name = ""
								design = "NAME_Ancient_Defender"
								graphical_culture = "ancient"
							}
							create_ship = {
								name = ""
								design = "NAME_Ancient_Defender"
								graphical_culture = "ancient"
							}
							create_ship = {
								name = ""
								design = "NAME_Ancient_Defender"
								graphical_culture = "ancient"
							}
							create_ship = {
								name = ""
								design = "NAME_Ancient_Sentinel"
								graphical_culture = "ancient"
							}
							create_ship = {
								name = ""
								design = "NAME_Ancient_Sentinel"
								graphical_culture = "ancient"
							}
							create_ship = {
								name = ""
								design = "NAME_Ancient_Sentinel"
								graphical_culture = "ancient"
							}
							create_ship = {
								name = ""
								design = "NAME_Ancient_Sentinel"
								graphical_culture = "ancient"
							}
							create_ship = {
								name = ""
								design = "NAME_Ancient_Sentinel"
								graphical_culture = "ancient"
							}
							create_ship = {
								name = ""
								design = "NAME_Ancient_Sentinel"
								graphical_culture = "ancient"
							}
							create_ship = {
								name = ""
								design = "NAME_Ancient_Sentinel"
								graphical_culture = "ancient"
							}
							create_ship = {
								name = ""
								design = "NAME_Ancient_Sentinel"
								graphical_culture = "ancient"
							}
						}
						set_fleet_formation = {
							position = { x = 13.0	y = -7.0	} #17
							position = { x = 11.5	y = -13.0	} #16
							position = { x = 0.0	y = -15.5	} #15
							position = { x = 13.0	y = 7.0		} #14
							position = { x = -11.8	y = -4.0	} #13
							position = { x = -15.8	y = 6.5		} #12
							position = { x = -10.0	y = 8.5		} #11
							position = { x = -1.6	y = 15.0	} #10
							position = { x = 14.0	y = -3.0	} #9
							position = { x = 1.3	y = -11.0	} #8
							position = { x = -10.5	y = 1.0		} #7
							position = { x = 3.0	y = 8.0		} #6
							position = { x = -4.3	y = -7.0	} #5
							position = { x = 8.0	y = 9.0		} #4
							position = { x = -4.0	y = 7.3		} #3 
							position = { x = 7.5	y = -10.5	} #2
							position = { x = 0.0	y = 0.0		} #1
						}
						set_formation_scale = 0.5
						set_location = {
							target = root
							distance = 0
							angle = 1
						}
					}
				}
				event_target:nep_deus_home = {
					destroy_colony = yes
				}
			}
			random_country = {
				limit = {
					OR = {
						has_country_flag = nep_deus_dont_save
						has_country_flag = nep_deus_you_want_save
					}
				}
				country_event = { id = nep_deuspi.72 }
			}
		}
	}
}

country_event = {
	id = nep_deuspi.72
	title = "nep_deuspi.72.name"
	desc = {
		trigger = { has_country_flag = nep_deus_dont_save }
		text = nep_deuspi.72.desc.a
	}
	desc = {
		trigger = { has_country_flag = nep_deus_you_want_save }
		text = nep_deuspi.72.desc.b
	}
	picture = GFX_evt_enigmatic_fortress
	show_sound = event_yellow_alert
	location = event_target:nep_deus_home
	
	is_triggered_only = yes
	
	immediate = {
		remove_country_flag = nep_deus_dont_save
		remove_country_flag = nep_deus_you_want_save
	}
	
	option = {
		name = anomaly.625.a
		abort_special_project = nep_deus_virus_emergency
	}
}

country_event = {
	id = nep_deuspi.73
	title = nep_deuspi.73.name
	desc = nep_deuspi.73.desc
	picture = GFX_evt_disease_outbreak
	show_sound = event_laboratory_sound
	location = event_target:nep_deus_home
	
	is_triggered_only = yes
	
	immediate = {
	}
	
	option = {
		name = OK
		add_resource = { minerals = -300 }
		hidden_effect = {
			event_target:nep_deus_home = { 
				remove_building = building_primitive_farm
				remove_building = building_urban_dwellings
				remove_building = building_urban_dwellings
			}
		}
		event_target:nep_deus_home = { add_building = building_clinic }		
		hidden_effect = {
			event_target:nep_deus_home = { 
				add_building = building_primitive_farm
				add_building = building_urban_dwellings
				add_building = building_urban_dwellings
			}
		}
		hidden_effect = { country_event = { id = nep_deuspi.74 days = 60 } }
	}

	option = {
		name = nep_deuspi.73.b
		hidden_effect = { 
			remove_country_flag = nep_deus_you_want_save
			set_country_flag = nep_deus_dont_save
		}
	}
}

country_event = {
	id = nep_deuspi.74
	title = nep_deuspi.74.name
	desc = nep_deuspi.74.desc
	picture = GFX_evt_disease_outbreak
	show_sound = event_laboratory_sound
	location = event_target:nep_deus_home
	
	is_triggered_only = yes
	
	immediate = {
		event_target:nep_deus_home = {
			set_planet_flag = nep_deus_virus_clear
		}
	}
	
	option = {
		name = nep_deuspi.74.a
		hidden_effect = { 
			country_event = { id = nep_deuspi.75 days = 720 } 
		}
	}
}

country_event = {
	id = nep_deuspi.75
	hide_window = yes
	
	is_triggered_only = yes
	
	immediate = {
		country_event = { id = nep_deuspi.51 } 
	}
}

country_event = {
	id = nep_deuspi.8
	title = TRANSMISSION
	desc = nep_deuspi.8.desc
	
	diplomatic = yes
	
	is_triggered_only = yes

	picture_event_data = {
		room = no_video_feed_room
	}
	
	immediate = {
	
	}
	
	option = {
		name = ONSCREEN
		default_hide_option = yes
		country_event = { id = nep_deuspi.8001 }
	}
	
	option = {
		name = nep_deuspi.8.a
	}
}

country_event = {
	id = nep_deuspi.8001
	title = UNKNOWN_LONG
	desc = nep_deuspi.8001.desc
	
	diplomatic = yes
	
	is_triggered_only = yes

	picture_event_data = {
		portrait = event_target:nep_deus_male
		planet_background = event_target:nep_deus_country
		graphical_culture = event_target:nep_deus_country
		city_level = event_target:nep_deus_country
		room = event_target:nep_deus_country
	}
	
	immediate = {
	
	}
	
	option = {
		name = nep_deuspi.8001.a
		set_country_flag = nep_deus_lie
		country_event = { id = nep_deuspi.8012 }
	}
	
	option = {
		name = nep_deuspi.8001.b
		country_event = { id = nep_deuspi.8022 }
	}
	
	
	option = {
		name = nep_deuspi.8001.c
		default_hide_option = yes
		hidden_effect = { set_global_flag = nep_deuspi_end }
	}
}

country_event = {
	id = nep_deuspi.8012
	title = UNKNOWN_LONG
	desc = nep_deuspi.8012.desc
	
	diplomatic = yes
	
	is_triggered_only = yes

	picture_event_data = {
		portrait = event_target:nep_deus_male
		planet_background = event_target:nep_deus_country
		graphical_culture = event_target:nep_deus_country
		city_level = event_target:nep_deus_country
		room = event_target:nep_deus_country
	}
	
	immediate = {
	
	}
	
	option = {
		name = nep_deuspi.8012.a
		is_dialog_only = yes
		response_text = nep_deuspi.8012.a.response
	}
	
	option = {
		name = nep_deuspi.8012.b
		country_event = { id = nep_deuspi.8013 }
	}
	
	
	option = {
		name = nep_deuspi.8012.c
		default_hide_option = yes
		hidden_effect = { set_global_flag = nep_deuspi_end }
	}
}

country_event = {
	id = nep_deuspi.8013
	title = UNKNOWN_LONG
	desc = nep_deuspi.8013.desc
	
	diplomatic = yes
	
	is_triggered_only = yes

	picture_event_data = {
		portrait = event_target:nep_deus_male
		planet_background = event_target:nep_deus_country
		graphical_culture = event_target:nep_deus_country
		city_level = event_target:nep_deus_country
		room = event_target:nep_deus_country
	}
	
	immediate = {
	
	}
	
	option = {
		name = nep_deuspi.8013.a
		add_resource = {
			minerals = 1
		}
		country_event = { id = nep_deuspi.80142 }
	}
	
	option = {
		name = nep_deuspi.8013.b
		country_event = { id = nep_deuspi.8014 }
	}
	
	
	option = {
		name = nep_deuspi.8012.c
		default_hide_option = yes
		hidden_effect = { set_global_flag = nep_deuspi_end }
	}
}

country_event = {
	id = nep_deuspi.8014
	title = UNKNOWN_LONG
	desc = nep_deuspi.8014.desc
	
	diplomatic = yes
	
	is_triggered_only = yes

	picture_event_data = {
		portrait = event_target:nep_deus_male
		planet_background = event_target:nep_deus_country
		graphical_culture = event_target:nep_deus_country
		city_level = event_target:nep_deus_country
		room = event_target:nep_deus_country
	}
	
	immediate = {
	
	}
	
	option = {
		name = nep_deuspi.8014.a
		custom_tooltip = nep_deuspi.8014.a.tooltip
		hidden_effect = {
			random_list = {
				3 = { country_event = { id = nep_deuspi.8015 days = 5 } }
				1 = { country_event = { id = nep_deuspi.8016 days = 5 } }
			}
		}
	}
	
	option = {
		name = nep_deuspi.8014.b
		hidden_effect = { country_event = { id = nep_deuspi.8017 } }
	}
	
	option = {
		name = nep_deuspi.8014.c
		trigger = { 
			OR = {
				has_ethic = ethic_xenophobe
				has_ethic = ethic_fanatic_xenophobe
				has_ethic = ethic_fanatic_authoritarian
				has_ethic = ethic_authoritarian
				has_authority = auth_hive_mind
			}
		}
		event_target:nep_deus_home = {
			random_owned_pop = {
				kill_pop = yes
			}
		}
		hidden_effect = { set_global_flag = nep_deuspi_end }
	}
		
	option = {
		name = nep_deuspi.8012.c
		default_hide_option = yes
		hidden_effect = { set_global_flag = nep_deuspi_end }
	}
}

country_event = {
	id = nep_deuspi.80142
	title = UNKNOWN_LONG
	desc = nep_deuspi.80142.desc
	
	diplomatic = yes
	
	is_triggered_only = yes

	picture_event_data = {
		portrait = event_target:nep_deus_male
		planet_background = event_target:nep_deus_country
		graphical_culture = event_target:nep_deus_country
		city_level = event_target:nep_deus_country
		room = event_target:nep_deus_country
	}
	
	immediate = {
	
	}
	
	option = {
		name = nep_deuspi.8014.a
		custom_tooltip = nep_deuspi.8014.a.tooltip
		hidden_effect = {
			random_list = {
				3 = { country_event = { id = nep_deuspi.8015 days = 5 } }
				1 = { country_event = { id = nep_deuspi.8016 days = 5 } }
			}
		}
	}
	
	option = {
		name = nep_deuspi.8014.b
		hidden_effect = { country_event = { id = nep_deuspi.8017 } }
	}
		
	option = {
		name = nep_deuspi.8012.c
		default_hide_option = yes
		hidden_effect = { set_global_flag = nep_deuspi_end }
	}
}

country_event = {
	id = nep_deuspi.8015
	title = "nep_deuspi.41.name"
	desc = "nep_deuspi.8015.desc"
	picture = GFX_evt_alien_planet
	show_sound = event_laboratory_sound
	location = event_target:nep_deus_home
	
	is_triggered_only = yes
	
	immediate = {
		set_global_flag = nep_deuspi_end
	}
	
	option = {
		name = nep_deuspi.41.a
		default_hide_option = yes
		#protectorate
		hidden_effect = { country_event = { id = nep_deuspi.51 } }
	}
	
	option = {
		name = nep_deuspi.41.b
		default_hide_option = yes
		trigger = {
			NOT = { has_authority = auth_machine_intelligence }
		}
		#join
		hidden_effect = { country_event = { id = nep_deuspi.53 } }
	}
	
	option = {
		name = nep_deuspi.41.c
		default_hide_option = yes
		trigger = {
			OR = {
				has_ethic = ethic_xenophobe
				has_ethic = ethic_fanatic_xenophobe
				has_authority = auth_hive_mind
				has_authority = auth_machine_intelligence
			}
		}
		#Die!
		event_target:nep_deus_home = { 
			destroy_colony = yes
		}
		event_target:nep_deus_country = {
			destroy_country = yes
		}
		hidden_effect = {
			event_target:nep_global_deus = {
				destroy_country = yes
			}
		}
	}
}

country_event = {
	id = nep_deuspi.8016
	title = "nep_deuspi.42.name"
	desc = "nep_deuspi.8016.desc"
	picture = GFX_evt_metropolis
	show_sound = event_laboratory_sound
	location = event_target:nep_deus_home
	
	is_triggered_only = yes
	
	immediate = {
		set_global_flag = nep_deuspi_end
	}
	
	option = {
		name = nep_deuspi.42.a
		custom_tooltip = nep_deuspi.42.a.tooltip
		default_hide_option = yes
		#Enlightenment with Hate
		hidden_effect = { country_event = { id = nep_deuspi.52 } }
	}
}

country_event = {
	id = nep_deuspi.8017
	title = "nep_deuspi.8017.name"
	desc = "nep_deuspi.8017.desc"
	picture = GFX_evt_alien_segregation
	location = event_target:nep_deus_home
	show_sound = event_ghost_town

	is_triggered_only = yes
	
	immediate = {}
	
	option = {
		name = nep_deuspi.8017.a
		custom_tooltip = nep_deuspi.42.a.tooltip
		#Enlightenment with Hate
		hidden_effect = { country_event = { id = nep_deuspi.52 } }
	}
	
	option = {
		name = nep_deuspi.8017.b
		hidden_effect = { country_event = { id = nep_deuspi.8018 } }
	}
	
	option = {
		name = nep_deuspi.8017.c
		custom_tooltip = nep_deuspi.8017.c.tooltip
		hidden_effect = {
			random_list = {
				3 = { country_event = { id = nep_deuspi.8019 } }
				1 = { country_event = { id = nep_deuspi.8020 } }
			}
		}
	}
}

country_event = {
	id = nep_deuspi.8018
	title = "nep_deuspi.8018.name"
	desc = "nep_deuspi.8018.desc"
	picture = GFX_evt_alien_segregation
	location = event_target:nep_deus_home
	show_sound = event_default
	
	is_triggered_only = yes
	
	immediate = {}
	
	option = {
		name = nep_deuspi.8018.a
		custom_tooltip = nep_deuspi.8018.a.tooltip
		hidden_effect = {
			event_target:nep_deus_home = {
				random_owned_pop = {
					kill_pop = yes
				}
				closest_system = {
					limit = {
						any_system_planet = {
							exists = owner
							owner = { is_same_value = root }
							is_colony = yes
							free_housing >= 1
						}
					}
					random_system_planet = {
						limit = {
							exists = owner
							owner = { is_same_value = root }
							is_colony = yes
							free_housing >= 1
						}
						create_pop = {
							species = event_target:nep_deus_country
						}
					}
				}
			}
			root = {
				random_owned_pop = {
					limit = { is_same_species = event_target:nep_deus_country }
					add_modifier = {
						modifier = nep_remorse
						days = -1
					}
				}
			}
		}
		#Enlightenment with Hate
		hidden_effect = { country_event = { id = nep_deuspi.52 } }
	}
	
	option = {
		name = nep_deuspi.8018.b
		enable_special_project = {
			name = "nep_deus_rescue_1"
			location = event_target:nep_deus_home
			owner = ROOT
		}
	}
	
	option = {
		name = nep_deuspi.8018.c
		enable_special_project = {
			name = "nep_deus_rescue_2"
			location = event_target:nep_deus_home
			owner = ROOT
		}
	}
}

country_event = {
	id = nep_deuspi.8019
	title = "nep_deuspi.8019.name"
	desc = "nep_deuspi.8019.desc"
	picture = GFX_evt_alien_segregation
	location = event_target:nep_deus_home
	show_sound = event_ground_battle
	
	is_triggered_only = yes
	
	immediate = {}
	
	option = {
		name = nep_deuspi.8019.a
		hidden_effect = {
			event_target:nep_deus_home = {
				random_owned_pop = {
					kill_pop = yes
				}
				random_owned_pop = {
					limit = { has_job = nep_servent_of_god }
					kill_pop = yes
				}
				closest_system = {
					limit = {
						any_system_planet = {
							exists = owner
							owner = { is_same_value = root }
							is_colony = yes
							free_housing >= 2
						}
					}
					random_system_planet = {
						limit = {
							exists = owner
							owner = { is_same_value = root }
							is_colony = yes
							free_housing >= 2
						}
						create_pop = {
							species = event_target:nep_deus_country
						}
						create_pop = {
							species = event_target:nep_deus_country
						}
					}
				}
			}
		}
		#Enlightenment with Hate
		hidden_effect = { country_event = { id = nep_deuspi.52 } }
	}
	
	option = {
		name = nep_deuspi.8019.b
		custom_tooltip = nep_deuspi.8019.b.tooltip
		hidden_effect = {
			event_target:nep_deus_home = {
				random_owned_pop = {
					kill_pop = yes
				}
				random_owned_pop = {
					limit = { has_job = nep_servent_of_god }
					kill_pop = yes
				}
				closest_system = {
					use_bypasses = yes
					limit = {
						any_system_planet = {
							exists = owner
							owner = { is_same_value = root }
							is_colony = yes
							free_housing >= 2
						}
					}
					random_system_planet = {
						limit = {
							exists = owner
							owner = { is_same_value = root }
							is_colony = yes
							free_housing >= 2
						}
						create_pop = {
							species = event_target:nep_deus_country
						}
						create_pop = {
							species = event_target:nep_deus_country
						}
					}
				}
			}
		}
		enable_special_project = {
			name = "nep_deus_rescue_3"
			location = event_target:nep_deus_home
			owner = ROOT
		}
	}
}

country_event = {
	id = nep_deuspi.8020
	title = "nep_deuspi.8020.name"
	desc = "nep_deuspi.8020.desc"
	picture = GFX_evt_alien_segregation
	location = event_target:nep_deus_home
	show_sound = event_ghost_town
	
	is_triggered_only = yes
	
	immediate = {}
	
	option = {
		name = nep_deuspi.42.a
		custom_tooltip = nep_deuspi.42.a.tooltip
		#Enlightenment with Hate
		hidden_effect = { country_event = { id = nep_deuspi.52 } }
	}
}

country_event = {
	id = nep_deuspi.8021
	title = "nep_deuspi.8021.name"
	desc = "nep_deuspi.8021.desc"
	picture = GFX_evt_alien_segregation
	location = event_target:nep_deus_home
	show_sound = event_ground_battle
	
	is_triggered_only = yes
	
	immediate = {
		event_target:nep_deus_home = {
			remove_building = building_nep_palace_of_machina
			set_owner = ROOT
		}
	}
	
	option = {
		name = OK
	}
}


country_event = {
	id = nep_deuspi.8022
	title = UNKNOWN_LONG
	desc = nep_deuspi.8022.desc
	
	diplomatic = yes
	
	is_triggered_only = yes

	picture_event_data = {
		portrait = event_target:nep_deus_male
		planet_background = event_target:nep_deus_country
		graphical_culture = event_target:nep_deus_country
		city_level = event_target:nep_deus_country
		room = event_target:nep_deus_country
	}
	
	immediate = {
	
	}
	
	option = {
		name = nep_deuspi.8022.a
		default_hide_option = yes
		country_event = { id = nep_deuspi.8023 }
	}
}

country_event = {
	id = nep_deuspi.8023
	title = UNKNOWN_LONG
	desc = nep_deuspi.8023.desc
	
	diplomatic = yes
	
	is_triggered_only = yes

	picture_event_data = {
		portrait = event_target:nep_deus_male
		planet_background = event_target:nep_deus_country
		graphical_culture = event_target:nep_deus_country
		city_level = event_target:nep_deus_country
		room = event_target:nep_deus_country
	}
	
	immediate = {
	
	}
	
	option = {
		name = nep_deuspi.8023.a
		country_event = { id = nep_deuspi.8024 }
	}
	
	option = {
		name = nep_deuspi.8001.c
		default_hide_option = yes
		hidden_effect = { set_global_flag = nep_deuspi_end }
	}
}

country_event = {
	id = nep_deuspi.8024
	title = UNKNOWN_LONG
	desc = nep_deuspi.8024.desc
	
	diplomatic = yes
	
	is_triggered_only = yes

	picture_event_data = {
		portrait = event_target:nep_deus_male
		planet_background = event_target:nep_deus_country
		graphical_culture = event_target:nep_deus_country
		city_level = event_target:nep_deus_country
		room = event_target:nep_deus_country
	}
	
	immediate = {
	
	}
	
	option = {
		name = nep_deuspi.8024.a
		custom_tooltip = nep_deuspi.8024.a.tooltip
		hidden_effect = {
			random_list = {
				3 = { country_event = { id = nep_deuspi.8015 days = 5 } }
				1 = { country_event = { id = nep_deuspi.8016 days = 5 } }
			}
		}
	}
	
	option = {
		name = nep_deuspi.8024.b
		hidden_effect = { country_event = { id = nep_deuspi.8017 } }
	}
	
	option = {
		name = nep_deuspi.8012.c
		default_hide_option = yes
		hidden_effect = { set_global_flag = nep_deuspi_end }
	}
}

namespace = nep_deuspl
country_event = {
	id = nep_deuspl.1
	hide_window = yes
	
	is_triggered_only = yes
	
	fire_only_once = yes
	
	trigger = {
		has_origin = origin_nep_deus_ex_machina
	}
	
	immediate = {
		if = {
			limit = { is_ai = no }
			set_global_flag = nep_deus_spawn
			set_spawn_system_batch = begin
			no_scope = {
				spawn_system = {
					min_distance >= 494
					max_distance <= 500
					min_orientation_angle = -142
					max_orientation_angle = -134
					hyperlane = no
					initializer = nep_deus_init_01
				}
			}
			random_system = {
				limit = {
					has_star_flag = nep_deus_system
				}
				while = {
					count = 3
					spawn_system = {
						min_distance >= 10
						max_distance <= 20
						hyperlane = no
						initializer = nep_deus_init_02
					}
				}
				spawn_system = {
					min_distance >= 10
					max_distance <= 20
					min_orientation_angle = -124
					max_orientation_angle = -132
					hyperlane = no
					initializer = nep_deus_init_03
				}
				random_system = {
					limit = { has_star_flag = nep_deus_system_3 }
					while = {
						count = 3
						spawn_system = {
							min_distance >= 10
							max_distance <= 20
							min_orientation_angle = -124
							max_orientation_angle = -132
							hyperlane = no
							initializer = nep_deus_init_04
						}
					}
					save_event_target_as = nep_deus_system_3
				}
				save_global_event_target_as = nep_deus_system
				clear_global_event_target = nep_deus_home
				random_galaxy_planet = {
					limit = { has_planet_flag = nep_deus_home }
					save_global_event_target_as = nep_deus_home
				}
				event_target:nep_deus_home = {
					if = {
						limit = {
							root.capital_scope = { is_planet_class = pc_desert }
						}
						change_pc = pc_desert
					}
					if = {
						limit = {
							root.capital_scope = { is_planet_class = pc_arid }
						}
						change_pc = pc_arid
					}
					if = {
						limit = {
							root.capital_scope = { is_planet_class = pc_savannah }
						}
						change_pc = pc_savannah
					}
					if = {
						limit = {
							root.capital_scope = { is_planet_class = pc_tropical }
						}
						change_pc = pc_tropical
					}
					if = {
						limit = {
							root.capital_scope = { is_planet_class = pc_continental }
						}
						change_pc = pc_continental
					}
					if = {
						limit = {
							root.capital_scope = { is_planet_class = pc_ocean }
						}
						change_pc = pc_ocean
					}
					if = {
						limit = {
							root.capital_scope = { is_planet_class = pc_tundra }
						}
						change_pc = pc_tundra
					}
					if = {
						limit = {
							root.capital_scope = { is_planet_class = pc_arctic }
						}
						change_pc = pc_arctic
					}
					if = {
						limit = {
							root.capital_scope = { is_planet_class = pc_alpine }
						}
						change_pc = pc_alpine
					}
					if = {
						limit = {
							root.capital_scope = { is_planet_class = pc_nuked }
						}
						change_pc = pc_nuked
					}
					if = {
						limit = {
							root.capital_scope = { 
								OR = {
									is_planet_class = pc_gaia
									is_planet_class = pc_habitat
									is_planet_class = pc_ringworld_habitable
								}
							}
						}
						change_pc = pc_gaia
					}
				}
				every_system = {
					limit = { has_star_flag = nep_deus_system_2 }
					add_hyperlane = { from = event_target:nep_deus_system to = this }
					random_system_planet = {
						limit = { is_colonizable = yes }
						if = {
							limit = {
								event_target:nep_deus_home = {
									OR = {
										is_planet_class = pc_desert
										is_planet_class = pc_arid
										is_planet_class = pc_savannah
									}
								}
							}
							random_list = {
								1 = { change_pc = pc_desert }
								1 = { change_pc = pc_arid }
								1 = { change_pc = pc_savannah }
							}
						}					
						if = {
							limit = {
								event_target:nep_deus_home = {
									OR = {
										is_planet_class = pc_tropical
										is_planet_class = pc_continental
										is_planet_class = pc_ocean
									}
								}
							}
							random_list = {
								1 = { change_pc = pc_tropical }
								1 = { change_pc = pc_continental }
								1 = { change_pc = pc_ocean }
							}
						}					
						if = {
							limit = {
								event_target:nep_deus_home = {
									OR = {
										is_planet_class = pc_tundra
										is_planet_class = pc_arctic
										is_planet_class = pc_alpine
									}
								}
							}
							random_list = {
								1 = { change_pc = pc_tundra }
								1 = { change_pc = pc_arctic }
								1 = { change_pc = pc_alpine }
							}
						}
					}
				}
				add_hyperlane = { from = event_target:nep_deus_system to = event_target:nep_deus_system_3 }
				every_system = {
					limit = { has_star_flag = nep_deus_system_4 }
					add_hyperlane = { from = event_target:nep_deus_system_3 to = this }
				}
			}
			set_spawn_system_batch = end
			event_target:nep_deus_system = {
				spawn_natural_wormhole = {
					bypass_type = wormhole
					random_pos = yes
				}
				random_rim_system = {
					limit = { 
						has_natural_wormhole = no
						NOT = { any_ship_in_system = { exists = this } }
					}
					spawn_natural_wormhole = {
						bypass_type = wormhole
						random_pos = yes
					}
					link_wormholes = prev
				}
				create_starbase = {
					size = starbase_starport
					module = shipyard
					building = crew_quarters
					owner = root
				}
			}
			clear_global_event_target = nep_deus_home
			random_galaxy_planet = {
				limit = { has_planet_flag = nep_deus_home }
				save_global_event_target_as = nep_deus_home
			}
			event_target:nep_deus_home = {
				create_colony = {
					owner = root
					species = root
					ethos = owner
				}
				generate_start_deposits_and_blockers = yes
				generate_start_buildings_and_districts = yes
				generate_start_pops = yes
				add_building = building_nep_palace_of_machina
				solar_system = {
					random_system_planet = {
						limit = {
							has_deposit = d_energy_5
							has_mining_station = no
						}
						create_mining_station = {
							owner = root
						}
					}
					random_system_planet = {
						limit = {
							has_deposit = d_energy_5
							has_mining_station = no
						}
						create_mining_station = {
							owner = root
						}
					}
					random_system_planet = {
						limit = {
							has_deposit = d_minerals_5
							has_mining_station = no
						}
						create_mining_station = {
							owner = root
						}
					}
					random_system_planet = {
						limit = {
							has_deposit = d_minerals_5
							has_mining_station = no
						}
						create_mining_station = {
							owner = root
						}
					}
				}
			}
			species = {
				set_species_homeworld = event_target:nep_deus_home
			}
			add_research_option = tech_wormhole_stabilization
			random_owned_planet = {
				limit = {
					is_colony = yes
					is_capital = yes
				}
				solar_system = {
					random_fleet_in_system = {
						limit = {
							any_owned_ship = {
								is_ship_class = shipclass_starbase
							}
						}
						destroy_fleet = this
					}
				}
				destroy_colony = yes
				remove_planet = yes
				set_surveyed = { surveyed = no surveyor = root }
			}
			every_owned_fleet = {
				limit = {
					NOT = { is_ship_class = shipclass_starbase }
				}
				set_location = {
					target = root.capital_scope
					distance = 1
					angle = random
				}
			}
			IF = {
				LIMIT = { host_has_dlc = "Synthetic Dawn Story Pack" }
				create_species = {
					name = random
					class = ROBOT
					portrait = random
					namelist = "AI"
					traits = {
						trait = trait_mechanical
						trait = random_traits
					}
					effect = {
						save_event_target_as = nep_machina_species
					}
				}
				ELSE = {
					create_species = {
						name = random
						class = ROBOT
						portrait = 2dsynth_01
						namelist = "AI"
						traits = {
							trait = trait_mechanical
							trait = random_traits
						}
						effect = {
							save_event_target_as = nep_machina_species
						}
					}
				}
			}
			create_leader = {
				class = governor
				species = event_target:nep_machina_species
				name = "NAME_nep_machina"
				skill = 10
				event_leader = yes
				immortal = yes
			}
			set_leader = last_created_leader
		}
		else = {
			set_origin = origin_default
		}
	}

	after = {
		country_event = { id = distar.3043 days = 3 random = 3 }
	}
}

country_event = {
	id = nep_deuspl.2
	title = "nep_deuspl.2.name"
	desc = "nep_deuspl.2.desc"
	picture = GFX_evt_sapient_AI
	show_sound = event_yellow_alert
	
	fire_only_once = yes
	
	trigger = {
		is_ai = no
		has_origin = origin_nep_deus_ex_machina
		years_passed > 80
		resource_stockpile_compare = {
			resource = energy
			value >= 200
		}
	}
	
	mean_time_to_happen = {
		years = 30
	}
	
	immediate = {
	
	}
	
	option = { 
		name = nep_deuspl.2.a
		add_resource = {
			energy = -100
		}
	}
	
	option = { 
		name = nep_deuspl.2.b
		hidden_effect = {
			country_event = { id = nep_deuspl.3 days = 3600 random = 12800 }
		}
	}
}

country_event = {
	id = nep_deuspl.3
	title = "nep_deuspl.3.name"
	desc = "nep_deuspl.3.desc"
	picture = GFX_evt_machine_sapience
	show_sound = event_red_alert
	
	trigger = {
		has_origin = origin_nep_deus_ex_machina
	}
	
	is_triggered_only = yes
	
	immediate = {
		save_global_event_target_as = nep_deus_country
		add_modifier = { 
			modifier = nep_deus_malfunction
			days = -1
		}
		set_country_flag = nep_deus_malfunction
		country_event = { id = nep_deus.3 days = 360 random = 360 }
		country_event = { id = nep_deuspl.4 days = 3600 random = 18000 }
	}
	
	option = { 
		name = nep_deuspl.3.a
	}
}

country_event = {
	id = nep_deuspl.4
	title = "nep_deuspl.4.name"
	desc = "nep_deuspl.4.desc"
	picture = GFX_evt_machine_sapience
	show_sound = event_scanner
	
	is_triggered_only = yes
	immediate = {
		
	}
	
	option = {
		name = nep_deuspl.4.a
	}
	option = {
		name = nep_deuspl.4.b
		country_event = { id = nep_deuspl.5 days = 5 }
	}
}

country_event = {
	id = nep_deuspl.5
	title = "nep_deuspl.5.name"
	desc = "nep_deuspl.5.desc"
	picture = GFX_evt_machine_sapience
	show_sound = event_scanner
	is_triggered_only = yes
	
	immediate = {
		remove_country_flag = nep_deus_malfunction
		remove_modifier = nep_deus_malfunction
	}
	
	option = {
		name = OK
		custom_tooltip = nep_deuspl.5.tooltip
		hidden_effect = {
			every_country = {
				limit = { is_at_war_with = root }
				add_opinion_modifier = { who = root modifier = opinion_nep_dangerous_machine }
			}
		}
	}
}

country_event = {
	id = nep_deuspl.8
	hide_window = yes
	is_triggered_only = yes
	
	trigger = {
		has_global_flag = nep_deus_spawn
		fromfrom = { is_same_value = event_target:nep_deus_home }
		from = { has_origin = origin_nep_deus_ex_machina }		
		any_country = {
			AND = {
				NOT = { 
					is_ai = yes
					has_country_flag = nep_deus_malfunction
				}
				has_origin = origin_nep_deus_ex_machina
			}
		}
		OR = {
			is_country_type = default
			is_country_type = fallen_empire
			is_country_type = awakened_fallen_empire
			is_country_type = swarm
			is_country_type = extradimensional
			is_country_type = extradimensional_2
			is_country_type = extradimensional_3
			is_country_type = ai_empire
			is_country_type = awakened_marauders
			is_country_type = nep_Krahen_country
		}
	}
	
	immediate = {
		from = { country_event = { id = nep_deuspl.81 } }
	}
}

planet_event = {
	id = nep_deuspl.800
	hide_window = yes
	is_triggered_only = yes
	
	trigger = {
		has_planet_flag = nep_deus_home
		any_country = {
			AND = {
				NOT = { 
					is_ai = yes
					has_country_flag = nep_deus_malfunction
				}
				has_origin = origin_nep_deus_ex_machina
			}
		}
		from = { NOT = { has_origin = origin_nep_deus_ex_machina } }
	}
	
	immediate = {
		random_country = {
			limit = { 
				has_origin = origin_nep_deus_ex_machina
			}
			country_event = { id = nep_deuspl.81 }
		}
	}
}

country_event = {
	id = nep_deuspl.801
	hide_window = yes
	is_triggered_only = yes
	
	trigger = {
		from = { is_same_value = event_target:nep_deus_home }
		NOT = { has_origin = origin_nep_deus_ex_machina }
		any_country = {
			AND = {
				is_ai = no
				has_origin = origin_nep_deus_ex_machina
			}
		}
		OR = {
			is_country_type = default
			is_country_type = fallen_empire
			is_country_type = awakened_fallen_empire
			is_country_type = swarm
			is_country_type = extradimensional
			is_country_type = extradimensional_2
			is_country_type = extradimensional_3
			is_country_type = ai_empire
			is_country_type = awakened_marauders
			is_country_type = nep_Krahen_country
		}
	}
	
	immediate = {
		from = { country_event = { id = nep_deuspl.81 } }
	}
}

country_event = {
	id = nep_deuspl.81
	title = "nep_deuspl.81.name"
	desc = "nep_deuspl.81.desc"
	picture = GFX_evt_glitchy_matrix
	show_sound = event_ground_battle
	
	is_triggered_only = yes
	
	immediate = {
		
	}
	
	option = {
		name = nep_deuspl.81.a
	}
	
	after = {
		destroy_country = yes
	}
}

country_event = {
	id = nep_deuspl.9
	title = "nep_deuspl.9.name"
	desc = "nep_deuspl.9.desc"
	picture = GFX_evt_machine_sapience
	show_sound = event_ai_started
	
	is_triggered_only = yes
	trigger = {
		has_origin = origin_nep_deus_ex_machina
		from = { is_same_value = root.leader }
		NOT = { has_country_flag = nep_deus_killed_leader }
	}
	
	immediate = {
		if = {
			limit = { is_ai = yes }
			clone_leader = {
				target = root.owner
				effect = {
					save_global_event_target_as = nep_deus_temp_ruler
				}
			}
			country_event = { id = nep_deuspl.91 days = 5 }
		}
		else = {
			country_event = { id = nep_deuspl.92 }
		}
	}
	
	option = {
		name = OK
	}
}

country_event = {
	id = nep_deuspl.91
	hide_window = yes
	
	is_triggered_only = yes
	
	immediate = {
		assign_leader = event_target:nep_deus_temp_ruler
		clear_global_event_target = nep_deus_temp_ruler
	}
}

country_event = {
	id = nep_deuspl.92
	title = "nep_deuspl.92.name"
	desc = "nep_deuspl.92.desc"
	picture = GFX_evt_glitchy_matrix
	show_sound = event_red_alert
	
	is_triggered_only = yes
	
	immediate = {
		
	}
	
	option = {
		name = nep_deuspl.92.a
	}
	
	after = {
		destroy_country = yes
	}
}

#############################################
# Guide a Girl to the Galaxy
#############################################
# namespace = nep_guide
# ship_event = {
	# id = nep_guide.1
	# hide_window = yes
	
	# is_triggered_only = yes
	
	# fire_only_once = yes
	
	# immediate = {
		# set_spawn_system_batch = begin
		# no_scope = {
			# spawn_system = {
				# min_distance >= 494
				# max_distance <= 500
				# min_orientation_angle = 15
				# max_orientation_angle = 345
				# hyperlane = no
				# initializer = nep_guide_init
			# }
		# }
		# set_spawn_system_batch = end
		# solar_system = {
			# spawn_natural_wormhole = {
				# bypass_type = wormhole
				# random_pos = yes
			# }
		# }
		# random_system = {
			# limit = {
				# has_star_flag = nep_guide_star
			# }
			# spawn_natural_wormhole = {
				# bypass_type = wormhole
				# random_pos = yes
			# }
			# link_wormholes = root.solar_system
		# }
	# }
# }

# planet_event = {
	# id = nep_guide.2
	# hide_window = yes
	
	# is_triggered_only = yes
	
	# pre_triggers = {
		# has_owner = yes
		# is_capital = yes
	# }
	
	# trigger = {
		# from = { 
			# is_ai = no 
			# NOT = { has_ethic = ethic_gestalt_consciousness }
		# }
		# NOT = { has_global_flag = nep_guide_begin }
		# root = { is_same_value = event_target:nep_guide_planet }
	# }
	
	# immediate = {
		# from = { country_event = { id = nep_guide.2000 } }
	# }
# }

# country_event = {
	# id = nep_guide.2000
	# title = "nep_guide.2000.name"
	# desc = "nep_guide.2000.desc"
	# picture = GFX_evt_alien_nature
	# location = fromfromfrom
	
	# is_triggered_only = yes
	
	# immediate = {
		# fromfromfrom = {
			# set_event_locked = yes
		# }
	# }
	
	# option = {
		# name = nep_guide.2000.a
		# hidden_effect = { 
			# country_event = { id = nep_guide.2001 days = 3 }	
			# fromfromfrom = {
				# save_global_event_target_as = nep_guide_ship
			# }
			# set_global_flag = nep_guide_begin
		# }
	# }
	
	
	# option = {
		# name = nep_guide.2000.b
		# fromfromfrom = {
			# set_event_locked = no
		# }
	# }
# }

# country_event = {
	# id = nep_guide.2001
	# title = "nep_guide.2001.name"
	# desc = "nep_guide.2001.desc"
	# picture = GFX_evt_alien_nature
	# location = event_target:nep_guide_ship
	
	# is_triggered_only = yes
	
	# immediate = {
	# }
	
	# option = {
		# name = nep_guide.2001.a
		# add_monthly_resource_mult = {
			# resource = society_research
			# value = @tier1researchreward
			# min = @tier1researchmin
			# max = @tier1researchmax
		# }
		# hidden_effect = { 
			# country_event = { id = nep_guide.2002 days = 15 }
			# event_target:nep_guide_ship = { set_event_locked = no }
		# }
	# }
# }

# country_event = {
	# id = nep_guide.2002
	# title = "nep_guide.2002.name"
	# desc = "nep_guide.2002.desc"
	# picture = GFX_evt_alien_nature
	# location = event_target:nep_guide_ship
	
	# is_triggered_only = yes
	
	# immediate = {
	
	# }
	
	# option = {
		# name = nep_guide.2002.a
		# trigger = {
			# NOT = { 
				# OR = {
					# has_ethic = ethic_xenophobe
					# has_ethic = ethic_fanatic_xenophobe
				# }
			# }
		# }
		# hidden_effect = {
			# random_country = {
				# limit = {
					# capital_scope = { is_same_value = event_target:nep_guide_planet }
				# }
				# species = {
					# save_event_target_as = nep_guide_species
				# }
			# }
			# create_country = {
				# name = random
				# type = nep_global_for_protrait
				# auto_delete = no
			# }
			# last_created_country = {
				# save_global_event_target_as = nep_global_guide
				# create_leader = {
					# name = random
					# species = event_target:nep_guide_species
					# gender = female
					# skill = random
					# set_age = 14
				# }
				# last_created_leader = {
					# save_global_event_target_as = nep_guide_female
				# }
			# }
			# country_event = { id = nep_guide.2003 days = 10 }
		# }
	# }
	
	# option = {
		# name = nep_guide.2002.b
		# hidden_effect = { set_global_flag = nep_guide_end }
	# }
	
	# option = {
		# name = nep_guide.2002.c
		# trigger = {
			# OR = {
				# has_ethic = ethic_xenophobe
				# has_ethic = ethic_fanatic_xenophobe
				# has_ethic = ethic_authoritarian
				# has_ethic = ethic_fanatic_authoritarian
			# }
		# }
		# event_target:nep_guide_ship = {
			# kill_leader = { show_notification = no }
		# }
		# hidden_effect = { set_global_flag = nep_guide_end }
	# }
# }

# country_event = {
	# id = nep_guide.2003
	# title = UNKNOWN_LONG
	# desc = "nep_guide.2003.desc"
	
	# picture_event_data = {
		# portrait = event_target:nep_guide_female
		# room = ethic_spaceship_room
	# }
	
	# diplomatic = yes
	
	# is_triggered_only = yes
	
	# immediate = {
	
	# }
	
	# option = {
		# name = nep_guide.2003.a
		# hidden_effect = { country_event = { id = nep_guide.3 } }
	# }

	# option = {
		# name = nep_guide.2003.b
		# hidden_effect = { 
			# event_target:nep_global_guide = {
				# destroy_country = yes
			# }
			# set_global_flag = nep_guide_end
		# }
	# }
# }

# country_event = {
	# id = nep_guide.3
	# title = "nep_guide.3.name"
	# desc = "nep_guide.3.desc"
	
	# picture_event_data = {
		# portrait = event_target:nep_guide_female
		# room = ethic_spaceship_room
	# }
	
	# diplomatic = yes
	
	# is_triggered_only = yes
	
	# immediate = {
	
	# }
	
	# option = {
		# name = nep_guide.3.a
		# begin_event_chain = ( event_chain = nep_guide_chain target = root }
		# enable_special_project = {
			# name = nep_guide_training
			# owner = root
			# location = root.capital_scope
		# }
	# }
	
	# option = {
		# name = nep_guide.2003.b
		# hidden_effect = { 
			# event_target:nep_global_guide = {
				# destroy_country = yes
			# }
			# set_global_flag = nep_guide_end
		# }
	# }
# }

# country_event = {
	# id = nep_guide.3000
	# hide_window = yes
	
	# is_triggered_only = yes
	
	# immediate = {
		# if = {
			# limit = { from = { NOT = { is_same_value = event_target:nep_guide_ship } } }
			# enable_special_project = {
				# name = nep_guide_training
				# owner = root
				# location = root.capital_scope
			# }
			# country_event = { id = nep_guide.3001 }
		# }
		# else = {
			# country_event = { id = nep_guide.3002 }
			# country_event = { id = nep_guide.4000 days = 360 }
		# }
	# }
# }

# country_event = {
	# id = nep_guide.3001
	# title = "nep_guide.3001.name"
	# desc = "nep_guide.3001.desc"
	# picture = GFX_evt_space_walk
	# location = event_target:nep_guide_ship
	
	# is_triggered_only = yes
	
	# immediate = {
	
	# }
	
	# option = {
		# name = OK
	# }
# }

# country_event = {
	# id = nep_guide.3002
	# title = nep_guide.female.name
	# desc = "nep_guide.3002.desc"
	
	# picture_event_data = {
		# portrait = event_target:nep_guide_female
		# room = ethic_spaceship_room
	# }
	
	# diplomatic = yes
	
	# is_triggered_only = yes
	
	# immediate = {
	
	# }
	
	# option = {
		# name = OK
	# }
# }

# country_event = {
	# id = nep_guide.4000
	# title = nep_guide.female.name
	# desc = "nep_guide.4000.desc"
	
	# picture_event_data = {
		# portrait = event_target:nep_guide_female
		# room = ethic_spaceship_room
	# }
	
	# diplomatic = yes
	
	# is_triggered_only = yes
	
	# immediate = {
	
	# }
	
	# option = {
		# name = nep_guide.4000.a
	# }
	
	# after = {
		# country_event = { id = nep_guide.4 }
	# }
# }

# country_event = {
	# id = nep_guide.4001
	# title = nep_guide.female.name
	# desc = "nep_guide.4001.desc"
	
	# picture_event_data = {
		# portrait = event_target:nep_guide_female
		# room = ethic_spaceship_room
	# }
	
	# diplomatic = yes
	
	# is_triggered_only = yes
	
	# immediate = {
	
	# }
	
	# option = {
		# name = nep_guide.4001.a
	# }
	
	# after = {
		# event_target:nep_guide_ship = { set_event_locked = no }
		# country_event = { id = nep_guide.4 }
	# }
# }

# #Roll
# country_event = {
	# id = nep_guide.4
	# hide_window = yes
	# is_triggered_only = yes
	
	# immediate = {
		# random_list = {
			# 1 = {
				# #Gaia Planet
				# if = {
					# limit = { NOT = { has_country_flag = nep_guide_gaia } }
					# closest_system = {
						# limit = {
							# has_access_fleet = root
							# any_system_planet = {
								# is_planet_class = pc_gaia
							# }
						# }
						# save_event_target_as = nep_guide_temp_4
					# }
					# if = {
						# limit = { NOT = { exists = event_target:nep_guide_temp_4 } }
						# country_event = { id = nep_guide.4 }
					# }
					# else = {
						# set_country_flag = nep_guide_gaia
						# country_event = { id = nep_guide.4010 }
						# event_target:nep_guide_temp_4 = {
							# random_system_planet = {
								# limit = { is_planet_class = pc_gaia }
								# enable_special_project = {
									# name = nep_guide_gaia
									# owner = root
									# location = this
								# }
							# }
						# }
					# }
				# }
				# else = {
					# country_event = { id = nep_guide.4 }
				# }
			# }
			# 1 = {
				# #Nuked Planet
				# if = {
					# limit = { NOT = { has_country_flag = nep_guide_nuked } }
					# closest_system = {
						# limit = {
							# has_access_fleet = root
							# any_system_planet = {
								# is_planet_class = pc_nuked
							# }
						# }
						# save_event_target_as = nep_guide_temp_4
					# }
					# if = {
						# limit = { NOT = { exists = event_target:nep_guide_temp_4 } }
						# country_event = { id = nep_guide.4 }
					# }
					# else = {
						# set_country_flag = nep_guide_nuked 
						# country_event = { id = nep_guide.4020 }
						# event_target:nep_guide_temp_4 = {
							# random_system_planet = {
								# limit = { is_planet_class = pc_nuked }
								# enable_special_project = {
									# name = nep_guide_nuked
									# owner = root
									# location = this
								# }
							# }
						# }
					# }
				# }
				# else = {
					# country_event = { id = nep_guide.4 }
				# }
			# }
			# 1 = {
				# #Alien City
				# if = {
					# limit = { NOT = { has_country_flag = nep_guide_alien } }
					# closest_system = {
						# limit = {
							# has_access_fleet = root
							# any_system_planet = {
								# is_colony = yes
								# owner = { 
									# NOR = { 
										# is_same_species = root
										# is_same_species = event_target:nep_guide_female
									# }
									# is_primitive = yes
									# OR = {
										# has_country_flag = iron_age
										# has_country_flag = late_medieval_age
										# has_country_flag = renaissance_age
										# has_country_flag = steam_age
									# }
								# }
							# }
						# }
						# save_event_target_as = nep_guide_temp_4
					# }
					# if = {
						# limit = { NOT = { exists = event_target:nep_guide_temp_4 } }
						# country_event = { id = nep_guide.4 }
					# }
					# else = {
						# set_country_flag = nep_guide_alien 
						# country_event = { id = nep_guide.4030 }
						# event_target:nep_guide_temp_4 = {
							# random_system_planet = {
								# limit = {
									# is_colony = yes
									# owner = { 
										# NOT = { is_same_species = root } 
										# is_primitive = yes
										# OR = {
											# has_country_flag = iron_age
											# has_country_flag = late_medieval_age
											# has_country_flag = renaissance_age
											# has_country_flag = steam_age
										# }
									# }
								# }
								# enable_special_project = {
									# name = nep_guide_alien
									# owner = root
									# location = this
								# }
							# }
						# }
					# }
				# }
				# else = {
					# country_event = { id = nep_guide.4 }
				# }
			# }
			# 1 = {
				# #Relic City
				# if = {
					# limit = { NOT = { has_country_flag = nep_guide_relic } }
					# closest_system = {
						# limit = {
							# has_access_fleet = root
							# any_system_planet = {
								# is_planet_class = pc_relic
							# }
						# }
						# save_event_target_as = nep_guide_temp_4
					# }
					# if = {
						# limit = { NOT = { exists = event_target:nep_guide_temp_4 } }
						# country_event = { id = nep_guide.4 }
					# }
					# else = {
						# set_country_flag = nep_guide_relic 
						# country_event = { id = nep_guide.4040 }
						# event_target:nep_guide_temp_4 = {
							# random_system_planet = {
								# limit = { is_planet_class = pc_relic }
								# enable_special_project = {
									# name = nep_guide_relic
									# owner = root
									# location = this
								# }
							# }
						# }
					# }
				# }
				# else = {
					# country_event = { id = nep_guide.4 }
				# }
			# }
			# 1 = {
				# #Can Colonize + site
				# if = {
					# limit = { NOT = { has_country_flag = nep_guide_site } }
					# closest_system = {
						# limit = {
							# has_access_fleet = root
							# any_system_planet = {
								# habitability = { who = event_target:nep_guide_female.species value = 0.6 }
								# exists = archaeological_site
							# }
						# }
						# save_event_target_as = nep_guide_temp_4
					# }
					# if = {
						# limit = { NOT = { exists = event_target:nep_guide_temp_4 } }
						# country_event = { id = nep_guide.4 }
					# }
					# else = {
						# set_country_flag = nep_guide_site 
						# country_event = { id = nep_guide.4050 }
						# event_target:nep_guide_temp_4 = {
							# random_system_planet = {
								# limit = { 
									# habitability = { who = event_target:nep_guide_female.species value = 0.6 }
									# exists = archaeological_site
								# }
								# enable_special_project = {
									# name = nep_guide_site
									# owner = root
									# location = this
								# }
							# }
						# }
					# }
				# }
				# else = {
					# country_event = { id = nep_guide.4 }
				# }
			# }
			# 1 = {
				# #Habitat
				# if = {
					# limit = { NOT = { has_country_flag = nep_guide_habitat } }
					# closest_system = {
						# limit = {
							# has_access_fleet = root
							# any_system_planet = {
								# is_planet_class = pc_habitat
							# }
						# }
						# save_event_target_as = nep_guide_temp_4
					# }
					# if = {
						# limit = { NOT = { exists = event_target:nep_guide_temp_4 } }
						# country_event = { id = nep_guide.4 }
					# }
					# else = {
						# set_country_flag = nep_guide_habitat
						# country_event = { id = nep_guide.4060 }
						# event_target:nep_guide_temp_4 = {
							# random_system_planet = {
								# limit = { is_planet_class = pc_habitat }
								# enable_special_project = {
									# name = nep_guide_habitat
									# owner = root
									# location = this
								# }
							# }
						# }
					# }
				# }
				# else = {
					# country_event = { id = nep_guide.4 }
				# }
			# }
			# 1 = {
				# #Megastructure
				# if = {
					# limit = { NOT = { has_country_flag = nep_guide_mega } }
					# closest_system = {
						# limit = {
							# owner = { is_same_value = root }
							# has_any_megastructure = yes
							# OR = {
								# has_megastructure = spy_orb_4
								# has_megastructure = think_tank_4
								# has_megastructure = dyson_sphere_5
								# has_megastructure = dyson_sphere_restored
								# has_megastructure = spy_orb_restored
								# has_megastructure = think_tank_restored
								# has_megastructure = matter_decompressor_4
								# has_megastructure = matter_decompressor_restored
								# has_megastructure = strategic_coordination_center_3
								# has_megastructure = strategic_coordination_center_restored
								# has_megastructure = mega_art_installation_3
								# has_megastructure = mega_art_installation_restored
								# has_megastructure = interstellar_assembly_4
								# has_megastructure = interstellar_assembly_restored
							# }
						# }
						# save_event_target_as = nep_guide_temp_4
					# }
					# if = {
						# limit = { NOT = { exists = event_target:nep_guide_temp_4 } }
						# country_event = { id = nep_guide.4 }
					# }
					# else = {
						# set_country_flag = nep_guide_mega
						# country_event = { id = nep_guide.4070 }
						# event_target:nep_guide_temp_4 = {
							# random_megastructure = {
								# limit = { NOT = { is_megastructure_type = habitat_0 } }
								# enable_special_project = {
									# name = nep_guide_mega
									# owner = root
									# location = this
								# }
							# }
						# }
					# }
				# }
				# else = {
					# country_event = { id = nep_guide.4 }
				# }
			# }
			# # 1 = {
				# # #hazardous_weather
				# # if = {
					# # limit = { NOT = { has_country_flag = nep_guide_hazardous_weather } }
					# # closest_system = {
						# # limit = {
							# # has_access_fleet = root
							# # any_system_planet = {
								# # OR = {
									# # is_colony = yes
									# # is_colonizable = yes
								# # }
								# # has_modifier = hazardous_weather
							# # }
						# # }
						# # save_event_target_as = nep_guide_temp_4
					# # }
					# # if = {
						# # limit = { NOT = { exists = event_target:nep_guide_temp_4 } }
						# # country_event = { id = nep_guide.4 }
					# # }
					# # else = {
						# # set_country_flag = nep_guide_hazardous_weather
						# # country_event = { id = nep_guide.4080 }
						# # event_target:nep_guide_temp_4 = {
							# # random_system_planet = {
								# # limit = { 
									# # OR = {
										# # is_colony = yes
										# # is_colonizable = yes
									# # }
									# # has_modifier = hazardous_weather 
								# # }
								# # enable_special_project = {
									# # name = nep_guide_hazardous_weather
									# # owner = root
									# # location = this
								# # }
							# # }
						# # }
					# # }
				# # }
				# # else = {
					# # country_event = { id = nep_guide.4 }
				# # }
			# # }
			# 1 = {
				# #dangerous_wildlife
				# if = {
					# limit = { NOT = { has_country_flag = nep_guide_dangerous_wildlife } }
					# closest_system = {
						# limit = {
							# has_access_fleet = root
							# any_system_planet = {
								# OR = {
									# is_colony = yes
									# is_colonizable = yes
								# }
								# has_modifier = dangerous_wildlife
							# }
						# }
						# save_event_target_as = nep_guide_temp_4
					# }
					# if = {
						# limit = { NOT = { exists = event_target:nep_guide_temp_4 } }
						# country_event = { id = nep_guide.4 }
					# }
					# else = {
						# set_country_flag = nep_guide_dangerous_wildlife
						# country_event = { id = nep_guide.4090 }
						# event_target:nep_guide_temp_4 = {
							# random_system_planet = {
								# limit = { 
									# OR = {
										# is_colony = yes
										# is_colonizable = yes
									# }
									# has_modifier = dangerous_wildlife
								# }
								# enable_special_project = {
									# name = nep_guide_dangerous_wildlife
									# owner = root
									# location = this
								# }
							# }
						# }
					# }
				# }
				# else = {
					# country_event = { id = nep_guide.4 }
				# }
			# }
			# 1 = {
				# #low_gravity
				# if = {
					# limit = { NOT = { has_country_flag = nep_guide_low_gravity } }
					# closest_system = {
						# limit = {
							# has_access_fleet = root
							# any_system_planet = {
								# OR = {
									# is_colony = yes
									# is_colonizable = yes
								# }
								# has_modifier = low_gravity
							# }
						# }
						# save_event_target_as = nep_guide_temp_4
					# }
					# if = {
						# limit = { NOT = { exists = event_target:nep_guide_temp_4 } }
						# country_event = { id = nep_guide.4 }
					# }
					# else = {
						# set_country_flag = nep_guide_low_gravity
						# country_event = { id = nep_guide.4100 }
						# event_target:nep_guide_temp_4 = {
							# random_system_planet = {
								# limit = { 
									# OR = {
										# is_colony = yes
										# is_colonizable = yes
									# }
									# has_modifier = low_gravity
								# }
								# enable_special_project = {
									# name = nep_guide_low_gravity
									# owner = root
									# location = this
								# }
							# }
						# }
					# }
				# }
				# else = {
					# country_event = { id = nep_guide.4 }
				# }
			# }
			# 1 = {
				# #high_gravity
				# if = {
					# limit = { NOT = { has_country_flag = nep_guide_high_gravity } }
					# closest_system = {
						# limit = {
							# has_access_fleet = root
							# any_system_planet = {
								# OR = {
									# is_colony = yes
									# is_colonizable = yes
								# }
								# has_modifier = high_gravity
							# }
						# }
						# save_event_target_as = nep_guide_temp_4
					# }
					# if = {
						# limit = { NOT = { exists = event_target:nep_guide_temp_4 } }
						# country_event = { id = nep_guide.4 }
					# }
					# else = {
						# set_country_flag = nep_guide_high_gravity
						# country_event = { id = nep_guide.4110 }
						# event_target:nep_guide_temp_4 = {
							# random_system_planet = {
								# limit = { 
									# OR = {
										# is_colony = yes
										# is_colonizable = yes
									# }
									# has_modifier = high_gravity
								# }
								# enable_special_project = {
									# name = nep_guide_high_gravity
									# owner = root
									# location = this
								# }
							# }
						# }
					# }
				# }
				# else = {
					# country_event = { id = nep_guide.4 }
				# }
			# }
			# 1 = {
				# #tidal_locked
				# if = {
					# limit = { NOT = { has_country_flag = nep_guide_tidal_locked } }
					# closest_system = {
						# limit = {
							# has_access_fleet = root
							# any_system_planet = {
								# OR = {
									# is_colony = yes
									# is_colonizable = yes
								# }
								# has_modifier = tidal_locked
							# }
						# }
						# save_event_target_as = nep_guide_temp_4
					# }
					# if = {
						# limit = { NOT = { exists = event_target:nep_guide_temp_4 } }
						# country_event = { id = nep_guide.4 }
					# }
					# else = {
						# set_country_flag = nep_guide_tidal_locked
						# country_event = { id = nep_guide.4120 }
						# event_target:nep_guide_temp_4 = {
							# random_system_planet = {
								# limit = { 
									# OR = {
										# is_colony = yes
										# is_colonizable = yes
									# }
									# has_modifier = tidal_locked
								# }
								# enable_special_project = {
									# name = nep_guide_tidal_locked
									# owner = root
									# location = this
								# }
							# }
						# }
					# }
				# }
				# else = {
					# country_event = { id = nep_guide.4 }
				# }
			# }
			# 1 = {
				# #titanic_life
				# if = {
					# limit = { NOT = { has_country_flag = nep_guide_titanic_life } }
					# closest_system = {
						# limit = {
							# has_access_fleet = root
							# any_system_planet = {
								# OR = {
									# is_colony = yes
									# is_colonizable = yes
								# }
								# has_modifier = titanic_life
							# }
						# }
						# save_event_target_as = nep_guide_temp_4
					# }
					# if = {
						# limit = { NOT = { exists = event_target:nep_guide_temp_4 } }
						# country_event = { id = nep_guide.4 }
					# }
					# else = {
						# set_country_flag = nep_guide_titanic_life
						# country_event = { id = nep_guide.4130 }
						# event_target:nep_guide_temp_4 = {
							# random_system_planet = {
								# limit = { 
									# OR = {
										# is_colony = yes
										# is_colonizable = yes
									# }
									# has_modifier = titanic_life
								# }
								# enable_special_project = {
									# name = nep_guide_titanic_life
									# owner = root
									# location = this
								# }
							# }
						# }
					# }
				# }
				# else = {
					# country_event = { id = nep_guide.4 }
				# }
			# }
			# 1 = {
				# #natural_beauty
				# if = {
					# limit = { NOT = { has_country_flag = nep_guide_natural_beauty } }
					# closest_system = {
						# limit = {
							# has_access_fleet = root
							# any_system_planet = {
								# OR = {
									# is_colony = yes
									# is_colonizable = yes
								# }
								# has_modifier = natural_beauty
							# }
						# }
						# save_event_target_as = nep_guide_temp_4
					# }
					# if = {
						# limit = { NOT = { exists = event_target:nep_guide_temp_4 } }
						# country_event = { id = nep_guide.4 }
					# }
					# else = {
						# set_country_flag = nep_guide_natural_beauty
						# country_event = { id = nep_guide.4140 }
						# event_target:nep_guide_temp_4 = {
							# random_system_planet = {
								# limit = { 
									# OR = {
										# is_colony = yes
										# is_colonizable = yes
									# }
									# has_modifier = natural_beauty
								# }
								# enable_special_project = {
									# name = nep_guide_natural_beauty
									# owner = root
									# location = this
								# }
							# }
						# }
					# }
				# }
				# else = {
					# country_event = { id = nep_guide.4 }
				# }
			# }
			# 0.1 = {
				# #To prevent bug
				# add_event_chain_counter = {
					# event_chain = "nep_guide_chain"
					# counter = "nep_guide_dreams"
					# amount = 1
				# }
				# if = {
					# limit = {
						# has_completed_event_chain_counter = { 
							# event_chain = nep_guide_chain 
							# counter = nep_guide_dreams
						# }
					# }
					# country_event = { id = nep_guide.5 days = 15 }
				# }
			# }
		# }
	# }
# }

# country_event = {
	# id = nep_guide.4010
	# title = nep_guide.female.name
	# desc = "nep_guide.4010.desc"
	
	# picture_event_data = {
		# portrait = event_target:nep_guide_female
		# room = ethic_spaceship_room
	# }
	
	# diplomatic = yes
	
	# is_triggered_only = yes
	
	# immediate = {
	
	# }
	
	# option = {
		# name = nep_guide.4010.a
	# }
# }

# country_event = {
	# id = nep_guide.4011
	# title = "nep_guide.4011.name"
	# desc = "nep_guide.4011.desc"
	# picture = GFX_evt_gaia_planet
	# location = event_target:nep_guide_ship
	
	# is_triggered_only = yes
	
	# immediate = {
	
	# }
	
	# option = {
		# name = OK
		# enable_special_project = {
			# name = nep_guide_gaia
			# owner = root
			# location = from.orbit
		# }
	# }
# }

# country_event = {
	# id = nep_guide.4012
	# title = nep_guide.female.name
	# desc = "nep_guide.4012.desc"
	
	# picture_event_data = {
		# portrait = event_target:nep_guide_female
		# room = ethic_spaceship_room
	# }
	
	# diplomatic = yes
	
	# is_triggered_only = yes
	
	# immediate = {
		# event_target:nep_guide_ship = { set_event_locked = yes }
	# }
	
	# option = {
		# name = nep_guide.4012.a
		# add_event_chain_counter = {
			# event_chain = "nep_guide_chain"
			# counter = "nep_guide_dreams"
			# amount = 1
		# }
	# }
	
	# after = {
		# if = {
			# limit = {
				# has_completed_event_chain_counter = { 
					# event_chain = nep_guide_chain 
					# counter = nep_guide_dreams
				# }
			# }
			# country_event = { id = nep_guide.5 days = 15 }
		# }
		# else = { country_event = { id = nep_guide.4001 days = 15 } }
	# }
# }

# country_event = {
	# id = nep_guide.4020
	# title = nep_guide.female.name
	# desc = "nep_guide.4020.desc"
	
	# picture_event_data = {
		# portrait = event_target:nep_guide_female
		# room = ethic_spaceship_room
	# }
	
	# diplomatic = yes
	
	# is_triggered_only = yes
	
	# immediate = {
	
	# }
	
	# option = {
		# name = nep_guide.4020.a
	# }
# }

# country_event = {
	# id = nep_guide.4021
	# title = "nep_guide.4011.name"
	# desc = "nep_guide.4011.desc"
	# picture = GFX_evt_dead_city
	# location = event_target:nep_guide_ship
	
	# is_triggered_only = yes
	
	# immediate = {
	
	# }
	
	# option = {
		# name = OK
		# enable_special_project = {
			# name = nep_guide_nuked
			# owner = root
			# location = from.orbit
		# }
	# }
# }

# country_event = {
	# id = nep_guide.4022
	# title = nep_guide.female.name
	# desc = "nep_guide.4022.desc"
	
	# picture_event_data = {
		# portrait = event_target:nep_guide_female
		# room = ethic_spaceship_room
	# }
	
	# diplomatic = yes
	
	# is_triggered_only = yes
	
	# immediate = {	
		# event_target:nep_guide_ship = { set_event_locked = yes }
	# }
	
	# option = {
		# name = nep_guide.4022.a
		# add_event_chain_counter = {
			# event_chain = "nep_guide_chain"
			# counter = "nep_guide_dreams"
			# amount = 1
		# }
	# }
	
	# after = {
		# if = {
			# limit = {
				# has_completed_event_chain_counter = { 
					# event_chain = nep_guide_chain 
					# counter = nep_guide_dreams
				# }
			# }
			# country_event = { id = nep_guide.5 days = 5 }
		# }
		# else = { country_event = { id = nep_guide.4001 days = 5 } }
	# }
# }

# country_event = {
	# id = nep_guide.4030
	# title = nep_guide.female.name
	# desc = "nep_guide.4030.desc"
	
	# picture_event_data = {
		# portrait = event_target:nep_guide_female
		# room = ethic_spaceship_room
	# }
	
	# diplomatic = yes
	
	# is_triggered_only = yes
	
	# immediate = {
	
	# }
	
	# option = {
		# name = nep_guide.4030.a
	# }
# }

# country_event = {
	# id = nep_guide.4031
	# title = "nep_guide.4011.name"
	# desc = "nep_guide.4011.desc"
	# picture = GFX_evt_alien_city
	# location = event_target:nep_guide_ship
	
	# is_triggered_only = yes
	
	# immediate = {
	
	# }
	
	# option = {
		# name = OK
		# enable_special_project = {
			# name = nep_guide_alien
			# owner = root
			# location = from.orbit
		# }
	# }
# }

# country_event = {
	# id = nep_guide.4032
	# title = nep_guide.female.name
	# desc = "nep_guide.4032.desc"
	
	# picture_event_data = {
		# portrait = event_target:nep_guide_female
		# room = ethic_spaceship_room
	# }
	
	# diplomatic = yes
	
	# is_triggered_only = yes
	
	# immediate = {
		# event_target:nep_guide_ship = { set_event_locked = yes }
	# }
	
	# option = {
		# name = nep_guide.4032.a
		# add_event_chain_counter = {
			# event_chain = "nep_guide_chain"
			# counter = "nep_guide_dreams"
			# amount = 1
		# }
	# }
	
	# after = {
		# if = {
			# limit = {
				# has_completed_event_chain_counter = { 
					# event_chain = nep_guide_chain 
					# counter = nep_guide_dreams
				# }
			# }
			# country_event = { id = nep_guide.5 days = 17 }
		# }
		# else = { country_event = { id = nep_guide.4001 days = 17 } }
	# }
# }

# country_event = {
	# id = nep_guide.4040
	# title = nep_guide.female.name
	# desc = "nep_guide.4040.desc"
	
	# picture_event_data = {
		# portrait = event_target:nep_guide_female
		# room = ethic_spaceship_room
	# }
	
	# diplomatic = yes
	
	# is_triggered_only = yes
	
	# immediate = {
	
	# }
	
	# option = {
		# name = nep_guide.4040.a
	# }
# }

# country_event = {
	# id = nep_guide.4041
	# title = "nep_guide.4011.name"
	# desc = "nep_guide.4011.desc"
	# picture = GFX_evt_relic_city
	# location = event_target:nep_guide_ship
	
	# is_triggered_only = yes
	
	# immediate = {
	
	# }
	
	# option = {
		# name = OK
		# enable_special_project = {
			# name = nep_guide_relic
			# owner = root
			# location = from.orbit
		# }
	# }
# }

# country_event = {
	# id = nep_guide.4042
	# title = nep_guide.female.name
	# desc = "nep_guide.4042.desc"
	
	# picture_event_data = {
		# portrait = event_target:nep_guide_female
		# room = ethic_spaceship_room
	# }
	
	# diplomatic = yes
	
	# is_triggered_only = yes
	
	# immediate = {
	
	# }
	
	# option = {
		# name = nep_guide.4042.a
		# add_event_chain_counter = {
			# event_chain = "nep_guide_chain"
			# counter = "nep_guide_dreams"
			# amount = 1
		# }
	# }
	
	# after = {
		# if = {
			# limit = {
				# has_completed_event_chain_counter = { 
					# event_chain = nep_guide_chain 
					# counter = nep_guide_dreams
				# }
			# }
			# country_event = { id = nep_guide.5 days = 15 }
		# }
		# else = { country_event = { id = nep_guide.4001 days = 15 } }
	# }
# }

# country_event = {
	# id = nep_guide.4050
	# title = nep_guide.female.name
	# desc = "nep_guide.4050.desc"
	
	# picture_event_data = {
		# portrait = event_target:nep_guide_female
		# room = ethic_spaceship_room
	# }
	
	# diplomatic = yes
	
	# is_triggered_only = yes
	
	# immediate = {
	
	# }
	
	# option = {
		# name = nep_guide.4050.a
	# }
# }

# country_event = {
	# id = nep_guide.4051
	# title = "nep_guide.4011.name"
	# desc = "nep_guide.4011.desc"
	# picture = GFX_evt_archaeological_dig
	# location = event_target:nep_guide_ship
	
	# is_triggered_only = yes
	
	# immediate = {
	
	# }
	
	# option = {
		# name = OK
		# enable_special_project = {
			# name = nep_guide_site
			# owner = root
			# location = from.orbit
		# }
	# }
# }

# country_event = {
	# id = nep_guide.4052
	# title = nep_guide.female.name
	# desc = "nep_guide.4052.desc"
	
	# picture_event_data = {
		# portrait = event_target:nep_guide_female
		# room = ethic_spaceship_room
	# }
	
	# diplomatic = yes
	
	# is_triggered_only = yes
	
	# immediate = {
	
	# }
	
	# option = {
		# name = nep_guide.4052.a
		# add_event_chain_counter = {
			# event_chain = "nep_guide_chain"
			# counter = "nep_guide_dreams"
			# amount = 1
		# }
	# }
	
	# after = {
		# if = {
			# limit = {
				# has_completed_event_chain_counter = { 
					# event_chain = nep_guide_chain 
					# counter = nep_guide_dreams
				# }
			# }
			# country_event = { id = nep_guide.5 days = 10 }
		# }
		# else = { country_event = { id = nep_guide.4001 days = 10 } }
	# }
# }

# country_event = {
	# id = nep_guide.4060
	# title = nep_guide.female.name
	# desc = "nep_guide.4060.desc"
	
	# picture_event_data = {
		# portrait = event_target:nep_guide_female
		# room = ethic_spaceship_room
	# }
	
	# diplomatic = yes
	
	# is_triggered_only = yes
	
	# immediate = {
	
	# }
	
	# option = {
		# name = nep_guide.4060.a
	# }
# }

# country_event = {
	# id = nep_guide.4061
	# title = "nep_guide.4061.name"
	# desc = "nep_guide.4061.desc"
	# picture = GFX_evt_nep_habitat
	# location = event_target:nep_guide_ship
	
	# is_triggered_only = yes
	
	# immediate = {
	
	# }
	
	# option = {
		# name = OK
		# enable_special_project = {
			# name = nep_guide_habitat
			# owner = root
			# location = from.orbit
		# }
	# }
# }

# country_event = {
	# id = nep_guide.4062
	# title = nep_guide.female.name
	# desc = "nep_guide.4062.desc"
	
	# picture_event_data = {
		# portrait = event_target:nep_guide_female
		# room = ethic_spaceship_room
	# }
	
	# diplomatic = yes
	
	# is_triggered_only = yes
	
	# immediate = {
	
	# }
	
	# option = {
		# name = nep_guide.4062.a
		# add_event_chain_counter = {
			# event_chain = "nep_guide_chain"
			# counter = "nep_guide_dreams"
			# amount = 1
		# }
	# }
	
	# after = {
		# if = {
			# limit = {
				# has_completed_event_chain_counter = { 
					# event_chain = nep_guide_chain 
					# counter = nep_guide_dreams
				# }
			# }
			# country_event = { id = nep_guide.5 days = 5 }
		# }
		# else = { country_event = { id = nep_guide.4 days = 5 } }
	# }
# }

# country_event = {
	# id = nep_guide.4070
	# title = nep_guide.female.name
	# desc = "nep_guide.4070.desc"
	
	# picture_event_data = {
		# portrait = event_target:nep_guide_female
		# room = ethic_spaceship_room
	# }
	
	# diplomatic = yes
	
	# is_triggered_only = yes
	
	# immediate = {
	
	# }
	
	# option = {
		# name = nep_guide.4070.a
	# }
# }

# country_event = {
	# id = nep_guide.4071
	# title = "nep_guide.4071.name"
	# desc = "nep_guide.4071.desc"
	# picture = GFX_evt_nep_megastructure
	# location = event_target:nep_guide_ship
	
	# is_triggered_only = yes
	
	# immediate = {
	
	# }
	
	# option = {
		# name = OK
		# enable_special_project = {
			# name = nep_guide_mega
			# owner = root
			# location = from.orbit
		# }
	# }
# }

# country_event = {
	# id = nep_guide.4072
	# title = nep_guide.female.name
	# desc = "nep_guide.4072.desc"
	
	# picture_event_data = {
		# portrait = event_target:nep_guide_female
		# room = ethic_spaceship_room
	# }
	
	# diplomatic = yes
	
	# is_triggered_only = yes
	
	# immediate = {
	
	# }
	
	# option = {
		# name = nep_guide.4072.a
		# add_event_chain_counter = {
			# event_chain = "nep_guide_chain"
			# counter = "nep_guide_dreams"
			# amount = 1
		# }
	# }
	
	# after = {
		# if = {
			# limit = {
				# has_completed_event_chain_counter = { 
					# event_chain = nep_guide_chain 
					# counter = nep_guide_dreams
				# }
			# }
			# country_event = { id = nep_guide.5 days = 5 }
		# }
		# else = { country_event = { id = nep_guide.4 days = 5 } }
	# }
# }

# country_event = {
	# id = nep_guide.4080
	# title = nep_guide.female.name
	# desc = "nep_guide.4080.desc"
	
	# picture_event_data = {
		# portrait = event_target:nep_guide_female
		# room = ethic_spaceship_room
	# }
	
	# diplomatic = yes
	
	# is_triggered_only = yes
	
	# immediate = {
	
	# }
	
	# option = {
		# name = nep_guide.4080.a
	# }
# }

# country_event = {
	# id = nep_guide.4081
	# title = "nep_guide.4081.name"
	# desc = "nep_guide.4081.desc"
	# picture = GFX_evt_arid_planet
	# location = event_target:nep_guide_ship
	
	# is_triggered_only = yes
	
	# immediate = {
	
	# }
	
	# option = {
		# name = OK
		# enable_special_project = {
			# name = nep_guide_hazardous_weather
			# owner = root
			# location = from.orbit
		# }
	# }
# }

# country_event = {
	# id = nep_guide.4082
	# title = nep_guide.female.name
	# desc = "nep_guide.4082.desc"
	
	# picture_event_data = {
		# portrait = event_target:nep_guide_female
		# room = ethic_spaceship_room
	# }
	
	# diplomatic = yes
	
	# is_triggered_only = yes
	
	# immediate = {
	
	# }
	
	# option = {
		# name = nep_guide.4082.a
		# add_event_chain_counter = {
			# event_chain = "nep_guide_chain"
			# counter = "nep_guide_dreams"
			# amount = 1
		# }
	# }
	
	# after = {
		# if = {
			# limit = {
				# has_completed_event_chain_counter = { 
					# event_chain = nep_guide_chain 
					# counter = nep_guide_dreams
				# }
			# }
			# country_event = { id = nep_guide.5 days = 5 }
		# }
		# else = { country_event = { id = nep_guide.4 days = 5 } }
	# }
# }

# country_event = {
	# id = nep_guide.4090
	# title = nep_guide.female.name
	# desc = "nep_guide.4090.desc"
	
	# picture_event_data = {
		# portrait = event_target:nep_guide_female
		# room = ethic_spaceship_room
	# }
	
	# diplomatic = yes
	
	# is_triggered_only = yes
	
	# immediate = {
	
	# }
	
	# option = {
		# name = nep_guide.4090.a
	# }
# }

# country_event = {
	# id = nep_guide.4091
	# title = "nep_guide.4091.name"
	# desc = "nep_guide.4091.desc"
	# picture = GFX_evt_alien_wildlife
	# location = event_target:nep_guide_ship
	
	# is_triggered_only = yes
	
	# immediate = {
	
	# }
	
	# option = {
		# name = OK
		# enable_special_project = {
			# name = nep_guide_dangerous_wildlife
			# owner = root
			# location = from.orbit
		# }
	# }
# }

# country_event = {
	# id = nep_guide.4092
	# title = nep_guide.female.name
	# desc = "nep_guide.4092.desc"
	
	# picture_event_data = {
		# portrait = event_target:nep_guide_female
		# room = ethic_spaceship_room
	# }
	
	# diplomatic = yes
	
	# is_triggered_only = yes
	
	# immediate = {
	
	# }
	
	# option = {
		# name = nep_guide.4092.a
		# add_event_chain_counter = {
			# event_chain = "nep_guide_chain"
			# counter = "nep_guide_dreams"
			# amount = 1
		# }
	# }
	
	# after = {
		# if = {
			# limit = {
				# has_completed_event_chain_counter = { 
					# event_chain = nep_guide_chain 
					# counter = nep_guide_dreams
				# }
			# }
			# country_event = { id = nep_guide.5 days = 5 }
		# }
		# else = { country_event = { id = nep_guide.4 days = 5 } }
	# }
# }

# country_event = {
	# id = nep_guide.4100
	# title = nep_guide.female.name
	# desc = "nep_guide.4100.desc"
	
	# picture_event_data = {
		# portrait = event_target:nep_guide_female
		# room = ethic_spaceship_room
	# }
	
	# diplomatic = yes
	
	# is_triggered_only = yes
	
	# immediate = {
	
	# }
	
	# option = {
		# name = nep_guide.4100.a
	# }
# }

# country_event = {
	# id = nep_guide.4101
	# title = "nep_guide.4101.name"
	# desc = "nep_guide.4101.desc"
	# picture = GFX_evt_dark_alley
	# location = event_target:nep_guide_ship
	
	# is_triggered_only = yes
	
	# immediate = {
	
	# }
	
	# option = {
		# name = OK
		# enable_special_project = {
			# name = nep_guide_low_gravity
			# owner = root
			# location = from.orbit
		# }
	# }
# }

# country_event = {
	# id = nep_guide.4102
	# title = nep_guide.female.name
	# desc = "nep_guide.4102.desc"
	
	# picture_event_data = {
		# portrait = event_target:nep_guide_female
		# room = ethic_spaceship_room
	# }
	
	# diplomatic = yes
	
	# is_triggered_only = yes
	
	# immediate = {
	
	# }
	
	# option = {
		# name = nep_guide.4102.a
		# add_event_chain_counter = {
			# event_chain = "nep_guide_chain"
			# counter = "nep_guide_dreams"
			# amount = 1
		# }
	# }
	
	# after = {
		# if = {
			# limit = {
				# has_completed_event_chain_counter = { 
					# event_chain = nep_guide_chain 
					# counter = nep_guide_dreams
				# }
			# }
			# country_event = { id = nep_guide.5 days = 5 }
		# }
		# else = { country_event = { id = nep_guide.4 days = 5 } }
	# }
# }

# country_event = {
	# id = nep_guide.4110
	# title = nep_guide.female.name
	# desc = "nep_guide.4110.desc"
	
	# picture_event_data = {
		# portrait = event_target:nep_guide_female
		# room = ethic_spaceship_room
	# }
	
	# diplomatic = yes
	
	# is_triggered_only = yes
	
	# immediate = {
	
	# }
	
	# option = {
		# name = nep_guide.4110.a
	# }
# }

# country_event = {
	# id = nep_guide.4111
	# title = "nep_guide.4111.name"
	# desc = "nep_guide.4111.desc"
	# picture = GFX_evt_towel
	# location = event_target:nep_guide_ship
	
	# is_triggered_only = yes
	
	# immediate = {
	
	# }
	
	# option = {
		# name = OK
		# enable_special_project = {
			# name = nep_guide_high_gravity
			# owner = root
			# location = from.orbit
		# }
	# }
# }

# country_event = {
	# id = nep_guide.4112
	# title = nep_guide.female.name
	# desc = "nep_guide.4112.desc"
	
	# picture_event_data = {
		# portrait = event_target:nep_guide_female
		# room = ethic_spaceship_room
	# }
	
	# diplomatic = yes
	
	# is_triggered_only = yes
	
	# immediate = {
	
	# }
	
	# option = {
		# name = nep_guide.4112.a
		# add_event_chain_counter = {
			# event_chain = "nep_guide_chain"
			# counter = "nep_guide_dreams"
			# amount = 1
		# }
	# }
	
	# after = {
		# if = {
			# limit = {
				# has_completed_event_chain_counter = { 
					# event_chain = nep_guide_chain 
					# counter = nep_guide_dreams
				# }
			# }
			# country_event = { id = nep_guide.5 days = 5 }
		# }
		# else = { country_event = { id = nep_guide.4 days = 5 } }
	# }
# }

# country_event = {
	# id = nep_guide.4120
	# title = nep_guide.female.name
	# desc = "nep_guide.4120.desc"
	
	# picture_event_data = {
		# portrait = event_target:nep_guide_female
		# room = ethic_spaceship_room
	# }
	
	# diplomatic = yes
	
	# is_triggered_only = yes
	
	# immediate = {
	
	# }
	
	# option = {
		# name = nep_guide.4120.a
	# }
# }

# country_event = {
	# id = nep_guide.4121
	# title = "nep_guide.4121.name"
	# desc = "nep_guide.4121.desc"
	# picture = GFX_evt_ocean_planet
	# location = event_target:nep_guide_ship
	
	# is_triggered_only = yes
	
	# immediate = {
	
	# }
	
	# option = {
		# name = OK
		# enable_special_project = {
			# name = nep_guide_tidal_locked
			# owner = root
			# location = from.orbit
		# }
	# }
# }

# country_event = {
	# id = nep_guide.4122
	# title = nep_guide.female.name
	# desc = "nep_guide.4122.desc"
	
	# picture_event_data = {
		# portrait = event_target:nep_guide_female
		# room = ethic_spaceship_room
	# }
	
	# diplomatic = yes
	
	# is_triggered_only = yes
	
	# immediate = {
	
	# }
	
	# option = {
		# name = nep_guide.4122.a
		# add_event_chain_counter = {
			# event_chain = "nep_guide_chain"
			# counter = "nep_guide_dreams"
			# amount = 1
		# }
	# }
	
	# after = {
		# if = {
			# limit = {
				# has_completed_event_chain_counter = { 
					# event_chain = nep_guide_chain 
					# counter = nep_guide_dreams
				# }
			# }
			# country_event = { id = nep_guide.5 days = 5 }
		# }
		# else = { country_event = { id = nep_guide.4 days = 5 } }
	# }
# }

# country_event = {
	# id = nep_guide.4130
	# title = nep_guide.female.name
	# desc = "nep_guide.4130.desc"
	
	# picture_event_data = {
		# portrait = event_target:nep_guide_female
		# room = ethic_spaceship_room
	# }
	
	# diplomatic = yes
	
	# is_triggered_only = yes
	
	# immediate = {
	
	# }
	
	# option = {
		# name = nep_guide.4130.a
	# }
# }

# country_event = {
	# id = nep_guide.4131
	# title = "nep_guide.4131.name"
	# desc = "nep_guide.4131.desc"
	# picture = GFX_evt_alien_nature
	# location = event_target:nep_guide_ship
	
	# is_triggered_only = yes
	
	# immediate = {
	
	# }
	
	# option = {
		# name = OK
		# enable_special_project = {
			# name = nep_guide_titanic_life
			# owner = root
			# location = from.orbit
		# }
	# }
# }

# country_event = {
	# id = nep_guide.4132
	# title = nep_guide.female.name
	# desc = "nep_guide.4132.desc"
	
	# picture_event_data = {
		# portrait = event_target:nep_guide_female
		# room = ethic_spaceship_room
	# }
	
	# diplomatic = yes
	
	# is_triggered_only = yes
	
	# immediate = {
	
	# }
	
	# option = {
		# name = nep_guide.4132.a
		# add_event_chain_counter = {
			# event_chain = "nep_guide_chain"
			# counter = "nep_guide_dreams"
			# amount = 1
		# }
	# }
	
	# after = {
		# if = {
			# limit = {
				# has_completed_event_chain_counter = { 
					# event_chain = nep_guide_chain 
					# counter = nep_guide_dreams
				# }
			# }
			# country_event = { id = nep_guide.5 days = 5 }
		# }
		# else = { country_event = { id = nep_guide.4 days = 5 } }
	# }
# }

# country_event = {
	# id = nep_guide.4140
	# title = nep_guide.female.name
	# desc = "nep_guide.4140.desc"
	
	# picture_event_data = {
		# portrait = event_target:nep_guide_female
		# room = ethic_spaceship_room
	# }
	
	# diplomatic = yes
	
	# is_triggered_only = yes
	
	# immediate = {
	
	# }
	
	# option = {
		# name = nep_guide.4140.a
	# }
# }

# country_event = {
	# id = nep_guide.4141
	# title = "nep_guide.4141.name"
	# desc = "nep_guide.4141.desc"
	# picture = GFX_evt_alien_nature
	# location = event_target:nep_guide_ship
	
	# is_triggered_only = yes
	
	# immediate = {
	
	# }
	
	# option = {
		# name = OK
		# enable_special_project = {
			# name = nep_guide_natural_beauty
			# owner = root
			# location = from.orbit
		# }
	# }
# }

# country_event = {
	# id = nep_guide.4142
	# title = nep_guide.female.name
	# desc = "nep_guide.4142.desc"
	
	# picture_event_data = {
		# portrait = event_target:nep_guide_female
		# room = ethic_spaceship_room
	# }
	
	# diplomatic = yes
	
	# is_triggered_only = yes
	
	# immediate = {
	
	# }
	
	# option = {
		# name = nep_guide.4142.a
		# add_event_chain_counter = {
			# event_chain = "nep_guide_chain"
			# counter = "nep_guide_dreams"
			# amount = 1
		# }
	# }
	
	# after = {
		# if = {
			# limit = {
				# has_completed_event_chain_counter = { 
					# event_chain = nep_guide_chain 
					# counter = nep_guide_dreams
				# }
			# }
			# country_event = { id = nep_guide.5 days = 5 }
		# }
		# else = { country_event = { id = nep_guide.4 days = 5 } }
	# }
# }

# ship_event = {
	# id = nep_guide.4998
	# hide_window = yes
	
	# is_triggered_only = yes
	
	# trigger = {
		# NOT = { has_global_flag = nep_guide_end }
		# has_global_flag = nep_guide_begin
		# is_same_value = event_target:nep_guide_ship
		# from = {
			# any_ship_in_system = {
				# is_in_combat = yes
			# }
		# }
	# }
	
	# immediate = {
		# owner = { country_event = { id = nep_guide.4999 } }
	# }
# }

# country_event = {
	# id = nep_guide.4999
	# title = nep_guide.female.name
	# desc = "nep_guide.4999.desc"
	
	# picture_event_data = {
		# portrait = event_target:nep_guide_female
		# room = ethic_spaceship_room
	# }
	
	# diplomatic = yes
	
	# is_triggered_only = yes
	
	# immediate = {
	
	# }
	
	# option = {
		# name = nep_guide.4999.a
		# add_event_chain_counter = {
			# event_chain = "nep_guide_chain"
			# counter = "nep_guide_dreams"
			# amount = 1
		# }
	# }
	
	# after = {
		# if = {
			# limit = {
				# has_completed_event_chain_counter = { 
					# event_chain = nep_guide_chain 
					# counter = nep_guide_dreams
				# }
			# }
			# country_event = { id = nep_guide.5 days = 15 }
		# }
	# }
# }

# country_event = {
	# id = nep_guide.5
	# title = nep_guide.female.name
	# desc = "nep_guide.5.desc"
	
	# picture_event_data = {
		# portrait = event_target:nep_guide_female
		# room = ethic_spaceship_room
	# }
	
	# diplomatic = yes
	
	# immediate = {
	
	# }
	
	# option = {
		# name = nep_guide.5.a
	# }
	
	# after = {
		# country_event = { id = nep_guide.6 days = 150 random = 500 }
	# }
# }

#############################################
# UGO
#############################################

namespace = nep_ugo
ship_event = {
	id = nep_ugo.1
	hide_window = yes
	
	is_triggered_only = yes
	
	fire_only_once = yes
	
	immediate = {
		set_global_flag = nep_ugo_spawn
		set_spawn_system_batch = begin
		no_scope = {
			spawn_system = {
				min_distance >= 492
				max_distance <= 498
				min_orientation_angle = -172
				max_orientation_angle = -166
				hyperlane = no
				initializer = nep_ugo_init
			}
		}
		set_spawn_system_batch = end
		# solar_system = {
			# if = {
				# limit = { has_natural_wormhole = no }
				# spawn_natural_wormhole = {
					# bypass_type = wormhole
					# random_pos = yes
				# }
				# random_system_planet = { limit = { is_star = yes } save_global_event_target_as = nep_ugo1_temp }
			# }
			# else = {
				# closest_system = {
					# min_steps = 1
					# limit = { 
						# has_natural_wormhole = no 
						# is_fe_cluster = no
						# NOT = { has_star_flag = sealed_system }
						# NOT = { has_star_flag = hostile_system }
						# NOT = { has_star_flag = guardian }
					# }
					# spawn_natural_wormhole = {
						# bypass_type = wormhole
						# random_pos = yes
					# }
					# save_global_event_target_as = nep_ugo_system_alternative
					# random_system_planet = { limit = { is_star = yes } save_global_event_target_as = nep_ugo1_temp }
				# }
				# set_global_flag = nep_ugo_system_alternative
			# }
		# }
		# random_system = {
			# limit = {
				# has_star_flag = nep_ugo_system
			# }
			# spawn_natural_wormhole = {
				# bypass_type = wormhole
				# random_pos = yes
			# }
			# if = { 
				# limit = { has_global_flag = nep_ugo_system_alternative }
				# link_wormholes = event_target:nep_ugo_system_alternative
			# }
			# else = {
				# link_wormholes = root.solar_system
			# }
		# }
		solar_system = {
			spawn_megastructure = {
				type = "nep_wormhole_ugo_mega"
				random_pos = yes
				orbit_angle = 360		# range of the randomization
			}
			random_system_planet = { limit = { is_star = yes } save_global_event_target_as = nep_ugo1_temp }
		}
		random_system = {
			limit = {
				has_star_flag = nep_ugo_system
			}
			spawn_megastructure = {
				type = "nep_wormhole_ugo_mega"
				random_pos = yes
				orbit_angle = 360		# range of the randomization
			}
			#save_global_event_target_as = nep_ugo_system
		}
		random_galaxy_planet = {
			limit = { has_planet_flag = nep_ugo_US388 }			
			save_global_event_target_as = nep_ugo_US388
		}
		owner = { country_event = { id = nep_ugo.1000 } }
	}
}

country_event = {
	id = nep_ugo.1000
	title = "nep_ugo.1000.name"
	desc = {
		trigger = { has_country_flag = encountered_first_wormhole }
		text = "nep_ugo.1000.desc"
	}
	desc = {
		trigger = { NOT = { has_country_flag = encountered_first_wormhole } }
		text = "nep_ugo.1000.desc.c"
	}
	#desc = {
	#	trigger = { has_global_flag = nep_ugo_system_alternative } 
	#	text = "nep_ugo.1000.desc.b"
	#}
	picture = GFX_evt_wormhole
	show_sound = event_ship_bridge
	location = FROM
	
	is_triggered_only = yes
	
	immediate = {
	
	}
	
	option = {
		name = OK
	}
	
	after = {		
		#remove_global_flag = nep_ugo_system_alternative
		#clear_global_event_target = nep_ugo_system_alternative
		if = {
			limit  = { NOT = { has_country_flag = encountered_first_wormhole } }
			country_event = { id = nep_surveyed.2 }
		}
	}
}

#on_planet_surveyed
planet_event = {
	id = nep_ugo.1001
	hide_window = yes
	
	is_triggered_only = yes
	
	trigger = {
		has_planet_flag = nep_ugo_US388
		from = { is_country_type = default }
		NOT = { has_global_flag = nep_ugo_surveyed }
	}
	
	immediate = { 
		from = {
			if = {
				limit = { is_ai = no }
				set_country_flag = nep_ugo_target
				country_event = { id = nep_ugo.1002 }
			}
		}
	}
}


country_event = {
	id = nep_ugo.1002
	title = "nep_ugo.1002.name"
	desc = "nep_ugo.1002.desc"
	picture = GFX_evt_wormhole
	location = From.fromfrom
	show_sound = event_alien_nature
	
	is_triggered_only = yes
	
	immediate = {
	}
	
	option = {
		name = nep_ugo.1002.a		
		enable_special_project = {
			name = "nep_ugo_project_0"
			location = event_target:nep_ugo_US388
			owner = root
		}
	}
}

ship_event = {
	id = nep_ugo.1003
	hide_window = yes
	is_triggered_only = yes
	fire_only_once = yes
	
	immediate = {
		event_target:nep_ugo_US388 = {
			remove_modifier = nep_ugo_dangerous_creature
			set_global_flag = nep_ugo_dangerous_creature_removed
		}
		fleet = {
			random_owned_ship = {
				destroy_ship = this
			}
			random_owned_ship = {
				destroy_ship = this
			}
			random_owned_ship = {
				destroy_ship = this
			}
			random_owned_ship = {
				destroy_ship = this
			}
			random_owned_ship = {
				destroy_ship = this
			}
		}
		owner = { country_event = { id = nep_ugo.1004 } }
	}
}

country_event = {
	id = nep_ugo.1004
	title = "nep_ugo.1004.name"
	desc = "nep_ugo.1004.desc"
	picture = GFX_evt_treasure_pile
	location = From	
	show_sound = event_alien_nature
	
	is_triggered_only = yes
	
	option = {
		name = OK
	}	
}

country_event = {
	id = nep_ugo.2000
	hide_window = yes
	
	fire_only_once = yes
	
	mean_time_to_happen = { days = 3600 }
	
	trigger = {
		has_global_flag = nep_ugo_dangerous_creature_removed
		any_country = {
			has_country_flag = nep_ugo_target
		}
		is_same_value = event_target:global_event_country
		mid_game_years_passed >= 16
	}
	
	immediate = {
		country_event = { id = nep_ugo.2001 }
	}
}


country_event = {
	id = nep_ugo.2001
	hide_window = yes

	is_triggered_only = yes
	
	immediate = {
		random_list = {
			10 = { country_event = { id = nep_ugo.2 days = 5 random = 355 } }
			23 = { country_event = { id = nep_ugo.2001 days = 5 random = 3600 } }
		}
	}
}

country_event = {
	id = nep_ugo.2
	hide_window = yes
	
	fire_only_once = yes
	
	is_triggered_only = yes
	
	immediate = {
		random_galaxy_planet = {
			limit = { has_planet_flag = nep_ugo_US388 }	
			create_country = {
				name = "NAME_nep_Ghost_Science_Ship"
				type = nep_ugo_first_ship
				effect = {
					save_event_target_as = nep_ugo_first_ship
				}
			}
			create_fleet = {
				name = "NAME_nep_Ghost_Science_Ship"
				effect = {
					set_owner = event_target:nep_ugo_first_ship
					create_ship_design = {
						design = "NAME_Prototype"
					}
					create_ship = {
						name = "NAME_nep_Ghost_Science_Ship"
						design = last_created_design
						graphical_culture = "extra_dimensional_01"
						prefix = no
						upgradable = no
					}
					set_location = event_target:nep_ugo_abandoned_observation
					save_global_event_target_as = nep_ugo_fleet
				}
			}
		}
		event_target:nep_ugo_fleet = {
			auto_move_to_planet = { target = event_target:nep_ugo_US388 clear_auto_move_on_arrival = yes }
		}
	}
}

#on_fleet_auto_move_arrival
country_event = {
	id = nep_ugo.2002
	hide_window = yes
			
	fire_only_once = yes
	
	is_triggered_only = yes
	
	trigger = {
		exists = event_target:nep_ugo_fleet
		from = { is_same_value = event_target:nep_ugo_fleet }
		fromfrom = { is_same_value = event_target:nep_ugo_US388 }
	}
	
	immediate = {
		if = {
			limit = {
				fromfrom = {
					is_colony = yes
					is_under_colonization = no
					exists = owner
					owner = {
						is_ai = no
						has_country_flag = nep_ugo_target
					}
					num_pops > 4
				}
			}
			fromfrom.owner = { country_event = { id = nep_ugo.3000 days = 5 } }
			destroy_fleet = from
		}
		else_if = {
			limit = {
				fromfrom = {
					exists = owner
				}
			}
			fromfrom.owner = { country_event = { id = nep_ugo.2003 days = 50 } }
		}
		else = {
			country_event = { id = nep_ugo.2004 days = 50 }
		}
	}
}

country_event = {
	id = nep_ugo.2003
	title = "nep_ugo.2003.name"
	desc = {
		trigger = { event_target:nep_ugo_US388 = { is_under_colonization = yes } }
		text = "nep_ugo.2003.desc.a"
	}
	desc = {
		trigger = { event_target:nep_ugo_US388 = { is_under_colonization = no } }
		text = "nep_ugo.2003.desc.b"
	}
	picture = GFX_evt_toxic
	location = event_target:nep_ugo_US388
	show_sound = event_ghost_town
	is_triggered_only = yes
	
	trigger = {
		exists = event_target:nep_ugo_fleet
	}
	
	immediate = {
		event_target:nep_ugo_US388 = { 
			destroy_colony = yes
			change_pc = pc_toxic
			add_modifier = { modifier = nep_ugo_hell }
		}
		event_target:nep_ugo_fleet = {
			auto_move_to_planet = { target = event_target:nep_ugo1_temp clear_auto_move_on_arrival = yes }
		}
	}
	
	option = {
		name = "nep_ugo.2003.a"
	}
}

country_event = {
	id = nep_ugo.2004
	hide_window = yes
	
	is_triggered_only = yes
	
	trigger = {
		exists = event_target:nep_ugo_fleet
	}
	
	immediate = {
		event_target:nep_ugo_US388 = {
			change_pc = pc_toxic
			add_modifier = { modifier = nep_ugo_hell }
		}
		event_target:nep_ugo_fleet = {
			auto_move_to_planet = { target = event_target:nep_ugo1_temp clear_auto_move_on_arrival = yes }
		}
	}
}

#on_fleet_auto_move_arrival

country_event = {
	id = nep_ugo.2005
	hide_window = yes
			
	is_triggered_only = yes
	
	trigger = {
		exists = event_target:nep_ugo_fleet
		from = { is_same_value = event_target:nep_ugo_fleet }
		fromfrom = { is_same_value = event_target:nep_ugo1_temp }
	}
	
	immediate = {
		random_galaxy_planet = {
			limit = {
				exists = owner
				owner = { has_country_flag = nep_ugo_target }
				is_colony = yes
				is_capital = no
				num_pops > 4
			}
			event_target:nep_ugo_fleet = {
				auto_move_to_planet = { target = prev clear_auto_move_on_arrival = yes }
			}
		}
	}
}
	
#on_crossing_border

fleet_event = {
	id = nep_ugo.2006
	hide_window = yes
	
	is_triggered_only = yes
	
	trigger = {
		exists = event_target:nep_ugo_fleet
		is_same_value = event_target:nep_ugo_fleet
		exists = fromfrom
		fromfrom = {
			exists = space_owner
			space_owner = { 
				is_country_type = default 
				NOT = { has_country_flag = nep_ugo_2006_temp }
			}
		}
		from = {
			OR = {
				NOT = { exists = space_owner }
				AND = {
					exists = space_owner
					space_owner = { NOT = { is_same_value = root.fromfrom.space_owner } }
					# technically redundant
				}
			}
		}
	}

	immediate = {
		fromfrom.space_owner = { set_country_flag = nep_ugo_2006_temp }
		fromfrom.space_owner = { country_event = { id = nep_ugo.2007 } }
	}
}

country_event = {
	id = nep_ugo.2007
	title = "nep_ugo.2007.name"
	desc = "nep_ugo.2007.desc"
	picture = GFX_evt_unidentified_ship
	show_sound = event_ship_bridge
	location = FROM
	
	is_triggered_only = yes
	
	immediate = { }
	
	option = {
		name = "nep_ugo.2007.a"
		default_hide_option = yes
	}
	
	option = {
		trigger = {
			NOR = {
				has_ethic = ethic_xenophile
				has_ethic = ethic_fanatic_xenophile
				has_ethic = ethic_pacifist
				has_ethic = ethic_fanatic_pacifist
			}
		}
		name = "nep_ugo.2007.b"
		event_target:nep_ugo_fleet.owner = { set_faction_hostility = { target = root set_hostile = yes } }
	}
}

#on_fleet_auto_move_arrival
country_event = {
	id = nep_ugo.3
	hide_window = yes
			
	is_triggered_only = yes
	
	trigger = {
		exists = event_target:nep_ugo_fleet
		from = { is_same_value = event_target:nep_ugo_fleet }
		fromfrom = { 
			NOT = { is_same_value = event_target:nep_ugo1_temp }
			NOT = { is_same_value = event_target:nep_ugo_US388 }
		}
	}
	
	immediate = {
		if = {
			limit = { fromfrom = { num_pops > 4 } }
			set_global_flag = nep_ugo_infect_begin
			fromfrom = {
				set_planet_flag = nep_ugo_infected
			}
			destroy_fleet = from
		}
		else = {
			random_galaxy_planet = {
				limit = {
					exists = owner
					owner = { has_country_flag = nep_ugo_target }
					is_colony = yes
					is_capital = no
					num_pops > 4
				}
				event_target:nep_ugo_fleet = {
					auto_move_to_planet = { target = prev clear_auto_move_on_arrival = yes }
				}
			}
		}
	}
}

country_event = {
	id = nep_ugo.3000
	hide_window = yes
			
	is_triggered_only = yes
	
	trigger = {
	}
	
	immediate = {
		set_global_flag = nep_ugo_infect_begin
		event_target:nep_ugo_US388 = {
			set_planet_flag = nep_ugo_infected
		}
	}
}

planet_event = {
	id = nep_ugo.3001
	hide_window = yes
	
	pre_triggers = {
		has_owner = yes
	}
	
	trigger = {
		has_global_flag = nep_ugo_infect_begin
		has_planet_flag = nep_ugo_infected
	}
	
	mean_time_to_happen = {
		days = 108
	}
	
	immediate = {
		random_list = {
			1 = {
				if = {
					limit = { has_planet_flag = nep_ugo_at_war }
					random_owned_pop = {
						limit = {
							NOT = { has_pop_flag = nep_ugo_infected }
						}
						set_pop_flag = nep_ugo_infected
					}
				}
			}
			1 = {
				random_owned_pop = {
					limit = {
						NOT = { has_pop_flag = nep_ugo_infected }
					}
					set_pop_flag = nep_ugo_infected
				}
			}
		}
		if = {
			limit = {
				any_owned_pop = {
					NOT = { has_pop_flag = nep_ugo_infected }
				}
			}
			if = {
				limit = { has_planet_flag = nep_ugo_at_war }
				every_owned_pop = {
					limit = { has_pop_flag = nep_ugo_infected }
					prev = { 
						random_list = {
							2 = {
								create_army = {
									name = "NAME_nep_ugo_army"
									owner = event_target:nep_ugo_faction
									species = prev
									type = "defense_army"
								}
							}
							2 = {
								create_army = {
									name = "NAME_nep_ugo_warriors_army_defensive"
									owner = event_target:nep_ugo_faction
									type = "nep_ugo_warriors_army_defensive"
								}
							}
							1 = {
								create_army = {
									name = "NAME_nep_ugo_hyper_creatures_army_defensive"
									owner = event_target:nep_ugo_faction
									type = "nep_ugo_hyper_creatures_army_defensive"
								}						
							}
						}
					}
					kill_pop = yes
				}
			}
			else_if = {
				limit = {
					count_owned_pop = {
						limit = {
							has_pop_flag = nep_ugo_infected
						}
						count > 3				
					}
				}
				if = {
					limit = { NOT = { has_planet_flag = nep_ugo_benoticed } }
					set_planet_flag = nep_ugo_benoticed
				}
				planet_event = { id = nep_ugo.3002 days = 5 random = 31 }
			}
		}
		else = {
			if = {
				limit = {
					has_planet_flag = nep_ugo_at_war
				}
				owner = { country_event = { id = nep_ugo.30071 } }
			}
			else = {
				owner = { country_event = { id = nep_ugo.30072 } }			
			}
		}
	}
}

planet_event = {
	id = nep_ugo.3002
	hide_window = yes
	
	pre_triggers = {
		has_owner = yes
		original_owner = yes
	}
	
	is_triggered_only = yes
	
	trigger = {
		has_global_flag = nep_ugo_infect_begin
		has_planet_flag = nep_ugo_infected
		has_planet_flag = nep_ugo_benoticed
	}
	
	immediate = {
		owner = { 
			if = {
				limit = {
					has_country_flag = nep_ugo_target 
					NOT = { has_global_flag = nep_ugo_infected_benoticed }
				}
				country_event = { id = nep_ugo.3003 }
			}
			else_if = {
				limit = {
					has_global_flag = nep_ugo_infected_benoticed
				}
				country_event = { id = nep_ugo.3004 }
			}
		}
	}
}

country_event = {
	id = nep_ugo.3003
	title = "nep_ugo.3003.name"
	desc = "nep_ugo.3003.desc"
	picture = GFX_evt_burning_settlement
	show_sound = event_ground_battle
	location = FROM
	
	is_triggered_only = yes
	
	trigger = {
		has_global_flag = nep_ugo_infect_begin
		has_country_flag = nep_ugo_target 
		NOT = { has_global_flag = nep_ugo_infected_benoticed }
	}
	
	immediate = {
		set_global_flag = nep_ugo_infected_benoticed
		if = {
			limit = { NOT = { exists = event_target:nep_ugo_faction } }
			create_country = {
				name = "NAME_nep_ugo_country"
				type = faction
				auto_delete = no
				effect = {
					establish_communications_no_message = root.owner
					#establish_contact = { who = root.owner location = root.fleet.solar_system }
					save_global_event_target_as = nep_ugo_faction
					set_faction_hostility = { set_hostile = yes }
				}
			}
		}
		From = {
			every_owned_pop = {
				limit = { has_pop_flag = nep_ugo_infected }
				root.from = { 
					random_list = {
						2 = {
							create_army = {
								name = "NAME_nep_ugo_army"
								owner = event_target:nep_ugo_faction
								species = prev
								type = "defense_army"
							}
						}
						2 = {
							create_army = {
								name = "NAME_nep_ugo_warriors_army_defensive"
								owner = event_target:nep_ugo_faction
								type = "nep_ugo_warriors_army_defensive"
							}
						}
						1 = {
							create_army = {
								name = "NAME_nep_ugo_hyper_creatures_army_defensive"
								owner = event_target:nep_ugo_faction
								type = "nep_ugo_hyper_creatures_army_defensive"
							}						
						}
					}
				}
				kill_pop = yes
			}
			set_planet_flag = nep_ugo_at_war
		}
	}
	
	option = {
		name = "nep_ugo.3003.a"
	}
}

country_event = {
	id = nep_ugo.3004
	hide_window = yes
	
	is_triggered_only = yes
	
	trigger = {
		has_global_flag = nep_ugo_infect_begin
		has_global_flag = nep_ugo_infected_benoticed
	}
	
	immediate = {
		From = {
			every_owned_pop = {
				limit = { has_pop_flag = nep_ugo_infected }
				root.from = { 
					random_list = {
						2 = {
							create_army = {
								name = "NAME_nep_ugo_army"
								owner = event_target:nep_ugo_faction
								species = prev
								type = "defense_army"
							}
						}
						2 = {
							create_army = {
								name = "NAME_nep_ugo_warriors_army_defensive"
								owner = event_target:nep_ugo_faction
								type = "nep_ugo_warriors_army_defensive"
							}
						}
						1 = {
							create_army = {
								name = "NAME_nep_ugo_hyper_creatures_army_defensive"
								owner = event_target:nep_ugo_faction
								type = "nep_ugo_hyper_creatures_army_defensive"
							}						
						}
					}
				}
				kill_pop = yes
			}
			if = { 
				limit = { NOT = { has_planet_flag = nep_ugo_at_war } }
				set_planet_flag = nep_ugo_at_war
				root = { country_event = { id = nep_ugo.30040 } }
			}
		}
	}
}

country_event = {
	id = nep_ugo.30040
	title = "nep_ugo.30040.name"
	desc = "nep_ugo.30040.desc"
	picture = GFX_evt_burning_settlement
	show_sound = event_ground_battle
	location = FROMFROM
	
	is_triggered_only = yes
	
	option = {
		name = "nep_ugo.30040.a"
	}
}

#on_planet_defenders_win
#This = player
country_event = {
	id = nep_ugo.3005
	title = "nep_ugo.3005.name"
	desc = "nep_ugo.3005.desc"
	picture = GFX_evt_disease_outbreak
	show_sound = event_ground_battle
	location = fromfrom
	
	is_triggered_only = yes
	
	trigger = {
		NOT = { has_country_flag = nep_ugo_defenders_win_no_notice }
		fromfrom = { has_planet_flag = nep_ugo_at_war }		
		and = { 
			exists = from 
			from = { is_same_value = event_target:nep_ugo_faction }
		}
	}
	
	immediate = {
		fromfrom = { remove_planet_flag = nep_ugo_at_war }
		if = {
			limit = { 
				has_country_flag = nep_ugo_target
				NOT = { has_country_flag = nep_ugo_finding_cure }
			}
			random_list = {
				1 = { country_event = { id = nep_ugo.4 days = 13 random = 25 } }				
				1 = { country_event = { id = nep_ugo.4 days = 130 random = 250 } }
			}
		}
	}
	
	option = {
		name = OK
	}
	
	option = {
		name = "nep_ugo.3005.b"
		set_country_flag = nep_ugo_defenders_win_no_notice
	}
}

#on_planet_defenders_win
#This = player
country_event = {
	id = nep_ugo.3006
	hide_window = yes
	
	is_triggered_only = yes
	
	trigger = {
		has_country_flag = nep_ugo_defenders_win_no_notice
		fromfrom = { has_planet_flag = nep_ugo_at_war }
		from = { is_same_value = event_target:nep_ugo_faction }
	}
	
	immediate = {
		fromfrom = { remove_planet_flag = nep_ugo_at_war }
		if = {
			limit = { has_country_flag = nep_ugo_target }
			country_event = { id = nep_ugo.4 days = 13 random = 25 }
		}
	}
}

#on_planet_defenders_lose
#This = player
country_event = {
	id = nep_ugo.3007
	title = "nep_ugo.3007.name"
	desc = "nep_ugo.3007.desc"
	picture = GFX_evt_guardians
	show_sound = event_ground_battle
	location = fromfrom
	
	is_triggered_only = yes
	
	trigger = {
		fromfrom = { has_planet_flag = nep_ugo_at_war }
		from = { is_same_value = event_target:nep_ugo_faction }
	}
	
	immediate = {
		fromfrom = {
			change_pc = pc_toxic
			add_modifier = { modifier = nep_ugo_hell }
		}
	}
	
	option = {
		name = CURSES
	}
}

#Not on_action ver.
country_event = {
	id = nep_ugo.30071
	title = "nep_ugo.3007.name"
	desc = "nep_ugo.3007.desc"
	picture = GFX_evt_alien_city
	location = from
	
	is_triggered_only = yes
	
	immediate = {
		from = {
			change_pc = pc_toxic
			add_modifier = { modifier = nep_ugo_hell }
		}
	}
	
	option = {
		name = CURSES
	}
}

country_event = {
	id = nep_ugo.30072
	title = "nep_ugo.30072.name"
	desc = {
		trigger = { has_global_flag = nep_ugo_infected_benoticed }
		text = "nep_ugo.30072.desc.a"
	}
	desc = {
		trigger = { NOT = { has_global_flag = nep_ugo_infected_benoticed } }
		text = "nep_ugo.30072.desc.b"
	}
	picture = GFX_evt_toxic
	location = from
	show_sound = event_solar_fusion
	
	is_triggered_only = yes
	
	immediate = {
		from = {
			change_pc = pc_toxic
			add_modifier = { modifier = nep_ugo_hell }
		}
	}
	
	option = {
		name = CURSES
		trigger = { has_global_flag = nep_ugo_infected_benoticed }
	}	
	
	option = {
		name = nep_ugo.30072.b
		trigger = { NOT = { has_global_flag = nep_ugo_infected_benoticed } }
	}
}

##infect speed config
country_event = {
	id = nep_ugo.3008
	hide_window = yes
	
	mean_time_to_happen = {
		days = 216
	}
	
	trigger = {
		has_global_flag = nep_ugo_infect_begin
		is_same_value = event_target:global_event_country
	}
	
	immediate = {
		random_galaxy_planet = {
			limit = { has_planet_flag = nep_ugo_infected }
			owner = { save_event_target_as = nep_ugo_3008_temp }
		}
		random_list = {
			4 = {
				event_target:nep_ugo_3008_temp = {
					random_owned_planet = {
						limit = { 
							is_colony = yes
							is_capital = no
							NOT = { has_planet_flag = nep_ugo_infected } 
							num_pops > 4
						}
						set_planet_flag = nep_ugo_infected
						random_owned_pop = {
							set_pop_flag = nep_ugo_infected
						}
					}
				}
			}		
			2 = {
				random_galaxy_planet = {
					limit = { 
						is_colony = yes
						is_capital = no
						NOT = { has_planet_flag = nep_ugo_infected }
						exists = owner
						owner = { 
							is_country_type = default
							has_diplo_migration_treaty = event_target:nep_ugo_3008_temp
						}
						num_pops > 4
					}
					set_planet_flag = nep_ugo_infected
					random_owned_pop = {
						set_pop_flag = nep_ugo_infected
					}
				}
			}
			1 = {			
				random_galaxy_planet = {
					limit = { 
						NOT = { has_planet_flag = nep_ugo_infected }
						exists = owner
						owner = { 
							is_country_type = default
							NOT = { has_closed_borders = event_target:nep_ugo_3008_temp }
						}
						is_neighbor_of = event_target:nep_ugo_3008_temp
						is_colony = yes
						is_capital = no
					}
					set_planet_flag = nep_ugo_infected
					random_owned_pop = {
						set_pop_flag = nep_ugo_infected
					}
				}
			}
		}
	}
}

country_event = {
	id = nep_ugo.4
	title = "nep_ugo.4.name"
	desc = "nep_ugo.4.desc"
	picture = GFX_evt_microscopic_life
	show_sound = event_laboratory_sound
	location = fromfromfrom
	
	is_triggered_only = yes
	
	trigger = { 
		has_global_flag = nep_ugo_infect_begin
		has_country_flag = nep_ugo_target
		NOT = { has_country_flag = nep_ugo_finding_cure }
	}
	
	immediate = {
		set_country_flag = nep_ugo_finding_cure
	}
	
	option = {
		name = nep_ugo.4.a
		enable_special_project = {
			name = "nep_ugo_project_1"
			location = event_target:nep_ugo_US388
			owner = root
		}
	}
}

ship_event = {
	id = nep_ugo.4001
	hide_window = yes
	is_triggered_only = yes
	
	trigger = { owner = { has_country_flag = nep_ugo_target } }
	
	immediate = {
		owner = { country_event = { id = nep_ugo.40010 } }
	}
}

country_event = {
	id = nep_ugo.40010
	title = "nep_ugo.40010.name"
	desc = "nep_ugo.40010.desc"
	picture = GFX_evt_emergency_workers
	location = event_target:nep_ugo_US388
	show_sound = event_laboratory_sound
	is_triggered_only = yes
	
	immediate = { from.fleet = { set_event_locked = yes } }
	
	option = {
		name = nep_ugo.40010.a
		enable_special_project = {
			name = "nep_ugo_project_2"
			location = event_target:nep_ugo_US388
			owner = root
		}
	}	
	
	after = {
		from.fleet = { 
			kill_leader = { type = scientist } 
			hidden_effect = { set_event_locked = no }
		}
	}
}

ship_event = {
	id = nep_ugo.4002
	hide_window = yes
	is_triggered_only = yes
	
	trigger = { owner = { has_country_flag = nep_ugo_target } }
	
	immediate = {
		fleet = { set_event_locked = yes }
		owner = { country_event = { id = nep_ugo.40020 } }
	}
}

country_event = {
	id = nep_ugo.40020
	title = "nep_ugo.40020.name"
	desc = "nep_ugo.40020.desc"
	picture = GFX_evt_exploding_ship
	location = event_target:nep_ugo_US388
	show_sound = event_laboratory_sound
	is_triggered_only = yes
	
	option = {
		name = nep_ugo.40020.a
		enable_special_project = {
			name = "nep_ugo_project_3"
			location = event_target:nep_ugo_US388
			owner = root
		}
	}
	
	after = { 
		from.fleet = { 
			hidden_effect = { set_event_locked = no }
			destroy_fleet = this
		}
	}
}

ship_event = {
	id = nep_ugo.5
	hide_window = yes
	
	is_triggered_only = yes
	
	trigger = { owner = { has_country_flag = nep_ugo_target } }
	
	immediate = {
		owner = { country_event = { id = nep_ugo.5000 } }
	}
}

country_event = {
	id = nep_ugo.5000
	title = "nep_ugo.5000.name"
	desc = "nep_ugo.5000.desc"
	picture = GFX_evt_scanning_remains
	location = event_target:nep_ugo_US388
	show_sound = event_laboratory_sound
	is_triggered_only = yes
	
	option = {
		name = nep_ugo.5000.a
		add_research_option = tech_nep_ugo_tech
	}
}

#on_tech_increased
country_event = {
	id = nep_ugo.6
	title = "nep_ugo.6.name"
	desc = "nep_ugo.6.desc"
	picture = GFX_evt_signing
	show_sound = event_laboratory_sound
	is_triggered_only = yes
	
	trigger = { 
		has_country_flag = nep_ugo_target
		last_increased_tech = tech_nep_ugo_tech 
	}
	
	option = {
		name = nep_ugo.6.a		
		enable_special_project = {
			name = "nep_ugo_project_4"
			location = event_target:nep_ugo_US388
			owner = root
		}
	}
}

country_event = {
	id = nep_ugo.7
	title = "nep_ugo.7.name"
	desc = "nep_ugo.7.desc"
	picture = GFX_evt_unidentified_monster
	show_sound = event_alien_nature
	is_triggered_only = yes
	
	immediate = {
		remove_global_flag = nep_ugo_infect_begin
		remove_global_flag = nep_ugo_infected_benoticed
	}
	
	option = {
		name = nep_ugo.7.a
		custom_tooltip = nep_ugo.7.a.tooltip
		add_monthly_resource_mult = {
			resource = unity
			value = 50
			max = 9999
		}
		every_owned_planet = {
			limit = { has_planet_flag = nep_ugo_infected }
			every_owned_pop = {
				limit = { has_pop_flag = nep_ugo_infected }
				kill_pop = yes
			}
			remove_planet_flag = nep_ugo_infected 
		}
		event_target:nep_ugo_faction = {
			every_owned_army = {
				remove_army = yes
			}
		}
		hidden_effect = {
			every_country = {
				limit = { any_owned_planet = { has_planet_flag = nep_ugo_infected } }
				country_event = { id = nep_ugo.7001 }
			}
		}
	}
	
	option = {
		name = nep_ugo.7.b
		custom_tooltip = nep_ugo.7.b.tooltip
		add_resource = {
			influence = -100
		}
		trigger = {
			NOR = {
				AND = {				
					OR = {
						has_ethic = ethic_xenophobe
						has_ethic = ethic_fanatic_xenophobe
					}
					NOR = { 
						has_ethic = ethic_militarist
						has_ethic = ethic_fanatic_militarist
					}
				}
				has_ethic = ethic_pacifist
				has_ethic = ethic_fanatic_pacifist
				has_valid_civic = civic_machine_servitor
				has_valid_civic = civic_hive_devouring_swarm
				has_valid_civic = civic_fanatic_purifiers
				has_valid_civic = civic_machine_terminator
			}
		}
		every_owned_planet = {
			limit = { has_planet_flag = nep_ugo_infected }
			every_owned_pop = {
				limit = { has_pop_flag = nep_ugo_infected }
				remove_pop_flag = nep_ugo_infected
			}
			remove_planet_flag = nep_ugo_infected 
		}
		event_target:nep_ugo_faction = {
			every_owned_army = {
				limit = {
					exists = planet
					planet = {
						exists = owner
						owner = { is_same_value = root }
					}
				}
				remove_army = yes
			}
		}
		add_relic = r_nep_ugo_relic
		hidden_effect = {
			set_country_flag = nep_can_use_ugo_warriors
			every_country = {
				limit = { any_owned_planet = { has_planet_flag = nep_ugo_infected } }
				country_event = { id = nep_ugo.7002 }
			}
		}
	}
	
	option = {
		name = nep_ugo.7.c
		custom_tooltip = nep_ugo.7.c.tooltip
		trigger = {
			NOR = {
				has_ethic = ethic_xenophobe
				has_ethic = ethic_fanatic_xenophobe
				has_authority = auth_hive_mind
				has_valid_civic = civic_hive_devouring_swarm
				has_valid_civic = civic_fanatic_purifiers
				has_valid_civic = civic_machine_terminator
				has_valid_civic = civic_machine_servitor
			}
		}		
		if = {
			limit = { has_ethic = ethic_xenophile }
			add_monthly_resource_mult = {
				resource = unity
				value = 20
				max = 4000
			}
		}
		else_if = {
			limit = { has_ethic = ethic_fanatic_xenophile }
			add_monthly_resource_mult = {
				resource = unity
				value = 40
				max = 8000
			}
		}
		else = {
			add_monthly_resource_mult = {
				resource = unity
				value = 10
				max = 2000
			}
		}
		every_owned_planet = {
			limit = { has_planet_flag = nep_ugo_infected }
			every_owned_pop = {
				limit = { has_pop_flag = nep_ugo_infected }
				remove_pop_flag = nep_ugo_infected
				modify_species = {
					species = this
					add_trait = trait_nep_ugo_1
					add_traits_at_start_of_list = yes
				}
			}
			remove_planet_flag = nep_ugo_infected
		}		
		event_target:nep_ugo_faction = {
			every_owned_army = {
				limit = {
					exists = planet
					planet = { 
						exists = owner
						owner = { is_same_value = root }
					}
				}
				planet = {
					random_owned_species = { 
						limit = { has_trait = trait_nep_ugo_1 }
						save_event_target_as = nep_ugo_7_temp
					}
					create_pop = { species = event_target:nep_ugo_7_temp }
				}
				remove_army = yes
			}
			every_owned_army = {
				remove_army = yes
			}
		}
		set_country_flag = nep_ugo_modifier		
		hidden_effect = {
			every_country = {
				limit = { any_owned_planet = { has_planet_flag = nep_ugo_infected } }
				country_event = { id = nep_ugo.7001 }
			}
		}
	}
}
country_event = {
	id = nep_ugo.7001
	title = "nep_ugo.7001.name"
	desc = "nep_ugo.7001.desc"
	picture = GFX_evt_alien_propaganda
	is_triggered_only = yes
	show_sound = event_alien_signal
	
	immediate = {
		every_owned_planet = {
			limit = { has_planet_flag = nep_ugo_infected }
			every_owned_pop = {
				limit = { has_pop_flag = nep_ugo_infected }
				kill_pop = yes
			}
			remove_planet_flag = nep_ugo_infected 
		}
	}
	
	option = { name = OK }
}
country_event = {
	id = nep_ugo.7002
	title = "nep_ugo.7002.name"
	desc = "nep_ugo.7002.desc"
	picture = GFX_evt_alien_propaganda
	is_triggered_only = yes
	show_sound = event_alien_signal
	
	immediate = {
		every_owned_planet = {
			limit = { has_planet_flag = nep_ugo_infected }
			every_owned_pop = {
				limit = { has_pop_flag = nep_ugo_infected }
				kill_pop = yes
			}
			remove_planet_flag = nep_ugo_infected 
		}
	}
	
	option = { name = CURSES }
}

#on_destroy_planet_with_PLANET_KILLER_NEP_UGO
planet_event = {
	id = nep_ugo.8
	hide_window = yes
	is_triggered_only = yes
	
	immediate = {
		if = {
			limit = {
				exists = owner
				owner = { NOT = { is_same_value = from.owner } }
			}
			from.owner = {
				country_event = { id = nep_ugo.8001 }
			}
		}
		if = {
			limit = {
				exists = owner
				owner = {
					NOT = { is_same_value = from.owner }
					OR = {
						is_country_type = default
						is_country_type = fallen_empire
						is_country_type = awakened_fallen_empire
					}
				}
			}
			# Generate threat
			add_threat = { who = from.owner amount = 3 }
			# modifier for allies + those upset by robots
			every_country = {
				limit = {
					NOR = {
						is_same_value = from.owner
						is_same_value = root.owner
						AND = {
							has_federation = yes
							is_in_federation_with = from.owner
						}
					}
					OR = {
						has_communications = from.owner
						has_communications = root.owner
					}
					OR = {
						AND = {
							has_federation = yes
							is_in_federation_with = root.owner
						}
						has_ai_personality = awakened_fallen_empire_spiritualist
						AND = {
							is_country_type = default
							OR = {
								is_egalitarian = yes
								is_spiritualist = yes
							}
						}
					}
				}
				add_opinion_modifier = {
					modifier = opinion_assimilated_a_world
					who = from.owner
				}
			}
			# modifiers for victim
			owner = {
				add_opinion_modifier = {
					modifier = opinion_assimilated_my_world
					who = from.owner
				}
				add_modifier = {
					modifier = colossus_victim
					days = 10800 # 30 years
				}
			}
		}
		else_if = {
			limit = {
				exists = owner
				owner = { is_country_type = primitive }
			}
			# modifier for allies + those upset by genocide
			every_country = {
				limit = {
					NOR = { is_same_value = from.owner }
					OR = {
						has_communications = from.owner
						has_communications = root.owner
					}
					is_country_type = default
					NOR = {
						is_xenophobe = yes
						is_homicidal = yes
						is_xenophile = yes
					}
				}
				add_opinion_modifier = {
					modifier = opinion_assimilated_a_primitive_world
					who = from.owner
				}
			}
			every_country = {
				limit = {
					NOR = { is_same_value = from.owner }
					OR = {
						has_communications = from.owner
						has_communications = root.owner
					}
					OR = {
						has_ai_personality = awakened_fallen_empire_xenophile
						AND = {
							is_country_type = default
							is_xenophile = yes
						}
					}
				}
				add_opinion_modifier = {
					modifier = opinion_assimilated_a_primitive_world_phile
					who = from.owner
				}
			}
			# Add war exhaustion to planet owner 
			owner = {
				add_static_war_exhaustion = {
					attacker = from.fleet.owner
					location = root
					value_for_planet_destruction = 1.0
				}
			}
			if = {
				limit = {
					exists = owner
					owner = { is_same_value = from.owner }
				}
				# already owned
			}
			else = {
				set_owner = from.owner
				if = {
					limit = { 
						AND = {
							NOT = { has_building = building_colony_shelter }
							NOT = { has_building = building_deployment_post }
							has_upgraded_capital = no
							has_major_upgraded_capital = no
							has_fully_upgraded_capital = no
							
						}
					}
					if = {
						limit = { from.owner = { is_machine_empire = yes } }
						add_building = building_deployment_post
					}
					if = {
						limit = { from.owner = { is_hive_empire = yes } }
						add_building = building_hive_capital
					}
					if = {
						limit = { from.owner = { is_regular_empire = yes } }
						add_building = building_colony_shelter
					}
				}
			}
		}
		every_owned_pop = {
			if = {
				limit = {
					root.from = { has_authority = auth_hive_mind }
					NOT = { has_trait = trait_hive_mind }
				}
				modify_species = {
					species = this
					add_trait = trait_nep_ugo_2
					add_trait = trait_hive_mind
					add_traits_at_start_of_list = yes
				}
			}
			else_if = {
				limit = {
					NOT = { root.from = { has_authority = auth_hive_mind } }
					 has_trait = trait_hive_mind
				}				
				modify_species = {
					species = this
					add_trait = trait_nep_ugo_2
					remove_trait = trait_hive_mind
					add_traits_at_start_of_list = yes
				}
			}
			else = {			
				modify_species = {
					species = this
					add_trait = trait_nep_ugo_2
					add_traits_at_start_of_list = yes
				}
			}
		}
		# Special graphics for Habitats and Ring Worlds
		if = {
			limit = {
				is_planet_class = pc_habitat
			}
			spawn_habitat_divine_effect = yes
		}
		else_if = {
			limit = {
				is_planet_class = pc_ringworld_habitable
			}
			spawn_ringworld_divine_effect = yes
		}
		if = {
			limit = {
				OR = {
					is_planet_class = pc_habitat
					is_planet_class = pc_ringworld_habitable
				}
			}
			# nothing
		}
		else = {
			switch = {
				trigger = is_planet_class
				pc_desert = { change_pc = pc_desert }
				pc_arid = { change_pc = pc_arid }
				pc_savannah = { change_pc = pc_savannah }
				pc_ocean = { change_pc = pc_ocean }
				pc_continental = { change_pc = pc_continental }
				pc_tropical = { change_pc = pc_tropical }
				pc_tundra = { change_pc = pc_tundra }
				pc_arctic = { change_pc = pc_arctic }
				pc_alpine = { change_pc = pc_alpine }
			}
		}
	}
}

country_event = {
	id = nep_ugo.8001
	title = "nep_ugo.8001.name"
	desc = "nep_ugo.8001.desc"
	picture = GFX_evt_planet_beam
	show_sound = event_mystic_reveal
	is_triggered_only = yes
	trigger = {
		NOT = { has_country_flag = nep_fired_ugo }
	}

	immediate = {
		set_country_flag = nep_fired_ugo
	}

	option = {
		name = OK
	}
}


country_event = {
	id = nep_ugo.9
	hide_window = yes

	mean_time_to_happen = {
		years = 20
	}
	
	trigger = {
		has_global_flag = nep_ugo_infected_benoticed
		is_same_value = event_target:global_event_country
	}
	
	immediate = {
		remove_global_flag = nep_ugo_infect_begin
		remove_global_flag = nep_ugo_infected_benoticed
		random_galaxy_planet = {
			limit = { has_planet_flag = nep_ugo_US388 }		
			change_pc = pc_shattered
			remove_modifier = nep_ugo_hell
		}
		every_galaxy_planet = {
			limit = { has_planet_flag = nep_ugo_infected }
			every_owned_pop = {
				limit = { has_pop_flag = nep_ugo_infected }
				kill_pop = yes
			}
			remove_planet_flag = nep_ugo_infected
			remove_planet_flag = nep_ugo_benoticed
			remove_planet_flag = nep_ugo_at_war
		}
		event_target:nep_ugo_faction = {
			every_owned_army = {
				remove_army = yes
			}
		}
		every_playable_country = {
			if = {
				limit = {
					has_special_project = nep_ugo_project_0
				}
				abort_special_project = {
					type = "nep_ugo_project_0"
				}
			}
			if = {
				limit = {
					has_special_project = nep_ugo_project_1
				}
				abort_special_project = {
					type = "nep_ugo_project_1"
				}
			}
			if = {
				limit = {
					has_special_project = nep_ugo_project_2
				}
				abort_special_project = {
					type = "nep_ugo_project_2"
				}
			}
			if = {
				limit = {
					has_special_project = nep_ugo_project_3
				}
				abort_special_project = {
					type = "nep_ugo_project_3"
				}
			}
			country_event = { id = nep_ugo.9001 }
		}
	}
}

country_event = {
	id = nep_ugo.9001
	title = "nep_ugo.9001.name"
	desc = "nep_ugo.9001.desc"
	picture = GFX_evt_exploding_planet
	show_sound = event_ground_battle
	is_triggered_only = yes
	
	option = {
		name = nep_ugo.9001.a
	}
}