namespace = confrontations_technologist_militancy_upset

pop_faction_event = {
    id = confrontations_technologist_militancy_upset.1
    hide_window = yes

    is_triggered_only = yes

    immediate = {
        random_list = {
            24 = {
                # Riots
                pop_faction_event = { id = confrontations_technologist_militancy_upset.2 }
            }
            23 = {
                # Faction corners production
                pop_faction_event = { id = confrontations_technologist_militancy_upset.3 }
            }
            23 = {
                # Book Burning
                pop_faction_event = { id = confrontations_technologist_militancy_upset.4 }
            }

            30 = {
                # Use a peaceful event
                pop_faction_event = { id = confrontations_technologist_militancy_peaceful.1 }
            }
        }
    }
}

# Riots
pop_faction_event = {
    id = confrontations_technologist_militancy_upset.2
    title = confrontations_technologist_militancy_upset.2
    desc = confrontations_technologist_militancy_upset.2.desc
    hide_window = no

    is_triggered_only = yes

    picture = GFX_evt_night_raid
    show_sound = event_super_explosion

    immediate = {
        owner = { country_event = { id = confrontations_technologist.2 } }
    }

    option = {
        name = confrontations_technologist_militancy_upset.2.a

        owner = {
            add_modifier = {
                modifier = technologist_riots_continue_modifier
                years = 3
            }

            random_owned_pop = {
                limit = {
                    NOT = {
                        pop_has_ethic = ethic_materialist
                    }
                }
                pop_change_ethic = ethic_materialist
            }
        }
    }

    option = {
        name = confrontations_technologist_militancy_upset.2.b

        owner = {
            add_modifier = {
                modifier = technologist_riots_stopped_modifier
                years = 3
            }
        }
    }
}

# Faction corners production
pop_faction_event = {
    id = confrontations_technologist_militancy_upset.3
    title = confrontations_technologist_militancy_upset.3
    desc = confrontations_technologist_militancy_upset.3.desc
    hide_window = no

    is_triggered_only = yes

    picture = GFX_evt_ship_offloading_cargo
    show_sound = event_factions

    immediate = {
        owner = { country_event = { id = confrontations_technologist.2 } }
    }

    option = {
        name = confrontations_technologist_militancy_upset.3.a

        owner = {
            add_modifier = {
                modifier = technologist_corner_production_continue_modifier
                years = 3
            }
        }
    }

    option = {
        name = confrontations_technologist_militancy_upset.3.b

        owner = {
            add_modifier = {
                modifier = technologist_corner_production_stopped_modifier
                years = 3
            }
        }
    }
}

# Book Burning
pop_faction_event = {
    id = confrontations_technologist_militancy_upset.4
    title = confrontations_technologist_militancy_upset.4
    desc = confrontations_technologist_militancy_upset.4.desc
    hide_window = no

    is_triggered_only = yes

    picture = GFX_evt_burning_city
    show_sound = event_air_raid_siren

    immediate = {
        owner = { country_event = { id = confrontations_technologist.2 } }
    }

    option = {
        name = confrontations_technologist_militancy_upset.4.a

        owner = {
            add_modifier = {
                modifier = technologist_violent_riots_continue_modifier
                years = 3
            }
        }
    }
    option = {
        name = confrontations_technologist_militancy_upset.4.b

        owner = {
            add_modifier = {
                modifier = technologist_violent_riots_stopped_modifier
                years = 3
            }
        }
    }
}