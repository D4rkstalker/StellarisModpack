namespace = AAR_evts_subject




### 共同辉煌年检
#_<aar年检>
country_event = {
	id = AAR_evts_subject.1
	hide_window = yes
	is_triggered_only = yes

	immediate = {
		# 附庸类型DB
		if = {
			limit = {
				exists = overlord
				overlord = { has_ascension_perk = eap_shared_destiny }
				OR = {
					is_subject_with_preset = { PRESET = preset_vassal }
					is_subject_with_preset = { PRESET = preset_protectorate }
				}
			}
			set_subject_of = { who = overlord		 preset = AAR_SBJ_vassal }
		}
		# 附庸mod_DB
		remove_modifier = AAR_mod_cntr_vassal_support
		if = { limit = { is_subject_with_preset = { PRESET = AAR_SBJ_vassal } }
			add_modifier = { modifier = AAR_mod_cntr_vassal_support		 days = -1 }
		}
	}
}




### 铁血联盟年检
#_<aar年检>
country_event = {
	id = AAR_evts_subject.2
	hide_window = yes
	is_triggered_only = yes

	immediate = {
		# 附庸类型DB
		if = {
			limit = {
				exists = overlord
				overlord = { has_ascension_perk = AAR_AP_ForcedUnion }
				is_subject_with_preset = { PRESET = preset_tributary }
			}
			set_subject_of = { who = overlord		 preset = AAR_SBJ_tributary }

			# 宣称控制
			remove_country_flag = AAR_flg_cntr_no_claim
			if = { limit = { overlord = { has_policy_flag = AAR_flg_policy_FU_no_claim } }	# 宣称管控
				set_country_flag = AAR_flg_cntr_no_claim
			}
		}
		# 附庸mod_DB
		remove_modifier = AAR_mod_cntr_union_support
		if = { limit = { is_subject_with_preset = { PRESET = AAR_SBJ_tributary } }
			add_modifier = { modifier = AAR_mod_cntr_union_support		 days = -1 }
		}
	}
}




### 资本渗透年检
#_<aar年检>
country_event = {
	id = AAR_evts_subject.3
	hide_window = yes
	is_triggered_only = yes

	immediate = {
		# 附庸类型DB
		if = {
			limit = {
				exists = overlord
				overlord = { has_ascension_perk = eap_universal_transactions }
				is_subject_with_preset = { PRESET = preset_subsidiary }
			}
			set_subject_of = { who = overlord		 preset = AAR_SBJ_subsidiary }
		}
		# 附庸mod_DB
		remove_modifier = AAR_mod_cntr_corp
		if = { limit = { is_subject_with_preset = { PRESET = AAR_SBJ_subsidiary } }
			add_modifier = { modifier = AAR_mod_cntr_corp		 days = -1 }
		}
	}
}

