
ag_psionic_portal = {
	name = ag_psionic_portal
	is_pathfind = yes
	uses_action = no
	always_active = yes
	windup_time = 2
	winddown_time = 3
	ftl_multiplier = 3
	extends_sensors = yes
	icon_frame = 52
	remember_instances = no
	galactic_map_tooltip_header = ag_psionic_portal
	galactic_map_tooltip_desc = ag_psionic_portal_desc
	connection_type = scripted_connection
	animation_time = 1
	ftl_ship_effect = "wormhole_ftl_ship_effect_entity"
	ftl_bypass_effect = "wormhole_ftl_bypass_effect_entity"

	country_can_use = { custom_tooltip = {
		fail_text = ag_psionic_portal_cannot_use
		OR = {
			has_global_flag = ag_zeta_crisis_ended
			is_country_type = ag_zeta_crisis_country
			AND = {
				exists = event_target:ag_zeta_crisis_country
				event_target:ag_zeta_crisis_country = { OR = {
					# For saved game compatibility.
					AND = {
						NOT = { is_variable_set = ag_zeta_crisis_total_psionic_portals_spawned }
						check_variable = { which = ag_zeta_crisis_gate_portal_destroyed value >= 6 }
					}
					AND = {
						is_variable_set = ag_zeta_crisis_total_psionic_portals_spawned
						check_variable = { which = ag_zeta_crisis_gate_portal_destroyed value >= ag_zeta_crisis_total_psionic_portals_spawned }
					}
				} }
			}
		}
	} }
	
	scripted_connection = {
		node = { NOT = { has_star_flag = ag_ancient_zeta_system } }
		nexus = { has_star_flag = ag_ancient_zeta_system }
	}

	on_action = "ag_on_entering_psionic_portal"
}

ag_ancient_eta_gateway = {
	name = ag_ancient_eta_gateway
	is_pathfind = yes
	uses_action = no
	always_active = yes
	requires_exploration = no
	windup_time = 4
	winddown_time = 4
	ftl_multiplier = 5
	icon_frame = 54
	remember_instances = no
	galactic_map_tooltip_header = ag_ancient_eta_gateway
	galactic_map_tooltip_desc = ag_ancient_eta_gateway_desc
	connection_type = any_other
	animation_time = 1
	ftl_ship_effect = "gateway_ftl_ship_effect_entity"
	ftl_bypass_effect = "gateway_ftl_bypass_effect_entity"
	
	country_can_use = {
		custom_tooltip = {
			fail_text = ag_ancient_eta_gateway_cannot_use
			OR = {
				# ag_is_common_country = no
				AND = {
					NOT = { exists = event_target:ag_eta_gateway_controller }
					OR = {
						NOT = { exists = from }
						from = { NOR = {
							has_closed_borders = root
							is_hostile = root
						} }
					}
				}
				AND = {
					exists = event_target:ag_eta_gateway_controller
					is_same_value = event_target:ag_eta_gateway_controller
				}
				AND = {
					exists = event_target:ag_eta_gateway_controller
					event_target:ag_eta_gateway_controller = { NOR = {
						has_country_flag = ag_ancient_eta_gateway_policy_white
						has_country_flag = ag_ancient_eta_gateway_policy_black
						is_same_value = root
						has_closed_borders = root
						is_hostile = root
					} }
				}
				AND = {
					exists = event_target:ag_eta_gateway_controller
					event_target:ag_eta_gateway_controller = {
						has_country_flag = ag_ancient_eta_gateway_policy_white
						has_country_flag = ag_ancient_eta_gateway_allows_@root
					}
				}
				AND = {
					exists = event_target:ag_eta_gateway_controller
					event_target:ag_eta_gateway_controller = {
						has_country_flag = ag_ancient_eta_gateway_policy_black
						NOT = { has_country_flag = ag_ancient_eta_gateway_disallows_@root }
					}
				}
			}
		}
	}

	on_action = "ag_on_entering_ancient_eta_gateway"
}

ag_ancient_eta_wormhole_temporary = {
	name = ag_ancient_eta_wormhole_temporary
	is_pathfind = yes
	uses_action = no
	always_active = yes
	requires_exploration = no
	windup_time = 5
	winddown_time = 5
	ftl_multiplier = 5
	icon_frame = 54
	remember_instances = no
	galactic_map_tooltip_header = ag_ancient_eta_wormhole_temporary
	galactic_map_tooltip_desc = ag_ancient_eta_wormhole_temporary_desc
	connection_type = any_other
	animation_time = 1
	ftl_ship_effect = "wormhole_ftl_ship_effect_entity"
	ftl_bypass_effect = "wormhole_ftl_bypass_effect_entity"

	country_can_use = {
		custom_tooltip = {
			fail_text = "NATURAL_WORMHOLE_COUNTRY_CANNOT_USE"
			OR = {
				NOT = { exists = from }
				from = { OR = {
					NOT = { has_closed_borders = root }
					is_at_war_with = root
					ag_is_common_country = no
				} }
			}
		}
	}

	on_action = "ag_on_entering_ancient_eta_wormhole_temporary"
}
