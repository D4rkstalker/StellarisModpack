
wg_ag_ancient_titans = {
	casus_belli = cb_ag_ancient_titans
	hide_if_no_cb = yes
	total_war = yes
	set_defender_wargoal = wg_ag_stop_ancient_titans

	galactic_empire_joins_defender = {
		from = { is_galactic_emperor = yes }
		imperial_authority >= 100
	}

	allowed_peace_offers = {
		status_quo
		surrender
		demand_surrender
	}

	surrender_acceptance = -1000

	potential = {
		NAND = {
			is_galactic_emperor = yes
			from = { is_galactic_community_member = yes }
		}
	}
	possible = {
		custom_tooltip = {
			fail_text = cannot_use_against_emperor
			OR = {
				from = { is_galactic_emperor = no }
				is_galactic_community_member = no
			}
		}
		custom_tooltip = {
			fail_text = pax_galactica_active
			NAND = {
				is_active_resolution = resolution_emperor_pax_galactica
				is_galactic_community_member = yes
				from = { is_galactic_community_member = yes }
			}
		}
	}

	ai_weight = { weight = 100 }
}
wg_ag_stop_ancient_titans = {
	casus_belli = cb_ag_stop_ancient_titans
	hide_if_no_cb = yes
	total_war = yes
	set_defender_wargoal = wg_ag_ancient_titans

	galactic_empire_joins_defender = {
		from = { is_galactic_emperor = yes }
		imperial_authority >= 100
	}

	allowed_peace_offers = {
		status_quo
		surrender
		demand_surrender
	}

	surrender_acceptance = -1000

	potential = {
		NAND = {
			is_galactic_emperor = yes
			from = { is_galactic_community_member = yes }
		}
	}
	possible = {
		custom_tooltip = {
			fail_text = cannot_use_against_emperor
			OR = {
				from = { is_galactic_emperor = no }
				is_galactic_community_member = no
			}
		}
		custom_tooltip = {
			fail_text = pax_galactica_active
			NAND = {
				is_active_resolution = resolution_emperor_pax_galactica
				is_galactic_community_member = yes
				from = { is_galactic_community_member = yes }
			}
		}
	}

	ai_weight = { weight = 100 }
}

wg_ag_beta_psi_tech = {
	casus_belli = cb_ag_beta_psi_tech
	hide_if_no_cb = yes
	defender_default = no

	galactic_empire_joins_defender = {
		from = { is_galactic_emperor = yes }
		imperial_authority >= 100
	}
	allowed_peace_offers = {
		status_quo
		surrender
		demand_surrender
	}

	surrender_acceptance = -25

	potential = {
		NAND = {
			is_galactic_emperor = yes
			from = { is_galactic_community_member = yes }
		}
	}
	possible = { always = yes }
	
	# Enemy country(from) surrendered
	on_accept = {
		custom_tooltip = "wg_ag_beta_psi_tech_accept"
		hidden_effect = {
			set_country_flag = ag_psionic_signal_research_available
			if = { limit = { NOT = { has_technology = tech_ag_psionic_signal_1 } } give_technology = { tech = tech_ag_psionic_signal_1 message = yes } }
			if = {
				limit = { NOT = { has_technology = tech_ag_psionic_signal_2 } from = { has_technology = tech_ag_psionic_signal_2 } }
				give_technology = { tech = tech_ag_psionic_signal_2 message = yes }
			}
			if = {
				limit = { NOT = { has_technology = tech_ag_psionic_signal_3 } from = { has_technology = tech_ag_psionic_signal_3 } }
				give_technology = { tech = tech_ag_psionic_signal_3 message = yes }
			}
			if = {
				limit = { NOT = { has_technology = tech_ag_psionic_signal_41 } from = { has_technology = tech_ag_psionic_signal_41 } }
				add_research_option = tech_ag_psionic_signal_41 add_tech_progress = { tech = tech_ag_psionic_signal_41 progress = 0.50 }
			}
			if = {
				limit = { NOT = { has_technology = tech_ag_psionic_signal_42 } from = { has_technology = tech_ag_psionic_signal_42 } }
				give_technology = { tech = tech_ag_psionic_signal_42 message = yes }
			}
		}
	}
	on_status_quo = {
		custom_tooltip = "wg_ag_beta_psi_tech_status_quo"
		hidden_effect = {
			random_list = {
				20 = { set_country_flag = ag_psionic_signal_research_available }
				50 = {
					modifier = { factor = 0 has_technology = tech_ag_psionic_signal_1 }
					set_country_flag = ag_psionic_signal_research_available
					add_research_option = tech_ag_psionic_signal_1 add_tech_progress = { tech = tech_ag_psionic_signal_1 progress = 0.50 }
				}
				30 = {
					modifier = { factor = 100 has_technology = tech_ag_psionic_signal_1 }
					set_country_flag = ag_psionic_signal_research_available
					if = { limit = { NOT = { has_technology = tech_ag_psionic_signal_1 } } give_technology = { tech = tech_ag_psionic_signal_1 message = yes } }
					if = {
						limit = { from = { has_technology = tech_ag_psionic_signal_2 } }
						random_list = {
							20 = { }
							55 = {
								modifier = { factor = 0 has_technology = tech_ag_psionic_signal_2 }
								add_research_option = tech_ag_psionic_signal_2 add_tech_progress = { tech = tech_ag_psionic_signal_2 progress = 0.40 }
							}
							25 = {
								modifier = { factor = 100 has_technology = tech_ag_psionic_signal_2 }
								if = { limit = { NOT = { has_technology = tech_ag_psionic_signal_2 } } give_technology = { tech = tech_ag_psionic_signal_2 message = yes } }
								if = {
									limit = { from = { has_technology = tech_ag_psionic_signal_3 } }
									random_list = {
										20 = { }
										60 = {
											modifier = { factor = 0 has_technology = tech_ag_psionic_signal_3 }
											add_research_option = tech_ag_psionic_signal_3 add_tech_progress = { tech = tech_ag_psionic_signal_3 progress = 0.30 }
										}
										20 = {
											modifier = { factor = 100 has_technology = tech_ag_psionic_signal_3 }
											if = { limit = { NOT = { has_technology = tech_ag_psionic_signal_3 } } give_technology = { tech = tech_ag_psionic_signal_3 message = yes } }
											if = {
												limit = { from = { has_technology = tech_ag_psionic_signal_41 } }
												random_list = {
													20 = { }
													80 = {
														modifier = { factor = 0 has_technology = tech_ag_psionic_signal_41 }
														add_research_option = tech_ag_psionic_signal_41 add_tech_progress = { tech = tech_ag_psionic_signal_41 progress = 0.20 }
													}
												}
											}
											if = {
												limit = { from = { has_technology = tech_ag_psionic_signal_42 } }
												random_list = {
													20 = { }
													65 = {
														modifier = { factor = 0 has_technology = tech_ag_psionic_signal_42 }
														add_research_option = tech_ag_psionic_signal_42 add_tech_progress = { tech = tech_ag_psionic_signal_42 progress = 0.25 }
													}
													15 = {
														if = { limit = { NOT = { has_technology = tech_ag_psionic_signal_42 } } give_technology = { tech = tech_ag_psionic_signal_42 message = yes } }
														else = { add_resource = { influence = 100 } }
													}
												}
											}
										}
									}
								}
							}
						}
					}
				}
			}
		}
	}

	ai_weight = { weight = 5 }
}