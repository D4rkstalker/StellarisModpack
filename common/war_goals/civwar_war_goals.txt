wg_civwar = {
	casus_belli = cb_event

	hide_if_no_cb = yes
	set_defender_wargoal = wg_civwar_rebel
	total_war = no

	allowed_peace_offers = {
		status_quo
		surrender
		demand_surrender
	}

	surrender_acceptance = -300

	potential = {
		always = no # event only
	}

	possible = {
		always = yes
	}

	on_accept = {
		custom_tooltip = civil_war_won_tooltip
		add_monthly_resource_mult = {
			resource = unity
			value = @tier5materialreward
			min = @tier5materialmin
		}
	}

	on_wargoal_set = {
		random_war = {
			limit = {
				using_war_goal = {
					type = wg_civwar
					owner = root
				}
			}
			every_war_participant = {
				limit = {
					has_country_flag = remove_fed_civil_war
					NOT = { is_war_leader = yes }
				}
				prev = {
					remove_war_participant = prev
				}
			}
		}
		from = {
			every_system_within_border = {
				limit = {
					NOT = { root = { has_claim = prev } }
				}
				add_claims = { who = root }
			}
		}
	}

	ai_weight = {
		weight = 100
	}
}

wg_civwar_rebel = {
	casus_belli = cb_event

	hide_if_no_cb = yes
	total_war = no

	allowed_peace_offers = {
		status_quo
		surrender
		demand_surrender
	}

	surrender_acceptance = -300

	potential = {
		always = no # event only
	}
	possible = {
		always = yes
	}

	on_accept = {
		custom_tooltip = wg_humiliation_accept
		add_modifier = { modifier = humiliated days = 3600 }
		add_resource = { influence = 100 }
	}

	ai_weight = {
		weight = 100
	}
}

wg_planet_rebellion = {
	casus_belli = cb_event

	hide_if_no_cb = yes
	set_defender_wargoal = wg_planet_rebellion_rebels
	total_war = no

	allowed_peace_offers = {
		status_quo
		surrender
		demand_surrender
	}

	surrender_acceptance = -300

	potential = {
		always = no # event only
	}
	possible = {
		always = yes
	}

	on_wargoal_set = {
		random_war = {
			limit = {
				using_war_goal = {
					type = wg_planet_rebellion
					owner = root
				}
			}
			every_war_participant = {
				limit = {
					has_country_flag = remove_fed_civil_war
					NOT = { is_war_leader = yes }
				}
				prev = {
					remove_war_participant = prev
				}
			}
		}
		from = {
			every_system_within_border = {
				limit = {
					NOT = { root = { has_claim = prev } }
				}
				add_claims = { who = root }
			}
		}
	}

	on_status_quo = {
		# This needs to be done to get rid of the "Rebels of" tag on the galactic map.
		hidden_effect = {
			from = {
				set_subject_of = {
					who = root
					subject_type = dummy_vassal
				}
			}
			from = {
				set_subject_of = {
					who = none
				}
			}
		}
	}

	on_accept = {
		custom_tooltip = civil_war_won_tooltip
		add_monthly_resource_mult = {
			resource = unity
			value = @tier5materialreward
			min = @tier5materialmin
		}
		# This needs to be done to get rid of the "Rebels of" tag on the galactic map.
		hidden_effect = {
			from = {
				set_subject_of = {
					who = root
					subject_type = dummy_vassal
				}
			}
			from = {
				set_subject_of = {
					who = none
				}
			}
		}
	}

	ai_weight = {
		weight = 100
	}
}

wg_planet_rebellion_rebels = {
	casus_belli = cb_event

	hide_if_no_cb = yes
	total_war = no

	allowed_peace_offers = {
		status_quo
		surrender
		demand_surrender
	}

	surrender_acceptance = -400

	potential = {
		always = no # event only
	}
	possible = {
		always = yes
	}

	on_accept = {
		custom_tooltip = wg_humiliation_accept
		add_modifier = { modifier = humiliated days = 3600 }
		add_resource = { influence = 100 }
	}

	ai_weight = {
		weight = 100
	}
}

wg_admiral_rebellion = {
	casus_belli = cb_event

	hide_if_no_cb = yes
	set_defender_wargoal = wg_admiral_rebellion_admiral
	total_war = no

	allowed_peace_offers = {
		status_quo
		surrender
		demand_surrender
	}

	surrender_acceptance = -100

	potential = {
		always = no # event only
	}
	possible = {
		always = yes
	}

	on_accept = {
		custom_tooltip = civil_war_won_tooltip
		custom_tooltip = wg_admiral_rebellion_accept
		add_monthly_resource_mult = {
			resource = unity
			value = @tier5materialreward
			min = @tier5materialmin
		}
		hidden_effect = {
			save_event_target_as = beat_the_admiral
			from = {
				save_event_target_as = defeated_admiral
			}
			event_target:defeated_admiral = {
				while = {
					count = 100
					limit = {
						any_owned_fleet = {
							has_fleet_flag = civil_war_fleet
							owner = { is_same_value = event_target:defeated_admiral }
						}
					}
					random_owned_fleet = {
						limit = {
							has_fleet_flag = civil_war_fleet
							owner = { is_same_value = event_target:defeated_admiral }
						}
						fleet = { set_owner = event_target:beat_the_admiral }
					}
				}
				destroy_country = yes
			}
		}
	}

	on_wargoal_set = {
		random_war = {
			limit = {
				using_war_goal = {
					type = wg_admiral_rebellion
					owner = root
				}
			}
			every_war_participant = {
				limit = {
					has_country_flag = remove_fed_civil_war
					NOT = { is_war_leader = yes }
				}
				prev = {
					remove_war_participant = prev
				}
			}
		}
	}

	ai_weight = {
		weight = 100
	}
}

wg_admiral_rebellion_admiral = {
	casus_belli = cb_event

	hide_if_no_cb = yes
	total_war = no

	allowed_peace_offers = {
		status_quo
		surrender
		demand_surrender
	}

	surrender_acceptance = -500

	potential = {
		always = no # event only
	}
	possible = {
		always = yes
	}

	on_accept = {
		custom_tooltip = wg_humiliation_accept
		add_modifier = { modifier = humiliated days = 3600 }
		add_resource = { influence = 100 }
	}

	ai_weight = {
		weight = 100
	}
}

## Coup Wargoals

wg_coup_successor = {
	casus_belli = cb_event

	hide_if_no_cb = yes
	set_defender_wargoal = wg_coup_successor_opponent
	total_war = yes

	allowed_peace_offers = {
		status_quo
	}

	surrender_acceptance = -300

	potential = {
		always = no # event only
	}

	possible = {
		always = yes
	}

	on_wargoal_set = {
		while = {
			count = 10
			random_war = {
				limit = {
					using_war_goal = {
						type = wg_coup_successor
						owner = root
					}
				}
				every_war_participant = {
					limit = {
						has_country_flag = remove_fed_civil_war
						NOT = { is_war_leader = yes }
					}
					prev = {
						remove_war_participant = prev
					}
				}
			}
		}
	}

	ai_weight = {
		weight = 0
	}
}

wg_coup_successor_opponent = {
	casus_belli = cb_event

	hide_if_no_cb = yes
	total_war = yes

	allowed_peace_offers = {
		status_quo
	}

	surrender_acceptance = -300

	potential = {
		always = no # event only
	}
	possible = {
		always = yes
	}

	ai_weight = {
		weight = 100
	}
}

wg_coup_successor_mother = {
	casus_belli = cb_event

	hide_if_no_cb = yes
	set_defender_wargoal = wg_coup_successor_opponent_mother
	total_war = yes

	allowed_peace_offers = {
		# status_quo
	}

	surrender_acceptance = -300

	potential = {
		always = no # event only
	}

	possible = {
		always = yes
	}

	on_wargoal_set = {
		while = {
			count = 10
			random_war = {
				limit = {
					using_war_goal = {
						type = wg_coup_successor
						owner = root
					}
				}
				every_war_participant = {
					limit = {
						has_country_flag = remove_fed_civil_war
						NOT = { is_war_leader = yes }
					}
					prev = {
						remove_war_participant = prev
					}
				}
			}
		}
	}

	ai_weight = {
		weight = 0
	}
}

wg_coup_successor_opponent_mother = {
	casus_belli = cb_event

	hide_if_no_cb = yes
	total_war = yes

	allowed_peace_offers = {
		# status_quo
	}

	surrender_acceptance = -300

	potential = {
		always = no # event only
	}
	possible = {
		always = yes
	}

	on_accept = {
		custom_tooltip = civil_war_won_tooltip
		add_monthly_resource_mult = {
			resource = unity
			value = @tier5materialreward
			min = @tier5materialmin
		}
	}

	ai_weight = {
		weight = 100
	}
}

wg_coup_independent = {
	casus_belli = cb_event

	hide_if_no_cb = yes
	set_defender_wargoal = wg_coup_independent_opponent
	total_war = yes

	allowed_peace_offers = {
		status_quo
	}

	surrender_acceptance = -300

	potential = {
		always = no # event only
	}

	possible = {
		always = yes
	}

	on_wargoal_set = {
		while = {
			count = 10
			random_war = {
				limit = {
					using_war_goal = {
						type = wg_coup_independent
						owner = root
					}
				}
				every_war_participant = {
					limit = {
						has_country_flag = remove_fed_civil_war
						NOT = { is_war_leader = yes }
					}
					prev = {
						remove_war_participant = prev
					}
				}
			}
		}
		from = {
			every_system_within_border = {
				limit = {
					NOT = { root = { has_claim = prev } }
				}
				add_claims = { who = root }
			}
		}
	}

	on_accept = {
		custom_tooltip = civil_war_won_tooltip
		add_monthly_resource_mult = {
			resource = unity
			value = @tier5materialreward
			min = @tier5materialmin
		}
	}

	ai_weight = {
		weight = 0
	}
}

wg_coup_independent_opponent = {
	casus_belli = cb_event

	hide_if_no_cb = yes
	total_war = yes

	allowed_peace_offers = {
		status_quo
	}

	surrender_acceptance = -300

	potential = {
		always = no # event only
	}
	possible = {
		always = yes
	}

	ai_weight = {
		weight = 100
	}
}