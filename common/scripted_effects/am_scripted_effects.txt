moonrelocate_pop_effect = {
	remove_modifier = "pop_recently_conquered"
	remove_culture_shock = yes
	remove_modifier = recent_refugee
	planet = {
		random_moon = {
			limit = {
				is_colony = yes				
			}
			if = {
				limit = {
					exists = event_target:refugee_pop
				}
				resettle_pop = {
					pop = event_target:refugee_pop
					planet = this
				}
				event_target:refugee_pop = { 
					clear_pop_category = yes
				}
			}
		}
	}
}

kill_the_unemployed = {
	random_owned_pop = {
		limit = { is_unemployed = yes }
		kill_pop = yes
	}
}

kill_the_redundant = {
	random_owned_pop = {
		limit = {
			not = { has_job = job_technician }
			not = { has_job = job_miner }
			not = { has_job = job_farmer }
			not = { has_job = job_artisan }
		}
		kill_pop = yes
	}
}

set_random_healthcheck_flag = {
	random_list = {
		35 = {
			set_timed_planet_flag = {
				flag = pf_health_checked
				days = 95
			}
			add_modifier = {
				modifier = health_checking
				days = 95
			}
		}
		30 = {
			set_timed_planet_flag = {
				flag = pf_health_checked
				days = 185
			}
			add_modifier = {
				modifier = health_checking
				days = 185
			}
		}
		20 = {
			set_timed_planet_flag = {
				flag = pf_health_checked
				days = 725
			}
			add_modifier = {
				modifier = health_checking
				days = 725
			}
		}
		15 = {
			set_timed_planet_flag = {
				flag = pf_health_checked
				days = 365
			}
			add_modifier = {
				modifier = health_checking
				days = 365
			}
		}
	}
}

pseudo_terraforming = {
	random_owned_planet = {
		limit = {
			has_planet_flag = pf_pseudo_terraforming
		}
		if = {
			limit = {
				check_variable = {
					which = pvar_pterraf
					value > 6
				}
			}
			remove_planet_flag = pf_pseudo_terraforming
			if = { 
				limit = {
					is_colony = no
					is_terraforming = no
					is_under_colonization = no				
				}
				switch = {
					trigger = event_target:healthcheckedcountry = { capital_scope = { is_planet_class }}
					pc_desert = { change_pc = pc_desert }
					pc_arid = { change_pc = pc_arid }
					pc_savannah = { change_pc = pc_savannah }
					pc_arctic = { change_pc = pc_arctic }
					pc_tundra = { change_pc = pc_tundra }
					pc_alpine = { change_pc = pc_alpine }
					pc_continental = { change_pc = pc_continental }
					pc_ocean = { change_pc = pc_ocean }
					pc_tropical = { change_pc = pc_tropical }
				}
			}
			event_target:healthcheckedcountry = {
				change_variable = {
					which = cvar_pterrafcount
					value = -1
				}			
			}
		}
		else = {
			change_variable = {
				which = pvar_pterraf
				value = 1
			}
			event_target:healthcheckedcountry = {
				add_resource = { energy = -300 }
			}
		}
	}
	if = {
		limit = {
			event_target:healthcheckedcountry = {
				check_variable = {
					which = cvar_pterrafcount
					value < 2
				}			
			}
		}
		random_owned_planet = {
			limit = {
				is_colony = no
				is_colonizable = yes
				not = { has_planet_flag = pf_pseudo_terraforming }
				is_terraforming = no
				is_under_colonization = no
				not = { is_planet_class = pc_gaia }
				not = { is_planet_class = pc_nuked }
				is_ideal_planet_class = { who = event_target:healthcheckedcountry status = no }
			}
			set_planet_flag = pf_pseudo_terraforming
			event_target:healthcheckedcountry = {
				change_variable = {
					which = cvar_pterrafcount
					value = 1
				}			
			}
		}
	}
}

check_waste_management_bonus = {
	if = {
		limit = {
			not = { has_modifier = waste_not_want_not }
			has_waste_controlled = yes
		}
		add_modifier = {
			modifier = waste_not_want_not
			days = -1
		}
	}
	if = {
		limit = {
			has_modifier = waste_not_want_not
			has_waste_controlled = no
		}
		remove_modifier = waste_not_want_not		
	}
}