###############################################################
#                 Psionic Species Expension                   #
#                                         By: jasonpepe       #
###############################################################

effect_pse_deselect_other_main = {
	remove_country_flag = pse_power_leader_main_selected
	remove_country_flag = pse_power_shroud_main_selected
	remove_country_flag = pse_power_planet_main_selected
	remove_country_flag = pse_power_cleanse_main_selected
	remove_country_flag = pse_power_summon_main_selected
	remove_country_flag = pse_power_combat_main_selected
	remove_country_flag = pse_power_break_main_selected
	remove_country_flag = pse_power_galaxy_main_selected
	remove_country_flag = pse_power_chosen_main_selected
	
	remove_country_flag = pse_power_selected_one_of_them
}

effect_pse_deselect_other_power = {
	remove_country_flag = pse_power_leader_find_selected
	remove_country_flag = pse_power_leader_exp_up_selected
	remove_country_flag = pse_power_leader_tech_selected
	remove_country_flag = pse_power_leader_remove_negative_trait_selected
	remove_country_flag = pse_power_shroud_boon_selected
	remove_country_flag = pse_power_shroud_enter_selected
	remove_country_flag = pse_power_shroud_cause_left_selected
	remove_country_flag = pse_power_planet_unity_selected
	remove_country_flag = pse_power_planet_crime_selected
	remove_country_flag = pse_power_planet_ethic_selected
	remove_country_flag = pse_power_cleanse_psi_selected
	remove_country_flag = pse_power_cleanse_cap_selected
	remove_country_flag = pse_power_cleanse_zro_selected
	remove_country_flag = pse_power_summon_spacefaring_selected
	remove_country_flag = pse_power_summon_avatar_selected
	remove_country_flag = pse_power_summon_resource_selected
	remove_country_flag = pse_power_combat_boon_selected
	remove_country_flag = pse_power_combat_range_selected
	remove_country_flag = pse_power_combat_arc_selected
	remove_country_flag = pse_power_combat_ship_selected
	remove_country_flag = pse_power_break_unity_selected
	remove_country_flag = pse_power_break_stability_selected
	remove_country_flag = pse_power_break_building_selected
	remove_country_flag = pse_power_galaxy_storm_selected
	remove_country_flag = pse_power_galaxy_spacefaring_selected
	remove_country_flag = pse_power_galaxy_cause_selected
	remove_country_flag = pse_power_chosen_worship_selected
	remove_country_flag = pse_power_chosen_speed_selected
	remove_country_flag = pse_power_chosen_shroud_selected
	remove_country_flag = pse_power_chosen_backstab_selected
	remove_country_flag = pse_power_chosen_bomb_selected
}

effect_pse_remove_power_used_flag = {
	remove_country_flag = pse_power_leader_find_used_flag
	remove_country_flag = pse_power_leader_exp_up_used_flag
	remove_country_flag = pse_power_leader_tech_used_flag
	remove_country_flag = pse_power_leader_remove_negative_trait_used_flag
	remove_country_flag = pse_power_shroud_boon_used_flag
	remove_country_flag = pse_power_shroud_enter_used_flag
	remove_country_flag = pse_power_shroud_cause_left_used_flag
	remove_country_flag = pse_power_planet_unity_used_flag
	remove_country_flag = pse_power_planet_crime_used_flag
	remove_country_flag = pse_power_planet_ethic_used_flag
	remove_country_flag = pse_power_cleanse_psi_used_flag
	remove_country_flag = pse_power_cleanse_cap_used_flag
	remove_country_flag = pse_power_cleanse_zro_used_flag
	remove_country_flag = pse_power_summon_spacefaring_used_flag
	remove_country_flag = pse_power_summon_avatar_used_flag
	remove_country_flag = pse_power_summon_resource_used_flag
	remove_country_flag = pse_power_combat_boon_used_flag
	remove_country_flag = pse_power_combat_range_used_flag
	remove_country_flag = pse_power_combat_arc_used_flag
	remove_country_flag = pse_power_combat_ship_used_flag
	remove_country_flag = pse_power_break_unity_used_flag
	remove_country_flag = pse_power_break_stability_used_flag
	remove_country_flag = pse_power_break_building_used_flag
	remove_country_flag = pse_power_galaxy_storm_used_flag
	remove_country_flag = pse_power_galaxy_spacefaring_used_flag
	remove_country_flag = pse_power_galaxy_cause_used_flag
	remove_country_flag = pse_power_chosen_worship_used_flag
	remove_country_flag = pse_power_chosen_speed_used_flag
	remove_country_flag = pse_power_chosen_shroud_used_flag
	remove_country_flag = pse_power_chosen_backstab_used_flag
	remove_country_flag = pse_power_chosen_bomb_used_flag
}

effect_pse_reset_zro_discount_calc = {
    set_variable = {
		which = pse_zro_discount_count
		value = 0
	}
	set_variable = {
		which = pse_zro_cost_less_power_number
		value = 0
	}
	set_variable = {
		which = pse_zro_cost_num
		value = 0
	}
}

effect_pse_zro_discount_calc = {
	switch = {
		trigger = has_country_flag
		pse_power_leader_find_selected = { #Cost 50
			set_variable = {
				which = pse_power_cost
				value = 50
			}
			if = {
				limit = {
					NOT = {
						check_variable = {
							which = pse_zro_discount_count
							value > 0
						}
					}
				}
				set_variable = {
					which = pse_zro_cost_less_power_number
					value = 0
				}
			}
			if = {
				limit = {
					check_variable = {
						which = pse_zro_discount_count
						value = 1
					}
				}
				set_variable = {
					which = pse_zro_cost_less_power_number
					value = 5
				}
			}
			if = {
				limit = {
					check_variable = {
						which = pse_zro_discount_count
						value = 2
					}
				}
				set_variable = {
					which = pse_zro_cost_less_power_number
					value = 10
				}
			}
			if = {
				limit = {
					check_variable = {
						which = pse_zro_discount_count
						value = 3
					}
				}
				set_variable = {
					which = pse_zro_cost_less_power_number
					value = 15
				}
			}
		}
		pse_power_leader_exp_up_selected = { #Cost 40
			set_variable = {
				which = pse_power_cost
				value = 40
			}
			if = {
				limit = {
					NOT = {
						check_variable = {
							which = pse_zro_discount_count
							value > 0
						}
					}
				}
				set_variable = {
					which = pse_zro_cost_less_power_number
					value = 0
				}
			}
			if = {
				limit = {
					check_variable = {
						which = pse_zro_discount_count
						value = 1
					}
				}
				set_variable = {
					which = pse_zro_cost_less_power_number
					value = 4
				}
			}
			if = {
				limit = {
					check_variable = {
						which = pse_zro_discount_count
						value = 2
					}
				}
				set_variable = {
					which = pse_zro_cost_less_power_number
					value = 8
				}
			}
			if = {
				limit = {
					check_variable = {
						which = pse_zro_discount_count
						value = 3
					}
				}
				set_variable = {
					which = pse_zro_cost_less_power_number
					value = 12
				}
			}
		}
		pse_power_leader_tech_selected = { #cost 75
			set_variable = {
				which = pse_power_cost
				value = 75
			}
			if = {
				limit = {
					NOT = {
						check_variable = {
							which = pse_zro_discount_count
							value > 0
						}
					}
				}
				set_variable = {
					which = pse_zro_cost_less_power_number
					value = 0
				}
			}
			if = {
				limit = {
					check_variable = {
						which = pse_zro_discount_count
						value = 1
					}
				}
				set_variable = {
					which = pse_zro_cost_less_power_number
					value = 8
				}
			}
			if = {
				limit = {
					check_variable = {
						which = pse_zro_discount_count
						value = 2
					}
				}
				set_variable = {
					which = pse_zro_cost_less_power_number
					value = 15
				}
			}
			if = {
				limit = {
					check_variable = {
						which = pse_zro_discount_count
						value = 3
					}
				}
				set_variable = {
					which = pse_zro_cost_less_power_number
					value = 23
				}
			}
		}
		pse_power_leader_remove_negative_trait_selected = { #Cost 35
			set_variable = {
				which = pse_power_cost
				value = 35
			}
			if = {
				limit = {
					NOT = {
						check_variable = {
							which = pse_zro_discount_count
							value > 0
						}
					}
				}
				set_variable = {
					which = pse_zro_cost_less_power_number
					value = 0
				}
			}
			if = {
				limit = {
					check_variable = {
						which = pse_zro_discount_count
						value = 1
					}
				}
				set_variable = {
					which = pse_zro_cost_less_power_number
					value = 4
				}
			}
			if = {
				limit = {
					check_variable = {
						which = pse_zro_discount_count
						value = 2
					}
				}
				set_variable = {
					which = pse_zro_cost_less_power_number
					value = 7
				}
			}
			if = {
				limit = {
					check_variable = {
						which = pse_zro_discount_count
						value = 3
					}
				}
				set_variable = {
					which = pse_zro_cost_less_power_number
					value = 11
				}
			}
		}
		pse_power_shroud_boon_selected = { #cost 65 (7, 13, 20)
			set_variable = {
				which = pse_power_cost
				value = 65
			}
			if = {
				limit = {
					NOT = {
						check_variable = {
							which = pse_zro_discount_count
							value > 0
						}
					}
				}
				set_variable = {
					which = pse_zro_cost_less_power_number
					value = 0
				}
			}
			if = {
				limit = {
					check_variable = {
						which = pse_zro_discount_count
						value = 1
					}
				}
				set_variable = {
					which = pse_zro_cost_less_power_number
					value = 7
				}
			}
			if = {
				limit = {
					check_variable = {
						which = pse_zro_discount_count
						value = 2
					}
				}
				set_variable = {
					which = pse_zro_cost_less_power_number
					value = 13
				}
			}
			if = {
				limit = {
					check_variable = {
						which = pse_zro_discount_count
						value = 3
					}
				}
				set_variable = {
					which = pse_zro_cost_less_power_number
					value = 20
				}
			}
		}
		pse_power_shroud_enter_selected = { #cost 45 (5, 9, 14)
			set_variable = {
				which = pse_power_cost
				value = 45
			}
			if = {
				limit = {
					NOT = {
						check_variable = {
							which = pse_zro_discount_count
							value > 0
						}
					}
				}
				set_variable = {
					which = pse_zro_cost_less_power_number
					value = 0
				}
			}
			if = {
				limit = {
					check_variable = {
						which = pse_zro_discount_count
						value = 1
					}
				}
				set_variable = {
					which = pse_zro_cost_less_power_number
					value = 5
				}
			}
			if = {
				limit = {
					check_variable = {
						which = pse_zro_discount_count
						value = 2
					}
				}
				set_variable = {
					which = pse_zro_cost_less_power_number
					value = 9
				}
			}
			if = {
				limit = {
					check_variable = {
						which = pse_zro_discount_count
						value = 3
					}
				}
				set_variable = {
					which = pse_zro_cost_less_power_number
					value = 14
				}
			}
		}
		pse_power_shroud_cause_left_selected = { #cost 50 (5, 10, 15)
			set_variable = {
				which = pse_power_cost
				value = 50
			}
			if = {
				limit = {
					NOT = {
						check_variable = {
							which = pse_zro_discount_count
							value > 0
						}
					}
				}
				set_variable = {
					which = pse_zro_cost_less_power_number
					value = 0
				}
			}
			if = {
				limit = {
					check_variable = {
						which = pse_zro_discount_count
						value = 1
					}
				}
				set_variable = {
					which = pse_zro_cost_less_power_number
					value = 5
				}
			}
			if = {
				limit = {
					check_variable = {
						which = pse_zro_discount_count
						value = 2
					}
				}
				set_variable = {
					which = pse_zro_cost_less_power_number
					value = 10
				}
			}
			if = {
				limit = {
					check_variable = {
						which = pse_zro_discount_count
						value = 3
					}
				}
				set_variable = {
					which = pse_zro_cost_less_power_number
					value = 15
				}
			}
		}
		pse_power_planet_unity_selected = { #Cost 85 (9, 17, 26)
			set_variable = {
				which = pse_power_cost
				value = 85
			}
			if = {
				limit = {
					NOT = {
						check_variable = {
							which = pse_zro_discount_count
							value > 0
						}
					}
				}
				set_variable = {
					which = pse_zro_cost_less_power_number
					value = 0
				}
			}
			if = {
				limit = {
					check_variable = {
						which = pse_zro_discount_count
						value = 1
					}
				}
				set_variable = {
					which = pse_zro_cost_less_power_number
					value = 9
				}
			}
			if = {
				limit = {
					check_variable = {
						which = pse_zro_discount_count
						value = 2
					}
				}
				set_variable = {
					which = pse_zro_cost_less_power_number
					value = 17
				}
			}
			if = {
				limit = {
					check_variable = {
						which = pse_zro_discount_count
						value = 3
					}
				}
				set_variable = {
					which = pse_zro_cost_less_power_number
					value = 26
				}
			}
		}
		pse_power_planet_crime_selected = { #cost 70
			set_variable = {
				which = pse_power_cost
				value = 70
			}
			if = {
				limit = {
					NOT = {
						check_variable = {
							which = pse_zro_discount_count
							value > 0
						}
					}
				}
				set_variable = {
					which = pse_zro_cost_less_power_number
					value = 0
				}
			}
			if = {
				limit = {
					check_variable = {
						which = pse_zro_discount_count
						value = 1
					}
				}
				set_variable = {
					which = pse_zro_cost_less_power_number
					value = 7
				}
			}
			if = {
				limit = {
					check_variable = {
						which = pse_zro_discount_count
						value = 2
					}
				}
				set_variable = {
					which = pse_zro_cost_less_power_number
					value = 14
				}
			}
			if = {
				limit = {
					check_variable = {
						which = pse_zro_discount_count
						value = 3
					}
				}
				set_variable = {
					which = pse_zro_cost_less_power_number
					value = 21
				}
			}
		}
		pse_power_planet_ethic_selected = { #Cost 100
			set_variable = {
				which = pse_power_cost
				value = 100
			}
			if = {
				limit = {
					NOT = {
						check_variable = {
							which = pse_zro_discount_count
							value > 0
						}
					}
				}
				set_variable = {
					which = pse_zro_cost_less_power_number
					value = 0
				}
			}
			if = {
				limit = {
					check_variable = {
						which = pse_zro_discount_count
						value = 1
					}
				}
				set_variable = {
					which = pse_zro_cost_less_power_number
					value = 10
				}
			}
			if = {
				limit = {
					check_variable = {
						which = pse_zro_discount_count
						value = 2
					}
				}
				set_variable = {
					which = pse_zro_cost_less_power_number
					value = 20
				}
			}
			if = {
				limit = {
					check_variable = {
						which = pse_zro_discount_count
						value = 3
					}
				}
				set_variable = {
					which = pse_zro_cost_less_power_number
					value = 30
				}
			}
		}
		###CLEANSE SKIPPED AS NO ZRO CAN BE USED AS DISCOUNT

		pse_power_summon_spacefaring_selected = { #Cost 125 (13,25,38)
			set_variable = {
				which = pse_power_cost
				value = 125
			}
			if = {
				limit = {
					NOT = {
						check_variable = {
							which = pse_zro_discount_count
							value > 0
						}
					}
				}
				set_variable = {
					which = pse_zro_cost_less_power_number
					value = 0
				}
			}
			if = {
				limit = {
					check_variable = {
						which = pse_zro_discount_count
						value = 1
					}
				}
				set_variable = {
					which = pse_zro_cost_less_power_number
					value = 13
				}
			}
			if = {
				limit = {
					check_variable = {
						which = pse_zro_discount_count
						value = 2
					}
				}
				set_variable = {
					which = pse_zro_cost_less_power_number
					value = 25
				}
			}
			if = {
				limit = {
					check_variable = {
						which = pse_zro_discount_count
						value = 3
					}
				}
				set_variable = {
					which = pse_zro_cost_less_power_number
					value = 38
				}
			}
		}
		#
		pse_power_summon_avatar_selected = { #Cost 35 (4,7,11)
			set_variable = {
				which = pse_power_cost
				value = 35
			}
			if = {
				limit = {
					NOT = {
						check_variable = {
							which = pse_zro_discount_count
							value > 0
						}
					}
				}
				set_variable = {
					which = pse_zro_cost_less_power_number
					value = 0
				}
			}
			if = {
				limit = {
					check_variable = {
						which = pse_zro_discount_count
						value = 1
					}
				}
				set_variable = {
					which = pse_zro_cost_less_power_number
					value = 4
				}
			}
			if = {
				limit = {
					check_variable = {
						which = pse_zro_discount_count
						value = 2
					}
				}
				set_variable = {
					which = pse_zro_cost_less_power_number
					value = 7
				}
			}
			if = {
				limit = {
					check_variable = {
						which = pse_zro_discount_count
						value = 3
					}
				}
				set_variable = {
					which = pse_zro_cost_less_power_number
					value = 11
				}
			}
		}
		#
		pse_power_summon_resource_selected = { #Cost 95 (10,19,29)
			set_variable = {
				which = pse_power_cost
				value = 95
			}
			if = {
				limit = {
					NOT = {
						check_variable = {
							which = pse_zro_discount_count
							value > 0
						}
					}
				}
				set_variable = {
					which = pse_zro_cost_less_power_number
					value = 0
				}
			}
			if = {
				limit = {
					check_variable = {
						which = pse_zro_discount_count
						value = 1
					}
				}
				set_variable = {
					which = pse_zro_cost_less_power_number
					value = 10
				}
			}
			if = {
				limit = {
					check_variable = {
						which = pse_zro_discount_count
						value = 2
					}
				}
				set_variable = {
					which = pse_zro_cost_less_power_number
					value = 19
				}
			}
			if = {
				limit = {
					check_variable = {
						which = pse_zro_discount_count
						value = 3
					}
				}
				set_variable = {
					which = pse_zro_cost_less_power_number
					value = 29
				}
			}
		}
		#
		pse_power_combat_boon_selected = { #Cost 70 (7,14,21)
			set_variable = {
				which = pse_power_cost
				value = 70
			}
			if = {
				limit = {
					NOT = {
						check_variable = {
							which = pse_zro_discount_count
							value > 0
						}
					}
				}
				set_variable = {
					which = pse_zro_cost_less_power_number
					value = 0
				}
			}
			if = {
				limit = {
					check_variable = {
						which = pse_zro_discount_count
						value = 1
					}
				}
				set_variable = {
					which = pse_zro_cost_less_power_number
					value = 7
				}
			}
			if = {
				limit = {
					check_variable = {
						which = pse_zro_discount_count
						value = 2
					}
				}
				set_variable = {
					which = pse_zro_cost_less_power_number
					value = 14
				}
			}
			if = {
				limit = {
					check_variable = {
						which = pse_zro_discount_count
						value = 3
					}
				}
				set_variable = {
					which = pse_zro_cost_less_power_number
					value = 21
				}
			}
		}
		#
		pse_power_combat_range_selected = { #Cost 165 (17,33,50)
			set_variable = {
				which = pse_power_cost
				value = 165
			}
			if = {
				limit = {
					NOT = {
						check_variable = {
							which = pse_zro_discount_count
							value > 0
						}
					}
				}
				set_variable = {
					which = pse_zro_cost_less_power_number
					value = 0
				}
			}
			if = {
				limit = {
					check_variable = {
						which = pse_zro_discount_count
						value = 1
					}
				}
				set_variable = {
					which = pse_zro_cost_less_power_number
					value = 17
				}
			}
			if = {
				limit = {
					check_variable = {
						which = pse_zro_discount_count
						value = 2
					}
				}
				set_variable = {
					which = pse_zro_cost_less_power_number
					value = 33
				}
			}
			if = {
				limit = {
					check_variable = {
						which = pse_zro_discount_count
						value = 3
					}
				}
				set_variable = {
					which = pse_zro_cost_less_power_number
					value = 50
				}
			}
		}
		#
		pse_power_combat_arc_selected = { #Cost 150 (15,30,45)
			set_variable = {
				which = pse_power_cost
				value = 150
			}
			if = {
				limit = {
					NOT = {
						check_variable = {
							which = pse_zro_discount_count
							value > 0
						}
					}
				}
				set_variable = {
					which = pse_zro_cost_less_power_number
					value = 0
				}
			}
			if = {
				limit = {
					check_variable = {
						which = pse_zro_discount_count
						value = 1
					}
				}
				set_variable = {
					which = pse_zro_cost_less_power_number
					value = 15
				}
			}
			if = {
				limit = {
					check_variable = {
						which = pse_zro_discount_count
						value = 2
					}
				}
				set_variable = {
					which = pse_zro_cost_less_power_number
					value = 30
				}
			}
			if = {
				limit = {
					check_variable = {
						which = pse_zro_discount_count
						value = 3
					}
				}
				set_variable = {
					which = pse_zro_cost_less_power_number
					value = 45
				}
			}
		}
		#
		pse_power_combat_ship_selected = { #Cost 250 (25,50,75)
			set_variable = {
				which = pse_power_cost
				value = 250
			}
			if = {
				limit = {
					NOT = {
						check_variable = {
							which = pse_zro_discount_count
							value > 0
						}
					}
				}
				set_variable = {
					which = pse_zro_cost_less_power_number
					value = 0
				}
			}
			if = {
				limit = {
					check_variable = {
						which = pse_zro_discount_count
						value = 1
					}
				}
				set_variable = {
					which = pse_zro_cost_less_power_number
					value = 25
				}
			}
			if = {
				limit = {
					check_variable = {
						which = pse_zro_discount_count
						value = 2
					}
				}
				set_variable = {
					which = pse_zro_cost_less_power_number
					value = 50
				}
			}
			if = {
				limit = {
					check_variable = {
						which = pse_zro_discount_count
						value = 3
					}
				}
				set_variable = {
					which = pse_zro_cost_less_power_number
					value = 75
				}
			}
		}
		#
		pse_power_break_unity_selected = { #Cost 100 (10,20,30)
			set_variable = {
				which = pse_power_cost
				value = 100
			}
			if = {
				limit = {
					NOT = {
						check_variable = {
							which = pse_zro_discount_count
							value > 0
						}
					}
				}
				set_variable = {
					which = pse_zro_cost_less_power_number
					value = 0
				}
			}
			if = {
				limit = {
					check_variable = {
						which = pse_zro_discount_count
						value = 1
					}
				}
				set_variable = {
					which = pse_zro_cost_less_power_number
					value = 10
				}
			}
			if = {
				limit = {
					check_variable = {
						which = pse_zro_discount_count
						value = 2
					}
				}
				set_variable = {
					which = pse_zro_cost_less_power_number
					value = 20
				}
			}
			if = {
				limit = {
					check_variable = {
						which = pse_zro_discount_count
						value = 3
					}
				}
				set_variable = {
					which = pse_zro_cost_less_power_number
					value = 30
				}
			}
		}
		#
		pse_power_break_stability_selected = { #Cost 135 (14,27,41)
			set_variable = {
				which = pse_power_cost
				value = 135
			}
			if = {
				limit = {
					NOT = {
						check_variable = {
							which = pse_zro_discount_count
							value > 0
						}
					}
				}
				set_variable = {
					which = pse_zro_cost_less_power_number
					value = 0
				}
			}
			if = {
				limit = {
					check_variable = {
						which = pse_zro_discount_count
						value = 1
					}
				}
				set_variable = {
					which = pse_zro_cost_less_power_number
					value = 14
				}
			}
			if = {
				limit = {
					check_variable = {
						which = pse_zro_discount_count
						value = 2
					}
				}
				set_variable = {
					which = pse_zro_cost_less_power_number
					value = 27
				}
			}
			if = {
				limit = {
					check_variable = {
						which = pse_zro_discount_count
						value = 3
					}
				}
				set_variable = {
					which = pse_zro_cost_less_power_number
					value = 41
				}
			}
		}
		#
		pse_power_break_building_selected = { #Cost 175 (18,35,53)
			set_variable = {
				which = pse_power_cost
				value = 175
			}
			if = {
				limit = {
					NOT = {
						check_variable = {
							which = pse_zro_discount_count
							value > 0
						}
					}
				}
				set_variable = {
					which = pse_zro_cost_less_power_number
					value = 0
				}
			}
			if = {
				limit = {
					check_variable = {
						which = pse_zro_discount_count
						value = 1
					}
				}
				set_variable = {
					which = pse_zro_cost_less_power_number
					value = 18
				}
			}
			if = {
				limit = {
					check_variable = {
						which = pse_zro_discount_count
						value = 2
					}
				}
				set_variable = {
					which = pse_zro_cost_less_power_number
					value = 35
				}
			}
			if = {
				limit = {
					check_variable = {
						which = pse_zro_discount_count
						value = 3
					}
				}
				set_variable = {
					which = pse_zro_cost_less_power_number
					value = 53
				}
			}
		}
		#
		pse_power_galaxy_storm_selected = { #Cost 220 (22,44,66)
			set_variable = {
				which = pse_power_cost
				value = 220
			}
			if = {
				limit = {
					NOT = {
						check_variable = {
							which = pse_zro_discount_count
							value > 0
						}
					}
				}
				set_variable = {
					which = pse_zro_cost_less_power_number
					value = 0
				}
			}
			if = {
				limit = {
					check_variable = {
						which = pse_zro_discount_count
						value = 1
					}
				}
				set_variable = {
					which = pse_zro_cost_less_power_number
					value = 22
				}
			}
			if = {
				limit = {
					check_variable = {
						which = pse_zro_discount_count
						value = 2
					}
				}
				set_variable = {
					which = pse_zro_cost_less_power_number
					value = 44
				}
			}
			if = {
				limit = {
					check_variable = {
						which = pse_zro_discount_count
						value = 3
					}
				}
				set_variable = {
					which = pse_zro_cost_less_power_number
					value = 66
				}
			}
		}
		#
		pse_power_galaxy_spacefaring_selected = { #Cost 200 (20,40,60)
			set_variable = {
				which = pse_power_cost
				value = 200
			}
			if = {
				limit = {
					NOT = {
						check_variable = {
							which = pse_zro_discount_count
							value > 0
						}
					}
				}
				set_variable = {
					which = pse_zro_cost_less_power_number
					value = 0
				}
			}
			if = {
				limit = {
					check_variable = {
						which = pse_zro_discount_count
						value = 1
					}
				}
				set_variable = {
					which = pse_zro_cost_less_power_number
					value = 20
				}
			}
			if = {
				limit = {
					check_variable = {
						which = pse_zro_discount_count
						value = 2
					}
				}
				set_variable = {
					which = pse_zro_cost_less_power_number
					value = 40
				}
			}
			if = {
				limit = {
					check_variable = {
						which = pse_zro_discount_count
						value = 3
					}
				}
				set_variable = {
					which = pse_zro_cost_less_power_number
					value = 60
				}
			}
		}
		#
		pse_power_galaxy_cause_selected = { #Cost 130 (13,26,39)
			set_variable = {
				which = pse_power_cost
				value = 130
			}
			if = {
				limit = {
					NOT = {
						check_variable = {
							which = pse_zro_discount_count
							value > 0
						}
					}
				}
				set_variable = {
					which = pse_zro_cost_less_power_number
					value = 0
				}
			}
			if = {
				limit = {
					check_variable = {
						which = pse_zro_discount_count
						value = 1
					}
				}
				set_variable = {
					which = pse_zro_cost_less_power_number
					value = 13
				}
			}
			if = {
				limit = {
					check_variable = {
						which = pse_zro_discount_count
						value = 2
					}
				}
				set_variable = {
					which = pse_zro_cost_less_power_number
					value = 26
				}
			}
			if = {
				limit = {
					check_variable = {
						which = pse_zro_discount_count
						value = 3
					}
				}
				set_variable = {
					which = pse_zro_cost_less_power_number
					value = 39
				}
			}
		}

		#
		pse_power_chosen_worship_selected = { #Cost 215 (22,43,65)
			set_variable = {
				which = pse_power_cost
				value = 215
			}
			if = {
				limit = {
					NOT = {
						check_variable = {
							which = pse_zro_discount_count
							value > 0
						}
					}
				}
				set_variable = {
					which = pse_zro_cost_less_power_number
					value = 0
				}
			}
			if = {
				limit = {
					check_variable = {
						which = pse_zro_discount_count
						value = 1
					}
				}
				set_variable = {
					which = pse_zro_cost_less_power_number
					value = 22
				}
			}
			if = {
				limit = {
					check_variable = {
						which = pse_zro_discount_count
						value = 2
					}
				}
				set_variable = {
					which = pse_zro_cost_less_power_number
					value = 43
				}
			}
			if = {
				limit = {
					check_variable = {
						which = pse_zro_discount_count
						value = 3
					}
				}
				set_variable = {
					which = pse_zro_cost_less_power_number
					value = 65
				}
			}
		}
		#
		pse_power_chosen_speed_selected = { #Cost 280 (28,56,84)
			set_variable = {
				which = pse_power_cost
				value = 280
			}
			if = {
				limit = {
					NOT = {
						check_variable = {
							which = pse_zro_discount_count
							value > 0
						}
					}
				}
				set_variable = {
					which = pse_zro_cost_less_power_number
					value = 0
				}
			}
			if = {
				limit = {
					check_variable = {
						which = pse_zro_discount_count
						value = 1
					}
				}
				set_variable = {
					which = pse_zro_cost_less_power_number
					value = 28
				}
			}
			if = {
				limit = {
					check_variable = {
						which = pse_zro_discount_count
						value = 2
					}
				}
				set_variable = {
					which = pse_zro_cost_less_power_number
					value = 56
				}
			}
			if = {
				limit = {
					check_variable = {
						which = pse_zro_discount_count
						value = 3
					}
				}
				set_variable = {
					which = pse_zro_cost_less_power_number
					value = 84
				}
			}
		}
		#
		pse_power_chosen_shroud_selected = { #Cost 60 (6,12,18)
			set_variable = {
				which = pse_power_cost
				value = 60
			}
			if = {
				limit = {
					NOT = {
						check_variable = {
							which = pse_zro_discount_count
							value > 0
						}
					}
				}
				set_variable = {
					which = pse_zro_cost_less_power_number
					value = 0
				}
			}
			if = {
				limit = {
					check_variable = {
						which = pse_zro_discount_count
						value = 1
					}
				}
				set_variable = {
					which = pse_zro_cost_less_power_number
					value = 6
				}
			}
			if = {
				limit = {
					check_variable = {
						which = pse_zro_discount_count
						value = 2
					}
				}
				set_variable = {
					which = pse_zro_cost_less_power_number
					value = 12
				}
			}
			if = {
				limit = {
					check_variable = {
						which = pse_zro_discount_count
						value = 3
					}
				}
				set_variable = {
					which = pse_zro_cost_less_power_number
					value = 18
				}
			}
		}
		#
		pse_power_chosen_backstab_selected = { #Cost 240 (24,48,72)
			set_variable = {
				which = pse_power_cost
				value = 240
			}
			if = {
				limit = {
					NOT = {
						check_variable = {
							which = pse_zro_discount_count
							value > 0
						}
					}
				}
				set_variable = {
					which = pse_zro_cost_less_power_number
					value = 0
				}
			}
			if = {
				limit = {
					check_variable = {
						which = pse_zro_discount_count
						value = 1
					}
				}
				set_variable = {
					which = pse_zro_cost_less_power_number
					value = 24
				}
			}
			if = {
				limit = {
					check_variable = {
						which = pse_zro_discount_count
						value = 2
					}
				}
				set_variable = {
					which = pse_zro_cost_less_power_number
					value = 48
				}
			}
			if = {
				limit = {
					check_variable = {
						which = pse_zro_discount_count
						value = 3
					}
				}
				set_variable = {
					which = pse_zro_cost_less_power_number
					value = 72
				}
			}
		}
		#
		pse_power_chosen_bomb_selected = { #Cost 300 (30,60,90)
			set_variable = {
				which = pse_power_cost
				value = 300
			}
			if = {
				limit = {
					NOT = {
						check_variable = {
							which = pse_zro_discount_count
							value > 0
						}
					}
				}
				set_variable = {
					which = pse_zro_cost_less_power_number
					value = 0
				}
			}
			if = {
				limit = {
					check_variable = {
						which = pse_zro_discount_count
						value = 1
					}
				}
				set_variable = {
					which = pse_zro_cost_less_power_number
					value = 30
				}
			}
			if = {
				limit = {
					check_variable = {
						which = pse_zro_discount_count
						value = 2
					}
				}
				set_variable = {
					which = pse_zro_cost_less_power_number
					value = 60
				}
			}
			if = {
				limit = {
					check_variable = {
						which = pse_zro_discount_count
						value = 3
					}
				}
				set_variable = {
					which = pse_zro_cost_less_power_number
					value = 90
				}
			}
		}
	}
	subtract_variable = {
		which = pse_power_cost
		value = pse_zro_cost_less_power_number
	}
	set_variable = {
		which = pse_zro_cost_num
		value = pse_zro_cost_less_power_number
	}
	multiply_variable = {
		which = pse_zro_cost_num
		value = 10
	}
	country_event = { #Calc require power cost
		id = pse.2004
	}
}



pse_monthly_power_calc = {
	set_variable = {
		which = pse_monthly_power
		value = 0
	}
	if = {
		limit = {
			check_variable = {
				which = pse_power
				value < 0
			}
		}
		set_variable = {
			which = pse_power
			value = 0
		}
	}
	
	#BASE
	change_variable = {
		which = pse_power
		value = 0.5
	}
	change_variable = {
		which = pse_monthly_power
		value = 0.5
	}
	if = { #RULER WITH LATENT PSIONIC
		limit = {
			leader = {
				leader_class = ruler
				NOR = {
					has_trait = leader_trait_ruler_chosen
					has_trait = leader_trait_ruler_psionic
				}
				species = {
					has_trait = trait_latent_psionic
					NOT = {
						has_trait = trait_psionic
					}
				}
			}
		}
		change_variable = {
			which = pse_power
			value = 0.25
		}
		change_variable = {
			which = pse_monthly_power
			value = 0.25
		}
	}
	if = { #RULER WITH PSIONIC
		limit = {
			leader = {
				leader_class = ruler
				has_trait = leader_trait_ruler_psionic
				NOT = {
					has_trait = leader_trait_ruler_chosen
				}
			}
		}
		change_variable = {
			which = pse_power
			value = 0.5
		}
		change_variable = {
			which = pse_monthly_power
			value = 0.5
		}
	}
	if = { #RULER IS CHOSEN ONE
		limit = {
			leader = {
				leader_class = ruler
				has_trait = leader_trait_ruler_chosen
			}
			NOT = {
				has_country_flag = pse_power_chosen_shroud_nevermind
			}
		}
		change_variable = {
			which = pse_power
			value = 3
		}
		change_variable = {
			which = pse_monthly_power
			value = 3
		}
	}
	if = { #Peak
		limit = {
			has_ascension_perk = ap_mind_over_matter
		}
		change_variable = {
			which = pse_power
			value = 0.5
		}
		change_variable = {
			which = pse_monthly_power
			value = 0.5
		}
	}
	if = { #Peak
		limit = {
			has_ascension_perk = ap_transcendence
		}
		change_variable = {
			which = pse_power
			value = 0.5
		}
		change_variable = {
			which = pse_monthly_power
			value = 0.5
		}
	}
	if = { #edict
		limit = {
			has_edict = pse_psi_power
		}
		change_variable = {
			which = pse_power
			value = 0.75
		}
		change_variable = {
			which = pse_monthly_power
			value = 0.75
		}
	}
	if = { #LEADER WITH PSI
		limit = {
			check_variable = {
				which = pse_leader_num
				value > 9
			}
		}
		change_variable = {
			which = pse_power
			value = 0.25
		}
		change_variable = {
			which = pse_monthly_power
			value = 0.25
		}
	}
	if = { #LEADER WITH PSI
		limit = {
			check_variable = {
				which = pse_leader_num
				value > 19
			}
		}
		change_variable = {
			which = pse_power
			value = 0.25
		}
		change_variable = {
			which = pse_monthly_power
			value = 0.25
		}
	}
	if = { #TELEPATH JOBS
		limit = {
			num_assigned_jobs = {
				job = telepath
				value > 3
			}
			num_assigned_jobs = {
				job = telepath
				value < 8
			}
		}
		change_variable = {
			which = pse_power
			value = 0.25
		}
		change_variable = {
			which = pse_monthly_power
			value = 0.25
		}
	}
	if = { #TELEPATH JOBS
		limit = {
			num_assigned_jobs = {
				job = telepath
				value > 7
			}
			num_assigned_jobs = {
				job = telepath
				value < 12
			}
		}
		change_variable = {
			which = pse_power
			value = 0.5
		}
		change_variable = {
			which = pse_monthly_power
			value = 0.5
		}
	}
	if = { #TELEPATH JOBS
		limit = {
			num_assigned_jobs = {
				job = telepath
				value > 11
			}
			num_assigned_jobs = {
				job = telepath
				value < 16
			}
		}
		change_variable = {
			which = pse_power
			value = 0.75
		}
		change_variable = {
			which = pse_monthly_power
			value = 0.75
		}
	}
	if = { #TELEPATH JOBS
		limit = {
			num_assigned_jobs = {
				job = telepath
				value > 15
			}
		}
		change_variable = {
			which = pse_power
			value = 1
		}
		change_variable = {
			which = pse_monthly_power
			value = 1
		}
	}
	if = { #TECH
		limit = {
			has_technology = tech_pse_power_1
		}
		change_variable = {
			which = pse_power
			value = 0.5
		}
		change_variable = {
			which = pse_monthly_power
			value = 0.5
		}
	}
	if = { #TECH
		limit = {
			has_technology = tech_pse_power_2
		}
		change_variable = {
			which = pse_power
			value = 0.25
		}
		change_variable = {
			which = pse_monthly_power
			value = 0.25
		}
	}
	if = { #TECH
		limit = {
			has_technology = tech_pse_power_3
		}
		change_variable = {
			which = pse_power
			value = 0.5
		}
		change_variable = {
			which = pse_monthly_power
			value = 0.5
		}
	}
	if = { #TECH
		limit = {
			has_technology = tech_pse_circle_1
			check_variable = {
				which = pse_corruption
				value < 0.01
			}
		}
		change_variable = {
			which = pse_power
			value = 2
		}
		change_variable = {
			which = pse_monthly_power
			value = 2
		}
	}
	if = { #Don't go beyond the cap
		limit = {
			check_variable = {
				which = pse_power
				value > pse_power_cap
			}
		}
		set_variable = {
			which = pse_power
			value = pse_power_cap
		}
	}
}

pse_power_cap_calc = {
	set_variable = { #Base
		which = pse_power_cap
		value = 50
	}


	

	if = { #RULER WITH LATENT PSIONIC
		limit = {
			leader = {
				leader_class = ruler
				NOR = {
					has_trait = leader_trait_ruler_chosen
					has_trait = leader_trait_ruler_psionic
				}
				species = {
					has_trait = trait_latent_psionic
					NOT = {
						has_trait = trait_psionic
					}
				}
			}
		}
		change_variable = {
			which = pse_power_cap
			value = 10
		}
	}
	if = { #RULER WITH PSIONIC
		limit = {
			leader = {
				leader_class = ruler
				has_trait = leader_trait_ruler_psionic
				NOT = {
					has_trait = leader_trait_ruler_chosen
				}
			}
		}
		change_variable = {
			which = pse_power_cap
			value = 25
		}
	}
	if = { #RULER IS CHOSEN ONE
		limit = {
			leader = {
				leader_class = ruler
				has_trait = leader_trait_ruler_chosen
			}
			NOT = {
				has_country_flag = pse_power_chosen_shroud_nevermind
			}
		}
		change_variable = {
			which = pse_power_cap
			value = 150
		}
	}
	while = { #LEADER WITH PSI
		count = pse_leader_num
		change_variable = {
			which = pse_power_cap
			value = 1.25
		}
	}

	while = { #TELEPATH JOBS
		count = pse_telepath_num
		change_variable = {
			which = pse_power_cap
			value = 5
		}
	}

	

	if = { #TECH
		limit = {
			has_technology = tech_pse_power_1
		}
		change_variable = {
			which = pse_power_cap
			value = 15
		}
	}
	if = { #TECH
		limit = {
			has_technology = tech_pse_power_2
		}
		change_variable = {
			which = pse_power_cap
			value = 30
		}
	}
	if = { #TECH
		limit = {
			has_technology = tech_pse_power_3
		}
		change_variable = {
			which = pse_power_cap
			value = 30
		}
	}
	set_variable = {
		which = pse_psionic_pop_num
		value = pse_psionic_pop
	}
	divide_variable = {
		which = pse_psionic_pop_num
		value = 50
	}
	while = {
		count = 100
		limit = {
			check_variable = {
				which = pse_psionic_pop_num
				value > 0
			}
		}
		change_variable = {
			which = pse_psionic_pop_num
			value = -1
		}
		change_variable = {
			which = pse_power_cap
			value = 1.5
		}
	}

	set_variable = {
		which = pse_max_power_cap_num
		value = pse_power_cap
	}

	divide_variable = {
		which = pse_max_power_cap_num
		value = 1.25
	}

	if = { #CLEANSE POWER CAP
		limit = {
			has_country_flag = pse_power_cleanse_cap_cooldown
		}
		change_variable = {
			which = pse_power_cap
			value = -35
		}
	}

	while = { #COOLDOWN POWERS
		count = pse_cooldown_power_count
		change_variable = {
			which = pse_power_cap
			value = -15
		}
	}

	if = { #If power cap drops to 0
		limit = {
			check_variable = {
				which = pse_power_cap
				value < 0
			}
		}
		set_variable = {
			which = pse_power_cap
			value = 0
		}
	}
}

pse_cost_pre_use_power_clac = {
	set_variable = {
		which = pse_power_text_message
		value = pse_power_cost
	}
	subtract_variable = {
		which = pse_power_text_message
		value = pse_power
	}
}
pse_cost_pre_use_power_clac_reset = {
	set_variable = {
		which = pse_power_text_message
		value = 0
	}
	set_variable = {
		which = pse_power_cost
		value = 0
	}
}

pse_power_leader_tech_effect = {
	if = {
		limit = {
			is_researching_area = physics
			OR = {
				AND = {
					has_trait = leader_trait_expertise_computing
					OR = {
						has_trait = leader_trait_expertise_field_manipulation
						has_trait = leader_trait_expertise_particles
					}
				}
				AND = {
					has_trait = leader_trait_expertise_field_manipulation
					OR = {
						has_trait = leader_trait_expertise_computing
						has_trait = leader_trait_expertise_particles
					}
				}
				AND = {
					has_trait = leader_trait_expertise_particles
					OR = {
						has_trait = leader_trait_expertise_computing
						has_trait = leader_trait_expertise_field_manipulation
					}
				}
			}
		}
		set_leader_flag = pse_scientist_leader_has_mulit_physics_expert
	}
	if = {
		limit = {
			is_researching_area = society
			OR = {
				AND = {
					has_trait = leader_trait_expertise_biology
					OR = {
						has_trait = leader_trait_expertise_military_theory
						has_trait = leader_trait_expertise_new_worlds
						has_trait = leader_trait_expertise_statecraft
						has_trait = leader_trait_expertise_psionics
						has_trait = leader_trait_expertise_good_trading
					}
				}
				AND = {
					has_trait = leader_trait_expertise_military_theory
					OR = {
						has_trait = leader_trait_expertise_biology
						has_trait = leader_trait_expertise_new_worlds
						has_trait = leader_trait_expertise_statecraft
						has_trait = leader_trait_expertise_psionics
						has_trait = leader_trait_expertise_good_trading
					}
				}
				AND = {
					has_trait = leader_trait_expertise_new_worlds
					OR = {
						has_trait = leader_trait_expertise_biology
						has_trait = leader_trait_expertise_military_theory
						has_trait = leader_trait_expertise_statecraft
						has_trait = leader_trait_expertise_psionics
						has_trait = leader_trait_expertise_good_trading
					}
				}
				AND = {
					has_trait = leader_trait_expertise_statecraft
					OR = {
						has_trait = leader_trait_expertise_biology
						has_trait = leader_trait_expertise_military_theory
						has_trait = leader_trait_expertise_new_worlds
						has_trait = leader_trait_expertise_psionics
						has_trait = leader_trait_expertise_good_trading
					}
				}
				AND = {
					has_trait = leader_trait_expertise_psionics
					OR = {
						has_trait = leader_trait_expertise_biology
						has_trait = leader_trait_expertise_military_theory
						has_trait = leader_trait_expertise_new_worlds
						has_trait = leader_trait_expertise_statecraft
						has_trait = leader_trait_expertise_good_trading
					}
				}
				AND = {
					has_trait = leader_trait_expertise_good_trading
					OR = {
						has_trait = leader_trait_expertise_biology
						has_trait = leader_trait_expertise_military_theory
						has_trait = leader_trait_expertise_new_worlds
						has_trait = leader_trait_expertise_statecraft
						has_trait = leader_trait_expertise_psionics
					}
				}
			}
		}
		set_leader_flag = pse_scientist_leader_has_mulit_society_expert
	}
	if = {
		limit = {
			is_researching_area = engineering
			OR = {
				AND = {
					has_trait = leader_trait_expertise_industry
					OR = {
						has_trait = leader_trait_expertise_materials
						has_trait = leader_trait_expertise_propulsion
						has_trait = leader_trait_expertise_voidcraft
					}
				}
				AND = {
					has_trait = leader_trait_expertise_materials
					OR = {
						has_trait = leader_trait_expertise_industry
						has_trait = leader_trait_expertise_propulsion
						has_trait = leader_trait_expertise_voidcraft
					}
				}
				AND = {
					has_trait = leader_trait_expertise_propulsion
					OR = {
						has_trait = leader_trait_expertise_industry
						has_trait = leader_trait_expertise_materials
						has_trait = leader_trait_expertise_voidcraft
					}
				}
				AND = {
					has_trait = leader_trait_expertise_voidcraft
					OR = {
						has_trait = leader_trait_expertise_industry
						has_trait = leader_trait_expertise_materials
						has_trait = leader_trait_expertise_propulsion
					}
				}
			}
		}
		set_leader_flag = pse_scientist_leader_has_mulit_engineering_expert
	}
}

effect_pse_power_cooldown_3_years = { #POWER_MAIN, #POWER_NAME
	set_timed_country_flag = {
		flag = pse_power_$POWER_MAIN$_$POWER_NAME$_cooldown_1080
		days = 360
	}
	set_timed_country_flag = {
		flag = pse_power_$POWER_MAIN$_$POWER_NAME$_cooldown_1440
		days = 720
	}
	set_timed_country_flag = {
		flag = pse_power_$POWER_MAIN$_$POWER_NAME$_cooldown_1470
		days = 750
	}
	set_timed_country_flag = {
		flag = pse_power_$POWER_MAIN$_$POWER_NAME$_cooldown_1500
		days = 780
	}
	set_timed_country_flag = {
		flag = pse_power_$POWER_MAIN$_$POWER_NAME$_cooldown_1530
		days = 810
	}
	set_timed_country_flag = {
		flag = pse_power_$POWER_MAIN$_$POWER_NAME$_cooldown_1560
		days = 840
	}
	set_timed_country_flag = {
		flag = pse_power_$POWER_MAIN$_$POWER_NAME$_cooldown_1590
		days = 870
	}
	set_timed_country_flag = {
		flag = pse_power_$POWER_MAIN$_$POWER_NAME$_cooldown_1620
		days = 900
	}
	set_timed_country_flag = {
		flag = pse_power_$POWER_MAIN$_$POWER_NAME$_cooldown_1650
		days = 930
	}
	set_timed_country_flag = {
		flag = pse_power_$POWER_MAIN$_$POWER_NAME$_cooldown_1680
		days = 960
	}
	set_timed_country_flag = {
		flag = pse_power_$POWER_MAIN$_$POWER_NAME$_cooldown_1710
		days = 990
	}
	set_timed_country_flag = {
		flag = pse_power_$POWER_MAIN$_$POWER_NAME$_cooldown_1740
		days = 1020
	}
	set_timed_country_flag = {
		flag = pse_power_$POWER_MAIN$_$POWER_NAME$_cooldown_1770
		days = 1050
	}
	set_timed_country_flag = {
		flag = pse_power_$POWER_MAIN$_$POWER_NAME$_cooldown_1800
		days = 1080
	}
	country_event = { #count back cooldown power number
		id = pse.2007
		days = 1080
	}
}

effect_pse_power_cooldown_5_years = { #POWER_MAIN, #POWER_NAME
	set_timed_country_flag = {
		flag = pse_power_$POWER_MAIN$_$POWER_NAME$_cooldown_360
		days = 360
	}
	set_timed_country_flag = {
		flag = pse_power_$POWER_MAIN$_$POWER_NAME$_cooldown_720
		days = 720
	}
	set_timed_country_flag = {
		flag = pse_power_$POWER_MAIN$_$POWER_NAME$_cooldown_1080
		days = 1080
	}
	set_timed_country_flag = {
		flag = pse_power_$POWER_MAIN$_$POWER_NAME$_cooldown_1440
		days = 1440
	}
	set_timed_country_flag = {
		flag = pse_power_$POWER_MAIN$_$POWER_NAME$_cooldown_1470
		days = 1470
	}
	set_timed_country_flag = {
		flag = pse_power_$POWER_MAIN$_$POWER_NAME$_cooldown_1500
		days = 1500
	}
	set_timed_country_flag = {
		flag = pse_power_$POWER_MAIN$_$POWER_NAME$_cooldown_1530
		days = 1530
	}
	set_timed_country_flag = {
		flag = pse_power_$POWER_MAIN$_$POWER_NAME$_cooldown_1560
		days = 1560
	}
	set_timed_country_flag = {
		flag = pse_power_$POWER_MAIN$_$POWER_NAME$_cooldown_1590
		days = 1590
	}
	set_timed_country_flag = {
		flag = pse_power_$POWER_MAIN$_$POWER_NAME$_cooldown_1620
		days = 1620
	}
	set_timed_country_flag = {
		flag = pse_power_$POWER_MAIN$_$POWER_NAME$_cooldown_1650
		days = 1650
	}
	set_timed_country_flag = {
		flag = pse_power_$POWER_MAIN$_$POWER_NAME$_cooldown_1680
		days = 1680
	}
	set_timed_country_flag = {
		flag = pse_power_$POWER_MAIN$_$POWER_NAME$_cooldown_1710
		days = 1710
	}
	set_timed_country_flag = {
		flag = pse_power_$POWER_MAIN$_$POWER_NAME$_cooldown_1740
		days = 1740
	}
	set_timed_country_flag = {
		flag = pse_power_$POWER_MAIN$_$POWER_NAME$_cooldown_1770
		days = 1770
	}
	set_timed_country_flag = {
		flag = pse_power_$POWER_MAIN$_$POWER_NAME$_cooldown_1800
		days = 1800
	}
	country_event = { #count back cooldown power number
		id = pse.2007
		days = 1800
	}
}


effect_pse_power_cooldown_10_years = { #POWER_MAIN, #POWER_NAME
	set_timed_country_flag = {
		flag = pse_power_$POWER_MAIN$_$POWER_NAME$_cooldown_extra_1_years
		days = 360
	}
	set_timed_country_flag = {
		flag = pse_power_$POWER_MAIN$_$POWER_NAME$_cooldown_extra_2_years
		days = 720
	}
	set_timed_country_flag = {
		flag = pse_power_$POWER_MAIN$_$POWER_NAME$_cooldown_extra_3_years
		days = 1080
	}
	set_timed_country_flag = {
		flag = pse_power_$POWER_MAIN$_$POWER_NAME$_cooldown_extra_4_years
		days = 1440
	}
	set_timed_country_flag = {
		flag = pse_power_$POWER_MAIN$_$POWER_NAME$_cooldown_extra_5_years
		days = 1800
	}
	set_timed_country_flag = {
		flag = pse_power_$POWER_MAIN$_$POWER_NAME$_cooldown_360
		days = 2160
	}
	set_timed_country_flag = {
		flag = pse_power_$POWER_MAIN$_$POWER_NAME$_cooldown_720
		days = 2520
	}
	set_timed_country_flag = {
		flag = pse_power_$POWER_MAIN$_$POWER_NAME$_cooldown_1080
		days = 2880
	}
	set_timed_country_flag = {
		flag = pse_power_$POWER_MAIN$_$POWER_NAME$_cooldown_1440
		days = 3240
	}
	set_timed_country_flag = {
		flag = pse_power_$POWER_MAIN$_$POWER_NAME$_cooldown_1470
		days = 3270
	}
	set_timed_country_flag = {
		flag = pse_power_$POWER_MAIN$_$POWER_NAME$_cooldown_1500
		days = 3300
	}
	set_timed_country_flag = {
		flag = pse_power_$POWER_MAIN$_$POWER_NAME$_cooldown_1530
		days = 3330
	}
	set_timed_country_flag = {
		flag = pse_power_$POWER_MAIN$_$POWER_NAME$_cooldown_1560
		days = 3360
	}
	set_timed_country_flag = {
		flag = pse_power_$POWER_MAIN$_$POWER_NAME$_cooldown_1590
		days = 3390
	}
	set_timed_country_flag = {
		flag = pse_power_$POWER_MAIN$_$POWER_NAME$_cooldown_1620
		days = 3420
	}
	set_timed_country_flag = {
		flag = pse_power_$POWER_MAIN$_$POWER_NAME$_cooldown_1650
		days = 3450
	}
	set_timed_country_flag = {
		flag = pse_power_$POWER_MAIN$_$POWER_NAME$_cooldown_1680
		days = 3480
	}
	set_timed_country_flag = {
		flag = pse_power_$POWER_MAIN$_$POWER_NAME$_cooldown_1710
		days = 3510
	}
	set_timed_country_flag = {
		flag = pse_power_$POWER_MAIN$_$POWER_NAME$_cooldown_1740
		days = 3540
	}
	set_timed_country_flag = {
		flag = pse_power_$POWER_MAIN$_$POWER_NAME$_cooldown_1770
		days = 3570
	}
	set_timed_country_flag = {
		flag = pse_power_$POWER_MAIN$_$POWER_NAME$_cooldown_1800
		days = 3600
	}
	country_event = { #count back cooldown power number
		id = pse.2007
		days = 3600
	}
}

effect_pse_power_cooldown_20_years = { #POWER_MAIN, #POWER_NAME
	set_timed_country_flag = {
		flag = pse_power_$POWER_MAIN$_$POWER_NAME$_cooldown_extra_100_years
		days = 360
	}
	set_timed_country_flag = {
		flag = pse_power_$POWER_MAIN$_$POWER_NAME$_cooldown_extra_200_years
		days = 720
	}
	set_timed_country_flag = {
		flag = pse_power_$POWER_MAIN$_$POWER_NAME$_cooldown_extra_300_years
		days = 1080
	}
	set_timed_country_flag = {
		flag = pse_power_$POWER_MAIN$_$POWER_NAME$_cooldown_extra_400_years
		days = 1440
	}
	set_timed_country_flag = {
		flag = pse_power_$POWER_MAIN$_$POWER_NAME$_cooldown_extra_500_years
		days = 1800
	}
	set_timed_country_flag = {
		flag = pse_power_$POWER_MAIN$_$POWER_NAME$_cooldown_extra_10_years
		days = 2160
	}
	set_timed_country_flag = {
		flag = pse_power_$POWER_MAIN$_$POWER_NAME$_cooldown_extra_20_years
		days = 2520
	}
	set_timed_country_flag = {
		flag = pse_power_$POWER_MAIN$_$POWER_NAME$_cooldown_extra_30_years
		days = 2880
	}
	set_timed_country_flag = {
		flag = pse_power_$POWER_MAIN$_$POWER_NAME$_cooldown_extra_40_years
		days = 3240
	}
	set_timed_country_flag = {
		flag = pse_power_$POWER_MAIN$_$POWER_NAME$_cooldown_extra_50_years
		days = 3600
	}
	set_timed_country_flag = {
		flag = pse_power_$POWER_MAIN$_$POWER_NAME$_cooldown_extra_1_years
		days = 3960
	}
	set_timed_country_flag = {
		flag = pse_power_$POWER_MAIN$_$POWER_NAME$_cooldown_extra_2_years
		days = 4320
	}
	set_timed_country_flag = {
		flag = pse_power_$POWER_MAIN$_$POWER_NAME$_cooldown_extra_3_years
		days = 4680
	}
	set_timed_country_flag = {
		flag = pse_power_$POWER_MAIN$_$POWER_NAME$_cooldown_extra_4_years
		days = 5040
	}
	set_timed_country_flag = {
		flag = pse_power_$POWER_MAIN$_$POWER_NAME$_cooldown_extra_5_years
		days = 5400
	}
	set_timed_country_flag = {
		flag = pse_power_$POWER_MAIN$_$POWER_NAME$_cooldown_360
		days = 5760
	}
	set_timed_country_flag = {
		flag = pse_power_$POWER_MAIN$_$POWER_NAME$_cooldown_720
		days = 6120
	}
	set_timed_country_flag = {
		flag = pse_power_$POWER_MAIN$_$POWER_NAME$_cooldown_1080
		days = 6480
	}
	set_timed_country_flag = {
		flag = pse_power_$POWER_MAIN$_$POWER_NAME$_cooldown_1440
		days = 6840
	}
	set_timed_country_flag = {
		flag = pse_power_$POWER_MAIN$_$POWER_NAME$_cooldown_1470
		days = 6870
	}
	set_timed_country_flag = {
		flag = pse_power_$POWER_MAIN$_$POWER_NAME$_cooldown_1500
		days = 6900
	}
	set_timed_country_flag = {
		flag = pse_power_$POWER_MAIN$_$POWER_NAME$_cooldown_1530
		days = 6930
	}
	set_timed_country_flag = {
		flag = pse_power_$POWER_MAIN$_$POWER_NAME$_cooldown_1560
		days = 6960
	}
	set_timed_country_flag = {
		flag = pse_power_$POWER_MAIN$_$POWER_NAME$_cooldown_1590
		days = 6990
	}
	set_timed_country_flag = {
		flag = pse_power_$POWER_MAIN$_$POWER_NAME$_cooldown_1620
		days = 7020
	}
	set_timed_country_flag = {
		flag = pse_power_$POWER_MAIN$_$POWER_NAME$_cooldown_1650
		days = 7050
	}
	set_timed_country_flag = {
		flag = pse_power_$POWER_MAIN$_$POWER_NAME$_cooldown_1680
		days = 7080
	}
	set_timed_country_flag = {
		flag = pse_power_$POWER_MAIN$_$POWER_NAME$_cooldown_1710
		days = 7110
	}
	set_timed_country_flag = {
		flag = pse_power_$POWER_MAIN$_$POWER_NAME$_cooldown_1740
		days = 7140
	}
	set_timed_country_flag = {
		flag = pse_power_$POWER_MAIN$_$POWER_NAME$_cooldown_1770
		days = 7170
	}
	set_timed_country_flag = {
		flag = pse_power_$POWER_MAIN$_$POWER_NAME$_cooldown_1800
		days = 7200
	}
	country_event = { #count back cooldown power number
		id = pse.2007
		days = 7200
	}
}

pse_zro_to_purify_corruption_pre_calc = {
	set_variable = {
		which = pse_corruption_purify_zro_requirement
		value = pse_corruption
	}
	multiply_variable = {
		which = pse_corruption_purify_zro_requirement
		value = 20
	}
}

pse_power_ethic_effect = {
	if = {
		limit = {
			OR = {
				has_ethic = ethic_materialist
				has_ethic = ethic_fanatic_materialist
			}
			any_owned_pop = {
				has_ethic = ethic_spiritualist
			}
		}
		random_owned_pop = {
			limit = {
				has_ethic = ethic_spiritualist
			}
			pop_change_ethic = ethic_materialist
		}
	}
	if = {
		limit = {
			OR = {
				has_ethic = ethic_spiritualist
				has_ethic = ethic_fanatic_spiritualist
			}
			any_owned_pop = {
				has_ethic = ethic_materialist
			}
		}
		random_owned_pop = {
			limit = {
				has_ethic = ethic_materialist
			}
			pop_change_ethic = ethic_spiritualist
		}
	}
	if = {
		limit = {
			OR = {
				has_ethic = ethic_egalitarian
				has_ethic = ethic_fanatic_egalitarian
			}
			any_owned_pop = {
				has_ethic = ethic_authoritarian
			}
		}
		random_owned_pop = {
			limit = {
				has_ethic = ethic_authoritarian
			}
			pop_change_ethic = ethic_egalitarian
		}
	}
	if = {
		limit = {
			OR = {
				has_ethic = ethic_authoritarian
				has_ethic = ethic_fanatic_authoritarian
			}
			any_owned_pop = {
				has_ethic = ethic_egalitarian
			}
		}
		random_owned_pop = {
			limit = {
				has_ethic = ethic_egalitarian
			}
			pop_change_ethic = ethic_authoritarian
		}
	}
	if = {
		limit = {
			OR = {
				has_ethic = ethic_militarist
				has_ethic = ethic_fanatic_militarist
			}
			any_owned_pop = {
				has_ethic = ethic_pacifist
			}
		}
		random_owned_pop = {
			limit = {
				has_ethic = ethic_pacifist
			}
			pop_change_ethic = ethic_militarist
		}
	}
	if = {
		limit = {
			OR = {
				has_ethic = ethic_pacifist
				has_ethic = ethic_fanatic_pacifist
			}
			any_owned_pop = {
				has_ethic = ethic_militarist
			}
		}
		random_owned_pop = {
			limit = {
				has_ethic = ethic_militarist
			}
			pop_change_ethic = ethic_pacifist
		}
	}
	if = {
		limit = {
			OR = {
				has_ethic = ethic_xenophobe
				has_ethic = ethic_fanatic_xenophobe
			}
			any_owned_pop = {
				has_ethic = ethic_xenophile
			}
		}
		random_owned_pop = {
			limit = {
				has_ethic = ethic_xenophile
			}
			pop_change_ethic = ethic_xenophobe
		}
	}
	if = {
		limit = {
			OR = {
				has_ethic = ethic_xenophile
				has_ethic = ethic_fanatic_xenophile
			}
			any_owned_pop = {
				has_ethic = ethic_xenophobe
			}
		}
		random_owned_pop = {
			limit = {
				has_ethic = ethic_xenophobe
			}
			pop_change_ethic = ethic_xenophile
		}
	}
}

pse_power_ethic_effect_planet = {
	if = {
		limit = {
			OR = {
				owner = {
					has_ethic = ethic_materialist
					has_ethic = ethic_fanatic_materialist
				}
				
			}
			any_owned_pop = {
				has_ethic = ethic_spiritualist
			}
		}
		random_owned_pop = {
			limit = {
				has_ethic = ethic_spiritualist
			}
			pop_change_ethic = ethic_materialist
		}
	}
	if = {
		limit = {
			OR = {
				owner = {
					has_ethic = ethic_spiritualist
					has_ethic = ethic_fanatic_spiritualist
				}
				
			}
			any_owned_pop = {
				has_ethic = ethic_materialist
			}
		}
		random_owned_pop = {
			limit = {
				has_ethic = ethic_materialist
			}
			pop_change_ethic = ethic_spiritualist
		}
	}
	if = {
		limit = {
			OR = {
				owner = {
					has_ethic = ethic_egalitarian
					has_ethic = ethic_fanatic_egalitarian	
				}
				
			}
			any_owned_pop = {
				has_ethic = ethic_authoritarian
			}
		}
		random_owned_pop = {
			limit = {
				has_ethic = ethic_authoritarian
			}
			pop_change_ethic = ethic_egalitarian
		}
	}
	if = {
		limit = {
			OR = {
				owner = {
					has_ethic = ethic_authoritarian
					has_ethic = ethic_fanatic_authoritarian
				}
				
			}
			any_owned_pop = {
				has_ethic = ethic_egalitarian
			}
		}
		random_owned_pop = {
			limit = {
				has_ethic = ethic_egalitarian
			}
			pop_change_ethic = ethic_authoritarian
		}
	}
	if = {
		limit = {
			OR = {
				owner = {
					has_ethic = ethic_militarist
					has_ethic = ethic_fanatic_militarist	
				}
				
			}
			any_owned_pop = {
				has_ethic = ethic_pacifist
			}
		}
		random_owned_pop = {
			limit = {
				has_ethic = ethic_pacifist
			}
			pop_change_ethic = ethic_militarist
		}
	}
	if = {
		limit = {
			OR = {
				owner = {
					has_ethic = ethic_pacifist
					has_ethic = ethic_fanatic_pacifist	
				}
				
			}
			any_owned_pop = {
				has_ethic = ethic_militarist
			}
		}
		random_owned_pop = {
			limit = {
				has_ethic = ethic_militarist
			}
			pop_change_ethic = ethic_pacifist
		}
	}
	if = {
		limit = {
			OR = {
				owner = {
					has_ethic = ethic_xenophobe
					has_ethic = ethic_fanatic_xenophobe
				}
				
			}
			any_owned_pop = {
				has_ethic = ethic_xenophile
			}
		}
		random_owned_pop = {
			limit = {
				has_ethic = ethic_xenophile
			}
			pop_change_ethic = ethic_xenophobe
		}
	}
	if = {
		limit = {
			OR = {
				owner = {
					has_ethic = ethic_xenophile
					has_ethic = ethic_fanatic_xenophile
				}
				
			}
			any_owned_pop = {
				has_ethic = ethic_xenophobe
			}
		}
		random_owned_pop = {
			limit = {
				has_ethic = ethic_xenophobe
			}
			pop_change_ethic = ethic_xenophile
		}
	}
}

pse_power_worship_effect = {
	random_list = {
		0 = {
			modifier = {
				add = 1
				event_target:pse_worship_country = {
					OR = {
						has_ethic = ethic_materialist
						has_ethic = ethic_fanatic_materialist
					}
				}
			}
			modifier = {
				factor = 0
				has_ethic = ethic_materialist
			}
			pop_change_ethic = ethic_materialist
			add_modifier = {
				modifier = MOD_pse_power_worship_pop_modifier_materialist
				days = 1800
			}
		}
		0 = {
			modifier = {
				add = 1
				event_target:pse_worship_country = {
					OR = {
						has_ethic = ethic_spiritualist
						has_ethic = ethic_fanatic_spiritualist
					}
				}
			}
			modifier = {
				factor = 0
				has_ethic = ethic_spiritualist
			}
			pop_change_ethic = ethic_spiritualist
			add_modifier = {
				modifier = MOD_pse_power_worship_pop_modifier_spiritualist
				days = 1800
			}
		}
		0 = {
			modifier = {
				add = 1
				event_target:pse_worship_country = {
					OR = {
						has_ethic = ethic_authoritarian
						has_ethic = ethic_fanatic_authoritarian
					}
				}
			}
			modifier = {
				factor = 0
				has_ethic = ethic_authoritarian
			}
			pop_change_ethic = ethic_authoritarian
			add_modifier = {
				modifier = MOD_pse_power_worship_pop_modifier_authoritarian
				days = 1800
			}
		}
		0 = {
			modifier = {
				add = 1
				event_target:pse_worship_country = {
					OR = {
						has_ethic = ethic_egalitarian
						has_ethic = ethic_fanatic_egalitarian
					}
				}
			}
			modifier = {
				factor = 0
				has_ethic = ethic_egalitarian
			}
			pop_change_ethic = ethic_egalitarian
			add_modifier = {
				modifier = MOD_pse_power_worship_pop_modifier_egalitarian
				days = 1800
			}
		}
		0 = {
			modifier = {
				add = 1
				event_target:pse_worship_country = {
					OR = {
						has_ethic = ethic_militarist
						has_ethic = ethic_fanatic_militarist
					}
				}
			}
			modifier = {
				factor = 0
				has_ethic = ethic_militarist
			}
			pop_change_ethic = ethic_militarist
			add_modifier = {
				modifier = MOD_pse_power_worship_pop_modifier_militarist
				days = 1800
			}
		}
		0 = {
			modifier = {
				add = 1
				event_target:pse_worship_country = {
					OR = {
						has_ethic = ethic_pacifist
						has_ethic = ethic_fanatic_pacifist
					}
				}
			}
			modifier = {
				factor = 0
				has_ethic = ethic_pacifist
			}
			pop_change_ethic = ethic_pacifist
			add_modifier = {
				modifier = MOD_pse_power_worship_pop_modifier_pacifist
				days = 1800
			}
		}
		0 = {
			modifier = {
				add = 1
				event_target:pse_worship_country = {
					OR = {
						has_ethic = ethic_xenophobe
						has_ethic = ethic_fanatic_xenophobe
					}
				}
			}
			modifier = {
				factor = 0
				has_ethic = ethic_xenophobe
			}
			pop_change_ethic = ethic_xenophobe
			add_modifier = {
				modifier = MOD_pse_power_worship_pop_modifier_xenophobe
				days = 1800
			}
		}
		0 = {
			modifier = {
				add = 1
				event_target:pse_worship_country = {
					OR = {
						has_ethic = ethic_xenophile
						has_ethic = ethic_fanatic_xenophile
					}
				}
			}
			modifier = {
				factor = 0
				has_ethic = ethic_xenophile
			}
			pop_change_ethic = ethic_xenophile
			add_modifier = {
				modifier = MOD_pse_power_worship_pop_modifier_xenophile
				days = 1800
			}
		}
	}
}

effect_pse_cooldown_notify = { #Power main, #Power name
	if = {
		limit = {
			has_country_flag = pse_power_$POWER_MAIN$_$POWER_NAME$_pre_note_flag
			NOT = {
				has_country_flag = pse_power_$POWER_MAIN$_$POWER_NAME$_cooldown
			}
		}
		remove_country_flag = pse_power_$POWER_MAIN$_$POWER_NAME$_pre_note_flag
		create_message = { 
			type = PSE_READY_TO_CAST
			localization = pse_power_botton_$POWER_MAIN$_$POWER_NAME$_cooldown_over
			days = 60
			target = root
		}
#		play_sound = event_cad_age_progress
	}
}

