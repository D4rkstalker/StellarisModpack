#--	
#--		--------------------------- --------------------------- --------------------------- ---------------------------
#--		Fallen Empire Expanded - Scripted Effects
#--		--------------------------- --------------------------- --------------------------- ---------------------------
#--	
#--		LIST OF EFFECTS
#--		• create_fallen_empire_large_station: Deprecated in 2.0.
#--     • create_fallen_empire_platform: Moved away from small_station in 2.0, onto platform.
#--		• create_fallen_empire_colossus: Apocalypse only, Hive Mind lacks one.
#--		• create_fallen_empire_large_ship
#--		• create_fallen_empire_small_ship
#--		• 
#--		• 

#		--------------------------- --------------------------- --------------------------- ---------------------------

create_fallen_empire_large_station = {
	if = {
		limit = {
			owner = { has_authority = auth_machine_intelligence }
		}
		create_ship = {
			name = random
			design = "NAME_Omega"
			graphical_culture = owner
		}						
	}					
	if = {
		limit = {
			owner = { has_ethic = ethic_fanatic_materialist }
		}
		create_ship = {
			name = random
			design = "NAME_Obscurer"
			graphical_culture = owner
		}						
	}
	if = {
		limit = {
			owner = { has_ethic = ethic_fanatic_spiritualist }
		}
		create_ship = {
			name = random
			design = "NAME_Bulwark"
			graphical_culture = owner
		}						
	}
	if = {
		limit = {
			owner = { has_ethic = ethic_fanatic_xenophobe }
		}
		create_ship = {
			name = random
			design = "NAME_Reaper"
			graphical_culture = owner
		}						
	}
	if = {
		limit = {
			owner = { has_ethic = ethic_fanatic_xenophile }
		}
		create_ship = {
			name = random
			design = "NAME_Sentinel"
			graphical_culture = owner
		}						
	}
	if = {
		limit = {
			owner = { has_ethic = ethic_fanatic_militarist }
		}
		create_ship = {
			name = random
			design = "NAME_Reaper"
			graphical_culture = owner
		}						
	}
	if = {
		limit = {
			owner = { has_authority = auth_hive_mind }
		}
		create_ship = {
			name = random
			design = "NAME_Hive"
			graphical_culture = owner
		}						
	}
}

create_fallen_empire_platform = {
	if = {
		limit = {
			owner = { has_authority = auth_machine_intelligence }
		}
		create_ship = {
			name = random
			design = "NAME_Sigma"
			graphical_culture = owner
		}						
	}					
	if = {
		limit = {
			owner = { has_ethic = ethic_fanatic_materialist }
		}
		create_ship = {
			name = random
			design = "NAME_Cloaker"
			graphical_culture = owner
		}						
	}
	if = {
		limit = {
			owner = { has_ethic = ethic_fanatic_spiritualist }
		}
		create_ship = {
			name = random
			design = "NAME_Faith"
			graphical_culture = owner
		}						
	}
	if = {
		limit = {
			owner = { has_ethic = ethic_fanatic_xenophobe }
		}
		create_ship = {
			name = random
			design = "NAME_Devastator"
			graphical_culture = owner
		}						
	}
	if = {
		limit = {
			owner = { has_ethic = ethic_fanatic_xenophile }
		}
		create_ship = {
			name = random
			design = "NAME_Watcher"
			graphical_culture = owner
		}						
	}
	if = {
		limit = {
			owner = { has_ethic = ethic_fanatic_militarist }
		}
		create_ship = {
			name = random
			design = "NAME_Devastator"
			graphical_culture = owner
		}						
	}
	if = {
		limit = {
			owner = { has_authority = auth_hive_mind }
		}
		create_ship = {
			name = random
			design = "NAME_Beholder"
			graphical_culture = owner
		}						
	}
}



create_fallen_empire_colossus = {
	if = {
		limit = {
			owner = { has_authority = auth_machine_intelligence }
		}
		create_ship = {
			name = random
			design = "NAME_Omega"
			graphical_culture = owner
		}						
	}					
	if = {
		limit = {
			owner = { has_ethic = ethic_fanatic_materialist }
		}
		create_ship = {
			name = random
			design = "NAME_Enforcer"
			graphical_culture = owner
		}						
	}
	if = {
		limit = {
			owner = { has_ethic = ethic_fanatic_spiritualist }
		}
		create_ship = {
			name = random
			design = "NAME_Cleanser"
			graphical_culture = owner
		}						
	}
	if = {
		limit = {
			owner = { has_ethic = ethic_fanatic_xenophobe }
		}
		create_ship = {
			name = random
			design = "NAME_Reaper"
			graphical_culture = owner
		}						
	}
	if = {
		limit = {
			owner = { has_ethic = ethic_fanatic_xenophile }
		}
		create_ship = {
			name = random
			design = "NAME_Adjuster"
			graphical_culture = owner
		}						
	}
	if = {
		limit = {
			owner = { has_ethic = ethic_fanatic_militarist }
		}
		create_ship = {
			name = random
			design = "NAME_Reaper"
			graphical_culture = owner
		}						
	}
}

create_fallen_empire_titan = {
	if = {
		limit = {
			owner = { has_authority = auth_machine_intelligence }
		}
		create_ship = {
			name = random
			design = "NAME_Alpha"
			graphical_culture = owner
		}						
	}					
	if = {
		limit = {
			owner = { has_ethic = ethic_fanatic_materialist }
		}
		create_ship = {
			name = random
			design = "NAME_Savant"
			graphical_culture = owner
		}						
	}
	if = {
		limit = {
			owner = { has_ethic = ethic_fanatic_spiritualist }
		}
		create_ship = {
			name = random
			design = "NAME_Eternal"
			graphical_culture = owner
		}						
	}
	if = {
		limit = {
			owner = { has_ethic = ethic_fanatic_xenophobe }
		}
		create_ship = {
			name = random
			design = "NAME_Imperium"
			graphical_culture = owner
		}						
	}
	if = {
		limit = {
			owner = { has_ethic = ethic_fanatic_xenophile }
		}
		create_ship = {
			name = random
			design = "NAME_Keeper"
			graphical_culture = owner
		}						
	}
	if = {
		limit = {
			owner = { has_ethic = ethic_fanatic_militarist }
		}
		create_ship = {
			name = random
			design = "NAME_Imperium"
			graphical_culture = owner
		}						
	}
	if = {
		limit = {
			owner = { has_authority = auth_hive_mind }
		}
		create_ship = {
			name = random
			design = "NAME_Progenitor"
			graphical_culture = owner
		}						
	}
}

create_fallen_empire_large_ship = {
	if = {
		limit = {
			owner = { has_authority = auth_machine_intelligence }
		}
		create_ship = {
			name = random
			design = "NAME_Beta"
			graphical_culture = owner
		}						
	}					
	if = {
		limit = {
			owner = { has_ethic = ethic_fanatic_materialist }
		}
		create_ship = {
			name = random
			design = "NAME_Scholar"
			graphical_culture = owner
		}						
	}
	if = {
		limit = {
			owner = { has_ethic = ethic_fanatic_spiritualist }
		}
		create_ship = {
			name = random
			design = "NAME_Avatar"
			graphical_culture = owner
		}						
	}
	if = {
		limit = {
			owner = { has_ethic = ethic_fanatic_xenophobe }
		}
		create_ship = {
			name = random
			design = "NAME_Supremacy"
			graphical_culture = owner
		}						
	}
	if = {
		limit = {
			owner = { has_ethic = ethic_fanatic_xenophile }
		}
		create_ship = {
			name = random
			design = "NAME_Custodian"
			graphical_culture = owner
		}						
	}
	if = {
		limit = {
			owner = { has_ethic = ethic_fanatic_militarist }
		}
		create_ship = {
			name = random
			design = "NAME_Supremacy"
			graphical_culture = owner
		}						
	}
	if = {
		limit = {
			owner = { has_authority = auth_hive_mind }
		}
		create_ship = {
			name = random
			design = "NAME_Overlord"
			graphical_culture = owner
		}						
	}
}

create_fallen_empire_small_ship = {
	if = {
		limit = {
			owner = { has_authority = auth_machine_intelligence }
		}
		create_ship = {
			name = random
			design = "NAME_Gamma"
			graphical_culture = owner
		}						
	}					
	if = {
		limit = {
			owner = { has_ethic = ethic_fanatic_materialist }
		}
		create_ship = {
			name = random
			design = "NAME_Sage"
			graphical_culture = owner
		}						
	}
	if = {
		limit = {
			owner = { has_ethic = ethic_fanatic_spiritualist }
		}
		create_ship = {
			name = random
			design = "NAME_Zealot"
			graphical_culture = owner
		}						
	}
	if = {
		limit = {
			owner = { has_ethic = ethic_fanatic_xenophobe }
		}
		create_ship = {
			name = random
			design = "NAME_Glory"
			graphical_culture = owner
		}						
	}
	if = {
		limit = {
			owner = { has_ethic = ethic_fanatic_xenophile }
		}
		create_ship = {
			name = random
			design = "NAME_Warden"
			graphical_culture = owner
		}						
	}
	if = {
		limit = {
			owner = { has_ethic = ethic_fanatic_militarist }
		}
		create_ship = {
			name = random
			design = "NAME_Glory"
			graphical_culture = owner
		}						
	}
	if = {
		limit = {
			owner = { has_authority = auth_hive_mind }
		}
		create_ship = {
			name = random
			design = "NAME_Drone"
			graphical_culture = owner
		}						
	}
}

create_fallen_empire_construction_ship = {
	if = {
		limit = {
			owner = { has_authority = auth_machine_intelligence }
		}
		create_ship = {
			name = random
			design = "NAME_Theta"
			graphical_culture = owner
		}						
	}					
	if = {
		limit = {
			owner = { has_ethic = ethic_fanatic_materialist }
		}
		create_ship = {
			name = random
			design = "NAME_Librarian"
			graphical_culture = owner
		}						
	}
	if = {
		limit = {
			owner = { has_ethic = ethic_fanatic_spiritualist }
		}
		create_ship = {
			name = random
			design = "NAME_Penitent"
			graphical_culture = owner
		}						
	}
	if = {
		limit = {
			owner = { has_ethic = ethic_fanatic_xenophobe }
		}
		create_ship = {
			name = random
			design = "NAME_Servitor"
			graphical_culture = owner
		}						
	}
	if = {
		limit = {
			owner = { has_ethic = ethic_fanatic_xenophile }
		}
		create_ship = {
			name = random
			design = "NAME_Builder"
			graphical_culture = owner
		}						
	}
	if = {
		limit = {
			owner = { has_ethic = ethic_fanatic_militarist }
		}
		create_ship = {
			name = random
			design = "NAME_Servitor"
			graphical_culture = owner
		}						
	}
	if = {
		limit = {
			owner = { has_authority = auth_hive_mind }
		}
		create_ship = {
			name = random
			design = "NAME_Drone-Constructor"
			graphical_culture = owner
		}						
	}
}


create_fallen_empire_reinforcements = {
	create_fleet = {
		effect = {
			set_owner = prev.owner
			create_fallen_empire_titan = yes
			while = {
				count = 5
				create_fallen_empire_large_ship = yes
			}
			while = {
				count = 10
				create_fallen_empire_small_ship = yes
			}
			random_list = {
				25 = {
					set_location = {
						target = prev
						distance = 30
						angle = random 
					}				
				}
				25 = {
					set_location = {
						target = prev
						distance = 45
						angle = random 
					}				
				}
				25 = {
					set_location = {
						target = prev
						distance = 60
						angle = random 
					}				
				}
				25 = {
					set_location = {
						target = prev
						distance = 75
						angle = random 
					}				
				}				
			}
		}
	}					
}


create_fallen_empire_fleet = {
	create_fleet = {
		effect = {
			set_owner = prev.owner
			while = {
				count = 2
				create_fallen_empire_titan = yes
			}
			while = {
				count = 15
				create_fallen_empire_large_ship = yes
			}
			while = {
				count = 25
				create_fallen_empire_small_ship = yes
			}
			random_list = {
				25 = {
					set_location = {
						target = prev
						distance = 30
						angle = random 
					}				
				}
				25 = {
					set_location = {
						target = prev
						distance = 45
						angle = random 
					}				
				}
				25 = {
					set_location = {
						target = prev
						distance = 60
						angle = random 
					}				
				}
				25 = {
					set_location = {
						target = prev
						distance = 75
						angle = random 
					}				
				}				
			}
		}
	}					
}

create_fallen_empire_starting_navy = {
	create_fallen_empire_fleet = yes
	create_fallen_empire_fleet = yes
	create_fallen_empire_fleet = yes
	create_fallen_empire_fleet = yes
	random = {
		chance = 33			
		create_fallen_empire_fleet = yes
	}
	if = {
		limit = { 
			host_has_dlc = "Apocalypse"
		}
		random = {
			chance = 10
			create_fleet = {
				effect = {
					set_owner = prev.owner
					create_fallen_empire_colossus = yes
					set_location = {
						target = prev
						distance = 30
						angle = random 
					}					
				}
			}
		}			
	}
	random = {
		chance = 25
		create_fleet = {
			effect = {
				set_owner = prev.owner
				create_fallen_empire_titan = yes
				set_location = {
					target = prev
					distance = 20
					angle = random 
				}					
			}
		}
	}
	create_fleet = {
		effect = {
			set_owner = prev.owner
			create_fallen_empire_construction_ship = yes
			set_location = {
				target = prev
				distance = 60
				angle = random 
			}				
		}
	}
	create_fleet = {
		effect = {
			set_owner = prev.owner
			create_fallen_empire_construction_ship = yes
			set_location = {
				target = prev
				distance = 80
				angle = random 
			}				
		}
	}				
	create_fleet = {
		effect = {
			set_owner = prev.owner
			create_fallen_empire_construction_ship = yes
			set_location = {
				target = prev
				distance = 100
				angle = random 
			}				
		}
	}
	create_fleet = {
		effect = {
			set_owner = prev.owner
			create_fallen_empire_colossus = yes
			set_location = {
				target = prev
				distance = 100
				angle = random 
			}				
		}
	}
}


# Version of standard event for the Terran Coalition/Sol Imperium
create_fallen_empire_starting_navy_event = {
	create_fallen_empire_fleet = yes
	create_fallen_empire_fleet = yes
	random = {
		chance = 33			
		create_fallen_empire_fleet = yes
	}
	if = {
		limit = { 
			host_has_dlc = "Apocalypse"
		}
		create_fleet = {
			effect = {
				set_owner = prev.owner
				create_fallen_empire_colossus = yes
				set_location = {
					target = prev
					distance = 30
					angle = random 
				}					
			}
		}
	}
	create_fleet = {
		effect = {
			set_owner = prev.owner
			create_fallen_empire_titan = yes
			set_location = {
				target = prev
				distance = 20
				angle = random 
			}					
		}
	}
	create_fleet = {
		effect = {
			set_owner = prev.owner
			create_fallen_empire_construction_ship = yes
			set_location = {
				target = prev
				distance = 60
				angle = random 
			}				
		}
	}
	create_fleet = {
		effect = {
			set_owner = prev.owner
			create_fallen_empire_construction_ship = yes
			set_location = {
				target = prev
				distance = 80
				angle = random 
			}				
		}
	}				
	create_fleet = {
		effect = {
			set_owner = prev.owner
			create_fallen_empire_construction_ship = yes
			set_location = {
				target = prev
				distance = 100
				angle = random 
			}				
		}
	}
}

# Creates biological slaves for terran wasteland

create_fee_servant_species = {
	create_species = {
		name = random
		class = random_non_machine
		portrait = random
		traits = random
		traits = {
			trait = "trait_nerve_stapled"
			trait = "trait_strong"
			trait = "trait_charismatic"
		}
	}
}

#possible fix for district spawning bug

generate_FEE_deposits = {
	# 4 + 3 energy		
	add_deposit = d_hot_springs
	add_deposit = d_searing_desert
	add_deposit = d_underwater_vent	
	add_deposit = d_searing_desert		
	
	# 4 + 3 mining
	add_deposit = d_veiny_cliffs
	add_deposit = d_ore_rich_caverns
	add_deposit = d_submerged_ore_veins
	
	# 3 farming
	add_deposit = d_lichen_fields	
	add_deposit = d_fungal_caves	

	# 1 random medium deposit
	random_list = {
		33 = { add_deposit = d_frozen_gas_lake }
		33 = { add_deposit = d_prosperous_mesa }
		33 = { add_deposit = d_betharian_deposit }
	}	
	
	add_deposit = d_dust_caverns
	add_deposit = d_bubbling_swamp
	add_deposit = d_crystalline_caverns
}

generate_FEE_deposits_ring ={
	
}