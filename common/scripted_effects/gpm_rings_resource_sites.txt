
@angle_1 = 45
@angle_2 = 340
@angle_3 = 210
@angle_4 = 110

# [orbit_distance_offset] Variables for distance to planet
@large_close = 15
@large_centre = 17
@large_far = 19

@medium_close = 12
@medium_centre = 14
@medium_far = 16

@small_close = 8
@small_centre = 9
@small_far = 10

# REAL SPACE COMPATIBILITY #
@large_close_rs = 13		#
@large_centre_rs = 15		#
@large_far_rs = 17			#
							#
@medium_close_rs = 8		#
@medium_centre_rs = 10		#
@medium_far_rs = 12			#
							#
@small_close_rs = 5			#
@small_centre_rs = 6		#
@small_far_rs = 7			#
###########################

gpm_spawn_RES = {
	if = {
		limit = { has_planet_flag =  gpm_rings_huge }
		gpm_spawn_large_huge_RES = yes
	}
	if = {
		limit = { has_planet_flag =  gpm_rings_large }
		gpm_spawn_large_huge_RES = yes
	}
	if = {
		limit = { has_planet_flag =  gpm_rings_medium }
		gpm_spawn_medium_RES = yes
	}
	if = {
		limit = { has_planet_flag =  gpm_rings_small }
		gpm_spawn_small_RES = yes
	}
}


gpm_spawn_RES_1 = {
	if = {
		limit = {
			OR = {
				has_planet_flag =  gpm_rings_huge
				has_planet_flag =  gpm_rings_large
			}
			NOT = { has_planet_flag = gpm_has_RES }
		}
		save_event_target_as = res_location_planet
		set_planet_flag = gpm_has_RES
		solar_system = {
			spawn_planet = {
				class = "pc_gpm_res"
				location = event_target:res_location_planet
				
				orbit_location = yes
				orbit_angle_offset = @angle_1
				orbit_distance_offset = @large_close
				init_effect = {
					set_name = pc_gpm_res_anomaly_name
					set_planet_entity = {
						entity = "gpm_rings_metallic_large_RES"
					}
					surveyed = {
						set_surveyed = yes
					}
					prevent_anomaly = yes
					if = {
						limit = { event_target:res_location_planet = { has_modifier = gpm_metallic_ring } }
						gpm_random_res_mineral_deposit = yes
					}
					if = {
						limit = { event_target:res_location_planet = { has_modifier = gpm_ice_ring } }
						gpm_random_res_energy_deposit = yes
					}
					# gpm_random_ring_feature = yes
				}
			}
		}
	}
	if = {
		limit = { 
			has_planet_flag =  gpm_rings_medium
			NOT = { has_planet_flag = gpm_has_RES }
		}
		save_event_target_as = res_location_planet
		set_planet_flag = gpm_has_RES
		solar_system = {
			spawn_planet = {
				class = "pc_gpm_res"
				location = event_target:res_location_planet
				
				orbit_location = yes
				orbit_angle_offset = @angle_1
				orbit_distance_offset = @medium_close
				init_effect = {
					set_name = pc_gpm_res_anomaly_name
					set_planet_entity = {
						entity = "gpm_rings_metallic_large_RES"
					}
					surveyed = {
						set_surveyed = yes
					}
					prevent_anomaly = yes
					if = {
						limit = { event_target:res_location_planet = { has_modifier = gpm_metallic_ring } }
						gpm_random_res_mineral_deposit = yes
					}
					if = {
						limit = { event_target:res_location_planet = { has_modifier = gpm_ice_ring } }
						gpm_random_res_energy_deposit = yes
					}
					# gpm_random_ring_feature = yes
				}
			}
		}
	}
	if = {
		limit = { 
			has_planet_flag =  gpm_rings_small
			NOT = { has_planet_flag = gpm_has_RES }
		}
		save_event_target_as = res_location_planet
		set_planet_flag = gpm_has_RES
		solar_system = {
			spawn_planet = {
				class = "pc_gpm_res"
				location = event_target:res_location_planet
				
				orbit_location = yes
				orbit_angle_offset = @angle_1
				orbit_distance_offset = @small_close
				init_effect = {
					set_name = pc_gpm_res_anomaly_name
					set_planet_entity = {
						entity = "gpm_rings_metallic_large_RES"
					}
					surveyed = {
						set_surveyed = yes
					}
					prevent_anomaly = yes
					if = {
						limit = { event_target:res_location_planet = { has_modifier = gpm_metallic_ring } }
						gpm_random_res_mineral_deposit = yes
					}
					if = {
						limit = { event_target:res_location_planet = { has_modifier = gpm_ice_ring } }
						gpm_random_res_energy_deposit = yes
					}
					# gpm_random_ring_feature = yes
				}
			}
		}
	}
}
gpm_spawn_RES_2 = {
	if = {
		limit = {
			OR = {
				has_planet_flag =  gpm_rings_huge
				has_planet_flag =  gpm_rings_large
			}
			NOT = { has_planet_flag = gpm_has_RES }
		}
		save_event_target_as = res_location_planet
		set_planet_flag = gpm_has_RES
		solar_system = {
			spawn_planet = {
				class = "pc_gpm_res"
				location = event_target:res_location_planet
				
				orbit_location = yes
				orbit_angle_offset = @angle_1
				orbit_distance_offset = @large_close
				init_effect = {
					set_name = pc_gpm_res_anomaly_name
					set_planet_entity = {
						entity = "gpm_rings_metallic_large_RES"
					}
					surveyed = {
						set_surveyed = yes
					}
					prevent_anomaly = yes
					if = {
						limit = { event_target:res_location_planet = { has_modifier = gpm_metallic_ring } }
						gpm_random_res_mineral_deposit = yes
					}
					if = {
						limit = { event_target:res_location_planet = { has_modifier = gpm_ice_ring } }
						gpm_random_res_energy_deposit = yes
					}
					# gpm_random_ring_feature = yes
				}
			}
			spawn_planet = {
				class = "pc_gpm_res"
				location = event_target:res_location_planet
				
				orbit_location = yes
				orbit_angle_offset = @angle_2
				orbit_distance_offset = @large_centre
				init_effect = {
					set_name = pc_gpm_res_anomaly_name
					set_planet_entity = {
						entity = "gpm_rings_metallic_large_RES"
					}
					surveyed = {
						set_surveyed = yes
					}
					prevent_anomaly = yes
					if = {
						limit = { event_target:res_location_planet = { has_modifier = gpm_metallic_ring } }
						gpm_random_res_mineral_deposit = yes
					}
					if = {
						limit = { event_target:res_location_planet = { has_modifier = gpm_ice_ring } }
						gpm_random_res_energy_deposit = yes
					}
					# gpm_random_ring_feature = yes
				}
			}
		}
	}
	if = {
		limit = { 
			has_planet_flag =  gpm_rings_medium
			NOT = { has_planet_flag = gpm_has_RES }
		}
		save_event_target_as = res_location_planet
		set_planet_flag = gpm_has_RES
		solar_system = {
			spawn_planet = {
				class = "pc_gpm_res"
				location = event_target:res_location_planet
				
				orbit_location = yes
				orbit_angle_offset = @angle_1
				orbit_distance_offset = @medium_close
				init_effect = {
					set_name = pc_gpm_res_anomaly_name
					set_planet_entity = {
						entity = "gpm_rings_metallic_large_RES"
					}
					surveyed = {
						set_surveyed = yes
					}
					prevent_anomaly = yes
					if = {
						limit = { event_target:res_location_planet = { has_modifier = gpm_metallic_ring } }
						gpm_random_res_mineral_deposit = yes
					}
					if = {
						limit = { event_target:res_location_planet = { has_modifier = gpm_ice_ring } }
						gpm_random_res_energy_deposit = yes
					}
					# gpm_random_ring_feature = yes
				}
			}
			spawn_planet = {
				class = "pc_gpm_res"
				location = event_target:res_location_planet
				
				orbit_location = yes
				orbit_angle_offset = @angle_2
				orbit_distance_offset = @medium_centre
				init_effect = {
					set_name = pc_gpm_res_anomaly_name
					set_planet_entity = {
						entity = "gpm_rings_metallic_large_RES"
					}
					surveyed = {
						set_surveyed = yes
					}
					prevent_anomaly = yes
					if = {
						limit = { event_target:res_location_planet = { has_modifier = gpm_metallic_ring } }
						gpm_random_res_mineral_deposit = yes
					}
					if = {
						limit = { event_target:res_location_planet = { has_modifier = gpm_ice_ring } }
						gpm_random_res_energy_deposit = yes
					}
					# gpm_random_ring_feature = yes
				}
			}
		}
	}
	if = {
		limit = { 
			has_planet_flag =  gpm_rings_small
			NOT = { has_planet_flag = gpm_has_RES }
		}
		save_event_target_as = res_location_planet
		set_planet_flag = gpm_has_RES
		solar_system = {
			spawn_planet = {
				class = "pc_gpm_res"
				location = event_target:res_location_planet
				
				orbit_location = yes
				orbit_angle_offset = @angle_1
				orbit_distance_offset = @small_close
				init_effect = {
					set_name = pc_gpm_res_anomaly_name
					set_planet_entity = {
						entity = "gpm_rings_metallic_large_RES"
					}
					surveyed = {
						set_surveyed = yes
					}
					prevent_anomaly = yes
					if = {
						limit = { event_target:res_location_planet = { has_modifier = gpm_metallic_ring } }
						gpm_random_res_mineral_deposit = yes
					}
					if = {
						limit = { event_target:res_location_planet = { has_modifier = gpm_ice_ring } }
						gpm_random_res_energy_deposit = yes
					}
					# gpm_random_ring_feature = yes
				}
			}
			spawn_planet = {
				class = "pc_gpm_res"
				location = event_target:res_location_planet
				
				orbit_location = yes
				orbit_angle_offset = @angle_3
				orbit_distance_offset = @small_centre
				init_effect = {
					set_name = pc_gpm_res_anomaly_name
					set_planet_entity = {
						entity = "gpm_rings_metallic_large_RES"
					}
					surveyed = {
						set_surveyed = yes
					}
					prevent_anomaly = yes
					if = {
						limit = { event_target:res_location_planet = { has_modifier = gpm_metallic_ring } }
						gpm_random_res_mineral_deposit = yes
					}
					if = {
						limit = { event_target:res_location_planet = { has_modifier = gpm_ice_ring } }
						gpm_random_res_energy_deposit = yes
					}
					# gpm_random_ring_feature = yes
				}
			}
		}
	}
}
gpm_spawn_RES_3 = {
	if = {
		limit = {
			OR = {
				has_planet_flag =  gpm_rings_huge
				has_planet_flag =  gpm_rings_large
			}
			NOT = { has_planet_flag = gpm_has_RES }
		}
		save_event_target_as = res_location_planet
		set_planet_flag = gpm_has_RES
		solar_system = {
			spawn_planet = {
				class = "pc_gpm_res"
				location = event_target:res_location_planet
				
				orbit_location = yes
				orbit_angle_offset = @angle_1
				orbit_distance_offset = @large_close
				init_effect = {
					set_name = pc_gpm_res_anomaly_name
					set_planet_entity = {
						entity = "gpm_rings_metallic_large_RES"
					}
					surveyed = {
						set_surveyed = yes
					}
					prevent_anomaly = yes
					if = {
						limit = { event_target:res_location_planet = { has_modifier = gpm_metallic_ring } }
						gpm_random_res_mineral_deposit = yes
					}
					if = {
						limit = { event_target:res_location_planet = { has_modifier = gpm_ice_ring } }
						gpm_random_res_energy_deposit = yes
					}
					# gpm_random_ring_feature = yes
				}
			}
			spawn_planet = {
				class = "pc_gpm_res"
				location = event_target:res_location_planet
				
				orbit_location = yes
				orbit_angle_offset = @angle_2
				orbit_distance_offset = @large_centre
				init_effect = {
					set_name = pc_gpm_res_anomaly_name
					set_planet_entity = {
						entity = "gpm_rings_metallic_large_RES"
					}
					surveyed = {
						set_surveyed = yes
					}
					prevent_anomaly = yes
					if = {
						limit = { event_target:res_location_planet = { has_modifier = gpm_metallic_ring } }
						gpm_random_res_mineral_deposit = yes
					}
					if = {
						limit = { event_target:res_location_planet = { has_modifier = gpm_ice_ring } }
						gpm_random_res_energy_deposit = yes
					}
					# gpm_random_ring_feature = yes
				}
			}
			spawn_planet = {
				class = "pc_gpm_res"
				location = event_target:res_location_planet
				
				orbit_location = yes
				orbit_angle_offset = @angle_3
				orbit_distance_offset = @large_far
				init_effect = {
					set_name = pc_gpm_res_anomaly_name
					set_planet_entity = {
						entity = "gpm_rings_metallic_large_RES"
					}
					surveyed = {
						set_surveyed = yes
					}
					prevent_anomaly = yes
					if = {
						limit = { event_target:res_location_planet = { has_modifier = gpm_metallic_ring } }
						gpm_random_res_mineral_deposit = yes
					}
					if = {
						limit = { event_target:res_location_planet = { has_modifier = gpm_ice_ring } }
						gpm_random_res_energy_deposit = yes
					}
					# gpm_random_ring_feature = yes
				}
			}
			random_list = {
				10 = {}
				10 = {
					spawn_planet = {
						class = "pc_gpm_res"
						location = event_target:res_location_planet
						
						orbit_location = yes
						orbit_angle_offset = @angle_4
						orbit_distance_offset = @large_far
						init_effect = {
							set_name = pc_gpm_res_anomaly_name
							set_planet_entity = {
								entity = "gpm_rings_metallic_large_RES"
							}
							surveyed = {
								set_surveyed = yes
							}
							prevent_anomaly = yes
							if = {
								limit = { event_target:res_location_planet = { has_modifier = gpm_metallic_ring } }
								gpm_random_res_mineral_deposit = yes
							}
							if = {
								limit = { event_target:res_location_planet = { has_modifier = gpm_ice_ring } }
								gpm_random_res_energy_deposit = yes
							}
							# gpm_random_ring_feature = yes
						}
					}
				}
			}
		}
	}
	if = {
		limit = { 
			has_planet_flag =  gpm_rings_medium
			NOT = { has_planet_flag = gpm_has_RES }
		}
		save_event_target_as = res_location_planet
		set_planet_flag = gpm_has_RES
		solar_system = {
			spawn_planet = {
				class = "pc_gpm_res"
				location = event_target:res_location_planet
				
				orbit_location = yes
				orbit_angle_offset = @angle_1
				orbit_distance_offset = @medium_close
				init_effect = {
					set_name = pc_gpm_res_anomaly_name
					set_planet_entity = {
						entity = "gpm_rings_metallic_large_RES"
					}
					surveyed = {
						set_surveyed = yes
					}
					prevent_anomaly = yes
					if = {
						limit = { event_target:res_location_planet = { has_modifier = gpm_metallic_ring } }
						gpm_random_res_mineral_deposit = yes
					}
					if = {
						limit = { event_target:res_location_planet = { has_modifier = gpm_ice_ring } }
						gpm_random_res_energy_deposit = yes
					}
					# gpm_random_ring_feature = yes
				}
			}
			spawn_planet = {
				class = "pc_gpm_res"
				location = event_target:res_location_planet
				
				orbit_location = yes
				orbit_angle_offset = @angle_2
				orbit_distance_offset = @medium_centre
				init_effect = {
					set_name = pc_gpm_res_anomaly_name
					set_planet_entity = {
						entity = "gpm_rings_metallic_large_RES"
					}
					surveyed = {
						set_surveyed = yes
					}
					prevent_anomaly = yes
					if = {
						limit = { event_target:res_location_planet = { has_modifier = gpm_metallic_ring } }
						gpm_random_res_mineral_deposit = yes
					}
					if = {
						limit = { event_target:res_location_planet = { has_modifier = gpm_ice_ring } }
						gpm_random_res_energy_deposit = yes
					}
					# gpm_random_ring_feature = yes
				}
			}
			spawn_planet = {
				class = "pc_gpm_res"
				location = event_target:res_location_planet
				
				orbit_location = yes
				orbit_angle_offset = @angle_3
				orbit_distance_offset = @medium_far
				init_effect = {
					set_name = pc_gpm_res_anomaly_name
					set_planet_entity = {
						entity = "gpm_rings_metallic_large_RES"
					}
					surveyed = {
						set_surveyed = yes
					}
					prevent_anomaly = yes
					if = {
						limit = { event_target:res_location_planet = { has_modifier = gpm_metallic_ring } }
						gpm_random_res_mineral_deposit = yes
					}
					if = {
						limit = { event_target:res_location_planet = { has_modifier = gpm_ice_ring } }
						gpm_random_res_energy_deposit = yes
					}
					# gpm_random_ring_feature = yes
				}
			}
			random_list = {
				10 = {}
				10 = {
					spawn_planet = {
						class = "pc_gpm_res"
						location = event_target:res_location_planet
						
						orbit_location = yes
						orbit_angle_offset = @angle_4
						orbit_distance_offset = @medium_far
						init_effect = {
							set_name = pc_gpm_res_anomaly_name
							set_planet_entity = {
								entity = "gpm_rings_metallic_large_RES"
							}
							surveyed = {
								set_surveyed = yes
							}
							prevent_anomaly = yes
							if = {
								limit = { event_target:res_location_planet = { has_modifier = gpm_metallic_ring } }
								gpm_random_res_mineral_deposit = yes
							}
							if = {
								limit = { event_target:res_location_planet = { has_modifier = gpm_ice_ring } }
								gpm_random_res_energy_deposit = yes
							}
							# gpm_random_ring_feature = yes
						}
					}
				}
			}
		}
	}
	if = {
		limit = { 
			has_planet_flag =  gpm_rings_small
			NOT = { has_planet_flag = gpm_has_RES }
		}
		save_event_target_as = res_location_planet
		set_planet_flag = gpm_has_RES
		solar_system = {
			spawn_planet = {
				class = "pc_gpm_res"
				location = event_target:res_location_planet
				
				orbit_location = yes
				orbit_angle_offset = @angle_1
				orbit_distance_offset = @small_close
				init_effect = {
					set_name = pc_gpm_res_anomaly_name
					set_planet_entity = {
						entity = "gpm_rings_metallic_large_RES"
					}
					surveyed = {
						set_surveyed = yes
					}
					prevent_anomaly = yes
					if = {
						limit = { event_target:res_location_planet = { has_modifier = gpm_metallic_ring } }
						gpm_random_res_mineral_deposit = yes
					}
					if = {
						limit = { event_target:res_location_planet = { has_modifier = gpm_ice_ring } }
						gpm_random_res_energy_deposit = yes
					}
					# gpm_random_ring_feature = yes
				}
			}
			spawn_planet = {
				class = "pc_gpm_res"
				location = event_target:res_location_planet
				
				orbit_location = yes
				orbit_angle_offset = @angle_2
				orbit_distance_offset = @small_centre
				init_effect = {
					set_name = pc_gpm_res_anomaly_name
					set_planet_entity = {
						entity = "gpm_rings_metallic_large_RES"
					}
					surveyed = {
						set_surveyed = yes
					}
					prevent_anomaly = yes
					if = {
						limit = { event_target:res_location_planet = { has_modifier = gpm_metallic_ring } }
						gpm_random_res_mineral_deposit = yes
					}
					if = {
						limit = { event_target:res_location_planet = { has_modifier = gpm_ice_ring } }
						gpm_random_res_energy_deposit = yes
					}
					# gpm_random_ring_feature = yes
				}
			}
			spawn_planet = {
				class = "pc_gpm_res"
				location = event_target:res_location_planet
				
				orbit_location = yes
				orbit_angle_offset = @angle_3
				orbit_distance_offset = @small_far
				init_effect = {
					set_name = pc_gpm_res_anomaly_name
					set_planet_entity = {
						entity = "gpm_rings_metallic_large_RES"
					}
					surveyed = {
						set_surveyed = yes
					}
					prevent_anomaly = yes
					if = {
						limit = { event_target:res_location_planet = { has_modifier = gpm_metallic_ring } }
						gpm_random_res_mineral_deposit = yes
					}
					if = {
						limit = { event_target:res_location_planet = { has_modifier = gpm_ice_ring } }
						gpm_random_res_energy_deposit = yes
					}
					# gpm_random_ring_feature = yes
				}
			}
			random_list = {
				10 = {}
				10 = {
					spawn_planet = {
						class = "pc_gpm_res"
						location = event_target:res_location_planet
						
						orbit_location = yes
						orbit_angle_offset = @angle_4
						orbit_distance_offset = @small_far
						init_effect = {
							set_name = pc_gpm_res_anomaly_name
							set_planet_entity = {
								entity = "gpm_rings_metallic_large_RES"
							}
							surveyed = {
								set_surveyed = yes
							}
							prevent_anomaly = yes
							if = {
								limit = { event_target:res_location_planet = { has_modifier = gpm_metallic_ring } }
								gpm_random_res_mineral_deposit = yes
							}
							if = {
								limit = { event_target:res_location_planet = { has_modifier = gpm_ice_ring } }
								gpm_random_res_energy_deposit = yes
							}
							# gpm_random_ring_feature = yes
						}
					}
				}
			}
		}
	}
}



# Planet Scope
gpm_spawn_large_huge_RES = {
	# Real space compatibility at the top to save on tedious coding. Also IF doesnt fucking work inside spawn_planet so cant make efficient and clean code. I cry
	if = {
		limit = { NOT = { has_global_flag = "has_real_space_mod" } }
		if = {
			limit = { 
				OR = {
					has_planet_flag =  gpm_rings_huge
					has_planet_flag =  gpm_rings_large
				}
				NOT = { has_planet_flag = gpm_has_RES }
			}
		
			save_event_target_as = res_location_planet
			set_planet_flag = gpm_has_RES
			solar_system = {
				random_list = {
					40 = { }
					20 = {
						spawn_planet = {
							class = "pc_gpm_res"
							location = event_target:res_location_planet
							
							orbit_location = yes
							orbit_angle_offset = 0
							orbit_distance_offset = @large_close
							init_effect = {
								set_name = pc_gpm_res_anomaly_name
								set_planet_entity = {
									entity = "gpm_rings_metallic_large_RES"
								}
								surveyed = {
									set_surveyed = yes
								}
								set_planet_flag = gpm_is_RES
								prevent_anomaly = yes
								if = {
									limit = { event_target:res_location_planet = { has_modifier = gpm_metallic_ring } }
									gpm_random_res_mineral_deposit = yes
								}
								if = {
									limit = { event_target:res_location_planet = { has_modifier = gpm_ice_ring } }
									gpm_random_res_energy_deposit = yes
								}
								gpm_random_ring_feature = yes
							}
						}
					}
					20 = {
						spawn_planet = {
							class = "pc_gpm_res"
							location = event_target:res_location_planet
							
							orbit_location = yes
							orbit_angle_offset = 10
							orbit_distance_offset = @large_centre
							init_effect = {
								set_name = pc_gpm_res_anomaly_name
								set_planet_entity = {
									entity = "gpm_rings_metallic_large_RES"
								}
								surveyed = {
									set_surveyed = yes
								}
								set_planet_flag = gpm_is_RES
								prevent_anomaly = yes
								if = {
									limit = { event_target:res_location_planet = { has_modifier = gpm_metallic_ring } }
									gpm_random_res_mineral_deposit = yes
								}
								if = {
									limit = { event_target:res_location_planet = { has_modifier = gpm_ice_ring } }
									gpm_random_res_energy_deposit = yes
								}
								gpm_random_ring_feature = yes
							}
						}
					}
					20 = {
						spawn_planet = {
							class = "pc_gpm_res"
							location = event_target:res_location_planet
							
							orbit_location = yes
							orbit_angle_offset = 20
							orbit_distance_offset = @large_far
							init_effect = {
								set_name = pc_gpm_res_anomaly_name
								set_planet_entity = {
									entity = "gpm_rings_metallic_large_RES"
								}
								surveyed = {
									set_surveyed = yes
								}
								set_planet_flag = gpm_is_RES
								prevent_anomaly = yes
								if = {
									limit = { event_target:res_location_planet = { has_modifier = gpm_metallic_ring } }
									gpm_random_res_mineral_deposit = yes
								}
								if = {
									limit = { event_target:res_location_planet = { has_modifier = gpm_ice_ring } }
									gpm_random_res_energy_deposit = yes
								}
								gpm_random_ring_feature = yes
							}
						}
					}
				}
				random_list = {
					90 = { }
					5 = {
						spawn_planet = {
							class = "pc_gpm_res"
							location = event_target:res_location_planet
							
							orbit_location = yes
							orbit_angle_offset = 40
							orbit_distance_offset = @large_close
							init_effect = {
								set_name = pc_gpm_res_anomaly_name
								set_planet_entity = {
									entity = "gpm_rings_metallic_large_RES"
								}
								surveyed = {
									set_surveyed = yes
								}
								set_planet_flag = gpm_is_RES
								prevent_anomaly = yes
								if = {
									limit = { event_target:res_location_planet = { has_modifier = gpm_metallic_ring } }
									gpm_random_res_mineral_deposit = yes
								}
								if = {
									limit = { event_target:res_location_planet = { has_modifier = gpm_ice_ring } }
									gpm_random_res_energy_deposit = yes
								}
								gpm_random_ring_feature = yes
							}
						}
					}
					5 = {
						spawn_planet = {
							class = "pc_gpm_res"
							location = event_target:res_location_planet
							
							orbit_location = yes
							orbit_angle_offset = 50
							orbit_distance_offset = @large_centre
							init_effect = {
								set_name = pc_gpm_res_anomaly_name
								set_planet_entity = {
									entity = "gpm_rings_metallic_large_RES"
								}
								surveyed = {
									set_surveyed = yes
								}
								set_planet_flag = gpm_is_RES
								prevent_anomaly = yes
								if = {
									limit = { event_target:res_location_planet = { has_modifier = gpm_metallic_ring } }
									gpm_random_res_mineral_deposit = yes
								}
								if = {
									limit = { event_target:res_location_planet = { has_modifier = gpm_ice_ring } }
									gpm_random_res_energy_deposit = yes
								}
								gpm_random_ring_feature = yes
							}
						}
					}
				}
				random_list = {
					55 = { }
					15 = {
						spawn_planet = {
							class = "pc_gpm_res"
							location = event_target:res_location_planet
							
							orbit_location = yes
							orbit_angle_offset = 90
							orbit_distance_offset = @large_close
							
							init_effect = {
								set_name = pc_gpm_res_anomaly_name
								set_planet_entity = {
									entity = "gpm_rings_metallic_large_RES"
								}
								surveyed = {
									set_surveyed = yes
								}
								set_planet_flag = gpm_is_RES
								prevent_anomaly = yes
								if = {
									limit = { event_target:res_location_planet = { has_modifier = gpm_metallic_ring } }
									gpm_random_res_mineral_deposit = yes
								}
								if = {
									limit = { event_target:res_location_planet = { has_modifier = gpm_ice_ring } }
									gpm_random_res_energy_deposit = yes
								}
								gpm_random_ring_feature = yes
							}		
						}
					}
					15 = {
						spawn_planet = {
							class = "pc_gpm_res"
							location = event_target:res_location_planet
							
							orbit_location = yes
							orbit_angle_offset = 100
							orbit_distance_offset = @large_centre
							
							init_effect = {
								set_name = pc_gpm_res_anomaly_name
								set_planet_entity = {
									entity = "gpm_rings_metallic_large_RES"
								}
								surveyed = {
									set_surveyed = yes
								}
								set_planet_flag = gpm_is_RES
								prevent_anomaly = yes
								if = {
									limit = { event_target:res_location_planet = { has_modifier = gpm_metallic_ring } }
									gpm_random_res_mineral_deposit = yes
								}
								if = {
									limit = { event_target:res_location_planet = { has_modifier = gpm_ice_ring } }
									gpm_random_res_energy_deposit = yes
								}
								gpm_random_ring_feature = yes
							}		
						}
					}
					15 = {
						spawn_planet = {
							class = "pc_gpm_res"
							location = event_target:res_location_planet
							
							orbit_location = yes
							orbit_angle_offset = 110
							orbit_distance_offset = @large_far
							
							init_effect = {
								set_name = pc_gpm_res_anomaly_name
								set_planet_entity = {
									entity = "gpm_rings_metallic_large_RES"
								}
								surveyed = {
									set_surveyed = yes
								}
								set_planet_flag = gpm_is_RES
								prevent_anomaly = yes
								if = {
									limit = { event_target:res_location_planet = { has_modifier = gpm_metallic_ring } }
									gpm_random_res_mineral_deposit = yes
								}
								if = {
									limit = { event_target:res_location_planet = { has_modifier = gpm_ice_ring } }
									gpm_random_res_energy_deposit = yes
								}
								gpm_random_ring_feature = yes
							}		
						}
					}
				}
				random_list = {
					90 = { }
					5 = {
						spawn_planet = {
							class = "pc_gpm_res"
							location = event_target:res_location_planet
							
							orbit_location = yes
							orbit_angle_offset = 130
							orbit_distance_offset = @large_close
							init_effect = {
								set_name = pc_gpm_res_anomaly_name
								set_planet_entity = {
									entity = "gpm_rings_metallic_large_RES"
								}
								surveyed = {
									set_surveyed = yes
								}
								set_planet_flag = gpm_is_RES
								prevent_anomaly = yes
								if = {
									limit = { event_target:res_location_planet = { has_modifier = gpm_metallic_ring } }
									gpm_random_res_mineral_deposit = yes
								}
								if = {
									limit = { event_target:res_location_planet = { has_modifier = gpm_ice_ring } }
									gpm_random_res_energy_deposit = yes
								}
								gpm_random_ring_feature = yes
							}
						}
					}
					5 = {
						spawn_planet = {
							class = "pc_gpm_res"
							location = event_target:res_location_planet
							
							orbit_location = yes
							orbit_angle_offset = 140
							orbit_distance_offset = @large_centre
							init_effect = {
								set_name = pc_gpm_res_anomaly_name
								set_planet_entity = {
									entity = "gpm_rings_metallic_large_RES"
								}
								surveyed = {
									set_surveyed = yes
								}
								set_planet_flag = gpm_is_RES
								prevent_anomaly = yes
								if = {
									limit = { event_target:res_location_planet = { has_modifier = gpm_metallic_ring } }
									gpm_random_res_mineral_deposit = yes
								}
								if = {
									limit = { event_target:res_location_planet = { has_modifier = gpm_ice_ring } }
									gpm_random_res_energy_deposit = yes
								}
								gpm_random_ring_feature = yes
							}
						}
					}
				}
				random_list = {
					70 = { }
					10 = {
						spawn_planet = {
							class = "pc_gpm_res"
							location = event_target:res_location_planet
							
							orbit_location = yes
							orbit_angle_offset = 180
							orbit_distance_offset = @large_close
							
							init_effect = {
								set_name = pc_gpm_res_anomaly_name
								set_planet_entity = {
									entity = "gpm_rings_metallic_large_RES"
								}
								surveyed = {
									set_surveyed = yes
								}
								set_planet_flag = gpm_is_RES
								prevent_anomaly = yes
								if = {
									limit = { event_target:res_location_planet = { has_modifier = gpm_metallic_ring } }
									gpm_random_res_mineral_deposit = yes
								}
								if = {
									limit = { event_target:res_location_planet = { has_modifier = gpm_ice_ring } }
									gpm_random_res_energy_deposit = yes
								}
								gpm_random_ring_feature = yes
							}		
						}
					}
					10 = {
						spawn_planet = {
							class = "pc_gpm_res"
							location = event_target:res_location_planet
							
							orbit_location = yes
							orbit_angle_offset = 190
							orbit_distance_offset = @large_centre
							
							init_effect = {
								set_name = pc_gpm_res_anomaly_name
								set_planet_entity = {
									entity = "gpm_rings_metallic_large_RES"
								}
								surveyed = {
									set_surveyed = yes
								}
								set_planet_flag = gpm_is_RES
								prevent_anomaly = yes
								if = {
									limit = { event_target:res_location_planet = { has_modifier = gpm_metallic_ring } }
									gpm_random_res_mineral_deposit = yes
								}
								if = {
									limit = { event_target:res_location_planet = { has_modifier = gpm_ice_ring } }
									gpm_random_res_energy_deposit = yes
								}
								gpm_random_ring_feature = yes
							}		
						}
					}
					10 = {
						spawn_planet = {
							class = "pc_gpm_res"
							location = event_target:res_location_planet
							
							orbit_location = yes
							orbit_angle_offset = 200
							orbit_distance_offset = @large_far
							
							init_effect = {
								set_name = pc_gpm_res_anomaly_name
								set_planet_entity = {
									entity = "gpm_rings_metallic_large_RES"
								}
								surveyed = {
									set_surveyed = yes
								}
								set_planet_flag = gpm_is_RES
								prevent_anomaly = yes
								if = {
									limit = { event_target:res_location_planet = { has_modifier = gpm_metallic_ring } }
									gpm_random_res_mineral_deposit = yes
								}
								if = {
									limit = { event_target:res_location_planet = { has_modifier = gpm_ice_ring } }
									gpm_random_res_energy_deposit = yes
								}
								gpm_random_ring_feature = yes
							}		
						}
					}
				}
				random_list = {
					90 = { }
					5 = {
						spawn_planet = {
							class = "pc_gpm_res"
							location = event_target:res_location_planet
							
							orbit_location = yes
							orbit_angle_offset = 220
							orbit_distance_offset = @large_close
							init_effect = {
								set_name = pc_gpm_res_anomaly_name
								set_planet_entity = {
									entity = "gpm_rings_metallic_large_RES"
								}
								surveyed = {
									set_surveyed = yes
								}
								set_planet_flag = gpm_is_RES
								prevent_anomaly = yes
								if = {
									limit = { event_target:res_location_planet = { has_modifier = gpm_metallic_ring } }
									gpm_random_res_mineral_deposit = yes
								}
								if = {
									limit = { event_target:res_location_planet = { has_modifier = gpm_ice_ring } }
									gpm_random_res_energy_deposit = yes
								}
								gpm_random_ring_feature = yes
							}
						}
					}
					5 = {
						spawn_planet = {
							class = "pc_gpm_res"
							location = event_target:res_location_planet
							
							orbit_location = yes
							orbit_angle_offset = 230
							orbit_distance_offset = @large_centre
							init_effect = {
								set_name = pc_gpm_res_anomaly_name
								set_planet_entity = {
									entity = "gpm_rings_metallic_large_RES"
								}
								surveyed = {
									set_surveyed = yes
								}
								set_planet_flag = gpm_is_RES
								prevent_anomaly = yes
								if = {
									limit = { event_target:res_location_planet = { has_modifier = gpm_metallic_ring } }
									gpm_random_res_mineral_deposit = yes
								}
								if = {
									limit = { event_target:res_location_planet = { has_modifier = gpm_ice_ring } }
									gpm_random_res_energy_deposit = yes
								}
								gpm_random_ring_feature = yes
							}
						}
					}
				}
				random_list = {
					85 = { }
					5 = {
						spawn_planet = {
							class = "pc_gpm_res"
							location = event_target:res_location_planet

							orbit_location = yes
							orbit_angle_offset = 270
							orbit_distance_offset = @large_close
							
							init_effect = {
								set_name = pc_gpm_res_anomaly_name
								set_planet_entity = {
									entity = "gpm_rings_metallic_large_RES"
								}
								surveyed = {
									set_surveyed = yes
								}
								set_planet_flag = gpm_is_RES
								prevent_anomaly = yes
								if = {
									limit = { event_target:res_location_planet = { has_modifier = gpm_metallic_ring } }
									gpm_random_res_mineral_deposit = yes
								}
								if = {
									limit = { event_target:res_location_planet = { has_modifier = gpm_ice_ring } }
									gpm_random_res_energy_deposit = yes
								}
								gpm_random_ring_feature = yes
							}		
						}
					}
					5 = {
						spawn_planet = {
							class = "pc_gpm_res"
							location = event_target:res_location_planet

							orbit_location = yes
							orbit_angle_offset = 280
							orbit_distance_offset = @large_centre
							
							init_effect = {
								set_name = pc_gpm_res_anomaly_name
								set_planet_entity = {
									entity = "gpm_rings_metallic_large_RES"
								}
								surveyed = {
									set_surveyed = yes
								}
								set_planet_flag = gpm_is_RES
								prevent_anomaly = yes
								if = {
									limit = { event_target:res_location_planet = { has_modifier = gpm_metallic_ring } }
									gpm_random_res_mineral_deposit = yes
								}
								if = {
									limit = { event_target:res_location_planet = { has_modifier = gpm_ice_ring } }
									gpm_random_res_energy_deposit = yes
								}
								gpm_random_ring_feature = yes
							}		
						}
					}
					5 = {
						spawn_planet = {
							class = "pc_gpm_res"
							location = event_target:res_location_planet

							orbit_location = yes
							orbit_angle_offset = 290
							orbit_distance_offset = @large_far
							
							init_effect = {
								set_name = pc_gpm_res_anomaly_name
								set_planet_entity = {
									entity = "gpm_rings_metallic_large_RES"
								}
								surveyed = {
									set_surveyed = yes
								}
								set_planet_flag = gpm_is_RES
								prevent_anomaly = yes
								if = {
									limit = { event_target:res_location_planet = { has_modifier = gpm_metallic_ring } }
									gpm_random_res_mineral_deposit = yes
								}
								if = {
									limit = { event_target:res_location_planet = { has_modifier = gpm_ice_ring } }
									gpm_random_res_energy_deposit = yes
								}
								gpm_random_ring_feature = yes
							}		
						}
					}
				}
				random_list = {
					90 = { }
					5 = {
						spawn_planet = {
							class = "pc_gpm_res"
							location = event_target:res_location_planet
							
							orbit_location = yes
							orbit_angle_offset = 310
							orbit_distance_offset = @large_close
							init_effect = {
								set_name = pc_gpm_res_anomaly_name
								set_planet_entity = {
									entity = "gpm_rings_metallic_large_RES"
								}
								surveyed = {
									set_surveyed = yes
								}
								set_planet_flag = gpm_is_RES
								prevent_anomaly = yes
								if = {
									limit = { event_target:res_location_planet = { has_modifier = gpm_metallic_ring } }
									gpm_random_res_mineral_deposit = yes
								}
								if = {
									limit = { event_target:res_location_planet = { has_modifier = gpm_ice_ring } }
									gpm_random_res_energy_deposit = yes
								}
								gpm_random_ring_feature = yes
							}
						}
					}
					5 = {
						spawn_planet = {
							class = "pc_gpm_res"
							location = event_target:res_location_planet
							
							orbit_location = yes
							orbit_angle_offset = 320
							orbit_distance_offset = @large_centre
							init_effect = {
								set_name = pc_gpm_res_anomaly_name
								set_planet_entity = {
									entity = "gpm_rings_metallic_large_RES"
								}
								surveyed = {
									set_surveyed = yes
								}
								set_planet_flag = gpm_is_RES
								prevent_anomaly = yes
								if = {
									limit = { event_target:res_location_planet = { has_modifier = gpm_metallic_ring } }
									gpm_random_res_mineral_deposit = yes
								}
								if = {
									limit = { event_target:res_location_planet = { has_modifier = gpm_ice_ring } }
									gpm_random_res_energy_deposit = yes
								}
								gpm_random_ring_feature = yes
							}
						}
					}
				}
			}
		}
	}
	# real space settings
	if = {
		limit = { has_global_flag = "has_real_space_mod" }
		if = {
			limit = {
				OR = {
					has_planet_flag =  gpm_rings_huge
					has_planet_flag =  gpm_rings_large
				}				
				NOT = { has_planet_flag = gpm_has_RES }
			}
		
			save_event_target_as = res_location_planet
			set_planet_flag = gpm_has_RES
			solar_system = {
				random_list = {
					40 = { }
					20 = {
						spawn_planet = {
							class = "pc_gpm_res"
							location = event_target:res_location_planet
							
							orbit_location = yes
							orbit_angle_offset = 0
							orbit_distance_offset = @large_close_rs
							init_effect = {
								set_name = pc_gpm_res_anomaly_name
								set_planet_entity = {
									entity = "gpm_rings_metallic_large_RES"
								}
								surveyed = {
									set_surveyed = yes
								}
								set_planet_flag = gpm_is_RES
								prevent_anomaly = yes
								if = {
									limit = { event_target:res_location_planet = { has_modifier = gpm_metallic_ring } }
									gpm_random_res_mineral_deposit = yes
								}
								if = {
									limit = { event_target:res_location_planet = { has_modifier = gpm_ice_ring } }
									gpm_random_res_energy_deposit = yes
								}
								gpm_random_ring_feature = yes
							}
						}
					}
					20 = {
						spawn_planet = {
							class = "pc_gpm_res"
							location = event_target:res_location_planet
							
							orbit_location = yes
							orbit_angle_offset = 10
							orbit_distance_offset = @large_centre_rs
							init_effect = {
								set_name = pc_gpm_res_anomaly_name
								set_planet_entity = {
									entity = "gpm_rings_metallic_large_RES"
								}
								surveyed = {
									set_surveyed = yes
								}
								set_planet_flag = gpm_is_RES
								prevent_anomaly = yes
								if = {
									limit = { event_target:res_location_planet = { has_modifier = gpm_metallic_ring } }
									gpm_random_res_mineral_deposit = yes
								}
								if = {
									limit = { event_target:res_location_planet = { has_modifier = gpm_ice_ring } }
									gpm_random_res_energy_deposit = yes
								}
								gpm_random_ring_feature = yes
							}
						}
					}
					20 = {
						spawn_planet = {
							class = "pc_gpm_res"
							location = event_target:res_location_planet
							
							orbit_location = yes
							orbit_angle_offset = 20
							orbit_distance_offset = @large_far_rs
							init_effect = {
								set_name = pc_gpm_res_anomaly_name
								set_planet_entity = {
									entity = "gpm_rings_metallic_large_RES"
								}
								surveyed = {
									set_surveyed = yes
								}
								set_planet_flag = gpm_is_RES
								prevent_anomaly = yes
								if = {
									limit = { event_target:res_location_planet = { has_modifier = gpm_metallic_ring } }
									gpm_random_res_mineral_deposit = yes
								}
								if = {
									limit = { event_target:res_location_planet = { has_modifier = gpm_ice_ring } }
									gpm_random_res_energy_deposit = yes
								}
								gpm_random_ring_feature = yes
							}
						}
					}
				}
				random_list = {
					90 = { }
					5 = {
						spawn_planet = {
							class = "pc_gpm_res"
							location = event_target:res_location_planet
							
							orbit_location = yes
							orbit_angle_offset = 40
							orbit_distance_offset = @large_close_rs
							init_effect = {
								set_name = pc_gpm_res_anomaly_name
								set_planet_entity = {
									entity = "gpm_rings_metallic_large_RES"
								}
								surveyed = {
									set_surveyed = yes
								}
								set_planet_flag = gpm_is_RES
								prevent_anomaly = yes
								if = {
									limit = { event_target:res_location_planet = { has_modifier = gpm_metallic_ring } }
									gpm_random_res_mineral_deposit = yes
								}
								if = {
									limit = { event_target:res_location_planet = { has_modifier = gpm_ice_ring } }
									gpm_random_res_energy_deposit = yes
								}
								gpm_random_ring_feature = yes
							}
						}
					}
					5 = {
						spawn_planet = {
							class = "pc_gpm_res"
							location = event_target:res_location_planet
							
							orbit_location = yes
							orbit_angle_offset = 50
							orbit_distance_offset = @large_centre_rs
							init_effect = {
								set_name = pc_gpm_res_anomaly_name
								set_planet_entity = {
									entity = "gpm_rings_metallic_large_RES"
								}
								surveyed = {
									set_surveyed = yes
								}
								set_planet_flag = gpm_is_RES
								prevent_anomaly = yes
								if = {
									limit = { event_target:res_location_planet = { has_modifier = gpm_metallic_ring } }
									gpm_random_res_mineral_deposit = yes
								}
								if = {
									limit = { event_target:res_location_planet = { has_modifier = gpm_ice_ring } }
									gpm_random_res_energy_deposit = yes
								}
								gpm_random_ring_feature = yes
							}
						}
					}
				}
				random_list = {
					55 = { }
					15 = {
						spawn_planet = {
							class = "pc_gpm_res"
							location = event_target:res_location_planet
							
							orbit_location = yes
							orbit_angle_offset = 90
							orbit_distance_offset = @large_close_rs
							
							init_effect = {
								set_name = pc_gpm_res_anomaly_name
								set_planet_entity = {
									entity = "gpm_rings_metallic_large_RES"
								}
								surveyed = {
									set_surveyed = yes
								}
								set_planet_flag = gpm_is_RES
								prevent_anomaly = yes
								if = {
									limit = { event_target:res_location_planet = { has_modifier = gpm_metallic_ring } }
									gpm_random_res_mineral_deposit = yes
								}
								if = {
									limit = { event_target:res_location_planet = { has_modifier = gpm_ice_ring } }
									gpm_random_res_energy_deposit = yes
								}
								gpm_random_ring_feature = yes
							}		
						}
					}
					15 = {
						spawn_planet = {
							class = "pc_gpm_res"
							location = event_target:res_location_planet
							
							orbit_location = yes
							orbit_angle_offset = 100
							orbit_distance_offset = @large_centre_rs
							
							init_effect = {
								set_name = pc_gpm_res_anomaly_name
								set_planet_entity = {
									entity = "gpm_rings_metallic_large_RES"
								}
								surveyed = {
									set_surveyed = yes
								}
								set_planet_flag = gpm_is_RES
								prevent_anomaly = yes
								if = {
									limit = { event_target:res_location_planet = { has_modifier = gpm_metallic_ring } }
									gpm_random_res_mineral_deposit = yes
								}
								if = {
									limit = { event_target:res_location_planet = { has_modifier = gpm_ice_ring } }
									gpm_random_res_energy_deposit = yes
								}
								gpm_random_ring_feature = yes
							}		
						}
					}
					15 = {
						spawn_planet = {
							class = "pc_gpm_res"
							location = event_target:res_location_planet
							
							orbit_location = yes
							orbit_angle_offset = 110
							orbit_distance_offset = @large_far_rs
							
							init_effect = {
								set_name = pc_gpm_res_anomaly_name
								set_planet_entity = {
									entity = "gpm_rings_metallic_large_RES"
								}
								surveyed = {
									set_surveyed = yes
								}
								set_planet_flag = gpm_is_RES
								prevent_anomaly = yes
								if = {
									limit = { event_target:res_location_planet = { has_modifier = gpm_metallic_ring } }
									gpm_random_res_mineral_deposit = yes
								}
								if = {
									limit = { event_target:res_location_planet = { has_modifier = gpm_ice_ring } }
									gpm_random_res_energy_deposit = yes
								}
								gpm_random_ring_feature = yes
							}		
						}
					}
				}
				random_list = {
					90 = { }
					5 = {
						spawn_planet = {
							class = "pc_gpm_res"
							location = event_target:res_location_planet
							
							orbit_location = yes
							orbit_angle_offset = 130
							orbit_distance_offset = @large_close_rs
							init_effect = {
								set_name = pc_gpm_res_anomaly_name
								set_planet_entity = {
									entity = "gpm_rings_metallic_large_RES"
								}
								surveyed = {
									set_surveyed = yes
								}
								set_planet_flag = gpm_is_RES
								prevent_anomaly = yes
								if = {
									limit = { event_target:res_location_planet = { has_modifier = gpm_metallic_ring } }
									gpm_random_res_mineral_deposit = yes
								}
								if = {
									limit = { event_target:res_location_planet = { has_modifier = gpm_ice_ring } }
									gpm_random_res_energy_deposit = yes
								}
								gpm_random_ring_feature = yes
							}
						}
					}
					5 = {
						spawn_planet = {
							class = "pc_gpm_res"
							location = event_target:res_location_planet
							
							orbit_location = yes
							orbit_angle_offset = 140
							orbit_distance_offset = @large_centre_rs
							init_effect = {
								set_name = pc_gpm_res_anomaly_name
								set_planet_entity = {
									entity = "gpm_rings_metallic_large_RES"
								}
								surveyed = {
									set_surveyed = yes
								}
								set_planet_flag = gpm_is_RES
								prevent_anomaly = yes
								if = {
									limit = { event_target:res_location_planet = { has_modifier = gpm_metallic_ring } }
									gpm_random_res_mineral_deposit = yes
								}
								if = {
									limit = { event_target:res_location_planet = { has_modifier = gpm_ice_ring } }
									gpm_random_res_energy_deposit = yes
								}
								gpm_random_ring_feature = yes
							}
						}
					}
				}
				random_list = {
					70 = { }
					10 = {
						spawn_planet = {
							class = "pc_gpm_res"
							location = event_target:res_location_planet
							
							orbit_location = yes
							orbit_angle_offset = 180
							orbit_distance_offset = @large_close_rs
							
							init_effect = {
								set_name = pc_gpm_res_anomaly_name
								set_planet_entity = {
									entity = "gpm_rings_metallic_large_RES"
								}
								surveyed = {
									set_surveyed = yes
								}
								set_planet_flag = gpm_is_RES
								prevent_anomaly = yes
								if = {
									limit = { event_target:res_location_planet = { has_modifier = gpm_metallic_ring } }
									gpm_random_res_mineral_deposit = yes
								}
								if = {
									limit = { event_target:res_location_planet = { has_modifier = gpm_ice_ring } }
									gpm_random_res_energy_deposit = yes
								}
								gpm_random_ring_feature = yes
							}		
						}
					}
					10 = {
						spawn_planet = {
							class = "pc_gpm_res"
							location = event_target:res_location_planet
							
							orbit_location = yes
							orbit_angle_offset = 190
							orbit_distance_offset = @large_centre_rs
							
							init_effect = {
								set_name = pc_gpm_res_anomaly_name
								set_planet_entity = {
									entity = "gpm_rings_metallic_large_RES"
								}
								surveyed = {
									set_surveyed = yes
								}
								set_planet_flag = gpm_is_RES
								prevent_anomaly = yes
								if = {
									limit = { event_target:res_location_planet = { has_modifier = gpm_metallic_ring } }
									gpm_random_res_mineral_deposit = yes
								}
								if = {
									limit = { event_target:res_location_planet = { has_modifier = gpm_ice_ring } }
									gpm_random_res_energy_deposit = yes
								}
								gpm_random_ring_feature = yes
							}		
						}
					}
					10 = {
						spawn_planet = {
							class = "pc_gpm_res"
							location = event_target:res_location_planet
							
							orbit_location = yes
							orbit_angle_offset = 200
							orbit_distance_offset = @large_far_rs
							
							init_effect = {
								set_name = pc_gpm_res_anomaly_name
								set_planet_entity = {
									entity = "gpm_rings_metallic_large_RES"
								}
								surveyed = {
									set_surveyed = yes
								}
								set_planet_flag = gpm_is_RES
								prevent_anomaly = yes
								if = {
									limit = { event_target:res_location_planet = { has_modifier = gpm_metallic_ring } }
									gpm_random_res_mineral_deposit = yes
								}
								if = {
									limit = { event_target:res_location_planet = { has_modifier = gpm_ice_ring } }
									gpm_random_res_energy_deposit = yes
								}
								gpm_random_ring_feature = yes
							}		
						}
					}
				}
				random_list = {
					90 = { }
					5 = {
						spawn_planet = {
							class = "pc_gpm_res"
							location = event_target:res_location_planet
							
							orbit_location = yes
							orbit_angle_offset = 220
							orbit_distance_offset = @large_close_rs
							init_effect = {
								set_name = pc_gpm_res_anomaly_name
								set_planet_entity = {
									entity = "gpm_rings_metallic_large_RES"
								}
								surveyed = {
									set_surveyed = yes
								}
								set_planet_flag = gpm_is_RES
								prevent_anomaly = yes
								if = {
									limit = { event_target:res_location_planet = { has_modifier = gpm_metallic_ring } }
									gpm_random_res_mineral_deposit = yes
								}
								if = {
									limit = { event_target:res_location_planet = { has_modifier = gpm_ice_ring } }
									gpm_random_res_energy_deposit = yes
								}
								gpm_random_ring_feature = yes
							}
						}
					}
					5 = {
						spawn_planet = {
							class = "pc_gpm_res"
							location = event_target:res_location_planet
							
							orbit_location = yes
							orbit_angle_offset = 230
							orbit_distance_offset = @large_centre_rs
							init_effect = {
								set_name = pc_gpm_res_anomaly_name
								set_planet_entity = {
									entity = "gpm_rings_metallic_large_RES"
								}
								surveyed = {
									set_surveyed = yes
								}
								set_planet_flag = gpm_is_RES
								prevent_anomaly = yes
								if = {
									limit = { event_target:res_location_planet = { has_modifier = gpm_metallic_ring } }
									gpm_random_res_mineral_deposit = yes
								}
								if = {
									limit = { event_target:res_location_planet = { has_modifier = gpm_ice_ring } }
									gpm_random_res_energy_deposit = yes
								}
								gpm_random_ring_feature = yes
							}
						}
					}
				}
				random_list = {
					85 = { }
					5 = {
						spawn_planet = {
							class = "pc_gpm_res"
							location = event_target:res_location_planet

							orbit_location = yes
							orbit_angle_offset = 270
							orbit_distance_offset = @large_close_rs
							
							init_effect = {
								set_name = pc_gpm_res_anomaly_name
								set_planet_entity = {
									entity = "gpm_rings_metallic_large_RES"
								}
								surveyed = {
									set_surveyed = yes
								}
								set_planet_flag = gpm_is_RES
								prevent_anomaly = yes
								if = {
									limit = { event_target:res_location_planet = { has_modifier = gpm_metallic_ring } }
									gpm_random_res_mineral_deposit = yes
								}
								if = {
									limit = { event_target:res_location_planet = { has_modifier = gpm_ice_ring } }
									gpm_random_res_energy_deposit = yes
								}
								gpm_random_ring_feature = yes
							}		
						}
					}
					5 = {
						spawn_planet = {
							class = "pc_gpm_res"
							location = event_target:res_location_planet

							orbit_location = yes
							orbit_angle_offset = 280
							orbit_distance_offset = @large_centre_rs
							
							init_effect = {
								set_name = pc_gpm_res_anomaly_name
								set_planet_entity = {
									entity = "gpm_rings_metallic_large_RES"
								}
								surveyed = {
									set_surveyed = yes
								}
								set_planet_flag = gpm_is_RES
								prevent_anomaly = yes
								if = {
									limit = { event_target:res_location_planet = { has_modifier = gpm_metallic_ring } }
									gpm_random_res_mineral_deposit = yes
								}
								if = {
									limit = { event_target:res_location_planet = { has_modifier = gpm_ice_ring } }
									gpm_random_res_energy_deposit = yes
								}
								gpm_random_ring_feature = yes
							}		
						}
					}
					5 = {
						spawn_planet = {
							class = "pc_gpm_res"
							location = event_target:res_location_planet

							orbit_location = yes
							orbit_angle_offset = 290
							orbit_distance_offset = @large_far_rs
							
							init_effect = {
								set_name = pc_gpm_res_anomaly_name
								set_planet_entity = {
									entity = "gpm_rings_metallic_large_RES"
								}
								surveyed = {
									set_surveyed = yes
								}
								set_planet_flag = gpm_is_RES
								prevent_anomaly = yes
								if = {
									limit = { event_target:res_location_planet = { has_modifier = gpm_metallic_ring } }
									gpm_random_res_mineral_deposit = yes
								}
								if = {
									limit = { event_target:res_location_planet = { has_modifier = gpm_ice_ring } }
									gpm_random_res_energy_deposit = yes
								}
								gpm_random_ring_feature = yes
							}		
						}
					}
				}
				random_list = {
					90 = { }
					5 = {
						spawn_planet = {
							class = "pc_gpm_res"
							location = event_target:res_location_planet
							
							orbit_location = yes
							orbit_angle_offset = 310
							orbit_distance_offset = @large_close_rs
							init_effect = {
								set_name = pc_gpm_res_anomaly_name
								set_planet_entity = {
									entity = "gpm_rings_metallic_large_RES"
								}
								surveyed = {
									set_surveyed = yes
								}
								set_planet_flag = gpm_is_RES
								prevent_anomaly = yes
								if = {
									limit = { event_target:res_location_planet = { has_modifier = gpm_metallic_ring } }
									gpm_random_res_mineral_deposit = yes
								}
								if = {
									limit = { event_target:res_location_planet = { has_modifier = gpm_ice_ring } }
									gpm_random_res_energy_deposit = yes
								}
								gpm_random_ring_feature = yes
							}
						}
					}
					5 = {
						spawn_planet = {
							class = "pc_gpm_res"
							location = event_target:res_location_planet
							
							orbit_location = yes
							orbit_angle_offset = 320
							orbit_distance_offset = @large_centre_rs
							init_effect = {
								set_name = pc_gpm_res_anomaly_name
								set_planet_entity = {
									entity = "gpm_rings_metallic_large_RES"
								}
								surveyed = {
									set_surveyed = yes
								}
								set_planet_flag = gpm_is_RES
								prevent_anomaly = yes
								if = {
									limit = { event_target:res_location_planet = { has_modifier = gpm_metallic_ring } }
									gpm_random_res_mineral_deposit = yes
								}
								if = {
									limit = { event_target:res_location_planet = { has_modifier = gpm_ice_ring } }
									gpm_random_res_energy_deposit = yes
								}
								gpm_random_ring_feature = yes
							}
						}
					}
				}
			}
		}
	}
}

# Planet Scope
gpm_spawn_medium_RES = {
	# Real space compatibility at the top to save on tedious coding. Also IF doesnt fucking work inside spawn_planet so cant make efficient and clean code. I cry
	if = {
		limit = { NOT = { has_global_flag = "has_real_space_mod" } }
		if = {
			limit = {
				has_planet_flag =  gpm_rings_medium
				NOT = { has_planet_flag = gpm_has_RES }
			}
		
			save_event_target_as = res_location_planet
			set_planet_flag = gpm_has_RES
			solar_system = {
				random_list = {
					40 = { }
					20 = {
						spawn_planet = {
							class = "pc_gpm_res"
							location = event_target:res_location_planet
							
							orbit_location = yes
							orbit_angle_offset = 0
							orbit_distance_offset = @medium_close
							init_effect = {
								set_name = pc_gpm_res_anomaly_name
								set_planet_entity = {
									entity = "gpm_rings_metallic_large_RES"
								}
								surveyed = {
									set_surveyed = yes
								}
								set_planet_flag = gpm_is_RES
								prevent_anomaly = yes
								if = {
									limit = { event_target:res_location_planet = { has_modifier = gpm_metallic_ring } }
									gpm_random_res_mineral_deposit = yes
								}
								if = {
									limit = { event_target:res_location_planet = { has_modifier = gpm_ice_ring } }
									gpm_random_res_energy_deposit = yes
								}
								gpm_random_ring_feature = yes
							}
						}
					}
					20 = {
						spawn_planet = {
							class = "pc_gpm_res"
							location = event_target:res_location_planet
							
							orbit_location = yes
							orbit_angle_offset = 10
							orbit_distance_offset = @medium_centre
							init_effect = {
								set_name = pc_gpm_res_anomaly_name
								set_planet_entity = {
									entity = "gpm_rings_metallic_large_RES"
								}
								surveyed = {
									set_surveyed = yes
								}
								set_planet_flag = gpm_is_RES
								prevent_anomaly = yes
								if = {
									limit = { event_target:res_location_planet = { has_modifier = gpm_metallic_ring } }
									gpm_random_res_mineral_deposit = yes
								}
								if = {
									limit = { event_target:res_location_planet = { has_modifier = gpm_ice_ring } }
									gpm_random_res_energy_deposit = yes
								}
								gpm_random_ring_feature = yes
							}
						}
					}
					20 = {
						spawn_planet = {
							class = "pc_gpm_res"
							location = event_target:res_location_planet
							
							orbit_location = yes
							orbit_angle_offset = 20
							orbit_distance_offset = @medium_far
							init_effect = {
								set_name = pc_gpm_res_anomaly_name
								set_planet_entity = {
									entity = "gpm_rings_metallic_large_RES"
								}
								surveyed = {
									set_surveyed = yes
								}
								set_planet_flag = gpm_is_RES
								prevent_anomaly = yes
								if = {
									limit = { event_target:res_location_planet = { has_modifier = gpm_metallic_ring } }
									gpm_random_res_mineral_deposit = yes
								}
								if = {
									limit = { event_target:res_location_planet = { has_modifier = gpm_ice_ring } }
									gpm_random_res_energy_deposit = yes
								}
								gpm_random_ring_feature = yes
							}
						}
					}
				}
				random_list = {
					90 = { }
					5 = {
						spawn_planet = {
							class = "pc_gpm_res"
							location = event_target:res_location_planet
							
							orbit_location = yes
							orbit_angle_offset = 40
							orbit_distance_offset = @medium_close
							init_effect = {
								set_name = pc_gpm_res_anomaly_name
								set_planet_entity = {
									entity = "gpm_rings_metallic_large_RES"
								}
								surveyed = {
									set_surveyed = yes
								}
								set_planet_flag = gpm_is_RES
								prevent_anomaly = yes
								if = {
									limit = { event_target:res_location_planet = { has_modifier = gpm_metallic_ring } }
									gpm_random_res_mineral_deposit = yes
								}
								if = {
									limit = { event_target:res_location_planet = { has_modifier = gpm_ice_ring } }
									gpm_random_res_energy_deposit = yes
								}
								gpm_random_ring_feature = yes
							}
						}
					}
					5 = {
						spawn_planet = {
							class = "pc_gpm_res"
							location = event_target:res_location_planet
							
							orbit_location = yes
							orbit_angle_offset = 50
							orbit_distance_offset = @medium_centre
							init_effect = {
								set_name = pc_gpm_res_anomaly_name
								set_planet_entity = {
									entity = "gpm_rings_metallic_large_RES"
								}
								surveyed = {
									set_surveyed = yes
								}
								set_planet_flag = gpm_is_RES
								prevent_anomaly = yes
								if = {
									limit = { event_target:res_location_planet = { has_modifier = gpm_metallic_ring } }
									gpm_random_res_mineral_deposit = yes
								}
								if = {
									limit = { event_target:res_location_planet = { has_modifier = gpm_ice_ring } }
									gpm_random_res_energy_deposit = yes
								}
								gpm_random_ring_feature = yes
							}
						}
					}
				}
				random_list = {
					61 = { }
					13 = {
						spawn_planet = {
							class = "pc_gpm_res"
							location = event_target:res_location_planet
							
							orbit_location = yes
							orbit_angle_offset = 90
							orbit_distance_offset = @medium_close
							
							init_effect = {
								set_name = pc_gpm_res_anomaly_name
								set_planet_entity = {
									entity = "gpm_rings_metallic_large_RES"
								}
								surveyed = {
									set_surveyed = yes
								}
								set_planet_flag = gpm_is_RES
								prevent_anomaly = yes
								if = {
									limit = { event_target:res_location_planet = { has_modifier = gpm_metallic_ring } }
									gpm_random_res_mineral_deposit = yes
								}
								if = {
									limit = { event_target:res_location_planet = { has_modifier = gpm_ice_ring } }
									gpm_random_res_energy_deposit = yes
								}
								gpm_random_ring_feature = yes
							}		
						}
					}
					13 = {
						spawn_planet = {
							class = "pc_gpm_res"
							location = event_target:res_location_planet
							
							orbit_location = yes
							orbit_angle_offset = 100
							orbit_distance_offset = @medium_centre
							
							init_effect = {
								set_name = pc_gpm_res_anomaly_name
								set_planet_entity = {
									entity = "gpm_rings_metallic_large_RES"
								}
								surveyed = {
									set_surveyed = yes
								}
								set_planet_flag = gpm_is_RES
								prevent_anomaly = yes
								if = {
									limit = { event_target:res_location_planet = { has_modifier = gpm_metallic_ring } }
									gpm_random_res_mineral_deposit = yes
								}
								if = {
									limit = { event_target:res_location_planet = { has_modifier = gpm_ice_ring } }
									gpm_random_res_energy_deposit = yes
								}
								gpm_random_ring_feature = yes
							}		
						}
					}
					13 = {
						spawn_planet = {
							class = "pc_gpm_res"
							location = event_target:res_location_planet
							
							orbit_location = yes
							orbit_angle_offset = 110
							orbit_distance_offset = @medium_far
							
							init_effect = {
								set_name = pc_gpm_res_anomaly_name
								set_planet_entity = {
									entity = "gpm_rings_metallic_large_RES"
								}
								surveyed = {
									set_surveyed = yes
								}
								set_planet_flag = gpm_is_RES
								prevent_anomaly = yes
								if = {
									limit = { event_target:res_location_planet = { has_modifier = gpm_metallic_ring } }
									gpm_random_res_mineral_deposit = yes
								}
								if = {
									limit = { event_target:res_location_planet = { has_modifier = gpm_ice_ring } }
									gpm_random_res_energy_deposit = yes
								}
								gpm_random_ring_feature = yes
							}		
						}
					}
				}
				random_list = {
					90 = { }
					5 = {
						spawn_planet = {
							class = "pc_gpm_res"
							location = event_target:res_location_planet
							
							orbit_location = yes
							orbit_angle_offset = 130
							orbit_distance_offset = @medium_close
							init_effect = {
								set_name = pc_gpm_res_anomaly_name
								set_planet_entity = {
									entity = "gpm_rings_metallic_large_RES"
								}
								surveyed = {
									set_surveyed = yes
								}
								set_planet_flag = gpm_is_RES
								prevent_anomaly = yes
								if = {
									limit = { event_target:res_location_planet = { has_modifier = gpm_metallic_ring } }
									gpm_random_res_mineral_deposit = yes
								}
								if = {
									limit = { event_target:res_location_planet = { has_modifier = gpm_ice_ring } }
									gpm_random_res_energy_deposit = yes
								}
								gpm_random_ring_feature = yes
							}
						}
					}
					5 = {
						spawn_planet = {
							class = "pc_gpm_res"
							location = event_target:res_location_planet
							
							orbit_location = yes
							orbit_angle_offset = 140
							orbit_distance_offset = @medium_centre
							init_effect = {
								set_name = pc_gpm_res_anomaly_name
								set_planet_entity = {
									entity = "gpm_rings_metallic_large_RES"
								}
								surveyed = {
									set_surveyed = yes
								}
								set_planet_flag = gpm_is_RES
								prevent_anomaly = yes
								if = {
									limit = { event_target:res_location_planet = { has_modifier = gpm_metallic_ring } }
									gpm_random_res_mineral_deposit = yes
								}
								if = {
									limit = { event_target:res_location_planet = { has_modifier = gpm_ice_ring } }
									gpm_random_res_energy_deposit = yes
								}
								gpm_random_ring_feature = yes
							}
						}
					}
				}
				random_list = {
					79 = { }
					7 = {
						spawn_planet = {
							class = "pc_gpm_res"
							location = event_target:res_location_planet
							
							orbit_location = yes
							orbit_angle_offset = 180
							orbit_distance_offset = @medium_close
							
							init_effect = {
								set_name = pc_gpm_res_anomaly_name
								set_planet_entity = {
									entity = "gpm_rings_metallic_large_RES"
								}
								surveyed = {
									set_surveyed = yes
								}
								set_planet_flag = gpm_is_RES
								prevent_anomaly = yes
								if = {
									limit = { event_target:res_location_planet = { has_modifier = gpm_metallic_ring } }
									gpm_random_res_mineral_deposit = yes
								}
								if = {
									limit = { event_target:res_location_planet = { has_modifier = gpm_ice_ring } }
									gpm_random_res_energy_deposit = yes
								}
								gpm_random_ring_feature = yes
							}		
						}
					}
					7 = {
						spawn_planet = {
							class = "pc_gpm_res"
							location = event_target:res_location_planet
							
							orbit_location = yes
							orbit_angle_offset = 190
							orbit_distance_offset = @medium_centre
							
							init_effect = {
								set_name = pc_gpm_res_anomaly_name
								set_planet_entity = {
									entity = "gpm_rings_metallic_large_RES"
								}
								surveyed = {
									set_surveyed = yes
								}
								set_planet_flag = gpm_is_RES
								prevent_anomaly = yes
								if = {
									limit = { event_target:res_location_planet = { has_modifier = gpm_metallic_ring } }
									gpm_random_res_mineral_deposit = yes
								}
								if = {
									limit = { event_target:res_location_planet = { has_modifier = gpm_ice_ring } }
									gpm_random_res_energy_deposit = yes
								}
								gpm_random_ring_feature = yes
							}		
						}
					}
					7 = {
						spawn_planet = {
							class = "pc_gpm_res"
							location = event_target:res_location_planet
							
							orbit_location = yes
							orbit_angle_offset = 200
							orbit_distance_offset = @medium_far
							
							init_effect = {
								set_name = pc_gpm_res_anomaly_name
								set_planet_entity = {
									entity = "gpm_rings_metallic_large_RES"
								}
								surveyed = {
									set_surveyed = yes
								}
								set_planet_flag = gpm_is_RES
								prevent_anomaly = yes
								if = {
									limit = { event_target:res_location_planet = { has_modifier = gpm_metallic_ring } }
									gpm_random_res_mineral_deposit = yes
								}
								if = {
									limit = { event_target:res_location_planet = { has_modifier = gpm_ice_ring } }
									gpm_random_res_energy_deposit = yes
								}
								gpm_random_ring_feature = yes
							}		
						}
					}
				}
				random_list = {
					90 = { }
					5 = {
						spawn_planet = {
							class = "pc_gpm_res"
							location = event_target:res_location_planet
							
							orbit_location = yes
							orbit_angle_offset = 220
							orbit_distance_offset = @medium_close
							init_effect = {
								set_name = pc_gpm_res_anomaly_name
								set_planet_entity = {
									entity = "gpm_rings_metallic_large_RES"
								}
								surveyed = {
									set_surveyed = yes
								}
								set_planet_flag = gpm_is_RES
								prevent_anomaly = yes
								if = {
									limit = { event_target:res_location_planet = { has_modifier = gpm_metallic_ring } }
									gpm_random_res_mineral_deposit = yes
								}
								if = {
									limit = { event_target:res_location_planet = { has_modifier = gpm_ice_ring } }
									gpm_random_res_energy_deposit = yes
								}
								gpm_random_ring_feature = yes
							}
						}
					}
					5 = {
						spawn_planet = {
							class = "pc_gpm_res"
							location = event_target:res_location_planet
							
							orbit_location = yes
							orbit_angle_offset = 230
							orbit_distance_offset = @medium_centre
							init_effect = {
								set_name = pc_gpm_res_anomaly_name
								set_planet_entity = {
									entity = "gpm_rings_metallic_large_RES"
								}
								surveyed = {
									set_surveyed = yes
								}
								set_planet_flag = gpm_is_RES
								prevent_anomaly = yes
								if = {
									limit = { event_target:res_location_planet = { has_modifier = gpm_metallic_ring } }
									gpm_random_res_mineral_deposit = yes
								}
								if = {
									limit = { event_target:res_location_planet = { has_modifier = gpm_ice_ring } }
									gpm_random_res_energy_deposit = yes
								}
								gpm_random_ring_feature = yes
							}
						}
					}
				}
				random_list = {
					94 = { }
					2 = {
						spawn_planet = {
							class = "pc_gpm_res"
							location = event_target:res_location_planet

							orbit_location = yes
							orbit_angle_offset = 270
							orbit_distance_offset = @medium_close
							
							init_effect = {
								set_name = pc_gpm_res_anomaly_name
								set_planet_entity = {
									entity = "gpm_rings_metallic_large_RES"
								}
								surveyed = {
									set_surveyed = yes
								}
								set_planet_flag = gpm_is_RES
								prevent_anomaly = yes
								if = {
									limit = { event_target:res_location_planet = { has_modifier = gpm_metallic_ring } }
									gpm_random_res_mineral_deposit = yes
								}
								if = {
									limit = { event_target:res_location_planet = { has_modifier = gpm_ice_ring } }
									gpm_random_res_energy_deposit = yes
								}
								gpm_random_ring_feature = yes
							}		
						}
					}
					2 = {
						spawn_planet = {
							class = "pc_gpm_res"
							location = event_target:res_location_planet

							orbit_location = yes
							orbit_angle_offset = 280
							orbit_distance_offset = @medium_centre
							
							init_effect = {
								set_name = pc_gpm_res_anomaly_name
								set_planet_entity = {
									entity = "gpm_rings_metallic_large_RES"
								}
								surveyed = {
									set_surveyed = yes
								}
								set_planet_flag = gpm_is_RES
								prevent_anomaly = yes
								if = {
									limit = { event_target:res_location_planet = { has_modifier = gpm_metallic_ring } }
									gpm_random_res_mineral_deposit = yes
								}
								if = {
									limit = { event_target:res_location_planet = { has_modifier = gpm_ice_ring } }
									gpm_random_res_energy_deposit = yes
								}
								gpm_random_ring_feature = yes
							}		
						}
					}
					2 = {
						spawn_planet = {
							class = "pc_gpm_res"
							location = event_target:res_location_planet

							orbit_location = yes
							orbit_angle_offset = 290
							orbit_distance_offset = @medium_far
							
							init_effect = {
								set_name = pc_gpm_res_anomaly_name
								set_planet_entity = {
									entity = "gpm_rings_metallic_large_RES"
								}
								surveyed = {
									set_surveyed = yes
								}
								set_planet_flag = gpm_is_RES
								prevent_anomaly = yes
								if = {
									limit = { event_target:res_location_planet = { has_modifier = gpm_metallic_ring } }
									gpm_random_res_mineral_deposit = yes
								}
								if = {
									limit = { event_target:res_location_planet = { has_modifier = gpm_ice_ring } }
									gpm_random_res_energy_deposit = yes
								}
								gpm_random_ring_feature = yes
							}		
						}
					}
				}
				random_list = {
					90 = { }
					5 = {
						spawn_planet = {
							class = "pc_gpm_res"
							location = event_target:res_location_planet
							
							orbit_location = yes
							orbit_angle_offset = 310
							orbit_distance_offset = @medium_close
							init_effect = {
								set_name = pc_gpm_res_anomaly_name
								set_planet_entity = {
									entity = "gpm_rings_metallic_large_RES"
								}
								surveyed = {
									set_surveyed = yes
								}
								set_planet_flag = gpm_is_RES
								prevent_anomaly = yes
								if = {
									limit = { event_target:res_location_planet = { has_modifier = gpm_metallic_ring } }
									gpm_random_res_mineral_deposit = yes
								}
								if = {
									limit = { event_target:res_location_planet = { has_modifier = gpm_ice_ring } }
									gpm_random_res_energy_deposit = yes
								}
								gpm_random_ring_feature = yes
							}
						}
					}
					5 = {
						spawn_planet = {
							class = "pc_gpm_res"
							location = event_target:res_location_planet
							
							orbit_location = yes
							orbit_angle_offset = 320
							orbit_distance_offset = @medium_centre
							init_effect = {
								set_name = pc_gpm_res_anomaly_name
								set_planet_entity = {
									entity = "gpm_rings_metallic_large_RES"
								}
								surveyed = {
									set_surveyed = yes
								}
								set_planet_flag = gpm_is_RES
								prevent_anomaly = yes
								if = {
									limit = { event_target:res_location_planet = { has_modifier = gpm_metallic_ring } }
									gpm_random_res_mineral_deposit = yes
								}
								if = {
									limit = { event_target:res_location_planet = { has_modifier = gpm_ice_ring } }
									gpm_random_res_energy_deposit = yes
								}
								gpm_random_ring_feature = yes
							}
						}
					}
				}
			}
		}
	}
	# real space settings
	if = {
		limit = { has_global_flag = "has_real_space_mod" }
		if = {
			limit = {
				has_planet_flag =  gpm_rings_medium
				NOT = { has_planet_flag = gpm_has_RES }
			}
		
			save_event_target_as = res_location_planet
			set_planet_flag = gpm_has_RES
			solar_system = {
				random_list = {
					40 = { }
					20 = {
						spawn_planet = {
							class = "pc_gpm_res"
							location = event_target:res_location_planet
							
							orbit_location = yes
							orbit_angle_offset = 0
							orbit_distance_offset = @medium_close_rs
							init_effect = {
								set_name = pc_gpm_res_anomaly_name
								set_planet_entity = {
									entity = "gpm_rings_metallic_large_RES"
								}
								surveyed = {
									set_surveyed = yes
								}
								set_planet_flag = gpm_is_RES
								prevent_anomaly = yes
								if = {
									limit = { event_target:res_location_planet = { has_modifier = gpm_metallic_ring } }
									gpm_random_res_mineral_deposit = yes
								}
								if = {
									limit = { event_target:res_location_planet = { has_modifier = gpm_ice_ring } }
									gpm_random_res_energy_deposit = yes
								}
								gpm_random_ring_feature = yes
							}
						}
					}
					20 = {
						spawn_planet = {
							class = "pc_gpm_res"
							location = event_target:res_location_planet
							
							orbit_location = yes
							orbit_angle_offset = 10
							orbit_distance_offset = @medium_centre_rs
							init_effect = {
								set_name = pc_gpm_res_anomaly_name
								set_planet_entity = {
									entity = "gpm_rings_metallic_large_RES"
								}
								surveyed = {
									set_surveyed = yes
								}
								set_planet_flag = gpm_is_RES
								prevent_anomaly = yes
								if = {
									limit = { event_target:res_location_planet = { has_modifier = gpm_metallic_ring } }
									gpm_random_res_mineral_deposit = yes
								}
								if = {
									limit = { event_target:res_location_planet = { has_modifier = gpm_ice_ring } }
									gpm_random_res_energy_deposit = yes
								}
								gpm_random_ring_feature = yes
							}
						}
					}
					20 = {
						spawn_planet = {
							class = "pc_gpm_res"
							location = event_target:res_location_planet
							
							orbit_location = yes
							orbit_angle_offset = 20
							orbit_distance_offset = @medium_far_rs
							init_effect = {
								set_name = pc_gpm_res_anomaly_name
								set_planet_entity = {
									entity = "gpm_rings_metallic_large_RES"
								}
								surveyed = {
									set_surveyed = yes
								}
								set_planet_flag = gpm_is_RES
								prevent_anomaly = yes
								if = {
									limit = { event_target:res_location_planet = { has_modifier = gpm_metallic_ring } }
									gpm_random_res_mineral_deposit = yes
								}
								if = {
									limit = { event_target:res_location_planet = { has_modifier = gpm_ice_ring } }
									gpm_random_res_energy_deposit = yes
								}
								gpm_random_ring_feature = yes
							}
						}
					}
				}
				random_list = {
					90 = { }
					5 = {
						spawn_planet = {
							class = "pc_gpm_res"
							location = event_target:res_location_planet
							
							orbit_location = yes
							orbit_angle_offset = 40
							orbit_distance_offset = @medium_close_rs
							init_effect = {
								set_name = pc_gpm_res_anomaly_name
								set_planet_entity = {
									entity = "gpm_rings_metallic_large_RES"
								}
								surveyed = {
									set_surveyed = yes
								}
								set_planet_flag = gpm_is_RES
								prevent_anomaly = yes
								if = {
									limit = { event_target:res_location_planet = { has_modifier = gpm_metallic_ring } }
									gpm_random_res_mineral_deposit = yes
								}
								if = {
									limit = { event_target:res_location_planet = { has_modifier = gpm_ice_ring } }
									gpm_random_res_energy_deposit = yes
								}
								gpm_random_ring_feature = yes
							}
						}
					}
					5 = {
						spawn_planet = {
							class = "pc_gpm_res"
							location = event_target:res_location_planet
							
							orbit_location = yes
							orbit_angle_offset = 50
							orbit_distance_offset = @medium_centre_rs
							init_effect = {
								set_name = pc_gpm_res_anomaly_name
								set_planet_entity = {
									entity = "gpm_rings_metallic_large_RES"
								}
								surveyed = {
									set_surveyed = yes
								}
								set_planet_flag = gpm_is_RES
								prevent_anomaly = yes
								if = {
									limit = { event_target:res_location_planet = { has_modifier = gpm_metallic_ring } }
									gpm_random_res_mineral_deposit = yes
								}
								if = {
									limit = { event_target:res_location_planet = { has_modifier = gpm_ice_ring } }
									gpm_random_res_energy_deposit = yes
								}
								gpm_random_ring_feature = yes
							}
						}
					}
				}
				random_list = {
					61 = { }
					13 = {
						spawn_planet = {
							class = "pc_gpm_res"
							location = event_target:res_location_planet
							
							orbit_location = yes
							orbit_angle_offset = 90
							orbit_distance_offset = @medium_close_rs
							
							init_effect = {
								set_name = pc_gpm_res_anomaly_name
								set_planet_entity = {
									entity = "gpm_rings_metallic_large_RES"
								}
								surveyed = {
									set_surveyed = yes
								}
								set_planet_flag = gpm_is_RES
								prevent_anomaly = yes
								if = {
									limit = { event_target:res_location_planet = { has_modifier = gpm_metallic_ring } }
									gpm_random_res_mineral_deposit = yes
								}
								if = {
									limit = { event_target:res_location_planet = { has_modifier = gpm_ice_ring } }
									gpm_random_res_energy_deposit = yes
								}
								gpm_random_ring_feature = yes
							}		
						}
					}
					13 = {
						spawn_planet = {
							class = "pc_gpm_res"
							location = event_target:res_location_planet
							
							orbit_location = yes
							orbit_angle_offset = 100
							orbit_distance_offset = @medium_centre_rs
							
							init_effect = {
								set_name = pc_gpm_res_anomaly_name
								set_planet_entity = {
									entity = "gpm_rings_metallic_large_RES"
								}
								surveyed = {
									set_surveyed = yes
								}
								set_planet_flag = gpm_is_RES
								prevent_anomaly = yes
								if = {
									limit = { event_target:res_location_planet = { has_modifier = gpm_metallic_ring } }
									gpm_random_res_mineral_deposit = yes
								}
								if = {
									limit = { event_target:res_location_planet = { has_modifier = gpm_ice_ring } }
									gpm_random_res_energy_deposit = yes
								}
								gpm_random_ring_feature = yes
							}		
						}
					}
					13 = {
						spawn_planet = {
							class = "pc_gpm_res"
							location = event_target:res_location_planet
							
							orbit_location = yes
							orbit_angle_offset = 110
							orbit_distance_offset = @medium_far_rs
							
							init_effect = {
								set_name = pc_gpm_res_anomaly_name
								set_planet_entity = {
									entity = "gpm_rings_metallic_large_RES"
								}
								surveyed = {
									set_surveyed = yes
								}
								set_planet_flag = gpm_is_RES
								prevent_anomaly = yes
								if = {
									limit = { event_target:res_location_planet = { has_modifier = gpm_metallic_ring } }
									gpm_random_res_mineral_deposit = yes
								}
								if = {
									limit = { event_target:res_location_planet = { has_modifier = gpm_ice_ring } }
									gpm_random_res_energy_deposit = yes
								}
								gpm_random_ring_feature = yes
							}		
						}
					}
				}
				random_list = {
					90 = { }
					5 = {
						spawn_planet = {
							class = "pc_gpm_res"
							location = event_target:res_location_planet
							
							orbit_location = yes
							orbit_angle_offset = 130
							orbit_distance_offset = @medium_close_rs
							init_effect = {
								set_name = pc_gpm_res_anomaly_name
								set_planet_entity = {
									entity = "gpm_rings_metallic_large_RES"
								}
								surveyed = {
									set_surveyed = yes
								}
								set_planet_flag = gpm_is_RES
								prevent_anomaly = yes
								if = {
									limit = { event_target:res_location_planet = { has_modifier = gpm_metallic_ring } }
									gpm_random_res_mineral_deposit = yes
								}
								if = {
									limit = { event_target:res_location_planet = { has_modifier = gpm_ice_ring } }
									gpm_random_res_energy_deposit = yes
								}
								gpm_random_ring_feature = yes
							}
						}
					}
					5 = {
						spawn_planet = {
							class = "pc_gpm_res"
							location = event_target:res_location_planet
							
							orbit_location = yes
							orbit_angle_offset = 140
							orbit_distance_offset = @medium_centre_rs
							init_effect = {
								set_name = pc_gpm_res_anomaly_name
								set_planet_entity = {
									entity = "gpm_rings_metallic_large_RES"
								}
								surveyed = {
									set_surveyed = yes
								}
								set_planet_flag = gpm_is_RES
								prevent_anomaly = yes
								if = {
									limit = { event_target:res_location_planet = { has_modifier = gpm_metallic_ring } }
									gpm_random_res_mineral_deposit = yes
								}
								if = {
									limit = { event_target:res_location_planet = { has_modifier = gpm_ice_ring } }
									gpm_random_res_energy_deposit = yes
								}
								gpm_random_ring_feature = yes
							}
						}
					}
				}
				random_list = {
					79 = { }
					7 = {
						spawn_planet = {
							class = "pc_gpm_res"
							location = event_target:res_location_planet
							
							orbit_location = yes
							orbit_angle_offset = 180
							orbit_distance_offset = @medium_close_rs
							
							init_effect = {
								set_name = pc_gpm_res_anomaly_name
								set_planet_entity = {
									entity = "gpm_rings_metallic_large_RES"
								}
								surveyed = {
									set_surveyed = yes
								}
								set_planet_flag = gpm_is_RES
								prevent_anomaly = yes
								if = {
									limit = { event_target:res_location_planet = { has_modifier = gpm_metallic_ring } }
									gpm_random_res_mineral_deposit = yes
								}
								if = {
									limit = { event_target:res_location_planet = { has_modifier = gpm_ice_ring } }
									gpm_random_res_energy_deposit = yes
								}
								gpm_random_ring_feature = yes
							}		
						}
					}
					7 = {
						spawn_planet = {
							class = "pc_gpm_res"
							location = event_target:res_location_planet
							
							orbit_location = yes
							orbit_angle_offset = 190
							orbit_distance_offset = @medium_centre_rs
							
							init_effect = {
								set_name = pc_gpm_res_anomaly_name
								set_planet_entity = {
									entity = "gpm_rings_metallic_large_RES"
								}
								surveyed = {
									set_surveyed = yes
								}
								set_planet_flag = gpm_is_RES
								prevent_anomaly = yes
								if = {
									limit = { event_target:res_location_planet = { has_modifier = gpm_metallic_ring } }
									gpm_random_res_mineral_deposit = yes
								}
								if = {
									limit = { event_target:res_location_planet = { has_modifier = gpm_ice_ring } }
									gpm_random_res_energy_deposit = yes
								}
								gpm_random_ring_feature = yes
							}		
						}
					}
					7 = {
						spawn_planet = {
							class = "pc_gpm_res"
							location = event_target:res_location_planet
							
							orbit_location = yes
							orbit_angle_offset = 200
							orbit_distance_offset = @medium_far_rs
							
							init_effect = {
								set_name = pc_gpm_res_anomaly_name
								set_planet_entity = {
									entity = "gpm_rings_metallic_large_RES"
								}
								surveyed = {
									set_surveyed = yes
								}
								set_planet_flag = gpm_is_RES
								prevent_anomaly = yes
								if = {
									limit = { event_target:res_location_planet = { has_modifier = gpm_metallic_ring } }
									gpm_random_res_mineral_deposit = yes
								}
								if = {
									limit = { event_target:res_location_planet = { has_modifier = gpm_ice_ring } }
									gpm_random_res_energy_deposit = yes
								}
								gpm_random_ring_feature = yes
							}		
						}
					}
				}
				random_list = {
					90 = { }
					5 = {
						spawn_planet = {
							class = "pc_gpm_res"
							location = event_target:res_location_planet
							
							orbit_location = yes
							orbit_angle_offset = 220
							orbit_distance_offset = @medium_close_rs
							init_effect = {
								set_name = pc_gpm_res_anomaly_name
								set_planet_entity = {
									entity = "gpm_rings_metallic_large_RES"
								}
								surveyed = {
									set_surveyed = yes
								}
								set_planet_flag = gpm_is_RES
								prevent_anomaly = yes
								if = {
									limit = { event_target:res_location_planet = { has_modifier = gpm_metallic_ring } }
									gpm_random_res_mineral_deposit = yes
								}
								if = {
									limit = { event_target:res_location_planet = { has_modifier = gpm_ice_ring } }
									gpm_random_res_energy_deposit = yes
								}
								gpm_random_ring_feature = yes
							}
						}
					}
					5 = {
						spawn_planet = {
							class = "pc_gpm_res"
							location = event_target:res_location_planet
							
							orbit_location = yes
							orbit_angle_offset = 230
							orbit_distance_offset = @medium_centre_rs
							init_effect = {
								set_name = pc_gpm_res_anomaly_name
								set_planet_entity = {
									entity = "gpm_rings_metallic_large_RES"
								}
								surveyed = {
									set_surveyed = yes
								}
								set_planet_flag = gpm_is_RES
								prevent_anomaly = yes
								if = {
									limit = { event_target:res_location_planet = { has_modifier = gpm_metallic_ring } }
									gpm_random_res_mineral_deposit = yes
								}
								if = {
									limit = { event_target:res_location_planet = { has_modifier = gpm_ice_ring } }
									gpm_random_res_energy_deposit = yes
								}
								gpm_random_ring_feature = yes
							}
						}
					}
				}
				random_list = {
					94 = { }
					2 = {
						spawn_planet = {
							class = "pc_gpm_res"
							location = event_target:res_location_planet

							orbit_location = yes
							orbit_angle_offset = 270
							orbit_distance_offset = @medium_close_rs
							
							init_effect = {
								set_name = pc_gpm_res_anomaly_name
								set_planet_entity = {
									entity = "gpm_rings_metallic_large_RES"
								}
								surveyed = {
									set_surveyed = yes
								}
								set_planet_flag = gpm_is_RES
								prevent_anomaly = yes
								if = {
									limit = { event_target:res_location_planet = { has_modifier = gpm_metallic_ring } }
									gpm_random_res_mineral_deposit = yes
								}
								if = {
									limit = { event_target:res_location_planet = { has_modifier = gpm_ice_ring } }
									gpm_random_res_energy_deposit = yes
								}
								gpm_random_ring_feature = yes
							}		
						}
					}
					2 = {
						spawn_planet = {
							class = "pc_gpm_res"
							location = event_target:res_location_planet

							orbit_location = yes
							orbit_angle_offset = 280
							orbit_distance_offset = @medium_centre_rs
							
							init_effect = {
								set_name = pc_gpm_res_anomaly_name
								set_planet_entity = {
									entity = "gpm_rings_metallic_large_RES"
								}
								surveyed = {
									set_surveyed = yes
								}
								set_planet_flag = gpm_is_RES
								prevent_anomaly = yes
								if = {
									limit = { event_target:res_location_planet = { has_modifier = gpm_metallic_ring } }
									gpm_random_res_mineral_deposit = yes
								}
								if = {
									limit = { event_target:res_location_planet = { has_modifier = gpm_ice_ring } }
									gpm_random_res_energy_deposit = yes
								}
								gpm_random_ring_feature = yes
							}		
						}
					}
					2 = {
						spawn_planet = {
							class = "pc_gpm_res"
							location = event_target:res_location_planet

							orbit_location = yes
							orbit_angle_offset = 290
							orbit_distance_offset = @medium_far_rs
							
							init_effect = {
								set_name = pc_gpm_res_anomaly_name
								set_planet_entity = {
									entity = "gpm_rings_metallic_large_RES"
								}
								surveyed = {
									set_surveyed = yes
								}
								set_planet_flag = gpm_is_RES
								prevent_anomaly = yes
								if = {
									limit = { event_target:res_location_planet = { has_modifier = gpm_metallic_ring } }
									gpm_random_res_mineral_deposit = yes
								}
								if = {
									limit = { event_target:res_location_planet = { has_modifier = gpm_ice_ring } }
									gpm_random_res_energy_deposit = yes
								}
								gpm_random_ring_feature = yes
							}		
						}
					}
				}
				random_list = {
					90 = { }
					5 = {
						spawn_planet = {
							class = "pc_gpm_res"
							location = event_target:res_location_planet
							
							orbit_location = yes
							orbit_angle_offset = 310
							orbit_distance_offset = @medium_close_rs
							init_effect = {
								set_name = pc_gpm_res_anomaly_name
								set_planet_entity = {
									entity = "gpm_rings_metallic_large_RES"
								}
								surveyed = {
									set_surveyed = yes
								}
								set_planet_flag = gpm_is_RES
								prevent_anomaly = yes
								if = {
									limit = { event_target:res_location_planet = { has_modifier = gpm_metallic_ring } }
									gpm_random_res_mineral_deposit = yes
								}
								if = {
									limit = { event_target:res_location_planet = { has_modifier = gpm_ice_ring } }
									gpm_random_res_energy_deposit = yes
								}
								gpm_random_ring_feature = yes
							}
						}
					}
					5 = {
						spawn_planet = {
							class = "pc_gpm_res"
							location = event_target:res_location_planet
							
							orbit_location = yes
							orbit_angle_offset = 320
							orbit_distance_offset = @medium_centre_rs
							init_effect = {
								set_name = pc_gpm_res_anomaly_name
								set_planet_entity = {
									entity = "gpm_rings_metallic_large_RES"
								}
								surveyed = {
									set_surveyed = yes
								}
								set_planet_flag = gpm_is_RES
								prevent_anomaly = yes
								if = {
									limit = { event_target:res_location_planet = { has_modifier = gpm_metallic_ring } }
									gpm_random_res_mineral_deposit = yes
								}
								if = {
									limit = { event_target:res_location_planet = { has_modifier = gpm_ice_ring } }
									gpm_random_res_energy_deposit = yes
								}
								gpm_random_ring_feature = yes
							}
						}
					}
				}
			}
		}
	}
}

# Planet Scope
gpm_spawn_small_RES = {
	# Real space compatibility at the top to save on tedious coding. Also IF doesnt fucking work inside spawn_planet so cant make efficient and clean code. I cry
	if = {
		limit = { NOT = { has_global_flag = "has_real_space_mod" } }
		if = {
			limit = {
				has_planet_flag =  gpm_rings_small
				NOT = { has_planet_flag = gpm_has_RES }
			}
		
			save_event_target_as = res_location_planet
			set_planet_flag = gpm_has_RES
			solar_system = {
				random_list = {
					40 = { }
					20 = {
						spawn_planet = {
							class = "pc_gpm_res"
							location = event_target:res_location_planet
							
							orbit_location = yes
							orbit_angle_offset = 0
							orbit_distance_offset = @small_close
							init_effect = {
								set_name = pc_gpm_res_anomaly_name
								set_planet_entity = {
									entity = "gpm_rings_metallic_large_RES"
								}
								surveyed = {
									set_surveyed = yes
								}
								set_planet_flag = gpm_is_RES
								prevent_anomaly = yes
								if = {
									limit = { event_target:res_location_planet = { has_modifier = gpm_metallic_ring } }
									gpm_random_res_mineral_deposit = yes
								}
								if = {
									limit = { event_target:res_location_planet = { has_modifier = gpm_ice_ring } }
									gpm_random_res_energy_deposit = yes
								}
							}
						}
					}
					20 = {
						spawn_planet = {
							class = "pc_gpm_res"
							location = event_target:res_location_planet
							
							orbit_location = yes
							orbit_angle_offset = 10
							orbit_distance_offset = @small_centre
							init_effect = {
								set_name = pc_gpm_res_anomaly_name
								set_planet_entity = {
									entity = "gpm_rings_metallic_large_RES"
								}
								surveyed = {
									set_surveyed = yes
								}
								set_planet_flag = gpm_is_RES
								prevent_anomaly = yes
								if = {
									limit = { event_target:res_location_planet = { has_modifier = gpm_metallic_ring } }
									gpm_random_res_mineral_deposit = yes
								}
								if = {
									limit = { event_target:res_location_planet = { has_modifier = gpm_ice_ring } }
									gpm_random_res_energy_deposit = yes
								}
							}
						}
					}
					20 = {
						spawn_planet = {
							class = "pc_gpm_res"
							location = event_target:res_location_planet
							
							orbit_location = yes
							orbit_angle_offset = 20
							orbit_distance_offset = @small_far
							init_effect = {
								set_name = pc_gpm_res_anomaly_name
								set_planet_entity = {
									entity = "gpm_rings_metallic_large_RES"
								}
								surveyed = {
									set_surveyed = yes
								}
								set_planet_flag = gpm_is_RES
								prevent_anomaly = yes
								if = {
									limit = { event_target:res_location_planet = { has_modifier = gpm_metallic_ring } }
									gpm_random_res_mineral_deposit = yes
								}
								if = {
									limit = { event_target:res_location_planet = { has_modifier = gpm_ice_ring } }
									gpm_random_res_energy_deposit = yes
								}
							}
						}
					}
				}
				random_list = {
					61 = { }
					13 = {
						spawn_planet = {
							class = "pc_gpm_res"
							location = event_target:res_location_planet
							
							orbit_location = yes
							orbit_angle_offset = 90
							orbit_distance_offset = @small_close
							
							init_effect = {
								set_name = pc_gpm_res_anomaly_name
								set_planet_entity = {
									entity = "gpm_rings_metallic_large_RES"
								}
								surveyed = {
									set_surveyed = yes
								}
								set_planet_flag = gpm_is_RES
								prevent_anomaly = yes
								if = {
									limit = { event_target:res_location_planet = { has_modifier = gpm_metallic_ring } }
									gpm_random_res_mineral_deposit = yes
								}
								if = {
									limit = { event_target:res_location_planet = { has_modifier = gpm_ice_ring } }
									gpm_random_res_energy_deposit = yes
								}
							}		
						}
					}
					13 = {
						spawn_planet = {
							class = "pc_gpm_res"
							location = event_target:res_location_planet
							
							orbit_location = yes
							orbit_angle_offset = 100
							orbit_distance_offset = @small_centre
							
							init_effect = {
								set_name = pc_gpm_res_anomaly_name
								set_planet_entity = {
									entity = "gpm_rings_metallic_large_RES"
								}
								surveyed = {
									set_surveyed = yes
								}
								set_planet_flag = gpm_is_RES
								prevent_anomaly = yes
								if = {
									limit = { event_target:res_location_planet = { has_modifier = gpm_metallic_ring } }
									gpm_random_res_mineral_deposit = yes
								}
								if = {
									limit = { event_target:res_location_planet = { has_modifier = gpm_ice_ring } }
									gpm_random_res_energy_deposit = yes
								}
							}		
						}
					}
					13 = {
						spawn_planet = {
							class = "pc_gpm_res"
							location = event_target:res_location_planet
							
							orbit_location = yes
							orbit_angle_offset = 110
							orbit_distance_offset = @small_far
							
							init_effect = {
								set_name = pc_gpm_res_anomaly_name
								set_planet_entity = {
									entity = "gpm_rings_metallic_large_RES"
								}
								surveyed = {
									set_surveyed = yes
								}
								set_planet_flag = gpm_is_RES
								prevent_anomaly = yes
								if = {
									limit = { event_target:res_location_planet = { has_modifier = gpm_metallic_ring } }
									gpm_random_res_mineral_deposit = yes
								}
								if = {
									limit = { event_target:res_location_planet = { has_modifier = gpm_ice_ring } }
									gpm_random_res_energy_deposit = yes
								}
							}		
						}
					}
				}
				random_list = {
					79 = { }
					7 = {
						spawn_planet = {
							class = "pc_gpm_res"
							location = event_target:res_location_planet
							
							orbit_location = yes
							orbit_angle_offset = 180
							orbit_distance_offset = @small_close
							
							init_effect = {
								set_name = pc_gpm_res_anomaly_name
								set_planet_entity = {
									entity = "gpm_rings_metallic_large_RES"
								}
								surveyed = {
									set_surveyed = yes
								}
								set_planet_flag = gpm_is_RES
								prevent_anomaly = yes
								if = {
									limit = { event_target:res_location_planet = { has_modifier = gpm_metallic_ring } }
									gpm_random_res_mineral_deposit = yes
								}
								if = {
									limit = { event_target:res_location_planet = { has_modifier = gpm_ice_ring } }
									gpm_random_res_energy_deposit = yes
								}
							}		
						}
					}
					7 = {
						spawn_planet = {
							class = "pc_gpm_res"
							location = event_target:res_location_planet
							
							orbit_location = yes
							orbit_angle_offset = 190
							orbit_distance_offset = @small_centre
							
							init_effect = {
								set_name = pc_gpm_res_anomaly_name
								set_planet_entity = {
									entity = "gpm_rings_metallic_large_RES"
								}
								surveyed = {
									set_surveyed = yes
								}
								set_planet_flag = gpm_is_RES
								prevent_anomaly = yes
								if = {
									limit = { event_target:res_location_planet = { has_modifier = gpm_metallic_ring } }
									gpm_random_res_mineral_deposit = yes
								}
								if = {
									limit = { event_target:res_location_planet = { has_modifier = gpm_ice_ring } }
									gpm_random_res_energy_deposit = yes
								}
							}		
						}
					}
					7 = {
						spawn_planet = {
							class = "pc_gpm_res"
							location = event_target:res_location_planet
							
							orbit_location = yes
							orbit_angle_offset = 200
							orbit_distance_offset = @small_far
							
							init_effect = {
								set_name = pc_gpm_res_anomaly_name
								set_planet_entity = {
									entity = "gpm_rings_metallic_large_RES"
								}
								surveyed = {
									set_surveyed = yes
								}
								set_planet_flag = gpm_is_RES
								prevent_anomaly = yes
								if = {
									limit = { event_target:res_location_planet = { has_modifier = gpm_metallic_ring } }
									gpm_random_res_mineral_deposit = yes
								}
								if = {
									limit = { event_target:res_location_planet = { has_modifier = gpm_ice_ring } }
									gpm_random_res_energy_deposit = yes
								}
							}		
						}
					}
				}
				random_list = {
					94 = { }
					2 = {
						spawn_planet = {
							class = "pc_gpm_res"
							location = event_target:res_location_planet

							orbit_location = yes
							orbit_angle_offset = 270
							orbit_distance_offset = @small_close
							
							init_effect = {
								set_name = pc_gpm_res_anomaly_name
								set_planet_entity = {
									entity = "gpm_rings_metallic_large_RES"
								}
								surveyed = {
									set_surveyed = yes
								}
								set_planet_flag = gpm_is_RES
								prevent_anomaly = yes
								if = {
									limit = { event_target:res_location_planet = { has_modifier = gpm_metallic_ring } }
									gpm_random_res_mineral_deposit = yes
								}
								if = {
									limit = { event_target:res_location_planet = { has_modifier = gpm_ice_ring } }
									gpm_random_res_energy_deposit = yes
								}
							}		
						}
					}
					2 = {
						spawn_planet = {
							class = "pc_gpm_res"
							location = event_target:res_location_planet

							orbit_location = yes
							orbit_angle_offset = 280
							orbit_distance_offset = @small_centre
							
							init_effect = {
								set_name = pc_gpm_res_anomaly_name
								set_planet_entity = {
									entity = "gpm_rings_metallic_large_RES"
								}
								surveyed = {
									set_surveyed = yes
								}
								set_planet_flag = gpm_is_RES
								prevent_anomaly = yes
								if = {
									limit = { event_target:res_location_planet = { has_modifier = gpm_metallic_ring } }
									gpm_random_res_mineral_deposit = yes
								}
								if = {
									limit = { event_target:res_location_planet = { has_modifier = gpm_ice_ring } }
									gpm_random_res_energy_deposit = yes
								}
							}		
						}
					}
					2 = {
						spawn_planet = {
							class = "pc_gpm_res"
							location = event_target:res_location_planet

							orbit_location = yes
							orbit_angle_offset = 290
							orbit_distance_offset = @small_far
							
							init_effect = {
								set_name = pc_gpm_res_anomaly_name
								set_planet_entity = {
									entity = "gpm_rings_metallic_large_RES"
								}
								surveyed = {
									set_surveyed = yes
								}
								set_planet_flag = gpm_is_RES
								prevent_anomaly = yes
								if = {
									limit = { event_target:res_location_planet = { has_modifier = gpm_metallic_ring } }
									gpm_random_res_mineral_deposit = yes
								}
								if = {
									limit = { event_target:res_location_planet = { has_modifier = gpm_ice_ring } }
									gpm_random_res_energy_deposit = yes
								}
							}		
						}
					}
				}
			}
		}
	}
	# real space settings
	if = {
		limit = { has_global_flag = "has_real_space_mod" }
		if = {
			limit = {
				OR = {
					has_planet_flag =  gpm_rings_huge
					has_planet_flag = has_rings_01_large
					has_planet_flag = has_rings_02_large
					has_planet_flag = has_rings_03_large
					has_planet_flag = has_rings_04_large
					# has_planet_flag = has_rings_01_small
					# has_planet_flag = has_rings_02_small
					# has_planet_flag = has_rings_03_small
					# has_planet_flag = has_rings_04_small
					# has_planet_flag = has_rings_01_thin
					# has_planet_flag = has_rings_02_thin
					# has_planet_flag = has_rings_03_thin
					# has_planet_flag = has_rings_01_low
					# has_planet_flag = has_rings_02_low
					has_planet_flag = has_rings_01_sparse
					has_planet_flag = has_rings_02_sparse
					has_planet_flag = has_rings_03_sparse
					has_planet_flag = has_rings_04_sparse
					# has_planet_flag = has_rings_01_rare
					# has_planet_flag = has_rings_02_rare
				}
				NOT = { has_planet_flag = gpm_has_RES }
			}
		
			save_event_target_as = res_location_planet
			set_planet_flag = gpm_has_RES
			solar_system = {
				random_list = {
					40 = { }
					20 = {
						spawn_planet = {
							class = "pc_gpm_res"
							location = event_target:res_location_planet
							
							orbit_location = yes
							orbit_angle_offset = 0
							orbit_distance_offset = @small_close_rs
							init_effect = {
								set_name = pc_gpm_res_anomaly_name
								set_planet_entity = {
									entity = "gpm_rings_metallic_large_RES"
								}
								surveyed = {
									set_surveyed = yes
								}
								set_planet_flag = gpm_is_RES
								prevent_anomaly = yes
								if = {
									limit = { event_target:res_location_planet = { has_modifier = gpm_metallic_ring } }
									gpm_random_res_mineral_deposit = yes
								}
								if = {
									limit = { event_target:res_location_planet = { has_modifier = gpm_ice_ring } }
									gpm_random_res_energy_deposit = yes
								}
							}
						}
					}
					20 = {
						spawn_planet = {
							class = "pc_gpm_res"
							location = event_target:res_location_planet
							
							orbit_location = yes
							orbit_angle_offset = 10
							orbit_distance_offset = @small_centre_rs
							init_effect = {
								set_name = pc_gpm_res_anomaly_name
								set_planet_entity = {
									entity = "gpm_rings_metallic_large_RES"
								}
								surveyed = {
									set_surveyed = yes
								}
								set_planet_flag = gpm_is_RES
								prevent_anomaly = yes
								if = {
									limit = { event_target:res_location_planet = { has_modifier = gpm_metallic_ring } }
									gpm_random_res_mineral_deposit = yes
								}
								if = {
									limit = { event_target:res_location_planet = { has_modifier = gpm_ice_ring } }
									gpm_random_res_energy_deposit = yes
								}
							}
						}
					}
					20 = {
						spawn_planet = {
							class = "pc_gpm_res"
							location = event_target:res_location_planet
							
							orbit_location = yes
							orbit_angle_offset = 20
							orbit_distance_offset = @small_far_rs
							init_effect = {
								set_name = pc_gpm_res_anomaly_name
								set_planet_entity = {
									entity = "gpm_rings_metallic_large_RES"
								}
								surveyed = {
									set_surveyed = yes
								}
								set_planet_flag = gpm_is_RES
								prevent_anomaly = yes
								if = {
									limit = { event_target:res_location_planet = { has_modifier = gpm_metallic_ring } }
									gpm_random_res_mineral_deposit = yes
								}
								if = {
									limit = { event_target:res_location_planet = { has_modifier = gpm_ice_ring } }
									gpm_random_res_energy_deposit = yes
								}
							}
						}
					}
				}
				random_list = {
					61 = { }
					13 = {
						spawn_planet = {
							class = "pc_gpm_res"
							location = event_target:res_location_planet
							
							orbit_location = yes
							orbit_angle_offset = 90
							orbit_distance_offset = @small_close_rs
							
							init_effect = {
								set_name = pc_gpm_res_anomaly_name
								set_planet_entity = {
									entity = "gpm_rings_metallic_large_RES"
								}
								surveyed = {
									set_surveyed = yes
								}
								set_planet_flag = gpm_is_RES
								prevent_anomaly = yes
								if = {
									limit = { event_target:res_location_planet = { has_modifier = gpm_metallic_ring } }
									gpm_random_res_mineral_deposit = yes
								}
								if = {
									limit = { event_target:res_location_planet = { has_modifier = gpm_ice_ring } }
									gpm_random_res_energy_deposit = yes
								}
							}		
						}
					}
					13 = {
						spawn_planet = {
							class = "pc_gpm_res"
							location = event_target:res_location_planet
							
							orbit_location = yes
							orbit_angle_offset = 100
							orbit_distance_offset = @small_centre_rs
							
							init_effect = {
								set_name = pc_gpm_res_anomaly_name
								set_planet_entity = {
									entity = "gpm_rings_metallic_large_RES"
								}
								surveyed = {
									set_surveyed = yes
								}
								set_planet_flag = gpm_is_RES
								prevent_anomaly = yes
								if = {
									limit = { event_target:res_location_planet = { has_modifier = gpm_metallic_ring } }
									gpm_random_res_mineral_deposit = yes
								}
								if = {
									limit = { event_target:res_location_planet = { has_modifier = gpm_ice_ring } }
									gpm_random_res_energy_deposit = yes
								}
							}		
						}
					}
					13 = {
						spawn_planet = {
							class = "pc_gpm_res"
							location = event_target:res_location_planet
							
							orbit_location = yes
							orbit_angle_offset = 110
							orbit_distance_offset = @small_far_rs
							
							init_effect = {
								set_name = pc_gpm_res_anomaly_name
								set_planet_entity = {
									entity = "gpm_rings_metallic_large_RES"
								}
								surveyed = {
									set_surveyed = yes
								}
								set_planet_flag = gpm_is_RES
								prevent_anomaly = yes
								if = {
									limit = { event_target:res_location_planet = { has_modifier = gpm_metallic_ring } }
									gpm_random_res_mineral_deposit = yes
								}
								if = {
									limit = { event_target:res_location_planet = { has_modifier = gpm_ice_ring } }
									gpm_random_res_energy_deposit = yes
								}
							}		
						}
					}
				}
				random_list = {
					79 = { }
					7 = {
						spawn_planet = {
							class = "pc_gpm_res"
							location = event_target:res_location_planet
							
							orbit_location = yes
							orbit_angle_offset = 180
							orbit_distance_offset = @small_close_rs
							
							init_effect = {
								set_name = pc_gpm_res_anomaly_name
								set_planet_entity = {
									entity = "gpm_rings_metallic_large_RES"
								}
								surveyed = {
									set_surveyed = yes
								}
								set_planet_flag = gpm_is_RES
								prevent_anomaly = yes
								if = {
									limit = { event_target:res_location_planet = { has_modifier = gpm_metallic_ring } }
									gpm_random_res_mineral_deposit = yes
								}
								if = {
									limit = { event_target:res_location_planet = { has_modifier = gpm_ice_ring } }
									gpm_random_res_energy_deposit = yes
								}
							}		
						}
					}
					7 = {
						spawn_planet = {
							class = "pc_gpm_res"
							location = event_target:res_location_planet
							
							orbit_location = yes
							orbit_angle_offset = 190
							orbit_distance_offset = @small_centre_rs
							
							init_effect = {
								set_name = pc_gpm_res_anomaly_name
								set_planet_entity = {
									entity = "gpm_rings_metallic_large_RES"
								}
								surveyed = {
									set_surveyed = yes
								}
								set_planet_flag = gpm_is_RES
								prevent_anomaly = yes
								if = {
									limit = { event_target:res_location_planet = { has_modifier = gpm_metallic_ring } }
									gpm_random_res_mineral_deposit = yes
								}
								if = {
									limit = { event_target:res_location_planet = { has_modifier = gpm_ice_ring } }
									gpm_random_res_energy_deposit = yes
								}
							}		
						}
					}
					7 = {
						spawn_planet = {
							class = "pc_gpm_res"
							location = event_target:res_location_planet
							
							orbit_location = yes
							orbit_angle_offset = 200
							orbit_distance_offset = @small_far_rs
							
							init_effect = {
								set_name = pc_gpm_res_anomaly_name
								set_planet_entity = {
									entity = "gpm_rings_metallic_large_RES"
								}
								surveyed = {
									set_surveyed = yes
								}
								set_planet_flag = gpm_is_RES
								prevent_anomaly = yes
								if = {
									limit = { event_target:res_location_planet = { has_modifier = gpm_metallic_ring } }
									gpm_random_res_mineral_deposit = yes
								}
								if = {
									limit = { event_target:res_location_planet = { has_modifier = gpm_ice_ring } }
									gpm_random_res_energy_deposit = yes
								}
							}		
						}
					}
				}
				random_list = {
					94 = { }
					2 = {
						spawn_planet = {
							class = "pc_gpm_res"
							location = event_target:res_location_planet

							orbit_location = yes
							orbit_angle_offset = 270
							orbit_distance_offset = @small_close_rs
							
							init_effect = {
								set_name = pc_gpm_res_anomaly_name
								set_planet_entity = {
									entity = "gpm_rings_metallic_large_RES"
								}
								surveyed = {
									set_surveyed = yes
								}
								set_planet_flag = gpm_is_RES
								prevent_anomaly = yes
								if = {
									limit = { event_target:res_location_planet = { has_modifier = gpm_metallic_ring } }
									gpm_random_res_mineral_deposit = yes
								}
								if = {
									limit = { event_target:res_location_planet = { has_modifier = gpm_ice_ring } }
									gpm_random_res_energy_deposit = yes
								}
							}		
						}
					}
					2 = {
						spawn_planet = {
							class = "pc_gpm_res"
							location = event_target:res_location_planet

							orbit_location = yes
							orbit_angle_offset = 280
							orbit_distance_offset = @small_centre_rs
							
							init_effect = {
								set_name = pc_gpm_res_anomaly_name
								set_planet_entity = {
									entity = "gpm_rings_metallic_large_RES"
								}
								surveyed = {
									set_surveyed = yes
								}
								set_planet_flag = gpm_is_RES
								prevent_anomaly = yes
								if = {
									limit = { event_target:res_location_planet = { has_modifier = gpm_metallic_ring } }
									gpm_random_res_mineral_deposit = yes
								}
								if = {
									limit = { event_target:res_location_planet = { has_modifier = gpm_ice_ring } }
									gpm_random_res_energy_deposit = yes
								}
							}		
						}
					}
					2 = {
						spawn_planet = {
							class = "pc_gpm_res"
							location = event_target:res_location_planet

							orbit_location = yes
							orbit_angle_offset = 290
							orbit_distance_offset = @small_far_rs
							
							init_effect = {
								set_name = pc_gpm_res_anomaly_name
								set_planet_entity = {
									entity = "gpm_rings_metallic_large_RES"
								}
								surveyed = {
									set_surveyed = yes
								}
								set_planet_flag = gpm_is_RES
								prevent_anomaly = yes
								if = {
									limit = { event_target:res_location_planet = { has_modifier = gpm_metallic_ring } }
									gpm_random_res_mineral_deposit = yes
								}
								if = {
									limit = { event_target:res_location_planet = { has_modifier = gpm_ice_ring } }
									gpm_random_res_energy_deposit = yes
								}
							}		
						}
					}
				}
			}
		}
	}
}