
### Цикл покупки ИИ улучшений



# НАПАДЕНИЕ
apsr_enclave_assault_ai_store = {
	if = {
		limit = {
			NOT = {
				AND = {
					has_country_flag = apsr_enclave_assault_button_01_purchase
					has_country_flag = apsr_enclave_assault_button_02_purchase
					has_country_flag = apsr_enclave_assault_button_03_purchase
					has_country_flag = apsr_enclave_assault_button_04_purchase
					has_country_flag = apsr_enclave_assault_button_05_purchase
					has_country_flag = apsr_enclave_assault_button_06_purchase
					has_country_flag = apsr_enclave_assault_button_07_purchase
					has_country_flag = apsr_enclave_assault_button_08_purchase
					has_country_flag = apsr_enclave_assault_button_09_purchase
					has_country_flag = apsr_enclave_assault_button_10_purchase	
				}				
			}		
		}
		while = {
			count = 10
			random_list = {
				10 = {
					modifier = {
						factor = 0
						OR = {
							has_country_flag = apsr_enclave_assault_button_01_purchase
							has_resource = { type = apsr_knowledge amount < 750 }
						}
					}
					add_resource = { apsr_knowledge = -750 }
					set_country_flag = apsr_enclave_assault_button_01_purchase
					give_technology = { tech = tech_apsr_enclave_assault_button_01_bonus }
					change_variable = { which = apsr_ancients_count value = 1 }
				}
				10 = {
					modifier = {
						factor = 0
						OR = {
							has_country_flag = apsr_enclave_assault_button_02_purchase
							has_resource = { type = apsr_knowledge amount < 750 }
						}
					}
					add_resource = { apsr_knowledge = -750 }
					set_country_flag = apsr_enclave_assault_button_02_purchase
					give_technology = { tech = tech_apsr_enclave_assault_button_02_bonus }
					change_variable = { which = apsr_ancients_count value = 1 }
				}
				10 = {
					modifier = {
						factor = 0
						OR = {
							has_country_flag = apsr_enclave_assault_button_03_purchase
							has_resource = { type = apsr_knowledge amount < 750 }
						}
					}
					add_resource = { apsr_knowledge = -750 }
					set_country_flag = apsr_enclave_assault_button_03_purchase
					give_technology = { tech = tech_apsr_enclave_assault_button_03_bonus }
					change_variable = { which = apsr_ancients_count value = 1 }
				}
				10 = {
					modifier = {
						factor = 0
						OR = {
							has_country_flag = apsr_enclave_assault_button_04_purchase
							has_resource = { type = apsr_knowledge amount < 750 }
						}
					}
					add_resource = { apsr_knowledge = -750 }
					set_country_flag = apsr_enclave_assault_button_04_purchase
					give_technology = { tech = tech_apsr_enclave_assault_button_04_bonus }
					change_variable = { which = apsr_ancients_count value = 1 }
				}
				10 = {
					modifier = {
						factor = 0
						OR = {
							has_country_flag = apsr_enclave_assault_button_05_purchase
							has_resource = { type = apsr_knowledge amount < 750 }
						}
					}
					add_resource = { apsr_knowledge = -750 }
					set_country_flag = apsr_enclave_assault_button_05_purchase
					give_technology = { tech = tech_apsr_enclave_assault_button_05_bonus }
					change_variable = { which = apsr_ancients_count value = 1 }
				}
				10 = {
					modifier = {
						factor = 0
						OR = {
							has_country_flag = apsr_enclave_assault_button_06_purchase
							has_resource = { type = apsr_knowledge amount < 750 }
						}
					}
					add_resource = { apsr_knowledge = -750 }
					set_country_flag = apsr_enclave_assault_button_06_purchase
					give_technology = { tech = tech_apsr_enclave_assault_button_06_bonus }
					change_variable = { which = apsr_ancients_count value = 1 }
				}
				10 = {
					modifier = {
						factor = 0
						OR = {
							has_country_flag = apsr_enclave_assault_button_07_purchase
							has_resource = { type = apsr_knowledge amount < 750 }
						}
					}
					add_resource = { apsr_knowledge = -750 }
					set_country_flag = apsr_enclave_assault_button_07_purchase
					give_technology = { tech = tech_apsr_enclave_assault_button_07_bonus }
					change_variable = { which = apsr_ancients_count value = 1 }
				}
				10 = {
					modifier = {
						factor = 0
						OR = {
							has_country_flag = apsr_enclave_assault_button_08_purchase
							has_resource = { type = apsr_knowledge amount < 750 }
						}
					}
					add_resource = { apsr_knowledge = -750 }
					set_country_flag = apsr_enclave_assault_button_08_purchase
					give_technology = { tech = tech_apsr_enclave_assault_button_08_bonus }
					change_variable = { which = apsr_ancients_count value = 1 }
				}
				10 = {
					modifier = {
						factor = 0
						OR = {
							has_country_flag = apsr_enclave_assault_button_09_purchase
							has_resource = { type = apsr_knowledge amount < 750 }
						}
					}
					add_resource = { apsr_knowledge = -750 }
					set_country_flag = apsr_enclave_assault_button_09_purchase
					give_technology = { tech = tech_apsr_enclave_assault_button_09_bonus }
					change_variable = { which = apsr_ancients_count value = 1 }
				}
				10 = {
					modifier = {
						factor = 0
						OR = {
							has_country_flag = apsr_enclave_assault_button_10_purchase
							has_resource = { type = apsr_knowledge amount < 750 }
						}
					}
					add_resource = { apsr_knowledge = -750 }
					set_country_flag = apsr_enclave_assault_button_10_purchase
					give_technology = { tech = tech_apsr_enclave_assault_button_10_bonus }
					change_variable = { which = apsr_ancients_count value = 1 }
				}
				1 = {
					# выход остатка цикла при трате знаний или покупке всех улучшений
				}
			}
		}
	}
	else_if = {
		limit = {
			NOT = {
				AND = {
					has_country_flag = apsr_enclave_assault_button_11_purchase
					has_country_flag = apsr_enclave_assault_button_12_purchase
					has_country_flag = apsr_enclave_assault_button_13_purchase
					has_country_flag = apsr_enclave_assault_button_14_purchase
					OR = {
						has_country_flag = apsr_enclave_assault_button_15_purchase
						has_country_flag = apsr_enclave_assault_button_15ext_purchase	
					}
				}
			}		
		}
		while = {
			count = 5
			random_list = {
				10 = {
					modifier = {
						factor = 0
						OR = {
							has_country_flag = apsr_enclave_assault_button_11_purchase
							has_resource = { type = apsr_knowledge amount < 1350 }
						}
					}
					add_resource = { apsr_knowledge = -1350 }
					set_country_flag = apsr_enclave_assault_button_11_purchase
					give_technology = { tech = tech_apsr_enclave_assault_button_11_bonus }
					change_variable = { which = apsr_ancients_count value = 3 }
				}
				10 = {
					modifier = {
						factor = 0
						OR = {
							has_country_flag = apsr_enclave_assault_button_12_purchase
							has_resource = { type = apsr_knowledge amount < 1350 }
						}
					}
					add_resource = { apsr_knowledge = -1350 }
					set_country_flag = apsr_enclave_assault_button_12_purchase
					give_technology = { tech = tech_apsr_enclave_assault_button_12_bonus }
					change_variable = { which = apsr_ancients_count value = 3 }
				}
				10 = {
					modifier = {
						factor = 0
						OR = {
							has_country_flag = apsr_enclave_assault_button_13_purchase
							has_resource = { type = apsr_knowledge amount < 1350 }
						}
					}
					add_resource = { apsr_knowledge = -1350 }
					set_country_flag = apsr_enclave_assault_button_13_purchase
					give_technology = { tech = tech_apsr_enclave_assault_button_13_bonus }
					change_variable = { which = apsr_ancients_count value = 3 }
				}
				10 = {
					modifier = {
						factor = 0
						OR = {
							has_country_flag = apsr_enclave_assault_button_14_purchase
							has_resource = { type = apsr_knowledge amount < 1350 }
						}
					}
					add_resource = { apsr_knowledge = -1350 }
					set_country_flag = apsr_enclave_assault_button_14_purchase
					give_technology = { tech = tech_apsr_enclave_assault_button_14_bonus }
					change_variable = { which = apsr_ancients_count value = 3 }
				}
				10 = {
					modifier = {
						factor = 0
						OR = {
							has_country_flag = apsr_enclave_assault_button_15_purchase
							has_resource = { type = apsr_knowledge amount < 1350 }
							is_unfriendly = yes
						}
					}
					add_resource = { apsr_knowledge = -1350 }
					set_country_flag = apsr_enclave_assault_button_15_purchase
					give_technology = { tech = tech_apsr_enclave_assault_button_15_bonus }
					change_variable = { which = apsr_ancients_count value = 3 }
				}
				10 = {
					modifier = {
						factor = 0
						OR = {
							has_country_flag = apsr_enclave_assault_button_15ext_purchase
							has_resource = { type = apsr_knowledge amount < 1350 }
							NOT = {
								is_unfriendly = yes
							}
						}
					}
					add_resource = { apsr_knowledge = -1350 }
					set_country_flag = apsr_enclave_assault_button_15ext_purchase
					give_technology = { tech = tech_apsr_enclave_assault_button_15ext_bonus }
					change_variable = { which = apsr_ancients_count value = 3 }
				}
				1 = {
					# выход остатка цикла при трате знаний или покупке всех улучшений
				}
			}
		}	
	}
	else_if = {
		limit = {
			NOT = {
				AND = {
					has_country_flag = apsr_enclave_assault_button_16_purchase
					has_country_flag = apsr_enclave_assault_button_17_purchase
					OR = {
						has_country_flag = apsr_enclave_assault_button_18_purchase
						has_country_flag = apsr_enclave_assault_button_18ext_purchase
					}
					has_country_flag = apsr_enclave_assault_button_19_purchase
					has_country_flag = apsr_enclave_assault_button_20_purchase
				}				
			}		
		}
		while = {
			count = 3
			random_list = {
				10 = {
					modifier = {
						factor = 0
						OR = {
							has_country_flag = apsr_enclave_assault_button_16_purchase
							has_resource = { type = apsr_knowledge amount < 2430 }
						}
					}
					add_resource = { apsr_knowledge = -2430 }
					set_country_flag = apsr_enclave_assault_button_16_purchase
					give_technology = { tech = tech_apsr_enclave_assault_button_16_bonus }
					change_variable = { which = apsr_ancients_count value = 7 }
				}
				10 = {
					modifier = {
						factor = 0
						OR = {
							has_country_flag = apsr_enclave_assault_button_17_purchase
							has_resource = { type = apsr_knowledge amount < 2430 }
						}
					}
					add_resource = { apsr_knowledge = -2430 }
					set_country_flag = apsr_enclave_assault_button_17_purchase
					give_technology = { tech = tech_apsr_enclave_assault_button_17_bonus }
					change_variable = { which = apsr_ancients_count value = 7 }
				}
				10 = {
					modifier = {
						factor = 0
						OR = {
							has_country_flag = apsr_enclave_assault_button_18_purchase
							has_resource = { type = apsr_knowledge amount < 2430 }
							is_unfriendly = yes
						}
					}
					add_resource = { apsr_knowledge = -2430 }
					set_country_flag = apsr_enclave_assault_button_18_purchase
					give_technology = { tech = tech_apsr_enclave_assault_button_18_bonus }
					change_variable = { which = apsr_ancients_count value = 7 }
				}
				10 = {
					modifier = {
						factor = 0
						OR = {
							has_country_flag = apsr_enclave_assault_button_18ext_purchase
							has_resource = { type = apsr_knowledge amount < 2430 }
							NOT = {
								is_unfriendly = yes
							}
						}
					}
					add_resource = { apsr_knowledge = -2430 }
					set_country_flag = apsr_enclave_assault_button_18ext_purchase
					give_technology = { tech = tech_apsr_enclave_assault_button_18ext_bonus }
					change_variable = { which = apsr_ancients_count value = 7 }
				}
				10 = {
					modifier = {
						factor = 0
						OR = {
							has_country_flag = apsr_enclave_assault_button_19_purchase
							has_resource = { type = apsr_knowledge amount < 2430 }
						}
					}
					add_resource = { apsr_knowledge = -2430 }
					set_country_flag = apsr_enclave_assault_button_19_purchase
					give_technology = { tech = tech_apsr_enclave_assault_button_19_bonus }
					change_variable = { which = apsr_ancients_count value = 7 }
				}
				10 = {
					modifier = {
						factor = 0
						OR = {
							has_country_flag = apsr_enclave_assault_button_20_purchase
							has_resource = { type = apsr_knowledge amount < 2430 }
						}
					}
					add_resource = { apsr_knowledge = -2430 }
					set_country_flag = apsr_enclave_assault_button_20_purchase
					give_technology = { tech = tech_apsr_enclave_assault_button_20_bonus }
					change_variable = { which = apsr_ancients_count value = 7 }
				}
				1 = {
					# выход остатка цикла при трате знаний или покупке всех улучшений
				}
			}
		}	
	}
	else = {
		# выход
	}
}



# ОБОРОНА
apsr_enclave_defence_ai_store = {
	if = {
		limit = {
			NOT = {
				AND = {
					has_country_flag = apsr_enclave_defence_button_01_purchase
					has_country_flag = apsr_enclave_defence_button_02_purchase
					has_country_flag = apsr_enclave_defence_button_03_purchase
					has_country_flag = apsr_enclave_defence_button_04_purchase
					has_country_flag = apsr_enclave_defence_button_05_purchase
					has_country_flag = apsr_enclave_defence_button_06_purchase
					has_country_flag = apsr_enclave_defence_button_07_purchase
					has_country_flag = apsr_enclave_defence_button_08_purchase
					has_country_flag = apsr_enclave_defence_button_09_purchase
					has_country_flag = apsr_enclave_defence_button_10_purchase	
				}				
			}		
		}
		while = {
			count = 10
			random_list = {
				10 = {
					modifier = {
						factor = 0
						OR = {
							has_country_flag = apsr_enclave_defence_button_01_purchase
							has_resource = { type = apsr_knowledge amount < 750 }
						}
					}
					add_resource = { apsr_knowledge = -750 }
					set_country_flag = apsr_enclave_defence_button_01_purchase
					give_technology = { tech = tech_apsr_enclave_defence_button_01_bonus }
					change_variable = { which = apsr_ancients_count value = 1 }
				}
				10 = {
					modifier = {
						factor = 0
						OR = {
							has_country_flag = apsr_enclave_defence_button_02_purchase
							has_resource = { type = apsr_knowledge amount < 750 }
						}
					}
					add_resource = { apsr_knowledge = -750 }
					set_country_flag = apsr_enclave_defence_button_02_purchase
					give_technology = { tech = tech_apsr_enclave_defence_button_02_bonus }
					change_variable = { which = apsr_ancients_count value = 1 }
				}
				10 = {
					modifier = {
						factor = 0
						OR = {
							has_country_flag = apsr_enclave_defence_button_03_purchase
							has_resource = { type = apsr_knowledge amount < 750 }
						}
					}
					add_resource = { apsr_knowledge = -750 }
					set_country_flag = apsr_enclave_defence_button_03_purchase
					give_technology = { tech = tech_apsr_enclave_defence_button_03_bonus }
					change_variable = { which = apsr_ancients_count value = 1 }
				}
				10 = {
					modifier = {
						factor = 0
						OR = {
							has_country_flag = apsr_enclave_defence_button_04_purchase
							has_resource = { type = apsr_knowledge amount < 750 }
						}
					}
					add_resource = { apsr_knowledge = -750 }
					set_country_flag = apsr_enclave_defence_button_04_purchase
					give_technology = { tech = tech_apsr_enclave_defence_button_04_bonus }
					change_variable = { which = apsr_ancients_count value = 1 }
				}
				10 = {
					modifier = {
						factor = 0
						OR = {
							has_country_flag = apsr_enclave_defence_button_05_purchase
							has_resource = { type = apsr_knowledge amount < 750 }
						}
					}
					add_resource = { apsr_knowledge = -750 }
					set_country_flag = apsr_enclave_defence_button_05_purchase
					give_technology = { tech = tech_apsr_enclave_defence_button_05_bonus }
					change_variable = { which = apsr_ancients_count value = 1 }
				}
				10 = {
					modifier = {
						factor = 0
						OR = {
							has_country_flag = apsr_enclave_defence_button_06_purchase
							has_resource = { type = apsr_knowledge amount < 750 }
						}
					}
					add_resource = { apsr_knowledge = -750 }
					set_country_flag = apsr_enclave_defence_button_06_purchase
					give_technology = { tech = tech_apsr_enclave_defence_button_06_bonus }
					change_variable = { which = apsr_ancients_count value = 1 }
				}
				10 = {
					modifier = {
						factor = 0
						OR = {
							has_country_flag = apsr_enclave_defence_button_07_purchase
							has_resource = { type = apsr_knowledge amount < 750 }
						}
					}
					add_resource = { apsr_knowledge = -750 }
					set_country_flag = apsr_enclave_defence_button_07_purchase
					give_technology = { tech = tech_apsr_enclave_defence_button_07_bonus }
					change_variable = { which = apsr_ancients_count value = 1 }
				}
				10 = {
					modifier = {
						factor = 0
						OR = {
							has_country_flag = apsr_enclave_defence_button_08_purchase
							has_resource = { type = apsr_knowledge amount < 750 }
						}
					}
					add_resource = { apsr_knowledge = -750 }
					set_country_flag = apsr_enclave_defence_button_08_purchase
					give_technology = { tech = tech_apsr_enclave_defence_button_08_bonus }
					change_variable = { which = apsr_ancients_count value = 1 }
				}
				10 = {
					modifier = {
						factor = 0
						OR = {
							has_country_flag = apsr_enclave_defence_button_09_purchase
							has_resource = { type = apsr_knowledge amount < 750 }
						}
					}
					add_resource = { apsr_knowledge = -750 }
					set_country_flag = apsr_enclave_defence_button_09_purchase
					give_technology = { tech = tech_apsr_enclave_defence_button_09_bonus }
					change_variable = { which = apsr_ancients_count value = 1 }
				}
				10 = {
					modifier = {
						factor = 0
						OR = {
							has_country_flag = apsr_enclave_defence_button_10_purchase
							has_resource = { type = apsr_knowledge amount < 750 }
						}
					}
					add_resource = { apsr_knowledge = -750 }
					set_country_flag = apsr_enclave_defence_button_10_purchase
					give_technology = { tech = tech_apsr_enclave_defence_button_10_bonus }
					change_variable = { which = apsr_ancients_count value = 1 }
				}
				1 = {
					# выход остатка цикла при трате знаний или покупке всех улучшений
				}
			}
		}
	}
	else_if = {
		limit = {
			NOT = {
				AND = {
					has_country_flag = apsr_enclave_defence_button_11_purchase
					has_country_flag = apsr_enclave_defence_button_12_purchase
					has_country_flag = apsr_enclave_defence_button_13_purchase
					has_country_flag = apsr_enclave_defence_button_14_purchase
					has_country_flag = apsr_enclave_defence_button_15_purchase	
				}				
			}		
		}
		while = {
			count = 5
			random_list = {
				10 = {
					modifier = {
						factor = 0
						OR = {
							has_country_flag = apsr_enclave_defence_button_11_purchase
							has_resource = { type = apsr_knowledge amount < 1350 }
						}
					}
					add_resource = { apsr_knowledge = -1350 }
					set_country_flag = apsr_enclave_defence_button_11_purchase
					give_technology = { tech = tech_apsr_enclave_defence_button_11_bonus }
					change_variable = { which = apsr_ancients_count value = 3 }
				}
				10 = {
					modifier = {
						factor = 0
						OR = {
							has_country_flag = apsr_enclave_defence_button_12_purchase
							has_resource = { type = apsr_knowledge amount < 1350 }
						}
					}
					add_resource = { apsr_knowledge = -1350 }
					set_country_flag = apsr_enclave_defence_button_12_purchase
					give_technology = { tech = tech_apsr_enclave_defence_button_12_bonus }
					change_variable = { which = apsr_ancients_count value = 3 }
				}
				10 = {
					modifier = {
						factor = 0
						OR = {
							has_country_flag = apsr_enclave_defence_button_13_purchase
							has_resource = { type = apsr_knowledge amount < 1350 }
						}
					}
					add_resource = { apsr_knowledge = -1350 }
					set_country_flag = apsr_enclave_defence_button_13_purchase
					give_technology = { tech = tech_apsr_enclave_defence_button_13_bonus }
					change_variable = { which = apsr_ancients_count value = 3 }
				}
				10 = {
					modifier = {
						factor = 0
						OR = {
							has_country_flag = apsr_enclave_defence_button_14_purchase
							has_resource = { type = apsr_knowledge amount < 1350 }
						}
					}
					add_resource = { apsr_knowledge = -1350 }
					set_country_flag = apsr_enclave_defence_button_14_purchase
					give_technology = { tech = tech_apsr_enclave_defence_button_14_bonus }
					change_variable = { which = apsr_ancients_count value = 3 }
				}
				10 = {
					modifier = {
						factor = 0
						OR = {
							has_country_flag = apsr_enclave_defence_button_15_purchase
							has_resource = { type = apsr_knowledge amount < 1350 }
						}
					}
					add_resource = { apsr_knowledge = -1350 }
					set_country_flag = apsr_enclave_defence_button_15_purchase
					give_technology = { tech = tech_apsr_enclave_defence_button_15_bonus }
					change_variable = { which = apsr_ancients_count value = 3 }
				}
				1 = {
					# выход остатка цикла при трате знаний или покупке всех улучшений
				}
			}
		}	
	}
	else_if = {
		limit = {
			NOT = {
				AND = {
					has_country_flag = apsr_enclave_defence_button_16_purchase
					has_country_flag = apsr_enclave_defence_button_17_purchase
					has_country_flag = apsr_enclave_defence_button_18_purchase
					has_country_flag = apsr_enclave_defence_button_19_purchase
					has_country_flag = apsr_enclave_defence_button_20_purchase
				}				
			}		
		}
		while = {
			count = 3
			random_list = {
				10 = {
					modifier = {
						factor = 0
						OR = {
							has_country_flag = apsr_enclave_defence_button_16_purchase
							has_resource = { type = apsr_knowledge amount < 2430 }
						}
					}
					add_resource = { apsr_knowledge = -2430 }
					set_country_flag = apsr_enclave_defence_button_16_purchase
					give_technology = { tech = tech_apsr_enclave_defence_button_16_bonus }
					change_variable = { which = apsr_ancients_count value = 7 }
				}
				10 = {
					modifier = {
						factor = 0
						OR = {
							has_country_flag = apsr_enclave_defence_button_17_purchase
							has_resource = { type = apsr_knowledge amount < 2430 }
						}
					}
					add_resource = { apsr_knowledge = -2430 }
					set_country_flag = apsr_enclave_defence_button_17_purchase
					give_technology = { tech = tech_apsr_enclave_defence_button_17_bonus }
					change_variable = { which = apsr_ancients_count value = 7 }
				}
				10 = {
					modifier = {
						factor = 0
						OR = {
							has_country_flag = apsr_enclave_defence_button_18_purchase
							has_resource = { type = apsr_knowledge amount < 2430 }
						}
					}
					add_resource = { apsr_knowledge = -2430 }
					set_country_flag = apsr_enclave_defence_button_18_purchase
					give_technology = { tech = tech_apsr_enclave_defence_button_18_bonus }
					change_variable = { which = apsr_ancients_count value = 7 }
				}
				10 = {
					modifier = {
						factor = 0
						OR = {
							has_country_flag = apsr_enclave_defence_button_19_purchase
							has_resource = { type = apsr_knowledge amount < 2430 }
						}
					}
					add_resource = { apsr_knowledge = -2430 }
					set_country_flag = apsr_enclave_defence_button_19_purchase
					give_technology = { tech = tech_apsr_enclave_defence_button_19_bonus }
					change_variable = { which = apsr_ancients_count value = 7 }
				}
				10 = {
					modifier = {
						factor = 0
						OR = {
							has_country_flag = apsr_enclave_defence_button_20_purchase
							has_resource = { type = apsr_knowledge amount < 2430 }
						}
					}
					add_resource = { apsr_knowledge = -2430 }
					set_country_flag = apsr_enclave_defence_button_20_purchase
					give_technology = { tech = tech_apsr_enclave_defence_button_20_bonus }
					change_variable = { which = apsr_ancients_count value = 7 }
				}
				1 = {
					# выход остатка цикла при трате знаний или покупке всех улучшений
				}
			}
		}	
	}
	else = {
		# выход
	}
}



# ЭКОНОМИКА
apsr_enclave_economy_ai_store = {
	if = {
		limit = {
			NOT = {
				AND = {
					has_country_flag = apsr_enclave_economy_button_01_purchase
					has_country_flag = apsr_enclave_economy_button_02_purchase
					OR = {
						has_country_flag = apsr_enclave_economy_button_03dg_purchase
						has_country_flag = apsr_enclave_economy_button_03m_purchase
						has_country_flag = apsr_enclave_economy_button_03l_purchase
					}
					has_country_flag = apsr_enclave_economy_button_04_purchase
					has_country_flag = apsr_enclave_economy_button_05_purchase
					has_country_flag = apsr_enclave_economy_button_06_purchase
					has_country_flag = apsr_enclave_economy_button_07_purchase
					OR = {
						has_country_flag = apsr_enclave_economy_button_08dg_purchase
						has_country_flag = apsr_enclave_economy_button_08m_purchase
						has_country_flag = apsr_enclave_economy_button_08l_purchase
					}
					has_country_flag = apsr_enclave_economy_button_09_purchase
					OR = {
						has_country_flag = apsr_enclave_economy_button_10d_purchase
						has_country_flag = apsr_enclave_economy_button_10gm_purchase
					}
				}				
			}		
		}
		while = {
			count = 10
			random_list = {
				10 = {
					modifier = {
						factor = 0
						OR = {
							has_country_flag = apsr_enclave_economy_button_01_purchase
							has_resource = { type = apsr_knowledge amount < 750 }
						}
					}
					add_resource = { apsr_knowledge = -750 }
					set_country_flag = apsr_enclave_economy_button_01_purchase
					give_technology = { tech = tech_apsr_enclave_economy_button_01_bonus }
					change_variable = { which = apsr_ancients_count value = 1 }
				}
				10 = {
					modifier = {
						factor = 0
						OR = {
							has_country_flag = apsr_enclave_economy_button_02_purchase
							has_resource = { type = apsr_knowledge amount < 750 }
						}
					}
					add_resource = { apsr_knowledge = -750 }
					set_country_flag = apsr_enclave_economy_button_02_purchase
					give_technology = { tech = tech_apsr_enclave_economy_button_02_bonus }
					change_variable = { which = apsr_ancients_count value = 1 }
				}
				10 = {
					modifier = {
						factor = 0
						OR = {
							has_country_flag = apsr_enclave_economy_button_03dg_purchase
							has_resource = { type = apsr_knowledge amount < 750 }
							has_authority = auth_machine_intelligence
							is_lithoid_empire = yes 
						}
					}
					add_resource = { apsr_knowledge = -750 }
					set_country_flag = apsr_enclave_economy_button_03dg_purchase
					give_technology = { tech = tech_apsr_enclave_economy_button_03dg_bonus }
					change_variable = { which = apsr_ancients_count value = 1 }
				}
				10 = {
					modifier = {
						factor = 0
						OR = {
							has_country_flag = apsr_enclave_economy_button_03m_purchase
							has_resource = { type = apsr_knowledge amount < 750 }
							NOT = {
								has_authority = auth_machine_intelligence
							}
						}
					}
					add_resource = { apsr_knowledge = -750 }
					set_country_flag = apsr_enclave_economy_button_03m_purchase
					give_technology = { tech = tech_apsr_enclave_economy_button_03m_bonus }
					change_variable = { which = apsr_ancients_count value = 1 }
				}
				10 = {
					modifier = {
						factor = 0
						OR = {
							has_country_flag = apsr_enclave_economy_button_03l_purchase
							has_resource = { type = apsr_knowledge amount < 750 }
							NOT = {
								is_lithoid_empire = yes 
							}
						}
					}
					add_resource = { apsr_knowledge = -750 }
					set_country_flag = apsr_enclave_economy_button_03l_purchase
					give_technology = { tech = tech_apsr_enclave_economy_button_03l_bonus }
					change_variable = { which = apsr_ancients_count value = 1 }
				}
				10 = {
					modifier = {
						factor = 0
						OR = {
							has_country_flag = apsr_enclave_economy_button_04_purchase
							has_resource = { type = apsr_knowledge amount < 750 }
						}
					}
					add_resource = { apsr_knowledge = -750 }
					set_country_flag = apsr_enclave_economy_button_04_purchase
					give_technology = { tech = tech_apsr_enclave_economy_button_04_bonus }
					change_variable = { which = apsr_ancients_count value = 1 }
				}
				10 = {
					modifier = {
						factor = 0
						OR = {
							has_country_flag = apsr_enclave_economy_button_05_purchase
							has_resource = { type = apsr_knowledge amount < 750 }
						}
					}
					add_resource = { apsr_knowledge = -750 }
					set_country_flag = apsr_enclave_economy_button_05_purchase
					give_technology = { tech = tech_apsr_enclave_economy_button_05_bonus }
					change_variable = { which = apsr_ancients_count value = 1 }
				}
				10 = {
					modifier = {
						factor = 0
						OR = {
							has_country_flag = apsr_enclave_economy_button_06_purchase
							has_resource = { type = apsr_knowledge amount < 750 }
						}
					}
					add_resource = { apsr_knowledge = -750 }
					set_country_flag = apsr_enclave_economy_button_06_purchase
					give_technology = { tech = tech_apsr_enclave_economy_button_06_bonus }
					change_variable = { which = apsr_ancients_count value = 1 }
				}
				10 = {
					modifier = {
						factor = 0
						OR = {
							has_country_flag = apsr_enclave_economy_button_07_purchase
							has_resource = { type = apsr_knowledge amount < 750 }
						}
					}
					add_resource = { apsr_knowledge = -750 }
					set_country_flag = apsr_enclave_economy_button_07_purchase
					give_technology = { tech = tech_apsr_enclave_economy_button_07_bonus }
					change_variable = { which = apsr_ancients_count value = 1 }
				}
				10 = {
					modifier = {
						factor = 0
						OR = {
							has_country_flag = apsr_enclave_economy_button_08dg_purchase
							has_resource = { type = apsr_knowledge amount < 750 }
							has_authority = auth_machine_intelligence
							is_lithoid_empire = yes
						}
					}
					add_resource = { apsr_knowledge = -750 }
					set_country_flag = apsr_enclave_economy_button_08dg_purchase
					give_technology = { tech = tech_apsr_enclave_economy_button_08dg_bonus }
					change_variable = { which = apsr_ancients_count value = 1 }
				}
				10 = {
					modifier = {
						factor = 0
						OR = {
							has_country_flag = apsr_enclave_economy_button_08m_purchase
							has_resource = { type = apsr_knowledge amount < 750 }
							NOT = {
								has_authority = auth_machine_intelligence
							}
						}
					}
					add_resource = { apsr_knowledge = -750 }
					set_country_flag = apsr_enclave_economy_button_08m_purchase
					give_technology = { tech = tech_apsr_enclave_economy_button_08m_bonus }
					change_variable = { which = apsr_ancients_count value = 1 }
				}
				10 = {
					modifier = {
						factor = 0
						OR = {
							has_country_flag = apsr_enclave_economy_button_08l_purchase
							has_resource = { type = apsr_knowledge amount < 750 }
							NOT = {
								is_lithoid_empire = yes
							}
						}
					}
					add_resource = { apsr_knowledge = -750 }
					set_country_flag = apsr_enclave_economy_button_08l_purchase
					give_technology = { tech = tech_apsr_enclave_economy_button_08l_bonus }
					change_variable = { which = apsr_ancients_count value = 1 }
				}
				10 = {
					modifier = {
						factor = 0
						OR = {
							has_country_flag = apsr_enclave_economy_button_09_purchase
							has_resource = { type = apsr_knowledge amount < 750 }
						}
					}
					add_resource = { apsr_knowledge = -750 }
					set_country_flag = apsr_enclave_economy_button_09_purchase
					give_technology = { tech = tech_apsr_enclave_economy_button_09_bonus }
					change_variable = { which = apsr_ancients_count value = 1 }
				}
				10 = {
					modifier = {
						factor = 0
						OR = {
							has_country_flag = apsr_enclave_economy_button_10d_purchase
							has_resource = { type = apsr_knowledge amount < 750 }
							is_gestalt = yes
						}
					}
					add_resource = { apsr_knowledge = -750 }
					set_country_flag = apsr_enclave_economy_button_10d_purchase
					give_technology = { tech = tech_apsr_enclave_economy_button_10d_bonus }
					change_variable = { which = apsr_ancients_count value = 1 }
				}
				10 = {
					modifier = {
						factor = 0
						OR = {
							has_country_flag = apsr_enclave_economy_button_10gm_purchase
							has_resource = { type = apsr_knowledge amount < 750 }
							NOT = {
								is_gestalt = yes
							}
						}
					}
					add_resource = { apsr_knowledge = -750 }
					set_country_flag = apsr_enclave_economy_button_10gm_purchase
					give_technology = { tech = tech_apsr_enclave_economy_button_10gm_bonus }
					change_variable = { which = apsr_ancients_count value = 1 }
				}
				1 = {
					# выход остатка цикла при трате знаний или покупке всех улучшений
				}
			}
		}
	}
	else_if = {
		limit = {
			NOT = {
				AND = {
					OR = {
						has_country_flag = apsr_enclave_economy_button_11d_purchase
						has_country_flag = apsr_enclave_economy_button_11gm_purchase
					}
					OR = {
						has_country_flag = apsr_enclave_economy_button_12d_purchase
						has_country_flag = apsr_enclave_economy_button_12gm_purchase
					}
					has_country_flag = apsr_enclave_economy_button_13_purchase
					has_country_flag = apsr_enclave_economy_button_14_purchase
					has_country_flag = apsr_enclave_economy_button_15_purchase
				}				
			}		
		}
		while = {
			count = 5
			random_list = {
				10 = {
					modifier = {
						factor = 0
						OR = {
							has_country_flag = apsr_enclave_economy_button_11d_purchase
							has_resource = { type = apsr_knowledge amount < 1350 }
							is_gestalt = yes
						}
					}
					add_resource = { apsr_knowledge = -1350 }
					set_country_flag = apsr_enclave_economy_button_11d_purchase
					give_technology = { tech = tech_apsr_enclave_economy_button_11d_bonus }
					change_variable = { which = apsr_ancients_count value = 3 }
				}
				10 = {
					modifier = {
						factor = 0
						OR = {
							has_country_flag = apsr_enclave_economy_button_11gm_purchase
							has_resource = { type = apsr_knowledge amount < 1350 }
							NOT = {
								is_gestalt = yes
							}
						}
					}
					add_resource = { apsr_knowledge = -1350 }
					set_country_flag = apsr_enclave_economy_button_11gm_purchase
					give_technology = { tech = tech_apsr_enclave_economy_button_11gm_bonus }
					change_variable = { which = apsr_ancients_count value = 3 }
				}
				10 = {
					modifier = {
						factor = 0
						OR = {
							has_country_flag = apsr_enclave_economy_button_12d_purchase
							has_resource = { type = apsr_knowledge amount < 1350 }
							is_gestalt = yes
						}
					}
					add_resource = { apsr_knowledge = -1350 }
					set_country_flag = apsr_enclave_economy_button_12d_purchase
					give_technology = { tech = tech_apsr_enclave_economy_button_12d_bonus }
					change_variable = { which = apsr_ancients_count value = 3 }
				}
				10 = {
					modifier = {
						factor = 0
						OR = {
							has_country_flag = apsr_enclave_economy_button_12gm_purchase
							has_resource = { type = apsr_knowledge amount < 1350 }
							NOT = {
								is_gestalt = yes
							}
						}
					}
					add_resource = { apsr_knowledge = -1350 }
					set_country_flag = apsr_enclave_economy_button_12gm_purchase
					give_technology = { tech = tech_apsr_enclave_economy_button_12gm_bonus }
					change_variable = { which = apsr_ancients_count value = 3 }
				}
				10 = {
					modifier = {
						factor = 0
						OR = {
							has_country_flag = apsr_enclave_economy_button_13_purchase
							has_resource = { type = apsr_knowledge amount < 1350 }
						}
					}
					add_resource = { apsr_knowledge = -1350 }
					set_country_flag = apsr_enclave_economy_button_13_purchase
					give_technology = { tech = tech_apsr_enclave_economy_button_13_bonus }
					change_variable = { which = apsr_ancients_count value = 3 }
				}
				10 = {
					modifier = {
						factor = 0
						OR = {
							has_country_flag = apsr_enclave_economy_button_14_purchase
							has_resource = { type = apsr_knowledge amount < 1350 }
						}
					}
					add_resource = { apsr_knowledge = -1350 }
					set_country_flag = apsr_enclave_economy_button_14_purchase
					give_technology = { tech = tech_apsr_enclave_economy_button_14_bonus }
					change_variable = { which = apsr_ancients_count value = 3 }
				}
				10 = {
					modifier = {
						factor = 0
						OR = {
							has_country_flag = apsr_enclave_economy_button_15_purchase
							has_resource = { type = apsr_knowledge amount < 1350 }
						}
					}
					add_resource = { apsr_knowledge = -1350 }
					set_country_flag = apsr_enclave_economy_button_15_purchase
					give_technology = { tech = tech_apsr_enclave_economy_button_15_bonus }
					change_variable = { which = apsr_ancients_count value = 3 }
				}
				1 = {
					# выход остатка цикла при трате знаний или покупке всех улучшений
				}
			}
		}	
	}
	else_if = {
		limit = {
			NOT = {
				AND = {
					has_country_flag = apsr_enclave_economy_button_16_purchase
					has_country_flag = apsr_enclave_economy_button_17_purchase
					OR = {
						has_country_flag = apsr_enclave_economy_button_18_purchase
						has_country_flag = apsr_enclave_economy_button_18ext_purchase
					}
					has_country_flag = apsr_enclave_economy_button_19_purchase
					has_country_flag = apsr_enclave_economy_button_20_purchase
				}				
			}		
		}
		while = {
			count = 5
			random_list = {
				10 = {
					modifier = {
						factor = 0
						OR = {
							has_country_flag = apsr_enclave_economy_button_16_purchase
							has_resource = { type = apsr_knowledge amount < 2430 }
						}
					}
					add_resource = { apsr_knowledge = -2430 }
					set_country_flag = apsr_enclave_economy_button_16_purchase
					give_technology = { tech = tech_apsr_enclave_economy_button_16_bonus }
					change_variable = { which = apsr_ancients_count value = 7 }
				}
				10 = {
					modifier = {
						factor = 0
						OR = {
							has_country_flag = apsr_enclave_economy_button_17_purchase
							has_resource = { type = apsr_knowledge amount < 2430 }
						}
					}
					add_resource = { apsr_knowledge = -2430 }
					set_country_flag = apsr_enclave_economy_button_17_purchase
					give_technology = { tech = tech_apsr_enclave_economy_button_17_bonus }
					change_variable = { which = apsr_ancients_count value = 7 }
				}
				10 = {
					modifier = {
						factor = 0
						OR = {
							has_country_flag = apsr_enclave_economy_button_18_purchase
							has_resource = { type = apsr_knowledge amount < 2430 }
							is_unfriendly = yes
						}
					}
					add_resource = { apsr_knowledge = -2430 }
					set_country_flag = apsr_enclave_economy_button_18_purchase
					give_technology = { tech = tech_apsr_enclave_economy_button_18_bonus }
					change_variable = { which = apsr_ancients_count value = 7 }
				}
				10 = {
					modifier = {
						factor = 0
						OR = {
							has_country_flag = apsr_enclave_economy_button_18ext_purchase
							has_resource = { type = apsr_knowledge amount < 2430 }
							NOT = {
								is_unfriendly = yes
							}
						}
					}
					add_resource = { apsr_knowledge = -2430 }
					set_country_flag = apsr_enclave_economy_button_18ext_purchase
					give_technology = { tech = tech_apsr_enclave_economy_button_18ext_bonus }
					change_variable = { which = apsr_ancients_count value = 7 }
				}
				10 = {
					modifier = {
						factor = 0
						OR = {
							has_country_flag = apsr_enclave_economy_button_19_purchase
							has_resource = { type = apsr_knowledge amount < 2430 }
						}
					}
					add_resource = { apsr_knowledge = -2430 }
					set_country_flag = apsr_enclave_economy_button_19_purchase
					give_technology = { tech = tech_apsr_enclave_economy_button_19_bonus }
					change_variable = { which = apsr_ancients_count value = 7 }
				}
				10 = {
					modifier = {
						factor = 0
						OR = {
							has_country_flag = apsr_enclave_economy_button_20_purchase
							has_resource = { type = apsr_knowledge amount < 2430 }
						}
					}
					add_resource = { apsr_knowledge = -2430 }
					set_country_flag = apsr_enclave_economy_button_20_purchase
					give_technology = { tech = tech_apsr_enclave_economy_button_20_bonus }
					change_variable = { which = apsr_ancients_count value = 7 }
				}
				1 = {
					# выход остатка цикла при трате знаний или покупке всех улучшений
				}
			}
		}	
	}
	else = {
		# выход
	}
}



# НАУКА
apsr_enclave_science_ai_store = {
	if = {
		limit = {
			NOT = {
				AND = {
					has_country_flag = apsr_enclave_science_button_01_purchase
					has_country_flag = apsr_enclave_science_button_02_purchase
					has_country_flag = apsr_enclave_science_button_03_purchase
					has_country_flag = apsr_enclave_science_button_04_purchase
					has_country_flag = apsr_enclave_science_button_05_purchase
					has_country_flag = apsr_enclave_science_button_06_purchase
					has_country_flag = apsr_enclave_science_button_07_purchase
					has_country_flag = apsr_enclave_science_button_08_purchase
					has_country_flag = apsr_enclave_science_button_09_purchase
					has_country_flag = apsr_enclave_science_button_10_purchase	
				}				
			}		
		}
		while = {
			count = 10
			random_list = {
				10 = {
					modifier = {
						factor = 0
						OR = {
							has_country_flag = apsr_enclave_science_button_01_purchase
							has_resource = { type = apsr_knowledge amount < 750 }
						}
					}
					add_resource = { apsr_knowledge = -750 }
					set_country_flag = apsr_enclave_science_button_01_purchase
					give_technology = { tech = tech_apsr_enclave_science_button_01_bonus }
					change_variable = { which = apsr_ancients_count value = 1 }
				}
				10 = {
					modifier = {
						factor = 0
						OR = {
							has_country_flag = apsr_enclave_science_button_02_purchase
							has_resource = { type = apsr_knowledge amount < 750 }
						}
					}
					add_resource = { apsr_knowledge = -750 }
					set_country_flag = apsr_enclave_science_button_02_purchase
					give_technology = { tech = tech_apsr_enclave_science_button_02_bonus }
					change_variable = { which = apsr_ancients_count value = 1 }
				}
				10 = {
					modifier = {
						factor = 0
						OR = {
							has_country_flag = apsr_enclave_science_button_03_purchase
							has_resource = { type = apsr_knowledge amount < 750 }
						}
					}
					add_resource = { apsr_knowledge = -750 }
					set_country_flag = apsr_enclave_science_button_03_purchase
					give_technology = { tech = tech_apsr_enclave_science_button_03_bonus }
					change_variable = { which = apsr_ancients_count value = 1 }
				}
				10 = {
					modifier = {
						factor = 0
						OR = {
							has_country_flag = apsr_enclave_science_button_04_purchase
							has_resource = { type = apsr_knowledge amount < 750 }
						}
					}
					add_resource = { apsr_knowledge = -750 }
					set_country_flag = apsr_enclave_science_button_04_purchase
					give_technology = { tech = tech_apsr_enclave_science_button_04_bonus }
					change_variable = { which = apsr_ancients_count value = 1 }
				}
				10 = {
					modifier = {
						factor = 0
						OR = {
							has_country_flag = apsr_enclave_science_button_05_purchase
							has_resource = { type = apsr_knowledge amount < 750 }
						}
					}
					add_resource = { apsr_knowledge = -750 }
					set_country_flag = apsr_enclave_science_button_05_purchase
					give_technology = { tech = tech_apsr_enclave_science_button_05_bonus }
					change_variable = { which = apsr_ancients_count value = 1 }
				}
				10 = {
					modifier = {
						factor = 0
						OR = {
							has_country_flag = apsr_enclave_science_button_06_purchase
							has_resource = { type = apsr_knowledge amount < 750 }
						}
					}
					add_resource = { apsr_knowledge = -750 }
					set_country_flag = apsr_enclave_science_button_06_purchase
					give_technology = { tech = tech_apsr_enclave_science_button_06_bonus }
					change_variable = { which = apsr_ancients_count value = 1 }
				}
				10 = {
					modifier = {
						factor = 0
						OR = {
							has_country_flag = apsr_enclave_science_button_07_purchase
							has_resource = { type = apsr_knowledge amount < 750 }
						}
					}
					add_resource = { apsr_knowledge = -750 }
					set_country_flag = apsr_enclave_science_button_07_purchase
					give_technology = { tech = tech_apsr_enclave_science_button_07_bonus }
					change_variable = { which = apsr_ancients_count value = 1 }
				}
				10 = {
					modifier = {
						factor = 0
						OR = {
							has_country_flag = apsr_enclave_science_button_08_purchase
							has_resource = { type = apsr_knowledge amount < 750 }
						}
					}
					add_resource = { apsr_knowledge = -750 }
					set_country_flag = apsr_enclave_science_button_08_purchase
					give_technology = { tech = tech_apsr_enclave_science_button_08_bonus }
					change_variable = { which = apsr_ancients_count value = 1 }
				}
				10 = {
					modifier = {
						factor = 0
						OR = {
							has_country_flag = apsr_enclave_science_button_09_purchase
							has_resource = { type = apsr_knowledge amount < 750 }
						}
					}
					add_resource = { apsr_knowledge = -750 }
					set_country_flag = apsr_enclave_science_button_09_purchase
					give_technology = { tech = tech_apsr_enclave_science_button_09_bonus }
					change_variable = { which = apsr_ancients_count value = 1 }
				}
				10 = {
					modifier = {
						factor = 0
						OR = {
							has_country_flag = apsr_enclave_science_button_10_purchase
							has_resource = { type = apsr_knowledge amount < 750 }
						}
					}
					add_resource = { apsr_knowledge = -750 }
					set_country_flag = apsr_enclave_science_button_10_purchase
					give_technology = { tech = tech_apsr_enclave_science_button_10_bonus }
					change_variable = { which = apsr_ancients_count value = 1 }
				}
				1 = {
					# выход остатка цикла при трате знаний или покупке всех улучшений
				}
			}
		}
	}
	else_if = {
		limit = {
			NOT = {
				AND = {
					OR = {
						has_country_flag = apsr_enclave_science_button_11dg_purchase
						has_country_flag = apsr_enclave_science_button_11m_purchase
					}
					has_country_flag = apsr_enclave_science_button_12_purchase
					has_country_flag = apsr_enclave_science_button_13_purchase
					has_country_flag = apsr_enclave_science_button_14_purchase
					has_country_flag = apsr_enclave_science_button_15_purchase
				}				
			}		
		}
		while = {
			count = 5
			random_list = {
				10 = {
					modifier = {
						factor = 0
						OR = {
							has_country_flag = apsr_enclave_science_button_11dg_purchase
							has_resource = { type = apsr_knowledge amount < 1350 }
							has_authority = auth_machine_intelligence
						}
					}
					add_resource = { apsr_knowledge = -1350 }
					set_country_flag = apsr_enclave_science_button_11dg_purchase
					give_technology = { tech = tech_apsr_enclave_science_button_11dg_bonus }
					change_variable = { which = apsr_ancients_count value = 3 }
				}
				10 = {
					modifier = {
						factor = 0
						OR = {
							has_country_flag = apsr_enclave_science_button_11m_purchase
							has_resource = { type = apsr_knowledge amount < 1350 }
							NOT = {
								has_authority = auth_machine_intelligence
							}
						}
					}
					add_resource = { apsr_knowledge = -1350 }
					set_country_flag = apsr_enclave_science_button_11m_purchase
					give_technology = { tech = tech_apsr_enclave_science_button_11m_bonus }
					change_variable = { which = apsr_ancients_count value = 3 }
				}
				10 = {
					modifier = {
						factor = 0
						OR = {
							has_country_flag = apsr_enclave_science_button_12_purchase
							has_resource = { type = apsr_knowledge amount < 1350 }
						}
					}
					add_resource = { apsr_knowledge = -1350 }
					set_country_flag = apsr_enclave_science_button_12_purchase
					give_technology = { tech = tech_apsr_enclave_science_button_12_bonus }
					change_variable = { which = apsr_ancients_count value = 3 }
				}
				10 = {
					modifier = {
						factor = 0
						OR = {
							has_country_flag = apsr_enclave_science_button_13_purchase
							has_resource = { type = apsr_knowledge amount < 1350 }
						}
					}
					add_resource = { apsr_knowledge = -1350 }
					set_country_flag = apsr_enclave_science_button_13_purchase
					give_technology = { tech = tech_apsr_enclave_science_button_13_bonus }
					change_variable = { which = apsr_ancients_count value = 3 }
				}
				10 = {
					modifier = {
						factor = 0
						OR = {
							has_country_flag = apsr_enclave_science_button_14_purchase
							has_resource = { type = apsr_knowledge amount < 1350 }
						}
					}
					add_resource = { apsr_knowledge = -1350 }
					set_country_flag = apsr_enclave_science_button_14_purchase
					give_technology = { tech = tech_apsr_enclave_science_button_14_bonus }
					change_variable = { which = apsr_ancients_count value = 3 }
				}
				10 = {
					modifier = {
						factor = 0
						OR = {
							has_country_flag = apsr_enclave_science_button_15_purchase
							has_resource = { type = apsr_knowledge amount < 1350 }
						}
					}
					add_resource = { apsr_knowledge = -1350 }
					set_country_flag = apsr_enclave_science_button_15_purchase
					give_technology = { tech = tech_apsr_enclave_science_button_15_bonus }
					change_variable = { which = apsr_ancients_count value = 3 }
				}
				1 = {
					# выход остатка цикла при трате знаний или покупке всех улучшений
				}
			}
		}	
	}
	else_if = {
		limit = {
			NOT = {
				AND = {
					has_country_flag = apsr_enclave_science_button_16_purchase
					has_country_flag = apsr_enclave_science_button_17_purchase
					OR = {
						has_country_flag = apsr_enclave_science_button_18_purchase
						has_country_flag = apsr_enclave_science_button_18ext_purchase
					}
					has_country_flag = apsr_enclave_science_button_19_purchase
					has_country_flag = apsr_enclave_science_button_20_purchase
				}				
			}		
		}
		while = {
			count = 3
			random_list = {
				10 = {
					modifier = {
						factor = 0
						OR = {
							has_country_flag = apsr_enclave_science_button_16_purchase
							has_resource = { type = apsr_knowledge amount < 2430 }
						}
					}
					add_resource = { apsr_knowledge = -2430 }
					set_country_flag = apsr_enclave_science_button_16_purchase
					give_technology = { tech = tech_apsr_enclave_science_button_16_bonus }
					change_variable = { which = apsr_ancients_count value = 7 }
				}
				10 = {
					modifier = {
						factor = 0
						OR = {
							has_country_flag = apsr_enclave_science_button_17_purchase
							has_resource = { type = apsr_knowledge amount < 2430 }
							is_gestalt = yes
						}
					}
					add_resource = { apsr_knowledge = -2430 }
					set_country_flag = apsr_enclave_science_button_17_purchase
					give_technology = { tech = tech_apsr_enclave_science_button_17_bonus }
					change_variable = { which = apsr_ancients_count value = 7 }
				}
				10 = {
					modifier = {
						factor = 0
						OR = {
							has_country_flag = apsr_enclave_science_button_18_purchase
							has_resource = { type = apsr_knowledge amount < 2430 }
							is_unfriendly = yes
						}
					}
					add_resource = { apsr_knowledge = -2430 }
					set_country_flag = apsr_enclave_science_button_18_purchase
					give_technology = { tech = tech_apsr_enclave_science_button_18_bonus }
					change_variable = { which = apsr_ancients_count value = 7 }
				}
				10 = {
					modifier = {
						factor = 0
						OR = {
							has_country_flag = apsr_enclave_science_button_18ext_purchase
							has_resource = { type = apsr_knowledge amount < 2430 }
							NOT = {
								is_unfriendly = yes
							}
						}
					}
					add_resource = { apsr_knowledge = -2430 }
					set_country_flag = apsr_enclave_science_button_18ext_purchase
					give_technology = { tech = tech_apsr_enclave_science_button_18ext_bonus }
					change_variable = { which = apsr_ancients_count value = 7 }
				}
				10 = {
					modifier = {
						factor = 0
						OR = {
							has_country_flag = apsr_enclave_science_button_19_purchase
							has_resource = { type = apsr_knowledge amount < 2430 }
							is_gestalt = yes
						}
					}
					add_resource = { apsr_knowledge = -2430 }
					set_country_flag = apsr_enclave_science_button_19_purchase
					give_technology = { tech = tech_apsr_enclave_science_button_19_bonus }
					change_variable = { which = apsr_ancients_count value = 7 }
				}
				10 = {
					modifier = {
						factor = 0
						OR = {
							has_country_flag = apsr_enclave_science_button_20_purchase
							has_resource = { type = apsr_knowledge amount < 2430 }
							is_gestalt = yes
						}
					}
					add_resource = { apsr_knowledge = -2430 }
					set_country_flag = apsr_enclave_science_button_20_purchase
					give_technology = { tech = tech_apsr_enclave_science_button_20_bonus }
					change_variable = { which = apsr_ancients_count value = 7 }
				}
				1 = {
					# выход остатка цикла при трате знаний или покупке всех улучшений
				}
			}
		}	
	}
	else = {
		# выход
	}
}


