###############################################
#
# The resolver effects for resolution breaches
# By Ever Universe
#
###############################################

########################### Authoritarian 3 ##################################

breach_fix_resolution_natural_hierarchy_normal = {
	if = {
		limit = {
			is_active_resolution = "resolution_natural_hierarchy"
			in_breach_of = resolution_natural_hierarchy
		}
		hidden_effect = {
			every_owned_species = {
				limit = {
					is_sapient = yes
					OR = {
						has_living_standard = { type = living_standard_shared_burden country = prev }
						has_living_standard = { type = living_standard_utopian country = prev }
					}
				}
				set_living_standard = { type = living_standard_normal country = prev cooldown = yes }
			}
		}
		custom_tooltip = "everuniverse.10000.ls_complynormal"
	}
}

breach_fix_resolution_natural_hierarchy_good = {
	if = {
		limit = {
			is_active_resolution = "resolution_natural_hierarchy"
			in_breach_of = resolution_natural_hierarchy
		}
		hidden_effect = {
			every_owned_species = {
				limit = {
					is_sapient = yes
					OR = {
						has_living_standard = { type = living_standard_shared_burden country = prev }
						has_living_standard = { type = living_standard_utopian country = prev }
					}
				}
				set_living_standard = { type = living_standard_good country = prev cooldown = yes }
			}
		}
		custom_tooltip = "everuniverse.10000.ls_complygood"
	}
}

breach_fix_resolution_natural_hierarchy_stratified = {
	if = {
		limit = {
			is_active_resolution = "resolution_natural_hierarchy"
			in_breach_of = resolution_natural_hierarchy
            is_authoritarian = yes
		}
		hidden_effect = {
			every_owned_species = {
				limit = {
					is_sapient = yes
					OR = {
						has_living_standard = { type = living_standard_shared_burden country = prev }
						has_living_standard = { type = living_standard_utopian country = prev }
					}
				}
				set_living_standard = { type = living_standard_stratified country = prev cooldown = yes }
			}
		}
		custom_tooltip = "everuniverse.10000.ls_complystratified"		
	}
}

########################### Authoritarian 4 ##################################

breach_fix_resolution_superior_deference_normal = {
	if = {
		limit = {
			is_active_resolution = "resolution_superior_deference"
			in_breach_of = resolution_superior_deference
		}
		hidden_effect = {
			every_owned_species = {
				limit = {
					is_sapient = yes
					OR = {
						has_living_standard = { type = living_standard_shared_burden country = prev }
						has_living_standard = { type = living_standard_utopian country = prev }
                    	has_living_standard = { type = living_standard_good country = prev }
					}
				}
				set_living_standard = { type = living_standard_normal country = prev cooldown = yes }
			}
			if = {
				limit = {
					OR = {
						has_policy_flag = resettlement_not_allowed
						has_policy_flag = population_controls_not_allowed
					}
				}
				set_policy = {
					policy = resettlement
					option = resettlement_allowed
					cooldown = yes
				}
				set_policy = {
					policy = population_controls
					option = population_controls_allowed
					cooldown = yes
				}
			}
		}
		custom_tooltip = "everuniverse.10010.ls_complynormal"
	}
}

breach_fix_resolution_superior_deference_stratified = {
	if = {
		limit = {
			is_active_resolution = "resolution_superior_deference"
			in_breach_of = resolution_superior_deference
                        is_authoritarian = yes
		}
		hidden_effect = {
			every_owned_species = {
				limit = {
					is_sapient = yes
					OR = {
						has_living_standard = { type = living_standard_shared_burden country = prev }
						has_living_standard = { type = living_standard_utopian country = prev }
                    	has_living_standard = { type = living_standard_good country = prev }
					}
				}
				set_living_standard = { type = living_standard_stratified country = prev cooldown = yes}
			}
			if = {
				limit = {
					OR = {
						has_policy_flag = resettlement_not_allowed
						has_policy_flag = population_controls_not_allowed
					}
				}
				set_policy = {
					policy = resettlement
					option = resettlement_allowed
					cooldown = yes
				}
				set_policy = {
					policy = population_controls
					option = population_controls_allowed
					cooldown = yes
				}
			}
		}
		custom_tooltip = "everuniverse.10010.ls_complystratified"
	}
}

########################### Authoritarian 5 ##################################

breach_fix_resolution_a_whiff_of_grapeshot_normal = {
	if = {
		limit = {
			is_active_resolution = "resolution_a_whiff_of_grapeshot"
			in_breach_of = resolution_a_whiff_of_grapeshot
		}
		hidden_effect = {
			every_owned_species = {
				limit = {
					is_sapient = yes
					OR = {
						has_living_standard = { type = living_standard_shared_burden country = prev }
						has_living_standard = { type = living_standard_utopian country = prev }
                        has_living_standard = { type = living_standard_good country = prev }
					}
				}
				set_living_standard = { type = living_standard_normal country = prev cooldown = yes }
			}
			if = {
				limit = { 
					OR = {
						has_authority = auth_democratic
						has_authority = auth_dictatorial
						has_authority = auth_imperial
					}
				}
				#force_remove_civic = civic_parliamentary_system  #Ever, note: previous system, was inefficient
				#force_remove_civic = civic_beacon_of_liberty
				change_government = { 
					authority = auth_oligarchic
					cooldown = yes
					remove_invalid_civics = yes
				}
			}
			if = {
				limit = {
					OR = {
						has_policy_flag = resettlement_not_allowed
						has_policy_flag = population_controls_not_allowed
					}
				}
				set_policy = {
					policy = resettlement
					option = resettlement_allowed
					cooldown = yes
				}
				set_policy = {
					policy = population_controls
					option = population_controls_allowed
					cooldown = yes
				}
			}
			if = {
				limit = {
					has_policy_flag = leader_enhancement_natural_selection
					has_technology = tech_selected_lineages
					OR = {
						NOT = { has_technology = tech_capacity_boosters }
						has_ethic = ethic_fanatic_egalitarian
					}
				}
				set_policy = {
					policy = leader_enhancement
					option = leader_enhancement_selected_lineages
					cooldown = yes
				}
			}
			else_if = {
				limit = {
					has_policy_flag = leader_enhancement_natural_selection
					has_technology = tech_capacity_boosters
					NOT = { has_ethic = ethic_fanatic_egalitarian }
				}
				set_policy = {
					policy = leader_enhancement
					option = leader_enhancement_capacity_boosters
					cooldown = yes
				}
			}
		}
		custom_tooltip = "everuniverse.10020.ls_complynormal"
	}
}

breach_fix_resolution_a_whiff_of_grapeshot_stratified_dict = {
	if = {
		limit = {
			is_active_resolution = "resolution_a_whiff_of_grapeshot"
			in_breach_of = resolution_a_whiff_of_grapeshot
			is_authoritarian = yes
		}
		hidden_effect = {
			every_owned_species = {
				limit = {
					is_sapient = yes
					OR = {
						has_living_standard = { type = living_standard_shared_burden country = prev }
						has_living_standard = { type = living_standard_utopian country = prev }
                        has_living_standard = { type = living_standard_good country = prev }
					}
				}
				set_living_standard = { type = living_standard_stratified country = prev cooldown = yes }
			}
			if = {
				limit = { 
					OR = {
						has_authority = auth_democratic
						has_authority = auth_imperial
						has_authority = auth_oligarchic
					}
				}
				#force_remove_civic = civic_aristocratic_elite
				#force_remove_civic = civic_beacon_of_liberty
				#force_remove_civic = civic_parliamentary_system
				#force_remove_civic = civic_citizen_service			#Ever, note: previous system, was inefficient
				#force_remove_civic = civic_corporate_dominion
				#force_remove_civic = civic_imperial_cult
				#force_remove_civic = civic_meritocracy
				change_government = { 
					authority = auth_dictatorial
					cooldown = yes
					remove_invalid_civics = yes
				}
			}
			if = {
				limit = {
					OR = {
						has_policy_flag = resettlement_not_allowed
						has_policy_flag = population_controls_not_allowed
					}
				}
				set_policy = {
					policy = resettlement
					option = resettlement_allowed
					cooldown = yes
				}
				set_policy = {
					policy = population_controls
					option = population_controls_allowed
					cooldown = yes
				}
			}
			if = {
				limit = {
					has_policy_flag = leader_enhancement_natural_selection
					has_technology = tech_selected_lineages
					OR = {
						NOT = { has_technology = tech_capacity_boosters }
						has_ethic = ethic_fanatic_egalitarian
					}
				}
				set_policy = {
					policy = leader_enhancement
					option = leader_enhancement_selected_lineages
					cooldown = yes
				}
			}
			else_if = {
				limit = {
					has_policy_flag = leader_enhancement_natural_selection
					has_technology = tech_capacity_boosters
					NOT = { has_ethic = ethic_fanatic_egalitarian }
				}
				set_policy = {
					policy = leader_enhancement
					option = leader_enhancement_capacity_boosters
					cooldown = yes
				}
			}
		}
		custom_tooltip = "everuniverse.10020.ls_complystratified_dict"
	}
}

breach_fix_resolution_a_whiff_of_grapeshot_stratified_imp = {
	if = {
		limit = {
			is_active_resolution = "resolution_a_whiff_of_grapeshot"
			in_breach_of = resolution_a_whiff_of_grapeshot
			is_authoritarian = yes
		}
		hidden_effect = {
			every_owned_species = {
				limit = {
					is_sapient = yes
					OR = {
						has_living_standard = { type = living_standard_shared_burden country = prev }
						has_living_standard = { type = living_standard_utopian country = prev }
                        has_living_standard = { type = living_standard_good country = prev }
					}
				}
				set_living_standard = { type = living_standard_stratified country = prev cooldown = yes }
			}
			if = {
				limit = { 
					OR = {
						has_authority = auth_democratic
						has_authority = auth_oligarchic
						has_authority = auth_dictatorial
					}
				}
				#force_remove_civic = civic_beacon_of_liberty
				#force_remove_civic = civic_parliamentary_system
				#force_remove_civic = civic_citizen_service
				#force_remove_civic = civic_corporate_dominion		#Ever, note: previous system, was inefficient
				#force_remove_civic = civic_exalted_priesthood
				#force_remove_civic = civic_meritocracy
				#force_remove_civic = civic_shadow_council
				change_government = { 
					authority = auth_imperial 
					cooldown = yes
					remove_invalid_civics = yes
				}
			}
			if = {
				limit = {
					OR = {
						has_policy_flag = resettlement_not_allowed
						has_policy_flag = population_controls_not_allowed
					}
				}
				set_policy = {
					policy = resettlement
					option = resettlement_allowed
					cooldown = yes
				}
				set_policy = {
					policy = population_controls
					option = population_controls_allowed
					cooldown = yes
				}
			}
			if = {
				limit = {
					has_policy_flag = leader_enhancement_natural_selection
					has_technology = tech_selected_lineages
					OR = {
						NOT = { has_technology = tech_capacity_boosters }
						has_ethic = ethic_fanatic_egalitarian
					}
				}
				set_policy = {
					policy = leader_enhancement
					option = leader_enhancement_selected_lineages
					cooldown = yes
				}
			}
			else_if = {
				limit = {
					has_policy_flag = leader_enhancement_natural_selection
					has_technology = tech_capacity_boosters
					NOT = { has_ethic = ethic_fanatic_egalitarian }
				}
				set_policy = {
					policy = leader_enhancement
					option = leader_enhancement_capacity_boosters
					cooldown = yes
				}
			}
		}
		custom_tooltip = "everuniverse.10020.ls_complystratified_imp"
	}
}

########################### Authoritarian 6 ##################################

breach_fix_resolution_let_them_eat_cake_dict = {
	if = {
		limit = {
			is_active_resolution = "resolution_let_them_eat_cake"
			in_breach_of = resolution_let_them_eat_cake
			is_authoritarian = yes
		}
		hidden_effect = {
			every_owned_species = {
				limit = {
					is_sapient = yes
					OR = {
						has_living_standard = { type = living_standard_shared_burden country = prev }
						has_living_standard = { type = living_standard_utopian country = prev }
                        has_living_standard = { type = living_standard_good country = prev }
						AND = {
							has_living_standard = { type = living_standard_normal country = prev }
							NOT = { has_citizenship_type = { type = citizenship_slavery country = prev } }
						}
					}
				}
				set_living_standard = { type = living_standard_stratified country = prev cooldown = yes }
			}
			if = {
				limit = { 
					OR = { 
						has_authority = auth_democratic
						has_authority = auth_oligarchic
						has_authority = auth_imperial
					}
				}
				#force_remove_civic = civic_aristocratic_elite
				#force_remove_civic = civic_beacon_of_liberty
				#force_remove_civic = civic_parliamentary_system
				#force_remove_civic = civic_citizen_service			#Ever, note: previous system, was inefficient
				#force_remove_civic = civic_corporate_dominion
				#force_remove_civic = civic_imperial_cult
				#force_remove_civic = civic_meritocracy
				change_government = { 
					authority = auth_dictatorial
					cooldown = yes
					remove_invalid_civics = yes 
				}
			}
			if = {
				limit = {
					OR = {
						has_policy_flag = resettlement_not_allowed
						has_policy_flag = population_controls_not_allowed
					}
				}
				set_policy = {
					policy = resettlement
					option = resettlement_allowed
					cooldown = yes
				}
				set_policy = {
					policy = population_controls
					option = population_controls_allowed
					cooldown = yes
				}
			}
			if = {
				limit = {
					has_policy_flag = leader_enhancement_natural_selection
					has_technology = tech_selected_lineages
					OR = {
						NOT = { has_technology = tech_capacity_boosters }
						has_ethic = ethic_fanatic_egalitarian
					}
				}
				set_policy = {
					policy = leader_enhancement
					option = leader_enhancement_selected_lineages
					cooldown = yes
				}
			}
			else_if = {
				limit = {
					has_policy_flag = leader_enhancement_natural_selection
					has_technology = tech_capacity_boosters
					NOT = { has_ethic = ethic_fanatic_egalitarian }
				}
				set_policy = {
					policy = leader_enhancement
					option = leader_enhancement_capacity_boosters
					cooldown = yes
				}
			}
		}
		custom_tooltip = "everuniverse.10030.ls_complystratified_dict"
	}
}

breach_fix_resolution_let_them_eat_cake_imp = {
	if = {
		limit = {
			is_active_resolution = "resolution_let_them_eat_cake"
			in_breach_of = resolution_let_them_eat_cake
			is_authoritarian = yes
		}
		hidden_effect = {
			every_owned_species = {
				limit = {
					is_sapient = yes
					OR = {
						has_living_standard = { type = living_standard_shared_burden country = prev }
						has_living_standard = { type = living_standard_utopian country = prev }
                        has_living_standard = { type = living_standard_good country = prev }
						AND = {
							has_living_standard = { type = living_standard_normal country = prev }
							NOT = { has_citizenship_type = { type = citizenship_slavery country = prev } }
						}
					}
				}
				set_living_standard = { type = living_standard_stratified country = prev cooldown = yes }
			}
			if = {
				limit = { 
					OR = { 
						has_authority = auth_democratic
						has_authority = auth_oligarchic
						has_authority = auth_dictatorial
					}
				}
				#force_remove_civic = civic_beacon_of_liberty
				#force_remove_civic = civic_parliamentary_system
				#force_remove_civic = civic_citizen_service
				#force_remove_civic = civic_corporate_dominion		#Ever, note: previous system, was inefficient
				#force_remove_civic = civic_exalted_priesthood
				#force_remove_civic = civic_meritocracy
				#force_remove_civic = civic_shadow_council
				change_government = { 
					authority = auth_imperial
					cooldown = yes
					remove_invalid_civics = yes
				}
			}
			if = {
				limit = {
					OR = {
						has_policy_flag = resettlement_not_allowed
						has_policy_flag = population_controls_not_allowed
					}
				}
				set_policy = {
					policy = resettlement
					option = resettlement_allowed
					cooldown = yes
				}
				set_policy = {
					policy = population_controls
					option = population_controls_allowed
					cooldown = yes
				}
			}
			if = {
				limit = {
					has_policy_flag = leader_enhancement_natural_selection
					has_technology = tech_selected_lineages
					OR = {
						NOT = { has_technology = tech_capacity_boosters }
						has_ethic = ethic_fanatic_egalitarian
					}
				}
				set_policy = {
					policy = leader_enhancement
					option = leader_enhancement_selected_lineages
					cooldown = yes
				}
			}
			else_if = {
				limit = {
					has_policy_flag = leader_enhancement_natural_selection
					has_technology = tech_capacity_boosters
					NOT = { has_ethic = ethic_fanatic_egalitarian }
				}
				set_policy = {
					policy = leader_enhancement
					option = leader_enhancement_capacity_boosters
					cooldown = yes
				}
			}
		}
		custom_tooltip = "everuniverse.10030.ls_complystratified_imp"
	}
}

#breach_fix_resolution_let_them_eat_cake_slave = {
#	if = {
#		limit = {
#			is_active_resolution = "resolution_let_them_eat_cake"
#			in_breach_of = resolution_let_them_eat_cake
#			is_authoritarian = yes
#		}
#		hidden_effect = {
#			every_owned_species = {
#				limit = {
#					is_sapient = yes
#					has_citizenship_type = { type = citizenship_slavery country = prev }
#				}
#				set_living_standard = { type = living_standard_subsistence country = prev cooldown = yes }
#			}
#		}
#	}
#}

breach_fix_resolution_let_them_eat_cake_shift = {
	if = {
		limit = {
			OR = {
				AND = {
					is_active_resolution = "resolution_let_them_eat_cake"
					in_breach_of = resolution_let_them_eat_cake
				}
				AND = {
					is_active_resolution = "resolution_a_whiff_of_grapeshot"
					in_breach_of = resolution_a_whiff_of_grapeshot
				}
			}
			is_authoritarian = no
			is_egalitarian = no
		}
		hidden_effect = {
			every_owned_species = {
				limit = {
					is_sapient = yes
					OR = {
						has_living_standard = { type = living_standard_shared_burden country = prev }
						has_living_standard = { type = living_standard_utopian country = prev }
                        has_living_standard = { type = living_standard_good country = prev }
						AND = {
							has_living_standard = { type = living_standard_normal country = prev }
							NOT = { has_citizenship_type = { type = citizenship_slavery country = prev } }
						}
					}
				}
				set_living_standard = { type = living_standard_stratified country = prev cooldown = yes }
			}
			if = {
				limit = { 
					OR = { 
						has_authority = auth_democratic
						has_authority = auth_oligarchic
						has_authority = auth_imperial
					}
					is_gestalt = no
				}
				change_government = { 
					authority = auth_dictatorial
					cooldown = yes
					remove_invalid_civics = yes
				}
			}
			if = {
				limit = {
					OR = {
						has_policy_flag = resettlement_not_allowed
						has_policy_flag = population_controls_not_allowed
					}
				}
				set_policy = {
					policy = resettlement
					option = resettlement_allowed
					cooldown = yes
				}
				set_policy = {
					policy = population_controls
					option = population_controls_allowed
					cooldown = yes
				}
			}
			if = {
				limit = {
					has_policy_flag = leader_enhancement_natural_selection
					has_technology = tech_selected_lineages
					OR = {
						NOT = { has_technology = tech_capacity_boosters }
						has_ethic = ethic_fanatic_egalitarian
					}
				}
				set_policy = {
					policy = leader_enhancement
					option = leader_enhancement_selected_lineages
					cooldown = yes
				}
			}
			else_if = {
				limit = {
					has_policy_flag = leader_enhancement_natural_selection
					has_technology = tech_capacity_boosters
					NOT = { has_ethic = ethic_fanatic_egalitarian }
				}
				set_policy = {
					policy = leader_enhancement
					option = leader_enhancement_capacity_boosters
					cooldown = yes
				}
			}
			shift_ethic = "ethic_authoritarian"
		}
		custom_tooltip = "everuniverse.10030.ls_complyshift"
	}
}

###################### Xenophobe 2 ########################

breach_fix_resolution_homogenous_state_normal = {
	if = {
		limit = {
			is_active_resolution = "resolution_homogenous_state"
			in_breach_of = resolution_homogenous_state
			is_xenophobe = no
		}

		hidden_effect = {
			if = {
				limit = { 
					has_policy_flag = refugees_allowed
					can_set_policy = {
						policy = refugees
						option = refugees_only_citizens
					}
				}
				set_policy = {
					policy = refugees
					option = refugees_only_citizens
					cooldown = yes
				}
			}
		}
		custom_tooltip = "everuniverse.10050.complynormal"
	}
}

breach_fix_resolution_homogenous_state_full = {
	if = {
		limit = {
			is_active_resolution = "resolution_homogenous_state"
			in_breach_of = resolution_homogenous_state
			is_xenophile = no
		}

		hidden_effect = {
			if = {
				limit = { 
					OR = {
						has_policy_flag = refugees_allowed
						has_policy_flag = refugees_only_citizens
					}
					can_set_policy = {
						policy = refugees
						option = refugees_not_allowed
					}
				}
				set_policy = {
					policy = refugees
					option = refugees_not_allowed
					cooldown = yes
				}
			}
		}
		custom_tooltip = "everuniverse.10050.complyfull"
	}
}

###################### Xenophobe 3 ########################

breach_fix_resolution_justified_suspicion_exp = {
	if = {
		limit = {
			is_active_resolution = "resolution_justified_suspicion"
			in_breach_of = resolution_justified_suspicion
			is_xenophobe = no
		}

		hidden_effect = {
			if = {
				limit = {
					has_policy_flag = refugees_allowed
					can_set_policy = {
						policy = refugees
						option = refugees_only_citizens
					}
				}
				set_policy = {
					policy = refugees
					option = refugees_only_citizens
					cooldown = yes
				}
			}
			if = {
				limit = { 
					OR = {
						has_policy_flag = diplo_stance_mercantile
						has_policy_flag = diplo_stance_cooperative
						has_policy_flag = diplo_stance_belligerent
						has_policy_flag = diplo_stance_mercantile
						has_policy_flag = diplo_stance_isolationist
					} 
					can_set_policy = {
						policy = diplomatic_stance
						option = diplo_stance_expansionist
					}
				}
				set_policy = {
					policy = diplomatic_stance
					option = diplo_stance_expansionist
					cooldown = yes
				}
			}
		}
		custom_tooltip = "everuniverse.10060.complyexp"
	}
}

breach_fix_resolution_justified_suspicion_isogood = {
	if = {
		limit = {
			is_active_resolution = "resolution_justified_suspicion"
			in_breach_of = resolution_justified_suspicion
			is_xenophobe = no
		}

		hidden_effect = {
			if = {
				limit = {
					has_policy_flag = refugees_allowed
					can_set_policy = {
						policy = refugees
						option = refugees_only_citizens
					}
				}
				set_policy = {
					policy = refugees
					option = refugees_only_citizens
					cooldown = yes
				}
			}
			if = {
				limit = { 
					OR = {
						has_policy_flag = diplo_stance_mercantile
						has_policy_flag = diplo_stance_cooperative
						has_policy_flag = diplo_stance_belligerent
						has_policy_flag = diplo_stance_mercantile
						has_policy_flag = diplo_stance_expansionist
					} 
					can_set_policy = {
						policy = diplomatic_stance
						option = diplo_stance_isolationist
					}
				}
				set_policy = {
					policy = diplomatic_stance
					option = diplo_stance_isolationist
					cooldown = yes
				}
			}
		}
		custom_tooltip = "everuniverse.10060.complyisogood"
	}
}

breach_fix_resolution_justified_suspicion_isofull = {
	if = {
		limit = {
			is_active_resolution = "resolution_justified_suspicion"
			in_breach_of = resolution_justified_suspicion
			is_xenophile = no
		}

		hidden_effect = {
			if = {
				limit = {
					has_policy_flag = refugees_allowed
					has_policy_flag = refugees_only_citizens
					can_set_policy = {
						policy = refugees
						option = refugees_not_allowed
					}
				}
				set_policy = {
					policy = refugees
					option = refugees_not_allowed
					cooldown = yes
				}
			}
			if = {
				limit = { 
					OR = {
						has_policy_flag = diplo_stance_mercantile
						has_policy_flag = diplo_stance_cooperative
						has_policy_flag = diplo_stance_belligerent
						has_policy_flag = diplo_stance_mercantile
						has_policy_flag = diplo_stance_expansionist
					}
					can_set_policy = {
						policy = diplomatic_stance
						option = diplo_stance_isolationist
					}
				}
				set_policy = {
					policy = diplomatic_stance
					option = diplo_stance_isolationist
					cooldown = yes
				}
			}
		}
		custom_tooltip = "everuniverse.10060.complyisofull"
	}
}

breach_fix_resolution_justified_suspicion_belligood = {
	if = {
		limit = {
			is_active_resolution = "resolution_justified_suspicion"
			in_breach_of = resolution_justified_suspicion
			is_xenophobe = no
			is_pacifist = no
		}

		hidden_effect = {
			if = {
				limit = {
					has_policy_flag = refugees_allowed
					can_set_policy = {
						policy = refugees
						option = refugees_only_citizens
					}
				}
				set_policy = {
					policy = refugees
					option = refugees_only_citizens
					cooldown = yes
				}
			}
			if = {
				limit = { 
					OR = {
						has_policy_flag = diplo_stance_mercantile
						has_policy_flag = diplo_stance_cooperative
						has_policy_flag = diplo_stance_mercantile
						has_policy_flag = diplo_stance_isolationist
						has_policy_flag = diplo_stance_expansionist
					} 
					can_set_policy = {
						policy = diplomatic_stance
						option = diplo_stance_belligerent
					}
				}
				set_policy = {
					policy = diplomatic_stance
					option = diplo_stance_belligerent
					cooldown = yes
				}
			}
		}
		custom_tooltip = "everuniverse.10060.complybelligood"
	}
}

breach_fix_resolution_justified_suspicion_bellifull = {
	if = {
		limit = {
			is_active_resolution = "resolution_justified_suspicion"
			in_breach_of = resolution_justified_suspicion
			is_xenophile = no
			is_pacifist = no
		}

		hidden_effect = {
			if = {
				limit = {
					has_policy_flag = refugees_allowed
					has_policy_flag = refugees_only_citizens
					can_set_policy = {
						policy = refugees
						option = refugees_not_allowed
					}
				}
				set_policy = {
					policy = refugees
					option = refugees_not_allowed
					cooldown = yes
				}
			}
			if = {
				limit = { 
					OR = {
						has_policy_flag = diplo_stance_mercantile
						has_policy_flag = diplo_stance_cooperative
						has_policy_flag = diplo_stance_mercantile
						has_policy_flag = diplo_stance_isolationist
						has_policy_flag = diplo_stance_expansionist
					} 
					can_set_policy = {
						policy = diplomatic_stance
						option = diplo_stance_belligerent
					}
				}
				set_policy = {
					policy = diplomatic_stance
					option = diplo_stance_belligerent
					cooldown = yes
				}
			}
		}
		custom_tooltip = "everuniverse.10060.complybellifull"
	}
}

###################### Xenophobe 4 ######################

breach_fix_resolution_national_purity_exp = {
	if = {
		limit = {
			is_active_resolution = "resolution_national_purity"
			in_breach_of = resolution_national_purity
			is_xenophobe = no
		}

		hidden_effect = {
			if = {
				limit = {
					has_policy_flag = refugees_allowed
					can_set_policy = {
						policy = refugees
						option = refugees_only_citizens
					}
				}
				set_policy = {
					policy = refugees
					option = refugees_only_citizens
					cooldown = yes
				}
			}
			if = {
				limit = { 
					OR = {
						has_policy_flag = diplo_stance_mercantile
						has_policy_flag = diplo_stance_cooperative
						has_policy_flag = diplo_stance_belligerent
						has_policy_flag = diplo_stance_mercantile
						has_policy_flag = diplo_stance_isolationist
					} 
					can_set_policy = {
						policy = diplomatic_stance
						option = diplo_stance_expansionist
					}
				}
				set_policy = {
					policy = diplomatic_stance
					option = diplo_stance_expansionist
					cooldown = yes
				}
			}
			every_owned_species = {
				limit = {
					is_sapient = yes
					is_robotic = no
					NOT = { is_same_species = prev }
					has_citizenship_type = { type = citizenship_full country = prev }
				}
				set_citizenship_type = { type = citizenship_limited country = prev }
			}
		}
		custom_tooltip = "everuniverse.10070.complyexp"
	}
}

breach_fix_resolution_national_purity_isogood = {
	if = {
		limit = {
			is_active_resolution = "resolution_national_purity"
			in_breach_of = resolution_national_purity
			is_xenophobe = no
		}

		hidden_effect = {
			if = {
				limit = {
					has_policy_flag = refugees_allowed
					can_set_policy = {
						policy = refugees
						option = refugees_only_citizens
					}
				}
				set_policy = {
					policy = refugees
					option = refugees_only_citizens
					cooldown = yes
				}
			}
			if = {
				limit = { 
					OR = {
						has_policy_flag = diplo_stance_mercantile
						has_policy_flag = diplo_stance_cooperative
						has_policy_flag = diplo_stance_expansionist
						has_policy_flag = diplo_stance_belligerent
						has_policy_flag = diplo_stance_mercantile
					} 
					can_set_policy = {
						policy = diplomatic_stance
						option = diplo_stance_isolationist
					}
				}
				set_policy = {
					policy = diplomatic_stance
					option = diplo_stance_isolationist
					cooldown = yes
				}
			}
			every_owned_species = {
				limit = {
					is_sapient = yes
					is_robotic = no
					NOT = { is_same_species = prev }
					has_citizenship_type = { type = citizenship_full country = prev }
				}
				set_citizenship_type = { type = citizenship_limited country = prev }
			}
		}
		custom_tooltip = "everuniverse.10070.complyisogood"
	}
}

breach_fix_resolution_national_purity_isofull = {
	if = {
		limit = {
			is_active_resolution = "resolution_national_purity"
			in_breach_of = resolution_national_purity
			is_xenophile = no
		}

		hidden_effect = {
			if = {
				limit = {
					OR = {
						has_policy_flag = refugees_allowed
						has_policy_flag = refugees_only_citizens
					}
					can_set_policy = {
						policy = refugees
						option = refugees_not_allowed
					}
				}
				set_policy = {
					policy = refugees
					option = refugees_not_allowed
					cooldown = yes
				}
			}
			if = {
				limit = { 
					OR = {
						has_policy_flag = diplo_stance_mercantile
						has_policy_flag = diplo_stance_cooperative
						has_policy_flag = diplo_stance_expansionist
						has_policy_flag = diplo_stance_belligerent
						has_policy_flag = diplo_stance_mercantile
					} 
					can_set_policy = {
						policy = diplomatic_stance
						option = diplo_stance_isolationist
					}
				}
				set_policy = {
					policy = diplomatic_stance
					option = diplo_stance_isolationist
					cooldown = yes
				}
			}
			every_owned_species = {
				limit = {
					is_sapient = yes
					is_robotic = no
					NOT = { is_same_species = prev }
					has_citizenship_type = { type = citizenship_full country = prev }
				}
				set_citizenship_type = { type = citizenship_limited country = prev }
			}
		}
		custom_tooltip = "everuniverse.10070.complyisofull"
	}
}

breach_fix_resolution_national_purity_belligood = {
	if = {
		limit = {
			is_active_resolution = "resolution_national_purity"
			in_breach_of = resolution_national_purity
			is_xenophobe = no
			is_pacifist = no
		}

		hidden_effect = {
			if = {
				limit = {
					has_policy_flag = refugees_allowed
					can_set_policy = {
						policy = refugees
						option = refugees_only_citizens
					}
				}
				set_policy = {
					policy = refugees
					option = refugees_only_citizens
					cooldown = yes
				}
			}
			if = {
				limit = { 
					OR = {
						has_policy_flag = diplo_stance_mercantile
						has_policy_flag = diplo_stance_cooperative
						has_policy_flag = diplo_stance_expansionist
						has_policy_flag = diplo_stance_mercantile
						has_policy_flag = diplo_stance_isolationist
					} 
					can_set_policy = {
						policy = diplomatic_stance
						option = diplo_stance_belligerent
					}
				}
				set_policy = {
					policy = diplomatic_stance
					option = diplo_stance_belligerent
					cooldown = yes
				}
			}
			every_owned_species = {
				limit = {
					is_sapient = yes
					is_robotic = no
					NOT = { is_same_species = prev }
					has_citizenship_type = { type = citizenship_full country = prev }
				}
				set_citizenship_type = { type = citizenship_limited country = prev }
			}
		}
		custom_tooltip = "everuniverse.10070.complybelligood"
	}
}

breach_fix_resolution_national_purity_bellifull = {
	if = {
		limit = {
			is_active_resolution = "resolution_national_purity"
			in_breach_of = resolution_national_purity
			is_xenophile = no
			is_pacifist = no
		}

		hidden_effect = {
			if = {
				limit = {
					OR = {
						has_policy_flag = refugees_allowed
						has_policy_flag = refugees_only_citizens
					}
					can_set_policy = {
						policy = refugees
						option = refugees_not_allowed
					}
				}
				set_policy = {
					policy = refugees
					option = refugees_not_allowed
					cooldown = yes
				}
			}
			if = {
				limit = { 
					OR = {
						has_policy_flag = diplo_stance_mercantile
						has_policy_flag = diplo_stance_cooperative
						has_policy_flag = diplo_stance_expansionist
						has_policy_flag = diplo_stance_mercantile
						has_policy_flag = diplo_stance_isolationist
					} 
					can_set_policy = {
						policy = diplomatic_stance
						option = diplo_stance_belligerent
					}
				}
				set_policy = {
					policy = diplomatic_stance
					option = diplo_stance_belligerent
					cooldown = yes
				}
			}
			every_owned_species = {
				limit = {
					is_sapient = yes
					is_robotic = no
					NOT = { is_same_species = prev }
					has_citizenship_type = { type = citizenship_full country = prev }
				}
				set_citizenship_type = { type = citizenship_limited country = prev }
			}
		}
		custom_tooltip = "everuniverse.10070.complybellifull"
	}
}

##################### Xenophobe 5 #####################

breach_fix_resolution_cooperation_discouraged_isogood = {
	if = {
		limit = {
			is_active_resolution = "resolution_cooperation_discouraged"
			in_breach_of = resolution_cooperation_discouraged
			is_xenophobe = no
		}

		hidden_effect = {
			if = {
				limit = {
					has_policy_flag = refugees_allowed
					can_set_policy = {
						policy = refugees
						option = refugees_only_citizens
					}
				}
				set_policy = {
					policy = refugees
					option = refugees_only_citizens
					cooldown = yes
				}
			}
			if = {
				limit = { 
					OR = {
						has_policy_flag = diplo_stance_mercantile
						has_policy_flag = diplo_stance_cooperative
						has_policy_flag = diplo_stance_expansionist
						has_policy_flag = diplo_stance_belligerent
						has_policy_flag = diplo_stance_mercantile
					} 
					can_set_policy = {
						policy = diplomatic_stance
						option = diplo_stance_isolationist
					}
				}
				set_policy = {
					policy = diplomatic_stance
					option = diplo_stance_isolationist
					cooldown = yes
				}
			}
			every_owned_species = {
				limit = {
					is_sapient = yes
					is_robotic = no
					NOT = { is_same_species = prev }
					has_citizenship_type = { type = citizenship_full country = prev }
				}
				set_citizenship_type = { type = citizenship_limited country = prev }
			}
		}
		custom_tooltip = "everuniverse.10080.complyisogood"
	}
}

breach_fix_resolution_cooperation_discouraged_isofull = {
	if = {
		limit = {
			is_active_resolution = "resolution_cooperation_discouraged"
			in_breach_of = resolution_cooperation_discouraged
			is_xenophile = no
		}

		hidden_effect = {
			if = {
				limit = {
					OR = {
						has_policy_flag = refugees_allowed
						has_policy_flag = refugees_only_citizens
					}
					can_set_policy = {
						policy = refugees
						option = refugees_not_allowed
					}
				}
				set_policy = {
					policy = refugees
					option = refugees_not_allowed
					cooldown = yes
				}
			}
			if = {
				limit = { 
					OR = {
						has_policy_flag = diplo_stance_mercantile
						has_policy_flag = diplo_stance_cooperative
						has_policy_flag = diplo_stance_expansionist
						has_policy_flag = diplo_stance_belligerent
						has_policy_flag = diplo_stance_mercantile
					}
					can_set_policy = {
						policy = diplomatic_stance
						option = diplo_stance_isolationist
					}
				}
				set_policy = {
					policy = diplomatic_stance
					option = diplo_stance_isolationist
					cooldown = yes
				}
			}
			every_owned_species = {
				limit = {
					is_sapient = yes
					is_robotic = no
					NOT = { is_same_species = prev }
					has_citizenship_type = { type = citizenship_full country = prev }
				}
				set_citizenship_type = { type = citizenship_limited country = prev }
			}
		}
		custom_tooltip = "everuniverse.10080.complyisofull"
	}
}

breach_fix_resolution_cooperation_discouraged_belligood = {
	if = {
		limit = {
			is_active_resolution = "resolution_cooperation_discouraged"
			in_breach_of = resolution_cooperation_discouraged
			is_xenophobe = no
			is_pacifist = no
		}

		hidden_effect = {
			if = {
				limit = {
					has_policy_flag = refugees_allowed
					can_set_policy = {
						policy = refugees
						option = refugees_only_citizens
					}
				}
				set_policy = {
					policy = refugees
					option = refugees_only_citizens
					cooldown = yes
				}
			}
			if = {
				limit = { 
					OR = {
						has_policy_flag = diplo_stance_mercantile
						has_policy_flag = diplo_stance_cooperative
						has_policy_flag = diplo_stance_expansionist
						has_policy_flag = diplo_stance_mercantile
						has_policy_flag = diplo_stance_isolationist
					} 
					can_set_policy = {
						policy = diplomatic_stance
						option = diplo_stance_belligerent
					}
				}
				set_policy = {
					policy = diplomatic_stance
					option = diplo_stance_belligerent
					cooldown = yes
				}
			}
			every_owned_species = {
				limit = {
					is_sapient = yes
					is_robotic = no
					NOT = { is_same_species = prev }
					has_citizenship_type = { type = citizenship_full country = prev }
				}
				set_citizenship_type = { type = citizenship_limited country = prev }
			}
		}
		custom_tooltip = "everuniverse.10080.complybelligood"
	}
}

breach_fix_resolution_cooperation_discouraged_bellifull = {
	if = {
		limit = {
			is_active_resolution = "resolution_cooperation_discouraged"
			in_breach_of = resolution_cooperation_discouraged
			is_xenophile = no
			is_pacifist = no
		}

		hidden_effect = {
			if = {
				limit = {
					OR = {
						has_policy_flag = refugees_allowed
						has_policy_flag = refugees_only_citizens
					}
					can_set_policy = {
						policy = refugees
						option = refugees_not_allowed
					}
				}
				set_policy = {
					policy = refugees
					option = refugees_not_allowed
					cooldown = yes
				}
			}
			if = {
				limit = { 
					OR = {
						has_policy_flag = diplo_stance_mercantile
						has_policy_flag = diplo_stance_cooperative
						has_policy_flag = diplo_stance_expansionist
						has_policy_flag = diplo_stance_mercantile
						has_policy_flag = diplo_stance_isolationist
					}
					can_set_policy = {
						policy = diplomatic_stance
						option = diplo_stance_belligerent
					}
				}
				set_policy = {
					policy = diplomatic_stance
					option = diplo_stance_belligerent
					cooldown = yes
				}
			}
			every_owned_species = {
				limit = {
					is_sapient = yes
					is_robotic = no
					NOT = { is_same_species = prev }
					has_citizenship_type = { type = citizenship_full country = prev }
				}
				set_citizenship_type = { type = citizenship_limited country = prev }
			}
		}
		custom_tooltip = "everuniverse.10080.complybellifull"
	}
}

breach_fix_resolution_cooperation_discouraged_shift = {
	if = {
		limit = {
			OR = {
			is_active_resolution = "resolution_cooperation_discouraged"
			in_breach_of = resolution_cooperation_discouraged
			}
			is_xenophile = no
			is_xenophobe = no
		}
		hidden_effect = {
			if = {
				limit = {
					OR = {
						has_policy_flag = refugees_allowed
						has_policy_flag = refugees_only_citizens
					}
					can_set_policy = {
						policy = refugees
						option = refugees_not_allowed
					}
				}
				set_policy = {
					policy = refugees
					option = refugees_not_allowed
					cooldown = yes
				}
			}
			if = {
				limit = { 
					OR = {
						has_policy_flag = diplo_stance_mercantile
						has_policy_flag = diplo_stance_cooperative
						has_policy_flag = diplo_stance_expansionist
						has_policy_flag = diplo_stance_belligerent
						has_policy_flag = diplo_stance_mercantile
					}
					can_set_policy = {
						policy = diplomatic_stance
						option = diplo_stance_isolationist
					}
				}
				set_policy = {
					policy = diplomatic_stance
					option = diplo_stance_isolationist
					cooldown = yes
				}
			}
			every_owned_species = {
				limit = {
					is_sapient = yes
					is_robotic = no
					NOT = { is_same_species = prev }
					has_citizenship_type = { type = citizenship_full country = prev }
				}
				set_citizenship_type = { type = citizenship_limited country = prev }
			}
			shift_ethic = "ethic_xenophobe"
		}
		custom_tooltip = "everuniverse.10080.complyshift"
	}
}

##################### Xenophobe 6 #####################

breach_fix_resolution_closed_society_isofull = {
	if = {
		limit = {
			is_active_resolution = "resolution_closed_society"
			in_breach_of = resolution_closed_society
			is_xenophile = no
		}

		hidden_effect = {
			if = {
				limit = {
					OR = {
						has_policy_flag = refugees_allowed
						has_policy_flag = refugees_only_citizens
					}
					can_set_policy = {
						policy = refugees
						option = refugees_not_allowed
					}
				}
				set_policy = {
					policy = refugees
					option = refugees_not_allowed
					cooldown = yes
				}
			}
			if = {
				limit = { 
					OR = {
						has_policy_flag = diplo_stance_mercantile
						has_policy_flag = diplo_stance_cooperative
						has_policy_flag = diplo_stance_expansionist
						has_policy_flag = diplo_stance_belligerent
						has_policy_flag = diplo_stance_mercantile
					}
					can_set_policy = {
						policy = diplomatic_stance
						option = diplo_stance_isolationist
					}
				}
				set_policy = {
					policy = diplomatic_stance
					option = diplo_stance_isolationist
					cooldown = yes
				}
			}
			every_owned_species = {
				limit = {
					is_sapient = yes
					is_robotic = no
					NOT = { is_same_species = prev }
					has_citizenship_type = { type = citizenship_full country = prev }
				}
				set_citizenship_type = { type = citizenship_limited country = prev }
			}
			if = {
				limit = {
					has_federation = yes
				}
				leave_alliance = { override_requirements = yes }
			}
		}
		custom_tooltip = "everuniverse.10090.complyisofull"
	}
}

breach_fix_resolution_closed_society_shift = {
	if = {
		limit = {
			is_active_resolution = "resolution_closed_society"
			in_breach_of = resolution_closed_society
			is_xenophile = no
			is_xenophobe = no
		}

		hidden_effect = {
			if = {
				limit = {
					OR = {
						has_policy_flag = refugees_allowed
						has_policy_flag = refugees_only_citizens
					}
					can_set_policy = {
						policy = refugees
						option = refugees_not_allowed
					}
				}
				set_policy = {
					policy = refugees
					option = refugees_not_allowed
					cooldown = yes
				}
			}
			if = {
				limit = { 
					OR = {
						has_policy_flag = diplo_stance_mercantile
						has_policy_flag = diplo_stance_cooperative
						has_policy_flag = diplo_stance_expansionist
						has_policy_flag = diplo_stance_mercantile
					}
					can_set_policy = {
						policy = diplomatic_stance
						option = diplo_stance_belligerent
					}
				}
				set_policy = {
					policy = diplomatic_stance
					option = diplo_stance_belligerent
					cooldown = yes
				}
			}
			every_owned_species = {
				limit = {
					is_sapient = yes
					is_robotic = no
					NOT = { is_same_species = prev }
					has_citizenship_type = { type = citizenship_full country = prev }
				}
				set_citizenship_type = { type = citizenship_limited country = prev }
			}
			if = {
				limit = {
					has_federation = yes
				}
				leave_alliance = { override_requirements = yes }
			}
			shift_ethic = "ethic_xenophobe"
		}
		custom_tooltip = "everuniverse.10090.shift"
	}
}

breach_fix_resolution_closed_society_bellifull = {
	if = {
		limit = {
			is_active_resolution = "resolution_closed_society"
			in_breach_of = resolution_closed_society
			is_xenophile = no
			is_pacifist = no
		}

		hidden_effect = {
			if = {
				limit = {
					OR = {
						has_policy_flag = refugees_allowed
						has_policy_flag = refugees_only_citizens
					}
					can_set_policy = {
						policy = refugees
						option = refugees_not_allowed
					}
				}
				set_policy = {
					policy = refugees
					option = refugees_not_allowed
					cooldown = yes
				}
			}
			if = {
				limit = { 
					OR = {
						has_policy_flag = diplo_stance_mercantile
						has_policy_flag = diplo_stance_cooperative
						has_policy_flag = diplo_stance_expansionist
						has_policy_flag = diplo_stance_mercantile
						has_policy_flag = diplo_stance_isolationist
					}
					can_set_policy = {
						policy = diplomatic_stance
						option = diplo_stance_belligerent
					}
				}
				set_policy = {
					policy = diplomatic_stance
					option = diplo_stance_belligerent
					cooldown = yes
				}
			}
			every_owned_species = {
				limit = {
					is_sapient = yes
					is_robotic = no
					NOT = { is_same_species = prev }
					has_citizenship_type = { type = citizenship_full country = prev }
				}
				set_citizenship_type = { type = citizenship_limited country = prev }
			}
			if = {
				limit = {
					has_federation = yes
				}
				leave_alliance = { override_requirements = yes }
			}
		}
		custom_tooltip = "everuniverse.10090.complybellifull"
	}
}

##################### Xenophile 3 #####################

breach_fix_resolution_stellar_diplomatic_forums_coop = {
	if = {
		limit = {
			is_active_resolution = "resolution_charter_of_sentient_rights"
			in_breach_of = resolution_charter_of_sentient_rights
			is_xenophobe = no
			is_militarist = no
			is_gestalt = no
		}
		hidden_effect = {
			if = {
				limit = {
					has_policy_flag = diplo_stance_supremacist
					can_set_policy = {
						policy = diplomatic_stance
						option = diplo_stance_cooperative
					}
				}
				set_policy = {
					policy = diplomatic_stance
					option = diplo_stance_cooperative
					cooldown = yes
				}
			}
		}
		custom_tooltip = "everuniverse.10110.complycoop"
	}
}

breach_fix_resolution_stellar_diplomatic_forums_exp = {
	if = {
		limit = {
			is_active_resolution = "resolution_charter_of_sentient_rights"
			in_breach_of = resolution_charter_of_sentient_rights
			is_xenophile = no
		}
		hidden_effect = {
			if = {
				limit = {
					has_policy_flag = diplo_stance_supremacist
					can_set_policy = {
						policy = diplomatic_stance
						option = diplo_stance_expansionist
					}
				}
				set_policy = {
					policy = diplomatic_stance
					option = diplo_stance_expansionist
					cooldown = yes
				}
			}
		}
		custom_tooltip = "everuniverse.10110.complyexp"
	}
}

breach_fix_resolution_stellar_diplomatic_forums_iso = {
	if = {
		limit = {
			is_active_resolution = "resolution_charter_of_sentient_rights"
			in_breach_of = resolution_charter_of_sentient_rights
			is_xenophile = no
			is_militarist = no
		}
		hidden_effect = {
			if = {
				limit = {
					has_policy_flag = diplo_stance_supremacist
					can_set_policy = {
						policy = diplomatic_stance
						option = diplo_stance_isolationist
					}
				}
				set_policy = {
					policy = diplomatic_stance
					option = diplo_stance_isolationist
					cooldown = yes
				}
			}
		}
		custom_tooltip = "everuniverse.10110.complyiso"
	}
}

breach_fix_resolution_stellar_diplomatic_forums_belli = {
	if = {
		limit = {
			is_active_resolution = "resolution_charter_of_sentient_rights"
			in_breach_of = resolution_charter_of_sentient_rights
			is_xenophile = no
			is_pacifist = no
		}
		hidden_effect = {
			if = {
				limit = {
					has_policy_flag = diplo_stance_supremacist
					can_set_policy = {
						policy = diplomatic_stance
						option = diplo_stance_belligerent
					}
				}
				set_policy = {
					policy = diplomatic_stance
					option = diplo_stance_belligerent
					cooldown = yes
				}
			}
		}
		custom_tooltip = "everuniverse.10110.complybelli"
	}
}

##################### Xenophile 4 #####################

breach_fix_resolution_charter_of_sentient_rights_full = {
	if = {
		limit = {
			is_active_resolution = "resolution_stellar_diplomatic_forums"
			in_breach_of = resolution_stellar_diplomatic_forums
			is_xenophobe = no
			is_gestalt = no
		}
		hidden_effect = {
			every_owned_species = {
				limit = {
					is_sapient = yes
					has_citizenship_type = { type = citizenship_slavery country = prev }
				}
				set_citizenship_type = { type = citizenship_full country = prev }
			}
			if = {
				limit = {
					has_policy_flag = purge_allowed
					can_set_policy = {
						policy = purge
						option = purge_not_allowed
					}
				}
				set_policy = {
					policy = purge
					option = purge_not_allowed
					cooldown = yes
				}
			}
			if = {
				limit = {
					has_policy_flag = diplo_stance_supremacist
					can_set_policy = {
						policy = diplomatic_stance
						option = diplo_stance_expansionist
					}
				}
				set_policy = {
					policy = diplomatic_stance
					option = diplo_stance_expansionist
					cooldown = yes
				}
			}
		}
		custom_tooltip = "everuniverse.10100.complyfull"
	}
}

breach_fix_resolution_charter_of_sentient_rights_semi = {
	if = {
		limit = {
			is_active_resolution = "resolution_stellar_diplomatic_forums"
			in_breach_of = resolution_stellar_diplomatic_forums
			is_xenophile = no
			is_gestalt = no
		}
		hidden_effect = {
			every_owned_species = {
				limit = {
					is_sapient = yes
					has_citizenship_type = { type = citizenship_slavery country = prev }
				}
				set_citizenship_type = { type = citizenship_limited country = prev }
			}
			if = {
				limit = {
					has_policy_flag = purge_allowed
					can_set_policy = {
						policy = purge
						option = purge_not_allowed
					}
				}
				set_policy = {
					policy = purge
					option = purge_not_allowed
					cooldown = yes
				}
			}
			if = {
				limit = {
					has_policy_flag = diplo_stance_supremacist
					can_set_policy = {
						policy = diplomatic_stance
						option = diplo_stance_belligerent
					}
				}
				set_policy = {
					policy = diplomatic_stance
					option = diplo_stance_belligerent
					cooldown = yes
				}
			}
		}
		custom_tooltip = "everuniverse.10100.complysemi"
	}
}

breach_fix_resolution_charter_of_sentient_rights_min = {
	if = {
		limit = {
			is_active_resolution = "resolution_stellar_diplomatic_forums"
			in_breach_of = resolution_stellar_diplomatic_forums
			is_xenophile = no
		}
		hidden_effect = {
			if = {
				limit = { is_gestalt = no }
				every_owned_species = {
					limit = {
						is_sapient = yes
						has_citizenship_type = { type = citizenship_slavery country = prev }
					}
					set_citizenship_type = { type = citizenship_limited country = prev }
				}
			}
			if = {
				limit = { is_gestalt = yes }
				every_owned_species = {
					limit = {
						is_sapient = yes
						has_citizenship_type = { type = citizenship_slavery country = prev }
					}
					set_citizenship_type = { type = citizenship_purge country = prev }
					set_purge_type = { type = purge_displacement country = prev }
				}
			}
			if = {
				limit = {
					has_policy_flag = purge_allowed
					can_set_policy = {
						policy = purge
						option = purge_displacement_only
					}
				}
				set_policy = {
					policy = purge
					option = purge_displacement_only
					cooldown = yes
				}
			}
			if = {
				limit = {
					has_policy_flag = diplo_stance_supremacist
					can_set_policy = {
						policy = diplomatic_stance
						option = diplo_stance_belligerent
					}
				}
				set_policy = {
					policy = diplomatic_stance
					option = diplo_stance_belligerent
					cooldown = yes
				}
			}
		}
		custom_tooltip = "everuniverse.10100.complymin"
	}
}

##################### Xenophile 5 #####################

breach_fix_resolution_prime_directive_coop = {
	if = {
		limit = {
			is_active_resolution = "resolution_prime_directive"
			in_breach_of = resolution_prime_directive
			is_xenophobe = no
			is_militarist = no
		}
		hidden_effect = {
			if = {
				limit = { is_gestalt = no }
				every_owned_species = {
					limit = {
						is_sapient = yes
						has_citizenship_type = { type = citizenship_slavery country = prev }
					}
					set_citizenship_type = { type = citizenship_full country = prev }
				}
			}
			if = {
				limit = { is_gestalt = yes }
				every_owned_species = {
					limit = {
						is_sapient = yes
						has_citizenship_type = { type = citizenship_slavery country = prev }
					}
					set_citizenship_type = { type = citizenship_purge country = prev }
					set_purge_type = { type = purge_displacement country = prev }
				}
			}
			if = {
				limit = {
					is_gestalt = no
					OR = {
						has_policy_flag = purge_allowed
						has_policy_flag = purge_displacement_only
					}
					can_set_policy = {
						policy = purge
						option = purge_not_allowed
					}
				}
				set_policy = {
					policy = purge
					option = purge_not_allowed
					cooldown = yes
				}
			}
			if = {
				limit = {
					is_gestalt = yes
					has_policy_flag = purge_allowed
				}
				set_policy = {
					policy = purge
					option = purge_displacement_only
					cooldown = yes
				}
			}
			if = {
				limit = {
					OR = {
						has_policy_flag = diplo_stance_supremacist
						has_policy_flag = diplo_stance_belligerent
					}
					can_set_policy = {
						policy = diplomatic_stance
						option = diplo_stance_cooperative
					}
				}
				set_policy = {
					policy = diplomatic_stance
					option = diplo_stance_cooperative
					cooldown = yes
				}
			}
			if = {
				limit = {
					OR = {
						has_policy_flag = interference_active
            			has_policy_flag = interference_aggressive
					}
					can_set_policy = {
						policy = interference
						option = interference_not_allowed
					}
				}
				set_policy = {
					policy = interference
					option = interference_not_allowed
					cooldown = yes
				}
			}
			if = {
				limit = {
					has_policy_flag = refugees_not_allowed
					can_set_policy = {
						policy = refugees
						option = refugees_allowed
					}
				}
				set_policy = {
					policy = refugees
					option = refugees_allowed
				}
			}
			else_if = {
				limit = {
					has_policy_flag = refugees_not_allowed
					NOT = {
						can_set_policy = {
							policy = refugees
							option = refugees_allowed
						}
					}
				}
				set_policy = {
					policy = refugees
					option = refugees_only_citizens
				}
			}
		}
		custom_tooltip = "everuniverse.10120.complycoop"
	}
}

breach_fix_resolution_prime_directive_iso = {
	if = {
		limit = {
			is_active_resolution = "resolution_prime_directive"
			in_breach_of = resolution_prime_directive
			is_xenophile = no
		}
		hidden_effect = {
			if = {
				limit = { is_gestalt = no }
				every_owned_species = {
					limit = {
						is_sapient = yes
						has_citizenship_type = { type = citizenship_slavery country = prev }
					}
					set_citizenship_type = { type = citizenship_limited country = prev }
				}
			}
			if = {
				limit = { is_gestalt = yes }
				every_owned_species = {
					limit = {
						is_sapient = yes
						has_citizenship_type = { type = citizenship_slavery country = prev }
					}
					set_citizenship_type = { type = citizenship_purge country = prev }
					set_purge_type = { type = purge_displacement country = prev }
				}
			}
			if = {
				limit = {
					is_gestalt = no
					OR = {
						has_policy_flag = purge_allowed
						has_policy_flag = purge_displacement_only
					}
					can_set_policy = {
						policy = purge
						option = purge_not_allowed
					}
				}
				set_policy = {
					policy = purge
					option = purge_not_allowed
					cooldown = yes
				}
			}
			if = {
				limit = {
					is_gestalt = yes
					has_policy_flag = purge_allowed
				}
				set_policy = {
					policy = purge
					option = purge_displacement_only
					cooldown = yes
				}
			}
			if = {
				limit = {
					OR = {
						has_policy_flag = diplo_stance_supremacist
						has_policy_flag = diplo_stance_belligerent
					}
					can_set_policy = {
						policy = diplomatic_stance
						option = diplo_stance_isolationist
					}
				}
				set_policy = {
					policy = diplomatic_stance
					option = diplo_stance_isolationist
					cooldown = yes
				}
			}
			if = {
				limit = {
					OR = {
						has_policy_flag = interference_active
						has_policy_flag = interference_aggressive
					}
					can_set_policy = {
						policy = interference
						option = interference_subtle
					}
				}
				set_policy = {
					policy = interference
					option = interference_subtle
					cooldown = yes
				}
			}
			if = {
				limit = {
					has_policy_flag = refugees_not_allowed
				}
				set_policy = {
					policy = refugees
					option = refugees_only_citizens
				}
			}
		}
		custom_tooltip = "everuniverse.10120.complyiso"
	}
}

breach_fix_resolution_prime_directive_exp = {
	if = {
		limit = {
			is_active_resolution = "resolution_prime_directive"
			in_breach_of = resolution_prime_directive
			is_xenophile = no
		}
		hidden_effect = {
			if = {
				limit = { is_gestalt = no }
				every_owned_species = {
					limit = {
						is_sapient = yes
						has_citizenship_type = { type = citizenship_slavery country = prev }
					}
					set_citizenship_type = { type = citizenship_limited country = prev }
				}
			}
			if = {
				limit = { is_gestalt = yes }
				every_owned_species = {
					limit = {
						is_sapient = yes
						has_citizenship_type = { type = citizenship_slavery country = prev }
					}
					set_citizenship_type = { type = citizenship_purge country = prev }
					set_purge_type = { type = purge_displacement country = prev }
				}
			}
			if = {
				limit = {
					is_gestalt = no
					OR = {
						has_policy_flag = purge_allowed
						has_policy_flag = purge_displacement_only
					}
					can_set_policy = {
						policy = purge
						option = purge_not_allowed
					}
				}
				set_policy = {
					policy = purge
					option = purge_not_allowed
					cooldown = yes
				}
			}
			if = {
				limit = {
					is_gestalt = yes
					has_policy_flag = purge_allowed
				}
				set_policy = {
					policy = purge
					option = purge_displacement_only
					cooldown = yes
				}
			}
			if = {
				limit = {
					OR = {
						has_policy_flag = diplo_stance_supremacist
						has_policy_flag = diplo_stance_belligerent
					}
					can_set_policy = {
						policy = diplomatic_stance
						option = diplo_stance_expansionist
					}
				}
				set_policy = {
					policy = diplomatic_stance
					option = diplo_stance_expansionist
					cooldown = yes
				}
			}
			if = {
				limit = {
					OR = {
						has_policy_flag = interference_active
						has_policy_flag = interference_aggressive
					}
					can_set_policy = {
						policy = interference
						option = interference_subtle
					}
				}
				set_policy = {
					policy = interference
					option = interference_subtle
					cooldown = yes
				}
			}
			if = {
				limit = {
					has_policy_flag = refugees_not_allowed
				}
				set_policy = {
					policy = refugees
					option = refugees_only_citizens
				}
			}
		}
		custom_tooltip = "everuniverse.10120.complyexp"
	}
}

breach_fix_resolution_prime_directive_shift = {
	if = {
		limit = {
			OR = {
			is_active_resolution = "resolution_prime_directive"
			in_breach_of = resolution_prime_directive
			}
			is_xenophile = no
			is_xenophobe = no
		}
		hidden_effect = {
			if = {
				limit = { is_gestalt = no }
				every_owned_species = {
					limit = {
						is_sapient = yes
						has_citizenship_type = { type = citizenship_slavery country = prev }
					}
					set_citizenship_type = { type = citizenship_full country = prev }
				}
			}
			if = {
				limit = { is_gestalt = yes }
				every_owned_species = {
					limit = {
						is_sapient = yes
						has_citizenship_type = { type = citizenship_slavery country = prev }
					}
					set_citizenship_type = { type = citizenship_purge country = prev }
					set_purge_type = { type = purge_displacement country = prev }
				}
			}
			if = {
				limit = {
					is_gestalt = no
					OR = {
						has_policy_flag = purge_allowed
						has_policy_flag = purge_displacement_only
					}
					can_set_policy = {
						policy = purge
						option = purge_not_allowed
					}
				}
				set_policy = {
					policy = purge
					option = purge_not_allowed
					cooldown = yes
				}
			}
			if = {
				limit = {
					is_gestalt = yes
					has_policy_flag = purge_allowed
				}
				set_policy = {
					policy = purge
					option = purge_displacement_only
					cooldown = yes
				}
			}
			if = {
				limit = {
					OR = {
						has_policy_flag = diplo_stance_supremacist
						has_policy_flag = diplo_stance_belligerent
					}
					can_set_policy = {
						policy = diplomatic_stance
						option = diplo_stance_cooperative
					}
				}
				set_policy = {
					policy = diplomatic_stance
					option = diplo_stance_cooperative
					cooldown = yes
				}
			}
			if = {
				limit = {
					OR = {
						has_policy_flag = interference_active
						has_policy_flag = interference_aggressive
					}
					can_set_policy = {
						policy = interference
						option = interference_not_allowed
					}
				}
				set_policy = {
					policy = interference
					option = interference_not_allowed
					cooldown = yes
				}
			}
			shift_ethic = "ethic_xenophile"
			if = {
				limit = {
					has_policy_flag = refugees_not_allowed
					can_set_policy = {
						policy = refugees
						option = refugees_allowed
					}
				}
				set_policy = {
					policy = refugees
					option = refugees_allowed
				}
			}
			else_if = {
				limit = {
					has_policy_flag = refugees_not_allowed
					NOT = {
						can_set_policy = {
							policy = refugees
							option = refugees_allowed
						}
					}
				}
				set_policy = {
					policy = refugees
					option = refugees_only_citizens
				}
			}
		}
		custom_tooltip = "everuniverse.10120.shift"
	}
}

##################### Xenophile 6 #####################

breach_fix_resolution_galactic_cooperation_initiative_coop = {
	if = {
		limit = {
			is_active_resolution = "resolution_galactic_cooperation_initiative"
			in_breach_of = resolution_galactic_cooperation_initiative
			is_xenophobe = no
		}
		hidden_effect = {
			if = {
				limit = { is_gestalt = no }
				every_owned_species = {
					limit = {
						is_sapient = yes
						OR = {
							has_citizenship_type = { type = citizenship_slavery country = prev }
							has_citizenship_type = { type = citizenship_limited country = prev }
						}
					}
					set_citizenship_type = { type = citizenship_full country = prev }
				}
			}
			if = {
				limit = { is_gestalt = yes }
				every_owned_species = {
					limit = {
						is_sapient = yes
						OR = {
							has_citizenship_type = { type = citizenship_slavery country = prev }
							has_citizenship_type = { type = citizenship_limited country = prev }
						}
					}
					set_citizenship_type = { type = citizenship_purge country = prev }
					set_purge_type = { type = purge_displacement country = prev }
				}
			}
			if = {
				limit = {
					is_gestalt = no
					OR = {
						has_policy_flag = purge_allowed
						has_policy_flag = purge_displacement_only
					}
					can_set_policy = {
						policy = purge
						option = purge_not_allowed
					}
				}
				set_policy = {
					policy = purge
					option = purge_not_allowed
					cooldown = yes
				}
			}
			if = {
				limit = {
					is_gestalt = yes
					has_policy_flag = purge_allowed
				}
				set_policy = {
					policy = purge
					option = purge_displacement_only
					cooldown = yes
				}
			}
			if = {
				limit = {
					OR = {
						has_policy_flag = diplo_stance_supremacist
						has_policy_flag = diplo_stance_belligerent
						has_policy_flag = diplo_stance_isolationist
						has_policy_flag = diplo_stance_expansionist
					}
					can_set_policy = {
						policy = diplomatic_stance
						option = diplo_stance_cooperative
					}
				}
				set_policy = {
					policy = diplomatic_stance
					option = diplo_stance_cooperative
					cooldown = yes
				}
			}
			if = {
				limit = {
					OR = {
						has_policy_flag = interference_active
						has_policy_flag = interference_aggressive
					}
					can_set_policy = {
						policy = interference
						option = interference_not_allowed
					}
				}
				set_policy = {
					policy = interference
					option = interference_not_allowed
					cooldown = yes
				}
			}
			if = {
				limit = {
					has_policy_flag = refugees_not_allowed
					can_set_policy = {
						policy = refugees
						option = refugees_allowed
					}
				}
				set_policy = {
					policy = refugees
					option = refugees_allowed
				}
			}
		}
		custom_tooltip = "everuniverse.10130.complycoop"
	}
}

breach_fix_resolution_galactic_cooperation_initiative_shift = {
	if = {
		limit = {
			OR = {
				is_active_resolution = "resolution_galactic_cooperation_initiative"
				in_breach_of = resolution_galactic_cooperation_initiative
			}
			is_xenophile = no
			is_xenophobe = no
		}
		hidden_effect = {
			if = {
				limit = { is_gestalt = no }
				every_owned_species = {
					limit = {
						is_sapient = yes
						OR = {
							has_citizenship_type = { type = citizenship_slavery country = prev }
							has_citizenship_type = { type = citizenship_limited country = prev }
						}
					}
					set_citizenship_type = { type = citizenship_full country = prev }
				}
			}
			if = {
				limit = { is_gestalt = yes }
				every_owned_species = {
					limit = {
						is_sapient = yes
						OR = {
							has_citizenship_type = { type = citizenship_slavery country = prev }
							has_citizenship_type = { type = citizenship_limited country = prev }
						}
					}
					set_citizenship_type = { type = citizenship_purge country = prev }
					set_purge_type = { type = purge_displacement country = prev }
				}
			}
			if = {
				limit = {
					is_gestalt = no
					OR = {
						has_policy_flag = purge_allowed
						has_policy_flag = purge_displacement_only
					}
					can_set_policy = {
						policy = purge
						option = purge_not_allowed
					}
				}
				set_policy = {
					policy = purge
					option = purge_not_allowed
					cooldown = yes
				}
			}
			if = {
				limit = {
					is_gestalt = yes
					has_policy_flag = purge_allowed
				}
				set_policy = {
					policy = purge
					option = purge_displacement_only
					cooldown = yes
				}
			}
			if = {
				limit = {
					OR = {
						has_policy_flag = diplo_stance_supremacist
						has_policy_flag = diplo_stance_belligerent
						has_policy_flag = diplo_stance_isolationist
						has_policy_flag = diplo_stance_expansionist
					}
					can_set_policy = {
						policy = diplomatic_stance
						option = diplo_stance_cooperative
					}
				}
				set_policy = {
					policy = diplomatic_stance
					option = diplo_stance_cooperative
					cooldown = yes
				}
			}
			if = {
				limit = {
					OR = {
						has_policy_flag = interference_active
						has_policy_flag = interference_aggressive
					}
					can_set_policy = {
						policy = interference
						option = interference_not_allowed
					}
				}
				set_policy = {
					policy = interference
					option = interference_not_allowed
					cooldown = yes
				}
			}
			shift_ethic = "ethic_xenophile"
			if = {
				limit = {
					has_policy_flag = refugees_not_allowed
					can_set_policy = {
						policy = refugees
						option = refugees_allowed
					}
				}
				set_policy = {
					policy = refugees
					option = refugees_allowed
				}
			}
		}
		custom_tooltip = "everuniverse.10130.shift"
	}
}