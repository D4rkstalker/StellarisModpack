

#flags are used for clean up


effect_als_bottled_up_add_trait_no_notify = {
    random_list = {
        1 = { add_trait_no_notify = als_trait_tactic_bottled_up_inactive1 }
        1 = { add_trait_no_notify = als_trait_tactic_bottled_up_inactive2 }
        1 = { add_trait_no_notify = als_trait_tactic_bottled_up_inactive3 }
        1 = { add_trait_no_notify = als_trait_tactic_bottled_up_inactive4 }
        1 = { add_trait_no_notify = als_trait_tactic_bottled_up_inactive5 }
        1 = { add_trait_no_notify = als_trait_tactic_bottled_up_inactive6 }
        1 = { add_trait_no_notify = als_trait_tactic_bottled_up_inactive7 }
    }
}

effect_als_bottled_up_expert_add_trait_no_notify = {
    random_list = {
        1 = { add_trait_no_notify = als_trait_tactic_bottled_up_expert_inactive1 }
        1 = { add_trait_no_notify = als_trait_tactic_bottled_up_expert_inactive2 }
        1 = { add_trait_no_notify = als_trait_tactic_bottled_up_expert_inactive3 }
        1 = { add_trait_no_notify = als_trait_tactic_bottled_up_expert_inactive4 }
        1 = { add_trait_no_notify = als_trait_tactic_bottled_up_expert_inactive5 }
        1 = { add_trait_no_notify = als_trait_tactic_bottled_up_expert_inactive6 }
        1 = { add_trait_no_notify = als_trait_tactic_bottled_up_expert_inactive7 }
    }
}

effect_als_fox_tiger_add_trait_no_notify = {
    random_list = {
        1 = { add_trait_no_notify = als_trait_tactic_fox_tiger_inactive1 }
        1 = { add_trait_no_notify = als_trait_tactic_fox_tiger_inactive2 }
        1 = { add_trait_no_notify = als_trait_tactic_fox_tiger_inactive3 }
        1 = { add_trait_no_notify = als_trait_tactic_fox_tiger_inactive4 }
        1 = { add_trait_no_notify = als_trait_tactic_fox_tiger_inactive5 }
        1 = { add_trait_no_notify = als_trait_tactic_fox_tiger_inactive6 }
        1 = { add_trait_no_notify = als_trait_tactic_fox_tiger_inactive7 }
    }
}

effect_als_fox_tiger_expert_add_trait_no_notify = {
    random_list = {
        1 = { add_trait_no_notify = als_trait_tactic_fox_tiger_expert_inactive1 }
        1 = { add_trait_no_notify = als_trait_tactic_fox_tiger_expert_inactive2 }
        1 = { add_trait_no_notify = als_trait_tactic_fox_tiger_expert_inactive3 }
        1 = { add_trait_no_notify = als_trait_tactic_fox_tiger_expert_inactive4 }
        1 = { add_trait_no_notify = als_trait_tactic_fox_tiger_expert_inactive5 }
        1 = { add_trait_no_notify = als_trait_tactic_fox_tiger_expert_inactive6 }
        1 = { add_trait_no_notify = als_trait_tactic_fox_tiger_expert_inactive7 }
    }
}

effect_als_close_combat_start = {
    leader = {
        if = {
            limit = {
                has_trait = als_trait_tactic_ambush
                NOT = {
                    has_leader_flag = als_admiral_actived_the_tactic
                }
            }
            set_timed_leader_flag = {
                flag = als_admiral_actived_the_tactic
                days = 30
            }
            set_cooldown = 30
            event_target:als_fleet_scope = {
                if = {
                    limit = {
                        NOT = {
                            has_fleet_flag = als_fleet_particle_ambush_flag
                        }
                    }
                    set_timed_fleet_flag = {
                        flag = als_fleet_particle_ambush_flag
                        days = 1
                    }
                    create_ambient_object = {
                        type = als_particle_ambush_effect
                        scale = 15
                        location = this
                        use_3d_location = no
                        entity_offset = { min = 0 max = 0 }
                        entity_offset_angle = { min = 0 max = 0 }
                        entity_offset_height = { min = 0 max = 0 }
                        entity_scale_to_size = yes
                        play_animation_once = yes
                        duration = 60
                    }
                }
                add_modifier = { 
                    modifier = als_tactic_ambush_modifier
                    days = 30
                }
            }
        }
        if = {
            limit = {
                has_trait = als_trait_tactic_ambush_expert
                NOT = {
                    has_leader_flag = als_admiral_actived_the_tactic
                }
            }
            set_timed_leader_flag = {
                flag = als_admiral_actived_the_tactic
                days = 30
            }
            set_cooldown = 30
            event_target:als_fleet_scope = {
                if = {
                    limit = {
                        NOT = {
                            has_fleet_flag = als_fleet_particle_ambush_flag
                        }
                    }
                    set_timed_fleet_flag = {
                        flag = als_fleet_particle_ambush_flag
                        days = 1
                    }
                    create_ambient_object = {
                        type = als_particle_ambush_effect
                        scale = 15
                        location = this
                        use_3d_location = no
                        entity_offset = { min = 0 max = 0 }
                        entity_offset_angle = { min = 0 max = 0 }
                        entity_offset_height = { min = 0 max = 0 }
                        entity_scale_to_size = yes
                        play_animation_once = yes
                        duration = 60
                    }
                }
                add_modifier = { 
                    modifier = als_tactic_ambush_modifier_expert
                    days = 30
                }
            }
        }
    }  
}

effect_als_bottled_up_start = {
    leader = {
        if = {
            limit = {
                OR = {
                    has_trait = als_trait_tactic_bottled_up_inactive1
                    has_trait = als_trait_tactic_bottled_up_inactive2
                    has_trait = als_trait_tactic_bottled_up_inactive3
                    has_trait = als_trait_tactic_bottled_up_inactive4
                    has_trait = als_trait_tactic_bottled_up_inactive5
                    has_trait = als_trait_tactic_bottled_up_inactive6
                    has_trait = als_trait_tactic_bottled_up_inactive7
                }
            }
            set_leader_flag = als_admiral_has_tactic_bottled_up
            remove_trait = als_trait_tactic_bottled_up_inactive1
            remove_trait = als_trait_tactic_bottled_up_inactive2
            remove_trait = als_trait_tactic_bottled_up_inactive3
            remove_trait = als_trait_tactic_bottled_up_inactive4
            remove_trait = als_trait_tactic_bottled_up_inactive5
            remove_trait = als_trait_tactic_bottled_up_inactive6
            remove_trait = als_trait_tactic_bottled_up_inactive7
            add_timed_trait = { 
                trait = als_trait_tactic_bottled_up_actived
                days = 30
            }
            set_cooldown = 30
            event_target:als_fleet_scope = {
                if = {
                    limit = {
                        NOT = {
                            has_fleet_flag = als_fleet_particle_bottled_up_flag
                        }
                    }
                    set_timed_fleet_flag = {
                        flag = als_fleet_particle_bottled_up_flag
                        days = 1
                    }
                    create_ambient_object = {
                        type = als_particle_pretender_effect
                        scale = 15
                        location = this
                        use_3d_location = no
                        entity_offset = { min = 0 max = 0 }
                        entity_offset_angle = { min = 0 max = 0 }
                        entity_offset_height = { min = 0 max = 0 }
                        entity_scale_to_size = yes
                        play_animation_once = yes
                        duration = 60
                    }
                }
                fleet_event = { id = als.200 days = 30 }
            }
        }
        if = {
            limit = {
                OR = {
                    has_trait = als_trait_tactic_bottled_up_expert_inactive1
                    has_trait = als_trait_tactic_bottled_up_expert_inactive2
                    has_trait = als_trait_tactic_bottled_up_expert_inactive3
                    has_trait = als_trait_tactic_bottled_up_expert_inactive4
                    has_trait = als_trait_tactic_bottled_up_expert_inactive5
                    has_trait = als_trait_tactic_bottled_up_expert_inactive6
                    has_trait = als_trait_tactic_bottled_up_expert_inactive7
                }
            }
            set_leader_flag = als_admiral_has_tactic_bottled_up_expert
            remove_trait = als_trait_tactic_bottled_up_expert_inactive1
            remove_trait = als_trait_tactic_bottled_up_expert_inactive2
            remove_trait = als_trait_tactic_bottled_up_expert_inactive3
            remove_trait = als_trait_tactic_bottled_up_expert_inactive4
            remove_trait = als_trait_tactic_bottled_up_expert_inactive5
            remove_trait = als_trait_tactic_bottled_up_expert_inactive6
            remove_trait = als_trait_tactic_bottled_up_expert_inactive7
            add_timed_trait = { 
                trait = als_trait_tactic_bottled_up_expert_actived
                days = 30
            }
            set_cooldown = 30
            event_target:als_fleet_scope = {
                if = {
                    limit = {
                        NOT = {
                            has_fleet_flag = als_fleet_particle_bottled_up_flag
                        }
                    }
                    set_timed_fleet_flag = {
                        flag = als_fleet_particle_bottled_up_flag
                        days = 1
                    }
                    create_ambient_object = {
                        type = als_particle_pretender_effect
                        scale = 15
                        location = this
                        use_3d_location = no
                        entity_offset = { min = 0 max = 0 }
                        entity_offset_angle = { min = 0 max = 0 }
                        entity_offset_height = { min = 0 max = 0 }
                        entity_scale_to_size = yes
                        play_animation_once = yes
                        duration = 60
                    }
                }
                fleet_event = { id = als.200 days = 30 }
            }
        }
    }
}


effect_als_first_strike_start = {
    leader = {
        if = {
            limit = {
                has_trait = als_trait_tactic_first_strike
                NOT = {
                    has_leader_flag = als_admiral_actived_the_tactic
                }
            }
            set_timed_leader_flag = {
                flag = als_admiral_actived_the_tactic
                days = 120
            }
            set_cooldown = 120
            event_target:als_fleet_scope = {
                if = {
                    limit = {
                        NOT = {
                            has_fleet_flag = als_fleet_particle_first_strike_flag
                        }
                    }
                    set_timed_fleet_flag = {
                        flag = als_fleet_particle_first_strike_flag
                        days = 1
                    }
                    create_ambient_object = {
                        type = als_particle_first_strike_effect
                        scale = 15
                        location = this
                        use_3d_location = no
                        entity_offset = { min = 0 max = 0 }
                        entity_offset_angle = { min = 0 max = 0 }
                        entity_offset_height = { min = 0 max = 0 }
                        entity_scale_to_size = yes
                        play_animation_once = yes
                        duration = 60
                    }
                }
                add_modifier = {
                    modifier = als_tactic_first_strike_modifier_0
                    days = 60
                }
                add_modifier = {
                    modifier = als_tactic_first_strike_modifier_1
                    days = 54
                }
                add_modifier = {
                    modifier = als_tactic_first_strike_modifier_2
                    days = 48
                }
                add_modifier = {
                    modifier = als_tactic_first_strike_modifier_3
                    days = 42
                }
                add_modifier = {
                    modifier = als_tactic_first_strike_modifier_4
                    days = 36
                }
                add_modifier = {
                    modifier = als_tactic_first_strike_modifier_5
                    days = 30
                }
                add_modifier = {
                    modifier = als_tactic_first_strike_modifier_6
                    days = 24
                }
                add_modifier = {
                    modifier = als_tactic_first_strike_modifier_7
                    days = 18
                }
                add_modifier = {
                    modifier = als_tactic_first_strike_modifier_8
                    days = 12
                }
                add_modifier = {
                    modifier = als_tactic_first_strike_modifier_9
                    days = 6
                }
            }
        }
        if = {
            limit = {
                has_trait = als_trait_tactic_first_strike_expert
                NOT = {
                    has_leader_flag = als_admiral_actived_the_tactic
                }
            }
            set_timed_leader_flag = {
                flag = als_admiral_actived_the_tactic
                days = 120
            }
            set_cooldown = 120
            event_target:als_fleet_scope = {
                if = {
                    limit = {
                        NOT = {
                            has_fleet_flag = als_fleet_particle_first_strike_flag
                        }
                    }
                    set_timed_fleet_flag = {
                        flag = als_fleet_particle_first_strike_flag
                        days = 1
                    }
                    create_ambient_object = {
                        type = als_particle_first_strike_effect
                        scale = 15
                        location = this
                        use_3d_location = no
                        entity_offset = { min = 0 max = 0 }
                        entity_offset_angle = { min = 0 max = 0 }
                        entity_offset_height = { min = 0 max = 0 }
                        entity_scale_to_size = yes
                        play_animation_once = yes
                        duration = 60
                    }
                }
                add_modifier = {
                    modifier = als_tactic_first_strike_modifier_0
                    days = 120
                }
                add_modifier = {
                    modifier = als_tactic_first_strike_modifier_1
                    days = 114
                }
                add_modifier = {
                    modifier = als_tactic_first_strike_modifier_2
                    days = 108
                }
                add_modifier = {
                    modifier = als_tactic_first_strike_modifier_3
                    days = 102
                }
                add_modifier = {
                    modifier = als_tactic_first_strike_modifier_4
                    days = 96
                }
                add_modifier = {
                    modifier = als_tactic_first_strike_modifier_5
                    days = 90
                }
                add_modifier = {
                    modifier = als_tactic_first_strike_modifier_6
                    days = 84
                }
                add_modifier = {
                    modifier = als_tactic_first_strike_modifier_7
                    days = 78
                }
                add_modifier = {
                    modifier = als_tactic_first_strike_modifier_8
                    days = 72
                }
                add_modifier = {
                    modifier = als_tactic_first_strike_modifier_9
                    days = 66
                }
                add_modifier = {
                    modifier = als_tactic_first_strike_modifier_10
                    days = 60
                }
                add_modifier = {
                    modifier = als_tactic_first_strike_modifier_11
                    days = 54
                }
                add_modifier = {
                    modifier = als_tactic_first_strike_modifier_12
                    days = 48
                }
                add_modifier = {
                    modifier = als_tactic_first_strike_modifier_13
                    days = 42
                }
                add_modifier = {
                    modifier = als_tactic_first_strike_modifier_14
                    days = 36
                }
                add_modifier = {
                    modifier = als_tactic_first_strike_modifier_15
                    days = 30
                }
                add_modifier = {
                    modifier = als_tactic_first_strike_modifier_16
                    days = 24
                }
                add_modifier = {
                    modifier = als_tactic_first_strike_modifier_17
                    days = 18
                }
                add_modifier = {
                    modifier = als_tactic_first_strike_modifier_18
                    days = 12
                }
                add_modifier = {
                    modifier = als_tactic_first_strike_modifier_19
                    days = 6
                }
            }
        }
    }
}

effect_als_foresight_start = {
    leader = {
        if = {
            limit = {
                has_trait = als_trait_tactic_foresight
                NOT = {
                    has_leader_flag = als_admiral_actived_the_tactic
                }
            }
            set_timed_leader_flag = {
                flag = als_admiral_actived_the_tactic
                days = 120
            }
            set_cooldown = 240
            event_target:als_fleet_scope = {
                if = {
                    limit = {
                        NOT = {
                            has_fleet_flag = als_fleet_particle_foresight_flag
                        }
                    }
                    set_timed_fleet_flag = {
                        flag = als_fleet_particle_foresight_flag
                        days = 1
                    }
                    create_ambient_object = {
                        type = als_particle_foresight_effect
                        scale = 15
                        location = this
                        use_3d_location = no
                        entity_offset = { min = 0 max = 0 }
                        entity_offset_angle = { min = 0 max = 0 }
                        entity_offset_height = { min = 0 max = 0 }
                        entity_scale_to_size = yes
                        play_animation_once = yes
                        duration = 60
                    }
                }
                add_modifier = {
                    modifier = als_tactic_foresight_modifier
                    days = 60
                }
            }
        }
        if = {
            limit = {
                has_trait = als_trait_tactic_foresight_expert
                NOT = {
                    has_leader_flag = als_admiral_actived_the_tactic
                }
            }
            set_timed_leader_flag = {
                flag = als_admiral_actived_the_tactic
                days = 120
            }
            set_cooldown = 240
            event_target:als_fleet_scope = {
                if = {
                    limit = {
                        NOT = {
                            has_fleet_flag = als_fleet_particle_foresight_flag
                        }
                    }
                    set_timed_fleet_flag = {
                        flag = als_fleet_particle_foresight_flag
                        days = 1
                    }
                    create_ambient_object = {
                        type = als_particle_foresight_effect
                        scale = 15
                        location = this
                        use_3d_location = no
                        entity_offset = { min = 0 max = 0 }
                        entity_offset_angle = { min = 0 max = 0 }
                        entity_offset_height = { min = 0 max = 0 }
                        entity_scale_to_size = yes
                        play_animation_once = yes
                        duration = 60
                    }
                }
                add_modifier = {
                    modifier = als_tactic_foresight_modifier
                    days = 120
                }
            }
        }
    }
}

effect_als_fox_tiger_start = {
    leader = {
        if = {
            limit = {
                OR = {
                    has_trait = als_trait_tactic_fox_tiger_inactive1
                    has_trait = als_trait_tactic_fox_tiger_inactive2
                    has_trait = als_trait_tactic_fox_tiger_inactive3
                    has_trait = als_trait_tactic_fox_tiger_inactive4
                    has_trait = als_trait_tactic_fox_tiger_inactive5
                    has_trait = als_trait_tactic_fox_tiger_inactive6
                    has_trait = als_trait_tactic_fox_tiger_inactive7
                }
            }
            set_leader_flag = als_admiral_has_tactic_fox_tiger
            remove_trait = als_trait_tactic_fox_tiger_inactive1
            remove_trait = als_trait_tactic_fox_tiger_inactive2
            remove_trait = als_trait_tactic_fox_tiger_inactive3
            remove_trait = als_trait_tactic_fox_tiger_inactive4
            remove_trait = als_trait_tactic_fox_tiger_inactive5
            remove_trait = als_trait_tactic_fox_tiger_inactive6
            remove_trait = als_trait_tactic_fox_tiger_inactive7
            add_timed_trait = { 
                trait = als_trait_tactic_fox_tiger_actived
                days = 30
            }
            set_cooldown = 30
            event_target:als_fleet_scope = {
                if = {
                    limit = {
                        NOT = {
                            has_fleet_flag = als_fleet_particle_fox_tiger_flag
                        }
                    }
                    set_timed_fleet_flag = {
                        flag = als_fleet_particle_fox_tiger_flag
                        days = 1
                    }
                    create_ambient_object = {
                        type = als_particle_fox_tiger_effect
                        scale = 15
                        location = this
                        use_3d_location = no
                        entity_offset = { min = 0 max = 0 }
                        entity_offset_angle = { min = 0 max = 0 }
                        entity_offset_height = { min = 0 max = 0 }
                        entity_scale_to_size = yes
                        play_animation_once = yes
                        duration = 60
                    }
                }
                fleet_event = { id = als.200 days = 30 }
            }
        }
        if = {
            limit = {
                OR = {
                    has_trait = als_trait_tactic_fox_tiger_expert_inactive1
                    has_trait = als_trait_tactic_fox_tiger_expert_inactive2
                    has_trait = als_trait_tactic_fox_tiger_expert_inactive3
                    has_trait = als_trait_tactic_fox_tiger_expert_inactive4
                    has_trait = als_trait_tactic_fox_tiger_expert_inactive5
                    has_trait = als_trait_tactic_fox_tiger_expert_inactive6
                    has_trait = als_trait_tactic_fox_tiger_expert_inactive7
                }
            }
            set_leader_flag = als_admiral_has_tactic_fox_tiger_expert
            remove_trait = als_trait_tactic_fox_tiger_expert_inactive1
            remove_trait = als_trait_tactic_fox_tiger_expert_inactive2
            remove_trait = als_trait_tactic_fox_tiger_expert_inactive3
            remove_trait = als_trait_tactic_fox_tiger_expert_inactive4
            remove_trait = als_trait_tactic_fox_tiger_expert_inactive5
            remove_trait = als_trait_tactic_fox_tiger_expert_inactive6
            remove_trait = als_trait_tactic_fox_tiger_expert_inactive7
            add_timed_trait = { 
                trait = als_trait_tactic_fox_tiger_expert_actived
                days = 30
            }
            set_cooldown = 30
            event_target:als_fleet_scope = {
                if = {
                    limit = {
                        NOT = {
                            has_fleet_flag = als_fleet_particle_fox_tiger_flag
                        }
                    }
                    set_timed_fleet_flag = {
                        flag = als_fleet_particle_fox_tiger_flag
                        days = 1
                    }
                    create_ambient_object = {
                        type = als_particle_fox_tiger_effect
                        scale = 15
                        location = this
                        use_3d_location = no
                        entity_offset = { min = 0 max = 0 }
                        entity_offset_angle = { min = 0 max = 0 }
                        entity_offset_height = { min = 0 max = 0 }
                        entity_scale_to_size = yes
                        play_animation_once = yes
                        duration = 60
                    }
                }
                fleet_event = { id = als.200 days = 30 }
            }
        }
    }
}

effect_als_long_range_start = {
    leader = {
        if = {
            limit = {
                has_trait = als_trait_tactic_long_range
                NOT = {
                    has_leader_flag = als_admiral_actived_the_tactic
                }
            }
            set_timed_leader_flag = {
                flag = als_admiral_actived_the_tactic
                days = 30
            }
            set_cooldown = 30
            event_target:als_fleet_scope = {
                if = {
                    limit = {
                        NOT = {
                            has_fleet_flag = als_fleet_particle_long_range_flag
                        }
                    }
                    set_timed_fleet_flag = {
                        flag = als_fleet_particle_long_range_flag
                        days = 1
                    }
                    create_ambient_object = {
                        type = als_particle_long_range_effect
                        scale = 15
                        location = this
                        use_3d_location = no
                        entity_offset = { min = 0 max = 0 }
                        entity_offset_angle = { min = 0 max = 0 }
                        entity_offset_height = { min = 0 max = 0 }
                        entity_scale_to_size = yes
                        play_animation_once = yes
                        duration = 60
                    }
                }
                add_modifier = {
                    modifier = als_tactic_long_range_modifier
                    days = 30
                }
            }
        }
        if = {
            limit = {
                has_trait = als_trait_tactic_long_range_expert
                NOT = {
                    has_leader_flag = als_admiral_actived_the_tactic
                }
            }
            set_timed_leader_flag = {
                flag = als_admiral_actived_the_tactic
                days = 30
            }
            set_cooldown = 30
            event_target:als_fleet_scope = {
                if = {
                    limit = {
                        NOT = {
                            has_fleet_flag = als_fleet_particle_long_range_flag
                        }
                    }
                    set_timed_fleet_flag = {
                        flag = als_fleet_particle_long_range_flag
                        days = 1
                    }
                    create_ambient_object = {
                        type = als_particle_long_range_effect
                        scale = 15
                        location = this
                        use_3d_location = no
                        entity_offset = { min = 0 max = 0 }
                        entity_offset_angle = { min = 0 max = 0 }
                        entity_offset_height = { min = 0 max = 0 }
                        entity_scale_to_size = yes
                        play_animation_once = yes
                        duration = 60
                    }
                }
                add_modifier = {
                    modifier = als_tactic_long_range_modifier
                    days = 30
                }
            }
        }
    }
}

effect_als_lurker_start = {
    leader = {
        if = {
            limit = {
                has_trait = als_trait_tactic_lurker
            }
            set_leader_flag = als_admiral_has_tactic_lurker
            remove_trait = als_trait_tactic_lurker
            add_timed_trait = { 
                trait = als_trait_tactic_lurker_actived
                days = 30
            }

            set_cooldown = 30
            event_target:als_fleet_scope = {
                if = {
                    limit = {
                        NOT = {
                            has_fleet_flag = als_fleet_particle_lurker_flag
                        }
                    }
                    set_timed_fleet_flag = {
                        flag = als_fleet_particle_lurker_flag
                        days = 1
                    }
                    create_ambient_object = {
                        type = als_particle_lurker_effect
                        scale = 15
                        location = this
                        use_3d_location = no
                        entity_offset = { min = 0 max = 0 }
                        entity_offset_angle = { min = 0 max = 0 }
                        entity_offset_height = { min = 0 max = 0 }
                        entity_scale_to_size = yes
                        play_animation_once = yes
                        duration = 60
                    }
                }
                fleet_event = { id = als.200 days = 30 }
            }
        }
        if = {
            limit = {
                has_trait = als_trait_tactic_lurker_expert
            }
            set_leader_flag = als_admiral_has_tactic_lurker_expert
            remove_trait = als_trait_tactic_lurker_expert
            add_timed_trait = { 
                trait = als_trait_tactic_lurker_expert_actived
                days = 30
            }
            set_cooldown = 30
            event_target:als_fleet_scope = {
                if = {
                    limit = {
                        NOT = {
                            has_fleet_flag = als_fleet_particle_lurker_flag
                        }
                    }
                    set_timed_fleet_flag = {
                        flag = als_fleet_particle_lurker_flag
                        days = 1
                    }
                    create_ambient_object = {
                        type = als_particle_lurker_effect
                        scale = 15
                        location = this
                        use_3d_location = no
                        entity_offset = { min = 0 max = 0 }
                        entity_offset_angle = { min = 0 max = 0 }
                        entity_offset_height = { min = 0 max = 0 }
                        entity_scale_to_size = yes
                        play_animation_once = yes
                        duration = 60
                    }
                }
                fleet_event = { id = als.200 days = 30 }
            }
        }
    }
}

effect_als_snowball_start = { #chance the way to stack in 3.6
    leader = {
        if = {
            limit = {
                has_trait = als_trait_tactic_snowball
                NOT = {
                    has_leader_flag = als_admiral_actived_the_tactic
                }
            }
            set_timed_leader_flag = {
                flag = als_admiral_actived_the_tactic
                days = 2
            }
            set_cooldown = 3
            event_target:als_fleet_scope = {
                add_modifier = {
                    modifier = als_tactic_snowball_modifier
                    days = 4
                    multiplier = als_fleet_in_battle_days
                }
                if = {
                    limit = {
                        check_variable = {
                            which = als_fleet_in_battle_days
                            value >= 1
                        }
                    }
                    fleet_event = { id = als.70 days = 3 }
                }
            }
        }
        if = {
            limit = {
                has_trait = als_trait_tactic_snowball_expert
                NOT = {
                    has_leader_flag = als_admiral_actived_the_tactic
                }
            }
            set_timed_leader_flag = {
                flag = als_admiral_actived_the_tactic
                days = 2
            }
            set_cooldown = 3
            event_target:als_fleet_scope = {
                add_modifier = {
                    modifier = als_tactic_snowball_modifier_expert
                    days = 4
                    multiplier = als_fleet_in_battle_days
                }
                if = {
                    limit = {
                        check_variable = {
                            which = als_fleet_in_battle_days
                            value >= 1
                        }
                    }
                    fleet_event = { id = als.70 days = 3 }
                }
            }
        }
    }
}


effect_als_unpredictable_start = {
    if = {
        limit = {
            leader = {
                has_trait = als_trait_tactic_unpredictable
                NOT = {
                    has_leader_flag = als_admiral_actived_the_tactic
                }
            }
        }
        leader = {
            set_timed_leader_flag = {
                flag = als_admiral_actived_the_tactic
                days = 4
            }
        }
        
        random_list = {
            1 = {
                add_modifier = {
                    modifier = als_tactic_unpredictable_modifier_1
                    days = 15
                }
            }
            1 = {
                add_modifier = {
                    modifier = als_tactic_unpredictable_modifier_2
                    days = 15
                }
            }
            1 = {
                add_modifier = {
                    modifier = als_tactic_unpredictable_modifier_3
                    days = 15
                }
            }
            1 = {
                add_modifier = {
                    modifier = als_tactic_unpredictable_modifier_4
                    days = 15
                }
            }
            1 = {
                add_modifier = {
                    modifier = als_tactic_unpredictable_modifier_5
                    days = 15
                }
            }
            1 = {
                add_modifier = {
                    modifier = als_tactic_unpredictable_modifier_6
                    days = 15
                }
            }
            1 = {
                add_modifier = {
                    modifier = als_tactic_unpredictable_modifier_7
                    days = 15
                }
            }
        }
    }
    if = {
        limit = {
            leader = {
                has_trait = als_trait_tactic_unpredictable_expert
                NOT = {
                    has_leader_flag = als_admiral_actived_the_tactic
                }
            }
        }
        leader = {
            set_timed_leader_flag = {
                flag = als_admiral_actived_the_tactic
                days = 4
            }
        }
        random_list = {
            1 = {
                add_modifier = {
                    modifier = als_tactic_unpredictable_modifier_expert_1
                    days = 15
                }
            }
            1 = {
                add_modifier = {
                    modifier = als_tactic_unpredictable_modifier_expert_2
                    days = 15
                }
            }
            1 = {
                add_modifier = {
                    modifier = als_tactic_unpredictable_modifier_expert_3
                    days = 15
                }
            }
            1 = {
                add_modifier = {
                    modifier = als_tactic_unpredictable_modifier_expert_4
                    days = 15
                }
            }
            1 = {
                add_modifier = {
                    modifier = als_tactic_unpredictable_modifier_expert_5
                    days = 15
                }
            }
            1 = {
                add_modifier = {
                    modifier = als_tactic_unpredictable_modifier_expert_6
                    days = 15
                }
            }
            1 = {
                add_modifier = {
                    modifier = als_tactic_unpredictable_modifier_expert_7
                    days = 15
                }
            }
        }
    }
    fleet_event = {
        id = als.71
        days = 5
    }
}

effect_als_untoachable_start = {
    if = {
        limit = {
            leader = {
                has_trait = als_trait_tactic_untoachable
                NOT = {
                    has_leader_flag = als_admiral_actived_the_tactic
                }
            }
        }
        leader = {
            set_timed_leader_flag = {
                flag = als_admiral_actived_the_tactic
                days = 9
            }
        }
        event_target:als_target_fleet_scope = {
            
            every_owned_ship = {
                random_list = {
                    3 = {}
                    1 = {
                        if = {
                            limit = {
                                NOT = {
                                    has_ship_flag = als_ship_particle_untoachable_flag
                                }
                            }
                            set_timed_ship_flag = {
                                flag = als_ship_particle_untoachable_flag
                                days = 30
                            }
                            create_ambient_object = {
                                type = als_particle_untoachable_effect
                                scale = 15
                                location = this
                                use_3d_location = no
                                entity_offset = { min = 0 max = 0 }
                                entity_offset_angle = { min = 0 max = 0 }
                                entity_offset_height = { min = 0 max = 0 }
                                entity_scale_to_size = yes
                                play_animation_once = yes
                                duration = 60
                            }
                        }
                        add_modifier = {
                            modifier = als_tactic_untoachable_modifier
                            days = 30
                        }
                    }
                }
            }
        }
    }
    if = {
        limit = {
            leader = {
                has_trait = als_trait_tactic_untoachable_expert
                NOT = {
                    has_leader_flag = als_admiral_actived_the_tactic
                }
            }
        }
        leader = {
            set_timed_leader_flag = {
                flag = als_admiral_actived_the_tactic
                days = 9
            }
        }
        event_target:als_target_fleet_scope = {
            every_owned_ship = {
                random_list = {
                    3 = {}
                    1 = {
                        if = {
                            limit = {
                                NOT = {
                                    has_ship_flag = als_ship_particle_untoachable_flag
                                }
                            }
                            set_timed_ship_flag = {
                                flag = als_ship_particle_untoachable_flag
                                days = 30
                            }
                            create_ambient_object = {
                                type = als_particle_untoachable_effect
                                scale = 15
                                location = this
                                use_3d_location = no
                                entity_offset = { min = 0 max = 0 }
                                entity_offset_angle = { min = 0 max = 0 }
                                entity_offset_height = { min = 0 max = 0 }
                                entity_scale_to_size = yes
                                play_animation_once = yes
                                duration = 60
                            }
                        }
                        add_modifier = {
                            modifier = als_tactic_untoachable_modifier_expert
                            days = 30
                        }
                    }
                }
            }
        }
    }
    fleet_event = {
        id = als.72
        days = 10
    }
}

effect_als_abruptstop_start = {
    if = {
        limit = {
            leader = {
                has_trait = als_trait_tactic_abruptstop
                NOT = {
                    has_leader_flag = als_admiral_actived_the_tactic
                }
            }
        }
        leader = {
            set_timed_leader_flag = {
                flag = als_admiral_actived_the_tactic
                days = 9
            }
        }
        
        event_target:als_target_fleet_scope = {
            every_owned_ship = {
                limit = {
                    NOT = {
                        has_ship_flag = als_abruptstop_ship_effect
                    }
                }
                random_list = {
                    4 = {}
                    1 = {
                        if = {
                            limit = {
                                NOT = {
                                    has_ship_flag = als_ship_particle_abruptstop_flag
                                }
                            }
                            set_timed_ship_flag = {
                                flag = als_ship_particle_abruptstop_flag
                                days = 30
                            }
                            create_ambient_object = {
                                type = als_particle_abruptstop_effect
                                scale = 15
                                location = this
                                use_3d_location = no
                                entity_offset = { min = 0 max = 0 }
                                entity_offset_angle = { min = 0 max = 0 }
                                entity_offset_height = { min = 0 max = 0 }
                                entity_scale_to_size = yes
                                play_animation_once = yes
                                duration = 60
                            }
                        }
                        set_timed_ship_flag = {
                            flag = als_abruptstop_ship_effect
                            days = 30
                        }
                        add_modifier = {
                            modifier = als_tactic_abruptstop_modifier
                            days = 30
                        }
                    }
                }	
            }
        }
    }
    if = {
        limit = {
            leader = {
                has_trait = als_trait_tactic_abruptstop_expert
                NOT = {
                    has_leader_flag = als_admiral_actived_the_tactic
                }
            }
        }
        leader = {
            set_timed_leader_flag = {
                flag = als_admiral_actived_the_tactic
                days = 9
            }
        }
        event_target:als_target_fleet_scope = {
            every_owned_ship = {
                limit = {
                    NOT = {
                        has_ship_flag = als_abruptstop_ship_effect
                    }
                }
                random_list = {
                    4 = {}
                    1 = {
                        if = {
                            limit = {
                                NOT = {
                                    has_ship_flag = als_ship_particle_abruptstop_flag
                                }
                            }
                            set_timed_ship_flag = {
                                flag = als_ship_particle_abruptstop_flag
                                days = 30
                            }
                            create_ambient_object = {
                                type = als_particle_abruptstop_effect
                                scale = 15
                                location = this
                                use_3d_location = no
                                entity_offset = { min = 0 max = 0 }
                                entity_offset_angle = { min = 0 max = 0 }
                                entity_offset_height = { min = 0 max = 0 }
                                entity_scale_to_size = yes
                                play_animation_once = yes
                                duration = 60
                            }
                        }
                        set_timed_ship_flag = {
                            flag = als_abruptstop_ship_effect
                            days = 30
                        }
                        add_modifier = {
                            modifier = als_tactic_abruptstop_modifier_expert
                            days = 30
                        }
                    }
                }	
            }
        }
    }
    fleet_event = {
        id = als.80
        days = 10
    }
}

effect_als_jammer_start = {
    if = {
        limit = {
            leader = {
                has_trait = als_trait_tactic_jammer
                NOT = {
                    has_leader_flag = als_admiral_actived_the_tactic
                }
            }
        }
        leader = {
            set_timed_leader_flag = {
                flag = als_admiral_actived_the_tactic
                days = 9
            }
        }
        event_target:als_target_fleet_scope = {
            every_owned_ship = {
                limit = {
                    NOT = {
                        has_ship_flag = als_jammer_ship_effect
                    }
                }
                random_list = {
                    3 = {}
                    1 = {
                        if = {
                            limit = {
                                NOT = {
                                    has_ship_flag = als_ship_particle_jammer_flag
                                }
                            }
                            set_timed_ship_flag = {
                                flag = als_ship_particle_jammer_flag
                                days = 10
                            }
                            create_ambient_object = {
                                type = als_particle_jammer_effect
                                scale = 15
                                location = this
                                use_3d_location = no
                                entity_offset = { min = 0 max = 0 }
                                entity_offset_angle = { min = 0 max = 0 }
                                entity_offset_height = { min = 0 max = 0 }
                                entity_scale_to_size = yes
                                play_animation_once = yes
                                duration = 60
                            }
                        }
                        set_timed_ship_flag = {
                            flag = als_jammer_ship_effect
                            days = 10
                        }
                        add_modifier = {
                            modifier = als_tactic_jammer_modifier
                            days = 10
                        }
                    }
                }	
            }
        }
    }
    if = {
        limit = {
            leader = {
                has_trait = als_trait_tactic_jammer_expert
                NOT = {
                    has_leader_flag = als_admiral_actived_the_tactic
                }
            }
        }
        leader = {
            set_timed_leader_flag = {
                flag = als_admiral_actived_the_tactic
                days = 9
            }
        }
        event_target:als_target_fleet_scope = {
            every_owned_ship = {
                limit = {
                    NOT = {
                        has_ship_flag = als_jammer_ship_effect
                    }
                }
                random_list = {
                    3 = {}
                    1 = {
                        if = {
                            limit = {
                                NOT = {
                                    has_ship_flag = als_ship_particle_jammer_flag
                                }
                            }
                            set_timed_ship_flag = {
                                flag = als_ship_particle_jammer_flag
                                days = 10
                            }
                            create_ambient_object = {
                                type = als_particle_jammer_effect
                                scale = 15
                                location = this
                                use_3d_location = no
                                entity_offset = { min = 0 max = 0 }
                                entity_offset_angle = { min = 0 max = 0 }
                                entity_offset_height = { min = 0 max = 0 }
                                entity_scale_to_size = yes
                                play_animation_once = yes
                                duration = 60
                            }
                        }
                        set_timed_ship_flag = {
                            flag = als_jammer_ship_effect
                            days = 10
                        }
                        add_modifier = {
                            modifier = als_tactic_jammer_modifier_expert
                            days = 10
                        }
                    }
                }	
            }
        }
    }
    fleet_event = {
        id = als.90
        days = 10
    }
}

effect_als_cybershield_start = {
    if = {
        limit = {
            leader = {
                has_trait = als_trait_tactic_cybershield
                NOT = {
                    has_leader_flag = als_admiral_actived_the_tactic
                }
            }
        }
        leader = {
            set_timed_leader_flag = {
                flag = als_admiral_actived_the_tactic
                days = 9
            }
        }
        every_owned_ship = {
            limit = {
                NOT = {
                    has_ship_flag = als_cybershield_ship_effect
                }
            }
            random_list = {
                3 = {}
                1 = {
                    if = {
                        limit = {
                            NOT = {
                                has_ship_flag = als_ship_particle_cybershield_flag
                            }
                        }
                        set_timed_ship_flag = {
                            flag = als_ship_particle_cybershield_flag
                            days = 15
                        }
                        create_ambient_object = {
                            type = als_particle_cybershield_effect
                            scale = 15
                            location = this
                            use_3d_location = no
                            entity_offset = { min = 0 max = 0 }
                            entity_offset_angle = { min = 0 max = 0 }
                            entity_offset_height = { min = 0 max = 0 }
                            entity_scale_to_size = yes
                            play_animation_once = yes
                            duration = 60
                        }
                    }
                    set_timed_ship_flag = {
                        flag = als_cybershield_ship_effect
                        days = 15
                    }
                    add_modifier = {
                        modifier = als_tactic_cybershield_modifier
                        days = 15
                    }
                }
            }
        }
    }
    if = {
        limit = {
            leader = {
                has_trait = als_trait_tactic_cybershield_expert
                NOT = {
                    has_leader_flag = als_admiral_actived_the_tactic
                }
            }
        }
        leader = {
            set_timed_leader_flag = {
                flag = als_admiral_actived_the_tactic
                days = 9
            }
        }
        every_owned_ship = {
            limit = {
                NOT = {
                    has_ship_flag = als_cybershield_ship_effect
                }
            }
            random_list = {
                2 = {}
                1 = {
                    if = {
                        limit = {
                            NOT = {
                                has_ship_flag = als_ship_particle_cybershield_flag
                            }
                        }
                        set_timed_ship_flag = {
                            flag = als_ship_particle_cybershield_flag
                            days = 15
                        }
                        create_ambient_object = {
                            type = als_particle_cybershield_effect
                            scale = 15
                            location = this
                            use_3d_location = no
                            entity_offset = { min = 0 max = 0 }
                            entity_offset_angle = { min = 0 max = 0 }
                            entity_offset_height = { min = 0 max = 0 }
                            entity_scale_to_size = yes
                            play_animation_once = yes
                            duration = 60
                        }
                    }
                    set_timed_ship_flag = {
                        flag = als_cybershield_ship_effect
                        days = 15
                    }
                    add_modifier = {
                        modifier = als_tactic_cybershield_modifier_expert
                        days = 15
                    }
                }
            }
        }
    }
    fleet_event = {
        id = als.86
        days = 10
    }
}

effect_als_breakthrough_start = {
    if = {
        limit = {
            leader = {
                has_trait = als_trait_tactic_breakthrough
                NOT = {
                    has_leader_flag = als_admiral_actived_the_tactic
                }
            }
        }
        leader = {
            set_timed_leader_flag = {
                flag = als_admiral_actived_the_tactic
                days = 9
            }
        }
        every_owned_ship = {
            limit = {
                NOT = {
                    has_ship_flag = als_breakthrough_ship_effect
                }
            }
            random_list = {
                2 = {}
                1 = {
                    if = {
                        limit = {
                            NOT = {
                                has_ship_flag = als_ship_particle_breakthrough_flag
                            }
                        }
                        set_timed_ship_flag = {
                            flag = als_ship_particle_breakthrough_flag
                            days = 15
                        }
                        create_ambient_object = {
                            type = als_particle_breakthrough_effect
                            scale = 15
                            location = this
                            use_3d_location = no
                            entity_offset = { min = 0 max = 0 }
                            entity_offset_angle = { min = 0 max = 0 }
                            entity_offset_height = { min = 0 max = 0 }
                            entity_scale_to_size = yes
                            play_animation_once = yes
                            duration = 60
                        }
                    }
                    set_timed_ship_flag = {
                        flag = als_breakthrough_ship_effect
                        days = 15
                    }
                    add_modifier = {
                        modifier = als_tactic_breakthrough_modifier
                        days = 15
                    }
                }
            }
        }
    }
    if = {
        limit = {
            leader = {
                has_trait = als_trait_tactic_breakthrough_expert
                NOT = {
                    has_leader_flag = als_admiral_actived_the_tactic
                }
            }
        }
        leader = {
            set_timed_leader_flag = {
                flag = als_admiral_actived_the_tactic
                days = 9
            }
        }
        every_owned_ship = {
            limit = {
                NOT = {
                    has_ship_flag = als_breakthrough_ship_effect
                }
            }
            random_list = {
                2 = {}
                1 = {
                    if = {
                        limit = {
                            NOT = {
                                has_ship_flag = als_ship_particle_breakthrough_flag
                            }
                        }
                        set_timed_ship_flag = {
                            flag = als_ship_particle_breakthrough_flag
                            days = 15
                        }
                        create_ambient_object = {
                            type = als_particle_breakthrough_effect
                            scale = 15
                            location = this
                            use_3d_location = no
                            entity_offset = { min = 0 max = 0 }
                            entity_offset_angle = { min = 0 max = 0 }
                            entity_offset_height = { min = 0 max = 0 }
                            entity_scale_to_size = yes
                            play_animation_once = yes
                            duration = 60
                        }
                    }
                    set_timed_ship_flag = {
                        flag = als_breakthrough_ship_effect
                        days = 15
                    }
                    add_modifier = {
                        modifier = als_tactic_breakthrough_modifier_expert
                        days = 15
                    }
                }
            }
        }
    }
    fleet_event = {
        id = als.83
        days = 10
    }
}

effect_als_check_admiral_currect_4_status_for_varible = {
    if = {
        limit = {
            has_trait = als_trait_$STATUS$_$VALUE$
        }
        set_variable = {
            which = als_$STATUS$_level
            value = $VALUE$
        }
    }
}




