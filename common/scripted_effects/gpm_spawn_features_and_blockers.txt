@planetary_feature_repeat = 3

# spawn special tile blockers like planet shields and temples
gpm_spawn_special_features = {
	if = {
		limit = {
			AND = {
				has_modifier = Android_Pleasure_Palace 
				NOT = { has_deposit = gpm_tb_Android_Pleasure_Palace }
			}
		}
		add_deposit = "gpm_tb_Android_Pleasure_Palace"
	}
	if = {
		limit = {
			AND = {
				has_modifier = Precursor_Planetary_Shield 
				NOT = { has_deposit = gpm_tb_Precursor_Planetary_Shield }
			}
		}
		add_deposit = "gpm_tb_Precursor_Planetary_Shield"
	}
	if = {
		limit = {
			AND = {
				has_modifier = Precursor_Capital_Complex 
				NOT = { has_deposit = gpm_tb_Precursor_Capital_Complex }
			}
		}
		add_deposit = "gpm_tb_Precursor_Capital_Complex"
	}
	if = {
		limit = {
			AND = {
				has_modifier = Temple_of_the_Ancient_One 
				NOT = { has_deposit = gpm_tb_Temple_of_the_Ancient_One }
			}
		}
		add_deposit = "gpm_tb_Temple_of_the_Ancient_One"
	}
}

gpm_spawn_precursor_feature = {
	if = {
		limit = {
			NOR = {
				has_planet_flag = gpm_precursor_ruins_1
				has_planet_flag = gpm_precursor_ruins_2
				has_planet_flag = gpm_precursor_ruins_3
				has_planet_flag = gpm_precursor_ruins_4
				has_planet_flag = gpm_precursor_ruins_5
				has_planet_flag = gpm_precursor_ruins_6
				has_planet_flag = gpm_precursor_ruins_7
			}
		}
		random_list = {
				10 = { set_planet_flag = gpm_precursor_ruins_1 }
				10 = { set_planet_flag = gpm_precursor_ruins_2 }
				10 = { set_planet_flag = gpm_precursor_ruins_3 }
				10 = { set_planet_flag = gpm_precursor_ruins_4 }
				10 = { set_planet_flag = gpm_precursor_ruins_5 }
				10 = { set_planet_flag = gpm_precursor_ruins_6 }
				10 = { set_planet_flag = gpm_precursor_ruins_7 }
		}
	}
	if = { limit = { has_planet_flag = gpm_precursor_ruins_1 } add_deposit = gpm_tb_precursor_ruins_1 }
	if = { limit = { has_planet_flag = gpm_precursor_ruins_2 } add_deposit = gpm_tb_precursor_ruins_2 }
	if = { limit = { has_planet_flag = gpm_precursor_ruins_3 } add_deposit = gpm_tb_precursor_ruins_3 }
	if = { limit = { has_planet_flag = gpm_precursor_ruins_4 } add_deposit = gpm_tb_precursor_ruins_4 }
	if = { limit = { has_planet_flag = gpm_precursor_ruins_5 } add_deposit = gpm_tb_precursor_ruins_5 }
	if = { limit = { has_planet_flag = gpm_precursor_ruins_6 } add_deposit = gpm_tb_precursor_ruins_6 }
	if = { limit = { has_planet_flag = gpm_precursor_ruins_7 } add_deposit = gpm_tb_precursor_ruins_7 }
}

# Spawn tile blockers based on modifiers. 
gpm_spawn_planetary_feature = {
	# gpm_tb_Precursor_Planetary_Shield
	# gpm_tb_Precursor_Capital_Complex
	# gpm_tb_Android_Pleasure_Palace
	# gpm_tb_Temple_of_the_Ancient_One
	# gpm_tb_Ruined_Battlefield
	# gpm_tb_Spaceship_Graveyard
	# gpm_tb_Toxic_Gas
	# gpm_tb_Unusual_Formations
	# gpm_tb_Locust_Plagues
	# gpm_tb_Seasonal_Flooding
	# gpm_tb_Ice_Flora
	# gpm_tb_Planetwide_Forest
	# gpm_tb_Dense_Forests
	# gpm_tb_Proto_Forests
	# gpm_tb_Arachnophobia
	# gpm_tb_Dunes
	# gpm_tb_Mushroom_Forest
	# gpm_tb_Floating_Rocks
	# gpm_tb_Oasis
	
	if = { limit = { has_modifier = "Ruined_Battlefield" }
		while = {
			count = @planetary_feature_repeat
			random_list = {
				5 = { modifier = { factor = 0 NOT = { has_deposit = "gpm_tb_Ruined_Battlefield" }}}
				10 = {
					add_deposit = "gpm_tb_Ruined_Battlefield" 
					modifier = { factor = 0.33 has_deposit = "gpm_tb_Ruined_Battlefield" }
				}
			}
		}
	}
	if = { limit = { has_modifier = "Spaceship_Graveyard" }
		while = {
			count = @planetary_feature_repeat
			random_list = {
				5 = { modifier = { factor = 0 NOT = { has_deposit = "gpm_tb_Spaceship_Graveyard" }}}
				10 = {
					add_deposit = "gpm_tb_Spaceship_Graveyard" 
					random_list = {
						10 = { gpm_remove_random_vanilla_energy_planetary_feature = yes }
						# 10 = { gpm_remove_random_vanilla_mineral_planetary_feature = yes }
						10 = { gpm_remove_random_vanilla_food_planetary_feature = yes }
					}
					modifier = { factor = 0.33 has_deposit = "gpm_tb_Spaceship_Graveyard" }
				}
			}
		}
	}
	if = { limit = { has_modifier = "Toxic_Gas" }
		while = {
			count = @planetary_feature_repeat
			random_list = {
				5 = { modifier = { factor = 0 NOT = { has_deposit = "gpm_tb_Toxic_Gas" }}}
				10 = {
					add_deposit = "gpm_tb_Toxic_Gas" 
					modifier = { factor = 0.33 has_deposit = "gpm_tb_Toxic_Gas" }
				}
			}
		}
	}
	if = { limit = { has_modifier = "Unusual_Formations" }
		while = {
			count = @planetary_feature_repeat
			random_list = {
				5 = { modifier = { factor = 0 NOT = { has_deposit = "gpm_tb_Unusual_Formations" }}}
				10 = {
					add_deposit = "gpm_tb_Unusual_Formations" 
					random_list = {
						10 = { gpm_remove_random_vanilla_energy_planetary_feature = yes }
						# 10 = { gpm_remove_random_vanilla_mineral_planetary_feature = yes }
						10 = { gpm_remove_random_vanilla_food_planetary_feature = yes }
					}
					modifier = { factor = 0.33 has_deposit = "gpm_tb_Unusual_Formations" }
				}
			}
		}
	}
	if = { limit = { has_modifier = "Locust_Plagues" }
		while = {
			count = @planetary_feature_repeat
			random_list = {
				5 = { modifier = { factor = 0 NOT = { has_deposit = "gpm_tb_Locust_Plagues" }}}
				10 = {
					add_deposit = "gpm_tb_Locust_Plagues" 
					modifier = { factor = 0.33 has_deposit = "gpm_tb_Locust_Plagues" }
				}
			}
		}
	}
	if = { limit = { has_modifier = "Seasonal_Flooding" }
		while = {
			count = @planetary_feature_repeat
			random_list = {
				5 = { modifier = { factor = 0 NOT = { has_deposit = "gpm_tb_Seasonal_Flooding" }}}
				10 = {
					add_deposit = "gpm_tb_Seasonal_Flooding" 
					modifier = { factor = 0.33 has_deposit = "gpm_tb_Seasonal_Flooding" }
				}
			}
		}
	}
	if = { limit = { has_modifier = "Ice_Flora" }
		while = {
			count = @planetary_feature_repeat
			random_list = {
				5 = { modifier = { factor = 0 NOT = { has_deposit = "gpm_tb_Ice_Flora" }}}
				10 = {
					add_deposit = "gpm_tb_Ice_Flora" 
					random_list = {
						10 = { gpm_remove_random_vanilla_energy_planetary_feature = yes }
						10 = { gpm_remove_random_vanilla_mineral_planetary_feature = yes }
						# 10 = { gpm_remove_random_vanilla_food_planetary_feature = yes }
					}
					modifier = { factor = 0.33 has_deposit = "gpm_tb_Ice_Flora" }
				}
			}
		}
	}
	if = { limit = { has_modifier = "Planetwide_Forest" }
		while = {
			count = @planetary_feature_repeat
			random_list = {
				5 = { modifier = { factor = 0 NOT = { has_deposit = "gpm_tb_Planetwide_Forest" }}}
				10 = {
					add_deposit = "gpm_tb_Planetwide_Forest" 
					random_list = {
						10 = { gpm_remove_random_vanilla_energy_planetary_feature = yes }
						10 = { gpm_remove_random_vanilla_mineral_planetary_feature = yes }
						# 10 = { gpm_remove_random_vanilla_food_planetary_feature = yes }
					}
					modifier = { factor = 0.33 has_deposit = "gpm_tb_Planetwide_Forest" }
				}
			}
		}
	}
	if = { limit = { has_modifier = "Dense_Forests" }
		while = {
			count = @planetary_feature_repeat
			random_list = {
				5 = { modifier = { factor = 0 NOT = { has_deposit = "gpm_tb_Dense_Forests" }}}
				10 = {
					add_deposit = "gpm_tb_Dense_Forests" 
					random_list = {
						10 = { gpm_remove_random_vanilla_energy_planetary_feature = yes }
						10 = { gpm_remove_random_vanilla_mineral_planetary_feature = yes }
						# 10 = { gpm_remove_random_vanilla_food_planetary_feature = yes }
					}
					modifier = { factor = 0.33 has_deposit = "gpm_tb_Dense_Forests" }
				}
			}
		}
	}
	if = { limit = { has_modifier = "Proto_Forests" }
		while = {
			count = @planetary_feature_repeat
			random_list = {
				5 = { modifier = { factor = 0 NOT = { has_deposit = "gpm_tb_Proto_Forests" }}}
				10 = {
					add_deposit = "gpm_tb_Proto_Forests" 
					random_list = {
						10 = { gpm_remove_random_vanilla_energy_planetary_feature = yes }
						10 = { gpm_remove_random_vanilla_mineral_planetary_feature = yes }
						# 10 = { gpm_remove_random_vanilla_food_planetary_feature = yes }
					}
					modifier = { factor = 0.33 has_deposit = "gpm_tb_Proto_Forests" }
				}
			}
		}
	}
	if = { limit = { has_modifier = "Arachnophobia" }
		while = {
			count = @planetary_feature_repeat
			random_list = {
				5 = { modifier = { factor = 0 NOT = { has_deposit = "gpm_tb_Arachnophobia" }}}
				10 = {
					add_deposit = "gpm_tb_Arachnophobia" 
					modifier = { factor = 0.33 has_deposit = "gpm_tb_Arachnophobia" }
				}
			}
		}
	}
	if = { limit = { has_modifier = "Dunes" }
		while = {
			count = @planetary_feature_repeat
			random_list = {
				5 = { modifier = { factor = 0 NOT = { has_deposit = "gpm_tb_Dunes" }}}
				10 = {
					add_deposit = "gpm_tb_Dunes" 
					random_list = {
						# 10 = { gpm_remove_random_vanilla_energy_planetary_feature = yes }
						10 = { gpm_remove_random_vanilla_mineral_planetary_feature = yes }
						10 = { gpm_remove_random_vanilla_food_planetary_feature = yes }
					}
					modifier = { factor = 0.33 has_deposit = "gpm_tb_Dunes" }
				}
			}
		}
	}
	if = { limit = { has_modifier = "Mushroom_Forest" }
		while = {
			count = @planetary_feature_repeat
			random_list = {
				5 = { modifier = { factor = 0 NOT = { has_deposit = "gpm_tb_Mushroom_Forest" }}}
				10 = {
					add_deposit = "gpm_tb_Mushroom_Forest" 
					random_list = {
						10 = { gpm_remove_random_vanilla_energy_planetary_feature = yes }
						10 = { gpm_remove_random_vanilla_mineral_planetary_feature = yes }
						# 10 = { gpm_remove_random_vanilla_food_planetary_feature = yes }
					}
					modifier = { factor = 0.33 has_deposit = "gpm_tb_Mushroom_Forest" }
				}
			}
		}
	}
	if = { limit = { has_modifier = "Floating_Islands" }
		while = {
			count = @planetary_feature_repeat
			random_list = {
				5 = { modifier = { factor = 0 NOT = { has_deposit = "gpm_tb_Floating_Rocks" }}}
				10 = {
					add_deposit = "gpm_tb_Floating_Rocks" 
					random_list = {
						10 = { gpm_remove_random_vanilla_energy_planetary_feature = yes }
						# 10 = { gpm_remove_random_vanilla_mineral_planetary_feature = yes }
						10 = { gpm_remove_random_vanilla_food_planetary_feature = yes }
					}
					modifier = { factor = 0.33 has_deposit = "gpm_tb_Floating_Rocks" }
				}
			}
		}
	}
	if = { limit = { has_modifier = "Thin_Atmospheres" }
		while = {
			count = @planetary_feature_repeat
			random_list = {
				5 = { modifier = { factor = 0 NOT = { has_deposit = "gpm_tb_Small_Wildlife" }}}
				10 = {
					add_deposit = "gpm_tb_Small_Wildlife" 
					random_list = {
						10 = { gpm_remove_random_vanilla_energy_planetary_feature = yes }
						10 = { gpm_remove_random_vanilla_mineral_planetary_feature = yes }
						# 10 = { gpm_remove_random_vanilla_food_planetary_feature = yes }
					}
					modifier = { factor = 0.33 has_deposit = "gpm_tb_Small_Wildlife" }
				}
			}
		}
	}
	if = { limit = { has_modifier = "Dense_Atmospheres" }
		while = {
			count = @planetary_feature_repeat
			random_list = {
				5 = { modifier = { factor = 0 NOT = { has_deposit = "gpm_tb_Massive_Wildlife" }}}
				10 = {
					add_deposit = "gpm_tb_Massive_Wildlife" 
					random_list = {
						10 = { gpm_remove_random_vanilla_energy_planetary_feature = yes }
						10 = { gpm_remove_random_vanilla_mineral_planetary_feature = yes }
						# 10 = { gpm_remove_random_vanilla_food_planetary_feature = yes }
					}
					modifier = { factor = 0.33 has_deposit = "gpm_tb_Massive_Wildlife" }
				}
			}
		}
	}
	if = { limit = { has_modifier = "Strong_Volcanism" }
		while = {
			count = @planetary_feature_repeat
			random_list = {
				10 = { modifier = { factor = 0 NOR = { has_deposit = "gpm_tb_Super_Volcano" has_deposit = "gpm_tb_Obsidian_Fields" }}}
				10 = {
					add_deposit = "gpm_tb_Super_Volcano" 
					random_list = {
						10 = { gpm_remove_random_vanilla_energy_planetary_feature = yes }
						# 10 = { gpm_remove_random_vanilla_mineral_planetary_feature = yes }
						10 = { gpm_remove_random_vanilla_food_planetary_feature = yes }
					}
					modifier = { factor = 0.33 has_deposit = "gpm_tb_Super_Volcano" }
				}
				10 = {
					add_deposit = "gpm_tb_Obsidian_Fields" 
					random_list = {
						10 = { gpm_remove_random_vanilla_energy_planetary_feature = yes }
						# 10 = { gpm_remove_random_vanilla_mineral_planetary_feature = yes }
						10 = { gpm_remove_random_vanilla_food_planetary_feature = yes }
					}
					modifier = { factor = 0.33 has_deposit = "gpm_tb_Obsidian_Fields" }
				}
			}
		}
	}
	if = { 
		limit = { 
			OR = {
				has_modifier = "strong_magnetic_field"
				has_modifier = "strong_magnetic_field_2"
			}
		}
		while = {
			count = @planetary_feature_repeat
			random_list = {
				10 = { modifier = { factor = 0 NOR = { has_deposit = "gpm_tb_Magnetic_Mountains" has_deposit = "gpm_tb_Magnetic_Fields" }}}
				10 = {
					add_deposit = "gpm_tb_Magnetic_Mountains" 
					random_list = {
						# 10 = { gpm_remove_random_vanilla_energy_planetary_feature = yes }
						10 = { gpm_remove_random_vanilla_mineral_planetary_feature = yes }
						10 = { gpm_remove_random_vanilla_food_planetary_feature = yes }
					}
					modifier = { factor = 0.33 has_deposit = "gpm_tb_Magnetic_Mountains" }
				}
				10 = {
					add_deposit = "gpm_tb_Magnetic_Fields" 
					random_list = {
						# 10 = { gpm_remove_random_vanilla_energy_planetary_feature = yes }
						10 = { gpm_remove_random_vanilla_mineral_planetary_feature = yes }
						10 = { gpm_remove_random_vanilla_food_planetary_feature = yes }
					}
					modifier = { factor = 0.33 has_deposit = "gpm_tb_Magnetic_Fields" }
				}
			}
		}
	}
	if = {
		limit = { 
			OR = {
				has_modifier = "asteroid_impacts"
				has_modifier = "asteroid_impacts_2"
			}
		}
		while = {
			count = @planetary_feature_repeat
			random_list = {
				5 = { modifier = { factor = 0 NOT = { has_deposit = "gpm_tb_Rich_Crater" }}}
				10 = {
					add_deposit = "gpm_tb_Rich_Crater" 
					random_list = {
						10 = { gpm_remove_random_vanilla_energy_planetary_feature = yes }
						# 10 = { gpm_remove_random_vanilla_mineral_planetary_feature = yes }
						10 = { gpm_remove_random_vanilla_food_planetary_feature = yes }
					}
					modifier = { factor = 0.33 has_deposit = "gpm_tb_Rich_Crater" }
				}
			}
		}
	}
	if = {
		limit = { 
			OR = {
				has_modifier = "mineral_rich"
				has_modifier = "mineral_rich_2"
			}
		}
		while = {
			count = @planetary_feature_repeat
			random_list = {
				5 = { modifier = { factor = 0 NOT = { has_deposit = "gpm_tb_Surface_Mineral_Veins" }}}
				10 = {
					add_deposit = "gpm_tb_Surface_Mineral_Veins" 
					random_list = {
						10 = { gpm_remove_random_vanilla_energy_planetary_feature = yes }
						# 10 = { gpm_remove_random_vanilla_mineral_planetary_feature = yes }
						10 = { gpm_remove_random_vanilla_food_planetary_feature = yes }
					}
					modifier = { factor = 0.33 has_deposit = "gpm_tb_Surface_Mineral_Veins" }
				}
			}
		}
	}
	if = {
		limit = { 
			OR = {
				has_modifier = "ultra_rich"
				has_modifier = "ultra_rich_2"
			}
		}
		while = {
			count = @planetary_feature_repeat
			random_list = {
				10 = { modifier = { factor = 0 NOR = { has_deposit = "gpm_tb_Dense_Metal_Veins" has_deposit = "gpm_tb_Iron_Mountain" }}}
				10 = {
					add_deposit = "gpm_tb_Dense_Metal_Veins" 
					random_list = {
						10 = { gpm_remove_random_vanilla_energy_planetary_feature = yes }
						# 10 = { gpm_remove_random_vanilla_mineral_planetary_feature = yes }
						10 = { gpm_remove_random_vanilla_food_planetary_feature = yes }
					}
					modifier = { factor = 0.33 has_deposit = "gpm_tb_Dense_Metal_Veins" }
				}
				10 = {
					add_deposit = "gpm_tb_Iron_Mountain" 
					random_list = {
						10 = { gpm_remove_random_vanilla_energy_planetary_feature = yes }
						# 10 = { gpm_remove_random_vanilla_mineral_planetary_feature = yes }
						10 = { gpm_remove_random_vanilla_food_planetary_feature = yes }
					}
					modifier = { factor = 0.33 has_deposit = "gpm_tb_Iron_Mountain" }
				}
			}
		}
	}
	if = { limit = { has_modifier = "Floating_Islands" }
		while = {
			count = @planetary_feature_repeat
			random_list = {
				10 = { modifier = { factor = 0 NOR = { has_deposit = "gpm_tb_Floating_Island" has_deposit = "gpm_tb_Floating_Mountain" }}}
				10 = {
					add_deposit = "gpm_tb_Floating_Island" 
					# gpm_remove_random_vanilla_planetary_feature = yes 
					modifier = { factor = 0.33 has_deposit = "gpm_tb_Floating_Island" }
				}
				10 = {
					add_deposit = "gpm_tb_Floating_Mountain" 
					# gpm_remove_random_vanilla_planetary_feature = yes 
					modifier = { factor = 0.33 has_deposit = "gpm_tb_Floating_Mountain" }
				}
			}
		}
	}
	if = { limit = { has_modifier = "Hostile_Flora" }
		while = {
			count = @planetary_feature_repeat
			random_list = {
				10 = { modifier = { factor = 0 NOR = { has_deposit = "gpm_tb_Carnivorous_Jungle" has_deposit = "gpm_tb_Carnivorous_Forest" has_deposit = "gpm_tb_Carnivorous_Kelp" }}}
				10 = {
					add_deposit = "gpm_tb_Carnivorous_Jungle" 
					random_list = {
						10 = { gpm_remove_random_vanilla_energy_planetary_feature = yes }
						10 = { gpm_remove_random_vanilla_mineral_planetary_feature = yes }
						# 10 = { gpm_remove_random_vanilla_food_planetary_feature = yes }
					}
					modifier = { factor = 0.33 has_deposit = "gpm_tb_Carnivorous_Jungle" }
				}
				10 = {
					add_deposit = "gpm_tb_Carnivorous_Forest" 
					random_list = {
						10 = { gpm_remove_random_vanilla_energy_planetary_feature = yes }
						10 = { gpm_remove_random_vanilla_mineral_planetary_feature = yes }
						# 10 = { gpm_remove_random_vanilla_food_planetary_feature = yes }
					}
					modifier = { factor = 0.33 has_deposit = "gpm_tb_Carnivorous_Forest" }
				}
				10 = {
					add_deposit = "gpm_tb_Carnivorous_Kelp" 
					random_list = {
						10 = { gpm_remove_random_vanilla_energy_planetary_feature = yes }
						10 = { gpm_remove_random_vanilla_mineral_planetary_feature = yes }
						# 10 = { gpm_remove_random_vanilla_food_planetary_feature = yes }
					}
					modifier = { factor = 0.33 has_deposit = "gpm_tb_Carnivorous_Kelp" }
				}
			}
		}
	}
	if = { limit = { has_modifier = "Magma_Ocean" }
		while = {
			count = @planetary_feature_repeat
			random_list = {
				5 = { modifier = { factor = 0 NOT = { has_deposit = "gpm_tb_Magma_Ocean" }}}
				10 = {
					add_deposit = "gpm_tb_Magma_Ocean" 
					# gpm_remove_random_vanilla_planetary_feature = yes 
					modifier = { factor = 0.33 has_deposit = "gpm_tb_Magma_Ocean" }
				}
			}
		}
	}
	if = { limit = { has_modifier = "Toxic_Gas" }
		while = {
			count = @planetary_feature_repeat
			random_list = {
				5 = { modifier = { factor = 0 NOT = { has_deposit = "gpm_tb_Toxic_Vent" }}}
				10 = {
					add_deposit = "gpm_tb_Toxic_Vent" 
					# gpm_remove_random_vanilla_planetary_feature = yes 
					modifier = { factor = 0.33 has_deposit = "gpm_tb_Toxic_Vent" }
				}
			}
		}
	}
	if = { limit = { has_modifier = "Extensive_Cavern_System" }
		while = {
			count = @planetary_feature_repeat
			random_list = {
				5 = { modifier = { factor = 0 NOT = { has_deposit = "gpm_tb_Colossal_Subterranean_Cavern" }}}
				10 = {
					add_deposit = "gpm_tb_Colossal_Subterranean_Cavern" 
					random_list = {
						10 = { gpm_remove_random_vanilla_energy_planetary_feature = yes }
						# 10 = { gpm_remove_random_vanilla_mineral_planetary_feature = yes }
						10 = { gpm_remove_random_vanilla_food_planetary_feature = yes }
					}
					modifier = { factor = 0.33 has_deposit = "gpm_tb_Colossal_Subterranean_Cavern" }
				}
			}
		}
	}
	if = { limit = { has_modifier = "Titanic_Predators" }
		while = {
			count = @planetary_feature_repeat
			random_list = {
				5 = { modifier = { factor = 0 NOT = { has_deposit = "gpm_tb_Titanic_Hunting_Ground" }}}
				10 = {
					add_deposit = "gpm_tb_Titanic_Hunting_Ground" 
					random_list = {
						10 = { gpm_remove_random_vanilla_energy_planetary_feature = yes }
						10 = { gpm_remove_random_vanilla_mineral_planetary_feature = yes }
						# 10 = { gpm_remove_random_vanilla_food_planetary_feature = yes }
					}
					modifier = { factor = 0.33 has_deposit = "gpm_tb_Titanic_Hunting_Ground" }
				}
			}
		}
	}
	if = { limit = { has_modifier = "Unnatural_World" }
		while = {
			count = @planetary_feature_repeat
			random_list = {
				5 = { modifier = { factor = 0 NOT = { has_deposit = "gpm_tb_Unnatural_Crystals" }}}
				10 = {
					add_deposit = "gpm_tb_Unnatural_Crystals" 
					# gpm_remove_random_vanilla_planetary_feature = yes 
					modifier = { factor = 0.33 has_deposit = "gpm_tb_Unnatural_Crystals" }
				}
			}
		}
	}
	if = { limit = { has_modifier = "Ruined_Battlefield" }
		while = {
			count = @planetary_feature_repeat
			random_list = {
				10 = { modifier = { factor = 0 NOR = { has_deposit = "gpm_tb_Ancient_Battlefield" has_deposit = "gpm_tb_Buried_Remains" }}}
				10 = {
					add_deposit = "gpm_tb_Ancient_Battlefield" 
					# gpm_remove_random_vanilla_planetary_feature = yes 
					modifier = { factor = 0.33 has_deposit = "gpm_tb_Ancient_Battlefield" }
				}
				10 = {
					add_deposit = "gpm_tb_Buried_Remains" 
					# gpm_remove_random_vanilla_planetary_feature = yes 
					modifier = { factor = 0.33 has_deposit = "gpm_tb_Buried_Remains" }
				}
			}
		}
	}
	if = { limit = { has_modifier = "Spaceship_Graveyard" }
		while = {
			count = @planetary_feature_repeat
			random_list = {
				10 = { modifier = { factor = 0 NOR = { has_deposit = "gpm_tb_Crashed_Fighter" has_deposit = "gpm_tb_Crashed_Destroyer" has_deposit = "gpm_tb_Crashed_Battleship" has_deposit = "gpm_tb_Crashed_Capital_Ship" }}}
				10 = {
					add_deposit = "gpm_tb_Crashed_Fighter" 
					# gpm_remove_random_vanilla_planetary_feature = yes 
					modifier = { factor = 0.33 has_deposit = "gpm_tb_Crashed_Fighter" }
				}
				10 = {
					add_deposit = "gpm_tb_Crashed_Destroyer" 
					# gpm_remove_random_vanilla_planetary_feature = yes 
					modifier = { factor = 0.33 has_deposit = "gpm_tb_Crashed_Destroyer" }
				}
				10 = {
					add_deposit = "gpm_tb_Crashed_Battleship" 
					# gpm_remove_random_vanilla_planetary_feature = yes 
					modifier = { factor = 0.33 has_deposit = "gpm_tb_Crashed_Battleship" }
				}
				10 = {
					add_deposit = "gpm_tb_Crashed_Capital_Ship" 
					# gpm_remove_random_vanilla_planetary_feature = yes 
					modifier = { factor = 0.33 has_deposit = "gpm_tb_Crashed_Capital_Ship" }
				}
			}
		}
	}
	if = { limit = { has_modifier = "Gemstones" }
		while = {
			count = @planetary_feature_repeat
			random_list = {
				5 = { modifier = { factor = 0 NOT = { has_deposit = "gpm_tb_Crystal_Hills" }}}
				10 = {
					add_deposit = "gpm_tb_Crystal_Hills" 
					# gpm_remove_random_vanilla_planetary_feature = yes 
					modifier = { factor = 0.33 has_deposit = "gpm_tb_Crystal_Hills" }
				}
			}
		}
	}
	if = { limit = { has_modifier = "Endless_Fish" }
		while = {
			count = @planetary_feature_repeat
			random_list = {
				5 = { modifier = { factor = 0 NOT = { has_deposit = "gpm_tb_Colossal_Fish" }}}
				10 = {
					add_deposit = "gpm_tb_Colossal_Fish" 
					random_list = {
						10 = { gpm_remove_random_vanilla_energy_planetary_feature = yes }
						10 = { gpm_remove_random_vanilla_mineral_planetary_feature = yes }
						# 10 = { gpm_remove_random_vanilla_food_planetary_feature = yes }
					}
					modifier = { factor = 0.33 has_deposit = "gpm_tb_Colossal_Fish" }
				}
			}
		}
	}
	if = { limit = { has_modifier = "Small_Islands" }
		while = {
			count = @planetary_feature_repeat
			random_list = {
				5 = { modifier = { factor = 0 NOT = { has_deposit = "gpm_tb_Sprawling_Archipelago" }}}
				10 = {
					add_deposit = "gpm_tb_Sprawling_Archipelago" 
					random_list = {
						10 = { gpm_remove_random_vanilla_energy_planetary_feature = yes }
						10 = { gpm_remove_random_vanilla_mineral_planetary_feature = yes }
						# 10 = { gpm_remove_random_vanilla_food_planetary_feature = yes }
					}
					modifier = { factor = 0.33 has_deposit = "gpm_tb_Sprawling_Archipelago" }
				}
			}
		}
	}
	if = { limit = { has_modifier = "Delicious_Ingredients" }
		while = {
			count = @planetary_feature_repeat
			random_list = {
				5 = { modifier = { factor = 0 NOT = { has_deposit = "gpm_tb_Spice_Fields" }}}
				10 = {
					add_deposit = "gpm_tb_Spice_Fields" 
					# gpm_remove_random_vanilla_planetary_feature = yes 
					modifier = { factor = 0.33 has_deposit = "gpm_tb_Spice_Fields" }
				}
			}
		}
	}
	if = { limit = { has_modifier = "Unusual_Formations" }
		while = {
			count = @planetary_feature_repeat
			random_list = {
				5 = { modifier = { factor = 0 NOT = { has_deposit = "gpm_tb_Geometric_Oddities" }}}
				10 = {
					add_deposit = "gpm_tb_Geometric_Oddities" 
					# gpm_remove_random_vanilla_planetary_feature = yes 
					modifier = { factor = 0.33 has_deposit = "gpm_tb_Geometric_Oddities" }
				}
			}
		}
	}
	if = { limit = { has_modifier = "Lingering_Pollution" }
		while = {
			count = @planetary_feature_repeat
			random_list = {
				10 = { modifier = { factor = 0 NOR = { has_deposit = "gpm_tb_garbage_patch" has_deposit = "gpm_tb_Industrial_Ruins" has_deposit = "gpm_tb_Radioactive_Dump" }}}
				10 = {
					add_deposit = "gpm_tb_garbage_patch" 
					random_list = {
						# 10 = { gpm_remove_random_vanilla_energy_planetary_feature = yes }
						# 10 = { gpm_remove_random_vanilla_mineral_planetary_feature = yes }
						10 = { gpm_remove_random_vanilla_food_planetary_feature = yes }
					}
					modifier = { factor = 0.33 has_deposit = "gpm_tb_garbage_patch" }
				}
				10 = {
					add_deposit = "gpm_tb_Industrial_Ruins" 
					random_list = {
						# 10 = { gpm_remove_random_vanilla_energy_planetary_feature = yes }
						# 10 = { gpm_remove_random_vanilla_mineral_planetary_feature = yes }
						10 = { gpm_remove_random_vanilla_food_planetary_feature = yes }
					}
					modifier = { factor = 0.33 has_deposit = "gpm_tb_Industrial_Ruins" }
				}
				10 = {
					add_deposit = "gpm_tb_Radioactive_Dump" 
					random_list = {
						# 10 = { gpm_remove_random_vanilla_energy_planetary_feature = yes }
						# 10 = { gpm_remove_random_vanilla_mineral_planetary_feature = yes }
						10 = { gpm_remove_random_vanilla_food_planetary_feature = yes }
					}
					modifier = { factor = 0.33 has_deposit = "gpm_tb_Radioactive_Dump" }
				}
			}
		}
	}
	if = { limit = { has_modifier = "Ice_Flora" }
		while = {
			count = @planetary_feature_repeat
			random_list = {
				10 = { modifier = { factor = 0 NOR = { has_deposit = "gpm_tb_Ice_Flower_Field" has_deposit = "gpm_tb_White_Forest" }}}
				10 = {
					add_deposit = "gpm_tb_Ice_Flower_Field" 
					random_list = {
						10 = { gpm_remove_random_vanilla_energy_planetary_feature = yes }
						10 = { gpm_remove_random_vanilla_mineral_planetary_feature = yes }
						# 10 = { gpm_remove_random_vanilla_food_planetary_feature = yes }
					}
					modifier = { factor = 0.33 has_deposit = "gpm_tb_Ice_Flower_Field" }
				}
				10 = {
					add_deposit = "gpm_tb_White_Forest" 
					random_list = {
						10 = { gpm_remove_random_vanilla_energy_planetary_feature = yes }
						10 = { gpm_remove_random_vanilla_mineral_planetary_feature = yes }
						# 10 = { gpm_remove_random_vanilla_food_planetary_feature = yes }
					}
					modifier = { factor = 0.33 has_deposit = "gpm_tb_White_Forest" }
				}
			}
		}
	}
	if = { limit = { has_modifier = "Strange_Ice_River" }
		while = {
			count = @planetary_feature_repeat
			random_list = {
				5 = { modifier = { factor = 0 NOT = { has_deposit = "gpm_tb_Strange_Ice_River" }}}
				10 = {
					add_deposit = "gpm_tb_Strange_Ice_River" 
					random_list = {
						10 = { gpm_remove_random_vanilla_energy_planetary_feature = yes }
						10 = { gpm_remove_random_vanilla_mineral_planetary_feature = yes }
						# 10 = { gpm_remove_random_vanilla_food_planetary_feature = yes }
					}
					modifier = { factor = 0.33 has_deposit = "gpm_tb_Strange_Ice_River" }
				}
			}
		}
	}
	if = { limit = { has_modifier = "Juggernaut_Manta_Rays" }
		while = {
			count = @planetary_feature_repeat
			random_list = {
				5 = { modifier = { factor = 0 NOT = { has_deposit = "gpm_tb_Massive_Ray_School" }}}
				10 = {
					add_deposit = "gpm_tb_Massive_Ray_School" 
					# gpm_remove_random_vanilla_planetary_feature = yes 
					modifier = { factor = 0.33 has_deposit = "gpm_tb_Massive_Ray_School" }
				}
			}
		}
	}
	if = { limit = { has_modifier = "Black_Oily_Stone" }
		while = {
			count = 1
			random_list = {
				5 = { modifier = { factor = 0 NOT = { has_deposit = "gpm_tb_The_Black_Stone" }}}
				10 = {
					add_deposit = "gpm_tb_The_Black_Stone" 
					# gpm_remove_random_vanilla_planetary_feature = yes 
					modifier = { factor = 0.33 has_deposit = "gpm_tb_The_Black_Stone" }
				}
			}
		}
	}
	if = { limit = { has_modifier = "Cities_in_the_sky" }
		while = {
			count = @planetary_feature_repeat
			random_list = {
				10 = { modifier = { factor = 0 NOR = { has_deposit = "gpm_tb_Sprawling_Prestine_Ruins" has_deposit = "gpm_tb_Skyscraper_Village" }}}
				10 = {
					add_deposit = "gpm_tb_Sprawling_Prestine_Ruins" 
					# gpm_remove_random_vanilla_planetary_feature = yes 
					modifier = { factor = 0.33 has_deposit = "gpm_tb_Sprawling_Prestine_Ruins" }
				}
				10 = {
					add_deposit = "gpm_tb_Skyscraper_Village" 
					# gpm_remove_random_vanilla_planetary_feature = yes 
					modifier = { factor = 0.33 has_deposit = "gpm_tb_Skyscraper_Village" }
				}
			}
		}
	}
	if = { limit = { has_modifier = "Dunes" }
		while = {
			count = @planetary_feature_repeat
			random_list = {
				5 = { modifier = { factor = 0 NOT = { has_deposit = "gpm_tb_Sandworm_Pit" }}}
				10 = {
					add_deposit = "gpm_tb_Sandworm_Pit" 
					# gpm_remove_random_vanilla_planetary_feature = yes 
					modifier = { factor = 0.33 has_deposit = "gpm_tb_Sandworm_Pit" }
				}
			}
		}
	}
	if = { limit = { has_modifier = "Extensive_reef_systems" }
		while = {
			count = @planetary_feature_repeat
			random_list = {
				5 = { modifier = { factor = 0 NOT = { has_deposit = "gpm_tb_Grand_Reef" }}}
				10 = {
					add_deposit = "gpm_tb_Grand_Reef" 
					random_list = {
						10 = { gpm_remove_random_vanilla_energy_planetary_feature = yes }
						10 = { gpm_remove_random_vanilla_mineral_planetary_feature = yes }
						# 10 = { gpm_remove_random_vanilla_food_planetary_feature = yes }
					}
					modifier = { factor = 0.33 has_deposit = "gpm_tb_Grand_Reef" }
				}
			}
		}
	}
	if = { limit = { has_modifier = "Beautiful_Lakes" }
		while = {
			count = @planetary_feature_repeat
			random_list = {
				5 = { modifier = { factor = 0 NOT = { has_deposit = "gpm_tb_Glistening_Lake" }}}
				10 = {
					add_deposit = "gpm_tb_Glistening_Lake" 
					random_list = {
						10 = { gpm_remove_random_vanilla_energy_planetary_feature = yes }
						10 = { gpm_remove_random_vanilla_mineral_planetary_feature = yes }
						# 10 = { gpm_remove_random_vanilla_food_planetary_feature = yes }
					}
					modifier = { factor = 0.33 has_deposit = "gpm_tb_Glistening_Lake" }
				}
			}
		}
	}
	if = { limit = { has_modifier = "Hiveworld" }
		while = {
			count = @planetary_feature_repeat
			random_list = {
				10 = { modifier = { factor = 0 NOR = { has_deposit = "gpm_tb_Fossilized_Egg_Sacks" has_deposit = "gpm_tb_Fossilized_Structures" has_deposit = "gpm_tb_Fossilized_Creep" }}}
				10 = {
					add_deposit = "gpm_tb_Fossilized_Egg_Sacks" 
					random_list = {
						10 = { gpm_remove_random_vanilla_energy_planetary_feature = yes }
						# 10 = { gpm_remove_random_vanilla_mineral_planetary_feature = yes }
						10 = { gpm_remove_random_vanilla_food_planetary_feature = yes }
					}
					modifier = { factor = 0.33 has_deposit = "gpm_tb_Fossilized_Egg_Sacks" }
				}
				10 = {
					add_deposit = "gpm_tb_Fossilized_Structures" 
					random_list = {
						10 = { gpm_remove_random_vanilla_energy_planetary_feature = yes }
						# 10 = { gpm_remove_random_vanilla_mineral_planetary_feature = yes }
						10 = { gpm_remove_random_vanilla_food_planetary_feature = yes }
					}
					modifier = { factor = 0.33 has_deposit = "gpm_tb_Fossilized_Structures" }
				}
				10 = {
					add_deposit = "gpm_tb_Fossilized_Creep" 
					random_list = {
						10 = { gpm_remove_random_vanilla_energy_planetary_feature = yes }
						# 10 = { gpm_remove_random_vanilla_mineral_planetary_feature = yes }
						10 = { gpm_remove_random_vanilla_food_planetary_feature = yes }
					}
					modifier = { factor = 0.33 has_deposit = "gpm_tb_Fossilized_Creep" }
				}
			}
		}
	}
	if = { limit = { has_modifier = "Giant_Worm" }
		while = {
			count = @planetary_feature_repeat
			random_list = {
				5 = { modifier = { factor = 0 NOT = { has_deposit = "gpm_tb_Giant_Skeleton" }}}
				10 = {
					add_deposit = "gpm_tb_Giant_Skeleton" 
					random_list = {
						10 = { gpm_remove_random_vanilla_energy_planetary_feature = yes }
						# 10 = { gpm_remove_random_vanilla_mineral_planetary_feature = yes }
						10 = { gpm_remove_random_vanilla_food_planetary_feature = yes }
					}
					modifier = { factor = 0.33 has_deposit = "gpm_tb_Giant_Skeleton" }
				}
			}
		}
	}
	if = { limit = { has_modifier = "Spirals_of_Ice" }
		while = {
			count = @planetary_feature_repeat
			random_list = {
				5 = { modifier = { factor = 0 NOT = { has_deposit = "gpm_tb_Resonating_Ice" }}}
				10 = {
					add_deposit = "gpm_tb_Resonating_Ice" 
					random_list = {
						# 10 = { gpm_remove_random_vanilla_energy_planetary_feature = yes }
						10 = { gpm_remove_random_vanilla_mineral_planetary_feature = yes }
						10 = { gpm_remove_random_vanilla_food_planetary_feature = yes }
					}
					modifier = { factor = 0.33 has_deposit = "gpm_tb_Resonating_Ice" }
				}
			}
		}
	}
	if = { limit = { has_modifier = "Furry_Packs" }
		while = {
			count = @planetary_feature_repeat
			random_list = {
				5 = { modifier = { factor = 0 NOT = { has_deposit = "gpm_tb_Tiny_Herds" }}}
				10 = {
					add_deposit = "gpm_tb_Tiny_Herds" 
					# gpm_remove_random_vanilla_planetary_feature = yes 
					modifier = { factor = 0.33 has_deposit = "gpm_tb_Tiny_Herds" }
				}
			}
		}
	}
	if = { limit = { has_modifier = "Rich_Soil" }
		while = {
			count = @planetary_feature_repeat
			random_list = {
				5 = { modifier = { factor = 0 NOT = { has_deposit = "gpm_tb_Fertile_Field" }}}
				10 = {
					add_deposit = "gpm_tb_Fertile_Field" 
					random_list = {
						10 = { gpm_remove_random_vanilla_energy_planetary_feature = yes }
						10 = { gpm_remove_random_vanilla_mineral_planetary_feature = yes }
						# 10 = { gpm_remove_random_vanilla_food_planetary_feature = yes }
					}
					modifier = { factor = 0.33 has_deposit = "gpm_tb_Fertile_Field" }
				}
			}
		}
	}
	if = { limit = { has_modifier = "Ecological_Nervous_System" }
		while = {
			count = @planetary_feature_repeat
			random_list = {
				5 = { modifier = { factor = 0 NOT = { has_deposit = "gpm_tb_Ecological_Brain" }}}
				10 = {
					add_deposit = "gpm_tb_Ecological_Brain" 
					# gpm_remove_random_vanilla_planetary_feature = yes 
					modifier = { factor = 0.33 has_deposit = "gpm_tb_Ecological_Brain" }
				}
			}
		}
	}
	if = { limit = { has_modifier = "Warm_Water_Lakes" }
		while = {
			count = @planetary_feature_repeat
			random_list = {
				5 = { modifier = { factor = 0 NOT = { has_deposit = "gpm_tb_Hot_Springs" }}}
				10 = {
					add_deposit = "gpm_tb_Hot_Springs" 
					# gpm_remove_random_vanilla_planetary_feature = yes 
					modifier = { factor = 0.33 has_deposit = "gpm_tb_Hot_Springs" }
				}
			}
		}
	}
	if = { limit = { has_modifier = "Unique_Marine_Habitats" }
		while = {
			count = @planetary_feature_repeat
			random_list = {
				5 = { modifier = { factor = 0 NOT = { has_deposit = "gpm_tb_Colossal_Coral_Life" }}}
				10 = {
					add_deposit = "gpm_tb_Colossal_Coral_Life" 
					random_list = {
						10 = { gpm_remove_random_vanilla_energy_planetary_feature = yes }
						10 = { gpm_remove_random_vanilla_mineral_planetary_feature = yes }
						# 10 = { gpm_remove_random_vanilla_food_planetary_feature = yes }
					}
					modifier = { factor = 0.33 has_deposit = "gpm_tb_Colossal_Coral_Life" }
				}
			}
		}
	}
	if = { limit = { has_modifier = "Salt_Flats" }
		while = {
			count = @planetary_feature_repeat
			random_list = {
				5 = { modifier = { factor = 0 NOT = { has_deposit = "gpm_tb_Salt_Flats" }}}
				10 = {
					add_deposit = "gpm_tb_Salt_Flats" 
					random_list = {
						# 10 = { gpm_remove_random_vanilla_energy_planetary_feature = yes }
						10 = { gpm_remove_random_vanilla_mineral_planetary_feature = yes }
						10 = { gpm_remove_random_vanilla_food_planetary_feature = yes }
					}
					modifier = { factor = 0.33 has_deposit = "gpm_tb_Salt_Flats" }
				}
			}
		}
	}
}

# # We spawn a few more vanilla tileblockers
# gpm_spawn_vanilla_tileblockers = {
# 	random_list = {
# 		10 = {
# 			random_tile = {
# 				if = { limit = { has_blocker = yes } remove_blocker = yes }
# 				add_deposit = "tb_mountain_range"
# 			}
# 			modifier = { factor = 0 has_blocker = "tb_mountain_range" }
# 			modifier = { factor = 0
# 				OR = {
# 					is_planet_class = pc_floating
# 					is_planet_class = pc_crystal
# 					gpm_is_planet_city = yes
# 				}
# 			}
# 			modifier = { factor = 2 is_planet_class = pc_alpine }
# 			modifier = { factor = 0.25 planet_size > 16 }
# 			modifier = { factor = 0 is_colonizable = no }
# 			modifier = { factor = 0 has_pop = yes }
# 			modifier = { factor = 0 has_building = yes }
# 			modifier = { factor = 0 gpm_has_gpm_special_blocker = yes }
# 			modifier = { factor = 0 NOR = { has_regular_vanilla_blocker = yes gpm_has_gpm_plenatary_feature = yes has_blocker = yes } }
# 		}
# 		10 = {
# 			random_tile = {
# 				if = { limit = { has_blocker = yes } remove_blocker = yes }
# 				add_deposit = "tb_active_volcano"
# 			}
# 			modifier = { factor = 0 has_blocker = "tb_active_volcano" }
# 			modifier = { factor = 0
# 				OR = {
# 					is_planet_class = pc_floating
# 					is_planet_class = pc_crystal
# 					gpm_is_planet_city = yes
# 				}
# 			}
# 			modifier = { factor = 2
# 				OR = {
# 					is_planet_class = pc_alpine
# 					is_planet_class = pc_hajungle
# 					is_planet_class = pc_steppe
# 					is_planet_class = pc_hadesert
# 					is_planet_class = pc_antarctic
# 					is_planet_class = pc_cascadian
# 					is_planet_class = pc_crystal
# 					gpm_is_planet_city = yes
# 				}
# 			}
# 			modifier = { factor = 0.25 planet_size > 16 }
# 			modifier = { factor = 0 is_colonizable = no }
# 			modifier = { factor = 0 has_pop = yes }
# 			modifier = { factor = 0 has_building = yes }
# 			modifier = { factor = 0 gpm_has_gpm_special_blocker = yes }
# 			modifier = { factor = 0 NOR = { has_regular_vanilla_blocker = yes gpm_has_gpm_plenatary_feature = yes has_blocker = yes } }
# 		}
# 		10 = {
# 			random_tile = {
# 				if = { limit = { has_blocker = yes } remove_blocker = yes }
# 				add_deposit = "tb_dangerous_wildlife"
# 			}
# 			modifier = { factor = 0 has_blocker = "tb_dangerous_wildlife" }
# 			modifier = { factor = 2 
# 				OR = {
# 					has_modifier = "dangerous_wildlife" 
# 					has_modifier = "Titanic_Predators" 
# 					has_modifier = "Ruined_Battlefield" 
# 					has_modifier = "Living_Planet" 
# 					has_modifier = "Hiveworld" 
# 					has_modifier = "Furry_Packs" 
# 					has_modifier = "Abominable_Predators" 
# 				}
# 			}
# 			modifier = { factor = 0 gpm_is_planet_city = yes }
# 			modifier = { factor = 3 has_modifier = "titanic_life" }
# 			modifier = { factor = 0.25 planet_size > 16 }
# 			modifier = { factor = 0 is_colonizable = no }
# 			modifier = { factor = 0 has_pop = yes }
# 			modifier = { factor = 0 has_building = yes }
# 			modifier = { factor = 0 gpm_has_gpm_special_blocker = yes }
# 			modifier = { factor = 0 NOR = { has_regular_vanilla_blocker = yes gpm_has_gpm_plenatary_feature = yes has_blocker = yes } }
# 		}
# 		10 = {
# 			random_tile = {
# 				if = { limit = { has_blocker = yes } remove_blocker = yes }
# 				add_deposit = "tb_dense_jungle"
# 			}
# 			modifier = { factor = 0 has_blocker = "tb_dense_jungle" }
# 			modifier = { factor = 3.6
# 				OR = {
# 					is_planet_class = pc_tropical
# 					is_planet_class = pc_mangrove
# 					is_planet_class = pc_hajungle
# 				}
# 			}
# 			modifier = { factor = 2.1
# 				OR = {
# 					is_planet_class = pc_continental
# 					is_planet_class = pc_swamp
# 					is_planet_class = pc_geothermal
# 				}
# 			}
			
# 			modifier = { factor = 0.25 planet_size > 16 }
# 			modifier = { factor = 0 is_colonizable = no }
# 			modifier = { factor = 0 has_pop = yes }
# 			modifier = { factor = 0 has_building = yes }
# 			modifier = { factor = 0 gpm_has_gpm_special_blocker = yes }
# 			modifier = { factor = 0 NOR = { has_regular_vanilla_blocker = yes gpm_has_gpm_plenatary_feature = yes has_blocker = yes } }
# 		}
# 		10 = {
# 			random_tile = {
# 				if = { limit = { has_blocker = yes } remove_blocker = yes }
# 				add_deposit = "tb_quicksand_basin"
# 			}
# 			modifier = { factor = 0 has_blocker = "tb_quicksand_basin" }
# 			modifier = { factor = 3.6
# 				OR = {
# 					is_planet_class = pc_desert
# 					is_planet_class = pc_sandsea
# 					is_planet_class = pc_savannah
# 				}
# 			}
# 			modifier = { factor = 2.1
# 				OR = {
# 					is_planet_class = pc_steppe
# 					is_planet_class = pc_frozen_desert
# 					is_planet_class = pc_arid
# 					is_planet_class = pc_oasis
# 					is_planet_class = pc_mesa
# 				}
# 			}
			
# 			modifier = { factor = 0.25 planet_size > 16 }
# 			modifier = { factor = 0 is_colonizable = no }
# 			modifier = { factor = 0 has_pop = yes }
# 			modifier = { factor = 0 has_building = yes }
# 			modifier = { factor = 0 gpm_has_gpm_special_blocker = yes }
# 			modifier = { factor = 0 NOR = { has_regular_vanilla_blocker = yes gpm_has_gpm_plenatary_feature = yes has_blocker = yes } }
# 		}
# 		10 = {
# 			random_tile = {
# 				if = { limit = { has_blocker = yes } remove_blocker = yes }
# 				add_deposit = "tb_noxious_swamp"
# 			}
# 			modifier = { factor = 0 has_blocker = "tb_noxious_swamp" }
# 			modifier = { factor = 3.6
# 				OR = {
# 					is_planet_class = pc_tundra
# 					is_planet_class = pc_mangrove
# 					is_planet_class = pc_swamp
# 				}
# 			}
# 			modifier = { factor = 1.8
# 				OR = {
# 					is_planet_class = pc_tropical
# 					is_planet_class = pc_desertislands
# 				}
# 			}
			
# 			modifier = { factor = 0.25 planet_size > 16 }
# 			modifier = { factor = 0 is_colonizable = no }
# 			modifier = { factor = 0 has_pop = yes }
# 			modifier = { factor = 0 has_building = yes }
# 			modifier = { factor = 0 gpm_has_gpm_special_blocker = yes }
# 			modifier = { factor = 0 NOR = { has_regular_vanilla_blocker = yes gpm_has_gpm_plenatary_feature = yes has_blocker = yes } }
# 		}
# 		10 = {
# 			random_tile = {
# 				if = { limit = { has_blocker = yes } remove_blocker = yes }
# 				add_deposit = "tb_massive_glacier"
# 			}
# 			modifier = { factor = 0 has_blocker = "tb_massive_glacier" }
# 			modifier = { factor = 3.6
# 				OR = {
# 					is_planet_class = pc_arctic
# 					is_planet_class = pc_glacial
# 					is_planet_class = pc_alpine
# 					is_planet_class = pc_subarctic
# 					is_planet_class = pc_antarctic
# 				}
# 			}
# 			modifier = { factor = 1.8
# 				OR = {
# 					is_planet_class = pc_tundra
# 					is_planet_class = pc_cascadian
# 					is_planet_class = pc_geothermal
# 				}
# 			}
			
# 			modifier = { factor = 0.25 planet_size > 16 }
# 			modifier = { factor = 0 is_colonizable = no }
# 			modifier = { factor = 0 has_pop = yes }
# 			modifier = { factor = 0 has_building = yes }
# 			modifier = { factor = 0 gpm_has_gpm_special_blocker = yes }
# 			modifier = { factor = 0 NOR = { has_regular_vanilla_blocker = yes gpm_has_gpm_plenatary_feature = yes has_blocker = yes } }
# 		}
# 		10 = {
# 			random_tile = {
# 				if = { limit = { has_blocker = yes } remove_blocker = yes }
# 				add_deposit = "tb_toxic_kelp"
# 			}
# 			modifier = { factor = 0 has_blocker = "tb_toxic_kelp" }
# 			modifier = { factor = 5.4
# 				OR = {
# 					is_planet_class = pc_ocean
# 					is_planet_class = pc_desertislands
# 				}
# 			}
# 			modifier = { factor = 2.0
# 				OR = {
# 					is_planet_class = pc_continental
# 					is_planet_class = pc_subarctic
# 				}
# 			}
			
# 			modifier = { factor = 0.25 planet_size > 16 }
# 			modifier = { factor = 0 is_colonizable = no }
# 			modifier = { factor = 0 has_pop = yes }
# 			modifier = { factor = 0 has_building = yes }
# 			modifier = { factor = 0 gpm_has_gpm_special_blocker = yes }
# 			modifier = { factor = 0 NOR = { has_regular_vanilla_blocker = yes gpm_has_gpm_plenatary_feature = yes has_blocker = yes } }
# 		}
# 		10 = {
# 			random_tile = {
# 				if = { limit = { has_blocker = yes } remove_blocker = yes }
# 				add_deposit = "tb_deep_sinkhole"
# 			}
# 			modifier = { factor = 0 has_blocker = "tb_deep_sinkhole" }
# 			modifier = { factor = 3.6 is_planet_class = pc_arid	}
# 			modifier = { factor = 2.0
# 				OR = {
# 					is_planet_class = pc_sandsea
# 					is_planet_class = pc_mesa
# 					is_planet_class = pc_oasis
# 					is_planet_class = pc_frozen_desert
# 					is_planet_class = pc_antarctic
# 					is_planet_class = pc_savannah
# 					is_planet_class = pc_desert
# 				}
# 			}
			
# 			modifier = { factor = 0.25 planet_size > 16 }
# 			modifier = { factor = 0 is_colonizable = no }
# 			modifier = { factor = 0 has_pop = yes }
# 			modifier = { factor = 0 has_building = yes }
# 			modifier = { factor = 0 gpm_has_gpm_special_blocker = yes }
# 			modifier = { factor = 0 NOR = { has_regular_vanilla_blocker = yes gpm_has_gpm_plenatary_feature = yes has_blocker = yes } }
# 		}
# 	}
# }


# gpm_cleanup_tileblockers = {
# 	# Check to see if there are no free tiles. If there aren't any, remove 5 random ones. 
# 	if = {
# 		limit = {
# 			count_tile = {
# 				limit = { has_blocker = no has_pop = no has_building = no }
# 				count < 5
# 			}
# 		}
# 		while = {
# 			count = 5
# 			random_tile = {
# 				limit = { has_blocker = yes gpm_has_gpm_plenatary_feature = yes }
# 				remove_blocker = yes
# 			}
# 		}
# 		# Remove another 2 if the planet is bigger than 15 tiles.
# 		if = {
# 			limit = {
# 				planet_size > 15
# 			}
# 			while = {
# 				count = 2
# 				random_tile = {
# 					limit = { has_blocker = yes gpm_has_gpm_plenatary_feature = yes }
# 					remove_blocker = yes
# 				}
# 			}
# 			# Remove another 2 if the planet is bigger than 20 tiles.
# 			if = {
# 				limit = {
# 					planet_size > 20
# 				}
# 				while = {
# 					count = 3
# 					random_tile = {
# 						limit = { has_blocker = yes gpm_has_gpm_plenatary_feature = yes }
# 						remove_blocker = yes
# 					}
# 				}
# 			}
# 		}
# 	}
# }

# planet wonders
gpm_spawn_planet_wonders_desert = {
	random_list = {
		16 = { add_deposit = "gpm_tb_Gargantuan_Sinkhole" }
		2 = { add_deposit = "gpm_tb_Titanic_Cave" }
		2 = { add_deposit = "gpm_tb_Abandoned_Stargate" }
		2 = { add_deposit = "gpm_tb_Bioluminescent_Forest" }
		2 = { add_deposit = "gpm_tb_Land_Reefs" }
		2 = { add_deposit = "gpm_tb_Lava_Lake" }
		1 = { add_deposit = "gpm_tb_Collapsed_Habitat" }
		1 = { add_deposit = "gpm_tb_Ruined_Arcology" }
	}
}
gpm_spawn_planet_wonders_arid = {
	random_list = {
		16 = { add_deposit = "gpm_tb_Discharging_Field" }
		2 = { add_deposit = "gpm_tb_Titanic_Cave" }
		2 = { add_deposit = "gpm_tb_Abandoned_Stargate" }
		2 = { add_deposit = "gpm_tb_Bioluminescent_Forest" }
		2 = { add_deposit = "gpm_tb_Land_Reefs" }
		2 = { add_deposit = "gpm_tb_Lava_Lake" }
		1 = { add_deposit = "gpm_tb_Collapsed_Habitat" }
		1 = { add_deposit = "gpm_tb_Ruined_Arcology" }
	}
}
gpm_spawn_planet_wonders_savannah = {
	random_list = {
		16 = { add_deposit = "gpm_tb_Giant_Trees" }
		2 = { add_deposit = "gpm_tb_Titanic_Cave" }
		2 = { add_deposit = "gpm_tb_Abandoned_Stargate" }
		2 = { add_deposit = "gpm_tb_Bioluminescent_Forest" }
		2 = { add_deposit = "gpm_tb_Land_Reefs" }
		2 = { add_deposit = "gpm_tb_Lava_Lake" }
		1 = { add_deposit = "gpm_tb_Collapsed_Habitat" }
		1 = { add_deposit = "gpm_tb_Ruined_Arcology" }
	}
}
gpm_spawn_planet_wonders_tropical = {
	random_list = {
		16 = { add_deposit = "gpm_tb_Crystal_Jungle" }
		2 = { add_deposit = "gpm_tb_Titanic_Cave" }
		2 = { add_deposit = "gpm_tb_Abandoned_Stargate" }
		2 = { add_deposit = "gpm_tb_Bioluminescent_Forest" }
		2 = { add_deposit = "gpm_tb_Land_Reefs" }
		2 = { add_deposit = "gpm_tb_Lava_Lake" }
		1 = { add_deposit = "gpm_tb_Collapsed_Habitat" }
		1 = { add_deposit = "gpm_tb_Ruined_Arcology" }
	}
}
gpm_spawn_planet_wonders_continental = {
	random_list = {
		16 = { add_deposit = "gpm_tb_Floating_Islands" }
		2 = { add_deposit = "gpm_tb_Titanic_Cave" }
		2 = { add_deposit = "gpm_tb_Abandoned_Stargate" }
		2 = { add_deposit = "gpm_tb_Bioluminescent_Forest" }
		2 = { add_deposit = "gpm_tb_Land_Reefs" }
		2 = { add_deposit = "gpm_tb_Lava_Lake" }
		1 = { add_deposit = "gpm_tb_Collapsed_Habitat" }
		1 = { add_deposit = "gpm_tb_Ruined_Arcology" }
	}
}
gpm_spawn_planet_wonders_ocean = {
	random_list = {
		16 = { add_deposit = "gpm_tb_Amoeba_Sea" }
		2 = { add_deposit = "gpm_tb_Titanic_Cave" }
		2 = { add_deposit = "gpm_tb_Abandoned_Stargate" }
		2 = { add_deposit = "gpm_tb_Bioluminescent_Forest" }
		2 = { add_deposit = "gpm_tb_Land_Reefs" }
		1 = { add_deposit = "gpm_tb_Collapsed_Habitat" }
		1 = { add_deposit = "gpm_tb_Ruined_Arcology" }
	}
}
gpm_spawn_planet_wonders_arctic = {
	random_list = {
		16 = { add_deposit = "gpm_tb_Glass_Towers" }
		2 = { add_deposit = "gpm_tb_Titanic_Cave" }
		2 = { add_deposit = "gpm_tb_Abandoned_Stargate" }
		2 = { add_deposit = "gpm_tb_Bioluminescent_Forest" }
		2 = { add_deposit = "gpm_tb_Land_Reefs" }
		1 = { add_deposit = "gpm_tb_Collapsed_Habitat" }
		1 = { add_deposit = "gpm_tb_Ruined_Arcology" }
	}
}
gpm_spawn_planet_wonders_alpine = {
	random_list = {
		16 = { add_deposit = "gpm_tb_Howling_Peaks" }
		2 = { add_deposit = "gpm_tb_Titanic_Cave" }
		2 = { add_deposit = "gpm_tb_Abandoned_Stargate" }
		2 = { add_deposit = "gpm_tb_Bioluminescent_Forest" }
		2 = { add_deposit = "gpm_tb_Lava_Lake" }
		1 = { add_deposit = "gpm_tb_Collapsed_Habitat" }
		1 = { add_deposit = "gpm_tb_Ruined_Arcology" }
	}
}
gpm_spawn_planet_wonders_tundra = {
	random_list = {
		16 = { add_deposit = "gpm_tb_Mega_Fungi" }
		2 = { add_deposit = "gpm_tb_Titanic_Cave" }
		2 = { add_deposit = "gpm_tb_Abandoned_Stargate" }
		2 = { add_deposit = "gpm_tb_Bioluminescent_Forest" }
		2 = { add_deposit = "gpm_tb_Land_Reefs" }
		1 = { add_deposit = "gpm_tb_Collapsed_Habitat" }
		1 = { add_deposit = "gpm_tb_Ruined_Arcology" }
	}
}
gpm_spawn_planet_wonders_gaia = {
	random_list = {
		16 = { add_deposit = "gpm_tb_Energy_Storm" }
		2 = { add_deposit = "gpm_tb_Titanic_Cave" }
		2 = { add_deposit = "gpm_tb_Abandoned_Stargate" }
		2 = { add_deposit = "gpm_tb_Bioluminescent_Forest" }
		2 = { add_deposit = "gpm_tb_Land_Reefs" }
		1 = { add_deposit = "gpm_tb_Collapsed_Habitat" }
		1 = { add_deposit = "gpm_tb_Ruined_Arcology" }
	}
}
gpm_spawn_planet_wonders_nuked = {
	random_list = {
		16 = { add_deposit = "gpm_tb_Forgotten_Deposit" }
		2 = { add_deposit = "gpm_tb_Titanic_Cave" }
		2 = { add_deposit = "gpm_tb_Abandoned_Stargate" }
		2 = { add_deposit = "gpm_tb_Bioluminescent_Forest" }
		2 = { add_deposit = "gpm_tb_Land_Reefs" }
		2 = { add_deposit = "gpm_tb_Lava_Lake" }
		1 = { add_deposit = "gpm_tb_Collapsed_Habitat" }
		1 = { add_deposit = "gpm_tb_Ruined_Arcology" }
	}
}
gpm_spawn_planet_wonders_any = {
	random_list = {
		2 = { add_deposit = "gpm_tb_Titanic_Cave" }
		2 = { add_deposit = "gpm_tb_Abandoned_Stargate" }
		2 = { add_deposit = "gpm_tb_Bioluminescent_Forest" }
		2 = { add_deposit = "gpm_tb_Land_Reefs" }
		2 = { add_deposit = "gpm_tb_Lava_Lake" }
		2 = { add_deposit = "gpm_tb_Collapsed_Habitat" }
		2 = { add_deposit = "gpm_tb_Ruined_Arcology" }
	}
}












