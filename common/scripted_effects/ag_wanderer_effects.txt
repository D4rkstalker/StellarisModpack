
ag_ancient_habitable_planet_effect = {
	optimize_memory
	random_list = {
		30 = { ag_change_pc = { ag_planet_class = pc_toxic } }
		20 = { ag_change_pc = { ag_planet_class = pc_barren } add_modifier = { modifier = terraforming_candidate days = -1 } }
		20 = { ag_change_pc = { ag_planet_class = pc_barren_cold } add_modifier = { modifier = terraforming_candidate days = -1 } }
		30 = {
			while = {
				count = 6
				reroll_random = yes
				random_list = {
					40 = { }
					15 = { add_deposit = d_city_ruins }
					15 = { add_deposit = d_radioactive_wasteland }
					10 = { add_deposit = d_ancient_bombardment_craters }
					10 = { add_deposit = d_active_volcano }
					1 = { add_deposit = d_crystalline_caverns }
					1 = { add_deposit = d_crystal_forest }
					1 = { add_deposit = d_crystal_reef }
					1 = { add_deposit = d_dust_caverns }
					1 = { add_deposit = d_dust_desert }
					1 = { add_deposit = d_bubbling_swamp }
					1 = { add_deposit = d_fuming_bog }
					1 = { add_deposit = d_betharian_deposit }
					1 = { add_deposit = d_alien_pets_deposit }
					1 = { add_deposit = ag_living_metal_spring }
					1 = { add_deposit = ag_living_metal_lake }
					1 = { add_deposit = ag_nanites_caverns }
					1 = { add_deposit = ag_nanites_desert }
					1 = { add_deposit = ag_dark_matter_crater }
					1 = { add_deposit = ag_dark_matter_source }
					1 = { add_deposit = ag_ancient_ruins }
				}
			}
			reroll_random = yes
			random_list = {
				60 = { }
				30 = {
					ag_special_species_exisence_check = yes
					reroll_random = yes
					random_list = {
						10 = {
							create_pop = { species = event_target:ag_primitive_species }
							last_created_pop = {
								modify_species = { species = this add_trait = trait_presapient_forcefully_devolved add_traits_at_start_of_list = yes effect = { change_species_characteristics = { sapient = no } } }
								species = { save_event_target_as = ag_pre_sapient_species }
							}
							while = { count = 2 create_pop = { species = event_target:ag_pre_sapient_species } }
						}
						10 = {
							create_pop = { species = event_target:ag_alpha_ringworld_primitive_species }
							last_created_pop = {
								modify_species = { species = this add_trait = trait_presapient_forcefully_devolved add_traits_at_start_of_list = yes effect = { change_species_characteristics = { sapient = no } } }
								species = { save_event_target_as = ag_pre_sapient_species }
							}
							while = { count = 2 create_pop = { species = event_target:ag_pre_sapient_species } }
						}
					}
				}
				10 = { generate_primitives_on_planet = yes }
			}
			reroll_random = yes
		}
	}
	reroll_random = yes
}
ag_anchor_system_spawned = {
	optimize_memory
	set_global_flag = ag_ancient_anchor_station_$ag_number$_spawned
	if = {
		limit = { calc_true_if = {
			amount > 4
			has_global_flag = ag_ancient_anchor_station_1_spawned
			has_global_flag = ag_ancient_anchor_station_2_spawned
			has_global_flag = ag_ancient_anchor_station_3_spawned
			has_global_flag = ag_ancient_anchor_station_4_spawned
			has_global_flag = ag_ancient_anchor_station_5_spawned
			has_global_flag = ag_ancient_anchor_station_6_spawned
			has_global_flag = ag_ancient_anchor_station_7_spawned
			has_global_flag = ag_ancient_anchor_station_8_spawned
			has_global_flag = ag_ancient_anchor_station_9_spawned
			has_global_flag = ag_ancient_anchor_station_10_spawned
		} }
		random_list = {
			25 = { }
			30 = {
				modifier = {
					add = 5
					calc_true_if = {
						amount > 5
						has_global_flag = ag_ancient_anchor_station_1_spawned
						has_global_flag = ag_ancient_anchor_station_2_spawned
						has_global_flag = ag_ancient_anchor_station_3_spawned
						has_global_flag = ag_ancient_anchor_station_4_spawned
						has_global_flag = ag_ancient_anchor_station_5_spawned
						has_global_flag = ag_ancient_anchor_station_6_spawned
						has_global_flag = ag_ancient_anchor_station_7_spawned
						has_global_flag = ag_ancient_anchor_station_8_spawned
						has_global_flag = ag_ancient_anchor_station_9_spawned
						has_global_flag = ag_ancient_anchor_station_10_spawned
					}
				}
				modifier = {
					add = 10
					calc_true_if = {
						amount > 6
						has_global_flag = ag_ancient_anchor_station_1_spawned
						has_global_flag = ag_ancient_anchor_station_2_spawned
						has_global_flag = ag_ancient_anchor_station_3_spawned
						has_global_flag = ag_ancient_anchor_station_4_spawned
						has_global_flag = ag_ancient_anchor_station_5_spawned
						has_global_flag = ag_ancient_anchor_station_6_spawned
						has_global_flag = ag_ancient_anchor_station_7_spawned
						has_global_flag = ag_ancient_anchor_station_8_spawned
						has_global_flag = ag_ancient_anchor_station_9_spawned
						has_global_flag = ag_ancient_anchor_station_10_spawned
					}
				}
				modifier = {
					add = 10
					calc_true_if = {
						amount > 7
						has_global_flag = ag_ancient_anchor_station_1_spawned
						has_global_flag = ag_ancient_anchor_station_2_spawned
						has_global_flag = ag_ancient_anchor_station_3_spawned
						has_global_flag = ag_ancient_anchor_station_4_spawned
						has_global_flag = ag_ancient_anchor_station_5_spawned
						has_global_flag = ag_ancient_anchor_station_6_spawned
						has_global_flag = ag_ancient_anchor_station_7_spawned
						has_global_flag = ag_ancient_anchor_station_8_spawned
						has_global_flag = ag_ancient_anchor_station_9_spawned
						has_global_flag = ag_ancient_anchor_station_10_spawned
					}
				}
				modifier = {
					add = 10
					calc_true_if = {
						amount > 8
						has_global_flag = ag_ancient_anchor_station_1_spawned
						has_global_flag = ag_ancient_anchor_station_2_spawned
						has_global_flag = ag_ancient_anchor_station_3_spawned
						has_global_flag = ag_ancient_anchor_station_4_spawned
						has_global_flag = ag_ancient_anchor_station_5_spawned
						has_global_flag = ag_ancient_anchor_station_6_spawned
						has_global_flag = ag_ancient_anchor_station_7_spawned
						has_global_flag = ag_ancient_anchor_station_8_spawned
						has_global_flag = ag_ancient_anchor_station_9_spawned
						has_global_flag = ag_ancient_anchor_station_10_spawned
					}
				}
				modifier = {
					add = 10
					calc_true_if = {
						amount > 9
						has_global_flag = ag_ancient_anchor_station_1_spawned
						has_global_flag = ag_ancient_anchor_station_2_spawned
						has_global_flag = ag_ancient_anchor_station_3_spawned
						has_global_flag = ag_ancient_anchor_station_4_spawned
						has_global_flag = ag_ancient_anchor_station_5_spawned
						has_global_flag = ag_ancient_anchor_station_6_spawned
						has_global_flag = ag_ancient_anchor_station_7_spawned
						has_global_flag = ag_ancient_anchor_station_8_spawned
						has_global_flag = ag_ancient_anchor_station_9_spawned
						has_global_flag = ag_ancient_anchor_station_10_spawned
					}
				}
				set_global_flag = ag_anchor_system_spawn_completed
			}
		}
		reroll_random = yes
	}
}

ag_remove_anchor_station_poi = {
	optimize_memory
	if = {
		limit = {
			$ag_target_loc$ = {
				is_point_of_interest = {
					id = ag_ancient_anchor_station_1
					event_chain = ag_ancient_anchor_station_chain
					owner = root
				}
			}
		}
		remove_point_of_interest = ag_ancient_anchor_station_1
	}
	else_if = {
		limit = {
			$ag_target_loc$ = {
				is_point_of_interest = {
					id = ag_ancient_anchor_station_2
					event_chain = ag_ancient_anchor_station_chain
					owner = root
				}
			}
		}
		remove_point_of_interest = ag_ancient_anchor_station_2
	}
	else_if = {
		limit = {
			$ag_target_loc$ = {
				is_point_of_interest = {
					id = ag_ancient_anchor_station_3
					event_chain = ag_ancient_anchor_station_chain
					owner = root
				}
			}
		}
		remove_point_of_interest = ag_ancient_anchor_station_3
	}
	else_if = {
		limit = {
			$ag_target_loc$ = {
				is_point_of_interest = {
					id = ag_ancient_anchor_station_4
					event_chain = ag_ancient_anchor_station_chain
					owner = root
				}
			}
		}
		remove_point_of_interest = ag_ancient_anchor_station_4
	}
	else_if = {
		limit = {
			$ag_target_loc$ = {
				is_point_of_interest = {
					id = ag_ancient_anchor_station_5
					event_chain = ag_ancient_anchor_station_chain
					owner = root
				}
			}
		}
		remove_point_of_interest = ag_ancient_anchor_station_5
	}
	else_if = {
		limit = {
			$ag_target_loc$ = {
				is_point_of_interest = {
					id = ag_ancient_anchor_station_6
					event_chain = ag_ancient_anchor_station_chain
					owner = root
				}
			}
		}
		remove_point_of_interest = ag_ancient_anchor_station_6
	}
	else_if = {
		limit = {
			$ag_target_loc$ = {
				is_point_of_interest = {
					id = ag_ancient_anchor_station_7
					event_chain = ag_ancient_anchor_station_chain
					owner = root
				}
			}
		}
		remove_point_of_interest = ag_ancient_anchor_station_7
	}
	else_if = {
		limit = {
			$ag_target_loc$ = {
				is_point_of_interest = {
					id = ag_ancient_anchor_station_8
					event_chain = ag_ancient_anchor_station_chain
					owner = root
				}
			}
		}
		remove_point_of_interest = ag_ancient_anchor_station_8
	}
	else_if = {
		limit = {
			$ag_target_loc$ = {
				is_point_of_interest = {
					id = ag_ancient_anchor_station_9
					event_chain = ag_ancient_anchor_station_chain
					owner = root
				}
			}
		}
		remove_point_of_interest = ag_ancient_anchor_station_9
	}
	else_if = {
		limit = {
			$ag_target_loc$ = {
				is_point_of_interest = {
					id = ag_ancient_anchor_station_10
					event_chain = ag_ancient_anchor_station_chain
					owner = root
				}
			}
		}
		remove_point_of_interest = ag_ancient_anchor_station_10
	}
}
ag_add_blocker_on_wanderer_gaia = {
	optimize_memory
	add_deposit = d_city_ruins
	add_deposit = d_city_ruins
	add_deposit = d_ruined_arcology
	add_deposit = d_active_volcano
	add_deposit = d_mountain_range
	random_list = { 50 = { } 50 = { add_deposit = d_active_volcano } } reroll_random = yes
	random_list = { 50 = { } 50 = { add_deposit = d_active_volcano } } reroll_random = yes
	random_list = { 50 = { } 50 = { add_deposit = d_mountain_range } } reroll_random = yes
	random_list = { 25 = { } 25 = { add_deposit = d_crystal_forest } 25 = { add_deposit = d_crystal_reef } 25 = { add_deposit = d_crystalline_caverns } } reroll_random = yes
	random_list = { 25 = { } 25 = { add_deposit = d_crystal_forest } 25 = { add_deposit = d_crystal_reef } 25 = { add_deposit = d_crystalline_caverns } } reroll_random = yes
	if = { limit = { planet_size > 12 } add_deposit = d_mountain_range }
	if = { limit = { planet_size > 16 } add_deposit = d_ruined_arcology }
	if = { limit = { planet_size > 20 } add_deposit = d_city_ruins }
	if = { limit = { planet_size > 24 } add_deposit = d_mountain_range }
	if = { limit = { planet_size > 28 } add_deposit = d_active_volcano }
	add_deposit = ag_ancient_obelisk
	while = { count = 4 random_list = { 50 = { } 50 = { add_deposit = ag_ancient_ruins } } reroll_random = yes }
}
