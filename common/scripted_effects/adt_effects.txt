
shoal_reinforce = {
	log = "set fleetCounter [$AMOUNT$] $AMOUNT$ [$SHIPS$] $SHIPS$"
	every_owned_fleet = {
		limit = {
			has_fleet_flag = nanite_mother_ship
			# exists = solar_system
			# solar_system = { has_star_flag = lcluster }
			is_in_combat = no
			any_ship = { is_ship_size = graygoo_mothership }
			num_ships < $AMOUNT$
		}
		
		CmtEffectResetLoop = yes
		while = {
			count = $SHIPS$
			CmtEffectProgressLoop4 = yes
			switch = {
				trigger = has_global_flag
				CmtFlagLoopA = { CmtEffectCreateShip_GraygooInterdictor = yes }
				CmtFlagLoopB = { CmtEffectCreateShip_GraygooInterdictor = yes }
				CmtFlagLoopC = { 
					random_list = {
						1 = { CmtEffectCreateShip_GraygooMother = yes }
						9 = { CmtEffectCreateShip_GraygooInterdictor = yes }
					}
				}
			}
		}
	}
}


# shoal_continue_journey = {
# 	queue_actions = {
# 		repeat = {
# 			find_random_system = {
# 				trigger = {
# 					id = graygoo_roamers_$NUM$.trigger.1
# 					has_star_flag = lcluster
# 				}
# 				found_system = {
# 					move_to = THIS
# 				}
# 			}
# 			find_closest_planet = {
# 				trigger = {
# 					id = graygoo_roamers_$NUM$.trigger.2
# 					is_planet_class = pc_gray_goo
# 				}
# 				found_planet = {
# 					orbit_planet = THIS
# 					wait = {
# 						duration = 50
# 						random = 25
# 					}
# 				}
# 			}
# 		}
# 	}
# }
