create_built_pt_cocoon_species = {
	create_species = {
		name = "NAME_pt_cocoon"
		plural = "NAME_pt_cocoon"
		class = pt_cocoon
		#namelist = this
		portrait = "pt_cocoon1"
		#sapient = no
		can_be_modified = no
		can_generate_leaders = no
		traits = {
			trait = "trait_plentiful_traditions_pt_cocoon"
		}
		effect = {
			save_global_event_target_as = pt_cocoon_species
		}
	}
	set_built_species = last_created_species
	owner = {
    		home_planet = {
			while = {
				count = 4
				create_pop = {
					species = event_target:pt_cocoon_species
				}					
			}
		}
	}
}

generate_start_pops_hive = {
	if = {
		limit = {
			owner = {
				has_origin = origin_syncretic_evolution_hive
			}
		}

		if = {
			limit = { 
				owner = { has_origin = origin_syncretic_evolution_hive }
			}

			last_created_species = {
				set_species_flag = syncretic_species@root.owner
				set_citizenship_type = {
					country = root.owner
					type = citizenship_slavery
				}
			}
			while = {
				count = 12
				create_pop = {
					species = last_created_species
					ethos = random
				}
			}
		}
	}
}

# root/this = planet
mutagenesis_effect = {
	random_owned_pop = {
		limit = {
			NOT = {
				has_citizenship_type = {
					type = citizenship_full
					country = root.owner
				}
				is_same_species = owner_species
				has_trait = "trait_mechanical"
			}
		}
		kill_pop = yes
		root = {
			create_pop = {
				species = root.owner
				ethos = root.owner
			}
		}
	}
}