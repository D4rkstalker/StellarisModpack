generate_flistonu_primitives_on_planet = {
	create_flistonu_species = yes
	create_flistonu_primitive_empire = yes
	setup_flistonu_primitive_planet = yes
}

create_flistonu_species = {
	create_species = {
		name = "Flistonu"
		plural = "Flistonu"
		class = AVI
		portrait = avi13
		namelist = "AVI2"
		traits = {
			trait = "trait_limited_regeneration"
			trait = "trait_social_pheromones"
			trait = "trait_bioadaptability"
			trait = "trait_sedentary"
			trait = "trait_cybernetic"
			trait = "trait_pc_continental_preference"
		}
	}
}

create_flistonu_primitive_empire = {
	create_country = {
		name = "Flistonu Democratic Republic"
		authority = auth_democratic
		civics = {
			civic = civic_beacon_of_liberty
			civic = civic_meritocracy
		}
		species = last_created
		ethos = {
			ethic = "ethic_fanatic_egalitarian"
			ethic = "ethic_materialist"
		}
		flag = {
			icon = {
				category="zoological"
				file="flag_zoological_20.dds"
			}
			background = {
				category="backgrounds"
				file="new_dawn.dds"
			}
			colors = {
				"indigo"
				"light_green"
				"null"
				"null"
			}
		}
		type = primitive
	}
	last_created_country = {
		save_global_event_target_as = flistonu_portrait
		set_graphical_culture = industrial_01
		set_country_flag = early_space_age
		set_country_flag = flistonu_primitives
		set_primitive_age = early_space_age
		change_country_flag = {
			icon = {
				category="zoological"
				file="flag_zoological_20.dds"
			}
			background = {
				category="backgrounds"
				file="new_dawn.dds"
			}
			colors = {
				"indigo"
				"light_green"
				"null"
				"null"
			}
		}
	}
}

setup_flistonu_primitive_planet = {
	set_owner = last_created_country
	set_capital = yes
	
	last_created_country = {
		if = {
			limit = { has_country_flag = early_space_age }
			prev = {
				while = {
					count = 30
					create_pop = {
						species = last_created
					}					
				}
				add_building = building_primitive_factory
				add_building = building_primitive_mine
				add_building = building_primitive_power_plant
				add_building = building_primitive_farm
				add_building = building_research_lab_1
				add_building = building_luxury_residence
				add_building = building_primitive_capital
				remove_building = building_colony_shelter
			}
		}
	}
}

#Decide heresy level every decade for Holy Missionary Force civic
#THE EFFECTS STACK
hmf_decide_heresy_level = {
	if = { #If heresy level is 1
			limit = {
				check_variable = {
					which = heresy_level
					value = 1
				}
			}
			random_list = {
				10 = { #Keep the same (lvl1)
					modifier = {
						factor = 1.25
						check_variable = {
							which = authority_level
							value < 200
						}
					}
					modifier = {
						factor = 1.5
						check_variable = {
							which = authority_level
							value < 150
						}
					}
					#nothing
				}
				10 = { #Increase by 1 (to lvl2)
					modifier = {
						factor = 1.25
						check_variable = {
							which = authority_level
							value < 215
						}
					}
					modifier = {
						factor = 1.5
						check_variable = {
							which = authority_level
							value < 175
						}
					}
					#FOR LITTLE TO NO ACTIONS
					modifier = {
						factor = 5
						check_variable = {
							which = authority_level
							value < 25
						}
					}
					change_variable = {
						which = heresy_level
						value = 1
					}
				}
				7 = { #Increase by 2 (to lvl3)
					modifier = {
						factor = 1.2
						check_variable = {
							which = authority_level
							value < 180
						}
					}
					modifier = {
						factor = 1.4
						check_variable = {
							which = authority_level
							value < 155
						}
					}
					#FOR LITTLE TO NO ACTIONS
					modifier = {
						factor = 10
						check_variable = {
							which = authority_level
							value < 25
						}
					}
					change_variable = {
						which = heresy_level
						value = 2
					}
				}
				4 = { #Increase by 3 (to lvl4)
					modifier = {
						factor = 1.1
						check_variable = {
							which = authority_level
							value < 150
						}
					}
					modifier = {
						factor = 1.3
						check_variable = {
							which = authority_level
							value < 125
						}
					}
					#FOR LITTLE TO NO ACTIONS
					modifier = {
						factor = 3
						check_variable = {
							which = authority_level
							value < 25
						}
					}
					change_variable = {
						which = heresy_level
						value = 3
					}
				}
				7 = { #Decrease by 1 (to lvl0)
					modifier = {
						factor = 1.1
						check_variable = {
							which = authority_level
							value > 250
						}
					}
					modifier = {
						factor = 1.25
						check_variable = {
							which = authority_level
							value > 280
						}
					}
					#FOR LITTLE TO NO ACTIONS
					modifier = {
						factor = 0
						check_variable = {
							which = authority_level
							value < 25
						}
					}
					subtract_variable = {
						which = heresy_level
						value = 1
					}
				}
			}
		}
		else_if = { #If heresy level is 2
			limit = {
				check_variable = {
					which = heresy_level
					value = 2
				}
			}
			random_list = {
				9 = { #Keep the same (lvl2)
					modifier = {
						factor = 1.25
						check_variable = {
							which = authority_level
							value < 200
						}
					}
					modifier = {
						factor = 1.5
						check_variable = {
							which = authority_level
							value < 150
						}
					}
					#nothing
				}
				9 = { #Increase by 1 (to lvl3)
					modifier = {
						factor = 1.25
						check_variable = {
							which = authority_level
							value < 215
						}
					}
					modifier = {
						factor = 1.5
						check_variable = {
							which = authority_level
							value < 160
						}
					}
					#FOR LITTLE TO NO ACTIONS
					modifier = {
						factor = 5
						check_variable = {
							which = authority_level
							value < 25
						}
					}
					change_variable = {
						which = heresy_level
						value = 1
					}
				}
				5 = { #Increase by 2 (to lvl4)
					modifier = {
						factor = 1.2
						check_variable = {
							which = authority_level
							value < 190
						}
					}
					modifier = {
						factor = 1.4
						check_variable = {
							which = authority_level
							value < 145
						}
					}
					#FOR LITTLE TO NO ACTIONS
					modifier = {
						factor = 10
						check_variable = {
							which = authority_level
							value < 25
						}
					}
					change_variable = {
						which = heresy_level
						value = 2
					}
				}
				2 = { #Increase by 3 (to lvl5)
					modifier = {
						factor = 1.1
						check_variable = {
							which = authority_level
							value < 150
						}
					}
					modifier = {
						factor = 1.3
						check_variable = {
							which = authority_level
							value < 120
						}
					}
					#FOR LITTLE TO NO ACTIONS
					modifier = {
						factor = 3
						check_variable = {
							which = authority_level
							value < 25
						}
					}
					change_variable = {
						which = heresy_level
						value = 3
					}
				}
				9 = { #Decrease by 1 (to lvl1)
					modifier = {
						factor = 1.1
						check_variable = {
							which = authority_level
							value > 250
						}
					}
					modifier = {
						factor = 1.25
						check_variable = {
							which = authority_level
							value > 275
						}
					}
					#FOR LITTLE TO NO ACTIONS
					modifier = {
						factor = 0
						check_variable = {
							which = authority_level
							value < 25
						}
					}
					subtract_variable = {
						which = heresy_level
						value = 1
					}
				}
			}
		}
		else_if = { #If heresy level is 3
			limit = {
				check_variable = {
					which = heresy_level
					value = 3
				}
			}
			random_list = {
				9 = { #Keep the same (lvl3)
					modifier = {
						factor = 1.2
						check_variable = {
							which = authority_level
							value < 215
						}
					}
					modifier = {
						factor = 1.4
						check_variable = {
							which = authority_level
							value < 155
						}
					}
					#nothing
				}
				10 = { #Increase by 1 (to lvl4)
					modifier = {
						factor = 1.3
						check_variable = {
							which = authority_level
							value < 220
						}
					}
					modifier = {
						factor = 1.5
						check_variable = {
							which = authority_level
							value < 170
						}
					}
					#FOR LITTLE TO NO ACTIONS
					modifier = {
						factor = 5
						check_variable = {
							which = authority_level
							value < 25
						}
					}
					change_variable = {
						which = heresy_level
						value = 1
					}
				}
				5 = { #Increase by 2 (to lvl5)
					modifier = {
						factor = 1.2
						check_variable = {
							which = authority_level
							value < 215
						}
					}
					modifier = {
						factor = 1.3
						check_variable = {
							which = authority_level
							value < 190
						}
					}
					#FOR LITTLE TO NO ACTIONS
					modifier = {
						factor = 10
						check_variable = {
							which = authority_level
							value < 25
						}
					}
					change_variable = {
						which = heresy_level
						value = 2
					}
				}
				11 = { #Decrease by 1 (to lvl2)
					modifier = {
						factor = 1.3
						check_variable = {
							which = authority_level
							value > 215
						}
					}
					modifier = {
						factor = 1.5
						check_variable = {
							which = authority_level
							value > 290
						}
					}
					#FOR LITTLE TO NO ACTIONS
					modifier = {
						factor = 0
						check_variable = {
							which = authority_level
							value < 25
						}
					}
					subtract_variable = {
						which = heresy_level
						value = 1
					}
				}
			}
		}
		else_if = { #If heresy level is 4
			limit = {
				check_variable = {
					which = heresy_level
					value = 4
				}
			}
			random_list = {
				10 = { #Keep the same (lvl4)
					modifier = {
						factor = 1.25
						check_variable = {
							which = authority_level
							value < 500
						}
					}
					modifier = {
						factor = 1.4
						check_variable = {
							which = authority_level
							value < 465
						}
					}
					#nothing
				}
				7 = { #Increase by 1 (to lvl5)
					modifier = {
						factor = 1.3
						check_variable = {
							which = authority_level
							value < 525
						}
					}
					modifier = {
						factor = 1.5
						check_variable = {
							which = authority_level
							value < 475
						}
					}
					#FOR LITTLE TO NO ACTIONS
					modifier = {
						factor = 10
						check_variable = {
							which = authority_level
							value < 25
						}
					}
					change_variable = {
						which = heresy_level
						value = 1
					}
				}
				10 = { #Decrease by 1 (to lvl3)
					modifier = {
						factor = 1.25
						check_variable = {
							which = authority_level
							value > 500
						}
					}
					modifier = {
						factor = 1.5
						check_variable = {
							which = authority_level
							value > 550
						}
					}
					#FOR LITTLE TO NO ACTIONS
					modifier = {
						factor = 0
						check_variable = {
							which = authority_level
							value < 50
						}
					}
					subtract_variable = {
						which = heresy_level
						value = 1
					}
				}
			}
		}
		else_if = { #If heresy level is 5
			limit = {
				OR = {
					check_variable = {
						which = heresy_level
						value = 5
					}
					check_variable = {
						which = heresy_level
						value > 4
					}
				}
			}
			random_list = {
				9 = { #Keep the same (lvl5)
					modifier = {
						factor = 1.25
						check_variable = {
							which = authority_level
							value < 615
						}
					}
					modifier = {
						factor = 1.5
						check_variable = {
							which = authority_level
							value < 575
						}
					}
					#nothing
				}
				11 = { #Decrease by 1 (to lvl4)
					modifier = {
						factor = 1.25
						check_variable = {
							which = authority_level
							value > 525
						}
					}
					modifier = {
						factor = 1.75
						check_variable = {
							which = authority_level
							value > 575
						}
					}
					#FOR LITTLE TO NO ACTIONS
					modifier = {
						factor = 0
						check_variable = {
							which = authority_level
							value < 75
						}
					}
					subtract_variable = {
						which = heresy_level
						value = 1
					}
				}
			}
		}
		else_if = { #If heresy level is 0
			limit = {
				check_variable = {
					which = heresy_level
					value = 0
				}
			}
			random_list = {
				13 = { #Keep the same (lvl0)
					modifier = {
						factor = 1.2
						check_variable = {
							which = authority_level
							value > 200
						}
					}
					modifier = {
						factor = 1.4
						check_variable = {
							which = authority_level
							value > 250
						}
					}
					#nothing
				}
				13 = { #Increase by 1 (to lvl1)
					modifier = {
						factor = 1.5
						check_variable = {
							which = authority_level
							value < 175
						}
					}
					modifier = {
						factor = 2
						check_variable = {
							which = authority_level
							value < 125
						}
					}
					#FOR LITTLE TO NO ACTIONS
					modifier = {
						factor = 5
						check_variable = {
							which = authority_level
							value < 25
						}
					}
					change_variable = {
						which = heresy_level
						value = 1
					}
				}
				10 = { #Increase by 2 (to lvl2)
					modifier = {
						factor = 1.2
						check_variable = {
							which = authority_level
							value < 150
						}
					}
					modifier = {
						factor = 1.4
						check_variable = {
							which = authority_level
							value < 100
						}
					}
					#FOR LITTLE TO NO ACTIONS
					modifier = {
						factor = 10
						check_variable = {
							which = authority_level
							value < 25
						}
					}
					change_variable = {
						which = heresy_level
						value = 2
					}
				}
			}
		}
}

#Add modifier depending on heresy level for Holy Missionary Force civic
hmf_add_heresy_level_modifier = {
	if = {
			limit = {
				check_variable = {
					which = heresy_level
					value = 1
				}
			}
			add_modifier = {
				modifier = "hmf_heresy_level_1"
			}
		}
		else_if = {
			limit = {
				check_variable = {
					which = heresy_level
					value = 2
				}
			}
			add_modifier = {
				modifier = "hmf_heresy_level_2"
			}
		}
		else_if = {
			limit = {
				check_variable = {
					which = heresy_level
					value = 3
				}
			}
			add_modifier = {
				modifier = "hmf_heresy_level_3"
			}
		}
		else_if = {
			limit = {
				check_variable = {
					which = heresy_level
					value = 4
				}
			}
			add_modifier = {
				modifier = "hmf_heresy_level_4"
			}
		}
		else_if = {
			limit = {
				check_variable = {
					which = heresy_level
					value = 5
				}
			}
			add_modifier = {
				modifier = "hmf_heresy_level_5"
			}
		}
		else_if = {
			limit = {
				check_variable = {
					which = heresy_level
					value > 5
				}
			}
			add_modifier = {
				modifier = "hmf_heresy_level_5"
			}
		}
		else_if = {
			limit = {
				check_variable = {
					which = heresy_level
					value = 0
				}
			}
			add_modifier = {
				modifier = "hmf_heresy_level_0"
			}
		}
		else = {
			add_modifier = {
				modifier = "hmf_heresy_level_unknown"
			}
		}
}

generate_hmf_option2_al = {
	random_list = {
		5 = {
			change_variable = {
				which = authority_level
				value = 5
			}
		}
		5 = {
			change_variable = {
				which = authority_level
				value = 6
			}
		}
		5 = {
			change_variable = {
				which = authority_level
				value = 7
			}
		}
		5 = {
			change_variable = {
				which = authority_level
				value = 8
			}
		}
		5 = {
			change_variable = {
				which = authority_level
				value = 9
			}
		}
		5 = {
			change_variable = {
				which = authority_level
				value = 10
			}
		}
	}
}

generate_hmf_option1_al = {
	random_list = {
		5 = {
			change_variable = {
				which = authority_level
				value = 5
			}
		}
		5 = {
			change_variable = {
				which = authority_level
				value = 6
			}
		}
		5 = {
			change_variable = {
				which = authority_level
				value = 7
			}
		}
		5 = {
			change_variable = {
				which = authority_level
				value = 8
			}
		}
		5 = {
			change_variable = {
				which = authority_level
				value = 9
			}
		}
		5 = {
			change_variable = {
				which = authority_level
				value = 10
			}
		}
		5 = {
			change_variable = {
				which = authority_level
				value = 11
			}
		}
		5 = {
			change_variable = {
				which = authority_level
				value = 12
			}
		}
		5 = {
			change_variable = {
				which = authority_level
				value = 13
			}
		}
		5 = {
			change_variable = {
				which = authority_level
				value = 14
			}
		}
		5 = {
			change_variable = {
				which = authority_level
				value = 15
			}
		}
		5 = {
			change_variable = {
				which = authority_level
				value = 16
			}
		}
		5 = {
			change_variable = {
				which = authority_level
				value = 17
			}
		}
		5 = {
			change_variable = {
				which = authority_level
				value = 18
			}
		}
		5 = {
			change_variable = {
				which = authority_level
				value = 19
			}
		}
		5 = {
			change_variable = {
				which = authority_level
				value = 20
			}
		}
	}
}

generate_hmf_option1_al_reverse = {
	random_list = {
		5 = {
			subtract_variable = {
				which = authority_level
				value = 5
			}
		}
		5 = {
			subtract_variable = {
				which = authority_level
				value = 6
			}
		}
		5 = {
			subtract_variable = {
				which = authority_level
				value = 7
			}
		}
		5 = {
			subtract_variable = {
				which = authority_level
				value = 8
			}
		}
		5 = {
			subtract_variable = {
				which = authority_level
				value = 9
			}
		}
		5 = {
			subtract_variable = {
				which = authority_level
				value = 10
			}
		}
		5 = {
			subtract_variable = {
				which = authority_level
				value = 11
			}
		}
		5 = {
			subtract_variable = {
				which = authority_level
				value = 12
			}
		}
		5 = {
			subtract_variable = {
				which = authority_level
				value = 13
			}
		}
		5 = {
			subtract_variable = {
				which = authority_level
				value = 14
			}
		}
		5 = {
			subtract_variable = {
				which = authority_level
				value = 15
			}
		}
		5 = {
			subtract_variable = {
				which = authority_level
				value = 16
			}
		}
		5 = {
			subtract_variable = {
				which = authority_level
				value = 17
			}
		}
		5 = {
			subtract_variable = {
				which = authority_level
				value = 18
			}
		}
		5 = {
			subtract_variable = {
				which = authority_level
				value = 19
			}
		}
		5 = {
			subtract_variable = {
				which = authority_level
				value = 20
			}
		}
	}
}

generate_hmf_option3_al = {
	random_list = {
		5 = {
			change_variable = {
				which = authority_level
				value = 15
			}
		}
		5 = {
			change_variable = {
				which = authority_level
				value = 16
			}
		}
		5 = {
			change_variable = {
				which = authority_level
				value = 17
			}
		}
		5 = {
			change_variable = {
				which = authority_level
				value = 18
			}
		}
		5 = {
			change_variable = {
				which = authority_level
				value = 19
			}
		}
		5 = {
			change_variable = {
				which = authority_level
				value = 20
			}
		}
		5 = {
			change_variable = {
				which = authority_level
				value = 21
			}
		}
		5 = {
			change_variable = {
				which = authority_level
				value = 22
			}
		}
		5 = {
			change_variable = {
				which = authority_level
				value = 23
			}
		}
		5 = {
			change_variable = {
				which = authority_level
				value = 24
			}
		}
		5 = {
			change_variable = {
				which = authority_level
				value = 25
			}
		}
	}
}

generate_hmf_option4_al = {
	random_list = {
		5 = {
			change_variable = {
				which = authority_level
				value = 10
			}
		}
		5 = {
			change_variable = {
				which = authority_level
				value = 11
			}
		}
		5 = {
			change_variable = {
				which = authority_level
				value = 12
			}
		}
		5 = {
			change_variable = {
				which = authority_level
				value = 13
			}
		}
		5 = {
			change_variable = {
				which = authority_level
				value = 14
			}
		}
		5 = {
			change_variable = {
				which = authority_level
				value = 15
			}
		}
		5 = {
			change_variable = {
				which = authority_level
				value = 16
			}
		}
		5 = {
			change_variable = {
				which = authority_level
				value = 17
			}
		}
		5 = {
			change_variable = {
				which = authority_level
				value = 18
			}
		}
		5 = {
			change_variable = {
				which = authority_level
				value = 19
			}
		}
		5 = {
			change_variable = {
				which = authority_level
				value = 20
			}
		}
	}
}

generate_hmf_option5_al_a = {
	random_list = {
		5 = {
			change_variable = {
				which = authority_level
				value = 35
			}
		}
		5 = {
			change_variable = {
				which = authority_level
				value = 36
			}
		}
		5 = {
			change_variable = {
				which = authority_level
				value = 37
			}
		}
		5 = {
			change_variable = {
				which = authority_level
				value = 38
			}
		}
		5 = {
			change_variable = {
				which = authority_level
				value = 39
			}
		}
		5 = {
			change_variable = {
				which = authority_level
				value = 40
			}
		}
	}
}

generate_hmf_option5_al_b = {
	random_list = {
		5 = {
			change_variable = {
				which = authority_level
				value = 35
			}
		}
		5 = {
			change_variable = {
				which = authority_level
				value = 36
			}
		}
		5 = {
			change_variable = {
				which = authority_level
				value = 37
			}
		}
		5 = {
			change_variable = {
				which = authority_level
				value = 38
			}
		}
		5 = {
			change_variable = {
				which = authority_level
				value = 39
			}
		}
		5 = {
			change_variable = {
				which = authority_level
				value = 40
			}
		}
		5 = {
			change_variable = {
				which = authority_level
				value = 41
			}
		}
		5 = {
			change_variable = {
				which = authority_level
				value = 42
			}
		}
		5 = {
			change_variable = {
				which = authority_level
				value = 43
			}
		}
		5 = {
			change_variable = {
				which = authority_level
				value = 44
			}
		}
		5 = {
			change_variable = {
				which = authority_level
				value = 45
			}
		}
		5 = {
			change_variable = {
				which = authority_level
				value = 46
			}
		}
		5 = {
			change_variable = {
				which = authority_level
				value = 47
			}
		}
		5 = {
			change_variable = {
				which = authority_level
				value = 48
			}
		}
		5 = {
			change_variable = {
				which = authority_level
				value = 49
			}
		}
		5 = {
			change_variable = {
				which = authority_level
				value = 50
			}
		}
	}
}

generate_hmf_option5_al_c = {
	random_list = {
		5 = {
			change_variable = {
				which = authority_level
				value = 40
			}
		}
		5 = {
			change_variable = {
				which = authority_level
				value = 41
			}
		}
		5 = {
			change_variable = {
				which = authority_level
				value = 42
			}
		}
		5 = {
			change_variable = {
				which = authority_level
				value = 43
			}
		}
		5 = {
			change_variable = {
				which = authority_level
				value = 44
			}
		}
		5 = {
			change_variable = {
				which = authority_level
				value = 45
			}
		}
		5 = {
			change_variable = {
				which = authority_level
				value = 46
			}
		}
		5 = {
			change_variable = {
				which = authority_level
				value = 47
			}
		}
		5 = {
			change_variable = {
				which = authority_level
				value = 48
			}
		}
		5 = {
			change_variable = {
				which = authority_level
				value = 49
			}
		}
		5 = {
			change_variable = {
				which = authority_level
				value = 50
			}
		}
	}
}

generate_hmf_option6_al = {
	random_list = {
		5 = {
			change_variable = {
				which = authority_level
				value = 55
			}
		}
		5 = {
			change_variable = {
				which = authority_level
				value = 56
			}
		}
		5 = {
			change_variable = {
				which = authority_level
				value = 57
			}
		}
		5 = {
			change_variable = {
				which = authority_level
				value = 58
			}
		}
		5 = {
			change_variable = {
				which = authority_level
				value = 59
			}
		}
		5 = {
			change_variable = {
				which = authority_level
				value = 60
			}
		}
		5 = {
			change_variable = {
				which = authority_level
				value = 61
			}
		}
		5 = {
			change_variable = {
				which = authority_level
				value = 62
			}
		}
		5 = {
			change_variable = {
				which = authority_level
				value = 63
			}
		}
		5 = {
			change_variable = {
				which = authority_level
				value = 64
			}
		}
		5 = {
			change_variable = {
				which = authority_level
				value = 65
			}
		}
		5 = {
			change_variable = {
				which = authority_level
				value = 66
			}
		}
		5 = {
			change_variable = {
				which = authority_level
				value = 67
			}
		}
		5 = {
			change_variable = {
				which = authority_level
				value = 68
			}
		}
		5 = {
			change_variable = {
				which = authority_level
				value = 69
			}
		}
		5 = {
			change_variable = {
				which = authority_level
				value = 70
			}
		}
		5 = {
			change_variable = {
				which = authority_level
				value = 71
			}
		}
		5 = {
			change_variable = {
				which = authority_level
				value = 72
			}
		}
		5 = {
			change_variable = {
				which = authority_level
				value = 73
			}
		}
		5 = {
			change_variable = {
				which = authority_level
				value = 74
			}
		}
		5 = {
			change_variable = {
				which = authority_level
				value = 75
			}
		}
	}
}

generate_master_ai_v1 = {
	create_master_ai_species_v2 = yes
	create_master_ai_empire = yes
}

generate_master_ai_v2 = {
	create_master_ai_species_v2 = yes
	create_master_ai_empire_and_inital_fleet = yes
}

create_master_ai_empire = {
	create_country = {
			name = "The Master Intelligence"
			species = event_target:master_ai_species
			flag = { 
				icon = {
					category = "legion"
					file = "flag_mp_beta_04.dds"
				}
				background = {
					category = "backgrounds"
					file = "circle.dds"
				}
				colors = {
					"orange"
					"dark_grey"
					"null"
					"null"
				}
			}
			type = master_ai_country
			name_list = ROOT
			auto_delete = no
			effect = {
				set_country_flag = master_ai_country
				save_global_event_target_as = master_ai_country
				establish_communications_no_message = root
				#establish_contact = { who = root location = root.capital_scope }
			}
	}
}

create_master_ai_empire_and_inital_fleet = {
	create_country = {
			name = "The Master Intelligence"
			species = event_target:master_ai_species
			flag = { 
				icon = {
					category = "legion"
					file = "flag_mp_beta_04.dds"
				}
				background = {
					category = "backgrounds"
					file = "circle.dds"
				}
				colors = {
					"orange"
					"dark_grey"
					"null"
					"null"
				}
			}
			type = master_ai_country
			name_list = ROOT
			auto_delete = no
			effect = {
				set_country_flag = master_ai_country
				save_global_event_target_as = master_ai_country
				establish_communications_no_message = root
				establish_contact = { who = root location = root.capital_scope }
				create_fleet = {
					name = "The Prime Hunter"
					effect = {
						set_owner = prev
						create_ship_design = {
							design = "NAME_Ascendant_Neural_Network"
						}
						create_ship = {
							name = "Prime Hunter"
							design = last_created_design
							effect = {
								set_ship_flag = master_ai_main_ship
								save_global_event_target_as = master_ai_main_ship
							}
						}
						set_location = event_target:master_ai_origin #change when done
						set_fleet_stance = aggressive
						set_aggro_range_measure_from = return_point
						set_aggro_range = 150
						queue_actions = {
							repeat = {
								wait = {
									duration = 25
								}
							}
						}
					}
				}
			}
	}
}

create_master_ai_species_v2 = {
	create_species = {
		name = "Hyperintelligentoid"
		plural = "Hyperintelligentoids"
		class = MACHINE
		portrait = sd_rep_robot
		namelist = "REP1"
		traits = random
		immortal = yes
	}
	last_created_species = {
		set_species_flag = master_ai_species
		save_global_event_target_as = master_ai_species
	}
}

check_tma_intelligence_level = { # changes up to 200
	random_list = {
			20 = { #intelligence stays same
				modifier = {
					factor = 0.5
					check_variable = {
						which = tma_intelligence
						value > 75
					}
				}
				modifier = {
					factor = 0
					check_variable = {
						which = tma_intelligence
						value > 100
					}
				}
				# nothing
			}
			50 = { #intelligence +1
				modifier = {
					factor = 2
					check_variable = {
						which = tma_intelligence
						value > 100
					}
				}
				modifier = {
					factor = 0
					check_variable = {
						which = tma_intelligence
						value > 200
					}
				}
				change_variable = {
					which = tma_intelligence
					value = 1
				}
			}
			25 = { #intelligence +2
				modifier = {
					factor = 5
					check_variable = {
						which = tma_intelligence
						value > 75
					}
				}
				modifier = {
					factor = 2
					check_variable = {
						which = tma_intelligence
						value > 100
					}
				}
				modifier = {
					factor = 0
					check_variable = {
						which = tma_intelligence
						value > 200
					}
				}
				change_variable = {
					which = tma_intelligence
					value = 2
				}
			}
			10 = { #intelligence +3
				modifier = {
					factor = 3
					check_variable = {
						which = tma_intelligence
						value > 75
					}
				}
				modifier = {
					factor = 5
					check_variable = {
						which = tma_intelligence
						value > 100
					}
				}
				modifier = {
					factor = 10
					check_variable = {
						which = tma_intelligence
						value > 200
					}
				}
				change_variable = {
					which = tma_intelligence
					value = 3
				}
			}
			1 = { #intelligence +4
				modifier = {
					factor = 5
					check_variable = {
						which = tma_intelligence
						value > 75
					}
				}
				modifier = {
					factor = 6
					check_variable = {
						which = tma_intelligence
						value > 100
					}
				}
				modifier = {
					factor = 10
					check_variable = {
						which = tma_intelligence
						value > 200
					}
				}
				change_variable = {
					which = tma_intelligence
					value = 4
				}
			}
			0.1 = { #intelligence +5
				modifier = {
					factor = 10
					check_variable = {
						which = tma_intelligence
						value > 75
					}
				}
				modifier = {
					factor = 2
					check_variable = {
						which = tma_intelligence
						value > 100
					}
				}
				modifier = {
					factor = 4
					check_variable = {
						which = tma_intelligence
						value > 200
					}
				}
				change_variable = {
					which = tma_intelligence
					value = 5
				}
			}
		}
}

tma_boost_research_effect = {
	random_list = {
		# TIER 1
		20 = {
			modifier = {
				factor = 0.25
				check_variable = {
					which = tma_intelligence
					value > 49
				}
			}
			modifier = {
				factor = 0
				check_variable = {
					which = tma_intelligence
					value > 99
				}
			}
			add_modifier = {
				modifier = "tma_option1_effect1a"
				days = 1440
			}
		}
		20 = {
			modifier = {
				factor = 0.25
				check_variable = {
					which = tma_intelligence
					value > 49
				}
			}
			modifier = {
				factor = 0
				check_variable = {
					which = tma_intelligence
					value > 99
				}
			}
			add_modifier = {
				modifier = "tma_option1_effect2a"
				days = 1440
			}
		}
		20 = {
			modifier = {
				factor = 0.25
				check_variable = {
					which = tma_intelligence
					value > 49
				}
			}
			modifier = {
				factor = 0
				check_variable = {
					which = tma_intelligence
					value > 99
				}
			}
			add_modifier = {
				modifier = "tma_option1_effect3a"
				days = 1440
			}
		}
		20 = {
			modifier = {
				factor = 0.25
				check_variable = {
					which = tma_intelligence
					value > 49
				}
			}
			modifier = {
				factor = 0
				check_variable = {
					which = tma_intelligence
					value > 99
				}
			}
			add_modifier = {
				modifier = "tma_option1_effect4a"
				days = 1440
			}
		}
		20 = {
			modifier = {
				factor = 0.25
				check_variable = {
					which = tma_intelligence
					value > 49
				}
			}
			modifier = {
				factor = 0
				check_variable = {
					which = tma_intelligence
					value > 99
				}
			}
			add_modifier = {
				modifier = "tma_option1_effect5a"
				days = 1440
			}
		}
		# TIER 2
		0.1 = {
			modifier = {
				factor = 10
				check_variable = {
					which = tma_intelligence
					value > 24
				}
			}
			modifier = {
				factor = 2
				check_variable = {
					which = tma_intelligence
					value > 74
				}
			}
			modifier = {
				factor = 0.5
				check_variable = {
					which = tma_intelligence
					value > 149
				}
			}
			#restrictions
			modifier = {
				factor = 0.10
				has_global_flag = tma_large_restrictions
			}
			modifier = {
				factor = 0.35
				has_global_flag = tma_decent_restrictions
			}
			modifier = {
				factor = 0.80
				has_global_flag = tma_few_restrictions
			}
			add_modifier = {
				modifier = "tma_option1_effect1b"
				days = 1440
			}
		}
		0.1 = {
			modifier = {
				factor = 10
				check_variable = {
					which = tma_intelligence
					value > 24
				}
			}
			modifier = {
				factor = 2
				check_variable = {
					which = tma_intelligence
					value > 74
				}
			}
			modifier = {
				factor = 0.5
				check_variable = {
					which = tma_intelligence
					value > 149
				}
			}
			#restrictions
			modifier = {
				factor = 0.10
				has_global_flag = tma_large_restrictions
			}
			modifier = {
				factor = 0.35
				has_global_flag = tma_decent_restrictions
			}
			modifier = {
				factor = 0.80
				has_global_flag = tma_few_restrictions
			}
			add_modifier = {
				modifier = "tma_option1_effect2b"
				days = 1440
			}
		}
		0.1 = {
			modifier = {
				factor = 10
				check_variable = {
					which = tma_intelligence
					value > 24
				}
			}
			modifier = {
				factor = 2
				check_variable = {
					which = tma_intelligence
					value > 74
				}
			}
			modifier = {
				factor = 0.5
				check_variable = {
					which = tma_intelligence
					value > 149
				}
			}
			#restrictions
			modifier = {
				factor = 0.10
				has_global_flag = tma_large_restrictions
			}
			modifier = {
				factor = 0.35
				has_global_flag = tma_decent_restrictions
			}
			modifier = {
				factor = 0.80
				has_global_flag = tma_few_restrictions
			}
			add_modifier = {
				modifier = "tma_option1_effect3b"
				days = 1440
			}
		}
		0.1 = {
			modifier = {
				factor = 10
				check_variable = {
					which = tma_intelligence
					value > 24
				}
			}
			modifier = {
				factor = 2
				check_variable = {
					which = tma_intelligence
					value > 74
				}
			}
			modifier = {
				factor = 0.5
				check_variable = {
					which = tma_intelligence
					value > 149
				}
			}
			#restrictions
			modifier = {
				factor = 0.10
				has_global_flag = tma_large_restrictions
			}
			modifier = {
				factor = 0.35
				has_global_flag = tma_decent_restrictions
			}
			modifier = {
				factor = 0.80
				has_global_flag = tma_few_restrictions
			}
			add_modifier = {
				modifier = "tma_option1_effect4b"
				days = 1440
			}
		}
		0.1 = {
			modifier = {
				factor = 10
				check_variable = {
					which = tma_intelligence
					value > 24
				}
			}
			modifier = {
				factor = 2
				check_variable = {
					which = tma_intelligence
					value > 74
				}
			}
			modifier = {
				factor = 0.5
				check_variable = {
					which = tma_intelligence
					value > 149
				}
			}
			#restrictions
			modifier = {
				factor = 0.10
				has_global_flag = tma_large_restrictions
			}
			modifier = {
				factor = 0.35
				has_global_flag = tma_decent_restrictions
			}
			modifier = {
				factor = 0.80
				has_global_flag = tma_few_restrictions
			}
			add_modifier = {
				modifier = "tma_option1_effect5b"
				days = 1440
			}
		}
		# TIER 3
		0.1 = {
			modifier = {
				factor = 10
				check_variable = {
					which = tma_intelligence
					value > 74
				}
			}
			modifier = {
				factor = 2
				check_variable = {
					which = tma_intelligence
					value > 124
				}
			}
			modifier = {
				factor = 5
				check_variable = {
					which = tma_intelligence
					value > 199
				}
			}
			#restrictions
			modifier = {
				factor = 0
				has_global_flag = tma_large_restrictions
			}
			modifier = {
				factor = 0.25
				has_global_flag = tma_decent_restrictions
			}
			modifier = {
				factor = 0.75
				has_global_flag = tma_few_restrictions
			}
			add_modifier = {
				modifier = "tma_option1_effect1c"
				days = 1440
			}
		}
		0.1 = {
			modifier = {
				factor = 10
				check_variable = {
					which = tma_intelligence
					value > 74
				}
			}
			modifier = {
				factor = 2
				check_variable = {
					which = tma_intelligence
					value > 124
				}
			}
			modifier = {
				factor = 5
				check_variable = {
					which = tma_intelligence
					value > 199
				}
			}
			#restrictions
			modifier = {
				factor = 0
				has_global_flag = tma_large_restrictions
			}
			modifier = {
				factor = 0.25
				has_global_flag = tma_decent_restrictions
			}
			modifier = {
				factor = 0.75
				has_global_flag = tma_few_restrictions
			}
			add_modifier = {
				modifier = "tma_option1_effect2c"
				days = 1440
			}
		}
		0.1 = {
			modifier = {
				factor = 10
				check_variable = {
					which = tma_intelligence
					value > 74
				}
			}
			modifier = {
				factor = 2
				check_variable = {
					which = tma_intelligence
					value > 124
				}
			}
			modifier = {
				factor = 5
				check_variable = {
					which = tma_intelligence
					value > 199
				}
			}
			#restrictions
			modifier = {
				factor = 0
				has_global_flag = tma_large_restrictions
			}
			modifier = {
				factor = 0.25
				has_global_flag = tma_decent_restrictions
			}
			modifier = {
				factor = 0.75
				has_global_flag = tma_few_restrictions
			}
			add_modifier = {
				modifier = "tma_option1_effect3c"
				days = 1440
			}
		}
		0.1 = {
			modifier = {
				factor = 10
				check_variable = {
					which = tma_intelligence
					value > 74
				}
			}
			modifier = {
				factor = 2
				check_variable = {
					which = tma_intelligence
					value > 124
				}
			}
			modifier = {
				factor = 5
				check_variable = {
					which = tma_intelligence
					value > 199
				}
			}
			#restrictions
			modifier = {
				factor = 0
				has_global_flag = tma_large_restrictions
			}
			modifier = {
				factor = 0.25
				has_global_flag = tma_decent_restrictions
			}
			modifier = {
				factor = 0.75
				has_global_flag = tma_few_restrictions
			}
			add_modifier = {
				modifier = "tma_option1_effect4c"
				days = 1440
			}
		}
		0.1 = {
			modifier = {
				factor = 10
				check_variable = {
					which = tma_intelligence
					value > 74
				}
			}
			modifier = {
				factor = 2
				check_variable = {
					which = tma_intelligence
					value > 124
				}
			}
			modifier = {
				factor = 5
				check_variable = {
					which = tma_intelligence
					value > 199
				}
			}
			#restrictions
			modifier = {
				factor = 0
				has_global_flag = tma_large_restrictions
			}
			modifier = {
				factor = 0.25
				has_global_flag = tma_decent_restrictions
			}
			modifier = {
				factor = 0.75
				has_global_flag = tma_few_restrictions
			}
			add_modifier = {
				modifier = "tma_option1_effect5c"
				days = 1440
			}
		}
	}
}

tma_research_tech_effect = {
	if = {
		limit = {
			check_variable = {
				which = tma_intelligence
				value < 75
			}
		}
		add_random_research_option = {
			add_progress = 0.50
			area = engineering
			ignore_prereqs = no
			fail_effects = {
				add_monthly_resource_mult = {
					resource = engineering_research
					value = @tier1researchreward
					min = @tier1researchmin
					max = @tier1researchmax
				}
			}
		}
		add_random_research_option = {
			add_progress = 0.50
			area = society
			ignore_prereqs = no
			fail_effects = {
				add_monthly_resource_mult = {
					resource = society_research
					value = @tier1researchreward
					min = @tier1researchmin
					max = @tier1researchmax
				}
			}
		}
		add_random_research_option = {
			add_progress = 0.50
			area = physics
			ignore_prereqs = no
			fail_effects = {
				add_monthly_resource_mult = {
					resource = physics_research
					value = @tier1researchreward
					min = @tier1researchmin
					max = @tier1researchmax
				}
			}
		}
	}
	else_if = {
		limit = {
			check_variable = {
				which = tma_intelligence
				value > 74
			}
			check_variable = {
				which = tma_intelligence
				value < 150
			}
			NOT = { has_global_flag = tma_large_restrictions }
		}
		add_random_research_option = {
			add_progress = 0.75
			area = engineering
			ignore_prereqs = no
			fail_effects = {
				add_monthly_resource_mult = {
					resource = engineering_research
					value = @tier2researchreward
					min = @tier2researchmin
					max = @tier2researchmax
				}
			}
		}
		add_random_research_option = {
			add_progress = 0.75
			area = society
			ignore_prereqs = no
			fail_effects = {
				add_monthly_resource_mult = {
					resource = society_research
					value = @tier2researchreward
					min = @tier2researchmin
					max = @tier2researchmax
				}
			}
		}
		add_random_research_option = {
			add_progress = 0.75
			area = physics
			ignore_prereqs = no
			fail_effects = {
				add_monthly_resource_mult = {
					resource = physics_research
					value = @tier2researchreward
					min = @tier2researchmin
					max = @tier2researchmax
				}
			}
		}
	}
	else_if = {
		limit = {
			check_variable = {
				which = tma_intelligence
				value > 149
			}
			NOT = { has_global_flag = tma_large_restrictions }
			NOT = { has_global_flag = tma_decent_restrictions }
		}
		add_random_research_option = {
			add_progress = 0.90
			area = engineering
			ignore_prereqs = no
			fail_effects = {
				add_monthly_resource_mult = {
					resource = engineering_research
					value = @tier3researchreward
					min = @tier3researchmin
					max = @tier3researchmax
				}
			}
		}
		add_random_research_option = {
			add_progress = 0.90
			area = society
			ignore_prereqs = no
			fail_effects = {
				add_monthly_resource_mult = {
					resource = society_research
					value = @tier3researchreward
					min = @tier3researchmin
					max = @tier3researchmax
				}
			}
		}
		add_random_research_option = {
			add_progress = 0.90
			area = physics
			ignore_prereqs = no
			fail_effects = {
				add_monthly_resource_mult = {
					resource = physics_research
					value = @tier3researchreward
					min = @tier3researchmin
					max = @tier3researchmax
				}
			}
		}
	}
	else = {
		add_monthly_resource_mult = {
			resource = engineering_research
			value = @tier3researchreward
			min = @tier3researchmin
			max = @tier3researchmax
		}
		add_monthly_resource_mult = {
			resource = society_research
			value = @tier3researchreward
			min = @tier3researchmin
			max = @tier3researchmax
		}
		add_monthly_resource_mult = {
			resource = physics_research
			value = @tier3researchreward
			min = @tier3researchmin
			max = @tier3researchmax
		}
	}
}

tma_analyse_worlds_effect = {
	random_planet_within_border = {
		limit = { 
				habitable_planet = no
				is_artificial = no
				NOR = {
					is_planet_class = pc_ringworld_habitable_damaged
					is_planet_class = pc_ringworld_tech_damaged
					is_planet_class = pc_ringworld_tech
					is_planet_class = pc_ringworld_seam
					is_planet_class = pc_ringworld_seam_damaged
				}
				# check that the random list won't come up empty
				OR = {
					energy_candidate = yes
					mineral_candidate = yes
					research_candidate = yes
					alloy_candidate = yes
					exotic_gas_candidate = yes
					rare_crystal_candidate = yes
					volatile_motes_candidate = yes
					ROOT = { is_gestalt = no }
				}
			}
		save_event_target_as = tma_analysed_world
	}
	random_list = {

			# Energy
			10 = {
				modifier = {
					factor = 0
					event_target:tma_analysed_world = { energy_candidate = no }
				}
				modifier = {
					factor = 0.25
					check_variable = {
						which = tma_intelligence
						value > 49
					}
				}
				modifier = {
					factor = 0
					check_variable = {
						which = tma_intelligence
						value > 99
					}
				}
				event_target:tma_analysed_world = { add_deposit = d_energy_5 }
			}
			5 = {
				modifier = {
					factor = 0
					event_target:tma_analysed_world = { energy_candidate = no }
				}
				modifier = {
					factor = 2
					check_variable = {
						which = tma_intelligence
						value > 24
					}
				}
				modifier = {
					factor = 2
					check_variable = {
						which = tma_intelligence
						value > 74
					}
				}
				modifier = {
					factor = 0.5
					check_variable = {
						which = tma_intelligence
						value > 149
					}
				}
				#restrictions
				modifier = {
					factor = 0.10
					has_global_flag = tma_large_restrictions
				}
				modifier = {
					factor = 0.35
					has_global_flag = tma_decent_restrictions
				}
				event_target:tma_analysed_world = { add_deposit = d_energy_7 }
			}
			0.1 = {
				modifier = {
					factor = 0
					event_target:tma_analysed_world = { energy_candidate = no }
				}
				modifier = {
					factor = 10
					check_variable = {
						which = tma_intelligence
						value > 74
					}
				}
				modifier = {
					factor = 2
					check_variable = {
						which = tma_intelligence
						value > 124
					}
				}
				modifier = {
					factor = 5
					check_variable = {
						which = tma_intelligence
						value > 199
					}
				}
				#restrictions
				modifier = {
					factor = 0
					has_global_flag = tma_large_restrictions
				}
				modifier = {
					factor = 0.25
					has_global_flag = tma_decent_restrictions
				}
				modifier = {
					factor = 0.75
					has_global_flag = tma_few_restrictions
				}
				event_target:tma_analysed_world = { add_deposit = d_energy_9 }
			}

			# Minerals
			10 = {
				modifier = {
					factor = 0
					event_target:tma_analysed_world = { mineral_candidate = no }
				}
				modifier = {
					factor = 0.25
					check_variable = {
						which = tma_intelligence
						value > 49
					}
				}
				modifier = {
					factor = 0
					check_variable = {
						which = tma_intelligence
						value > 99
					}
				}
				event_target:tma_analysed_world = { add_deposit = d_minerals_5 }
			}
			5 = {
				modifier = {
					factor = 0
					event_target:tma_analysed_world = { mineral_candidate = no }
				}
				modifier = {
					factor = 2
					check_variable = {
						which = tma_intelligence
						value > 24
					}
				}
				modifier = {
					factor = 2
					check_variable = {
						which = tma_intelligence
						value > 74
					}
				}
				modifier = {
					factor = 0.5
					check_variable = {
						which = tma_intelligence
						value > 149
					}
				}
				#restrictions
				modifier = {
					factor = 0.10
					has_global_flag = tma_large_restrictions
				}
				modifier = {
					factor = 0.35
					has_global_flag = tma_decent_restrictions
				}
				event_target:tma_analysed_world = { add_deposit = d_minerals_7 }
			}
			0.1 = {
				modifier = {
					factor = 0
					event_target:tma_analysed_world = { mineral_candidate = no }
				}
				modifier = {
					factor = 10
					check_variable = {
						which = tma_intelligence
						value > 74
					}
				}
				modifier = {
					factor = 2
					check_variable = {
						which = tma_intelligence
						value > 124
					}
				}
				modifier = {
					factor = 5
					check_variable = {
						which = tma_intelligence
						value > 199
					}
				}
				#restrictions
				modifier = {
					factor = 0
					has_global_flag = tma_large_restrictions
				}
				modifier = {
					factor = 0.25
					has_global_flag = tma_decent_restrictions
				}
				modifier = {
					factor = 0.75
					has_global_flag = tma_few_restrictions
				}
				event_target:tma_analysed_world = { add_deposit = d_minerals_9 }
			}

			# Physics
			10 = {
				modifier = {
					factor = 0
					event_target:tma_analysed_world = { research_candidate = no }
				}
				modifier = {
					factor = 0.25
					check_variable = {
						which = tma_intelligence
						value > 49
					}
				}
				modifier = {
					factor = 0
					check_variable = {
						which = tma_intelligence
						value > 99
					}
				}
				event_target:tma_analysed_world = { add_deposit = d_physics_5 }
			}
			5 = {
				modifier = {
					factor = 0
					event_target:tma_analysed_world = { research_candidate = no }
				}
				modifier = {
					factor = 2
					check_variable = {
						which = tma_intelligence
						value > 24
					}
				}
				modifier = {
					factor = 2
					check_variable = {
						which = tma_intelligence
						value > 74
					}
				}
				modifier = {
					factor = 0.5
					check_variable = {
						which = tma_intelligence
						value > 149
					}
				}
				#restrictions
				modifier = {
					factor = 0.10
					has_global_flag = tma_large_restrictions
				}
				modifier = {
					factor = 0.35
					has_global_flag = tma_decent_restrictions
				}
				event_target:tma_analysed_world = { add_deposit = d_physics_7 }
			}
			0.1 = {
				modifier = {
					factor = 0
					event_target:tma_analysed_world = { research_candidate = no }
				}
				modifier = {
					factor = 10
					check_variable = {
						which = tma_intelligence
						value > 74
					}
				}
				modifier = {
					factor = 2
					check_variable = {
						which = tma_intelligence
						value > 124
					}
				}
				modifier = {
					factor = 5
					check_variable = {
						which = tma_intelligence
						value > 199
					}
				}
				#restrictions
				modifier = {
					factor = 0
					has_global_flag = tma_large_restrictions
				}
				modifier = {
					factor = 0.25
					has_global_flag = tma_decent_restrictions
				}
				modifier = {
					factor = 0.75
					has_global_flag = tma_few_restrictions
				}
				event_target:tma_analysed_world = { add_deposit = d_physics_9 }
			}

			# Society
			10 = {
				modifier = {
					factor = 0
					event_target:tma_analysed_world = { research_candidate = no }
				}
				modifier = {
					factor = 0.25
					check_variable = {
						which = tma_intelligence
						value > 49
					}
				}
				modifier = {
					factor = 0
					check_variable = {
						which = tma_intelligence
						value > 99
					}
				}
				event_target:tma_analysed_world = { add_deposit = d_society_5 }
			}
			5 = {
				modifier = {
					factor = 0
					event_target:tma_analysed_world = { research_candidate = no }
				}
				modifier = {
					factor = 2
					check_variable = {
						which = tma_intelligence
						value > 24
					}
				}
				modifier = {
					factor = 2
					check_variable = {
						which = tma_intelligence
						value > 74
					}
				}
				modifier = {
					factor = 0.5
					check_variable = {
						which = tma_intelligence
						value > 149
					}
				}
				#restrictions
				modifier = {
					factor = 0.10
					has_global_flag = tma_large_restrictions
				}
				modifier = {
					factor = 0.35
					has_global_flag = tma_decent_restrictions
				}
				event_target:tma_analysed_world = { add_deposit = d_society_7 }
			}
			0.1 = {
				modifier = {
					factor = 0
					event_target:tma_analysed_world = { research_candidate = no }
				}
				modifier = {
					factor = 10
					check_variable = {
						which = tma_intelligence
						value > 74
					}
				}
				modifier = {
					factor = 2
					check_variable = {
						which = tma_intelligence
						value > 124
					}
				}
				modifier = {
					factor = 5
					check_variable = {
						which = tma_intelligence
						value > 199
					}
				}
				#restrictions
				modifier = {
					factor = 0
					has_global_flag = tma_large_restrictions
				}
				modifier = {
					factor = 0.25
					has_global_flag = tma_decent_restrictions
				}
				modifier = {
					factor = 0.75
					has_global_flag = tma_few_restrictions
				}
				event_target:tma_analysed_world = { add_deposit = d_society_9 }
			}

			# Engineering
			10 = {
				modifier = {
					factor = 0
					event_target:tma_analysed_world = { research_candidate = no }
				}
				modifier = {
					factor = 0.25
					check_variable = {
						which = tma_intelligence
						value > 49
					}
				}
				modifier = {
					factor = 0
					check_variable = {
						which = tma_intelligence
						value > 99
					}
				}
				event_target:tma_analysed_world = { add_deposit = d_engineering_5 }
			}
			5 = {
				modifier = {
					factor = 0
					event_target:tma_analysed_world = { research_candidate = no }
				}
				modifier = {
					factor = 2
					check_variable = {
						which = tma_intelligence
						value > 24
					}
				}
				modifier = {
					factor = 2
					check_variable = {
						which = tma_intelligence
						value > 74
					}
				}
				modifier = {
					factor = 0.5
					check_variable = {
						which = tma_intelligence
						value > 149
					}
				}
				#restrictions
				modifier = {
					factor = 0.10
					has_global_flag = tma_large_restrictions
				}
				modifier = {
					factor = 0.35
					has_global_flag = tma_decent_restrictions
				}
				event_target:tma_analysed_world = { add_deposit = d_engineering_7 }
			}
			0.1 = {
				modifier = {
					factor = 0
					event_target:tma_analysed_world = { research_candidate = no }
				}
				modifier = {
					factor = 10
					check_variable = {
						which = tma_intelligence
						value > 74
					}
				}
				modifier = {
					factor = 2
					check_variable = {
						which = tma_intelligence
						value > 124
					}
				}
				modifier = {
					factor = 5
					check_variable = {
						which = tma_intelligence
						value > 199
					}
				}
				#restrictions
				modifier = {
					factor = 0
					has_global_flag = tma_large_restrictions
				}
				modifier = {
					factor = 0.25
					has_global_flag = tma_decent_restrictions
				}
				modifier = {
					factor = 0.75
					has_global_flag = tma_few_restrictions
				}
				event_target:tma_analysed_world = { add_deposit = d_engineering_9 }
			}

			# Trade
			10 = {
				modifier = {
					factor = 0
					is_gestalt = yes
				}
				modifier = {
					factor = 0.25
					check_variable = {
						which = tma_intelligence
						value > 49
					}
				}
				modifier = {
					factor = 0
					check_variable = {
						which = tma_intelligence
						value > 99
					}
				}
				event_target:tma_analysed_world = { add_deposit = d_trade_value_5 }
			}
			5 = {
				modifier = {
					factor = 0
					is_gestalt = yes
				}
				modifier = {
					factor = 2
					check_variable = {
						which = tma_intelligence
						value > 24
					}
				}
				modifier = {
					factor = 2
					check_variable = {
						which = tma_intelligence
						value > 74
					}
				}
				modifier = {
					factor = 0.5
					check_variable = {
						which = tma_intelligence
						value > 149
					}
				}
				#restrictions
				modifier = {
					factor = 0.10
					has_global_flag = tma_large_restrictions
				}
				modifier = {
					factor = 0.35
					has_global_flag = tma_decent_restrictions
				}
				event_target:tma_analysed_world = { add_deposit = d_trade_value_7 }
			}
			0.1 = {
				modifier = {
					factor = 0
					is_gestalt = yes
				}
				modifier = {
					factor = 10
					check_variable = {
						which = tma_intelligence
						value > 74
					}
				}
				modifier = {
					factor = 2
					check_variable = {
						which = tma_intelligence
						value > 124
					}
				}
				modifier = {
					factor = 5
					check_variable = {
						which = tma_intelligence
						value > 199
					}
				}
				#restrictions
				modifier = {
					factor = 0
					has_global_flag = tma_large_restrictions
				}
				modifier = {
					factor = 0.25
					has_global_flag = tma_decent_restrictions
				}
				modifier = {
					factor = 0.75
					has_global_flag = tma_few_restrictions
				}
				event_target:tma_analysed_world = { add_deposit = d_trade_value_9 }
			}

			# Alloys
			10 = {
				modifier = {
					factor = 0
					event_target:tma_analysed_world = { alloy_candidate = no }
				}
				modifier = {
					factor = 0.25
					check_variable = {
						which = tma_intelligence
						value > 49
					}
				}
				modifier = {
					factor = 0
					check_variable = {
						which = tma_intelligence
						value > 99
					}
				}
				event_target:tma_analysed_world = { add_deposit = d_alloys_3 }
			}
			5 = {
				modifier = {
					factor = 0
					event_target:tma_analysed_world = { alloy_candidate = no }
				}
				modifier = {
					factor = 2
					check_variable = {
						which = tma_intelligence
						value > 24
					}
				}
				modifier = {
					factor = 2
					check_variable = {
						which = tma_intelligence
						value > 74
					}
				}
				modifier = {
					factor = 0.5
					check_variable = {
						which = tma_intelligence
						value > 149
					}
				}
				#restrictions
				modifier = {
					factor = 0.10
					has_global_flag = tma_large_restrictions
				}
				modifier = {
					factor = 0.35
					has_global_flag = tma_decent_restrictions
				}
				event_target:tma_analysed_world = { add_deposit = d_alloys_4 }
			}
			0.1 = {
				modifier = {
					factor = 0
					event_target:tma_analysed_world = { alloy_candidate = no }
				}
				modifier = {
					factor = 10
					check_variable = {
						which = tma_intelligence
						value > 74
					}
				}
				modifier = {
					factor = 2
					check_variable = {
						which = tma_intelligence
						value > 124
					}
				}
				modifier = {
					factor = 5
					check_variable = {
						which = tma_intelligence
						value > 199
					}
				}
				#restrictions
				modifier = {
					factor = 0
					has_global_flag = tma_large_restrictions
				}
				modifier = {
					factor = 0.25
					has_global_flag = tma_decent_restrictions
				}
				modifier = {
					factor = 0.75
					has_global_flag = tma_few_restrictions
				}
				event_target:tma_analysed_world = { add_deposit = d_alloys_5 }
			}

			# Exotic Gas
			10 = {
				modifier = {
					factor = 0
					event_target:tma_analysed_world = { exotic_gas_candidate = no }
				}
				modifier = {
					factor = 0.25
					check_variable = {
						which = tma_intelligence
						value > 49
					}
				}
				modifier = {
					factor = 0
					check_variable = {
						which = tma_intelligence
						value > 99
					}
				}
				event_target:tma_analysed_world = { add_deposit = d_exotic_gases_3 }
			}
			5 = {
				modifier = {
					factor = 0
					event_target:tma_analysed_world = { exotic_gas_candidate = no }
				}
				modifier = {
					factor = 2
					check_variable = {
						which = tma_intelligence
						value > 24
					}
				}
				modifier = {
					factor = 2
					check_variable = {
						which = tma_intelligence
						value > 74
					}
				}
				modifier = {
					factor = 0.5
					check_variable = {
						which = tma_intelligence
						value > 149
					}
				}
				#restrictions
				modifier = {
					factor = 0.10
					has_global_flag = tma_large_restrictions
				}
				modifier = {
					factor = 0.35
					has_global_flag = tma_decent_restrictions
				}
				event_target:tma_analysed_world = { add_deposit = d_exotic_gases_4 }
			}
			0.1 = {
				modifier = {
					factor = 0
					event_target:tma_analysed_world = { exotic_gas_candidate = no }
				}
				modifier = {
					factor = 10
					check_variable = {
						which = tma_intelligence
						value > 74
					}
				}
				modifier = {
					factor = 2
					check_variable = {
						which = tma_intelligence
						value > 124
					}
				}
				modifier = {
					factor = 5
					check_variable = {
						which = tma_intelligence
						value > 199
					}
				}
				#restrictions
				modifier = {
					factor = 0
					has_global_flag = tma_large_restrictions
				}
				modifier = {
					factor = 0.25
					has_global_flag = tma_decent_restrictions
				}
				modifier = {
					factor = 0.75
					has_global_flag = tma_few_restrictions
				}
				event_target:tma_analysed_world = { add_deposit = d_exotic_gases_5 }
			}

			# Rare Crystals
			10 = {
				modifier = {
					factor = 0
					event_target:tma_analysed_world = { rare_crystal_candidate = no }
				}
				modifier = {
					factor = 0.25
					check_variable = {
						which = tma_intelligence
						value > 49
					}
				}
				modifier = {
					factor = 0
					check_variable = {
						which = tma_intelligence
						value > 99
					}
				}
				event_target:tma_analysed_world = { add_deposit = d_rare_crystals_3 }
			}
			5 = {
				modifier = {
					factor = 0
					event_target:tma_analysed_world = { rare_crystal_candidate = no }
				}
				modifier = {
					factor = 2
					check_variable = {
						which = tma_intelligence
						value > 24
					}
				}
				modifier = {
					factor = 2
					check_variable = {
						which = tma_intelligence
						value > 74
					}
				}
				modifier = {
					factor = 0.5
					check_variable = {
						which = tma_intelligence
						value > 149
					}
				}
				#restrictions
				modifier = {
					factor = 0.10
					has_global_flag = tma_large_restrictions
				}
				modifier = {
					factor = 0.35
					has_global_flag = tma_decent_restrictions
				}
				event_target:tma_analysed_world = { add_deposit = d_rare_crystals_4 }
			}
			0.1 = {
				modifier = {
					factor = 0
					event_target:tma_analysed_world = { rare_crystal_candidate = no }
				}
				modifier = {
					factor = 10
					check_variable = {
						which = tma_intelligence
						value > 74
					}
				}
				modifier = {
					factor = 2
					check_variable = {
						which = tma_intelligence
						value > 124
					}
				}
				modifier = {
					factor = 5
					check_variable = {
						which = tma_intelligence
						value > 199
					}
				}
				#restrictions
				modifier = {
					factor = 0
					has_global_flag = tma_large_restrictions
				}
				modifier = {
					factor = 0.25
					has_global_flag = tma_decent_restrictions
				}
				modifier = {
					factor = 0.75
					has_global_flag = tma_few_restrictions
				}
				event_target:tma_analysed_world = { add_deposit = d_rare_crystals_5 }
			}

			# Volatile Motes
			10 = {
				modifier = {
					factor = 0
					event_target:tma_analysed_world = { volatile_motes_candidate = no }
				}
				modifier = {
					factor = 0.25
					check_variable = {
						which = tma_intelligence
						value > 49
					}
				}
				modifier = {
					factor = 0
					check_variable = {
						which = tma_intelligence
						value > 99
					}
				}
				event_target:tma_analysed_world = { add_deposit = d_volatile_motes_3 }
			}
			5 = {
				modifier = {
					factor = 0
					event_target:tma_analysed_world = { volatile_motes_candidate = no }
				}
				modifier = {
					factor = 2
					check_variable = {
						which = tma_intelligence
						value > 24
					}
				}
				modifier = {
					factor = 2
					check_variable = {
						which = tma_intelligence
						value > 74
					}
				}
				modifier = {
					factor = 0.5
					check_variable = {
						which = tma_intelligence
						value > 149
					}
				}
				#restrictions
				modifier = {
					factor = 0.10
					has_global_flag = tma_large_restrictions
				}
				modifier = {
					factor = 0.35
					has_global_flag = tma_decent_restrictions
				}
				event_target:tma_analysed_world = { add_deposit = d_volatile_motes_4 }
			}
			0.1 = {
				modifier = {
					factor = 0
					event_target:tma_analysed_world = { volatile_motes_candidate = no }
				}
				modifier = {
					factor = 10
					check_variable = {
						which = tma_intelligence
						value > 74
					}
				}
				modifier = {
					factor = 2
					check_variable = {
						which = tma_intelligence
						value > 124
					}
				}
				modifier = {
					factor = 5
					check_variable = {
						which = tma_intelligence
						value > 199
					}
				}
				#restrictions
				modifier = {
					factor = 0
					has_global_flag = tma_large_restrictions
				}
				modifier = {
					factor = 0.25
					has_global_flag = tma_decent_restrictions
				}
				modifier = {
					factor = 0.75
					has_global_flag = tma_few_restrictions
				}
				event_target:tma_analysed_world = { add_deposit = d_volatile_motes_5 }
			}
	}
}

tma_boost_intelligence_effect = {
	random_list = {
		5 = {
			change_variable = {
				which = tma_intelligence
				value = 10
			}
		}
		5 = {
			change_variable = {
				which = tma_intelligence
				value = 11
			}
		}
		5 = {
			change_variable = {
				which = tma_intelligence
				value = 12
			}
		}
		5 = {
			change_variable = {
				which = tma_intelligence
				value = 13
			}
		}
		5 = {
			change_variable = {
				which = tma_intelligence
				value = 14
			}
		}
		5 = {
			change_variable = {
				which = tma_intelligence
				value = 15
			}
		}
		5 = {
			change_variable = {
				which = tma_intelligence
				value = 16
			}
		}
		5 = {
			change_variable = {
				which = tma_intelligence
				value = 17
			}
		}
		5 = {
			change_variable = {
				which = tma_intelligence
				value = 18
			}
		}
		5 = {
			change_variable = {
				which = tma_intelligence
				value = 19
			}
		}
		5 = {
			change_variable = {
				which = tma_intelligence
				value = 20
			}
		}
		5 = {
			change_variable = {
				which = tma_intelligence
				value = 21
			}
		}
		5 = {
			change_variable = {
				which = tma_intelligence
				value = 22
			}
		}
		5 = {
			change_variable = {
				which = tma_intelligence
				value = 23
			}
		}
		5 = {
			change_variable = {
				which = tma_intelligence
				value = 24
			}
		}
		5 = {
			change_variable = {
				which = tma_intelligence
				value = 25
			}
		}
	}
}

remove_emex_config_flags = {
	remove_global_flag = emex_default_config
	remove_global_flag = emex_easy_config
	remove_global_flag = emex_hard_config
	remove_global_flag = emex_insane_config
	
	remove_global_flag = emex_master_ai_easy
	remove_global_flag = emex_master_ai_normal
	remove_global_flag = emex_master_ai_hard
	remove_global_flag = emex_master_ai_insane
	remove_global_flag = emex_master_ai_ragnarok
}

set_emex_easy_difficulty = {
	set_global_flag = emex_easy_config
	set_global_flag = emex_master_ai_easy
}

set_emex_normal_difficulty = {
	set_global_flag = emex_default_config
	set_global_flag = emex_master_ai_normal
}

set_emex_hard_difficulty = {
	set_global_flag = emex_hard_config
	set_global_flag = emex_master_ai_hard
}

set_emex_insane_difficulty = {
	set_global_flag = emex_insane_config
	set_global_flag = emex_master_ai_insane
}