# Mod by Terak_Lapis
ap_diploboost = {
	potential = { # only for community members
		#is_galactic_community_member = yes
	}

	possible = {
		custom_tooltip = { # need 3 Perks
			fail_text = "requires_ascension_perks_3"
			num_ascension_perks > 2
		}
		custom_tooltip = { # need tech "diplo_boost_1"
			fail_text = "requires_tech_boost_1"
			has_technology = tech_diplo_boost_1
		}
	}

	on_enabled = {
		custom_tooltip = "diplo_boosted"
		custom_tooltip = "diplo_ap_boosted_2"
	}

	modifier = {
		envoys_add = 2
		diplo_weight_mult = 0.33
		diplomacy_upkeep_mult = -0.05
		country_base_influence_produces_add = 2
		envoy_improve_relations_mult = 0.15
	}

	ai_weight = { # custom AI weight tree by Terak_Lapis
		factor = 10
		modifier = {
			factor = 0.01
			has_ethic = ethic_fanatic_xenophobe
		}
		modifier = {
			factor = 0.02
			has_ethic = ethic_xenophobe
		} #Mod by Terak_Lapis
		modifier = {
			factor = 2.4
			has_ethic = ethic_fanatic_xenophile
		}
		modifier = {
			factor = 2
			has_ethic = ethic_xenophile
		}
		modifier = {
			factor = 1.1
			is_galactic_community_member = yes
		}
		modifier = {
			factor = 0
			is_galactic_community_member = no
		}
		modifier = {
			factor = 2
			is_part_of_galactic_council = yes
		}
		modifier = {
			factor = 20
			has_origin = origin_diploboost
		}
	}

	
}

ap_churl = {
	potential = {
		has_origin = origin_churl
	}

	possible = {
		custom_tooltip = { # need 2 Perks
			fail_text = "requires_ascension_perks_2"
			num_ascension_perks > 1
		}
	}

	on_enabled = {
		owner = {
			#add_modifier = {
			#	modifier = churl_power
			#	days = -1
			#	icon = "gfx/interface/icons/modifiers/churl_power.dds"
			#}
		} # Mod by Terak_Lapis
		custom_tooltip = "custom_ap_churl_tooltip"
		country_event = {
		#	id = dpboo.20
			id = dpboo.21
		}
		country_event = {
			id = dpboo.21
		}
	}

	modifier = {
		country_admin_cap_add = 10
	}

	ai_weight = {
		factor = 0
		modifier = {
			factor = 1000
			has_origin = origin_churl
		}
	}
}

ap_guardian_techt = {
	potential = { # Only free and non-brutal Empires
		NOR = { 
			has_origin = origin_scion 
			is_country_type = fallen_empire
			is_country_type = awakened_fallen_empire
			is_country_type = awakened_marauders
			is_country_type = nomad
			is_subject = yes
			#has_global_flag = peace_keeper_pact_formed
			has_ethic = ethic_fanatic_xenophobe
			has_ethic = ethic_xenophobe
			has_ethic = ethic_fanatic_materialist
			has_ethic = ethic_fanatic_spiritualist
			has_civic = civic_criminal_heritage
			has_civic = civic_shadow_council
			has_civic = civic_imperial_cult
			has_civic = civic_fanatic_purifiers
			has_civic = civic_hive_devouring_swarm
			has_civic = civic_machine_assimilator
			has_civic = civic_slaver_guilds
			has_civic = civic_inwards_perfection
		}
	}

	possible = {
		custom_tooltip = { # need 3 Perks
			fail_text = "requires_ascension_perks_3"
			num_ascension_perks > 2
		} 
		custom_tooltip = { # need tech Plasma Reactor
			fail_text = "requires_tech_plasma_power"
			has_technology = tech_plasma_power
		}
		custom_tooltip = {
			fail_text = "requires_defender_ap" 
			has_ascension_perk = ap_defender_of_the_galaxy
		}
		custom_tooltip = {
			fail_text = "requires_digsite_peke_finished"
			has_country_flag = ap_guardian_unlocked
		}
	}

	on_enabled = {
		set_global_flag = peace_keeper_tech_tooltip
		#custom_tooltip = reseach_peke_tech #ccontact_peace_keepers
		hidden_effect = {
			country_event = {
				id = dpboo.5502 #peke.1
			}
		}
	}
}

ap_paper_popacy = {

	on_enabled = { 
		custom_tooltip = ap_paper_1_text
		#country_event = {	id = paperpop.100 } Not used right now
		country_event = {	id = paperpop.2 }
		#country_event = { id = paperpop.400 } Not used right now
		country_event = { id = paperpop.101 }
		
	}

	modifier = {
		country_base_influence_produces_add = 5
		country_admin_cap_add = 200
		edict_length_mult = 0.5
	}

	

	possible = {
		has_technology = tech_paper_pope
		custom_tooltip = {	
			fail_text = "requires_ascension_perks_3"
			num_ascension_perks > 2
		}

		NOR = { 
			has_ethic = ethic_gestalt_consciousness
			has_ethic = ethic_fanatic_materialist 
		}
	}

	ai_weight = {
		factor = 1
		modifier = {	
			factor = 10
			OR = {	
				has_ethic = ethic_fanatic_spiritualist
				has_ethic = ethic_spiritualist
				is_spiritualist = yes 
			}
		}
		modifier = {
			factor = 0
			OR = {	
				has_ethic = ethic_materialist
				has_ethic = ethic_fanatic_materialist
				is_materialist = yes
			}
		}
	}
}