#MODIFIED
#######################################
### Gigaengineering Ascension Perks ###
#######################################

ap_hyper_engineering = {
	on_enabled = {
		custom_tooltip = "allow_big_brain"
		custom_tooltip = "allow_vortex_drain"
		custom_tooltip = "allow_behemoth_ringworld"
	}
	possible = {
		custom_tooltip = {
			fail_text = "requires_ap_galactic_wonders"
			has_galactic_wonders = yes
		}	
		custom_tooltip = {
			fail_text = "requires_ascension_perks_3"
			num_ascension_perks > 2
		}
		custom_tooltip = {
			fail_text = "requires_mega_engineering"
			has_technology = tech_mega_engineering
		}
		custom_tooltip = {
			fail_text = "requires_titanic_ringworld"
			has_technology = tech_titanic_ringworld
		}
		custom_tooltip = {
			fail_text = "requires_sentient_ai"
			has_technology = tech_self_aware_logic
		}
		custom_tooltip = {
			fail_text = "requires_dark_matter"
			has_technology = tech_mine_dark_matter
		}
	}
	
	potential = {
		NOT = {
			has_ascension_perk = ap_hyper_engineering
		}
	}
	
	ai_weight = {
		factor = 1000
	}

}

ap_systemcraft = {
	on_enabled = {
		custom_tooltip = "add_research_options_systemcraft_base"
		hidden_effect = {
			if = {
				limit = { 
					NOT = { has_technology = tech_experimental_stellar_propulsion }
				}
				add_research_option = tech_experimental_stellar_propulsion
			}
			hidden_effect = {
				country_event = { id = systemcraft.1 }
			}	
		}
	}
	
	modifier = {
		country_megastructure_build_cap_add = 1
		megastructure_build_speed_mult = 0.25
		
	}

	possible = {
		custom_tooltip = {
			fail_text = "requires_ap_hyper_engineering"
			has_ascension_perk = ap_hyper_engineering
		}
		custom_tooltip = {
			fail_text = "requires_ap_colossus"
			has_ascension_perk = ap_colossus
		}
		custom_tooltip = {
			fail_text = "requires_ndb"
			has_technology = tech_nicoll_dyson_beam
		}
		custom_tooltip = {
			fail_text = "requires_planetcraft"
			has_technology = tech_war_planets
		}
		custom_tooltip = {
			fail_text = "requires_tetraengineering"
			has_technology = tech_tetradimensional_engineering
		}
	}				
	
	potential = {
		host_has_dlc = "Utopia"
		host_has_dlc = "Apocalypse"
		host_has_dlc = "Federations"
		NOT = {
			has_ascension_perk = ap_systemcraft
		}
		NOT = {
			no_scope = {
				has_global_flag = systemcraft_disabled
			}
		}
	}
	
	ai_weight = {
		factor = 0
	}
}
ap_slice_of_life = {
	on_enabled = {
		custom_tooltip = "add_research_options_alderson"
		hidden_effect = {
			if = {
				limit = { 
					NOT = { has_technology = tech_alderson_disk }
				}
				add_research_option = tech_alderson_disk
			}
		}
	}
	
	modifier = {
		country_megastructure_build_cap_add = 1
		megastructure_build_speed_mult = 0.15
		country_resource_max_alloys_add = 50000
	}

	possible = {
		custom_tooltip = {
			fail_text = "requires_ap_hyper_engineering"
			has_ascension_perk = ap_hyper_engineering
		}
		has_technology = tech_gargantuan_ringworld
		custom_tooltip = {
			fail_text = "requires_tetraengineering"
			has_technology = tech_tetradimensional_engineering
		}
	}				
	
	potential = {
		host_has_dlc = "Utopia"
		NOT = {
			has_ascension_perk = ap_slice_of_life
		}
		NOT = {
			no_scope = {
				has_global_flag = alderson_disabled
			}
		}
	}
	
}
ap_the_biggest_gun = {
	on_enabled = {
		custom_tooltip = "add_research_options_quasistellar_base"
		hidden_effect = {
			if = {
				limit = { 
					NOT = { has_technology = tech_quasi_stellar_0 }
				}
				add_research_option = tech_quasi_stellar_0
			}
		}
	}
	
	modifier = {
		country_megastructure_build_cap_add = 1
		megastructure_build_speed_mult = 0.20
		country_resource_max_alloys_add = 50000
	}

	possible = {
		custom_tooltip = {
			fail_text = "requires_ap_hyper_engineering"
			has_ascension_perk = ap_hyper_engineering
		}
		has_technology = tech_war_planets
		has_technology = tech_nicoll_dyson_beam
		custom_tooltip = {
			fail_text = "requires_tetraengineering"
			has_technology = tech_tetradimensional_engineering
		}
		custom_tooltip = {
			fail_text = "requires_found_giga_black_hole_quasar"
			has_country_flag = found_giga_black_hole_quasar
		}
	}				
	
	potential = {
		host_has_dlc = "Utopia"
		NOT = {
			has_ascension_perk = ap_the_biggest_gun
		}
		NOT = {
			no_scope = {
				has_global_flag = quasistellar_disabled
			}
		}
	}
	
}