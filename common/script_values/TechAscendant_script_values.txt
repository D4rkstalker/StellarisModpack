research_leader_level = {
	base = 0
	modifier = {
		any_owned_leader = {
			is_councilor_type = councilor_research
		}
		add = value:councilor_level|TYPE|councilor_research|
	}
	modifier = {
		any_owned_leader = {
			is_councilor_type = councilor_gestalt_scientist
		}
		add = value:councilor_level|TYPE|councilor_gestalt_scientist|
	}
}

research_traits_score = {
	base = 0
	modifier = {
		add = @scientist_genius
		any_owned_leader = {
			is_councilor = yes
			OR = {
				has_trait = leader_trait_chosen
				has_trait = leader_trait_spark_of_genius
				has_trait = leader_trait_spark_of_genius_2
			}
		}
	}
	modifier = {
		add = 1
		any_owned_leader = {
			is_councilor = yes
			has_trait = leader_trait_spark_of_genius_2
		}
	}
	modifier = {
		add = @scientist_maniacal
		any_owned_leader = {
			is_councilor = yes
			OR = {
				has_trait = leader_trait_maniacal
				has_trait = leader_trait_maniacal_2
				has_trait = leader_trait_curator
			}			
		}
	}
	modifier = {
		add = 1
		any_owned_leader = {
			is_councilor = yes
			has_trait = leader_trait_maniacal_2			
		}
	}
	modifier = {
		add = @scientist_inquisitive
		any_owned_leader = {
			is_councilor = yes
			OR = {
				has_trait = leader_trait_inquisitive
				has_trait = leader_trait_inquisitive_2
				has_trait = leader_trait_inquisitive_3
			}
		}
	}
	modifier = {
		add = @scientist_inquisitive
		any_owned_leader = {
			is_councilor = yes
			OR = {
				has_trait = leader_trait_inquisitive_2
				has_trait = leader_trait_inquisitive_3
			}
		}
	}
	modifier = {
		add = @scientist_inquisitive
		any_owned_leader = {
			is_councilor = yes
			has_trait = leader_trait_inquisitive_3
		}
	}
}

research_score_multiplier = {
	base = 0
	modifier = {
		add = @scientist_focus
		any_owned_leader = {
			is_councilor = yes
			OR = {
				has_trait = leader_trait_$FOCUS$_focus
				has_trait = leader_trait_$FOCUS$_focus_2
				has_trait = leader_trait_$FOCUS$_focus_3
			}		
		}
	}
	modifier = {
		add = 1
		any_owned_leader = {
			is_councilor = yes
			OR = {
				has_trait = leader_trait_$FOCUS$_focus_2
				has_trait = leader_trait_$FOCUS$_focus_3
			}	
		}
	}
	modifier = {
		add = 1
		any_owned_leader = {
			is_councilor = yes
			has_trait = leader_trait_$FOCUS$_focus_3
		}
	}
	modifier = {
		add = @scientist_specialist
		any_owned_leader = {
			is_councilor = yes
			OR = {
				has_trait = leader_trait_expertise_$EXPERTISE$
				has_trait = leader_trait_expertise_$EXPERTISE$_2
				has_trait = leader_trait_expertise_$EXPERTISE$_3
			}			
		}
	}
	modifier = {
		add = 2
		any_owned_leader = {
			is_councilor = yes
			OR = {
				has_trait = leader_trait_expertise_$EXPERTISE$_2
				has_trait = leader_trait_expertise_$EXPERTISE$_3
			}			
		}
	}
	modifier = {
		add = 2
		any_owned_leader = {
			is_councilor = yes
			has_trait = leader_trait_expertise_$EXPERTISE$_3			
		}
	}
	modifier = {
		add = @techAscendant_perk
		has_ascension_perk = ap_technological_ascendancy
	}
	modifier = {
		add = @spynetwork_boost
		any_spynetwork = {
			target = {
				has_technology = tech_$BREAKTHROUGH$_breakthrough 
				NOT = {
					has_ascension_perk = ap_enigmatic_engineering
				}
			}
			OR = {
				has_espionage_asset = asset_scientist
				has_espionage_asset = asset_academic
				has_espionage_asset = asset_hacker
				has_espionage_asset = asset_research_drone
				has_espionage_asset = asset_memory_cache
				has_espionage_asset = asset_research_database
				has_espionage_asset = asset_cortex_node
			}
		}
	}
	modifier = {
		add = @research_agreement_boost
		any_country = {
			has_technology = tech_$BREAKTHROUGH$_breakthrough
			NOT = {
				has_ascension_perk = ap_enigmatic_engineering
			}
			has_research_agreement = root
		}
	}
	min = 1
}

breakthrough_total = {
	add = value:breakthrough_cummulative_penalty
	add = value:biology_breakthrough_score
	add = value:computing_breakthrough_score
	add = value:field_manipulation_breakthrough_score
	add = value:industry_breakthrough_score
	add = value:materials_breakthrough_score
	add = value:military_theory_breakthrough_score
	add = value:new_worlds_breakthrough_score
	add = value:particles_breakthrough_score
	add = value:psionics_breakthrough_score
	add = value:rocketry_breakthrough_score
	add = value:statecraft_breakthrough_score
	add = value:voidcraft_breakthrough_score
}

breakthrough_cummulative_penalty = {
	base = @base_difficulty
	modifier = {
		mult = @cumulative_penalty
		has_technology = tech_materials_breakthrough
	}
	modifier = {
		mult = @cumulative_penalty
		has_technology = tech_industry_breakthrough
	}
	modifier = {
		mult = @cumulative_penalty
		has_technology = tech_voidcraft_breakthrough
	}
	modifier = {
		mult = @cumulative_penalty
		has_technology = tech_rocketry_breakthrough
	}
	modifier = {
		mult = @cumulative_penalty
		has_technology = tech_particles_breakthrough
	}
	modifier = {
		mult = @cumulative_penalty
		has_technology = tech_field_manipulation_breakthrough
	}
	modifier = {
		mult = @cumulative_penalty
		has_technology = tech_computing_breakthrough
	}
	modifier = {
		mult = @cumulative_penalty
		has_technology = tech_psionics_breakthrough
	}
	modifier = {
		mult = @cumulative_penalty
		has_technology = tech_biology_breakthrough
	}
	modifier = {
		mult = @cumulative_penalty
		has_technology = tech_statecraft_breakthrough
	}
	modifier = {
		mult = @cumulative_penalty
		has_technology = tech_new_worlds_breakthrough
	}
	modifier = {
		mult = @cumulative_penalty
		has_technology = tech_military_theory_breakthrough
	}
	round = yes
}


materials_breakthrough_score = {
	base = 0
	add = value:research_leader_level
	divide = 2
	floor = yes
	modifier = {
		add = @research_philosophy
		OR = {
			has_policy_flag = research_engineering
			has_policy_flag = research_physics_min
			has_policy_flag = research_society_min
		}
	}
	modifier = {
		add = @research_philosophy_max
		has_policy_flag = research_engineering_max
	}
	modifier = {
		subtract = @philosophy_penalty
		OR = {
			has_policy_flag = research_physics
			has_policy_flag = research_society
		}		
	}
	modifier = {
		subtract = @research_philosophy
		has_policy_flag = research_engineering_min
	}
	min = 0
	add = value:research_traits_score
	modifier = {
		add = @tradition_boost
		OR = {
			has_tradition = tr_prosperity_adopt
			has_tradition = tr_synthetics_adopt
		}
	}
	modifier = {
		add = @tradition_boost
		OR = {
			has_tradition = tr_prosperity_finish
			has_tradition = tr_synthetics_finish
		}
	}
	modifier = {
		add = @perk_boost
		has_ascension_perk = ap_master_builders
	}
	modifier = {
		add = @perk_boost
		has_ascension_perk = ap_arcology_project
	}
	modifier = {
		add = @perk_boost
		has_ascension_perk = ap_machine_worlds
	}
	modifier = {
		add = @ethic_boost
		has_ethic = ethic_materialist
	}
	modifier = {
		add = @fanatic_ethic_boost
		has_ethic = ethic_fanatic_materialist
	}
	modifier = {
		add = @gestalt_boost
		is_gestalt = yes
	}
	mult = value:research_score_multiplier|FOCUS|engineering|EXPERTISE|materials|BREAKTHROUGH|materials|
	modifier = {
		has_technology = tech_industry_breakthrough
		add = @similar_boost
	}
	modifier = {
		has_technology = tech_voidcraft_breakthrough
		add = @similar_boost
	}
	modifier = {
		has_technology = tech_rocketry_breakthrough
		add = @similar_boost
	}
	modifier = {
		add = @neighbor_boost
		any_neighbor_country = {
			has_technology = tech_materials_breakthrough
			NOT = {
				has_ascension_perk = ap_enigmatic_engineering
			}
		}
	}
	modifier = {
		mult = 0
		OR = {
			has_technology = tech_materials_breakthrough
			has_tech_option = tech_industry_breakthrough
			has_tech_option = tech_voidcraft_breakthrough
			has_tech_option = tech_rocketry_breakthrough
			has_tech_option = tech_particles_breakthrough
			has_tech_option = tech_field_manipulation_breakthrough
			has_tech_option = tech_computing_breakthrough
			has_tech_option = tech_psionics_breakthrough
			has_tech_option = tech_biology_breakthrough
			has_tech_option = tech_statecraft_breakthrough
			has_tech_option = tech_new_worlds_breakthrough
			has_tech_option = tech_military_theory_breakthrough
			has_tech_option = tech_archeo_breakthrough
			has_country_flag = materials_breakthrough_rejected
		}
	}
	round = yes
}

industry_breakthrough_score = {
	base = 0
	add = value:research_leader_level
	divide = 2
	floor = yes
	modifier = {
		add = @research_philosophy
		OR = {
			has_policy_flag = research_engineering
			has_policy_flag = research_physics_min
			has_policy_flag = research_society_min
		}
	}
	modifier = {
		add = @research_philosophy_max
		has_policy_flag = research_engineering_max
	}
	modifier = {
		subtract = @philosophy_penalty
		OR = {
			has_policy_flag = research_physics
			has_policy_flag = research_society
		}		
	}
	modifier = {
		subtract = @research_philosophy
		has_policy_flag = research_engineering_min
	}
	min = 0
	add = value:research_traits_score
	modifier = {
		add = @tradition_boost
		OR = {
			has_tradition = tr_mercantile_adopt
			has_tradition = tr_synchronicity_adopt
		}		
	}
	modifier = {
		add = @tradition_boost
		OR = {
			has_tradition = tr_mercantile_finish
			has_tradition = tr_synchronicity_finish
		}
	}
	modifier = {
		add = @perk_boost
		has_ascension_perk = ap_one_vision
	}
	modifier = {
		add = @perk_boost
		has_ascension_perk = ap_consecrated_worlds
	}
	modifier = {
		add = @perk_boost
		OR = {
			has_ascension_perk = ap_galactic_wonders_utopia_and_megacorp
			has_ascension_perk = ap_galactic_wonders_utopia
			has_ascension_perk = ap_galactic_wonders_megacorp
		}
	}
	modifier = {
		add = @ethic_boost
		has_ethic = ethic_pacifist
	}
	modifier = {
		add = @fanatic_ethic_boost
		has_ethic = ethic_fanatic_pacifist
	}
	modifier = {
		add = @gestalt_boost
		is_gestalt = yes
	}	
	mult = value:research_score_multiplier|FOCUS|engineering|EXPERTISE|industry|BREAKTHROUGH|industry|
	modifier = {
		has_technology = tech_materials_breakthrough
		add = @similar_boost
	}
	modifier = {
		has_technology = tech_voidcraft_breakthrough
		add = @similar_boost
	}
	modifier = {
		has_technology = tech_rocketry_breakthrough
		add = @similar_boost
	}
	modifier = {
		add = @neighbor_boost
		any_neighbor_country = {
			has_technology = tech_industry_breakthrough
			NOT = {
				has_ascension_perk = ap_enigmatic_engineering
			}
		}
	}
	modifier = {
		mult = 0
		OR = {
			has_tech_option = tech_materials_breakthrough
			has_technology = tech_industry_breakthrough
			has_tech_option = tech_voidcraft_breakthrough
			has_tech_option = tech_rocketry_breakthrough
			has_tech_option = tech_particles_breakthrough
			has_tech_option = tech_field_manipulation_breakthrough
			has_tech_option = tech_computing_breakthrough
			has_tech_option = tech_psionics_breakthrough
			has_tech_option = tech_biology_breakthrough
			has_tech_option = tech_statecraft_breakthrough
			has_tech_option = tech_new_worlds_breakthrough
			has_tech_option = tech_military_theory_breakthrough
			has_tech_option = tech_archeo_breakthrough
			has_country_flag = industry_breakthrough_rejected
		}
	}
	round = yes
}

rocketry_breakthrough_score = {
	base = 0
	add = value:research_leader_level
	divide = 2
	floor = yes
	modifier = {
		add = @research_philosophy
		OR = {
			has_policy_flag = research_engineering
			has_policy_flag = research_physics_min
			has_policy_flag = research_society_min
		}
	}
	modifier = {
		add = @research_philosophy_max
		has_policy_flag = research_engineering_max
	}
	modifier = {
		subtract = @philosophy_penalty
		OR = {
			has_policy_flag = research_physics
			has_policy_flag = research_society
		}		
	}
	modifier = {
		subtract = @research_philosophy
		has_policy_flag = research_engineering_min
	}
	min = 0
	add = value:research_traits_score
	modifier = {
		add = @tradition_boost
		OR = {
			has_tradition = tr_domination_adopt 
			has_tradition = tr_versatility_adopt
		}
	}
	modifier = {
		add = @tradition_boost
		OR = {
			has_tradition = tr_domination_finish 
			has_tradition = tr_versatility_finish
		}
	}
	modifier = {
		add = @perk_boost
		has_ascension_perk = ap_nihilistic_acquisition
	}
	modifier = {
		add = @perk_boost
		has_ascension_perk = ap_galactic_force_projection
	}
	modifier = {
		add = @perk_boost
		has_ascension_perk = ap_become_the_crisis
	}
	modifier = {
		add = @ethic_boost
		has_ethic = ethic_militarist
	}
	modifier = {
		add = @fanatic_ethic_boost
		has_ethic = ethic_fanatic_militarist
	}
	modifier = {
		add = @gestalt_boost
		is_gestalt = yes
	}
	mult = value:research_score_multiplier|FOCUS|engineering|EXPERTISE|propulsion|BREAKTHROUGH|rocketry|
	modifier = {
		has_technology = tech_materials_breakthrough
		add = @similar_boost
	}
	modifier = {
		has_technology = tech_voidcraft_breakthrough
		add = @similar_boost
	}
	modifier = {
		has_technology = tech_industry_breakthrough
		add = @similar_boost
	}
	modifier = {
		add = @neighbor_boost
		any_neighbor_country = {
			has_technology = tech_rocketry_breakthrough
			NOT = {
				has_ascension_perk = ap_enigmatic_engineering
			}
		}
	}
	modifier = {
		mult = 0
		OR = {
			has_tech_option = tech_materials_breakthrough
			has_tech_option = tech_industry_breakthrough
			has_tech_option = tech_voidcraft_breakthrough
			has_technology = tech_rocketry_breakthrough
			has_tech_option = tech_particles_breakthrough
			has_tech_option = tech_field_manipulation_breakthrough
			has_tech_option = tech_computing_breakthrough
			has_tech_option = tech_psionics_breakthrough
			has_tech_option = tech_biology_breakthrough
			has_tech_option = tech_statecraft_breakthrough
			has_tech_option = tech_new_worlds_breakthrough
			has_tech_option = tech_military_theory_breakthrough
			has_tech_option = tech_archeo_breakthrough
			has_country_flag = rocketry_breakthrough_rejected
		}
	}
	round = yes
}


voidcraft_breakthrough_score = {
	base = 0
	add = value:research_leader_level
	divide = 2
	floor = yes
	modifier = {
		add = @research_philosophy
		OR = {
			has_policy_flag = research_engineering
			has_policy_flag = research_physics_min
			has_policy_flag = research_society_min
		}
	}
	modifier = {
		add = @research_philosophy_max
		has_policy_flag = research_engineering_max
	}
	modifier = {
		subtract = @philosophy_penalty
		OR = {
			has_policy_flag = research_physics
			has_policy_flag = research_society
		}		
	}
	modifier = {
		subtract = @research_philosophy
		has_policy_flag = research_engineering_min
	}
	min = 0
	add = value:research_traits_score
	modifier = {
		add = @tradition_boost
		OR = {
			has_tradition = tr_harmony_adopt 
			has_tradition = tr_cybernetics_adopt
			has_tradition = tr_cybernetics_assimilator_adopt
		}
	}
	modifier = {
		add = @tradition_boost
		OR = {
			has_tradition = tr_harmony_finish
			has_tradition = tr_cybernetics_finish
			has_tradition = tr_cybernetics_assimilator_finish
		}
	}
	modifier = {
		add = @perk_boost
		has_ascension_perk = ap_voidborn
	}
	modifier = {
		add = @perk_boost
		has_ascension_perk = ap_mastery_of_nature
	}
	modifier = {
		add = @perk_boost
		has_ascension_perk = ap_colossus
	}
	modifier = {
		add = @ethic_boost
		has_ethic = ethic_xenophobe
	}
	modifier = {
		add = @fanatic_ethic_boost
		has_ethic = ethic_fanatic_xenophobe
	}
	modifier = {
		add = @gestalt_boost
		is_gestalt = yes
	}
	mult = value:research_score_multiplier|FOCUS|engineering|EXPERTISE|voidcraft|BREAKTHROUGH|voidcraft|
	modifier = {
		has_technology = tech_materials_breakthrough
		add = @similar_boost
	}
	modifier = {
		has_technology = tech_industry_breakthrough
		add = @similar_boost
	}
	modifier = {
		has_technology = tech_rocketry_breakthrough
		add = @similar_boost
	}
	modifier = {
		add = @neighbor_boost
		any_neighbor_country = {
			has_technology = tech_voidcraft_breakthrough
			NOT = {
				has_ascension_perk = ap_enigmatic_engineering
			}
		}
	}
	modifier = {
		mult = 0
		OR = {
			has_tech_option = tech_materials_breakthrough
			has_tech_option = tech_industry_breakthrough
			has_technology = tech_voidcraft_breakthrough
			has_tech_option = tech_rocketry_breakthrough
			has_tech_option = tech_particles_breakthrough
			has_tech_option = tech_field_manipulation_breakthrough
			has_tech_option = tech_computing_breakthrough
			has_tech_option = tech_psionics_breakthrough
			has_tech_option = tech_biology_breakthrough
			has_tech_option = tech_statecraft_breakthrough
			has_tech_option = tech_new_worlds_breakthrough
			has_tech_option = tech_military_theory_breakthrough
			has_tech_option = tech_archeo_breakthrough
			has_country_flag = voidcraft_breakthrough_rejected
		}
	}
	round = yes
}


particles_breakthrough_score = {
	base = 0
	add = value:research_leader_level
	divide = 2
	floor = yes
	modifier = {
		add = @research_philosophy
		OR = {
			has_policy_flag = research_physics
			has_policy_flag = research_engineering_min
			has_policy_flag = research_society_min
		}
	}
	modifier = {
		add = @research_philosophy_max
		has_policy_flag = research_physics_max
	}
	modifier = {
		subtract = @philosophy_penalty
		OR = {
			has_policy_flag = research_engineering
			has_policy_flag = research_society
		}		
	}
	modifier = {
		subtract = @research_philosophy
		has_policy_flag = research_physics_min
	}
	min = 0
	add = value:research_traits_score
	modifier = {
		add = @tradition_boost
		OR = {
			has_tradition = tr_discovery_adopt
			has_tradition = tr_synchronicity_adopt
		}
	}
	modifier = {
		add = @tradition_boost
		OR = {
			has_tradition = tr_discovery_finish
			has_tradition = tr_synchronicity_finish
		}
	}	
	modifier = {
		add = @perk_boost
		has_ascension_perk = ap_galactic_contender
	}
	modifier = {
		add = @perk_boost
		has_ascension_perk = ap_universal_transactions
	}
	modifier = {
		add = @ethic_boost
		has_ethic = ethic_authoritarian
	}
	modifier = {
		add = @fanatic_ethic_boost
		has_ethic = ethic_fanatic_authoritarian
	}
	modifier = {
		add = @gestalt_boost
		is_gestalt = yes
	}
	mult = value:research_score_multiplier|FOCUS|physics|EXPERTISE|particles|BREAKTHROUGH|particles|
	modifier = {
		has_technology = tech_particles_breakthrough
		add = @similar_boost
	}
	modifier = {
		has_technology = tech_field_manipulation_breakthrough
		add = @similar_boost
	}
	modifier = {
		has_technology = tech_computing_breakthrough
		add = @similar_boost
	}
	modifier = {
		add = @neighbor_boost
		any_neighbor_country = {
			has_technology = tech_particles_breakthrough
			NOT = {
				has_ascension_perk = ap_enigmatic_engineering
			}
		}
	}
	modifier = {
		mult = 0
		OR = {
			has_tech_option = tech_materials_breakthrough
			has_tech_option = tech_industry_breakthrough
			has_tech_option = tech_voidcraft_breakthrough
			has_tech_option = tech_rocketry_breakthrough
			has_technology = tech_particles_breakthrough
			has_tech_option = tech_field_manipulation_breakthrough
			has_tech_option = tech_computing_breakthrough
			has_tech_option = tech_psionics_breakthrough
			has_tech_option = tech_biology_breakthrough
			has_tech_option = tech_statecraft_breakthrough
			has_tech_option = tech_new_worlds_breakthrough
			has_tech_option = tech_military_theory_breakthrough
			has_tech_option = tech_archeo_breakthrough
			has_country_flag = particles_breakthrough_rejected
		}
	}
	round = yes
}

field_manipulation_breakthrough_score = {
	base = 0
	add = value:research_leader_level
	divide = 2
	floor = yes
	modifier = {
		add = @research_philosophy
		OR = {
			has_policy_flag = research_physics
			has_policy_flag = research_engineering_min
			has_policy_flag = research_society_min
		}
	}
	modifier = {
		add = @research_philosophy_max
		has_policy_flag = research_physics_max
	}
	modifier = {
		subtract = @philosophy_penalty
		OR = {
			has_policy_flag = research_engineering
			has_policy_flag = research_society
		}		
	}
	modifier = {
		subtract = @research_philosophy
		has_policy_flag = research_physics_min
	}
	min = 0
	add = value:research_traits_score
	modifier = {
		add = @tradition_boost
		OR = {
			has_tradition = tr_unyielding_adopt
			has_tradition = tr_subterfuge_adopt
		}
	}
	modifier = {
		add = @tradition_boost
		OR = {
			has_tradition = tr_unyielding_finish
			has_tradition = tr_subterfuge_finish
		}
	}
	modifier = {
		add = @perk_boost
		has_ascension_perk = ap_grasp_the_void
	}
	modifier = {
		add = @perk_boost
		has_ascension_perk = ap_eternal_vigilance
	}
	modifier = {
		add = @ethic_boost
		OR = {
			has_ethic = ethic_pacifist
			has_ethic = ethic_spiritualist
		}		
	}
	modifier = {
		add = @fanatic_ethic_boost
		OR = {
			has_ethic = ethic_fanatic_pacifist
			has_ethic = ethic_fanatic_spiritualist
		}	
	}
	modifier = {
		add = @gestalt_boost
		is_gestalt = yes
	}
	mult = value:research_score_multiplier|FOCUS|physics|EXPERTISE|field_manipulation|BREAKTHROUGH|field_manipulation|
	modifier = {
		has_technology = tech_particles_breakthrough
		add = @similar_boost
	}
	modifier = {
		has_technology = tech_field_manipulation_breakthrough
		add = @similar_boost
	}
	modifier = {
		has_technology = tech_computing_breakthrough
		add = @similar_boost
	}
	modifier = {
		add = @neighbor_boost
		any_neighbor_country = {
			has_technology = tech_field_manipulation_breakthrough
			NOT = {
				has_ascension_perk = ap_enigmatic_engineering
			}
		}
	}
	modifier = {
		mult = 0
		OR = {
			has_tech_option = tech_materials_breakthrough
			has_tech_option = tech_industry_breakthrough
			has_tech_option = tech_voidcraft_breakthrough
			has_tech_option = tech_rocketry_breakthrough
			has_tech_option = tech_particles_breakthrough
			has_technology = tech_field_manipulation_breakthrough
			has_tech_option = tech_computing_breakthrough
			has_tech_option = tech_psionics_breakthrough
			has_tech_option = tech_biology_breakthrough
			has_tech_option = tech_statecraft_breakthrough
			has_tech_option = tech_new_worlds_breakthrough
			has_tech_option = tech_military_theory_breakthrough
			has_tech_option = tech_archeo_breakthrough
			has_country_flag = field_manipulation_breakthrough_rejected
		}
	}
	round = yes
}

computing_breakthrough_score = {
	base = 0
	add = value:research_leader_level
	divide = 2
	floor = yes
	modifier = {
		add = @research_philosophy
		OR = {
			has_policy_flag = research_physics
			has_policy_flag = research_engineering_min
			has_policy_flag = research_society_min
		}
	}
	modifier = {
		add = @research_philosophy_max
		has_policy_flag = research_physics_max
	}
	modifier = {
		subtract = @philosophy_penalty
		OR = {
			has_policy_flag = research_engineering
			has_policy_flag = research_society
		}		
	}
	modifier = {
		subtract = @research_philosophy
		has_policy_flag = research_physics_min
	}
	min = 0
	add = value:research_traits_score
	modifier = {
		add = @tradition_boost
		OR = {
			has_tradition = tr_versatility_adopt
			has_tradition = tr_aptitude_adopt
		}
	}
	modifier = {
		add = @tradition_boost
		OR = {
			has_tradition = tr_versatility_finish
			has_tradition = tr_aptitude_finish
		}
	}
	modifier = {
		add = @perk_boost
		OR = {
			has_ascension_perk = ap_the_flesh_is_weak
			has_ascension_perk = ap_organo_machine_interfacing
			has_ascension_perk = ap_organo_machine_interfacing_assimilator
		}
	}
	modifier = {
		add = @perk_boost
		OR = {
			has_ascension_perk = ap_synthetic_evolution
			has_ascension_perk = ap_synthetic_age
		}		
	}
	modifier = {
		add = @ethic_boost
		has_ethic = ethic_materialist
	}
	modifier = {
		add = @fanatic_ethic_boost
		has_ethic = ethic_fanatic_materialist
	}
	modifier = {
		add = @gestalt_boost
		is_gestalt = yes
	}
	mult = value:research_score_multiplier|FOCUS|physics|EXPERTISE|computing|BREAKTHROUGH|computing|
	modifier = {
		has_technology = tech_particles_breakthrough
		add = @similar_boost
	}
	modifier = {
		has_technology = tech_field_manipulation_breakthrough
		add = @similar_boost
	}
	modifier = {
		has_technology = tech_computing_breakthrough
		add = @similar_boost
	}
	modifier = {
		add = @neighbor_boost
		any_neighbor_country = {
			has_technology = tech_computing_breakthrough
			NOT = {
				has_ascension_perk = ap_enigmatic_engineering
			}
		}
	}
	modifier = {
		mult = 0
		OR = {
			has_tech_option = tech_materials_breakthrough
			has_tech_option = tech_industry_breakthrough
			has_tech_option = tech_voidcraft_breakthrough
			has_tech_option = tech_rocketry_breakthrough
			has_tech_option = tech_particles_breakthrough
			has_tech_option = tech_field_manipulation_breakthrough
			has_technology = tech_computing_breakthrough
			has_tech_option = tech_psionics_breakthrough
			has_tech_option = tech_biology_breakthrough
			has_tech_option = tech_statecraft_breakthrough
			has_tech_option = tech_new_worlds_breakthrough
			has_tech_option = tech_military_theory_breakthrough
			has_tech_option = tech_archeo_breakthrough
			has_country_flag = computing_breakthrough_rejected
		}
	}
	round = yes
}

biology_breakthrough_score = {
	base = 0
	add = value:research_leader_level
	divide = 2
	floor = yes
	modifier = {
		add = @research_philosophy
		OR = {
			has_policy_flag = research_society
			has_policy_flag = research_engineering_min
			has_policy_flag = research_physics_min
		}
	}
	modifier = {
		add = @research_philosophy_max
		has_policy_flag = research_society_max
	}
	modifier = {
		subtract = @philosophy_penalty
		OR = {
			has_policy_flag = research_engineering
			has_policy_flag = research_physics
		}		
	}
	modifier = {
		subtract = @research_philosophy
		has_policy_flag = research_society_min
	}
	min = 0
	add = value:research_traits_score
	modifier = {
		add = @tradition_boost
		OR = {
			has_tradition = tr_genetics_adopt
			has_tradition = tr_adaptability_adopt 
		}
	}
	modifier = {
		add = @tradition_boost
		OR = {
			has_tradition = tr_genetics_finish
			has_tradition = tr_adaptability_finish 
		}
	}
	modifier = {
		add = @perk_boost
		has_ascension_perk = ap_engineered_evolution
	}
	modifier = {
		add = @perk_boost
		has_ascension_perk = ap_xeno_compatibility
	}
	modifier = {
		add = @ethic_boost
		has_ethic = ethic_xenophile
	}
	modifier = {
		add = @fanatic_ethic_boost
		has_ethic = ethic_fanatic_xenophile
	}
	modifier = {
		add = @gestalt_boost
		is_gestalt = yes
	}
	mult = value:research_score_multiplier|FOCUS|society|EXPERTISE|biology|BREAKTHROUGH|biology|
	modifier = {
		has_technology = tech_biology_breakthrough
		add = @similar_boost
	}
	modifier = {
		has_technology = tech_statecraft_breakthrough
		add = @similar_boost
	}
	modifier = {
		has_technology = tech_military_theory_breakthrough
		add = @similar_boost
	}
	modifier = {
		has_technology = tech_new_worlds_breakthrough
		add = @similar_boost
	}
	modifier = {
		add = @neighbor_boost
		any_neighbor_country = {
			has_technology = tech_biology_breakthrough
			NOT = {
				has_ascension_perk = ap_enigmatic_engineering
			}
		}
	}
	modifier = {
		mult = 0
		OR = {
			has_tech_option = tech_materials_breakthrough
			has_tech_option = tech_industry_breakthrough
			has_tech_option = tech_voidcraft_breakthrough
			has_tech_option = tech_rocketry_breakthrough
			has_tech_option = tech_particles_breakthrough
			has_tech_option = tech_field_manipulation_breakthrough
			has_tech_option = tech_computing_breakthrough
			has_tech_option = tech_psionics_breakthrough
			has_technology = tech_biology_breakthrough
			has_tech_option = tech_statecraft_breakthrough
			has_tech_option = tech_new_worlds_breakthrough
			has_tech_option = tech_military_theory_breakthrough
			has_tech_option = tech_archeo_breakthrough
			has_country_flag = biology_breakthrough_rejected
		}
	}
	round = yes
}

statecraft_breakthrough_score = {
	base = 0
	add = value:research_leader_level
	divide = 2
	floor = yes
	modifier = {
		add = @research_philosophy
		OR = {
			has_policy_flag = research_society
			has_policy_flag = research_engineering_min
			has_policy_flag = research_physics_min
		}
	}
	modifier = {
		add = @research_philosophy_max
		has_policy_flag = research_society_max
	}
	modifier = {
		subtract = @philosophy_penalty
		OR = {
			has_policy_flag = research_engineering
			has_policy_flag = research_physics
		}		
	}
	modifier = {
		subtract = @research_philosophy
		has_policy_flag = research_society_min
	}
	min = 0
	add = value:research_traits_score
	modifier = {
		add = @tradition_boost
		OR = {
			has_tradition = tr_diplomacy_adopt 
			has_tradition = tr_politics_adopt
		}
	}
	modifier = {
		add = @tradition_boost
		OR = {
			has_tradition = tr_diplomacy_finish 
			has_tradition =  tr_politics_finish
		}
	}
	modifier = {
		add = @perk_boost
		has_ascension_perk = ap_imperial_prerogative
	}
	modifier = {
		add = @perk_boost
		has_ascension_perk = ap_executive_vigor
	}
	modifier = {
		add = @perk_boost
		has_ascension_perk = ap_shared_destiny
	}
	modifier = {
		add = @ethic_boost
		OR = { 
			has_ethic = ethic_egalitarian
			has_ethic = ethic_authoritarian 
		}
	}
	modifier = {
		add = @fanatic_ethic_boost
		OR = { 
			has_ethic = ethic_fanatic_egalitarian
			has_ethic = ethic_fanatic_authoritarian 
		}
	}
	modifier = {
		add = @gestalt_boost
		is_gestalt = yes
	}
	mult = value:research_score_multiplier|FOCUS|society|EXPERTISE|statecraft|BREAKTHROUGH|statecraft|
	modifier = {
		has_technology = tech_biology_breakthrough
		add = @similar_boost
	}
	modifier = {
		has_technology = tech_statecraft_breakthrough
		add = @similar_boost
	}
	modifier = {
		has_technology = tech_military_theory_breakthrough
		add = @similar_boost
	}
	modifier = {
		has_technology = tech_new_worlds_breakthrough
		add = @similar_boost
	}
	modifier = {
		add = @neighbor_boost
		any_neighbor_country = {
			has_technology = tech_statecraft_breakthrough
			NOT = {
				has_ascension_perk = ap_enigmatic_engineering
			}
		}
	}
	modifier = {
		mult = 0
		OR = {
			has_valid_civic = civic_hive_devouring_swarm
			has_valid_civic = civic_fanatic_purifiers 
			has_valid_civic = civic_machine_terminator
			has_valid_civic = civic_machine_assimilator
		}
	}
	modifier = {
		mult = 0
		OR = {
			has_tech_option = tech_materials_breakthrough
			has_tech_option = tech_industry_breakthrough
			has_tech_option = tech_voidcraft_breakthrough
			has_tech_option = tech_rocketry_breakthrough
			has_tech_option = tech_particles_breakthrough
			has_tech_option = tech_field_manipulation_breakthrough
			has_tech_option = tech_computing_breakthrough
			has_tech_option = tech_psionics_breakthrough
			has_tech_option = tech_biology_breakthrough
			has_technology = tech_statecraft_breakthrough
			has_tech_option = tech_new_worlds_breakthrough
			has_tech_option = tech_military_theory_breakthrough
			has_tech_option = tech_archeo_breakthrough
			has_country_flag = statecraft_breakthrough_rejected
		}
	}
	round = yes
}

military_theory_breakthrough_score = {
	base = 0
	add = value:research_leader_level
	divide = 2
	floor = yes
	modifier = {
		add = @research_philosophy
		OR = {
			has_policy_flag = research_society
			has_policy_flag = research_engineering_min
			has_policy_flag = research_physics_min
		}
	}
	modifier = {
		add = @research_philosophy_max
		has_policy_flag = research_society_max
	}
	modifier = {
		subtract = @philosophy_penalty
		OR = {
			has_policy_flag = research_engineering
			has_policy_flag = research_physics
		}		
	}
	modifier = {
		subtract = @research_philosophy
		has_policy_flag = research_society_min
	}
	min = 0
	add = value:research_traits_score
	modifier = {
		add = @tradition_boost
		OR = {
			has_tradition = tr_supremacy_adopt
			has_tradition = tr_domination_adopt 
		}		
	}
	modifier = {
		add = @tradition_boost
		OR = {
			has_tradition = tr_supremacy_finish
			has_tradition = tr_domination_finish 
		}
	}
	modifier = {
		add = @perk_boost
		has_ascension_perk = ap_defender_of_the_galaxy
	}
	modifier = {
		add = @perk_boost
		has_ascension_perk = ap_interstellar_dominion
	}
	modifier = {
		add = @perk_boost
		has_ascension_perk = ap_lord_of_war
	}
	modifier = {
		add = @ethic_boost
		OR = { 
			has_ethic = ethic_militarist
			has_ethic = ethic_xenophobe
		}
	}
	modifier = {
		add = @fanatic_ethic_boost
		OR = { 
			has_ethic = ethic_fanatic_militarist
			has_ethic = ethic_fanatic_xenophobe 
		}
	}
	modifier = {
		add = @gestalt_boost
		is_gestalt = yes
	}
	mult = value:research_score_multiplier|FOCUS|society|EXPERTISE|military_theory|BREAKTHROUGH|military_theory|
	modifier = {
		has_technology = tech_biology_breakthrough
		add = @similar_boost
	}
	modifier = {
		has_technology = tech_statecraft_breakthrough
		add = @similar_boost
	}
	modifier = {
		has_technology = tech_military_theory_breakthrough
		add = @similar_boost
	}
	modifier = {
		has_technology = tech_new_worlds_breakthrough
		add = @similar_boost
	}
	modifier = {
		add = @neighbor_boost
		any_neighbor_country = {
			has_technology = tech_military_theory_breakthrough
			NOT = {
				has_ascension_perk = ap_enigmatic_engineering
			}
		}
	}
	modifier = {
		mult = 0
		OR = {
			has_tech_option = tech_materials_breakthrough
			has_tech_option = tech_industry_breakthrough
			has_tech_option = tech_voidcraft_breakthrough
			has_tech_option = tech_rocketry_breakthrough
			has_tech_option = tech_particles_breakthrough
			has_tech_option = tech_field_manipulation_breakthrough
			has_tech_option = tech_computing_breakthrough
			has_tech_option = tech_psionics_breakthrough
			has_tech_option = tech_biology_breakthrough
			has_tech_option = tech_statecraft_breakthrough
			has_tech_option = tech_new_worlds_breakthrough
			has_technology = tech_military_theory_breakthrough
			has_tech_option = tech_archeo_breakthrough
			has_country_flag = military_theory_breakthrough_rejected
		}
	}
	round = yes
}

psionics_breakthrough_score = {
	base = 0
	add = value:research_leader_level
	divide = 2
	floor = yes
	#No Research Philosophy boost for Psionics
	add = value:research_traits_score
	modifier = {
		add = @tradition_boost
		OR = {
			has_tradition = tr_subterfuge_adopt 
			has_tradition = tr_statecraft_adopt
		}		
	}
	modifier = {
		add = @tradition_boost
		OR = {
			has_tradition = tr_subterfuge_finish
			has_tradition = tr_statecraft_finish
		}
	}
	modifier = {
		add = @perk_boost
		has_ascension_perk = ap_transcendent_learning
	}
	modifier = {
		add = @ethic_boost
		has_ethic = ethic_spiritualist
	}
	modifier = {
		add = @fanatic_ethic_boost
		has_ethic = ethic_fanatic_spiritualist
	}
	modifier = {
		add = @gestalt_boost
		is_gestalt = yes
	}
	mult = value:research_score_multiplier|FOCUS|none|EXPERTISE|psionics|BREAKTHROUGH|psionics|
	modifier = {
		add = @neighbor_boost
		any_neighbor_country = {
			has_technology = tech_psionics_breakthrough
			NOT = {
				has_ascension_perk = ap_enigmatic_engineering
			}
		}
	}
	modifier = {
		mult = 0
		OR = {
			has_tech_option = tech_materials_breakthrough
			has_tech_option = tech_industry_breakthrough
			has_tech_option = tech_voidcraft_breakthrough
			has_tech_option = tech_rocketry_breakthrough
			has_tech_option = tech_particles_breakthrough
			has_tech_option = tech_field_manipulation_breakthrough
			has_tech_option = tech_computing_breakthrough
			has_technology = tech_psionics_breakthrough
			has_tech_option = tech_biology_breakthrough
			has_tech_option = tech_statecraft_breakthrough
			has_tech_option = tech_new_worlds_breakthrough
			has_tech_option = tech_military_theory_breakthrough
			has_tech_option = tech_archeo_breakthrough
			has_country_flag = psionics_breakthrough_rejected
		}
	}
	round = yes
}

new_worlds_breakthrough_score = {
	base = 0
	add = value:research_leader_level
	divide = 2
	floor = yes
	modifier = {
		add = @research_philosophy
		OR = {
			has_policy_flag = research_society
			has_policy_flag = research_engineering_min
			has_policy_flag = research_physics_min
		}
	}
	modifier = {
		add = @research_philosophy_max
		has_policy_flag = research_society_max
	}
	modifier = {
		subtract = @philosophy_penalty
		OR = {
			has_policy_flag = research_engineering
			has_policy_flag = research_physics
		}		
	}
	modifier = {
		subtract = @research_philosophy
		has_policy_flag = research_society_min
	}
	min = 0
	add = value:research_traits_score
	modifier = {
		add = @tradition_boost
		OR = {
			has_tradition = tr_expansion_adopt 
			has_tradition = tr_cybernetics_adopt
			has_tradition = tr_cybernetics_assimilator_adopt
		}
	}
	modifier = {
		add = @tradition_boost
		OR = {
			has_tradition = tr_expansion_finish
			has_tradition = tr_cybernetics_finish
			has_tradition = tr_cybernetics_assimilator_finish
		}
	}
	modifier = {
		add = @perk_boost
		has_ascension_perk = ap_world_shaper
	}
	modifier = {
		add = @perk_boost
		has_ascension_perk = ap_hydrocentric
	}
	modifier = {
		add = @perk_boost
		has_ascension_perk = ap_detox
	}
	modifier = {
		add = @perk_boost
		has_ascension_perk = ap_hive_worlds
	}
	modifier = {
		add = @ethic_boost
		OR = {
			has_ethic = ethic_xenophile
			has_ethic = ethic_egalitarian
		}		
	}
	modifier = {
		add = @fanatic_ethic_boost
		OR = {
			has_ethic = ethic_fanatic_xenophile
			has_ethic = ethic_fanatic_egalitarian
		}
	}
	modifier = {
		add = @gestalt_boost
		is_gestalt = yes
	}
	mult = value:research_score_multiplier|FOCUS|society|EXPERTISE|new_worlds|BREAKTHROUGH|new_worlds|
	modifier = {
		has_technology = tech_biology_breakthrough
		add = @similar_boost
	}
	modifier = {
		has_technology = tech_statecraft_breakthrough
		add = @similar_boost
	}
	modifier = {
		has_technology = tech_military_theory_breakthrough
		add = @similar_boost
	}
	modifier = {
		has_technology = tech_new_worlds_breakthrough
		add = @similar_boost
	}
	modifier = {
		add = @neighbor_boost
		any_neighbor_country = {
			has_technology = tech_new_worlds_breakthrough
			NOT = {
				has_ascension_perk = ap_enigmatic_engineering
			}
		}
	}
	modifier = {
		mult = 0
		OR = {
			has_tech_option = tech_materials_breakthrough
			has_tech_option = tech_industry_breakthrough
			has_tech_option = tech_voidcraft_breakthrough
			has_tech_option = tech_rocketry_breakthrough
			has_tech_option = tech_particles_breakthrough
			has_tech_option = tech_field_manipulation_breakthrough
			has_tech_option = tech_computing_breakthrough
			has_tech_option = tech_psionics_breakthrough
			has_tech_option = tech_biology_breakthrough
			has_tech_option = tech_statecraft_breakthrough
			has_technology = tech_new_worlds_breakthrough
			has_tech_option = tech_military_theory_breakthrough
			has_tech_option = tech_archeo_breakthrough
			has_country_flag = new_worlds_breakthrough_rejected
		}
	}
}

archeo_breakthrough_score = {
	base = 0
	add = value:research_leader_level
	divide = 2
	floor = yes
	modifier = {
		add = @research_philosophy
		OR = {
			has_policy_flag = research_society
			has_policy_flag = research_engineering_min
			has_policy_flag = research_physics_min
		}
	}
	modifier = {
		add = @research_philosophy_max
		has_policy_flag = research_society_max
	}
	modifier = {
		subtract = @philosophy_penalty
		OR = {
			has_policy_flag = research_engineering
			has_policy_flag = research_physics
		}		
	}
	modifier = {
		subtract = @research_philosophy
		has_policy_flag = research_society_min
	}
	min = 0
	modifier = {
		add = @scientist_genius
		any_owned_leader = {
			is_councilor = yes
			has_trait = leader_trait_psionic
		}
	}
	add = value:research_traits_score
	modifier = {
		add = @tradition_boost
		OR = {
			has_tradition = tr_harmony_adopt
			has_tradition = tr_psionics_adopt
		}
	}
	modifier = {
		add = @tradition_boost
		OR = {
			has_tradition = tr_harmony_finish
			has_tradition = tr_psionics_finish
		}
	}
	modifier = {
		add = @perk_boost
		has_ascension_perk = ap_mind_over_matter
	}
	modifier = {
		add = @perk_boost
		has_ascension_perk = ap_archaeoengineers
	}
	modifier = {
		add = @perk_boost
		has_ascension_perk = ap_enigmatic_engineering
	}
	modifier = {
		add = @ethic_boost
		has_ethic = ethic_materialist
	}
	modifier = {
		add = @fanatic_ethic_boost
		has_ethic = ethic_fanatic_materialist
	}
	modifier = {
		add = @gestalt_boost
		is_gestalt = yes
	}
	mult = value:research_score_multiplier|FOCUS|none|EXPERTISE|archaeostudies|BREAKTHROUGH|archeo|
	modifier = {
		add = @neighbor_boost
		any_neighbor_country = {
			has_technology = tech_archeo_breakthrough
			NOT = {
				has_ascension_perk = ap_enigmatic_engineering
			}
		}
	}
	modifier = {
		mult = 0
		OR = {
			has_tech_option = tech_materials_breakthrough
			has_tech_option = tech_industry_breakthrough
			has_tech_option = tech_voidcraft_breakthrough
			has_tech_option = tech_rocketry_breakthrough
			has_tech_option = tech_particles_breakthrough
			has_tech_option = tech_field_manipulation_breakthrough
			has_tech_option = tech_computing_breakthrough
			has_tech_option = tech_psionics_breakthrough
			has_tech_option = tech_biology_breakthrough
			has_tech_option = tech_statecraft_breakthrough
			has_tech_option = tech_new_worlds_breakthrough
			has_tech_option = tech_military_theory_breakthrough
			has_technology = tech_archeo_breakthrough
			has_country_flag = archeo_breakthrough_rejected
		}
	}
	round = yes
}