
ag_psionic_conduit_minus_10_$ag_index$ = {
    potential = { hidden_trigger = { always = yes } }
    allow = { hidden_trigger = {
        exists = event_target:ag_psionic_conduit_megastructure
        event_target:ag_psionic_conduit_megastructure = { NOT = { has_megastructure_flag = ag_psionic_conduit_no_produce_$ag_index$ } NAND = {
            is_variable_set = ag_alpha_psionic_conduit_$ag_index$_spend
            check_variable = { which = ag_alpha_psionic_conduit_$ag_index$_spend value <= 0 }
        } }
    } }
    effect = { hidden_effect = { event_target:ag_psionic_conduit_megastructure = {
		subtract_variable = { which = ag_alpha_psionic_conduit_stability value = value:ag_alpha_psionic_conduit_stability_buff }
        if = { limit = { NOT = { is_variable_set = ag_alpha_psionic_conduit_$ag_index$_spend } } set_variable = { which = ag_alpha_psionic_conduit_$ag_index$_spend value = 0 } }
        else = {
			if = {
				limit = { check_variable = { which = ag_alpha_psionic_conduit_$ag_index$_spend value < 10 } }
				subtract_variable = { which = ag_alpha_psionic_conduit_used_capacity value = ag_alpha_psionic_conduit_$ag_index$_spend }
				set_variable = { which = ag_alpha_psionic_conduit_$ag_index$_spend value = 0 }
			}
			else = {
				subtract_variable = { which = ag_alpha_psionic_conduit_$ag_index$_spend value = 10 }
				subtract_variable = { which = ag_alpha_psionic_conduit_used_capacity value = 10 }
			}
        }
        set_variable = { which = ag_alpha_psionic_conduit_stability_expectation value = value:ag_alpha_psionic_conduit_stability_buff }
		change_variable = { which = ag_alpha_psionic_conduit_stability value = value:ag_alpha_psionic_conduit_stability_buff }
		ag_alpha_psionic_conduit_refresh = yes
    } } }
}
ag_psionic_conduit_minus_1_$ag_index$ = {
    potential = { hidden_trigger = { always = yes } }
    allow = { hidden_trigger = {
        exists = event_target:ag_psionic_conduit_megastructure
        event_target:ag_psionic_conduit_megastructure = { NOT = { has_megastructure_flag = ag_psionic_conduit_no_produce_$ag_index$ } NAND = {
            is_variable_set = ag_alpha_psionic_conduit_$ag_index$_spend
            check_variable = { which = ag_alpha_psionic_conduit_$ag_index$_spend value <= 0 }
        } }
    } }
    effect = { hidden_effect = { event_target:ag_psionic_conduit_megastructure = {
		subtract_variable = { which = ag_alpha_psionic_conduit_stability value = value:ag_alpha_psionic_conduit_stability_buff }
        if = { limit = { NOT = { is_variable_set = ag_alpha_psionic_conduit_$ag_index$_spend } } set_variable = { which = ag_alpha_psionic_conduit_$ag_index$_spend value = 0 } }
        else = {
            subtract_variable = { which = ag_alpha_psionic_conduit_$ag_index$_spend value = 1 }
			subtract_variable = { which = ag_alpha_psionic_conduit_used_capacity value = 1 }
        }
        set_variable = { which = ag_alpha_psionic_conduit_stability_expectation value = value:ag_alpha_psionic_conduit_stability_buff }
		change_variable = { which = ag_alpha_psionic_conduit_stability value = value:ag_alpha_psionic_conduit_stability_buff }
		ag_alpha_psionic_conduit_refresh = yes
    } } }
}
ag_psionic_conduit_plus_1_$ag_index$ = {
    potential = { hidden_trigger = { always = yes } }
    allow = { hidden_trigger = {
        exists = event_target:ag_psionic_conduit_megastructure
        event_target:ag_psionic_conduit_megastructure = { NOT = { has_megastructure_flag = ag_psionic_conduit_no_produce_$ag_index$ } NOR = {
			AND = {
				is_variable_set = ag_alpha_psionic_conduit_$ag_index$_spend
				check_variable = { which = ag_alpha_psionic_conduit_$ag_index$_spend value >= value:ag_alpha_psionic_conduit_capacity }
			}
			AND = {
				is_variable_set = ag_alpha_psionic_conduit_used_capacity
				check_variable = { which = ag_alpha_psionic_conduit_used_capacity value >= value:ag_alpha_psionic_conduit_capacity }
			}
        } }
    } }
    effect = { hidden_effect = { event_target:ag_psionic_conduit_megastructure = {
		subtract_variable = { which = ag_alpha_psionic_conduit_stability value = value:ag_alpha_psionic_conduit_stability_buff }
        if = {
			limit = {
				NOT = { is_variable_set = ag_alpha_psionic_conduit_$ag_index$_spend }
				check_variable = { which = ag_alpha_psionic_conduit_used_capacity value < value:ag_alpha_psionic_conduit_capacity }
			}
			set_variable = { which = ag_alpha_psionic_conduit_$ag_index$_spend value = 1 }
		}
        else = { change_variable = { which = ag_alpha_psionic_conduit_$ag_index$_spend value = 1 } }
		change_variable = { which = ag_alpha_psionic_conduit_used_capacity value = 1 }
        set_variable = { which = ag_alpha_psionic_conduit_stability_expectation value = value:ag_alpha_psionic_conduit_stability_buff }
		change_variable = { which = ag_alpha_psionic_conduit_stability value = value:ag_alpha_psionic_conduit_stability_buff }
		ag_alpha_psionic_conduit_refresh = yes
    } } }
}
ag_psionic_conduit_plus_10_$ag_index$ = {
    potential = { hidden_trigger = { always = yes } }
    allow = { hidden_trigger = {
        exists = event_target:ag_psionic_conduit_megastructure
        event_target:ag_psionic_conduit_megastructure = { NOT = { has_megastructure_flag = ag_psionic_conduit_no_produce_$ag_index$ } NOR = {
			AND = {
				is_variable_set = ag_alpha_psionic_conduit_$ag_index$_spend
				check_variable = { which = ag_alpha_psionic_conduit_$ag_index$_spend value >= value:ag_alpha_psionic_conduit_capacity }
			}
			AND = {
				is_variable_set = ag_alpha_psionic_conduit_used_capacity
				check_variable = { which = ag_alpha_psionic_conduit_used_capacity value >= value:ag_alpha_psionic_conduit_capacity }
			}
        } }
    } }
    effect = { hidden_effect = { event_target:ag_psionic_conduit_megastructure = {
		subtract_variable = { which = ag_alpha_psionic_conduit_stability value = value:ag_alpha_psionic_conduit_stability_buff }
        if = {
			limit = { NOT = { is_variable_set = ag_alpha_psionic_conduit_$ag_index$_spend } }
			if = {
				limit = { check_variable_arithmetic = { which = ag_alpha_psionic_conduit_used_capacity add = 10 value <= value:ag_alpha_psionic_conduit_capacity } }
				set_variable = { which = ag_alpha_psionic_conduit_$ag_index$_spend value = 10 }
				change_variable = { which = ag_alpha_psionic_conduit_used_capacity value = 10 }
			}
			else = {
				set_variable = { which = ag_alpha_psionic_conduit_tmp value = value:ag_alpha_psionic_conduit_capacity }
				subtract_variable = { which = ag_alpha_psionic_conduit_tmp value = ag_alpha_psionic_conduit_used_capacity }
				set_variable = { which = ag_alpha_psionic_conduit_$ag_index$_spend value = ag_alpha_psionic_conduit_tmp }
				set_variable = { which = ag_alpha_psionic_conduit_used_capacity value = value:ag_alpha_psionic_conduit_capacity }
				clear_variable = ag_alpha_psionic_conduit_tmp
			}
		}
        else = {
			if = {
				limit = {
					check_variable_arithmetic = { which = ag_alpha_psionic_conduit_$ag_index$_spend add = 10 value <= value:ag_alpha_psionic_conduit_capacity }
					check_variable_arithmetic = { which = ag_alpha_psionic_conduit_used_capacity add = 10 value <= value:ag_alpha_psionic_conduit_capacity }
				}
				change_variable = { which = ag_alpha_psionic_conduit_$ag_index$_spend value = 10 }
				change_variable = { which = ag_alpha_psionic_conduit_used_capacity value = 10 }
			}
			else = {
				set_variable = { which = ag_alpha_psionic_conduit_tmp value = value:ag_alpha_psionic_conduit_capacity }
				if = {
					limit = { check_variable = { which = ag_alpha_psionic_conduit_$ag_index$_spend value < ag_alpha_psionic_conduit_used_capacity } }
					subtract_variable = { which = ag_alpha_psionic_conduit_tmp value = ag_alpha_psionic_conduit_used_capacity }
					change_variable = { which = ag_alpha_psionic_conduit_$ag_index$_spend value = ag_alpha_psionic_conduit_tmp }
					set_variable = { which = ag_alpha_psionic_conduit_used_capacity value = value:ag_alpha_psionic_conduit_capacity }
				}
				else_if = {
					limit = { check_variable = { which = ag_alpha_psionic_conduit_$ag_index$_spend value > ag_alpha_psionic_conduit_used_capacity } }
					subtract_variable = { which = ag_alpha_psionic_conduit_tmp value = ag_alpha_psionic_conduit_$ag_index$_spend }
					change_variable = { which = ag_alpha_psionic_conduit_used_capacity value = ag_alpha_psionic_conduit_tmp }
					set_variable = { which = ag_alpha_psionic_conduit_$ag_index$_spend value = value:ag_alpha_psionic_conduit_capacity }
				}
				else_if = {
					limit = { always = yes }
					set_variable = { which = ag_alpha_psionic_conduit_used_capacity value = value:ag_alpha_psionic_conduit_capacity }
					set_variable = { which = ag_alpha_psionic_conduit_$ag_index$_spend value = value:ag_alpha_psionic_conduit_capacity }
				}
				clear_variable = ag_alpha_psionic_conduit_tmp
			}
        }
        set_variable = { which = ag_alpha_psionic_conduit_stability_expectation value = value:ag_alpha_psionic_conduit_stability_buff }
		change_variable = { which = ag_alpha_psionic_conduit_stability value = value:ag_alpha_psionic_conduit_stability_buff }
		ag_alpha_psionic_conduit_refresh = yes
    } } }
}
ag_psionic_conduit_desc_perc_$ag_index$ = {
    potential = { hidden_trigger = {
        exists = event_target:ag_psionic_conduit_megastructure
        event_target:ag_psionic_conduit_megastructure = {
			NOT = { has_megastructure_flag = ag_psionic_conduit_no_produce_$ag_index$ }
            is_variable_set = ag_alpha_psionic_conduit_$ag_index$_spend
        }
    } }
    allow = { hidden_trigger = { always = yes } }
    effect = { custom_tooltip = "ag_alpha.122.option.tooltip" hidden_effect = { ag_alpha_psionic_conduit_produce_switch_alt = { ag_resource = $ag_index$ } } }
}
ag_psionic_conduit_desc_perc_$ag_index$_empty = {
    potential = { hidden_trigger = {
        exists = event_target:ag_psionic_conduit_megastructure
        event_target:ag_psionic_conduit_megastructure = { OR = {
			has_megastructure_flag = ag_psionic_conduit_no_produce_$ag_index$
			NOT = { is_variable_set = ag_alpha_psionic_conduit_$ag_index$_spend }
		} }
    } }
    allow = { hidden_trigger = { always = yes } }
    effect = { custom_tooltip = "ag_alpha.122.option.tooltip" hidden_effect = { ag_alpha_psionic_conduit_produce_switch_alt = { ag_resource = $ag_index$ } } }
}
ag_psionic_conduit_desc_exp_$ag_index$ = {
    potential = { hidden_trigger = {
        exists = event_target:ag_psionic_conduit_megastructure
        event_target:ag_psionic_conduit_megastructure = {
			NOT = { has_megastructure_flag = ag_psionic_conduit_no_produce_$ag_index$ }
            is_variable_set = ag_alpha_psionic_conduit_$ag_index$_expectation
        }
    } }
    allow = { hidden_trigger = { always = yes } }
    effect = { custom_tooltip = "ag_alpha.122.option.tooltip" hidden_effect = { ag_alpha_psionic_conduit_produce_switch_alt = { ag_resource = $ag_index$ } } }
}
ag_psionic_conduit_desc_exp_$ag_index$_empty = {
    potential = { hidden_trigger = {
        exists = event_target:ag_psionic_conduit_megastructure
        event_target:ag_psionic_conduit_megastructure = { OR = {
			has_megastructure_flag = ag_psionic_conduit_no_produce_$ag_index$
			NOT = { is_variable_set = ag_alpha_psionic_conduit_$ag_index$_expectation }
		} }
    } }
    allow = { hidden_trigger = { always = yes } }
    effect = { custom_tooltip = "ag_alpha.122.option.tooltip" hidden_effect = { ag_alpha_psionic_conduit_produce_switch_alt = { ag_resource = $ag_index$ } } }
}
ag_psionic_conduit_icon_$ag_index$ = {
    potential = { hidden_trigger = { always = yes } }
    allow = { hidden_trigger = {
        exists = event_target:ag_psionic_conduit_megastructure
        event_target:ag_psionic_conduit_megastructure = { NOT = { has_megastructure_flag = ag_psionic_conduit_no_produce_$ag_index$ } }
	} }
    effect = { custom_tooltip = ag_alpha.122.$ag_index$.tooltip }
}
