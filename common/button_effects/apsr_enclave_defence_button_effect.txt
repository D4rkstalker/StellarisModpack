# Приписки:
# d - обычная империя (не гештальт)
# g - коллективный разум (рой)
# m - механическая империя (машинный разум)



################################################################
##### ФОН

# Для роя
GFX_apsr_enclave_defence_picture_hive = {
	potential = {
		has_authority = auth_hive_mind
	}
	allow = {
		always = yes
	}
	effect = {
	}
}

# Для машин
GFX_apsr_enclave_defence_picture_machine = {
	potential = {
		has_authority = auth_machine_intelligence
	}
	allow = {
		always = yes
	}
	effect = {
	}
}
	

# Для остальных
GFX_apsr_enclave_defence_picture_all = {
	potential = {
		AND = {
			NOT = {
				has_authority = auth_hive_mind
			}
			NOT = {
				has_authority = auth_machine_intelligence
			}
		}
	}
	allow = {
		always = yes
	}
	effect = {
	}
}



################################################################
##### УРОВЕНЬ 0

# условие показа пока не выбрано любое улучшение
apsr_enclave_defence_button_00 = {
	potential = {
		NOT = {
			OR = {
				has_country_flag = apsr_enclave_defence_button_01_pressed
				has_country_flag = apsr_enclave_defence_button_02_pressed
				has_country_flag = apsr_enclave_defence_button_03_pressed
				has_country_flag = apsr_enclave_defence_button_04_pressed
				has_country_flag = apsr_enclave_defence_button_05_pressed
				has_country_flag = apsr_enclave_defence_button_06_pressed
				has_country_flag = apsr_enclave_defence_button_07_pressed
				has_country_flag = apsr_enclave_defence_button_08_pressed
				has_country_flag = apsr_enclave_defence_button_09_pressed
				has_country_flag = apsr_enclave_defence_button_10_pressed
				has_country_flag = apsr_enclave_defence_button_11_pressed
				has_country_flag = apsr_enclave_defence_button_12_pressed
				has_country_flag = apsr_enclave_defence_button_13_pressed
				has_country_flag = apsr_enclave_defence_button_14_pressed
				has_country_flag = apsr_enclave_defence_button_15_pressed
				has_country_flag = apsr_enclave_defence_button_16_pressed
				has_country_flag = apsr_enclave_defence_button_17_pressed
				has_country_flag = apsr_enclave_defence_button_18_pressed
				has_country_flag = apsr_enclave_defence_button_19_pressed
				has_country_flag = apsr_enclave_defence_button_20_pressed
			}
		}
	}
	allow = {
		always = yes
	}
	effect = {
	}
}

# условие показа фона описания
apsr_enclave_defence_button_00_available = {
	potential = {
		OR = {
			has_country_flag = apsr_enclave_defence_button_01_pressed
			has_country_flag = apsr_enclave_defence_button_02_pressed
			has_country_flag = apsr_enclave_defence_button_03_pressed
			has_country_flag = apsr_enclave_defence_button_04_pressed
			has_country_flag = apsr_enclave_defence_button_05_pressed
			has_country_flag = apsr_enclave_defence_button_06_pressed
			has_country_flag = apsr_enclave_defence_button_07_pressed
			has_country_flag = apsr_enclave_defence_button_08_pressed
			has_country_flag = apsr_enclave_defence_button_09_pressed
			has_country_flag = apsr_enclave_defence_button_10_pressed
			has_country_flag = apsr_enclave_defence_button_11_pressed
			has_country_flag = apsr_enclave_defence_button_12_pressed
			has_country_flag = apsr_enclave_defence_button_13_pressed
			has_country_flag = apsr_enclave_defence_button_14_pressed
			has_country_flag = apsr_enclave_defence_button_15_pressed
			has_country_flag = apsr_enclave_defence_button_16_pressed
			has_country_flag = apsr_enclave_defence_button_17_pressed
			has_country_flag = apsr_enclave_defence_button_18_pressed
			has_country_flag = apsr_enclave_defence_button_19_pressed
			has_country_flag = apsr_enclave_defence_button_20_pressed
		}
	}
	allow = {
		always = yes
	}
	effect = {
	}
}





################################################################
##### УРОВЕНЬ 1



### КНОПКА 1

# кнопка выбора усиления и открытия описания
apsr_enclave_defence_button_01_select = {
	potential = {
		NOT = {
			has_country_flag = apsr_enclave_defence_button_01_purchase
		}
	}
	allow = {
		always = yes
	}
	effect = {
		custom_tooltip = apsr_enclave_defence_button_01_info
		hidden_effect = {	
			set_country_flag = apsr_enclave_defence_button_01_pressed
			remove_country_flag = apsr_enclave_defence_button_02_pressed	
			remove_country_flag = apsr_enclave_defence_button_03_pressed
			remove_country_flag = apsr_enclave_defence_button_04_pressed
			remove_country_flag = apsr_enclave_defence_button_05_pressed
			remove_country_flag = apsr_enclave_defence_button_06_pressed
			remove_country_flag = apsr_enclave_defence_button_07_pressed
			remove_country_flag = apsr_enclave_defence_button_08_pressed
			remove_country_flag = apsr_enclave_defence_button_09_pressed
			remove_country_flag = apsr_enclave_defence_button_10_pressed
			remove_country_flag = apsr_enclave_defence_button_11_pressed
			remove_country_flag = apsr_enclave_defence_button_12_pressed
			remove_country_flag = apsr_enclave_defence_button_13_pressed
			remove_country_flag = apsr_enclave_defence_button_14_pressed
			remove_country_flag = apsr_enclave_defence_button_15_pressed	
			remove_country_flag = apsr_enclave_defence_button_16_pressed	
			remove_country_flag = apsr_enclave_defence_button_17_pressed
			remove_country_flag = apsr_enclave_defence_button_18_pressed
			remove_country_flag = apsr_enclave_defence_button_19_pressed
			remove_country_flag = apsr_enclave_defence_button_20_pressed	
		}
	}
}

# условие отображения описания слева
apsr_enclave_defence_button_01_pressed = {
	potential = {
		has_country_flag = apsr_enclave_defence_button_01_pressed
	}
	allow = {
		always = yes
	}
	effect = {
	}
}

# условие отображения кнопки покупки
apsr_enclave_defence_button_01_buy = {
	potential = {
		has_country_flag = apsr_enclave_defence_button_01_pressed
	}
	allow = {
		custom_tooltip = {
			fail_text = "apsr_enclave_defence_button_01_failtext"
			resource_stockpile_compare = { resource = apsr_knowledge value >= 900 }
		}
	}
	effect = {
		custom_tooltip = apsr_enclave_defence_buy_desc
		hidden_effect = {	
			add_resource = { apsr_knowledge = -900 }
			set_country_flag = apsr_enclave_defence_button_01_purchase
			give_technology = { tech = tech_apsr_enclave_defence_button_01_bonus message = no }	
			remove_country_flag = apsr_enclave_defence_button_01_pressed
			event_target:global_event_country = {
				change_variable = {
					which = apsr_ancients_count
					value = 1
				}
			}
			change_variable = {
				which = apsr_achimod_improvements_purchased_count
				value = 1
			}
			change_variable = {
				which = apsr_enclave_defence_improvements_purchased_count
				value = 1
			}
			if = {
				limit = {
					check_variable = {
						which = apsr_enclave_defence_improvements_purchased_count
						value = 5
					}
				}
				random_list = {
					10 = {
						set_country_flag = apsr_enclave_defence_set_1_bonus_is_01
						give_technology = { tech = tech_apsr_enclave_defence_bonus_01 message = no }	
					}
					10 = {
						set_country_flag = apsr_enclave_defence_set_1_bonus_is_02
						give_technology = { tech = tech_apsr_enclave_defence_bonus_02 message = no }
					}
					10 = {
						set_country_flag = apsr_enclave_defence_set_1_bonus_is_03
						give_technology = { tech = tech_apsr_enclave_defence_bonus_03 message = no }
					}
					10 = {
						set_country_flag = apsr_enclave_defence_set_1_bonus_is_04
						give_technology = { tech = tech_apsr_enclave_defence_bonus_04 message = no }
					}
					10 = {
						set_country_flag = apsr_enclave_defence_set_1_bonus_is_05
						give_technology = { tech = tech_apsr_enclave_defence_bonus_05 message = no }
					}
					2 = {
						set_country_flag = apsr_enclave_defence_set_1_bonus_is_06
						give_technology = { tech = tech_apsr_enclave_defence_bonus_06 message = no }
					}
					2 = {
						set_country_flag = apsr_enclave_defence_set_1_bonus_is_07
						give_technology = { tech = tech_apsr_enclave_defence_bonus_07 message = no }
					}
					2 = {
						set_country_flag = apsr_enclave_defence_set_1_bonus_is_08
						give_technology = { tech = tech_apsr_enclave_defence_bonus_08 message = no }
					}
				}
			}
			if = {
				limit = {
					check_variable = {
						which = apsr_enclave_defence_improvements_purchased_count
						value = 10
					}
				}
				random_list = {
					10 = {
						modifier = {
							factor = 0
							has_country_flag = apsr_enclave_defence_set_1_bonus_is_01
						}
						set_country_flag = apsr_enclave_defence_set_2_bonus_is_01
						give_technology = { tech = tech_apsr_enclave_defence_bonus_01 message = no }	
					}
					10 = {
						modifier = {
							factor = 0
							has_country_flag = apsr_enclave_defence_set_1_bonus_is_02
						}
						set_country_flag = apsr_enclave_defence_set_2_bonus_is_02
						give_technology = { tech = tech_apsr_enclave_defence_bonus_02 message = no }
					}
					10 = {
						modifier = {
							factor = 0
							has_country_flag = apsr_enclave_defence_set_1_bonus_is_03
						}
						set_country_flag = apsr_enclave_defence_set_2_bonus_is_03
						give_technology = { tech = tech_apsr_enclave_defence_bonus_03 message = no }
					}
					10 = {
						modifier = {
							factor = 0
							has_country_flag = apsr_enclave_defence_set_1_bonus_is_04
						}
						set_country_flag = apsr_enclave_defence_set_2_bonus_is_04
						give_technology = { tech = tech_apsr_enclave_defence_bonus_04 message = no }
					}
					10 = {
						modifier = {
							factor = 0
							has_country_flag = apsr_enclave_defence_set_1_bonus_is_05
						}
						set_country_flag = apsr_enclave_defence_set_2_bonus_is_05
						give_technology = { tech = tech_apsr_enclave_defence_bonus_05 message = no }
					}
					2 = {
						modifier = {
							factor = 0
							has_country_flag = apsr_enclave_defence_set_1_bonus_is_06
						}
						set_country_flag = apsr_enclave_defence_set_2_bonus_is_06
						give_technology = { tech = tech_apsr_enclave_defence_bonus_06 message = no }
					}
					2 = {
						modifier = {
							factor = 0
							has_country_flag = apsr_enclave_defence_set_1_bonus_is_07
						}
						set_country_flag = apsr_enclave_defence_set_2_bonus_is_07
						give_technology = { tech = tech_apsr_enclave_defence_bonus_07 message = no }
					}
					2 = {
						modifier = {
							factor = 0
							has_country_flag = apsr_enclave_defence_set_1_bonus_is_08
						}
						set_country_flag = apsr_enclave_defence_set_2_bonus_is_08
						give_technology = { tech = tech_apsr_enclave_defence_bonus_08 message = no }
					}
				}
			}
			
		}
	}
}

# кнопка выбора улучшения после покупки
apsr_enclave_defence_button_01_purchased = {
	potential = {
		has_country_flag = apsr_enclave_defence_button_01_purchase
	}
	allow = {
		always = yes
	}
	effect = {
		custom_tooltip = apsr_enclave_defence_button_01_info
	}
}



### КНОПКА 02

# кнопка выбора усиления и открытия описания
apsr_enclave_defence_button_02_select = {
	potential = {
		NOT = {
			has_country_flag = apsr_enclave_defence_button_02_purchase
		}
	}
	allow = {
		always = yes
	}
	effect = {
		custom_tooltip = apsr_enclave_defence_button_02_info
		hidden_effect = {		
			remove_country_flag = apsr_enclave_defence_button_01_pressed
			set_country_flag = apsr_enclave_defence_button_02_pressed	
			remove_country_flag = apsr_enclave_defence_button_03_pressed
			remove_country_flag = apsr_enclave_defence_button_04_pressed
			remove_country_flag = apsr_enclave_defence_button_05_pressed
			remove_country_flag = apsr_enclave_defence_button_06_pressed
			remove_country_flag = apsr_enclave_defence_button_07_pressed
			remove_country_flag = apsr_enclave_defence_button_08_pressed
			remove_country_flag = apsr_enclave_defence_button_09_pressed
			remove_country_flag = apsr_enclave_defence_button_10_pressed
			remove_country_flag = apsr_enclave_defence_button_11_pressed
			remove_country_flag = apsr_enclave_defence_button_12_pressed
			remove_country_flag = apsr_enclave_defence_button_13_pressed
			remove_country_flag = apsr_enclave_defence_button_14_pressed
			remove_country_flag = apsr_enclave_defence_button_15_pressed	
			remove_country_flag = apsr_enclave_defence_button_16_pressed	
			remove_country_flag = apsr_enclave_defence_button_17_pressed
			remove_country_flag = apsr_enclave_defence_button_18_pressed
			remove_country_flag = apsr_enclave_defence_button_19_pressed
			remove_country_flag = apsr_enclave_defence_button_20_pressed	
		}
	}
}

# условие отображения описания слева
apsr_enclave_defence_button_02_pressed = {
	potential = {	
		has_country_flag = apsr_enclave_defence_button_02_pressed
	}
	allow = {
		always = yes
	}
	effect = {
	}
}

# условие отображения кнопки покупки
apsr_enclave_defence_button_02_buy = {
	potential = {
		has_country_flag = apsr_enclave_defence_button_02_pressed
	}
	allow = {
		custom_tooltip = {
			fail_text = "apsr_enclave_defence_button_02_failtext"
			resource_stockpile_compare = { resource = apsr_knowledge value >= 900 }
		}
	}
	effect = {
		custom_tooltip = apsr_enclave_defence_buy_desc
		hidden_effect = {	
			add_resource = { apsr_knowledge = -900 }
			set_country_flag = apsr_enclave_defence_button_02_purchase
			give_technology = { tech = tech_apsr_enclave_defence_button_02_bonus message = no }	
			remove_country_flag = apsr_enclave_defence_button_02_pressed
			event_target:global_event_country = {
				change_variable = {
					which = apsr_ancients_count
					value = 1
				}
			}
			change_variable = {
				which = apsr_achimod_improvements_purchased_count
				value = 1
			}
			change_variable = {
				which = apsr_enclave_defence_improvements_purchased_count
				value = 1
			}
			if = {
				limit = {
					check_variable = {
						which = apsr_enclave_defence_improvements_purchased_count
						value = 5
					}
				}
				random_list = {
					10 = {
						set_country_flag = apsr_enclave_defence_set_1_bonus_is_01
						give_technology = { tech = tech_apsr_enclave_defence_bonus_01 message = no }	
					}
					10 = {
						set_country_flag = apsr_enclave_defence_set_1_bonus_is_02
						give_technology = { tech = tech_apsr_enclave_defence_bonus_02 message = no }
					}
					10 = {
						set_country_flag = apsr_enclave_defence_set_1_bonus_is_03
						give_technology = { tech = tech_apsr_enclave_defence_bonus_03 message = no }
					}
					10 = {
						set_country_flag = apsr_enclave_defence_set_1_bonus_is_04
						give_technology = { tech = tech_apsr_enclave_defence_bonus_04 message = no }
					}
					10 = {
						set_country_flag = apsr_enclave_defence_set_1_bonus_is_05
						give_technology = { tech = tech_apsr_enclave_defence_bonus_05 message = no }
					}
					2 = {
						set_country_flag = apsr_enclave_defence_set_1_bonus_is_06
						give_technology = { tech = tech_apsr_enclave_defence_bonus_06 message = no }
					}
					2 = {
						set_country_flag = apsr_enclave_defence_set_1_bonus_is_07
						give_technology = { tech = tech_apsr_enclave_defence_bonus_07 message = no }
					}
					2 = {
						set_country_flag = apsr_enclave_defence_set_1_bonus_is_08
						give_technology = { tech = tech_apsr_enclave_defence_bonus_08 message = no }
					}
				}
			}
			if = {
				limit = {
					check_variable = {
						which = apsr_enclave_defence_improvements_purchased_count
						value = 10
					}
				}
				random_list = {
					10 = {
						modifier = {
							factor = 0
							has_country_flag = apsr_enclave_defence_set_1_bonus_is_01
						}
						set_country_flag = apsr_enclave_defence_set_2_bonus_is_01
						give_technology = { tech = tech_apsr_enclave_defence_bonus_01 message = no }	
					}
					10 = {
						modifier = {
							factor = 0
							has_country_flag = apsr_enclave_defence_set_1_bonus_is_02
						}
						set_country_flag = apsr_enclave_defence_set_2_bonus_is_02
						give_technology = { tech = tech_apsr_enclave_defence_bonus_02 message = no }
					}
					10 = {
						modifier = {
							factor = 0
							has_country_flag = apsr_enclave_defence_set_1_bonus_is_03
						}
						set_country_flag = apsr_enclave_defence_set_2_bonus_is_03
						give_technology = { tech = tech_apsr_enclave_defence_bonus_03 message = no }
					}
					10 = {
						modifier = {
							factor = 0
							has_country_flag = apsr_enclave_defence_set_1_bonus_is_04
						}
						set_country_flag = apsr_enclave_defence_set_2_bonus_is_04
						give_technology = { tech = tech_apsr_enclave_defence_bonus_04 message = no }
					}
					10 = {
						modifier = {
							factor = 0
							has_country_flag = apsr_enclave_defence_set_1_bonus_is_05
						}
						set_country_flag = apsr_enclave_defence_set_2_bonus_is_05
						give_technology = { tech = tech_apsr_enclave_defence_bonus_05 message = no }
					}
					2 = {
						modifier = {
							factor = 0
							has_country_flag = apsr_enclave_defence_set_1_bonus_is_06
						}
						set_country_flag = apsr_enclave_defence_set_2_bonus_is_06
						give_technology = { tech = tech_apsr_enclave_defence_bonus_06 message = no }
					}
					2 = {
						modifier = {
							factor = 0
							has_country_flag = apsr_enclave_defence_set_1_bonus_is_07
						}
						set_country_flag = apsr_enclave_defence_set_2_bonus_is_07
						give_technology = { tech = tech_apsr_enclave_defence_bonus_07 message = no }
					}
					2 = {
						modifier = {
							factor = 0
							has_country_flag = apsr_enclave_defence_set_1_bonus_is_08
						}
						set_country_flag = apsr_enclave_defence_set_2_bonus_is_08
						give_technology = { tech = tech_apsr_enclave_defence_bonus_08 message = no }
					}
				}
			}
			
		}
	}
}

# кнопка выбора улучшения после покупки
apsr_enclave_defence_button_02_purchased = {
	potential = {
		has_country_flag = apsr_enclave_defence_button_02_purchase
	}
	allow = {
		always = yes
	}
	effect = {
		custom_tooltip = apsr_enclave_defence_button_02_info
	}
}



### КНОПКА 03

# кнопка выбора усиления и открытия описания
apsr_enclave_defence_button_03_select = {
	potential = {
		NOT = {
			has_country_flag = apsr_enclave_defence_button_03_purchase
		}
	}
	allow = {
		always = yes
	}
	effect = {
		custom_tooltip = apsr_enclave_defence_button_03_info
		hidden_effect = {		
			remove_country_flag = apsr_enclave_defence_button_01_pressed
			remove_country_flag = apsr_enclave_defence_button_02_pressed	
			set_country_flag = apsr_enclave_defence_button_03_pressed
			remove_country_flag = apsr_enclave_defence_button_04_pressed
			remove_country_flag = apsr_enclave_defence_button_05_pressed
			remove_country_flag = apsr_enclave_defence_button_06_pressed
			remove_country_flag = apsr_enclave_defence_button_07_pressed
			remove_country_flag = apsr_enclave_defence_button_08_pressed
			remove_country_flag = apsr_enclave_defence_button_09_pressed
			remove_country_flag = apsr_enclave_defence_button_10_pressed
			remove_country_flag = apsr_enclave_defence_button_11_pressed
			remove_country_flag = apsr_enclave_defence_button_12_pressed
			remove_country_flag = apsr_enclave_defence_button_13_pressed
			remove_country_flag = apsr_enclave_defence_button_14_pressed
			remove_country_flag = apsr_enclave_defence_button_15_pressed	
			remove_country_flag = apsr_enclave_defence_button_16_pressed	
			remove_country_flag = apsr_enclave_defence_button_17_pressed
			remove_country_flag = apsr_enclave_defence_button_18_pressed
			remove_country_flag = apsr_enclave_defence_button_19_pressed
			remove_country_flag = apsr_enclave_defence_button_20_pressed	
		}
	}
}

# условие отображения описания слева
apsr_enclave_defence_button_03_pressed = {
	potential = {
		has_country_flag = apsr_enclave_defence_button_03_pressed
	}
	allow = {
		always = yes
	}
	effect = {
	}
}

# условие отображения кнопки покупки
apsr_enclave_defence_button_03_buy = {
	potential = {
		has_country_flag = apsr_enclave_defence_button_03_pressed
	}
	allow = {
		custom_tooltip = {
			fail_text = "apsr_enclave_defence_button_03_failtext"
			resource_stockpile_compare = { resource = apsr_knowledge value >= 900 }
		}
	}
	effect = {
		custom_tooltip = apsr_enclave_defence_buy_desc
		hidden_effect = {	
			add_resource = { apsr_knowledge = -900 }
			set_country_flag = apsr_enclave_defence_button_03_purchase
			give_technology = { tech = tech_apsr_enclave_defence_button_03_bonus message = no }	
			remove_country_flag = apsr_enclave_defence_button_03_pressed
			event_target:global_event_country = {
				change_variable = {
					which = apsr_ancients_count
					value = 1
				}
			}
			change_variable = {
				which = apsr_achimod_improvements_purchased_count
				value = 1
			}
			change_variable = {
				which = apsr_enclave_defence_improvements_purchased_count
				value = 1
			}
			if = {
				limit = {
					check_variable = {
						which = apsr_enclave_defence_improvements_purchased_count
						value = 5
					}
				}
				random_list = {
					10 = {
						set_country_flag = apsr_enclave_defence_set_1_bonus_is_01
						give_technology = { tech = tech_apsr_enclave_defence_bonus_01 message = no }	
					}
					10 = {
						set_country_flag = apsr_enclave_defence_set_1_bonus_is_02
						give_technology = { tech = tech_apsr_enclave_defence_bonus_02 message = no }
					}
					10 = {
						set_country_flag = apsr_enclave_defence_set_1_bonus_is_03
						give_technology = { tech = tech_apsr_enclave_defence_bonus_03 message = no }
					}
					10 = {
						set_country_flag = apsr_enclave_defence_set_1_bonus_is_04
						give_technology = { tech = tech_apsr_enclave_defence_bonus_04 message = no }
					}
					10 = {
						set_country_flag = apsr_enclave_defence_set_1_bonus_is_05
						give_technology = { tech = tech_apsr_enclave_defence_bonus_05 message = no }
					}
					2 = {
						set_country_flag = apsr_enclave_defence_set_1_bonus_is_06
						give_technology = { tech = tech_apsr_enclave_defence_bonus_06 message = no }
					}
					2 = {
						set_country_flag = apsr_enclave_defence_set_1_bonus_is_07
						give_technology = { tech = tech_apsr_enclave_defence_bonus_07 message = no }
					}
					2 = {
						set_country_flag = apsr_enclave_defence_set_1_bonus_is_08
						give_technology = { tech = tech_apsr_enclave_defence_bonus_08 message = no }
					}
				}
			}
			if = {
				limit = {
					check_variable = {
						which = apsr_enclave_defence_improvements_purchased_count
						value = 10
					}
				}
				random_list = {
					10 = {
						modifier = {
							factor = 0
							has_country_flag = apsr_enclave_defence_set_1_bonus_is_01
						}
						set_country_flag = apsr_enclave_defence_set_2_bonus_is_01
						give_technology = { tech = tech_apsr_enclave_defence_bonus_01 message = no }	
					}
					10 = {
						modifier = {
							factor = 0
							has_country_flag = apsr_enclave_defence_set_1_bonus_is_02
						}
						set_country_flag = apsr_enclave_defence_set_2_bonus_is_02
						give_technology = { tech = tech_apsr_enclave_defence_bonus_02 message = no }
					}
					10 = {
						modifier = {
							factor = 0
							has_country_flag = apsr_enclave_defence_set_1_bonus_is_03
						}
						set_country_flag = apsr_enclave_defence_set_2_bonus_is_03
						give_technology = { tech = tech_apsr_enclave_defence_bonus_03 message = no }
					}
					10 = {
						modifier = {
							factor = 0
							has_country_flag = apsr_enclave_defence_set_1_bonus_is_04
						}
						set_country_flag = apsr_enclave_defence_set_2_bonus_is_04
						give_technology = { tech = tech_apsr_enclave_defence_bonus_04 message = no }
					}
					10 = {
						modifier = {
							factor = 0
							has_country_flag = apsr_enclave_defence_set_1_bonus_is_05
						}
						set_country_flag = apsr_enclave_defence_set_2_bonus_is_05
						give_technology = { tech = tech_apsr_enclave_defence_bonus_05 message = no }
					}
					2 = {
						modifier = {
							factor = 0
							has_country_flag = apsr_enclave_defence_set_1_bonus_is_06
						}
						set_country_flag = apsr_enclave_defence_set_2_bonus_is_06
						give_technology = { tech = tech_apsr_enclave_defence_bonus_06 message = no }
					}
					2 = {
						modifier = {
							factor = 0
							has_country_flag = apsr_enclave_defence_set_1_bonus_is_07
						}
						set_country_flag = apsr_enclave_defence_set_2_bonus_is_07
						give_technology = { tech = tech_apsr_enclave_defence_bonus_07 message = no }
					}
					2 = {
						modifier = {
							factor = 0
							has_country_flag = apsr_enclave_defence_set_1_bonus_is_08
						}
						set_country_flag = apsr_enclave_defence_set_2_bonus_is_08
						give_technology = { tech = tech_apsr_enclave_defence_bonus_08 message = no }
					}
				}
			}
			
		}
	}
}

# кнопка выбора улучшения после покупки
apsr_enclave_defence_button_03_purchased = {
	potential = {
		has_country_flag = apsr_enclave_defence_button_03_purchase
	}
	allow = {
		always = yes
	}
	effect = {
		custom_tooltip = apsr_enclave_defence_button_03_info
	}
}



### КНОПКА 04

# кнопка выбора усиления и открытия описания
apsr_enclave_defence_button_04_select = {
	potential = {
		NOT = {
			has_country_flag = apsr_enclave_defence_button_04_purchase
		}
	}
	allow = {
		always = yes
	}
	effect = {
		custom_tooltip = apsr_enclave_defence_button_04_info
		hidden_effect = {		
			remove_country_flag = apsr_enclave_defence_button_01_pressed
			remove_country_flag = apsr_enclave_defence_button_02_pressed	
			remove_country_flag = apsr_enclave_defence_button_03_pressed
			set_country_flag = apsr_enclave_defence_button_04_pressed
			remove_country_flag = apsr_enclave_defence_button_05_pressed
			remove_country_flag = apsr_enclave_defence_button_06_pressed
			remove_country_flag = apsr_enclave_defence_button_07_pressed
			remove_country_flag = apsr_enclave_defence_button_08_pressed
			remove_country_flag = apsr_enclave_defence_button_09_pressed
			remove_country_flag = apsr_enclave_defence_button_10_pressed
			remove_country_flag = apsr_enclave_defence_button_11_pressed
			remove_country_flag = apsr_enclave_defence_button_12_pressed
			remove_country_flag = apsr_enclave_defence_button_13_pressed
			remove_country_flag = apsr_enclave_defence_button_14_pressed
			remove_country_flag = apsr_enclave_defence_button_15_pressed	
			remove_country_flag = apsr_enclave_defence_button_16_pressed	
			remove_country_flag = apsr_enclave_defence_button_17_pressed
			remove_country_flag = apsr_enclave_defence_button_18_pressed
			remove_country_flag = apsr_enclave_defence_button_19_pressed
			remove_country_flag = apsr_enclave_defence_button_20_pressed	
		}
	}
}

# условие отображения описания слева
apsr_enclave_defence_button_04_pressed = {
	potential = {
		has_country_flag = apsr_enclave_defence_button_04_pressed
	}
	allow = {
		always = yes
	}
	effect = {
	}
}

# условие отображения кнопки покупки
apsr_enclave_defence_button_04_buy = {
	potential = {
		has_country_flag = apsr_enclave_defence_button_04_pressed
	}
	allow = {
		custom_tooltip = {
			fail_text = "apsr_enclave_defence_button_04_failtext"
			resource_stockpile_compare = { resource = apsr_knowledge value >= 900 }
		}
	}
	effect = {
		custom_tooltip = apsr_enclave_defence_buy_desc
		hidden_effect = {	
			add_resource = { apsr_knowledge = -900 }
			set_country_flag = apsr_enclave_defence_button_04_purchase
			give_technology = { tech = tech_apsr_enclave_defence_button_04_bonus message = no }	
			remove_country_flag = apsr_enclave_defence_button_04_pressed
			event_target:global_event_country = {
				change_variable = {
					which = apsr_ancients_count
					value = 1
				}
			}
			change_variable = {
				which = apsr_achimod_improvements_purchased_count
				value = 1
			}
			change_variable = {
				which = apsr_enclave_defence_improvements_purchased_count
				value = 1
			}
			if = {
				limit = {
					check_variable = {
						which = apsr_enclave_defence_improvements_purchased_count
						value = 5
					}
				}
				random_list = {
					10 = {
						set_country_flag = apsr_enclave_defence_set_1_bonus_is_01
						give_technology = { tech = tech_apsr_enclave_defence_bonus_01 message = no }	
					}
					10 = {
						set_country_flag = apsr_enclave_defence_set_1_bonus_is_02
						give_technology = { tech = tech_apsr_enclave_defence_bonus_02 message = no }
					}
					10 = {
						set_country_flag = apsr_enclave_defence_set_1_bonus_is_03
						give_technology = { tech = tech_apsr_enclave_defence_bonus_03 message = no }
					}
					10 = {
						set_country_flag = apsr_enclave_defence_set_1_bonus_is_04
						give_technology = { tech = tech_apsr_enclave_defence_bonus_04 message = no }
					}
					10 = {
						set_country_flag = apsr_enclave_defence_set_1_bonus_is_05
						give_technology = { tech = tech_apsr_enclave_defence_bonus_05 message = no }
					}
					2 = {
						set_country_flag = apsr_enclave_defence_set_1_bonus_is_06
						give_technology = { tech = tech_apsr_enclave_defence_bonus_06 message = no }
					}
					2 = {
						set_country_flag = apsr_enclave_defence_set_1_bonus_is_07
						give_technology = { tech = tech_apsr_enclave_defence_bonus_07 message = no }
					}
					2 = {
						set_country_flag = apsr_enclave_defence_set_1_bonus_is_08
						give_technology = { tech = tech_apsr_enclave_defence_bonus_08 message = no }
					}
				}
			}
			if = {
				limit = {
					check_variable = {
						which = apsr_enclave_defence_improvements_purchased_count
						value = 10
					}
				}
				random_list = {
					10 = {
						modifier = {
							factor = 0
							has_country_flag = apsr_enclave_defence_set_1_bonus_is_01
						}
						set_country_flag = apsr_enclave_defence_set_2_bonus_is_01
						give_technology = { tech = tech_apsr_enclave_defence_bonus_01 message = no }	
					}
					10 = {
						modifier = {
							factor = 0
							has_country_flag = apsr_enclave_defence_set_1_bonus_is_02
						}
						set_country_flag = apsr_enclave_defence_set_2_bonus_is_02
						give_technology = { tech = tech_apsr_enclave_defence_bonus_02 message = no }
					}
					10 = {
						modifier = {
							factor = 0
							has_country_flag = apsr_enclave_defence_set_1_bonus_is_03
						}
						set_country_flag = apsr_enclave_defence_set_2_bonus_is_03
						give_technology = { tech = tech_apsr_enclave_defence_bonus_03 message = no }
					}
					10 = {
						modifier = {
							factor = 0
							has_country_flag = apsr_enclave_defence_set_1_bonus_is_04
						}
						set_country_flag = apsr_enclave_defence_set_2_bonus_is_04
						give_technology = { tech = tech_apsr_enclave_defence_bonus_04 message = no }
					}
					10 = {
						modifier = {
							factor = 0
							has_country_flag = apsr_enclave_defence_set_1_bonus_is_05
						}
						set_country_flag = apsr_enclave_defence_set_2_bonus_is_05
						give_technology = { tech = tech_apsr_enclave_defence_bonus_05 message = no }
					}
					2 = {
						modifier = {
							factor = 0
							has_country_flag = apsr_enclave_defence_set_1_bonus_is_06
						}
						set_country_flag = apsr_enclave_defence_set_2_bonus_is_06
						give_technology = { tech = tech_apsr_enclave_defence_bonus_06 message = no }
					}
					2 = {
						modifier = {
							factor = 0
							has_country_flag = apsr_enclave_defence_set_1_bonus_is_07
						}
						set_country_flag = apsr_enclave_defence_set_2_bonus_is_07
						give_technology = { tech = tech_apsr_enclave_defence_bonus_07 message = no }
					}
					2 = {
						modifier = {
							factor = 0
							has_country_flag = apsr_enclave_defence_set_1_bonus_is_08
						}
						set_country_flag = apsr_enclave_defence_set_2_bonus_is_08
						give_technology = { tech = tech_apsr_enclave_defence_bonus_08 message = no }
					}
				}
			}
			
		}
	}
}

# кнопка выбора улучшения после покупки
apsr_enclave_defence_button_04_purchased = {
	potential = {
		has_country_flag = apsr_enclave_defence_button_04_purchase
	}
	allow = {
		always = yes
	}
	effect = {
		custom_tooltip = apsr_enclave_defence_button_04_info
	}
}



### КНОПКА 05

# кнопка выбора усиления и открытия описания
apsr_enclave_defence_button_05_select = {
	potential = {
		NOT = {
			has_country_flag = apsr_enclave_defence_button_05_purchase
		}
	}
	allow = {
		always = yes
	}
	effect = {
		custom_tooltip = apsr_enclave_defence_button_05_info
		hidden_effect = {	
			remove_country_flag = apsr_enclave_defence_button_01_pressed
			remove_country_flag = apsr_enclave_defence_button_02_pressed	
			remove_country_flag = apsr_enclave_defence_button_03_pressed
			remove_country_flag = apsr_enclave_defence_button_04_pressed
			set_country_flag = apsr_enclave_defence_button_05_pressed
			remove_country_flag = apsr_enclave_defence_button_06_pressed
			remove_country_flag = apsr_enclave_defence_button_07_pressed
			remove_country_flag = apsr_enclave_defence_button_08_pressed
			remove_country_flag = apsr_enclave_defence_button_09_pressed
			remove_country_flag = apsr_enclave_defence_button_10_pressed
			remove_country_flag = apsr_enclave_defence_button_11_pressed
			remove_country_flag = apsr_enclave_defence_button_12_pressed
			remove_country_flag = apsr_enclave_defence_button_13_pressed
			remove_country_flag = apsr_enclave_defence_button_14_pressed
			remove_country_flag = apsr_enclave_defence_button_15_pressed	
			remove_country_flag = apsr_enclave_defence_button_16_pressed	
			remove_country_flag = apsr_enclave_defence_button_17_pressed
			remove_country_flag = apsr_enclave_defence_button_18_pressed
			remove_country_flag = apsr_enclave_defence_button_19_pressed
			remove_country_flag = apsr_enclave_defence_button_20_pressed	
		}
	}
}

# условие отображения описания слева
apsr_enclave_defence_button_05_pressed = {
	potential = {
		has_country_flag = apsr_enclave_defence_button_05_pressed
	}
	allow = {
		always = yes
	}
	effect = {
	}
}

# условие отображения кнопки покупки
apsr_enclave_defence_button_05_buy = {
	potential = {
		has_country_flag = apsr_enclave_defence_button_05_pressed
	}
	allow = {
		custom_tooltip = {
			fail_text = "apsr_enclave_defence_button_05_failtext"
			resource_stockpile_compare = { resource = apsr_knowledge value >= 900 }
		}
	}
	effect = {
		custom_tooltip = apsr_enclave_defence_buy_desc
		hidden_effect = {	
			add_resource = { apsr_knowledge = -900 }
			set_country_flag = apsr_enclave_defence_button_05_purchase
			give_technology = { tech = tech_apsr_enclave_defence_button_05_bonus message = no }	
			remove_country_flag = apsr_enclave_defence_button_05_pressed
			event_target:global_event_country = {
				change_variable = {
					which = apsr_ancients_count
					value = 1
				}
			}
			change_variable = {
				which = apsr_achimod_improvements_purchased_count
				value = 1
			}
			change_variable = {
				which = apsr_enclave_defence_improvements_purchased_count
				value = 1
			}
			if = {
				limit = {
					check_variable = {
						which = apsr_enclave_defence_improvements_purchased_count
						value = 5
					}
				}
				random_list = {
					10 = {
						set_country_flag = apsr_enclave_defence_set_1_bonus_is_01
						give_technology = { tech = tech_apsr_enclave_defence_bonus_01 message = no }	
					}
					10 = {
						set_country_flag = apsr_enclave_defence_set_1_bonus_is_02
						give_technology = { tech = tech_apsr_enclave_defence_bonus_02 message = no }
					}
					10 = {
						set_country_flag = apsr_enclave_defence_set_1_bonus_is_03
						give_technology = { tech = tech_apsr_enclave_defence_bonus_03 message = no }
					}
					10 = {
						set_country_flag = apsr_enclave_defence_set_1_bonus_is_04
						give_technology = { tech = tech_apsr_enclave_defence_bonus_04 message = no }
					}
					10 = {
						set_country_flag = apsr_enclave_defence_set_1_bonus_is_05
						give_technology = { tech = tech_apsr_enclave_defence_bonus_05 message = no }
					}
					2 = {
						set_country_flag = apsr_enclave_defence_set_1_bonus_is_06
						give_technology = { tech = tech_apsr_enclave_defence_bonus_06 message = no }
					}
					2 = {
						set_country_flag = apsr_enclave_defence_set_1_bonus_is_07
						give_technology = { tech = tech_apsr_enclave_defence_bonus_07 message = no }
					}
					2 = {
						set_country_flag = apsr_enclave_defence_set_1_bonus_is_08
						give_technology = { tech = tech_apsr_enclave_defence_bonus_08 message = no }
					}
				}
			}
			if = {
				limit = {
					check_variable = {
						which = apsr_enclave_defence_improvements_purchased_count
						value = 10
					}
				}
				random_list = {
					10 = {
						modifier = {
							factor = 0
							has_country_flag = apsr_enclave_defence_set_1_bonus_is_01
						}
						set_country_flag = apsr_enclave_defence_set_2_bonus_is_01
						give_technology = { tech = tech_apsr_enclave_defence_bonus_01 message = no }	
					}
					10 = {
						modifier = {
							factor = 0
							has_country_flag = apsr_enclave_defence_set_1_bonus_is_02
						}
						set_country_flag = apsr_enclave_defence_set_2_bonus_is_02
						give_technology = { tech = tech_apsr_enclave_defence_bonus_02 message = no }
					}
					10 = {
						modifier = {
							factor = 0
							has_country_flag = apsr_enclave_defence_set_1_bonus_is_03
						}
						set_country_flag = apsr_enclave_defence_set_2_bonus_is_03
						give_technology = { tech = tech_apsr_enclave_defence_bonus_03 message = no }
					}
					10 = {
						modifier = {
							factor = 0
							has_country_flag = apsr_enclave_defence_set_1_bonus_is_04
						}
						set_country_flag = apsr_enclave_defence_set_2_bonus_is_04
						give_technology = { tech = tech_apsr_enclave_defence_bonus_04 message = no }
					}
					10 = {
						modifier = {
							factor = 0
							has_country_flag = apsr_enclave_defence_set_1_bonus_is_05
						}
						set_country_flag = apsr_enclave_defence_set_2_bonus_is_05
						give_technology = { tech = tech_apsr_enclave_defence_bonus_05 message = no }
					}
					2 = {
						modifier = {
							factor = 0
							has_country_flag = apsr_enclave_defence_set_1_bonus_is_06
						}
						set_country_flag = apsr_enclave_defence_set_2_bonus_is_06
						give_technology = { tech = tech_apsr_enclave_defence_bonus_06 message = no }
					}
					2 = {
						modifier = {
							factor = 0
							has_country_flag = apsr_enclave_defence_set_1_bonus_is_07
						}
						set_country_flag = apsr_enclave_defence_set_2_bonus_is_07
						give_technology = { tech = tech_apsr_enclave_defence_bonus_07 message = no }
					}
					2 = {
						modifier = {
							factor = 0
							has_country_flag = apsr_enclave_defence_set_1_bonus_is_08
						}
						set_country_flag = apsr_enclave_defence_set_2_bonus_is_08
						give_technology = { tech = tech_apsr_enclave_defence_bonus_08 message = no }
					}
				}
			}
			
		}
	}
}

# кнопка выбора улучшения после покупки
apsr_enclave_defence_button_05_purchased = {
	potential = {
		has_country_flag = apsr_enclave_defence_button_05_purchase
	}
	allow = {
		always = yes
	}
	effect = {
		custom_tooltip = apsr_enclave_defence_button_05_info
	}
}



### КНОПКА 06

# кнопка выбора усиления и открытия описания
apsr_enclave_defence_button_06_select = {
	potential = {
		NOT = {
			has_country_flag = apsr_enclave_defence_button_06_purchase
		}
	}
	allow = {
		always = yes
	}
	effect = {
		custom_tooltip = apsr_enclave_defence_button_06_info
		hidden_effect = {	
			remove_country_flag = apsr_enclave_defence_button_01_pressed
			remove_country_flag = apsr_enclave_defence_button_02_pressed	
			remove_country_flag = apsr_enclave_defence_button_03_pressed
			remove_country_flag = apsr_enclave_defence_button_04_pressed
			remove_country_flag = apsr_enclave_defence_button_05_pressed
			set_country_flag = apsr_enclave_defence_button_06_pressed
			remove_country_flag = apsr_enclave_defence_button_07_pressed
			remove_country_flag = apsr_enclave_defence_button_08_pressed
			remove_country_flag = apsr_enclave_defence_button_09_pressed
			remove_country_flag = apsr_enclave_defence_button_10_pressed
			remove_country_flag = apsr_enclave_defence_button_11_pressed
			remove_country_flag = apsr_enclave_defence_button_12_pressed
			remove_country_flag = apsr_enclave_defence_button_13_pressed
			remove_country_flag = apsr_enclave_defence_button_14_pressed
			remove_country_flag = apsr_enclave_defence_button_15_pressed	
			remove_country_flag = apsr_enclave_defence_button_16_pressed	
			remove_country_flag = apsr_enclave_defence_button_17_pressed
			remove_country_flag = apsr_enclave_defence_button_18_pressed
			remove_country_flag = apsr_enclave_defence_button_19_pressed
			remove_country_flag = apsr_enclave_defence_button_20_pressed	
		}
	}
}

# условие отображения описания слева
apsr_enclave_defence_button_06_pressed = {
	potential = {
		has_country_flag = apsr_enclave_defence_button_06_pressed
	}
	allow = {
		always = yes
	}
	effect = {
	}
}

# условие отображения кнопки покупки
apsr_enclave_defence_button_06_buy = {
	potential = {
		has_country_flag = apsr_enclave_defence_button_06_pressed
	}
	allow = {
		custom_tooltip = {
			fail_text = "apsr_enclave_defence_button_06_failtext"
			resource_stockpile_compare = { resource = apsr_knowledge value >= 900 }
		}
	}
	effect = {
		custom_tooltip = apsr_enclave_defence_buy_desc
		hidden_effect = {	
			add_resource = { apsr_knowledge = -900 }
			set_country_flag = apsr_enclave_defence_button_06_purchase
			give_technology = { tech = tech_apsr_enclave_defence_button_06_bonus message = no }	
			remove_country_flag = apsr_enclave_defence_button_06_pressed
			event_target:global_event_country = {
				change_variable = {
					which = apsr_ancients_count
					value = 1
				}
			}
			change_variable = {
				which = apsr_achimod_improvements_purchased_count
				value = 1
			}
			change_variable = {
				which = apsr_enclave_defence_improvements_purchased_count
				value = 1
			}
			if = {
				limit = {
					check_variable = {
						which = apsr_enclave_defence_improvements_purchased_count
						value = 5
					}
				}
				random_list = {
					10 = {
						set_country_flag = apsr_enclave_defence_set_1_bonus_is_01
						give_technology = { tech = tech_apsr_enclave_defence_bonus_01 message = no }	
					}
					10 = {
						set_country_flag = apsr_enclave_defence_set_1_bonus_is_02
						give_technology = { tech = tech_apsr_enclave_defence_bonus_02 message = no }
					}
					10 = {
						set_country_flag = apsr_enclave_defence_set_1_bonus_is_03
						give_technology = { tech = tech_apsr_enclave_defence_bonus_03 message = no }
					}
					10 = {
						set_country_flag = apsr_enclave_defence_set_1_bonus_is_04
						give_technology = { tech = tech_apsr_enclave_defence_bonus_04 message = no }
					}
					10 = {
						set_country_flag = apsr_enclave_defence_set_1_bonus_is_05
						give_technology = { tech = tech_apsr_enclave_defence_bonus_05 message = no }
					}
					2 = {
						set_country_flag = apsr_enclave_defence_set_1_bonus_is_06
						give_technology = { tech = tech_apsr_enclave_defence_bonus_06 message = no }
					}
					2 = {
						set_country_flag = apsr_enclave_defence_set_1_bonus_is_07
						give_technology = { tech = tech_apsr_enclave_defence_bonus_07 message = no }
					}
					2 = {
						set_country_flag = apsr_enclave_defence_set_1_bonus_is_08
						give_technology = { tech = tech_apsr_enclave_defence_bonus_08 message = no }
					}
				}
			}
			if = {
				limit = {
					check_variable = {
						which = apsr_enclave_defence_improvements_purchased_count
						value = 10
					}
				}
				random_list = {
					10 = {
						modifier = {
							factor = 0
							has_country_flag = apsr_enclave_defence_set_1_bonus_is_01
						}
						set_country_flag = apsr_enclave_defence_set_2_bonus_is_01
						give_technology = { tech = tech_apsr_enclave_defence_bonus_01 message = no }	
					}
					10 = {
						modifier = {
							factor = 0
							has_country_flag = apsr_enclave_defence_set_1_bonus_is_02
						}
						set_country_flag = apsr_enclave_defence_set_2_bonus_is_02
						give_technology = { tech = tech_apsr_enclave_defence_bonus_02 message = no }
					}
					10 = {
						modifier = {
							factor = 0
							has_country_flag = apsr_enclave_defence_set_1_bonus_is_03
						}
						set_country_flag = apsr_enclave_defence_set_2_bonus_is_03
						give_technology = { tech = tech_apsr_enclave_defence_bonus_03 message = no }
					}
					10 = {
						modifier = {
							factor = 0
							has_country_flag = apsr_enclave_defence_set_1_bonus_is_04
						}
						set_country_flag = apsr_enclave_defence_set_2_bonus_is_04
						give_technology = { tech = tech_apsr_enclave_defence_bonus_04 message = no }
					}
					10 = {
						modifier = {
							factor = 0
							has_country_flag = apsr_enclave_defence_set_1_bonus_is_05
						}
						set_country_flag = apsr_enclave_defence_set_2_bonus_is_05
						give_technology = { tech = tech_apsr_enclave_defence_bonus_05 message = no }
					}
					2 = {
						modifier = {
							factor = 0
							has_country_flag = apsr_enclave_defence_set_1_bonus_is_06
						}
						set_country_flag = apsr_enclave_defence_set_2_bonus_is_06
						give_technology = { tech = tech_apsr_enclave_defence_bonus_06 message = no }
					}
					2 = {
						modifier = {
							factor = 0
							has_country_flag = apsr_enclave_defence_set_1_bonus_is_07
						}
						set_country_flag = apsr_enclave_defence_set_2_bonus_is_07
						give_technology = { tech = tech_apsr_enclave_defence_bonus_07 message = no }
					}
					2 = {
						modifier = {
							factor = 0
							has_country_flag = apsr_enclave_defence_set_1_bonus_is_08
						}
						set_country_flag = apsr_enclave_defence_set_2_bonus_is_08
						give_technology = { tech = tech_apsr_enclave_defence_bonus_08 message = no }
					}
				}
			}
			
		}
	}
}

# кнопка выбора улучшения после покупки
apsr_enclave_defence_button_06_purchased = {
	potential = {
		has_country_flag = apsr_enclave_defence_button_06_purchase
	}
	allow = {
		always = yes
	}
	effect = {
		custom_tooltip = apsr_enclave_defence_button_06_info
	}
}



### КНОПКА 07

# кнопка выбора усиления и открытия описания
apsr_enclave_defence_button_07_select = {
	potential = {
		NOT = {
			has_country_flag = apsr_enclave_defence_button_07_purchase
		}
	}
	allow = {
		always = yes
	}
	effect = {
		custom_tooltip = apsr_enclave_defence_button_07_info
		hidden_effect = {	
			remove_country_flag = apsr_enclave_defence_button_01_pressed
			remove_country_flag = apsr_enclave_defence_button_02_pressed	
			remove_country_flag = apsr_enclave_defence_button_03_pressed
			remove_country_flag = apsr_enclave_defence_button_04_pressed
			remove_country_flag = apsr_enclave_defence_button_05_pressed
			remove_country_flag = apsr_enclave_defence_button_06_pressed
			set_country_flag = apsr_enclave_defence_button_07_pressed
			remove_country_flag = apsr_enclave_defence_button_08_pressed
			remove_country_flag = apsr_enclave_defence_button_09_pressed
			remove_country_flag = apsr_enclave_defence_button_10_pressed
			remove_country_flag = apsr_enclave_defence_button_11_pressed
			remove_country_flag = apsr_enclave_defence_button_12_pressed
			remove_country_flag = apsr_enclave_defence_button_13_pressed
			remove_country_flag = apsr_enclave_defence_button_14_pressed
			remove_country_flag = apsr_enclave_defence_button_15_pressed	
			remove_country_flag = apsr_enclave_defence_button_16_pressed	
			remove_country_flag = apsr_enclave_defence_button_17_pressed
			remove_country_flag = apsr_enclave_defence_button_18_pressed
			remove_country_flag = apsr_enclave_defence_button_19_pressed
			remove_country_flag = apsr_enclave_defence_button_20_pressed	
		}
	}
}

# условие отображения описания слева
apsr_enclave_defence_button_07_pressed = {
	potential = {
		has_country_flag = apsr_enclave_defence_button_07_pressed
	}
	allow = {
		always = yes
	}
	effect = {
	}
}

# условие отображения кнопки покупки
apsr_enclave_defence_button_07_buy = {
	potential = {
		has_country_flag = apsr_enclave_defence_button_07_pressed
	}
	allow = {
		custom_tooltip = {
			fail_text = "apsr_enclave_defence_button_07_failtext"
			resource_stockpile_compare = { resource = apsr_knowledge value >= 900 }
		}
	}
	effect = {
		custom_tooltip = apsr_enclave_defence_buy_desc
		hidden_effect = {	
			add_resource = { apsr_knowledge = -900 }
			set_country_flag = apsr_enclave_defence_button_07_purchase
			give_technology = { tech = tech_apsr_enclave_defence_button_07_bonus message = no }	
			remove_country_flag = apsr_enclave_defence_button_07_pressed
			event_target:global_event_country = {
				change_variable = {
					which = apsr_ancients_count
					value = 1
				}
			}
			change_variable = {
				which = apsr_achimod_improvements_purchased_count
				value = 1
			}
			change_variable = {
				which = apsr_enclave_defence_improvements_purchased_count
				value = 1
			}
			if = {
				limit = {
					check_variable = {
						which = apsr_enclave_defence_improvements_purchased_count
						value = 5
					}
				}
				random_list = {
					10 = {
						set_country_flag = apsr_enclave_defence_set_1_bonus_is_01
						give_technology = { tech = tech_apsr_enclave_defence_bonus_01 message = no }	
					}
					10 = {
						set_country_flag = apsr_enclave_defence_set_1_bonus_is_02
						give_technology = { tech = tech_apsr_enclave_defence_bonus_02 message = no }
					}
					10 = {
						set_country_flag = apsr_enclave_defence_set_1_bonus_is_03
						give_technology = { tech = tech_apsr_enclave_defence_bonus_03 message = no }
					}
					10 = {
						set_country_flag = apsr_enclave_defence_set_1_bonus_is_04
						give_technology = { tech = tech_apsr_enclave_defence_bonus_04 message = no }
					}
					10 = {
						set_country_flag = apsr_enclave_defence_set_1_bonus_is_05
						give_technology = { tech = tech_apsr_enclave_defence_bonus_05 message = no }
					}
					2 = {
						set_country_flag = apsr_enclave_defence_set_1_bonus_is_06
						give_technology = { tech = tech_apsr_enclave_defence_bonus_06 message = no }
					}
					2 = {
						set_country_flag = apsr_enclave_defence_set_1_bonus_is_07
						give_technology = { tech = tech_apsr_enclave_defence_bonus_07 message = no }
					}
					2 = {
						set_country_flag = apsr_enclave_defence_set_1_bonus_is_08
						give_technology = { tech = tech_apsr_enclave_defence_bonus_08 message = no }
					}
				}
			}
			if = {
				limit = {
					check_variable = {
						which = apsr_enclave_defence_improvements_purchased_count
						value = 10
					}
				}
				random_list = {
					10 = {
						modifier = {
							factor = 0
							has_country_flag = apsr_enclave_defence_set_1_bonus_is_01
						}
						set_country_flag = apsr_enclave_defence_set_2_bonus_is_01
						give_technology = { tech = tech_apsr_enclave_defence_bonus_01 message = no }	
					}
					10 = {
						modifier = {
							factor = 0
							has_country_flag = apsr_enclave_defence_set_1_bonus_is_02
						}
						set_country_flag = apsr_enclave_defence_set_2_bonus_is_02
						give_technology = { tech = tech_apsr_enclave_defence_bonus_02 message = no }
					}
					10 = {
						modifier = {
							factor = 0
							has_country_flag = apsr_enclave_defence_set_1_bonus_is_03
						}
						set_country_flag = apsr_enclave_defence_set_2_bonus_is_03
						give_technology = { tech = tech_apsr_enclave_defence_bonus_03 message = no }
					}
					10 = {
						modifier = {
							factor = 0
							has_country_flag = apsr_enclave_defence_set_1_bonus_is_04
						}
						set_country_flag = apsr_enclave_defence_set_2_bonus_is_04
						give_technology = { tech = tech_apsr_enclave_defence_bonus_04 message = no }
					}
					10 = {
						modifier = {
							factor = 0
							has_country_flag = apsr_enclave_defence_set_1_bonus_is_05
						}
						set_country_flag = apsr_enclave_defence_set_2_bonus_is_05
						give_technology = { tech = tech_apsr_enclave_defence_bonus_05 message = no }
					}
					2 = {
						modifier = {
							factor = 0
							has_country_flag = apsr_enclave_defence_set_1_bonus_is_06
						}
						set_country_flag = apsr_enclave_defence_set_2_bonus_is_06
						give_technology = { tech = tech_apsr_enclave_defence_bonus_06 message = no }
					}
					2 = {
						modifier = {
							factor = 0
							has_country_flag = apsr_enclave_defence_set_1_bonus_is_07
						}
						set_country_flag = apsr_enclave_defence_set_2_bonus_is_07
						give_technology = { tech = tech_apsr_enclave_defence_bonus_07 message = no }
					}
					2 = {
						modifier = {
							factor = 0
							has_country_flag = apsr_enclave_defence_set_1_bonus_is_08
						}
						set_country_flag = apsr_enclave_defence_set_2_bonus_is_08
						give_technology = { tech = tech_apsr_enclave_defence_bonus_08 message = no }
					}
				}
			}
			
		}
	}
}

# кнопка выбора улучшения после покупки
apsr_enclave_defence_button_07_purchased = {
	potential = {
		has_country_flag = apsr_enclave_defence_button_07_purchase
	}
	allow = {
		always = yes
	}
	effect = {
		custom_tooltip = apsr_enclave_defence_button_07_info
	}
}



### КНОПКА 08

# кнопка выбора усиления и открытия описания
apsr_enclave_defence_button_08_select = {
	potential = {
		NOT = {
			has_country_flag = apsr_enclave_defence_button_08_purchase
		}
	}
	allow = {
		always = yes
	}
	effect = {
		custom_tooltip = apsr_enclave_defence_button_08_info
		hidden_effect = {		
			remove_country_flag = apsr_enclave_defence_button_01_pressed
			remove_country_flag = apsr_enclave_defence_button_02_pressed	
			remove_country_flag = apsr_enclave_defence_button_03_pressed
			remove_country_flag = apsr_enclave_defence_button_04_pressed
			remove_country_flag = apsr_enclave_defence_button_05_pressed
			remove_country_flag = apsr_enclave_defence_button_06_pressed
			remove_country_flag = apsr_enclave_defence_button_07_pressed
			set_country_flag = apsr_enclave_defence_button_08_pressed
			remove_country_flag = apsr_enclave_defence_button_09_pressed
			remove_country_flag = apsr_enclave_defence_button_10_pressed
			remove_country_flag = apsr_enclave_defence_button_11_pressed
			remove_country_flag = apsr_enclave_defence_button_12_pressed
			remove_country_flag = apsr_enclave_defence_button_13_pressed
			remove_country_flag = apsr_enclave_defence_button_14_pressed
			remove_country_flag = apsr_enclave_defence_button_15_pressed	
			remove_country_flag = apsr_enclave_defence_button_16_pressed	
			remove_country_flag = apsr_enclave_defence_button_17_pressed
			remove_country_flag = apsr_enclave_defence_button_18_pressed
			remove_country_flag = apsr_enclave_defence_button_19_pressed
			remove_country_flag = apsr_enclave_defence_button_20_pressed	
		}
	}
}

# условие отображения описания слева
apsr_enclave_defence_button_08_pressed = {
	potential = {
		has_country_flag = apsr_enclave_defence_button_08_pressed
	}
	allow = {
		always = yes
	}
	effect = {
	}
}

# условие отображения кнопки покупки
apsr_enclave_defence_button_08_buy = {
	potential = {
		has_country_flag = apsr_enclave_defence_button_08_pressed
	}
	allow = {
		custom_tooltip = {
			fail_text = "apsr_enclave_defence_button_08_failtext"
			resource_stockpile_compare = { resource = apsr_knowledge value >= 900 }
		}
	}
	effect = {
		custom_tooltip = apsr_enclave_defence_buy_desc
		hidden_effect = {	
			add_resource = { apsr_knowledge = -900 }
			set_country_flag = apsr_enclave_defence_button_08_purchase
			give_technology = { tech = tech_apsr_enclave_defence_button_08_bonus message = no }	
			remove_country_flag = apsr_enclave_defence_button_08_pressed	
			event_target:global_event_country = {
				change_variable = {
					which = apsr_ancients_count
					value = 1
				}
			}
			change_variable = {
				which = apsr_achimod_improvements_purchased_count
				value = 1
			}
			change_variable = {
				which = apsr_enclave_defence_improvements_purchased_count
				value = 1
			}
			if = {
				limit = {
					check_variable = {
						which = apsr_enclave_defence_improvements_purchased_count
						value = 5
					}
				}
				random_list = {
					10 = {
						set_country_flag = apsr_enclave_defence_set_1_bonus_is_01
						give_technology = { tech = tech_apsr_enclave_defence_bonus_01 message = no }	
					}
					10 = {
						set_country_flag = apsr_enclave_defence_set_1_bonus_is_02
						give_technology = { tech = tech_apsr_enclave_defence_bonus_02 message = no }
					}
					10 = {
						set_country_flag = apsr_enclave_defence_set_1_bonus_is_03
						give_technology = { tech = tech_apsr_enclave_defence_bonus_03 message = no }
					}
					10 = {
						set_country_flag = apsr_enclave_defence_set_1_bonus_is_04
						give_technology = { tech = tech_apsr_enclave_defence_bonus_04 message = no }
					}
					10 = {
						set_country_flag = apsr_enclave_defence_set_1_bonus_is_05
						give_technology = { tech = tech_apsr_enclave_defence_bonus_05 message = no }
					}
					2 = {
						set_country_flag = apsr_enclave_defence_set_1_bonus_is_06
						give_technology = { tech = tech_apsr_enclave_defence_bonus_06 message = no }
					}
					2 = {
						set_country_flag = apsr_enclave_defence_set_1_bonus_is_07
						give_technology = { tech = tech_apsr_enclave_defence_bonus_07 message = no }
					}
					2 = {
						set_country_flag = apsr_enclave_defence_set_1_bonus_is_08
						give_technology = { tech = tech_apsr_enclave_defence_bonus_08 message = no }
					}
				}
			}
			if = {
				limit = {
					check_variable = {
						which = apsr_enclave_defence_improvements_purchased_count
						value = 10
					}
				}
				random_list = {
					10 = {
						modifier = {
							factor = 0
							has_country_flag = apsr_enclave_defence_set_1_bonus_is_01
						}
						set_country_flag = apsr_enclave_defence_set_2_bonus_is_01
						give_technology = { tech = tech_apsr_enclave_defence_bonus_01 message = no }	
					}
					10 = {
						modifier = {
							factor = 0
							has_country_flag = apsr_enclave_defence_set_1_bonus_is_02
						}
						set_country_flag = apsr_enclave_defence_set_2_bonus_is_02
						give_technology = { tech = tech_apsr_enclave_defence_bonus_02 message = no }
					}
					10 = {
						modifier = {
							factor = 0
							has_country_flag = apsr_enclave_defence_set_1_bonus_is_03
						}
						set_country_flag = apsr_enclave_defence_set_2_bonus_is_03
						give_technology = { tech = tech_apsr_enclave_defence_bonus_03 message = no }
					}
					10 = {
						modifier = {
							factor = 0
							has_country_flag = apsr_enclave_defence_set_1_bonus_is_04
						}
						set_country_flag = apsr_enclave_defence_set_2_bonus_is_04
						give_technology = { tech = tech_apsr_enclave_defence_bonus_04 message = no }
					}
					10 = {
						modifier = {
							factor = 0
							has_country_flag = apsr_enclave_defence_set_1_bonus_is_05
						}
						set_country_flag = apsr_enclave_defence_set_2_bonus_is_05
						give_technology = { tech = tech_apsr_enclave_defence_bonus_05 message = no }
					}
					2 = {
						modifier = {
							factor = 0
							has_country_flag = apsr_enclave_defence_set_1_bonus_is_06
						}
						set_country_flag = apsr_enclave_defence_set_2_bonus_is_06
						give_technology = { tech = tech_apsr_enclave_defence_bonus_06 message = no }
					}
					2 = {
						modifier = {
							factor = 0
							has_country_flag = apsr_enclave_defence_set_1_bonus_is_07
						}
						set_country_flag = apsr_enclave_defence_set_2_bonus_is_07
						give_technology = { tech = tech_apsr_enclave_defence_bonus_07 message = no }
					}
					2 = {
						modifier = {
							factor = 0
							has_country_flag = apsr_enclave_defence_set_1_bonus_is_08
						}
						set_country_flag = apsr_enclave_defence_set_2_bonus_is_08
						give_technology = { tech = tech_apsr_enclave_defence_bonus_08 message = no }
					}
				}
			}
			
		}
	}
}

# кнопка выбора улучшения после покупки
apsr_enclave_defence_button_08_purchased = {
	potential = {
		has_country_flag = apsr_enclave_defence_button_08_purchase
	}
	allow = {
		always = yes
	}
	effect = {
		custom_tooltip = apsr_enclave_defence_button_08_info
	}
}



### КНОПКА 09

# кнопка выбора усиления и открытия описания
apsr_enclave_defence_button_09_select = {
	potential = {
		NOT = {
			has_country_flag = apsr_enclave_defence_button_09_purchase
		}
	}
	allow = {
		always = yes
	}
	effect = {
		custom_tooltip = apsr_enclave_defence_button_09_info
		hidden_effect = {		
			remove_country_flag = apsr_enclave_defence_button_01_pressed
			remove_country_flag = apsr_enclave_defence_button_02_pressed	
			remove_country_flag = apsr_enclave_defence_button_03_pressed
			remove_country_flag = apsr_enclave_defence_button_04_pressed
			remove_country_flag = apsr_enclave_defence_button_05_pressed
			remove_country_flag = apsr_enclave_defence_button_06_pressed
			remove_country_flag = apsr_enclave_defence_button_07_pressed
			remove_country_flag = apsr_enclave_defence_button_08_pressed
			set_country_flag = apsr_enclave_defence_button_09_pressed
			remove_country_flag = apsr_enclave_defence_button_10_pressed
			remove_country_flag = apsr_enclave_defence_button_11_pressed
			remove_country_flag = apsr_enclave_defence_button_12_pressed
			remove_country_flag = apsr_enclave_defence_button_13_pressed
			remove_country_flag = apsr_enclave_defence_button_14_pressed
			remove_country_flag = apsr_enclave_defence_button_15_pressed	
			remove_country_flag = apsr_enclave_defence_button_16_pressed	
			remove_country_flag = apsr_enclave_defence_button_17_pressed
			remove_country_flag = apsr_enclave_defence_button_18_pressed	
			remove_country_flag = apsr_enclave_defence_button_19_pressed
			remove_country_flag = apsr_enclave_defence_button_20_pressed
		}
	}
}

# условие отображения описания слева
apsr_enclave_defence_button_09_pressed = {
	potential = {
		has_country_flag = apsr_enclave_defence_button_09_pressed
	}
	allow = {
		always = yes
	}
	effect = {
	}
}

# условие отображения кнопки покупки
apsr_enclave_defence_button_09_buy = {
	potential = {
		has_country_flag = apsr_enclave_defence_button_09_pressed
	}
	allow = {
		custom_tooltip = {
			fail_text = "apsr_enclave_defence_button_09_failtext"
			resource_stockpile_compare = { resource = apsr_knowledge value >= 900 }
		}
	}
	effect = {
		custom_tooltip = apsr_enclave_defence_buy_desc
		hidden_effect = {	
			add_resource = { apsr_knowledge = -900 }
			set_country_flag = apsr_enclave_defence_button_09_purchase
			give_technology = { tech = tech_apsr_enclave_defence_button_09_bonus message = no }	
			remove_country_flag = apsr_enclave_defence_button_09_pressed
			event_target:global_event_country = {
				change_variable = {
					which = apsr_ancients_count
					value = 1
				}
			}
			change_variable = {
				which = apsr_achimod_improvements_purchased_count
				value = 1
			}
			change_variable = {
				which = apsr_enclave_defence_improvements_purchased_count
				value = 1
			}
			if = {
				limit = {
					check_variable = {
						which = apsr_enclave_defence_improvements_purchased_count
						value = 5
					}
				}
				random_list = {
					10 = {
						set_country_flag = apsr_enclave_defence_set_1_bonus_is_01
						give_technology = { tech = tech_apsr_enclave_defence_bonus_01 message = no }	
					}
					10 = {
						set_country_flag = apsr_enclave_defence_set_1_bonus_is_02
						give_technology = { tech = tech_apsr_enclave_defence_bonus_02 message = no }
					}
					10 = {
						set_country_flag = apsr_enclave_defence_set_1_bonus_is_03
						give_technology = { tech = tech_apsr_enclave_defence_bonus_03 message = no }
					}
					10 = {
						set_country_flag = apsr_enclave_defence_set_1_bonus_is_04
						give_technology = { tech = tech_apsr_enclave_defence_bonus_04 message = no }
					}
					10 = {
						set_country_flag = apsr_enclave_defence_set_1_bonus_is_05
						give_technology = { tech = tech_apsr_enclave_defence_bonus_05 message = no }
					}
					2 = {
						set_country_flag = apsr_enclave_defence_set_1_bonus_is_06
						give_technology = { tech = tech_apsr_enclave_defence_bonus_06 message = no }
					}
					2 = {
						set_country_flag = apsr_enclave_defence_set_1_bonus_is_07
						give_technology = { tech = tech_apsr_enclave_defence_bonus_07 message = no }
					}
					2 = {
						set_country_flag = apsr_enclave_defence_set_1_bonus_is_08
						give_technology = { tech = tech_apsr_enclave_defence_bonus_08 message = no }
					}
				}
			}
			if = {
				limit = {
					check_variable = {
						which = apsr_enclave_defence_improvements_purchased_count
						value = 10
					}
				}
				random_list = {
					10 = {
						modifier = {
							factor = 0
							has_country_flag = apsr_enclave_defence_set_1_bonus_is_01
						}
						set_country_flag = apsr_enclave_defence_set_2_bonus_is_01
						give_technology = { tech = tech_apsr_enclave_defence_bonus_01 message = no }	
					}
					10 = {
						modifier = {
							factor = 0
							has_country_flag = apsr_enclave_defence_set_1_bonus_is_02
						}
						set_country_flag = apsr_enclave_defence_set_2_bonus_is_02
						give_technology = { tech = tech_apsr_enclave_defence_bonus_02 message = no }
					}
					10 = {
						modifier = {
							factor = 0
							has_country_flag = apsr_enclave_defence_set_1_bonus_is_03
						}
						set_country_flag = apsr_enclave_defence_set_2_bonus_is_03
						give_technology = { tech = tech_apsr_enclave_defence_bonus_03 message = no }
					}
					10 = {
						modifier = {
							factor = 0
							has_country_flag = apsr_enclave_defence_set_1_bonus_is_04
						}
						set_country_flag = apsr_enclave_defence_set_2_bonus_is_04
						give_technology = { tech = tech_apsr_enclave_defence_bonus_04 message = no }
					}
					10 = {
						modifier = {
							factor = 0
							has_country_flag = apsr_enclave_defence_set_1_bonus_is_05
						}
						set_country_flag = apsr_enclave_defence_set_2_bonus_is_05
						give_technology = { tech = tech_apsr_enclave_defence_bonus_05 message = no }
					}
					2 = {
						modifier = {
							factor = 0
							has_country_flag = apsr_enclave_defence_set_1_bonus_is_06
						}
						set_country_flag = apsr_enclave_defence_set_2_bonus_is_06
						give_technology = { tech = tech_apsr_enclave_defence_bonus_06 message = no }
					}
					2 = {
						modifier = {
							factor = 0
							has_country_flag = apsr_enclave_defence_set_1_bonus_is_07
						}
						set_country_flag = apsr_enclave_defence_set_2_bonus_is_07
						give_technology = { tech = tech_apsr_enclave_defence_bonus_07 message = no }
					}
					2 = {
						modifier = {
							factor = 0
							has_country_flag = apsr_enclave_defence_set_1_bonus_is_08
						}
						set_country_flag = apsr_enclave_defence_set_2_bonus_is_08
						give_technology = { tech = tech_apsr_enclave_defence_bonus_08 message = no }
					}
				}
			}
			
		}
	}
}

# кнопка выбора улучшения после покупки
apsr_enclave_defence_button_09_purchased = {
	potential = {
		has_country_flag = apsr_enclave_defence_button_09_purchase
	}
	allow = {
		always = yes
	}
	effect = {
		custom_tooltip = apsr_enclave_defence_button_09_info
	}
}



### КНОПКА 10

# кнопка выбора усиления и открытия описания
apsr_enclave_defence_button_10_select = {
	potential = {
		NOT = {
			has_country_flag = apsr_enclave_defence_button_10_purchase
		}
	}
	allow = {
		always = yes
	}
	effect = {
		custom_tooltip = apsr_enclave_defence_button_10_info
		hidden_effect = {		
			remove_country_flag = apsr_enclave_defence_button_01_pressed
			remove_country_flag = apsr_enclave_defence_button_02_pressed	
			remove_country_flag = apsr_enclave_defence_button_03_pressed
			remove_country_flag = apsr_enclave_defence_button_04_pressed
			remove_country_flag = apsr_enclave_defence_button_05_pressed
			remove_country_flag = apsr_enclave_defence_button_06_pressed
			remove_country_flag = apsr_enclave_defence_button_07_pressed
			remove_country_flag = apsr_enclave_defence_button_08_pressed
			remove_country_flag = apsr_enclave_defence_button_09_pressed
			set_country_flag = apsr_enclave_defence_button_10_pressed
			remove_country_flag = apsr_enclave_defence_button_11_pressed
			remove_country_flag = apsr_enclave_defence_button_12_pressed
			remove_country_flag = apsr_enclave_defence_button_13_pressed
			remove_country_flag = apsr_enclave_defence_button_14_pressed
			remove_country_flag = apsr_enclave_defence_button_15_pressed	
			remove_country_flag = apsr_enclave_defence_button_16_pressed	
			remove_country_flag = apsr_enclave_defence_button_17_pressed
			remove_country_flag = apsr_enclave_defence_button_18_pressed	
			remove_country_flag = apsr_enclave_defence_button_19_pressed
			remove_country_flag = apsr_enclave_defence_button_20_pressed	
		}
	}
}

# условие отображения описания слева
apsr_enclave_defence_button_10_pressed = {
	potential = {
		has_country_flag = apsr_enclave_defence_button_10_pressed
	}
	allow = {
		always = yes
	}
	effect = {
	}
}

# условие отображения кнопки покупки
apsr_enclave_defence_button_10_buy = {
	potential = {
		has_country_flag = apsr_enclave_defence_button_10_pressed
	}
	allow = {
		custom_tooltip = {
			fail_text = "apsr_enclave_defence_button_10_failtext"
			resource_stockpile_compare = { resource = apsr_knowledge value >= 900 }
		}
	}
	effect = {
		custom_tooltip = apsr_enclave_defence_buy_desc
		hidden_effect = {	
			add_resource = { apsr_knowledge = -900 }
			set_country_flag = apsr_enclave_defence_button_10_purchase
			give_technology = { tech = tech_apsr_enclave_defence_button_10_bonus message = no }	
			remove_country_flag = apsr_enclave_defence_button_10_pressed
			event_target:global_event_country = {
				change_variable = {
					which = apsr_ancients_count
					value = 1
				}
			}
			change_variable = {
				which = apsr_achimod_improvements_purchased_count
				value = 1
			}
			change_variable = {
				which = apsr_enclave_defence_improvements_purchased_count
				value = 1
			}
			if = {
				limit = {
					check_variable = {
						which = apsr_enclave_defence_improvements_purchased_count
						value = 5
					}
				}
				random_list = {
					10 = {
						set_country_flag = apsr_enclave_defence_set_1_bonus_is_01
						give_technology = { tech = tech_apsr_enclave_defence_bonus_01 message = no }	
					}
					10 = {
						set_country_flag = apsr_enclave_defence_set_1_bonus_is_02
						give_technology = { tech = tech_apsr_enclave_defence_bonus_02 message = no }
					}
					10 = {
						set_country_flag = apsr_enclave_defence_set_1_bonus_is_03
						give_technology = { tech = tech_apsr_enclave_defence_bonus_03 message = no }
					}
					10 = {
						set_country_flag = apsr_enclave_defence_set_1_bonus_is_04
						give_technology = { tech = tech_apsr_enclave_defence_bonus_04 message = no }
					}
					10 = {
						set_country_flag = apsr_enclave_defence_set_1_bonus_is_05
						give_technology = { tech = tech_apsr_enclave_defence_bonus_05 message = no }
					}
					2 = {
						set_country_flag = apsr_enclave_defence_set_1_bonus_is_06
						give_technology = { tech = tech_apsr_enclave_defence_bonus_06 message = no }
					}
					2 = {
						set_country_flag = apsr_enclave_defence_set_1_bonus_is_07
						give_technology = { tech = tech_apsr_enclave_defence_bonus_07 message = no }
					}
					2 = {
						set_country_flag = apsr_enclave_defence_set_1_bonus_is_08
						give_technology = { tech = tech_apsr_enclave_defence_bonus_08 message = no }
					}
				}
			}
			if = {
				limit = {
					check_variable = {
						which = apsr_enclave_defence_improvements_purchased_count
						value = 10
					}
				}
				random_list = {
					10 = {
						modifier = {
							factor = 0
							has_country_flag = apsr_enclave_defence_set_1_bonus_is_01
						}
						set_country_flag = apsr_enclave_defence_set_2_bonus_is_01
						give_technology = { tech = tech_apsr_enclave_defence_bonus_01 message = no }	
					}
					10 = {
						modifier = {
							factor = 0
							has_country_flag = apsr_enclave_defence_set_1_bonus_is_02
						}
						set_country_flag = apsr_enclave_defence_set_2_bonus_is_02
						give_technology = { tech = tech_apsr_enclave_defence_bonus_02 message = no }
					}
					10 = {
						modifier = {
							factor = 0
							has_country_flag = apsr_enclave_defence_set_1_bonus_is_03
						}
						set_country_flag = apsr_enclave_defence_set_2_bonus_is_03
						give_technology = { tech = tech_apsr_enclave_defence_bonus_03 message = no }
					}
					10 = {
						modifier = {
							factor = 0
							has_country_flag = apsr_enclave_defence_set_1_bonus_is_04
						}
						set_country_flag = apsr_enclave_defence_set_2_bonus_is_04
						give_technology = { tech = tech_apsr_enclave_defence_bonus_04 message = no }
					}
					10 = {
						modifier = {
							factor = 0
							has_country_flag = apsr_enclave_defence_set_1_bonus_is_05
						}
						set_country_flag = apsr_enclave_defence_set_2_bonus_is_05
						give_technology = { tech = tech_apsr_enclave_defence_bonus_05 message = no }
					}
					2 = {
						modifier = {
							factor = 0
							has_country_flag = apsr_enclave_defence_set_1_bonus_is_06
						}
						set_country_flag = apsr_enclave_defence_set_2_bonus_is_06
						give_technology = { tech = tech_apsr_enclave_defence_bonus_06 message = no }
					}
					2 = {
						modifier = {
							factor = 0
							has_country_flag = apsr_enclave_defence_set_1_bonus_is_07
						}
						set_country_flag = apsr_enclave_defence_set_2_bonus_is_07
						give_technology = { tech = tech_apsr_enclave_defence_bonus_07 message = no }
					}
					2 = {
						modifier = {
							factor = 0
							has_country_flag = apsr_enclave_defence_set_1_bonus_is_08
						}
						set_country_flag = apsr_enclave_defence_set_2_bonus_is_08
						give_technology = { tech = tech_apsr_enclave_defence_bonus_08 message = no }
					}
				}
			}
			
		}
	}
}

# кнопка выбора улучшения после покупки
apsr_enclave_defence_button_10_purchased = {
	potential = {
		has_country_flag = apsr_enclave_defence_button_10_purchase
	}
	allow = {
		always = yes
	}
	effect = {
		custom_tooltip = apsr_enclave_defence_button_10_info
	}
}



### КНОПКА 11

# кнопка выбора усиления и открытия описания
apsr_enclave_defence_button_11_select = {
	potential = {
		NOT = {
			has_country_flag = apsr_enclave_defence_button_11_purchase
		}
	}
	allow = {
		always = yes
	}
	effect = {
		custom_tooltip = apsr_enclave_defence_button_11_info
		hidden_effect = {		
			remove_country_flag = apsr_enclave_defence_button_01_pressed
			remove_country_flag = apsr_enclave_defence_button_02_pressed	
			remove_country_flag = apsr_enclave_defence_button_03_pressed
			remove_country_flag = apsr_enclave_defence_button_04_pressed
			remove_country_flag = apsr_enclave_defence_button_05_pressed
			remove_country_flag = apsr_enclave_defence_button_06_pressed
			remove_country_flag = apsr_enclave_defence_button_07_pressed
			remove_country_flag = apsr_enclave_defence_button_08_pressed
			remove_country_flag = apsr_enclave_defence_button_09_pressed
			remove_country_flag = apsr_enclave_defence_button_10_pressed
			set_country_flag = apsr_enclave_defence_button_11_pressed
			remove_country_flag = apsr_enclave_defence_button_12_pressed
			remove_country_flag = apsr_enclave_defence_button_13_pressed
			remove_country_flag = apsr_enclave_defence_button_14_pressed
			remove_country_flag = apsr_enclave_defence_button_15_pressed	
			remove_country_flag = apsr_enclave_defence_button_16_pressed	
			remove_country_flag = apsr_enclave_defence_button_17_pressed
			remove_country_flag = apsr_enclave_defence_button_18_pressed	
			remove_country_flag = apsr_enclave_defence_button_19_pressed
			remove_country_flag = apsr_enclave_defence_button_20_pressed
		}
	}
}

# условие отображения описания слева
apsr_enclave_defence_button_11_pressed = {
	potential = {
		has_country_flag = apsr_enclave_defence_button_11_pressed
	}
	allow = {
		always = yes
	}
	effect = {
	}
}

# условие отображения кнопки покупки
apsr_enclave_defence_button_11_buy = {
	potential = {
		has_country_flag = apsr_enclave_defence_button_11_pressed
	}
	allow = {
		custom_tooltip = {
			fail_text = "apsr_enclave_defence_button_11_failtext"
			resource_stockpile_compare = { resource = apsr_knowledge value >= 1600 }
		}
	}
	effect = {
		custom_tooltip = apsr_enclave_defence_buy_desc
		hidden_effect = {	
			add_resource = { apsr_knowledge = -1600 }
			set_country_flag = apsr_enclave_defence_button_11_purchase
			give_technology = { tech = tech_apsr_enclave_defence_button_11_bonus message = no }	
			remove_country_flag = apsr_enclave_defence_button_11_pressed
			event_target:global_event_country = {
				change_variable = {
					which = apsr_ancients_count
					value = 3
				}
			}
			change_variable = {
				which = apsr_achimod_improvements_purchased_count
				value = 1
			}
			change_variable = {
				which = apsr_enclave_defence_improvements_purchased_count
				value = 1
			}
			if = {
				limit = {
					check_variable = {
						which = apsr_enclave_defence_improvements_purchased_count
						value = 15
					}
				}
				random_list = {
					5 = {
						modifier = {
							factor = 0
							OR = {
								has_country_flag = apsr_enclave_defence_set_1_bonus_is_01
								has_country_flag = apsr_enclave_defence_set_2_bonus_is_01
							}
						}
						set_country_flag = apsr_enclave_defence_set_3_bonus_is_01
						give_technology = { tech = tech_apsr_enclave_defence_bonus_01 message = no }	
					}
					5 = {
						modifier = {
							factor = 0
							OR = {
								has_country_flag = apsr_enclave_defence_set_1_bonus_is_02
								has_country_flag = apsr_enclave_defence_set_2_bonus_is_02
							}
						}
						set_country_flag = apsr_enclave_defence_set_3_bonus_is_02
						give_technology = { tech = tech_apsr_enclave_defence_bonus_02 message = no }
					}
					5 = {
						modifier = {
							factor = 0
							OR = {
								has_country_flag = apsr_enclave_defence_set_1_bonus_is_03
								has_country_flag = apsr_enclave_defence_set_2_bonus_is_03
							}
						}
						set_country_flag = apsr_enclave_defence_set_3_bonus_is_03
						give_technology = { tech = tech_apsr_enclave_defence_bonus_03 message = no }
					}
					5 = {
						modifier = {
							factor = 0
							OR = {
								has_country_flag = apsr_enclave_defence_set_1_bonus_is_04
								has_country_flag = apsr_enclave_defence_set_2_bonus_is_04
							}
						}
						set_country_flag = apsr_enclave_defence_set_3_bonus_is_04
						give_technology = { tech = tech_apsr_enclave_defence_bonus_04 message = no }
					}
					5 = {
						modifier = {
							factor = 0
							OR = {
								has_country_flag = apsr_enclave_defence_set_1_bonus_is_05
								has_country_flag = apsr_enclave_defence_set_2_bonus_is_05
							}
						}
						set_country_flag = apsr_enclave_defence_set_3_bonus_is_05
						give_technology = { tech = tech_apsr_enclave_defence_bonus_05 message = no }
					}
					10 = {
						modifier = {
							factor = 0
							OR = {
								has_country_flag = apsr_enclave_defence_set_1_bonus_is_06
								has_country_flag = apsr_enclave_defence_set_2_bonus_is_06
							}
						}
						set_country_flag = apsr_enclave_defence_set_3_bonus_is_06
						give_technology = { tech = tech_apsr_enclave_defence_bonus_06 message = no }
					}
					10 = {
						modifier = {
							factor = 0
							OR = {
								has_country_flag = apsr_enclave_defence_set_1_bonus_is_07
								has_country_flag = apsr_enclave_defence_set_2_bonus_is_07
							}
						}
						set_country_flag = apsr_enclave_defence_set_3_bonus_is_07
						give_technology = { tech = tech_apsr_enclave_defence_bonus_07 message = no }
					}
					10 = {
						modifier = {
							factor = 0
							OR = {
								has_country_flag = apsr_enclave_defence_set_1_bonus_is_08
								has_country_flag = apsr_enclave_defence_set_2_bonus_is_08
							}
						}
						set_country_flag = apsr_enclave_defence_set_3_bonus_is_08
						give_technology = { tech = tech_apsr_enclave_defence_bonus_08 message = no }
					}
					5 = {
						set_country_flag = apsr_enclave_defence_set_3_bonus_is_09
						give_technology = { tech = tech_apsr_enclave_defence_bonus_09 message = no }
					}
					5 = {
						set_country_flag = apsr_enclave_defence_set_3_bonus_is_10
						give_technology = { tech = tech_apsr_enclave_defence_bonus_10 message = no }
					}
					5 = {
						set_country_flag = apsr_enclave_defence_set_3_bonus_is_11
						give_technology = { tech = tech_apsr_enclave_defence_bonus_11 message = no }
					}
					1 = {
						set_country_flag = apsr_enclave_defence_set_3_bonus_is_12
						give_technology = { tech = tech_apsr_enclave_defence_bonus_12 message = no }
					}
					1 = {
						set_country_flag = apsr_enclave_defence_set_3_bonus_is_13
						give_technology = { tech = tech_apsr_enclave_defence_bonus_13 message = no }
					}
				}
			}
		}
	}
}

# кнопка выбора улучшения после покупки
apsr_enclave_defence_button_11_purchased = {
	potential = {
		has_country_flag = apsr_enclave_defence_button_11_purchase
	}
	allow = {
		always = yes
	}
	effect = {
		custom_tooltip = apsr_enclave_defence_button_11_info
	}
}

# кнопка закрыта
apsr_enclave_defence_button_11_locked = {
	potential = {
		NOT = {
			AND = {
				has_country_flag = apsr_enclave_defence_button_01_purchase
				has_country_flag = apsr_enclave_defence_button_02_purchase
				has_country_flag = apsr_enclave_defence_button_03_purchase
				has_country_flag = apsr_enclave_defence_button_04_purchase
				has_country_flag = apsr_enclave_defence_button_05_purchase
				has_country_flag = apsr_enclave_defence_button_06_purchase
				has_country_flag = apsr_enclave_defence_button_07_purchase
				has_country_flag = apsr_enclave_defence_button_08_purchase
				has_country_flag = apsr_enclave_defence_button_09_purchase
				has_country_flag = apsr_enclave_defence_button_10_purchase
			}
		}
	}
	allow = {
		always = yes
	}
	effect = {
		custom_tooltip = apsr_enclave_defence_locked
	}
}



### КНОПКА 12

# кнопка выбора усиления и открытия описания
apsr_enclave_defence_button_12_select = {
	potential = {
		NOT = {
			has_country_flag = apsr_enclave_defence_button_12_purchase
		}
	}
	allow = {
		always = yes
	}
	effect = {
		custom_tooltip = apsr_enclave_defence_button_12_info
		hidden_effect = {		
			remove_country_flag = apsr_enclave_defence_button_01_pressed
			remove_country_flag = apsr_enclave_defence_button_02_pressed	
			remove_country_flag = apsr_enclave_defence_button_03_pressed
			remove_country_flag = apsr_enclave_defence_button_04_pressed
			remove_country_flag = apsr_enclave_defence_button_05_pressed
			remove_country_flag = apsr_enclave_defence_button_06_pressed
			remove_country_flag = apsr_enclave_defence_button_07_pressed
			remove_country_flag = apsr_enclave_defence_button_08_pressed
			remove_country_flag = apsr_enclave_defence_button_09_pressed
			remove_country_flag = apsr_enclave_defence_button_10_pressed
			remove_country_flag = apsr_enclave_defence_button_11_pressed
			set_country_flag = apsr_enclave_defence_button_12_pressed
			remove_country_flag = apsr_enclave_defence_button_13_pressed
			remove_country_flag = apsr_enclave_defence_button_14_pressed
			remove_country_flag = apsr_enclave_defence_button_15_pressed	
			remove_country_flag = apsr_enclave_defence_button_16_pressed	
			remove_country_flag = apsr_enclave_defence_button_17_pressed
			remove_country_flag = apsr_enclave_defence_button_18_pressed
			remove_country_flag = apsr_enclave_defence_button_19_pressed
			remove_country_flag = apsr_enclave_defence_button_20_pressed	
		}
	}
}

# условие отображения описания слева
apsr_enclave_defence_button_12_pressed = {
	potential = {
		has_country_flag = apsr_enclave_defence_button_12_pressed
	}
	allow = {
		always = yes
	}
	effect = {
	}
}

# условие отображения кнопки покупки
apsr_enclave_defence_button_12_buy = {
	potential = {
		has_country_flag = apsr_enclave_defence_button_12_pressed
	}
	allow = {
		custom_tooltip = {
			fail_text = "apsr_enclave_defence_button_12_failtext"
			resource_stockpile_compare = { resource = apsr_knowledge value >= 1600 }
		}
	}
	effect = {
		custom_tooltip = apsr_enclave_defence_buy_desc
		hidden_effect = {	
			add_resource = { apsr_knowledge = -1600 }
			set_country_flag = apsr_enclave_defence_button_12_purchase
			give_technology = { tech = tech_apsr_enclave_defence_button_12_bonus message = no }	
			remove_country_flag = apsr_enclave_defence_button_12_pressed
			event_target:global_event_country = {
				change_variable = {
					which = apsr_ancients_count
					value = 3
				}
			}
			change_variable = {
				which = apsr_achimod_improvements_purchased_count
				value = 1
			}
			change_variable = {
				which = apsr_enclave_defence_improvements_purchased_count
				value = 1
			}
			if = {
				limit = {
					check_variable = {
						which = apsr_enclave_defence_improvements_purchased_count
						value = 15
					}
				}
				random_list = {
					5 = {
						modifier = {
							factor = 0
							OR = {
								has_country_flag = apsr_enclave_defence_set_1_bonus_is_01
								has_country_flag = apsr_enclave_defence_set_2_bonus_is_01
							}
						}
						set_country_flag = apsr_enclave_defence_set_3_bonus_is_01
						give_technology = { tech = tech_apsr_enclave_defence_bonus_01 message = no }	
					}
					5 = {
						modifier = {
							factor = 0
							OR = {
								has_country_flag = apsr_enclave_defence_set_1_bonus_is_02
								has_country_flag = apsr_enclave_defence_set_2_bonus_is_02
							}
						}
						set_country_flag = apsr_enclave_defence_set_3_bonus_is_02
						give_technology = { tech = tech_apsr_enclave_defence_bonus_02 message = no }
					}
					5 = {
						modifier = {
							factor = 0
							OR = {
								has_country_flag = apsr_enclave_defence_set_1_bonus_is_03
								has_country_flag = apsr_enclave_defence_set_2_bonus_is_03
							}
						}
						set_country_flag = apsr_enclave_defence_set_3_bonus_is_03
						give_technology = { tech = tech_apsr_enclave_defence_bonus_03 message = no }
					}
					5 = {
						modifier = {
							factor = 0
							OR = {
								has_country_flag = apsr_enclave_defence_set_1_bonus_is_04
								has_country_flag = apsr_enclave_defence_set_2_bonus_is_04
							}
						}
						set_country_flag = apsr_enclave_defence_set_3_bonus_is_04
						give_technology = { tech = tech_apsr_enclave_defence_bonus_04 message = no }
					}
					5 = {
						modifier = {
							factor = 0
							OR = {
								has_country_flag = apsr_enclave_defence_set_1_bonus_is_05
								has_country_flag = apsr_enclave_defence_set_2_bonus_is_05
							}
						}
						set_country_flag = apsr_enclave_defence_set_3_bonus_is_05
						give_technology = { tech = tech_apsr_enclave_defence_bonus_05 message = no }
					}
					10 = {
						modifier = {
							factor = 0
							OR = {
								has_country_flag = apsr_enclave_defence_set_1_bonus_is_06
								has_country_flag = apsr_enclave_defence_set_2_bonus_is_06
							}
						}
						set_country_flag = apsr_enclave_defence_set_3_bonus_is_06
						give_technology = { tech = tech_apsr_enclave_defence_bonus_06 message = no }
					}
					10 = {
						modifier = {
							factor = 0
							OR = {
								has_country_flag = apsr_enclave_defence_set_1_bonus_is_07
								has_country_flag = apsr_enclave_defence_set_2_bonus_is_07
							}
						}
						set_country_flag = apsr_enclave_defence_set_3_bonus_is_07
						give_technology = { tech = tech_apsr_enclave_defence_bonus_07 message = no }
					}
					10 = {
						modifier = {
							factor = 0
							OR = {
								has_country_flag = apsr_enclave_defence_set_1_bonus_is_08
								has_country_flag = apsr_enclave_defence_set_2_bonus_is_08
							}
						}
						set_country_flag = apsr_enclave_defence_set_3_bonus_is_08
						give_technology = { tech = tech_apsr_enclave_defence_bonus_08 message = no }
					}
					5 = {
						set_country_flag = apsr_enclave_defence_set_3_bonus_is_09
						give_technology = { tech = tech_apsr_enclave_defence_bonus_09 message = no }
					}
					5 = {
						set_country_flag = apsr_enclave_defence_set_3_bonus_is_10
						give_technology = { tech = tech_apsr_enclave_defence_bonus_10 message = no }
					}
					5 = {
						set_country_flag = apsr_enclave_defence_set_3_bonus_is_11
						give_technology = { tech = tech_apsr_enclave_defence_bonus_11 message = no }
					}
					1 = {
						set_country_flag = apsr_enclave_defence_set_3_bonus_is_12
						give_technology = { tech = tech_apsr_enclave_defence_bonus_12 message = no }
					}
					1 = {
						set_country_flag = apsr_enclave_defence_set_3_bonus_is_13
						give_technology = { tech = tech_apsr_enclave_defence_bonus_13 message = no }
					}
				}
			}
		}
	}
}

# кнопка выбора улучшения после покупки
apsr_enclave_defence_button_12_purchased = {
	potential = {
		has_country_flag = apsr_enclave_defence_button_12_purchase
	}
	allow = {
		always = yes
	}
	effect = {
		custom_tooltip = apsr_enclave_defence_button_12_info
	}
}

# кнопка закрыта
apsr_enclave_defence_button_12_locked = {
	potential = {
		NOT = {
			AND = {
				has_country_flag = apsr_enclave_defence_button_01_purchase
				has_country_flag = apsr_enclave_defence_button_02_purchase
				has_country_flag = apsr_enclave_defence_button_03_purchase
				has_country_flag = apsr_enclave_defence_button_04_purchase
				has_country_flag = apsr_enclave_defence_button_05_purchase
				has_country_flag = apsr_enclave_defence_button_06_purchase
				has_country_flag = apsr_enclave_defence_button_07_purchase
				has_country_flag = apsr_enclave_defence_button_08_purchase
				has_country_flag = apsr_enclave_defence_button_09_purchase
				has_country_flag = apsr_enclave_defence_button_10_purchase
			}
		}
	}
	allow = {
		always = yes
	}
	effect = {
		custom_tooltip = apsr_enclave_defence_locked
	}
}



### КНОПКА 13

# кнопка выбора усиления и открытия описания
apsr_enclave_defence_button_13_select = {
	potential = {
		NOT = {
			has_country_flag = apsr_enclave_defence_button_13_purchase
		}
	}
	allow = {
		always = yes
	}
	effect = {
		custom_tooltip = apsr_enclave_defence_button_13_info
		hidden_effect = {	
			remove_country_flag = apsr_enclave_defence_button_01_pressed
			remove_country_flag = apsr_enclave_defence_button_02_pressed	
			remove_country_flag = apsr_enclave_defence_button_03_pressed
			remove_country_flag = apsr_enclave_defence_button_04_pressed
			remove_country_flag = apsr_enclave_defence_button_05_pressed
			remove_country_flag = apsr_enclave_defence_button_06_pressed
			remove_country_flag = apsr_enclave_defence_button_07_pressed
			remove_country_flag = apsr_enclave_defence_button_08_pressed
			remove_country_flag = apsr_enclave_defence_button_09_pressed
			remove_country_flag = apsr_enclave_defence_button_10_pressed
			remove_country_flag = apsr_enclave_defence_button_11_pressed
			remove_country_flag = apsr_enclave_defence_button_12_pressed
			set_country_flag = apsr_enclave_defence_button_13_pressed
			remove_country_flag = apsr_enclave_defence_button_14_pressed
			remove_country_flag = apsr_enclave_defence_button_15_pressed	
			remove_country_flag = apsr_enclave_defence_button_16_pressed	
			remove_country_flag = apsr_enclave_defence_button_17_pressed
			remove_country_flag = apsr_enclave_defence_button_18_pressed
			remove_country_flag = apsr_enclave_defence_button_19_pressed
			remove_country_flag = apsr_enclave_defence_button_20_pressed	
		}
	}
}

# условие отображения описания слева
apsr_enclave_defence_button_13_pressed = {
	potential = {
		has_country_flag = apsr_enclave_defence_button_13_pressed
	}
	allow = {
		always = yes
	}
	effect = {
	}
}

# условие отображения кнопки покупки
apsr_enclave_defence_button_13_buy = {
	potential = {
		has_country_flag = apsr_enclave_defence_button_13_pressed
	}
	allow = {
		custom_tooltip = {
			fail_text = "apsr_enclave_defence_button_13_failtext"
			resource_stockpile_compare = { resource = apsr_knowledge value >= 1600 }
		}
	}
	effect = {
		custom_tooltip = apsr_enclave_defence_buy_desc
		hidden_effect = {	
			add_resource = { apsr_knowledge = -1600 }
			set_country_flag = apsr_enclave_defence_button_13_purchase
			give_technology = { tech = tech_apsr_enclave_defence_button_13_bonus message = no }	
			remove_country_flag = apsr_enclave_defence_button_13_pressed
			event_target:global_event_country = {
				change_variable = {
					which = apsr_ancients_count
					value = 3
				}
			}
			change_variable = {
				which = apsr_achimod_improvements_purchased_count
				value = 1
			}
			change_variable = {
				which = apsr_enclave_defence_improvements_purchased_count
				value = 1
			}
			if = {
				limit = {
					check_variable = {
						which = apsr_enclave_defence_improvements_purchased_count
						value = 15
					}
				}
				random_list = {
					5 = {
						modifier = {
							factor = 0
							OR = {
								has_country_flag = apsr_enclave_defence_set_1_bonus_is_01
								has_country_flag = apsr_enclave_defence_set_2_bonus_is_01
							}
						}
						set_country_flag = apsr_enclave_defence_set_3_bonus_is_01
						give_technology = { tech = tech_apsr_enclave_defence_bonus_01 message = no }	
					}
					5 = {
						modifier = {
							factor = 0
							OR = {
								has_country_flag = apsr_enclave_defence_set_1_bonus_is_02
								has_country_flag = apsr_enclave_defence_set_2_bonus_is_02
							}
						}
						set_country_flag = apsr_enclave_defence_set_3_bonus_is_02
						give_technology = { tech = tech_apsr_enclave_defence_bonus_02 message = no }
					}
					5 = {
						modifier = {
							factor = 0
							OR = {
								has_country_flag = apsr_enclave_defence_set_1_bonus_is_03
								has_country_flag = apsr_enclave_defence_set_2_bonus_is_03
							}
						}
						set_country_flag = apsr_enclave_defence_set_3_bonus_is_03
						give_technology = { tech = tech_apsr_enclave_defence_bonus_03 message = no }
					}
					5 = {
						modifier = {
							factor = 0
							OR = {
								has_country_flag = apsr_enclave_defence_set_1_bonus_is_04
								has_country_flag = apsr_enclave_defence_set_2_bonus_is_04
							}
						}
						set_country_flag = apsr_enclave_defence_set_3_bonus_is_04
						give_technology = { tech = tech_apsr_enclave_defence_bonus_04 message = no }
					}
					5 = {
						modifier = {
							factor = 0
							OR = {
								has_country_flag = apsr_enclave_defence_set_1_bonus_is_05
								has_country_flag = apsr_enclave_defence_set_2_bonus_is_05
							}
						}
						set_country_flag = apsr_enclave_defence_set_3_bonus_is_05
						give_technology = { tech = tech_apsr_enclave_defence_bonus_05 message = no }
					}
					10 = {
						modifier = {
							factor = 0
							OR = {
								has_country_flag = apsr_enclave_defence_set_1_bonus_is_06
								has_country_flag = apsr_enclave_defence_set_2_bonus_is_06
							}
						}
						set_country_flag = apsr_enclave_defence_set_3_bonus_is_06
						give_technology = { tech = tech_apsr_enclave_defence_bonus_06 message = no }
					}
					10 = {
						modifier = {
							factor = 0
							OR = {
								has_country_flag = apsr_enclave_defence_set_1_bonus_is_07
								has_country_flag = apsr_enclave_defence_set_2_bonus_is_07
							}
						}
						set_country_flag = apsr_enclave_defence_set_3_bonus_is_07
						give_technology = { tech = tech_apsr_enclave_defence_bonus_07 message = no }
					}
					10 = {
						modifier = {
							factor = 0
							OR = {
								has_country_flag = apsr_enclave_defence_set_1_bonus_is_08
								has_country_flag = apsr_enclave_defence_set_2_bonus_is_08
							}
						}
						set_country_flag = apsr_enclave_defence_set_3_bonus_is_08
						give_technology = { tech = tech_apsr_enclave_defence_bonus_08 message = no }
					}
					5 = {
						set_country_flag = apsr_enclave_defence_set_3_bonus_is_09
						give_technology = { tech = tech_apsr_enclave_defence_bonus_09 message = no }
					}
					5 = {
						set_country_flag = apsr_enclave_defence_set_3_bonus_is_10
						give_technology = { tech = tech_apsr_enclave_defence_bonus_10 message = no }
					}
					5 = {
						set_country_flag = apsr_enclave_defence_set_3_bonus_is_11
						give_technology = { tech = tech_apsr_enclave_defence_bonus_11 message = no }
					}
					1 = {
						set_country_flag = apsr_enclave_defence_set_3_bonus_is_12
						give_technology = { tech = tech_apsr_enclave_defence_bonus_12 message = no }
					}
					1 = {
						set_country_flag = apsr_enclave_defence_set_3_bonus_is_13
						give_technology = { tech = tech_apsr_enclave_defence_bonus_13 message = no }
					}
				}
			}
		}
	}
}

# кнопка выбора улучшения после покупки
apsr_enclave_defence_button_13_purchased = {
	potential = {
		has_country_flag = apsr_enclave_defence_button_13_purchase
	}
	allow = {
		always = yes
	}
	effect = {
		custom_tooltip = apsr_enclave_defence_button_13_info
	}
}

# кнопка закрыта
apsr_enclave_defence_button_13_locked = {
	potential = {
		NOT = {
			AND = {
				has_country_flag = apsr_enclave_defence_button_01_purchase
				has_country_flag = apsr_enclave_defence_button_02_purchase
				has_country_flag = apsr_enclave_defence_button_03_purchase
				has_country_flag = apsr_enclave_defence_button_04_purchase
				has_country_flag = apsr_enclave_defence_button_05_purchase
				has_country_flag = apsr_enclave_defence_button_06_purchase
				has_country_flag = apsr_enclave_defence_button_07_purchase
				has_country_flag = apsr_enclave_defence_button_08_purchase
				has_country_flag = apsr_enclave_defence_button_09_purchase
				has_country_flag = apsr_enclave_defence_button_10_purchase
			}
		}
	}
	allow = {
		always = yes
	}
	effect = {
		custom_tooltip = apsr_enclave_defence_locked
	}
}



### КНОПКА 14

# кнопка выбора усиления и открытия описания
apsr_enclave_defence_button_14_select = {
	potential = {
		NOT = {
			has_country_flag = apsr_enclave_defence_button_14_purchase
		}
	}
	allow = {
		always = yes
	}
	effect = {
		custom_tooltip = apsr_enclave_defence_button_14_info
		hidden_effect = {	
			remove_country_flag = apsr_enclave_defence_button_01_pressed
			remove_country_flag = apsr_enclave_defence_button_02_pressed	
			remove_country_flag = apsr_enclave_defence_button_03_pressed
			remove_country_flag = apsr_enclave_defence_button_04_pressed
			remove_country_flag = apsr_enclave_defence_button_05_pressed
			remove_country_flag = apsr_enclave_defence_button_06_pressed
			remove_country_flag = apsr_enclave_defence_button_07_pressed
			remove_country_flag = apsr_enclave_defence_button_08_pressed
			remove_country_flag = apsr_enclave_defence_button_09_pressed
			remove_country_flag = apsr_enclave_defence_button_10_pressed
			remove_country_flag = apsr_enclave_defence_button_11_pressed
			remove_country_flag = apsr_enclave_defence_button_12_pressed
			remove_country_flag = apsr_enclave_defence_button_13_pressed
			set_country_flag = apsr_enclave_defence_button_14_pressed
			remove_country_flag = apsr_enclave_defence_button_15_pressed	
			remove_country_flag = apsr_enclave_defence_button_16_pressed	
			remove_country_flag = apsr_enclave_defence_button_17_pressed
			remove_country_flag = apsr_enclave_defence_button_18_pressed
			remove_country_flag = apsr_enclave_defence_button_19_pressed
			remove_country_flag = apsr_enclave_defence_button_20_pressed	
		}
	}
}

# условие отображения описания слева
apsr_enclave_defence_button_14_pressed = {
	potential = {
		has_country_flag = apsr_enclave_defence_button_14_pressed
	}
	allow = {
		always = yes
	}
	effect = {
	}
}

# условие отображения кнопки покупки
apsr_enclave_defence_button_14_buy = {
	potential = {
		has_country_flag = apsr_enclave_defence_button_14_pressed
	}
	allow = {
		custom_tooltip = {
			fail_text = "apsr_enclave_defence_button_14_failtext"
			resource_stockpile_compare = { resource = apsr_knowledge value >= 1600 }
		}
	}
	effect = {
		custom_tooltip = apsr_enclave_defence_buy_desc
		hidden_effect = {	
			add_resource = { apsr_knowledge = -1600 }
			set_country_flag = apsr_enclave_defence_button_14_purchase
			give_technology = { tech = tech_apsr_enclave_defence_button_14_bonus message = no }	
			remove_country_flag = apsr_enclave_defence_button_14_pressed
			event_target:global_event_country = {
				change_variable = {
					which = apsr_ancients_count
					value = 3
				}
			}
			change_variable = {
				which = apsr_achimod_improvements_purchased_count
				value = 1
			}
			change_variable = {
				which = apsr_enclave_defence_improvements_purchased_count
				value = 1
			}
			if = {
				limit = {
					check_variable = {
						which = apsr_enclave_defence_improvements_purchased_count
						value = 15
					}
				}
				random_list = {
					5 = {
						modifier = {
							factor = 0
							OR = {
								has_country_flag = apsr_enclave_defence_set_1_bonus_is_01
								has_country_flag = apsr_enclave_defence_set_2_bonus_is_01
							}
						}
						set_country_flag = apsr_enclave_defence_set_3_bonus_is_01
						give_technology = { tech = tech_apsr_enclave_defence_bonus_01 message = no }	
					}
					5 = {
						modifier = {
							factor = 0
							OR = {
								has_country_flag = apsr_enclave_defence_set_1_bonus_is_02
								has_country_flag = apsr_enclave_defence_set_2_bonus_is_02
							}
						}
						set_country_flag = apsr_enclave_defence_set_3_bonus_is_02
						give_technology = { tech = tech_apsr_enclave_defence_bonus_02 message = no }
					}
					5 = {
						modifier = {
							factor = 0
							OR = {
								has_country_flag = apsr_enclave_defence_set_1_bonus_is_03
								has_country_flag = apsr_enclave_defence_set_2_bonus_is_03
							}
						}
						set_country_flag = apsr_enclave_defence_set_3_bonus_is_03
						give_technology = { tech = tech_apsr_enclave_defence_bonus_03 message = no }
					}
					5 = {
						modifier = {
							factor = 0
							OR = {
								has_country_flag = apsr_enclave_defence_set_1_bonus_is_04
								has_country_flag = apsr_enclave_defence_set_2_bonus_is_04
							}
						}
						set_country_flag = apsr_enclave_defence_set_3_bonus_is_04
						give_technology = { tech = tech_apsr_enclave_defence_bonus_04 message = no }
					}
					5 = {
						modifier = {
							factor = 0
							OR = {
								has_country_flag = apsr_enclave_defence_set_1_bonus_is_05
								has_country_flag = apsr_enclave_defence_set_2_bonus_is_05
							}
						}
						set_country_flag = apsr_enclave_defence_set_3_bonus_is_05
						give_technology = { tech = tech_apsr_enclave_defence_bonus_05 message = no }
					}
					10 = {
						modifier = {
							factor = 0
							OR = {
								has_country_flag = apsr_enclave_defence_set_1_bonus_is_06
								has_country_flag = apsr_enclave_defence_set_2_bonus_is_06
							}
						}
						set_country_flag = apsr_enclave_defence_set_3_bonus_is_06
						give_technology = { tech = tech_apsr_enclave_defence_bonus_06 message = no }
					}
					10 = {
						modifier = {
							factor = 0
							OR = {
								has_country_flag = apsr_enclave_defence_set_1_bonus_is_07
								has_country_flag = apsr_enclave_defence_set_2_bonus_is_07
							}
						}
						set_country_flag = apsr_enclave_defence_set_3_bonus_is_07
						give_technology = { tech = tech_apsr_enclave_defence_bonus_07 message = no }
					}
					10 = {
						modifier = {
							factor = 0
							OR = {
								has_country_flag = apsr_enclave_defence_set_1_bonus_is_08
								has_country_flag = apsr_enclave_defence_set_2_bonus_is_08
							}
						}
						set_country_flag = apsr_enclave_defence_set_3_bonus_is_08
						give_technology = { tech = tech_apsr_enclave_defence_bonus_08 message = no }
					}
					5 = {
						set_country_flag = apsr_enclave_defence_set_3_bonus_is_09
						give_technology = { tech = tech_apsr_enclave_defence_bonus_09 message = no }
					}
					5 = {
						set_country_flag = apsr_enclave_defence_set_3_bonus_is_10
						give_technology = { tech = tech_apsr_enclave_defence_bonus_10 message = no }
					}
					5 = {
						set_country_flag = apsr_enclave_defence_set_3_bonus_is_11
						give_technology = { tech = tech_apsr_enclave_defence_bonus_11 message = no }
					}
					1 = {
						set_country_flag = apsr_enclave_defence_set_3_bonus_is_12
						give_technology = { tech = tech_apsr_enclave_defence_bonus_12 message = no }
					}
					1 = {
						set_country_flag = apsr_enclave_defence_set_3_bonus_is_13
						give_technology = { tech = tech_apsr_enclave_defence_bonus_13 message = no }
					}
				}
			}
		}
	}
}

# кнопка выбора улучшения после покупки
apsr_enclave_defence_button_14_purchased = {
	potential = {
		has_country_flag = apsr_enclave_defence_button_14_purchase
	}
	allow = {
		always = yes
	}
	effect = {
		custom_tooltip = apsr_enclave_defence_button_14_info
	}
}

# кнопка закрыта
apsr_enclave_defence_button_14_locked = {
	potential = {
		NOT = {
			AND = {
				has_country_flag = apsr_enclave_defence_button_01_purchase
				has_country_flag = apsr_enclave_defence_button_02_purchase
				has_country_flag = apsr_enclave_defence_button_03_purchase
				has_country_flag = apsr_enclave_defence_button_04_purchase
				has_country_flag = apsr_enclave_defence_button_05_purchase
				has_country_flag = apsr_enclave_defence_button_06_purchase
				has_country_flag = apsr_enclave_defence_button_07_purchase
				has_country_flag = apsr_enclave_defence_button_08_purchase
				has_country_flag = apsr_enclave_defence_button_09_purchase
				has_country_flag = apsr_enclave_defence_button_10_purchase
			}
		}
	}
	allow = {
		always = yes
	}
	effect = {
		custom_tooltip = apsr_enclave_defence_locked
	}
}



### КНОПКА 15

# кнопка выбора усиления и открытия описания
apsr_enclave_defence_button_15_select = {
	potential = {
		NOT = {
			has_country_flag = apsr_enclave_defence_button_15_purchase
		}
	}
	allow = {
		always = yes
	}
	effect = {
		custom_tooltip = apsr_enclave_defence_button_15_info
		hidden_effect = {	
			remove_country_flag = apsr_enclave_defence_button_01_pressed
			remove_country_flag = apsr_enclave_defence_button_02_pressed	
			remove_country_flag = apsr_enclave_defence_button_03_pressed
			remove_country_flag = apsr_enclave_defence_button_04_pressed
			remove_country_flag = apsr_enclave_defence_button_05_pressed
			remove_country_flag = apsr_enclave_defence_button_06_pressed
			remove_country_flag = apsr_enclave_defence_button_07_pressed
			remove_country_flag = apsr_enclave_defence_button_08_pressed
			remove_country_flag = apsr_enclave_defence_button_09_pressed
			remove_country_flag = apsr_enclave_defence_button_10_pressed
			remove_country_flag = apsr_enclave_defence_button_11_pressed
			remove_country_flag = apsr_enclave_defence_button_12_pressed
			remove_country_flag = apsr_enclave_defence_button_13_pressed
			remove_country_flag = apsr_enclave_defence_button_14_pressed
			set_country_flag = apsr_enclave_defence_button_15_pressed	
			remove_country_flag = apsr_enclave_defence_button_16_pressed	
			remove_country_flag = apsr_enclave_defence_button_17_pressed	
			remove_country_flag = apsr_enclave_defence_button_18_pressed
			remove_country_flag = apsr_enclave_defence_button_19_pressed
			remove_country_flag = apsr_enclave_defence_button_20_pressed	
		}
	}
}

# условие отображения описания слева
apsr_enclave_defence_button_15_pressed = {
	potential = {
		has_country_flag = apsr_enclave_defence_button_15_pressed
	}
	allow = {
		always = yes
	}
	effect = {
	}
}

# условие отображения кнопки покупки
apsr_enclave_defence_button_15_buy = {
	potential = {
		has_country_flag = apsr_enclave_defence_button_15_pressed
	}
	allow = {
		custom_tooltip = {
			fail_text = "apsr_enclave_defence_button_15_failtext"
			resource_stockpile_compare = { resource = apsr_knowledge value >= 1600 }
		}
	}
	effect = {
		custom_tooltip = apsr_enclave_defence_buy_desc
		hidden_effect = {	
			add_resource = { apsr_knowledge = -1600 }
			set_country_flag = apsr_enclave_defence_button_15_purchase
			give_technology = { tech = tech_apsr_enclave_defence_button_15_bonus message = no }	
			remove_country_flag = apsr_enclave_defence_button_15_pressed
			event_target:global_event_country = {
				change_variable = {
					which = apsr_ancients_count
					value = 3
				}
			}
			change_variable = {
				which = apsr_achimod_improvements_purchased_count
				value = 1
			}
			change_variable = {
				which = apsr_enclave_defence_improvements_purchased_count
				value = 1
			}
			if = {
				limit = {
					check_variable = {
						which = apsr_enclave_defence_improvements_purchased_count
						value = 15
					}
				}
				random_list = {
					5 = {
						modifier = {
							factor = 0
							OR = {
								has_country_flag = apsr_enclave_defence_set_1_bonus_is_01
								has_country_flag = apsr_enclave_defence_set_2_bonus_is_01
							}
						}
						set_country_flag = apsr_enclave_defence_set_3_bonus_is_01
						give_technology = { tech = tech_apsr_enclave_defence_bonus_01 message = no }	
					}
					5 = {
						modifier = {
							factor = 0
							OR = {
								has_country_flag = apsr_enclave_defence_set_1_bonus_is_02
								has_country_flag = apsr_enclave_defence_set_2_bonus_is_02
							}
						}
						set_country_flag = apsr_enclave_defence_set_3_bonus_is_02
						give_technology = { tech = tech_apsr_enclave_defence_bonus_02 message = no }
					}
					5 = {
						modifier = {
							factor = 0
							OR = {
								has_country_flag = apsr_enclave_defence_set_1_bonus_is_03
								has_country_flag = apsr_enclave_defence_set_2_bonus_is_03
							}
						}
						set_country_flag = apsr_enclave_defence_set_3_bonus_is_03
						give_technology = { tech = tech_apsr_enclave_defence_bonus_03 message = no }
					}
					5 = {
						modifier = {
							factor = 0
							OR = {
								has_country_flag = apsr_enclave_defence_set_1_bonus_is_04
								has_country_flag = apsr_enclave_defence_set_2_bonus_is_04
							}
						}
						set_country_flag = apsr_enclave_defence_set_3_bonus_is_04
						give_technology = { tech = tech_apsr_enclave_defence_bonus_04 message = no }
					}
					5 = {
						modifier = {
							factor = 0
							OR = {
								has_country_flag = apsr_enclave_defence_set_1_bonus_is_05
								has_country_flag = apsr_enclave_defence_set_2_bonus_is_05
							}
						}
						set_country_flag = apsr_enclave_defence_set_3_bonus_is_05
						give_technology = { tech = tech_apsr_enclave_defence_bonus_05 message = no }
					}
					10 = {
						modifier = {
							factor = 0
							OR = {
								has_country_flag = apsr_enclave_defence_set_1_bonus_is_06
								has_country_flag = apsr_enclave_defence_set_2_bonus_is_06
							}
						}
						set_country_flag = apsr_enclave_defence_set_3_bonus_is_06
						give_technology = { tech = tech_apsr_enclave_defence_bonus_06 message = no }
					}
					10 = {
						modifier = {
							factor = 0
							OR = {
								has_country_flag = apsr_enclave_defence_set_1_bonus_is_07
								has_country_flag = apsr_enclave_defence_set_2_bonus_is_07
							}
						}
						set_country_flag = apsr_enclave_defence_set_3_bonus_is_07
						give_technology = { tech = tech_apsr_enclave_defence_bonus_07 message = no }
					}
					10 = {
						modifier = {
							factor = 0
							OR = {
								has_country_flag = apsr_enclave_defence_set_1_bonus_is_08
								has_country_flag = apsr_enclave_defence_set_2_bonus_is_08
							}
						}
						set_country_flag = apsr_enclave_defence_set_3_bonus_is_08
						give_technology = { tech = tech_apsr_enclave_defence_bonus_08 message = no }
					}
					5 = {
						set_country_flag = apsr_enclave_defence_set_3_bonus_is_09
						give_technology = { tech = tech_apsr_enclave_defence_bonus_09 message = no }
					}
					5 = {
						set_country_flag = apsr_enclave_defence_set_3_bonus_is_10
						give_technology = { tech = tech_apsr_enclave_defence_bonus_10 message = no }
					}
					5 = {
						set_country_flag = apsr_enclave_defence_set_3_bonus_is_11
						give_technology = { tech = tech_apsr_enclave_defence_bonus_11 message = no }
					}
					1 = {
						set_country_flag = apsr_enclave_defence_set_3_bonus_is_12
						give_technology = { tech = tech_apsr_enclave_defence_bonus_12 message = no }
					}
					1 = {
						set_country_flag = apsr_enclave_defence_set_3_bonus_is_13
						give_technology = { tech = tech_apsr_enclave_defence_bonus_13 message = no }
					}
				}
			}
		}
	}
}

# кнопка выбора улучшения после покупки
apsr_enclave_defence_button_15_purchased = {
	potential = {
		has_country_flag = apsr_enclave_defence_button_15_purchase
	}
	allow = {
		always = yes
	}
	effect = {
		custom_tooltip = apsr_enclave_defence_button_15_info
	}
}

# кнопка закрыта
apsr_enclave_defence_button_15_locked = {
	potential = {
		NOT = {
			AND = {
				has_country_flag = apsr_enclave_defence_button_01_purchase
				has_country_flag = apsr_enclave_defence_button_02_purchase
				has_country_flag = apsr_enclave_defence_button_03_purchase
				has_country_flag = apsr_enclave_defence_button_04_purchase
				has_country_flag = apsr_enclave_defence_button_05_purchase
				has_country_flag = apsr_enclave_defence_button_06_purchase
				has_country_flag = apsr_enclave_defence_button_07_purchase
				has_country_flag = apsr_enclave_defence_button_08_purchase
				has_country_flag = apsr_enclave_defence_button_09_purchase
				has_country_flag = apsr_enclave_defence_button_10_purchase
			}
		}
	}
	allow = {
		always = yes
	}
	effect = {
		custom_tooltip = apsr_enclave_defence_locked
	}
}



### КНОПКА 16

# кнопка выбора усиления и открытия описания
apsr_enclave_defence_button_16_select = {
	potential = {
		NOT = {
			has_country_flag = apsr_enclave_defence_button_16_purchase
		}
	}
	allow = {
		always = yes
	}
	effect = {
		custom_tooltip = apsr_enclave_defence_button_16_info
		hidden_effect = {		
			remove_country_flag = apsr_enclave_defence_button_01_pressed
			remove_country_flag = apsr_enclave_defence_button_02_pressed	
			remove_country_flag = apsr_enclave_defence_button_03_pressed
			remove_country_flag = apsr_enclave_defence_button_04_pressed
			remove_country_flag = apsr_enclave_defence_button_05_pressed
			remove_country_flag = apsr_enclave_defence_button_06_pressed
			remove_country_flag = apsr_enclave_defence_button_07_pressed
			remove_country_flag = apsr_enclave_defence_button_08_pressed
			remove_country_flag = apsr_enclave_defence_button_09_pressed
			remove_country_flag = apsr_enclave_defence_button_10_pressed
			remove_country_flag = apsr_enclave_defence_button_11_pressed
			remove_country_flag = apsr_enclave_defence_button_12_pressed
			remove_country_flag = apsr_enclave_defence_button_13_pressed
			remove_country_flag = apsr_enclave_defence_button_14_pressed
			remove_country_flag = apsr_enclave_defence_button_15_pressed	
			set_country_flag = apsr_enclave_defence_button_16_pressed	
			remove_country_flag = apsr_enclave_defence_button_17_pressed
			remove_country_flag = apsr_enclave_defence_button_18_pressed
			remove_country_flag = apsr_enclave_defence_button_19_pressed
			remove_country_flag = apsr_enclave_defence_button_20_pressed
		}
	}
}

# условие отображения описания слева
apsr_enclave_defence_button_16_pressed = {
	potential = {
		has_country_flag = apsr_enclave_defence_button_16_pressed
	}
	allow = {
		always = yes
	}
	effect = {
	}
}

# условие отображения кнопки покупки
apsr_enclave_defence_button_16_buy = {
	potential = {
		has_country_flag = apsr_enclave_defence_button_16_pressed
	}
	allow = {
		custom_tooltip = {
			fail_text = "apsr_enclave_defence_button_16_failtext"
			resource_stockpile_compare = { resource = apsr_knowledge value >= 2800 }
		}
	}
	effect = {
		custom_tooltip = apsr_enclave_defence_buy_desc
		hidden_effect = {	
			add_resource = { apsr_knowledge = -2800 }
			set_country_flag = apsr_enclave_defence_button_16_purchase
			give_technology = { tech = tech_apsr_enclave_defence_button_16_bonus message = no }	
			remove_country_flag = apsr_enclave_defence_button_16_pressed
			event_target:global_event_country = {
				change_variable = {
					which = apsr_ancients_count
					value = 7
				}
			}
			change_variable = {
				which = apsr_achimod_improvements_purchased_count
				value = 1
			}
			change_variable = {
				which = apsr_enclave_defence_improvements_purchased_count
				value = 1
			}
			if = {
				limit = {
					check_variable = {
						which = apsr_enclave_defence_improvements_purchased_count
						value = 20
					}
				}
				random_list = {
					10 = {
						modifier = {
							factor = 0
							OR = {
								has_country_flag = apsr_enclave_defence_set_1_bonus_is_06
								has_country_flag = apsr_enclave_defence_set_2_bonus_is_06
								has_country_flag = apsr_enclave_defence_set_3_bonus_is_06
							}
						}
						set_country_flag = apsr_enclave_defence_set_4_bonus_is_06
						give_technology = { tech = tech_apsr_enclave_defence_bonus_06 message = no }
					}
					10 = {
						modifier = {
							factor = 0
							OR = {
								has_country_flag = apsr_enclave_defence_set_1_bonus_is_07
								has_country_flag = apsr_enclave_defence_set_2_bonus_is_07
								has_country_flag = apsr_enclave_defence_set_3_bonus_is_07
							}
						}
						set_country_flag = apsr_enclave_defence_set_4_bonus_is_07
						give_technology = { tech = tech_apsr_enclave_defence_bonus_07 message = no }
					}
					10 = {
						modifier = {
							factor = 0
							has_country_flag = apsr_enclave_defence_set_3_bonus_is_09
						}
						set_country_flag = apsr_enclave_defence_set_4_bonus_is_09
						give_technology = { tech = tech_apsr_enclave_defence_bonus_09 message = no }
					}
					10 = {
						modifier = {
							factor = 0
							has_country_flag = apsr_enclave_defence_set_3_bonus_is_10
						}
						set_country_flag = apsr_enclave_defence_set_4_bonus_is_10
						give_technology = { tech = tech_apsr_enclave_defence_bonus_10 message = no }
					}
					10 = {
						modifier = {
							factor = 0
							has_country_flag = apsr_enclave_defence_set_3_bonus_is_11
						}
						set_country_flag = apsr_enclave_defence_set_4_bonus_is_11
						give_technology = { tech = tech_apsr_enclave_defence_bonus_11 message = no }
					}
					5 = {
						modifier = {
							factor = 0
							has_country_flag = apsr_enclave_defence_set_3_bonus_is_12
						}
						set_country_flag = apsr_enclave_defence_set_4_bonus_is_12
						give_technology = { tech = tech_apsr_enclave_defence_bonus_12 message = no }
					}
					5 = {
						modifier = {
							factor = 0
							has_country_flag = apsr_enclave_defence_set_3_bonus_is_13
						}
						set_country_flag = apsr_enclave_defence_set_4_bonus_is_13
						give_technology = { tech = tech_apsr_enclave_defence_bonus_13 message = no }
					}
				}
			}
		}
	}
}

# кнопка выбора улучшения после покупки
apsr_enclave_defence_button_16_purchased = {
	potential = {
		has_country_flag = apsr_enclave_defence_button_16_purchase
	}
	allow = {
		always = yes
	}
	effect = {
		custom_tooltip = apsr_enclave_defence_button_16_info
	}
}

# кнопка закрыта
apsr_enclave_defence_button_16_locked = {
	potential = {
		NOT = {
			AND = {
				has_country_flag = apsr_enclave_defence_button_11_purchase
				has_country_flag = apsr_enclave_defence_button_12_purchase
				has_country_flag = apsr_enclave_defence_button_13_purchase
				has_country_flag = apsr_enclave_defence_button_14_purchase
				has_country_flag = apsr_enclave_defence_button_15_purchase
			}
		}
	}
	allow = {
		always = yes
	}
	effect = {
		custom_tooltip = apsr_enclave_defence_locked
	}
}



### КНОПКА 17

# кнопка выбора усиления и открытия описания
apsr_enclave_defence_button_17_select = {
	potential = {
		NOT = {
			has_country_flag = apsr_enclave_defence_button_17_purchase
		}
	}
	allow = {
		always = yes
	}
	effect = {
		custom_tooltip = apsr_enclave_defence_button_17_info
		hidden_effect = {		
			remove_country_flag = apsr_enclave_defence_button_01_pressed
			remove_country_flag = apsr_enclave_defence_button_02_pressed	
			remove_country_flag = apsr_enclave_defence_button_03_pressed
			remove_country_flag = apsr_enclave_defence_button_04_pressed
			remove_country_flag = apsr_enclave_defence_button_05_pressed
			remove_country_flag = apsr_enclave_defence_button_06_pressed
			remove_country_flag = apsr_enclave_defence_button_07_pressed
			remove_country_flag = apsr_enclave_defence_button_08_pressed
			remove_country_flag = apsr_enclave_defence_button_09_pressed
			remove_country_flag = apsr_enclave_defence_button_10_pressed
			remove_country_flag = apsr_enclave_defence_button_11_pressed
			remove_country_flag = apsr_enclave_defence_button_12_pressed
			remove_country_flag = apsr_enclave_defence_button_13_pressed
			remove_country_flag = apsr_enclave_defence_button_14_pressed
			remove_country_flag = apsr_enclave_defence_button_15_pressed	
			remove_country_flag = apsr_enclave_defence_button_16_pressed	
			set_country_flag = apsr_enclave_defence_button_17_pressed	
			remove_country_flag = apsr_enclave_defence_button_18_pressed
			remove_country_flag = apsr_enclave_defence_button_19_pressed
			remove_country_flag = apsr_enclave_defence_button_20_pressed	
		}
	}
}

# условие отображения описания слева
apsr_enclave_defence_button_17_pressed = {
	potential = {
		has_country_flag = apsr_enclave_defence_button_17_pressed
	}
	allow = {
		always = yes
	}
	effect = {
	}
}

# условие отображения кнопки покупки
apsr_enclave_defence_button_17_buy = {
	potential = {
		has_country_flag = apsr_enclave_defence_button_17_pressed
	}
	allow = {
		custom_tooltip = {
			fail_text = "apsr_enclave_defence_button_17_failtext"
			resource_stockpile_compare = { resource = apsr_knowledge value >= 2800 }
		}
	}
	effect = {
		custom_tooltip = apsr_enclave_defence_buy_desc
		hidden_effect = {	
			add_resource = { apsr_knowledge = -2800 }
			set_country_flag = apsr_enclave_defence_button_17_purchase
			give_technology = { tech = tech_apsr_enclave_defence_button_17_bonus message = no }	
			remove_country_flag = apsr_enclave_defence_button_17_pressed	
			event_target:global_event_country = {
				change_variable = {
					which = apsr_ancients_count
					value = 7
				}
			}
			change_variable = {
				which = apsr_achimod_improvements_purchased_count
				value = 1
			}
			change_variable = {
				which = apsr_enclave_defence_improvements_purchased_count
				value = 1
			}
			if = {
				limit = {
					check_variable = {
						which = apsr_enclave_defence_improvements_purchased_count
						value = 20
					}
				}
				random_list = {
					10 = {
						modifier = {
							factor = 0
							OR = {
								has_country_flag = apsr_enclave_defence_set_1_bonus_is_06
								has_country_flag = apsr_enclave_defence_set_2_bonus_is_06
								has_country_flag = apsr_enclave_defence_set_3_bonus_is_06
							}
						}
						set_country_flag = apsr_enclave_defence_set_4_bonus_is_06
						give_technology = { tech = tech_apsr_enclave_defence_bonus_06 message = no }
					}
					10 = {
						modifier = {
							factor = 0
							OR = {
								has_country_flag = apsr_enclave_defence_set_1_bonus_is_07
								has_country_flag = apsr_enclave_defence_set_2_bonus_is_07
								has_country_flag = apsr_enclave_defence_set_3_bonus_is_07
							}
						}
						set_country_flag = apsr_enclave_defence_set_4_bonus_is_07
						give_technology = { tech = tech_apsr_enclave_defence_bonus_07 message = no }
					}
					10 = {
						modifier = {
							factor = 0
							has_country_flag = apsr_enclave_defence_set_3_bonus_is_09
						}
						set_country_flag = apsr_enclave_defence_set_4_bonus_is_09
						give_technology = { tech = tech_apsr_enclave_defence_bonus_09 message = no }
					}
					10 = {
						modifier = {
							factor = 0
							has_country_flag = apsr_enclave_defence_set_3_bonus_is_10
						}
						set_country_flag = apsr_enclave_defence_set_4_bonus_is_10
						give_technology = { tech = tech_apsr_enclave_defence_bonus_10 message = no }
					}
					10 = {
						modifier = {
							factor = 0
							has_country_flag = apsr_enclave_defence_set_3_bonus_is_11
						}
						set_country_flag = apsr_enclave_defence_set_4_bonus_is_11
						give_technology = { tech = tech_apsr_enclave_defence_bonus_11 message = no }
					}
					5 = {
						modifier = {
							factor = 0
							has_country_flag = apsr_enclave_defence_set_3_bonus_is_12
						}
						set_country_flag = apsr_enclave_defence_set_4_bonus_is_12
						give_technology = { tech = tech_apsr_enclave_defence_bonus_12 message = no }
					}
					5 = {
						modifier = {
							factor = 0
							has_country_flag = apsr_enclave_defence_set_3_bonus_is_13
						}
						set_country_flag = apsr_enclave_defence_set_4_bonus_is_13
						give_technology = { tech = tech_apsr_enclave_defence_bonus_13 message = no }
					}
				}
			}
		}
	}
}

# кнопка выбора улучшения после покупки
apsr_enclave_defence_button_17_purchased = {
	potential = {
		has_country_flag = apsr_enclave_defence_button_17_purchase
	}
	allow = {
		always = yes
	}
	effect = {
		custom_tooltip = apsr_enclave_defence_button_17_info
	}
}

# кнопка закрыта
apsr_enclave_defence_button_17_locked = {
	potential = {
		NOT = {
			AND = {
				has_country_flag = apsr_enclave_defence_button_11_purchase
				has_country_flag = apsr_enclave_defence_button_12_purchase
				has_country_flag = apsr_enclave_defence_button_13_purchase
				has_country_flag = apsr_enclave_defence_button_14_purchase
				has_country_flag = apsr_enclave_defence_button_15_purchase
			}
		}
	}
	allow = {
		always = yes
	}
	effect = {
		custom_tooltip = apsr_enclave_defence_locked
	}
}



### КНОПКА 18

# кнопка выбора усиления и открытия описания
apsr_enclave_defence_button_18_select = {
	potential = {
		NOT = {
			has_country_flag = apsr_enclave_defence_button_18_purchase
		}
	}
	allow = {
		always = yes
	}
	effect = {
		custom_tooltip = apsr_enclave_defence_button_18_info
		hidden_effect = {	
			remove_country_flag = apsr_enclave_defence_button_01_pressed
			remove_country_flag = apsr_enclave_defence_button_02_pressed	
			remove_country_flag = apsr_enclave_defence_button_03_pressed
			remove_country_flag = apsr_enclave_defence_button_04_pressed
			remove_country_flag = apsr_enclave_defence_button_05_pressed
			remove_country_flag = apsr_enclave_defence_button_06_pressed
			remove_country_flag = apsr_enclave_defence_button_07_pressed
			remove_country_flag = apsr_enclave_defence_button_08_pressed
			remove_country_flag = apsr_enclave_defence_button_09_pressed
			remove_country_flag = apsr_enclave_defence_button_10_pressed
			remove_country_flag = apsr_enclave_defence_button_11_pressed
			remove_country_flag = apsr_enclave_defence_button_12_pressed
			remove_country_flag = apsr_enclave_defence_button_13_pressed
			remove_country_flag = apsr_enclave_defence_button_14_pressed
			remove_country_flag = apsr_enclave_defence_button_15_pressed	
			remove_country_flag = apsr_enclave_defence_button_16_pressed	
			remove_country_flag = apsr_enclave_defence_button_17_pressed
			set_country_flag = apsr_enclave_defence_button_18_pressed	
			remove_country_flag = apsr_enclave_defence_button_19_pressed
			remove_country_flag = apsr_enclave_defence_button_20_pressed
		}
	}
}

# условие отображения описания слева
apsr_enclave_defence_button_18_pressed = {
	potential = {
		has_country_flag = apsr_enclave_defence_button_18_pressed
	}
	allow = {
		always = yes
	}
	effect = {
	}
}

# условие отображения кнопки покупки
apsr_enclave_defence_button_18_buy = {
	potential = {
		has_country_flag = apsr_enclave_defence_button_18_pressed
	}
	allow = {
		custom_tooltip = {
			fail_text = "apsr_enclave_defence_button_18_failtext"
			resource_stockpile_compare = { resource = apsr_knowledge value >= 2800 }
		}
	}
	effect = {
		custom_tooltip = apsr_enclave_defence_buy_desc
		hidden_effect = {	
			add_resource = { apsr_knowledge = -2800 }
			set_country_flag = apsr_enclave_defence_button_18_purchase
			give_technology = { tech = tech_apsr_enclave_defence_button_18_bonus message = no }	
			remove_country_flag = apsr_enclave_defence_button_18_pressed
			event_target:global_event_country = {
				change_variable = {
					which = apsr_ancients_count
					value = 7
				}
			}
			change_variable = {
				which = apsr_achimod_improvements_purchased_count
				value = 1
			}
			change_variable = {
				which = apsr_enclave_defence_improvements_purchased_count
				value = 1
			}
			if = {
				limit = {
					check_variable = {
						which = apsr_enclave_defence_improvements_purchased_count
						value = 20
					}
				}
				random_list = {
					10 = {
						modifier = {
							factor = 0
							OR = {
								has_country_flag = apsr_enclave_defence_set_1_bonus_is_06
								has_country_flag = apsr_enclave_defence_set_2_bonus_is_06
								has_country_flag = apsr_enclave_defence_set_3_bonus_is_06
							}
						}
						set_country_flag = apsr_enclave_defence_set_4_bonus_is_06
						give_technology = { tech = tech_apsr_enclave_defence_bonus_06 message = no }
					}
					10 = {
						modifier = {
							factor = 0
							OR = {
								has_country_flag = apsr_enclave_defence_set_1_bonus_is_07
								has_country_flag = apsr_enclave_defence_set_2_bonus_is_07
								has_country_flag = apsr_enclave_defence_set_3_bonus_is_07
							}
						}
						set_country_flag = apsr_enclave_defence_set_4_bonus_is_07
						give_technology = { tech = tech_apsr_enclave_defence_bonus_07 message = no }
					}
					10 = {
						modifier = {
							factor = 0
							has_country_flag = apsr_enclave_defence_set_3_bonus_is_09
						}
						set_country_flag = apsr_enclave_defence_set_4_bonus_is_09
						give_technology = { tech = tech_apsr_enclave_defence_bonus_09 message = no }
					}
					10 = {
						modifier = {
							factor = 0
							has_country_flag = apsr_enclave_defence_set_3_bonus_is_10
						}
						set_country_flag = apsr_enclave_defence_set_4_bonus_is_10
						give_technology = { tech = tech_apsr_enclave_defence_bonus_10 message = no }
					}
					10 = {
						modifier = {
							factor = 0
							has_country_flag = apsr_enclave_defence_set_3_bonus_is_11
						}
						set_country_flag = apsr_enclave_defence_set_4_bonus_is_11
						give_technology = { tech = tech_apsr_enclave_defence_bonus_11 message = no }
					}
					5 = {
						modifier = {
							factor = 0
							has_country_flag = apsr_enclave_defence_set_3_bonus_is_12
						}
						set_country_flag = apsr_enclave_defence_set_4_bonus_is_12
						give_technology = { tech = tech_apsr_enclave_defence_bonus_12 message = no }
					}
					5 = {
						modifier = {
							factor = 0
							has_country_flag = apsr_enclave_defence_set_3_bonus_is_13
						}
						set_country_flag = apsr_enclave_defence_set_4_bonus_is_13
						give_technology = { tech = tech_apsr_enclave_defence_bonus_13 message = no }
					}
				}
			}
		}
	}
}

# кнопка выбора улучшения после покупки
apsr_enclave_defence_button_18_purchased = {
	potential = {
		has_country_flag = apsr_enclave_defence_button_18_purchase
	}
	allow = {
		always = yes
	}
	effect = {
		custom_tooltip = apsr_enclave_defence_button_18_info
	}
}

# кнопка закрыта
apsr_enclave_defence_button_18_locked = {
	potential = {
		NOT = {
			AND = {
				has_country_flag = apsr_enclave_defence_button_11_purchase
				has_country_flag = apsr_enclave_defence_button_12_purchase
				has_country_flag = apsr_enclave_defence_button_13_purchase
				has_country_flag = apsr_enclave_defence_button_14_purchase
				has_country_flag = apsr_enclave_defence_button_15_purchase
			}
		}
	}
	allow = {
		always = yes
	}
	effect = {
		custom_tooltip = apsr_enclave_defence_locked
	}
}



### КНОПКА 19

# кнопка выбора усиления и открытия описания
apsr_enclave_defence_button_19_select = {
	potential = {
		NOT = {
			has_country_flag = apsr_enclave_defence_button_19_purchase
		}
	}
	allow = {
		always = yes
	}
	effect = {
		custom_tooltip = apsr_enclave_defence_button_19_info
		hidden_effect = {	
			remove_country_flag = apsr_enclave_defence_button_01_pressed
			remove_country_flag = apsr_enclave_defence_button_02_pressed	
			remove_country_flag = apsr_enclave_defence_button_03_pressed
			remove_country_flag = apsr_enclave_defence_button_04_pressed
			remove_country_flag = apsr_enclave_defence_button_05_pressed
			remove_country_flag = apsr_enclave_defence_button_06_pressed
			remove_country_flag = apsr_enclave_defence_button_07_pressed
			remove_country_flag = apsr_enclave_defence_button_08_pressed
			remove_country_flag = apsr_enclave_defence_button_09_pressed
			remove_country_flag = apsr_enclave_defence_button_10_pressed
			remove_country_flag = apsr_enclave_defence_button_11_pressed
			remove_country_flag = apsr_enclave_defence_button_12_pressed
			remove_country_flag = apsr_enclave_defence_button_13_pressed
			remove_country_flag = apsr_enclave_defence_button_14_pressed
			remove_country_flag = apsr_enclave_defence_button_15_pressed	
			remove_country_flag = apsr_enclave_defence_button_16_pressed	
			remove_country_flag = apsr_enclave_defence_button_17_pressed
			remove_country_flag = apsr_enclave_defence_button_18_pressed
			set_country_flag = apsr_enclave_defence_button_19_pressed	
			remove_country_flag = apsr_enclave_defence_button_20_pressed
		}
	}
}

# условие отображения описания слева
apsr_enclave_defence_button_19_pressed = {
	potential = {
		has_country_flag = apsr_enclave_defence_button_19_pressed
	}
	allow = {
		always = yes
	}
	effect = {
	}
}

# условие отображения кнопки покупки
apsr_enclave_defence_button_19_buy = {
	potential = {
		has_country_flag = apsr_enclave_defence_button_19_pressed
	}
	allow = {
		custom_tooltip = {
			fail_text = "apsr_enclave_defence_button_19_failtext"
			resource_stockpile_compare = { resource = apsr_knowledge value >= 2800 }
		}
	}
	effect = {
		custom_tooltip = apsr_enclave_defence_buy_desc
		hidden_effect = {	
			add_resource = { apsr_knowledge = -2800 }
			set_country_flag = apsr_enclave_defence_button_19_purchase
			give_technology = { tech = tech_apsr_enclave_defence_button_19_bonus message = no }	
			remove_country_flag = apsr_enclave_defence_button_19_pressed
			event_target:global_event_country = {
				change_variable = {
					which = apsr_ancients_count
					value = 7
				}
			}
			change_variable = {
				which = apsr_achimod_improvements_purchased_count
				value = 1
			}
			change_variable = {
				which = apsr_enclave_defence_improvements_purchased_count
				value = 1
			}
			if = {
				limit = {
					check_variable = {
						which = apsr_enclave_defence_improvements_purchased_count
						value = 20
					}
				}
				random_list = {
					10 = {
						modifier = {
							factor = 0
							OR = {
								has_country_flag = apsr_enclave_defence_set_1_bonus_is_06
								has_country_flag = apsr_enclave_defence_set_2_bonus_is_06
								has_country_flag = apsr_enclave_defence_set_3_bonus_is_06
							}
						}
						set_country_flag = apsr_enclave_defence_set_4_bonus_is_06
						give_technology = { tech = tech_apsr_enclave_defence_bonus_06 message = no }
					}
					10 = {
						modifier = {
							factor = 0
							OR = {
								has_country_flag = apsr_enclave_defence_set_1_bonus_is_07
								has_country_flag = apsr_enclave_defence_set_2_bonus_is_07
								has_country_flag = apsr_enclave_defence_set_3_bonus_is_07
							}
						}
						set_country_flag = apsr_enclave_defence_set_4_bonus_is_07
						give_technology = { tech = tech_apsr_enclave_defence_bonus_07 message = no }
					}
					10 = {
						modifier = {
							factor = 0
							has_country_flag = apsr_enclave_defence_set_3_bonus_is_09
						}
						set_country_flag = apsr_enclave_defence_set_4_bonus_is_09
						give_technology = { tech = tech_apsr_enclave_defence_bonus_09 message = no }
					}
					10 = {
						modifier = {
							factor = 0
							has_country_flag = apsr_enclave_defence_set_3_bonus_is_10
						}
						set_country_flag = apsr_enclave_defence_set_4_bonus_is_10
						give_technology = { tech = tech_apsr_enclave_defence_bonus_10 message = no }
					}
					10 = {
						modifier = {
							factor = 0
							has_country_flag = apsr_enclave_defence_set_3_bonus_is_11
						}
						set_country_flag = apsr_enclave_defence_set_4_bonus_is_11
						give_technology = { tech = tech_apsr_enclave_defence_bonus_11 message = no }
					}
					5 = {
						modifier = {
							factor = 0
							has_country_flag = apsr_enclave_defence_set_3_bonus_is_12
						}
						set_country_flag = apsr_enclave_defence_set_4_bonus_is_12
						give_technology = { tech = tech_apsr_enclave_defence_bonus_12 message = no }
					}
					5 = {
						modifier = {
							factor = 0
							has_country_flag = apsr_enclave_defence_set_3_bonus_is_13
						}
						set_country_flag = apsr_enclave_defence_set_4_bonus_is_13
						give_technology = { tech = tech_apsr_enclave_defence_bonus_13 message = no }
					}
				}
			}
		}
	}
}

# кнопка выбора улучшения после покупки
apsr_enclave_defence_button_19_purchased = {
	potential = {
		has_country_flag = apsr_enclave_defence_button_19_purchase
	}
	allow = {
		always = yes
	}
	effect = {
		custom_tooltip = apsr_enclave_defence_button_19_info
	}
}

# кнопка закрыта
apsr_enclave_defence_button_19_locked = {
	potential = {
		NOT = {
			AND = {
				has_country_flag = apsr_enclave_defence_button_11_purchase
				has_country_flag = apsr_enclave_defence_button_12_purchase
				has_country_flag = apsr_enclave_defence_button_13_purchase
				has_country_flag = apsr_enclave_defence_button_14_purchase
				has_country_flag = apsr_enclave_defence_button_15_purchase
			}
		}
	}
	allow = {
		always = yes
	}
	effect = {
		custom_tooltip = apsr_enclave_defence_locked
	}
}



### КНОПКА 20

# кнопка выбора усиления и открытия описания
apsr_enclave_defence_button_20_select = {
	potential = {
		NOT = {
			has_country_flag = apsr_enclave_defence_button_20_purchase
		}
	}
	allow = {
		always = yes
	}
	effect = {
		custom_tooltip = apsr_enclave_defence_button_20_info
		hidden_effect = {	
			remove_country_flag = apsr_enclave_defence_button_01_pressed
			remove_country_flag = apsr_enclave_defence_button_02_pressed	
			remove_country_flag = apsr_enclave_defence_button_03_pressed
			remove_country_flag = apsr_enclave_defence_button_04_pressed
			remove_country_flag = apsr_enclave_defence_button_05_pressed
			remove_country_flag = apsr_enclave_defence_button_06_pressed
			remove_country_flag = apsr_enclave_defence_button_07_pressed
			remove_country_flag = apsr_enclave_defence_button_08_pressed
			remove_country_flag = apsr_enclave_defence_button_09_pressed
			remove_country_flag = apsr_enclave_defence_button_10_pressed
			remove_country_flag = apsr_enclave_defence_button_11_pressed
			remove_country_flag = apsr_enclave_defence_button_12_pressed
			remove_country_flag = apsr_enclave_defence_button_13_pressed
			remove_country_flag = apsr_enclave_defence_button_14_pressed
			remove_country_flag = apsr_enclave_defence_button_15_pressed	
			remove_country_flag = apsr_enclave_defence_button_16_pressed	
			remove_country_flag = apsr_enclave_defence_button_17_pressed
			remove_country_flag = apsr_enclave_defence_button_18_pressed
			remove_country_flag = apsr_enclave_defence_button_19_pressed
			set_country_flag = apsr_enclave_defence_button_20_pressed	
		}
	}
}

# условие отображения описания слева
apsr_enclave_defence_button_20_pressed = {
	potential = {
		has_country_flag = apsr_enclave_defence_button_20_pressed
	}
	allow = {
		always = yes
	}
	effect = {
	}
}

# условие отображения кнопки покупки
apsr_enclave_defence_button_20_buy = {
	potential = {
		has_country_flag = apsr_enclave_defence_button_20_pressed
	}
	allow = {
		custom_tooltip = {
			fail_text = "apsr_enclave_defence_button_20_failtext"
			resource_stockpile_compare = { resource = apsr_knowledge value >= 2800 }
		}
	}
	effect = {
		custom_tooltip = apsr_enclave_defence_buy_desc
		hidden_effect = {	
			add_resource = { apsr_knowledge = -2800 }
			set_country_flag = apsr_enclave_defence_button_20_purchase
			give_technology = { tech = tech_apsr_enclave_defence_button_20_bonus message = no }	
			remove_country_flag = apsr_enclave_defence_button_20_pressed
			event_target:global_event_country = {
				change_variable = {
					which = apsr_ancients_count
					value = 7
				}
			}
			change_variable = {
				which = apsr_achimod_improvements_purchased_count
				value = 1
			}
			change_variable = {
				which = apsr_enclave_defence_improvements_purchased_count
				value = 1
			}
			if = {
				limit = {
					check_variable = {
						which = apsr_enclave_defence_improvements_purchased_count
						value = 20
					}
				}
				random_list = {
					10 = {
						modifier = {
							factor = 0
							OR = {
								has_country_flag = apsr_enclave_defence_set_1_bonus_is_06
								has_country_flag = apsr_enclave_defence_set_2_bonus_is_06
								has_country_flag = apsr_enclave_defence_set_3_bonus_is_06
							}
						}
						set_country_flag = apsr_enclave_defence_set_4_bonus_is_06
						give_technology = { tech = tech_apsr_enclave_defence_bonus_06 message = no }
					}
					10 = {
						modifier = {
							factor = 0
							OR = {
								has_country_flag = apsr_enclave_defence_set_1_bonus_is_07
								has_country_flag = apsr_enclave_defence_set_2_bonus_is_07
								has_country_flag = apsr_enclave_defence_set_3_bonus_is_07
							}
						}
						set_country_flag = apsr_enclave_defence_set_4_bonus_is_07
						give_technology = { tech = tech_apsr_enclave_defence_bonus_07 message = no }
					}
					10 = {
						modifier = {
							factor = 0
							has_country_flag = apsr_enclave_defence_set_3_bonus_is_09
						}
						set_country_flag = apsr_enclave_defence_set_4_bonus_is_09
						give_technology = { tech = tech_apsr_enclave_defence_bonus_09 message = no }
					}
					10 = {
						modifier = {
							factor = 0
							has_country_flag = apsr_enclave_defence_set_3_bonus_is_10
						}
						set_country_flag = apsr_enclave_defence_set_4_bonus_is_10
						give_technology = { tech = tech_apsr_enclave_defence_bonus_10 message = no }
					}
					10 = {
						modifier = {
							factor = 0
							has_country_flag = apsr_enclave_defence_set_3_bonus_is_11
						}
						set_country_flag = apsr_enclave_defence_set_4_bonus_is_11
						give_technology = { tech = tech_apsr_enclave_defence_bonus_11 message = no }
					}
					5 = {
						modifier = {
							factor = 0
							has_country_flag = apsr_enclave_defence_set_3_bonus_is_12
						}
						set_country_flag = apsr_enclave_defence_set_4_bonus_is_12
						give_technology = { tech = tech_apsr_enclave_defence_bonus_12 message = no }
					}
					5 = {
						modifier = {
							factor = 0
							has_country_flag = apsr_enclave_defence_set_3_bonus_is_13
						}
						set_country_flag = apsr_enclave_defence_set_4_bonus_is_13
						give_technology = { tech = tech_apsr_enclave_defence_bonus_13 message = no }
					}
				}
			}
		}
	}
}

# кнопка выбора улучшения после покупки
apsr_enclave_defence_button_20_purchased = {
	potential = {
		has_country_flag = apsr_enclave_defence_button_20_purchase
	}
	allow = {
		always = yes
	}
	effect = {
		custom_tooltip = apsr_enclave_defence_button_20_info
	}
}

# кнопка закрыта
apsr_enclave_defence_button_20_locked = {
	potential = {
		NOT = {
			AND = {
				has_country_flag = apsr_enclave_defence_button_11_purchase
				has_country_flag = apsr_enclave_defence_button_12_purchase
				has_country_flag = apsr_enclave_defence_button_13_purchase
				has_country_flag = apsr_enclave_defence_button_14_purchase
				has_country_flag = apsr_enclave_defence_button_15_purchase
			}
		}
	}
	allow = {
		always = yes
	}
	effect = {
		custom_tooltip = apsr_enclave_defence_locked
	}
}





################################################################
##### БОНУСЫ



### БОНУС 1

# вариант 1 (K)
apsr_enclave_defence_bonus_01_K_show = {
	potential = {
		has_country_flag = apsr_enclave_defence_set_1_bonus_is_01
	}
	allow = {
		always = yes
	}
	effect = {
		custom_tooltip = apsr_enclave_defence_bonus_01_info
	}
}

# вариант 2 (P)
apsr_enclave_defence_bonus_01_P_show = {
	potential = {
		has_country_flag = apsr_enclave_defence_set_1_bonus_is_02
	}
	allow = {
		always = yes
	}
	effect = {
		custom_tooltip = apsr_enclave_defence_bonus_02_info
	}
}

# вариант 3 (X)
apsr_enclave_defence_bonus_01_X_show = {
	potential = {
		has_country_flag = apsr_enclave_defence_set_1_bonus_is_03
	}
	allow = {
		always = yes
	}
	effect = {
		custom_tooltip = apsr_enclave_defence_bonus_03_info
	}
}

# вариант 4 (Y)
apsr_enclave_defence_bonus_01_Y_show = {
	potential = {
		has_country_flag = apsr_enclave_defence_set_1_bonus_is_04
	}
	allow = {
		always = yes
	}
	effect = {
		custom_tooltip = apsr_enclave_defence_bonus_04_info
	}
}

# вариант 5 (Z)
apsr_enclave_defence_bonus_01_Z_show = {
	potential = {
		has_country_flag = apsr_enclave_defence_set_1_bonus_is_05
	}
	allow = {
		always = yes
	}
	effect = {
		custom_tooltip = apsr_enclave_defence_bonus_05_info
	}
}

# вариант 6 (A)
apsr_enclave_defence_bonus_01_A_show = {
	potential = {
		has_country_flag = apsr_enclave_defence_set_1_bonus_is_06
	}
	allow = {
		always = yes
	}
	effect = {
		custom_tooltip = apsr_enclave_defence_bonus_06_info
	}
}

# вариант 7 (R)
apsr_enclave_defence_bonus_01_R_show = {
	potential = {
		has_country_flag = apsr_enclave_defence_set_1_bonus_is_07
	}
	allow = {
		always = yes
	}
	effect = {
		custom_tooltip = apsr_enclave_defence_bonus_07_info
	}
}

# вариант 8 (O)
apsr_enclave_defence_bonus_01_O_show = {
	potential = {
		has_country_flag = apsr_enclave_defence_set_1_bonus_is_08
	}
	allow = {
		always = yes
	}
	effect = {
		custom_tooltip = apsr_enclave_defence_bonus_08_info
	}
}



### БОНУС 2

# вариант 1 (K)
apsr_enclave_defence_bonus_02_K_show = {
	potential = {
		has_country_flag = apsr_enclave_defence_set_2_bonus_is_01
	}
	allow = {
		always = yes
	}
	effect = {
		custom_tooltip = apsr_enclave_defence_bonus_01_info
	}
}

# вариант 2 (P)
apsr_enclave_defence_bonus_02_P_show = {
	potential = {
		has_country_flag = apsr_enclave_defence_set_2_bonus_is_02
	}
	allow = {
		always = yes
	}
	effect = {
		custom_tooltip = apsr_enclave_defence_bonus_02_info
	}
}

# вариант 3 (X)
apsr_enclave_defence_bonus_02_X_show = {
	potential = {
		has_country_flag = apsr_enclave_defence_set_2_bonus_is_03
	}
	allow = {
		always = yes
	}
	effect = {
		custom_tooltip = apsr_enclave_defence_bonus_03_info
	}
}

# вариант 4 (Y)
apsr_enclave_defence_bonus_02_Y_show = {
	potential = {
		has_country_flag = apsr_enclave_defence_set_2_bonus_is_04
	}
	allow = {
		always = yes
	}
	effect = {
		custom_tooltip = apsr_enclave_defence_bonus_04_info
	}
}

# вариант 5 (Z)
apsr_enclave_defence_bonus_02_Z_show = {
	potential = {
		has_country_flag = apsr_enclave_defence_set_2_bonus_is_05
	}
	allow = {
		always = yes
	}
	effect = {
		custom_tooltip = apsr_enclave_defence_bonus_05_info
	}
}

# вариант 6 (A)
apsr_enclave_defence_bonus_02_A_show = {
	potential = {
		has_country_flag = apsr_enclave_defence_set_2_bonus_is_06
	}
	allow = {
		always = yes
	}
	effect = {
		custom_tooltip = apsr_enclave_defence_bonus_06_info
	}
}

# вариант 7 (R)
apsr_enclave_defence_bonus_02_R_show = {
	potential = {
		has_country_flag = apsr_enclave_defence_set_2_bonus_is_07
	}
	allow = {
		always = yes
	}
	effect = {
		custom_tooltip = apsr_enclave_defence_bonus_07_info
	}
}

# вариант 8 (O)
apsr_enclave_defence_bonus_02_O_show = {
	potential = {
		has_country_flag = apsr_enclave_defence_set_2_bonus_is_08
	}
	allow = {
		always = yes
	}
	effect = {
		custom_tooltip = apsr_enclave_defence_bonus_08_info
	}
}



### БОНУС 3

# вариант 1 (K)
apsr_enclave_defence_bonus_03_K_show = {
	potential = {
		has_country_flag = apsr_enclave_defence_set_3_bonus_is_01
	}
	allow = {
		always = yes
	}
	effect = {
		custom_tooltip = apsr_enclave_defence_bonus_01_info
	}
}

# вариант 2 (P)
apsr_enclave_defence_bonus_03_P_show = {
	potential = {
		has_country_flag = apsr_enclave_defence_set_3_bonus_is_02
	}
	allow = {
		always = yes
	}
	effect = {
		custom_tooltip = apsr_enclave_defence_bonus_02_info
	}
}

# вариант 3 (X)
apsr_enclave_defence_bonus_03_X_show = {
	potential = {
		has_country_flag = apsr_enclave_defence_set_3_bonus_is_03
	}
	allow = {
		always = yes
	}
	effect = {
		custom_tooltip = apsr_enclave_defence_bonus_03_info
	}
}

# вариант 4 (Y)
apsr_enclave_defence_bonus_03_Y_show = {
	potential = {
		has_country_flag = apsr_enclave_defence_set_3_bonus_is_04
	}
	allow = {
		always = yes
	}
	effect = {
		custom_tooltip = apsr_enclave_defence_bonus_04_info
	}
}

# вариант 5 (Z)
apsr_enclave_defence_bonus_03_Z_show = {
	potential = {
		has_country_flag = apsr_enclave_defence_set_3_bonus_is_05
	}
	allow = {
		always = yes
	}
	effect = {
		custom_tooltip = apsr_enclave_defence_bonus_05_info
	}
}

# вариант 6 (A)
apsr_enclave_defence_bonus_03_A_show = {
	potential = {
		has_country_flag = apsr_enclave_defence_set_3_bonus_is_06
	}
	allow = {
		always = yes
	}
	effect = {
		custom_tooltip = apsr_enclave_defence_bonus_06_info
	}
}

# вариант 7 (R)
apsr_enclave_defence_bonus_03_R_show = {
	potential = {
		has_country_flag = apsr_enclave_defence_set_3_bonus_is_07
	}
	allow = {
		always = yes
	}
	effect = {
		custom_tooltip = apsr_enclave_defence_bonus_07_info
	}
}

# вариант 8 (O)
apsr_enclave_defence_bonus_03_O_show = {
	potential = {
		has_country_flag = apsr_enclave_defence_set_3_bonus_is_08
	}
	allow = {
		always = yes
	}
	effect = {
		custom_tooltip = apsr_enclave_defence_bonus_08_info
	}
}

# вариант 9 (S)
apsr_enclave_defence_bonus_03_S_show = {
	potential = {
		has_country_flag = apsr_enclave_defence_set_3_bonus_is_09
	}
	allow = {
		always = yes
	}
	effect = {
		custom_tooltip = apsr_enclave_defence_bonus_09_info
	}
}

# вариант 10 (B)
apsr_enclave_defence_bonus_03_B_show = {
	potential = {
		has_country_flag = apsr_enclave_defence_set_3_bonus_is_10
	}
	allow = {
		always = yes
	}
	effect = {
		custom_tooltip = apsr_enclave_defence_bonus_10_info
	}
}

# вариант 11 (L)
apsr_enclave_defence_bonus_03_L_show = {
	potential = {
		has_country_flag = apsr_enclave_defence_set_3_bonus_is_11
	}
	allow = {
		always = yes
	}
	effect = {
		custom_tooltip = apsr_enclave_defence_bonus_11_info
	}
}

# вариант 12 (E)
apsr_enclave_defence_bonus_03_E_show = {
	potential = {
		has_country_flag = apsr_enclave_defence_set_3_bonus_is_12
	}
	allow = {
		always = yes
	}
	effect = {
		custom_tooltip = apsr_enclave_defence_bonus_12_info
	}
}

# вариант 13 (D)
apsr_enclave_defence_bonus_03_D_show = {
	potential = {
		has_country_flag = apsr_enclave_defence_set_3_bonus_is_13
	}
	allow = {
		always = yes
	}
	effect = {
		custom_tooltip = apsr_enclave_defence_bonus_13_info
	}
}



### БОНУС 4

# вариант 6 (A)
apsr_enclave_defence_bonus_04_A_show = {
	potential = {
		has_country_flag = apsr_enclave_defence_set_4_bonus_is_06
	}
	allow = {
		always = yes
	}
	effect = {
		custom_tooltip = apsr_enclave_defence_bonus_06_info
	}
}

# вариант 7 (R)
apsr_enclave_defence_bonus_04_R_show = {
	potential = {
		has_country_flag = apsr_enclave_defence_set_4_bonus_is_07
	}
	allow = {
		always = yes
	}
	effect = {
		custom_tooltip = apsr_enclave_defence_bonus_07_info
	}
}

# вариант 9 (S)
apsr_enclave_defence_bonus_04_S_show = {
	potential = {
		has_country_flag = apsr_enclave_defence_set_4_bonus_is_09
	}
	allow = {
		always = yes
	}
	effect = {
		custom_tooltip = apsr_enclave_defence_bonus_09_info
	}
}

# вариант 10 (B)
apsr_enclave_defence_bonus_04_B_show = {
	potential = {
		has_country_flag = apsr_enclave_defence_set_4_bonus_is_10
	}
	allow = {
		always = yes
	}
	effect = {
		custom_tooltip = apsr_enclave_defence_bonus_10_info
	}
}

# вариант 11 (L)
apsr_enclave_defence_bonus_04_L_show = {
	potential = {
		has_country_flag = apsr_enclave_defence_set_4_bonus_is_11
	}
	allow = {
		always = yes
	}
	effect = {
		custom_tooltip = apsr_enclave_defence_bonus_11_info
	}
}

# вариант 12 (E)
apsr_enclave_defence_bonus_04_E_show = {
	potential = {
		has_country_flag = apsr_enclave_defence_set_4_bonus_is_12
	}
	allow = {
		always = yes
	}
	effect = {
		custom_tooltip = apsr_enclave_defence_bonus_12_info
	}
}

# вариант 13 (D)
apsr_enclave_defence_bonus_04_D_show = {
	potential = {
		has_country_flag = apsr_enclave_defence_set_4_bonus_is_13
	}
	allow = {
		always = yes
	}
	effect = {
		custom_tooltip = apsr_enclave_defence_bonus_13_info
	}
}
