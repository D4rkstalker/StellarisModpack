
##################################################
##################################################
#####                                        #####
#####    Notice for Planetary Development    #####
#####                                        #####
#####    scripted_triggers                   #####
#####                                        #####
##################################################
##################################################

### Scopes: this = country
PdnTriggerPotentialCountry = {
	is_ai = no
}

PdnTriggerPossibleCountry = {
	PdnTriggerPotentialCountry = yes
	OR = {
		NOT = { has_country_flag = PdnFlagNotificationDisabledByPoorMinerals }
		resource_stockpile_compare = { resource = minerals value > @PdnConstRequiredStockMinerals }
	}
}


### Scopes: this = planet
PdnTriggerPotentialPlanet = {
	exists = owner
	exists = controller
	controller = { is_same_value = prev.owner }
	NOT = { is_under_colonization = yes }
}

PdnTriggerPossiblePlanetStandard = {
	PdnTriggerPotentialPlanet = yes
	NOR = {
		has_building_construction = yes
		has_planet_flag = PdnFlagDisableNotification@owner
		#has_modifier = resort_colony
	}
	OR = {
		NOT = { has_planet_flag = PdnFlagScantyNotificationInterval@owner }
		always = @PdnConstDebugMode
	}
}

PdnTriggerPossiblePlanetCapital = {
	PdnTriggerPotentialPlanet = yes
	NOR = {
		has_building_construction = yes
		has_planet_flag = PdnFlagDisableNotification@owner
	}
	OR = {
		NOT = { has_planet_flag = PdnFlagBuildingNotificationInterval@owner }
		always = @PdnConstDebugMode
	}
}

### cf. worker_job_check_trigger, drone_job_check_trigger, Scopes: this = pop
PdnTriggerWorkablePop = {
	exists = owner
	OR = {
		is_pop_category = robot_servant
		is_pop_category = simple_drone
		is_pop_category = worker
	}
	NOR = {
		is_being_purged = yes
		is_being_assimilated = yes
		AND = {
			owner = { is_gestalt = yes }
			is_enslaved = yes
		}
		has_citizenship_type = { type = citizenship_organic_trophy }
		AND = {
			has_citizenship_type = { type = citizenship_slavery }
			OR = {
				has_slavery_type = { type = slavery_livestock }
				has_slavery_type = { type = slavery_matrix }
			}
		}
	}
}

### cf can_pops_grow_on_planet, scopes: this = planet (with owner)
PdnTriggerPlanetWithPopGrowth = {
	OR = {
		AND = {
			owner = {
				is_regular_empire = yes
				NOT = { has_country_flag = synthetic_empire }
			}
			OR = {
				NOR = {
					has_modifier = planet_growth_discouraged
					has_modifier = planet_population_control
				}
				AND = {
					NOT = { has_modifier = planet_robot_assembly_control }
					any_owned_pop = { has_job = roboticist }
				}
			}
		}
		AND = {
			owner = {
				is_regular_empire = yes
				has_country_flag = synthetic_empire
			}
			AND = {
				NOT = { has_modifier = planet_robot_assembly_control }
				any_owned_pop = { has_job = roboticist }
			}
		}
		AND = {
			owner = { is_hive_empire = yes }
			NOT = { has_modifier = planet_population_control_gestalt }
		}
		AND = {
			owner = { is_machine_empire = yes }
			NOT = { has_modifier = planet_population_control_gestalt }
			any_owned_pop = { has_job = replicator }
		}
		owner = {		## Backup Code
			NOR = {
				is_regular_empire = yes
				is_hive_empire = yes
				is_machine_empire = yes
			}
		}
	}
}

### Scopes: this = planet (with owner); cf. 00_capital_buildings.txt
PdnTriggerPlanetWithUpgradableCapital = {
	OR = {
		AND = {
			OR = {
				has_building = building_colony_shelter
				has_building = building_deployment_post
				#has_building = N/A
			}
			owner = { has_technology = tech_planetary_government }
			num_pops >= 10
		}
		AND = {
			OR = {
				has_building = building_capital
				has_building = building_machine_capital
				has_building = building_hive_capital
			}
			owner = { has_technology = tech_colonial_centralization }
			num_pops >= 40
		}
		AND = {
			OR = {
				has_building = building_major_capital
				has_building = building_machine_major_capital
				#has_building = building_hive_major_capital		## (largest capital)
			}
			owner = { has_technology = tech_galactic_administration }
			num_pops >= 80
		}
		#AND = {
		#	OR = {
		#		has_building = building_system_capital
		#		has_building = building_machine_system_capital
		#		has_building = N/A
		#	}
		#	prev = { has_technology = N/A }
		#	num_pops >= 9999
		#}
	}
}

### Scopes: this = planet (with owner); cf. building_robot_assembly_plant, building_clinic, building_clone_vats
PdnTriggerCanBuildFirstBuilding = {
	free_building_slots > 0
	num_buildings = { type = any value < 2 }
	NOR = {
		has_modifier = slave_colony
		has_modifier = resort_colony
	}
	owner = {
		OR = {
			is_gestalt = yes
			has_technology = tech_frontier_health
			AND = {
				has_technology = tech_robotic_workers
				NOT = { has_policy_flag = robots_outlawed }
			}
			has_ascension_perk = ap_engineered_evolution
		}
	}
}

################
###  Legacy  ###
################
#
#	PdnTriggerPlanetWithUpgradableCapital = yes
#		OR = {
#			AND = {
#				owner = { is_regular_empire = yes }
#				OR = {
#					AND = {
#						has_building = building_colony_shelter
#						owner = { has_technology = tech_planetary_government }
#						num_pops >= 10
#					}
#					AND = {
#						has_building = building_capital
#						owner = { has_technology = tech_colonial_centralization }
#						num_pops >= 40
#					}
#					AND = {
#						has_building = building_major_capital		## building_system_capital
#						owner = { has_technology = tech_galactic_administration }
#						num_pops >= 80
#					}
#				}
#			}
#			AND = {
#				owner = { is_machine_empire = yes }
#				OR = {
#					AND = {
#						has_building = building_deployment_post
#						owner = { has_technology = tech_planetary_government }
#						num_pops >= 10
#					}
#					AND = {
#						has_building = building_machine_capital
#						owner = { has_technology = tech_colonial_centralization }
#						num_pops >= 40
#					}
#					AND = {
#						has_building = building_machine_major_capital		## building_machine_system_capital
#						owner = { has_technology = tech_galactic_administration }
#						num_pops >= 80
#					}
#				}
#			}
#			AND = {
#				owner = { is_hive_empire = yes }
#				has_building = building_hive_capital		## building_hive_major_capital
#				owner = { has_technology = tech_colonial_centralization }
#				num_pops >= 40
#			}
#		}
#	}	
#
#

