# Check if a planet can be targetd by a planet killer weapon
# Scope:
#   this = planet being targeted
#   from = fleet
#can_destroy_planet_with_PLANET_DESTRUCTION_COMPONENT = {
#	...
#}

can_destroy_planet_with_PLANET_KILLER_CLEANSER = {
	custom_tooltip = {
		fail_text = must_do_sp_first
		NOT = { has_planet_flag = projcrim_sp_present }
	}
	OR = {
		custom_tooltip = {
			text = is_not_infected
			is_planet_class = pc_projcrim_afflicted
		}
		custom_tooltip = {
			text = no_pops_infected
			any_owned_pop = {
				pop_has_trait = trait_crimson_infected
			}
		}
		custom_tooltip = {
			fail_text = controlled_by_throng
			exists = controller
			controller = {
				is_country_type = throng_country
			}
		}
	}
}

is_projcrim_afflicted = {
	is_planet_class = pc_projcrim_afflicted
}

is_crimson_infected = {
	pop_has_trait = trait_crimson_infected
}