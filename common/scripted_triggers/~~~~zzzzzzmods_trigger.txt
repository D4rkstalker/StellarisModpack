# Scripted triggers from mods, expanded to acknowledge other mods.

############################### Acquisition of Technologies ###############################
is_memeable_space_habitat = {
	optimize_memory
	OR = {
		uses_district_set = habitat
		habitable_structure = yes
		merg_is_habitat = yes
		merg_is_hab_ringworld = yes
		# Gigastructural Engineering & More
		giga_habitable_structure = yes
	}
}
is_memeable_ringworld = {
	optimize_memory
	merg_is_hab_ringworld = yes
}

############################### ACOT/AOT/SOS ###############################
can_build_precursor_ship = {
	optimize_memory
	OR = {
		owner = { is_ai = yes }
		AND = {
			is_scope_type = megastructure
			OR = {
				is_megastructure_type = acot_precursor_colossus_base
				is_megastructure_type = acot_precursor_colossus_stage_two
				is_megastructure_type = acot_amerigo
				is_megastructure_type = acot_amerigo_ae
				is_megastructure_type = acot_amerigo_se
				is_megastructure_type = acot_amerigo_oe
				is_megastructure_type = acot_amerigo_pe
				is_megastructure_type = acot_phanon_master_reactor_sphere
				is_megastructure_type = sofe_omega_nexus
                is_megastructure_type = sofe_omega_spy_orb_center
                is_megastructure_type = sofe_omega_dyson_sphere
				# Assault Lily
				is_megastructure_type = college_ship_creater_3
				# Universal Gateway Origin
                is_megastructure_type = universal_gateway_origin_demiurge_forge_8
                is_megastructure_type = universal_gateway_origin_demiurge_forge_9
                is_megastructure_type = universal_gateway_origin_demiurge_forge_9_2
			}
		}
		AND = {
			is_scope_type = starbase
			OR = {
				has_starbase_size = juggernaut
				has_starbase_building = acot_precursor_database	
				is_acot_advanced_starbase = yes
				has_starbase_size = precursor_juggernaut
				is_ascended_juggernaut = yes
				# Assault Lily
				has_starbase_size >= lily_super_college_ship
				# Gigastructural Engineering & More
				has_starbase_module = virtual_shipyard_uplink
				# Universal Gateway Origin
                has_starbase_size >= universal_gateway_citadel
			}
		}
	}
}
is_playable_country = {
	optimize_memory
	OR = {
		merg_is_standard_empire = yes
		is_country_type = sbtg_stellarborne_empire_active
	}
}

############################### All these worlds ###############################
is_fallen_empire_planet = {
	optimize_memory
	owner = {
		OR = {
			merg_is_fallen_empire = yes
			merg_is_awakened_fe = yes
		}
	}
}
exists_collapsed_star = {
	optimize_memory
	solar_system = { any_system_planet = { merg_is_standard_dense_star = yes } }
}
is_collapsed_star = {
	optimize_memory
	merg_is_standard_dense_star = yes
}

############################### Ancient Empire ###############################
ag_is_gateway_megastructure = {
	merg_is_gate_mega = yes
}
ag_is_habitat = {
	optimize_memory
	merg_is_habitat = yes
}
ag_is_compact_star = {
	optimize_memory
	OR = {
		is_planet_class = pc_black_hole
		is_planet_class = pc_neutron_star
		is_planet_class = pc_pulsar
		# Hypothetical Stars
		is_hypo_stars_black_dwarf_star = yes
		is_hypo_stars_strange_star = yes
		is_hypo_stars_white_hole = yes
		# Real Space
		is_rs_collapsar = yes
		is_rs_magnetar = yes
		is_rs_microquasar = yes
	}
}
ag_is_common_country = {
	optimize_memory
	OR = {
		merg_is_default_empire = yes
		is_country_type = fallen_empire
		is_country_type = awakened_fallen_empire
		is_country_type = awakened_marauders
		is_country_type = primitive
		is_country_type = ratlings
	}
}
ag_is_special_constructable_shipyard = {
	optimize_memory
	custom_tooltip = {
		fail_text = "ag_need_ancient_construction_facilities"
		OR = {
			can_build_precursor_ship = yes
			AND = { is_scope_type = starbase OR = {
				has_starbase_size = ag_gamma_station_hostile
				has_starbase_size = ag_gamma_station_0
				has_starbase_size = ag_gamma_station_1
				has_starbase_size = swfo_supremacy
				has_starbase_size = exe_megastructure_starbase
			} }
			AND = { is_scope_type = megastructure OR = {
				is_megastructure_type = ag_ancient_construction_section
				has_megastructure_flag = ag_ancient_construction_section_megashipyard
				
				# is_megastructure_type = Shield_Gate
				is_megastructure_type = StarForge
				is_megastructure_type = exe_black_hole_restore
				is_megastructure_type = exe_black_hole_facility
			} }
			AND = { exists = owner owner = { has_modifier = "ag_debug_modifier_buff_common" } }
		}
	}
}
ag_has_planetary_shield = {
	optimize_memory
	OR = {
		has_active_building = building_planetary_shield_generator
		has_active_building = building_planetary_shield_generator_fe
		# ACOT
		has_active_building = building_dark_energy_psg
		has_active_building = building_ae_dark_energy_psg
		# AOT
		has_active_building = building_phanon_psg
		has_active_building = building_stellarite_psg
		# AVB
		has_active_building = building_avb_planetary_shield_generator_2
		has_active_building = building_avb_planetary_shield_generator_3
		has_active_building = building_avb_dark_matter_planetary_shield_generator
		# Gigas
		has_active_building = building_giga_planetary_shield_generator_1
		has_active_building = building_giga_planetary_shield_generator_2
		# Star Wars: Kuat Ancient Empire
		has_active_building = building_kuat_shield
		# More Events Mod
		has_active_building = building_mem_planetary_shield_generator
		has_active_building = building_mem_planetary_shield_generator_heavy
		has_active_building = building_mem_planetary_shield_generator_orila
		# Nirvana Empire Project
		has_active_building = building_sky_shield
		# Production Revolution
		has_active_building = PR_BLDN_Army_sp_shield_T3
		# Reworked Advanced Ascension
		has_active_building = AAR_bldn_VEIL_shield_generator_T5
		# ThaumStellaris
		has_active_building = building_tc_rune_shield_t1
		has_active_building = building_tc_rune_shield_t2
		has_active_building = building_tc_rune_shield_t3
	}
}
ag_is_star_killer_special_system = {
	optimize_memory
	OR = {
		has_star_flag = ag_no_star_killer_target_system
		kuat_is_kuat_system = yes
		# Gigastructural Engineering & More
		has_star_flag = ehof_compound_system
		has_star_flag = giga_core_03
	}
}

############################### Assault Lily ###############################
is_planet_habitable = {
	AND = {
		is_artificial = no
		colonizable_planet = yes
	}
}

############################### BlueArchive ###############################

is_BA_fallen_empire = {
	merg_is_fallen_empire = yes
	OR = {
		has_country_flag = BA_Gematria
		has_country_flag = BA_Precursor
	}
}
is_BA_fallen_empire_awakened = {
	merg_is_awakened_fe = yes
	OR = {
		has_country_flag = BA_Gematria
		has_country_flag = BA_Precursor
	}
}

############################### Cruel Conquerers ###############################
cruel_has_shipyard = {
	or = {
		has_starbase_module = shipyard
		has_starbase_module = cruel_pain_ship_labor_module
		has_starbase_module = cruel_suffering_ship_labor_module
		has_starbase_module = cruel_agony_ship_labor_module
		# ACOT/AOT/Secrets of the Shroud
		has_starbase_module = acot_starbase_shipyard
		has_starbase_module = acot_sigma_starbase_shipyard
		has_starbase_module = acot_phanon_starbase_shipyard
		has_starbase_module = acot_theta_starbase_shipyard
		# Gigastructural Engineering & More
		has_starbase_module = virtual_shipyard_uplink
	}
}
cruel_can_trade = {
	OR = {
		is_gestalt = no
		# Forgotten Queens
		AND = {
			is_gestalt = yes
			OR = {
				has_valid_civic = civic_mutualistic_behavior
				has_valid_civic = civic_machine_trading
			}
		}
	}
}

############################### Darkspace ###############################
ds_hyperlane_create = {
	NOR = {
		is_same_value = prev
		has_hyperlane_to = prev
		has_star_flag = ds_se_system_fixed
		has_star_flag = ds_galactic_core
		has_star_flag = empire_home_system
		has_star_flag = marauder_system
		has_star_flag = marauder_capital_1
		has_star_flag = empire_cluster
		has_star_flag = fallen_shrouded
		has_star_flag = fallen_shielded_1
		has_star_flag = fallen_shielded_2
		has_star_flag = fallen_shielded_3
		has_star_flag = holy_system_1
		has_star_flag = holy_system_2
		has_star_flag = holy_system_3
		has_star_flag = holy_system_4
		has_star_flag = holy_system_5
		has_star_flag = fe_xeno_zoo	
		has_star_flag = fallen_shield_world
		has_star_flag = fallen_empire_world
		has_star_flag = surveillance_supercomputer_system
		merg_is_isolated_system = yes
		giga_is_core_system = yes
		cohesive_system = yes
		compound_cluster = yes
		annihilator_system = yes
		urmazin_system = yes
	}
}

############################### District Overhaul ###############################
bdoe_is_habitable_structure = { habitable_structure = yes } # Don't reinvent the wheel when you have a tire factory
bdoe_can_have_random_districts = {
	OR = {
		merg_is_basic_habitable = yes
		# Lithoid Supremacy
		is_geode_world = yes
		# Real Space: New Frontiers
		AND = {
			merg_has_real_new_frontiers = yes
			OR = {
				is_planet_class = pc_tidallylocked
				is_planet_class = pc_sterile
				is_planet_class = pc_hollow
			}
		}
		can_have_habitable_deposits = yes
	}
	NOR = {
		# Ancient Empire
		ag_is_mod_habitable_ringworld = yes
		# Planetary Ringworlds
		uses_district_set = planet_ring
		uses_district_set = planet_ring_city
		# The Belt
		bdoe_is_habitable_asteroid = yes
		bdoe_is_habitable_barren = yes
		# WH40K Planets Renewed
		merg_is_wh40k_planet = yes
	}
}
bdoe_is_hive_planet = {
	merg_is_hive_world = yes
}
bdoe_is_machine_planet = {
	merg_is_machine_world = yes
}
bdoe_is_ringworld = {
	merg_is_hab_ringworld = yes
}
bdoe_is_ecu_planet = {
	OR = {
		merg_is_arcology = yes
		# WH40K Planets Renewed
		merg_is_wh40k_planet = yes
	}
}

############################### Electroids ###############################
elec_hyperlane_create = {
	NOR = {
		is_same_value = prev
		has_hyperlane_to = prev
		merg_is_isolated_system = yes
		has_star_flag = darkspace_void_control
		giga_is_core_system = yes
		cohesive_system = yes
		compound_cluster = yes
		annihilator_system = yes
		urmazin_system = yes
	}
}

############################### Ethics and Civics Bug Branch ###############################
is_bugged_starbase = {
	OR = {
		has_starbase_size >= starbase_starport
		# ACOT/AOT/SOTS
		is_precursor_starbase = yes
	}
}

############################### Ethics and Civics Alternative - FunEFork/Classics ###############################
is_toxic_planet = {
	merg_is_toxic = yes
}
is_barren_planet = {
	merg_is_barren = yes
}
is_nuked_planet = {
    merg_is_nuked_basic = yes
}

############################### Exalted Domination ###############################
exalted_is_valid_as_vassal = {
	OR = {
		is_country_type = default
		# The Empty Vagrant
		is_country_type = default_ev
		# Darkspace
		is_country_type = ds_nomads
	}
}

############################### Expanded Events ###############################
is_regular_star = {
	is_star = yes
	merg_is_forbidden_target = no
	NOR = {
		is_planet_class = pc_ae_star
		is_rs_collapsar = yes
		is_rs_magnetar = yes
		is_rs_microquasar = yes
		is_planet_class = pc_d_star
		is_planet_class = pc_fu_star
		is_planet_class = pc_l_star
		is_planet_class = pc_nova_1
		is_planet_class = pc_nova_2
		is_planet_class = pc_protostar
		is_planet_class = pc_t_star
		is_planet_class = pc_tt_red_star
		is_planet_class = pc_tt_orange_star
		is_planet_class = pc_tt_white_star
		is_planet_class = pc_y_star
	}
}
terraforming_candidate_solar_system_check = {
	NOR = {
		merg_is_standard_dense_star = yes
		is_star_class = sc_o_super
		is_star_class = sc_o_hyper
		is_star_class = sc_b_super
		is_star_class = sc_a_super
		is_star_class = sc_f_super
		is_star_class = sc_g_super
		is_star_class = sc_k_super
		is_star_class = sc_m_super
		is_star_class = sc_m_hyper
		is_star_class = sc_nova_1
		is_star_class = sc_nova_2
		is_star_class = sc_collapsar
		is_star_class = sc_protostar
		is_star_class = sc_lbv_blue
		is_star_class = sc_lbv_green
		is_star_class = sc_lbv_red
		is_star_class = sc_o
		is_star_class = sc_b
		is_star_class = sc_a
		is_star_class = sc_l
		is_star_class = sc_d
		is_star_class = sc_c_giant
		is_star_class = sc_s_giant
		is_star_class = sc_w_azure
		is_star_class = sc_w_red
		is_star_class = sc_w_green
		is_star_class = sc_w_purple
		is_star_class = sc_tt_red
		is_star_class = sc_tt_orange
		is_star_class = sc_tt_white
		is_star_class = sc_ae
		is_star_class = sc_p_purple
		is_star_class = sc_p_green
		is_star_class = sc_p_red
		is_star_class = sc_magnetar
		merg_is_void_system = yes
	}
}
is_spy_empire = {
	OR = {
		has_valid_civic = civic_cutthroat_politics
		has_valid_civic = civic_shadow_council
		has_valid_civic = civic_ruthless_competition
		has_valid_civic = civic_criminal_heritage
		has_valid_civic = civic_machine_predictive_analysis
		# Expanded Events
		has_valid_civic = civic_shadow_council_megacorp
		has_valid_civic = civic_self_experimentation
		# Espionage Extended
		has_valid_civic = civic_shadow_state
	}
}
living_metal_candidate = {
	NOT = { has_deposit_for = shipclass_research_station }
	OR = {
		merg_is_barren = yes
		merg_is_barren_cold = yes
		is_asteroid = yes
	}
}

############################### Expanded Stellaris Traditions ###############################
est_is_evil_dip_empire = {
	OR = {
		is_unfriendly = yes
		has_valid_civic = civic_machine_assimilator	
	}
}
est_uses_robots = {
	OR = {
		has_origin = origin_mechanists
		has_country_flag = est_built_robot
	}
	NOR = {
		has_policy_flag = robots_outlawed
		# Organic Zealots
		has_country_flag = lost_robot_policy_war
		is_valid_organic_zealots = yes
		AND = {
			is_subject = yes
			exists = overlord
			overlord = { is_valid_organic_zealots = yes }
		}
	}
}
est_uses_slaves = {
	OR = {
		has_policy_flag = slavery_allowed
		has_policy_flag = ai_servitude
		has_civic =	civic_slaver_guilds
		is_slaver = yes
		has_country_flag = est_built_robot
	}
	NOT = { has_policy_flag = slavery_not_allowed }
}

############################### Expanded Traits, Civics, Pops, and More ###############################
is_open_gestalt = {
	optimize_memory
	OR = {
		has_ai_personality = open_hive_mind
		has_ai_personality = open_machine_intelligence
		# Expanded Gestalts
		has_valid_civic = civic_mutualistic_behavior
		has_valid_civic = civic_machine_trading
	}
}

############################### Extra Ship Components NEXT ###############################
ESC_TRIGGER_is_city_planet = {
    OR = {
        merg_is_arcology = yes
        # district overhaul compatibility
        AND = {
            merg_is_relic_world = yes
            has_district = district_ascended_housing
        }
    }
}

############################### Guilli's Planetary Modifiers ###############################
gpm_is_planet_class_normal_uninhabitable = {
	optimize_memory
	uninhabitable_regular_planet = yes
}
gpm_is_asteroid = { 
	is_asteroid = yes
}
gpm_is_planet_class_barren = {
	optimize_memory
	merg_is_barren = yes
	merg_is_barren_cold = yes
}
gpm_is_planet_class_molten = {
	optimize_memory
	merg_is_molten = yes
}
gpm_is_planet_class_toxic = {
	optimize_memory
	OR = {
		merg_is_toxic = yes
		# Planetary Diversity
		is_pd_exotic = yes
	}
}
gpm_is_planet_class_frozen = {
	merg_is_frozen = yes
}
gpm_is_planet_class_normal_habitable = {
	habitable_planet = yes
	is_artificial = no
}
gpm_is_planet_class_nuked = {
	merg_is_nuked_basic = yes
}
gpm_is_planet_class_gas_giant = {
	optimize_memory
	merg_is_gas_giant = yes
}
gpm_is_planet_class_city = {
	optimize_memory
	OR = {
		merg_is_arcology = yes
		merg_is_relic_world = yes
	}
}
gpm_is_planet_class_machine = {
	optimize_memory
	merg_is_machine_world = yes
}
gpm_is_planet_class_hive = {
	optimize_memory
	merg_is_hive_world = yes
}
gpm_is_planet_class_habitat = {
	optimize_memory
	merg_is_habitat = yes
}
gpm_is_planet_class_ringworld = {
	optimize_memory
	merg_is_hab_ringworld = yes
}
gpm_is_planet_fallen_empire = {
	optimize_memory
	exists = owner
	owner = {
		OR = {
			merg_is_fallen_empire = yes
			merg_is_awakened_fe = yes
		}
	}
}
gpm_is_fallen_empire_space_owner = {
	optimize_memory
	exists = space_owner
	space_owner = {
		OR = {
			merg_is_fallen_empire = yes
			merg_is_awakened_fe = yes
		}
	}
}
eligible_for_rare_crystals = {
	optimize_memory
	NOR = {
		has_deposit_for = shipclass_research_station
		has_planet_flag = has_dark_matter_deposit
		has_planet_flag = has_negative_mass_deposit
		has_planet_flag = has_zro_deposit
		has_planet_flag = has_living_metal_deposit
		has_planet_flag = has_physics_deposit
		has_planet_flag = has_society_deposit
		has_planet_flag = has_engineering_deposit
		event_target:current_system_creator = { NOT = { has_technology = tech_mine_rare_crystals } }
		merg_is_gas_giant = yes
		is_star = yes
	}
}
eligible_for_volatile_motes = {
	optimize_memory
	NOR = {
		has_deposit_for = shipclass_research_station
		has_planet_flag = has_dark_matter_deposit
		has_planet_flag = has_negative_mass_deposit
		has_planet_flag = has_zro_deposit
		has_planet_flag = has_living_metal_deposit
		has_planet_flag = has_physics_deposit
		has_planet_flag = has_society_deposit
		has_planet_flag = has_engineering_deposit
		event_target:current_system_creator = { NOT = { has_technology = tech_mine_volatile_motes } }
		merg_is_gas_giant = yes
		is_star = yes
	}
}
eligible_for_alloys = {
	optimize_memory
	NOR = {
		has_deposit_for = shipclass_research_station
		has_planet_flag = has_dark_matter_deposit
		has_planet_flag = has_negative_mass_deposit
		has_planet_flag = has_zro_deposit
		has_planet_flag = has_living_metal_deposit
		has_planet_flag = has_physics_deposit
		has_planet_flag = has_society_deposit
		has_planet_flag = has_engineering_deposit
		merg_is_gas_giant = yes
		is_star = yes
	}
}
eligible_for_zro = {
	optimize_memory
	NOR = {
		has_deposit_for = shipclass_research_station
		solar_system = {
			NOT = {
				any_system_planet = {
					OR = {
						has_planet_flag = has_living_metal_deposit
						has_planet_flag = has_zro_deposit
					}
				}
			}
		}
		event_target:current_system_creator = { NOT = { has_technology = tech_mine_zro } }
		event_target:current_system_creator = { has_country_flag = recently_spawned_zro }
		has_planet_flag = has_dark_matter_deposit
		has_planet_flag = has_negative_mass_deposit
		has_planet_flag = has_living_metal_deposit
		merg_is_gas_giant = yes
		is_star = yes
	}
}
eligible_for_living_metal = {
	optimize_memory
	NOR = {
		has_deposit_for = shipclass_research_station
		solar_system = {
			NOT = {
				any_system_planet = {
					OR = {
						has_planet_flag = has_living_metal_deposit
						has_planet_flag = has_zro_deposit
					}
				}
			}
		}
		event_target:current_system_creator = { NOT = { has_technology = tech_mine_living_metal } }
		event_target:current_system_creator = { has_country_flag = recently_spawned_lm }
		has_planet_flag = has_zro_deposit
		has_planet_flag = has_dark_matter_deposit
		has_planet_flag = has_negative_mass_deposit
		merg_is_gas_giant = yes
		is_star = yes
	}
}
gpm_has_required_terraform_modifier = {
	optimize_memory
	is_terraforming_candidate = yes
	NOT = { has_planet_flag = gpm_solidified_planet_core }
}
gpm_is_country_type_default = { merg_is_default_empire = yes }
gpm_is_country_type_fallen_empire = { merg_is_fallen_empire = yes }
gpm_is_country_type_awakened_fallen_empire = { merg_is_awakened_fe = yes }

############################### Harvest Engine Crisis ###############################
harvester_is_crackable = {
	merg_is_forbidden_target = no
	AND = {
		OR = {
			num_minerals >= 1
			# Will always treat colonies as crackable, unless they are habitats or ringworlds
			AND = {
				is_colony = yes
				is_artificial = no
			}
		}
		NOR = {
			is_star = yes
			is_asteroid = yes
			is_planet_class = pc_shattered #Prevent Overcracking
			is_planet_class = pc_shattered_2
			is_planet_class = pc_egg_cracked
			is_planet_class = pc_broken
			is_planet_class = pc_machine_broken
		}
		is_content_world = no
	}
}

############################### History of the Lost Empire ###############################
afk_target_planet = {
	optimize_memory
	OR = {
		merg_is_arcology = yes
		merg_is_relic_world = yes
		merg_is_hive_world = yes
		merg_is_machine_world = yes
		colonizable_planet = yes
		habitable_planet = yes
		is_artificial = yes
		uninhabitable_regular_planet = yes
		# Planetary Diversity
		merg_is_nuked_basic = yes
		# Gigastructures
		giga_is_katzenland = yes
		# SW:UnknownWorld Shipgirls Story
		uses_district_set = engineer_world
		uses_district_set = rw_swgs_engineer_world
		# Warship Girls R And MIST Species
		uses_district_set = port_world
		uses_district_set = sh_world
		# SW: UnknownWorld Shipgirls Story
		uses_district_set = engineer_world
		uses_district_set = rw_swgs_engineer_world
		# APSR: Anomalies, Planetary and Space Resources
		has_apsr_modifiers = yes
		# Planetary Diversity
		is_pd_planet_class_all = yes
		# Gigastructural Engineering & More
		is_planet_class = pc_red_toxic
	}
	merg_is_forbidden_target = no
}

############################### Human Fallen Empires ###############################
hfe_trigger_is_asteroid = {
	is_asteroid = yes
}
hfe_trigger_is_fallen = {
	or = {
		is_fallen_empire = yes
		hfe_trigger_is_human_fallen = yes
	}
}
hfe_trigger_system_in_free_space = {
	hfe_trigger_system_in_someones_space = no
	any_system = { has_hyperlane_to = prev }
	merg_is_void_system = no
}
hfe_trigger_terminator_event = {
	is_at_war = no
	has_country_flag = hfe_marked_as_human
	exists = ruler.species
	ruler.species = {
		or = {
			is_species_class = HUM
			is_same_species = prev
		}
	}
	exists = capital_scope
	capital_scope = {
		or = {
			habitable_structure = yes
			is_wet = yes
			is_dry = yes
			is_cold = yes
			merg_is_gaia = yes
			merg_is_nuked_basic = yes
		}
	}
	any_relation = {
		opinion = {
			who = prev
			value > 100
		}
	}
	any_planet_within_border = {
		is_dry = yes
		not = {
			is_planet = prev.capital_scope
		}
	}
	any_planet_within_border = {
		merg_is_ocean = yes
		not = {
			is_planet = prev.capital_scope
		}
	}
}
hfe_trigger_ascension_points = {
	custom_tooltip = {
		fail_text = hfe_ascension_points
		not = {
			calc_true_if = {
				amount = 2
				has_ascension_perk = ap_engineered_evolution
				has_tradition = tr_genetics_finish
				has_ascension_perk = ap_the_flesh_is_weak
				has_tradition = tr_synthetics_finish
				has_ascension_perk = ap_mind_over_matter
				has_tradition = tr_psionics_psionic_assimilation
			}
		}
	}
}
hfe_trigger_is_assimilator = {
	is_homicidal = no
	OR = {
		has_valid_civic = civic_machine_assimilator
		hfe_trigger_brainworm_country = yes
		AND = {
			has_authority = auth_hive_mind
			has_tradition = tr_genetics_finish
		}
		# Expanded Traits, Civics, Pops, and More
		has_valid_civic = civic_infestation
		# Ethical Gestalts
		has_valid_civic = civic_hive_assimilator
	}
}
hfe_trigger_planet_valid_for_settle = {
	is_under_colonization = no
	has_orbital_bombardment = no
	is_controlled_by = owner
	not = {
		has_planet_flag = hfe_settle_pop_block
	}
	# Merger tweak
	is_doomsday_planet = no
}

############################### Infinity Stones ###############################
infmod_is_relevant = {
	optimize_memory
	OR = {
		merg_is_default_empire = yes
		merg_is_fallen_empire = yes
		merg_is_awakened_fe = yes
	}
}

############################### Kancolle ###############################
is_gas_giant = { merg_is_gas_giant = yes }

############################### Legendary Worlds ###############################
legw_planet_uninhabitable = {
	optimize_memory
	uninhabitable_regular_planet = yes
}
legw_planet_habitable = {
	optimize_memory
	AND = {
		colonizable_planet = yes
		is_artificial = no
	}
}
legw_megaplanet = {
	optimize_memory
	OR = {
		is_artificial = yes
		is_planet_class = pc_machine
		is_planet_class = pc_cybrex
		# Planetary Diversity
		is_pd_machine = yes
		is_pd_robot_arcology = yes
		# Girls Frontline
		uses_district_set = GF_sf_machine_world
		# Gigastructural Engineering & More
		uses_district_set = giga_planetary_computer
		# Origin - F.C.S.S & M.C.S.S
		uses_district_set = awaken_ai_world
		# ZOFE
		uses_district_set = utopian_machine_world
	}
}
legw_is_dry = { is_dry = yes }
legw_is_wet = { is_wet = yes }
legw_is_cold = { is_cold = yes }
legw_fallen_empire_planet = {
	optimize_memory
	owner = {
		OR = {
			merg_is_fallen_empire = yes
			merg_is_awakened_fe = yes
		}
	}
}

############################### More Events Mod ###############################
mem_is_spherical_world = {
	optimize_memory
	NOR = {
		habitable_structure = yes
		merg_is_habitat = yes
		merg_is_hab_ringworld = yes
		# Gigastructural Engineering & More
		giga_habitable_structure = yes
	}
}
mem_has_happiness = {
	NOR = {
		has_trait = trait_machine_unit
		has_trait = trait_hive_mind
		can_think = no
		# Diagraphers Trait Mod
		is_multihive_drone = yes
		# ThaumStellaris
		AND = {
			merg_has_thaumstellaris = yes
			species = {
				OR = {
					is_archetype = TC_GOLEM
					is_archetype = TC_GOLEM_HIVE
					is_archetype = TC_GOLEM_MACHINE
				}
			}
		}
		# Trait Diversity
		td_has_no_happiness = yes
		# Wandering Witch: Voyagers
		has_trait = trait_servitude
		AND = {
			has_trait = trait_dummy
			OR = {
				NOT = { exists = from }
				from = { 
					NOR = { 
						has_technology = tech_synthetic_workers 
						has_technology = tech_dummy_leaders
						has_origin = origin_garbage_princesses
						has_country_flag = synthetic_empire
					} 
				}
				from = { has_policy_flag = ai_outlawed }
			}
		}
		# Warship Girls R And MIST Species
		has_trait = sh_trait_shenhai
		has_trait = sh_trait_shenhai1
		has_trait = sh_trait_shenhai2
		has_trait = sh_trait_silent
		has_trait = sh_trait_silent1
		# Vanilla
		AND = {
			has_trait = trait_mechanical
			# Animated Synthetics Portraits Expanded: Reborn
			OR = {
				merg_has_animated_synth = no
				AND = {
					merg_has_animated_synth = yes
					from = { is_machine_empire = yes }
					is_extsynth_synthetic = yes
					NOT = { has_trait = trait_psionic }
				}
				AND = {
					merg_has_animated_synth = yes
					NAND = {
						from = { is_machine_empire = yes }
						is_extsynth_synthetic = yes
					}
				}
			}
			# Vanilla
			OR = {
				NOT = { exists = from }
				from = {
					OR = {
						is_machine_empire = yes
						NOR = {
							has_technology = tech_synthetic_workers
							# Wandering Witch: Voyagers
							has_technology = tech_dummy_leaders
						}
						has_policy_flag = ai_outlawed
					}
				}
			}
		}
		AND = {
			has_trait = trait_cybernetic
			exists = from
			from = {
				is_machine_empire = yes
				OR = {
					has_civic = civic_machine_assimilator # Assimilator empire
					has_ascension_perk = ap_gestaltization # Ethical Gestalts
				}
			}
		}
	}
}

############################### More Precursors ###############################
FHMP_is_valid_precursor_planet = {
	OR = {
		merg_is_barren = yes
		merg_is_barren_cold = yes
		merg_is_frozen = yes
		merg_is_nuked_basic = yes
	}
}
FHMP_is_valid_werediran_planet = {
	OR = {
		merg_is_alpine = yes
		merg_is_arctic = yes
		merg_is_arid = yes
		merg_is_continental = yes
		merg_is_desert = yes
		merg_is_gaia = yes
		merg_is_nuked_basic = yes
		merg_is_ocean = yes
		merg_is_savannah = yes
		merg_is_tropical = yes
		merg_is_tundra = yes
	}
}

############################### Organic Zealots ###############################
is_valid_target_to_outlaw_cybernetics_or_robot_pops_or_ai = {
	optimize_memory
	merg_is_default_empire = yes
	is_robot_empire = no
	OR = {
		has_ascension_perk = ap_the_flesh_is_weak
		has_ascension_perk = ap_organo_machine_interfacing
		has_ascension_perk = ap_synthetic_evolution
		has_policy_flag = robots_allowed
		AND = {
			can_set_ai_policy = yes
			OR = {
				has_policy_flag = ai_servitude
				has_policy_flag = ai_full_rights
			}
		}
	}
}

############################### Origin Beings ###############################
darhmod_seres_digsite_spawn_rules = {
	has_access_fleet = root.owner
	OR = {
		has_owner = no
		owner = { is_same_value = root.owner }
	}
	NOR = {
		is_same_value = root.solar_system
		any_system_planet = {
			is_capital = yes
			has_planet_flag = precursor_world
			has_planet_flag = darhmod_seres_colony
		}
	}
	solar_system = { exists = star }
	any_system_planet = {
		is_star = no
		has_anomaly = no
		is_capital = no
		NOR = {
			merg_is_shielded = yes
			merg_is_gas_giant = yes
			merg_is_empty_space = yes
			exists = archaeological_site
		}
	}
	NOT = {
		any_neighbor_system = {
			any_system_planet = {
				OR = {
					has_planet_flag = precursor_world
					has_planet_flag = darhmod_seres_colony
				}
			}
		}
	}
}

############################### Planetary Diversity ###############################
ai_should_build_pd_habitats = {
	merg_is_default_empire = yes
	OR = {
		is_at_war = no
		mid_game_years_passed > 0
	}
	has_technology = tech_pdhabitat_2
	if = {
		limit = { ai_colonize_plans <= 0 }
		OR = {
			NOT = { has_trait = trait_aquatic }
			has_ascension_perk = ap_hydrocentric
		}
	}
	NOT = {
		any_planet_within_border = {
			is_pd_habitat = yes
			is_colony = no
		}
	}
	NOT = { any_neighbor_country = { is_crisis_faction = yes } }
}

############################### Primitive Conquest Enhancements ###############################
pce_planet_uses_district_farming_uncapped = {
	optimize_memory
	OR = {
		uses_district_set = hive_world
		uses_district_set = shattered_ring_world
		AND = {
			merg_is_ocean = yes
			exists = owner
			owner = { is_anglers_empire = yes }
		}
	}
}

############################### Real Space ###############################
has_mineral_deposit = {
	optimize_memory
	OR = {
		has_deposit = d_veiny_cliffs
		has_deposit = d_mineral_fields
		has_deposit = d_prosperous_mesa
		has_deposit = d_ore_rich_caverns
		has_deposit = d_rich_mountain
		has_deposit = d_submerged_ore_veins
		# Real Space
		has_deposit = d_offshore_fields
		has_deposit = d_abundant_atoll
		has_deposit = d_rich_lodes
		# GPM
		has_deposit = gpm_d_spaceship_graveyard
		has_deposit = gpm_d_unusual_formations
		has_deposit = gpm_d_floating_rocks
		has_deposit = gpm_d_super_volcano
		has_deposit = gpm_d_obsidian_fields
		has_deposit = gpm_d_rich_crater
		has_deposit = gpm_d_surface_mineral_veins
		has_deposit = gpm_d_dense_metal_veins
		has_deposit = gpm_d_iron_mountain
		has_deposit = gpm_d_garbage_patch
		has_deposit = gpm_d_fossilized_egg_sacks
		has_deposit = gpm_d_fossilized_structures
		has_deposit = gpm_d_fossilized_creep
		has_deposit = gpm_d_giant_skeleton
	}
}
is_mineral_deposit = {
	optimize_memory
	OR = {
		is_deposit_type = d_veiny_cliffs
		is_deposit_type = d_mineral_fields
		is_deposit_type = d_prosperous_mesa
		is_deposit_type = d_ore_rich_caverns
		is_deposit_type = d_rich_mountain
		is_deposit_type = d_submerged_ore_veins
		# Real Space
		is_deposit_type = d_offshore_fields
		is_deposit_type = d_abundant_atoll
		is_deposit_type = d_rich_lodes
		# GPM
		is_deposit_type = gpm_d_spaceship_graveyard
		is_deposit_type = gpm_d_unusual_formations
		is_deposit_type = gpm_d_floating_rocks
		is_deposit_type = gpm_d_super_volcano
		is_deposit_type = gpm_d_obsidian_fields
		is_deposit_type = gpm_d_rich_crater
		is_deposit_type = gpm_d_surface_mineral_veins
		is_deposit_type = gpm_d_dense_metal_veins
		is_deposit_type = gpm_d_iron_mountain
		is_deposit_type = gpm_d_garbage_patch
		is_deposit_type = gpm_d_fossilized_egg_sacks
		is_deposit_type = gpm_d_fossilized_structures
		is_deposit_type = gpm_d_fossilized_creep
		is_deposit_type = gpm_d_giant_skeleton
	}
}
planetary_catastrophe_is_possible = {
	is_colony = yes
	num_pops > 0
	OR = {
		merg_is_desert = yes
		merg_is_arid = yes
		merg_is_savannah = yes
		merg_is_tropical = yes
		merg_is_ocean = yes
		merg_is_continental = yes
		merg_is_arctic = yes
		merg_is_alpine = yes
		merg_is_tundra = yes
		merg_is_gaia = yes
		merg_is_nuked_basic = yes
		merg_is_hive_world = yes
		merg_is_arcology = yes
		merg_is_relic_world = yes
		merg_is_hab_ringworld = yes
		merg_is_habitat = yes
		is_planet_class = pc_sterile
	}
	NOR = {
		has_planet_flag = colony_event
		has_planet_flag = planetary_disaster
		solar_system = { has_star_flag = star_disaster }
	}
	merg_is_forbidden_target = no
}
star_catastrophe_is_possible = {
	is_primary_star = yes
	OR = {
		is_planet_class = pc_k_star
		is_planet_class = pc_g_star
		is_planet_class = pc_f_star
		is_planet_class = pc_m_giant_star
		is_planet_class = pc_k_giant_star
		is_planet_class = pc_g_giant_star
		is_planet_class = pc_a_star
		is_planet_class = pc_b_star
	}
	solar_system = {
		NOR = { 
			has_star_flag = star_disaster
			has_star_flag = dyson_sphere_built
			has_star_flag = AI_hub
			has_star_flag = cybrex_beta
			has_star_flag = guardian
			has_star_flag = guardians_of_zanaam
			has_star_flag = sanctuary_system
			has_star_flag = hyacinth_system
			has_star_flag = ai_system
			has_star_flag = sentinel_system
			has_star_flag = vultaumar
			has_star_flag = yuhtaan
			has_star_flag = fen_habbanis
			has_star_flag = irass 
			has_star_flag = cybrex
			has_star_flag = ruined_dyson_system
			AND = {
				has_star_flag = ruined_ring_system
				any_system_megastructure = { is_megastructure_type = ring_world_ruined }
			}
		}
		any_system_planet = { planetary_catastrophe_is_possible = yes }
	}
}

############################### Real Space New Frontiers ###############################
is_moon_of_gas_giant = {
	optimize_memory
	is_scope_type = planet
	exists = orbit
	OR = {
		orbit = { merg_is_gas_giant = yes }
		orbit = { merg_is_gas_giant_habitable = yes }
		has_planet_flag = gas_giant_moon
	}
}

############################### Reworked Advanced Ascension ###############################
# Fixing the trigger and removing obsolete code
AAR_trgr_cntr_playable = {
	optimize_memory
	OR = {
		merg_is_default_empire = yes
		merg_is_fallen_empire = yes
		merg_is_awakened_fe = yes
	}
}
AAR_trgr_ship_SB_valid = {
	OR = {
		AND = {
			is_ship_class = shipclass_starbase
			fleet = { is_mobile = no }
			NOT = { is_ship_size = starbase_outpost }
		}
		is_orbital_ring = yes
	}
}

############################### Starborn ###############################
has_gene_clinic = {
	optimize_memory
	OR = {
		has_building = building_hospital
		has_building = building_clinic
		# ACOT
		has_building = building_fe_hospital
		has_building = building_ae_hospital
		# AOT
		has_building = building_stellarite_hospital
		has_building = building_phanon_hospital
	}
}
starborn_can_place_hab = {
	optimize_memory
	custom_tooltip = {
		fail_text = "requires_surveyed_planet"
		is_surveyed = {
			# prevent leaking habitability information
			who = prev.from
			status = yes
		}
	}
	custom_tooltip = {
		fail_text = "requires_no_anomaly"
		has_anomaly = no
	}
	custom_tooltip = {
		fail_text = "requires_no_existing_megastructure"
		NOR = {
			has_planet_flag = megastructure
			has_planet_flag = has_megastructure
			solar_system = {
				has_star_flag = ring_world_built
			}
			is_planet_class = pc_ringworld_habitable_damaged
			is_planet_class = pc_ringworld_tech
			is_planet_class = pc_ringworld_tech_damaged
			is_planet_class = pc_ringworld_seam
			is_planet_class = pc_ringworld_seam_damaged
			merg_is_habitat_non_starborn = yes
			merg_is_hab_ringworld = yes
			# Gigastructural Engineering & More
			giga_habitable_structure = yes
		}
	}
	custom_tooltip = {
		fail_text = "requires_no_orbital_debris"
		NOR = { has_planet_flag = has_orbital_debris }
	}
	custom_tooltip = {
		fail_text = "requires_not_solarpunk"
		NOT = { solar_system = { has_star_flag = solarpunk_system_02 } }
	}
}

############################### Star Wars: Kuat Ancient Empire ###############################
kuat_is_common_country = {
	optimize_memory
	OR = {
		merg_is_standard_empire = yes
		is_country_type = awakened_marauders
		is_country_type = primitive
		is_country_type = ratlings
	}
}
kuat_is_defense_galaxy_fleet = {
	optimize_memory
	any_country = {
		OR = {
			is_crisis_faction = yes
			# Ancient Empire
			is_country_type = ag_ancient_gamma_guardian
			is_country_type = ag_zeta_crisis_country
			is_country_type = ag_ancient_primitive_crisis
		}
	}
}
kuat_is_ringworld = {
	OR = {
		is_ringworld = yes
		merg_is_hab_ringworld = yes
	}
}
kuat_is_habitat = {
	merg_is_habitat = yes
}
kuat_is_event_borderment_ringworld = {
	OR = {
		merg_is_hab_ringworld = yes
		merg_is_habitat = yes
		AND = {
			merg_has_ancient_empire = yes
			kuat_is_holy_world_planet = yes
		}
	}
}
kuat_is_playable_country = {
	OR = {
		is_ai = no
		merg_is_default_empire = yes
		is_country_type = enclave_mercenary
		is_country_type = fallen_empire
		is_country_type = awakened_fallen_empire
		is_country_type = ascended_empire
		is_country_type = eternal_empire
		is_country_type = sbtg_light_seeker	
		is_country_type = star_fantasy_empire
		is_country_type = endtime_star_fantasy_empire
		is_country_type = hfe_drone
		is_country_type = hfe_thoth
		is_country_type = hfe_pirate
		is_country_type = hfe_features_exodus
	}
}
############################### ThaumStellaris ###############################
tc_element_shard_candidate = {
	optimize_memory
	NOT = { has_deposit_for = shipclass_research_station }
	OR = {
		uninhabitable_regular_planet = yes
		is_asteroid = yes
		is_planet_class = pc_broken
		is_planet_class = pc_shattered
		is_planet_class = pc_shattered_2
	}
}

############################### THE ABYSS CONTRACT ###############################
TAC_is_common_country = {
	optimize_memory
	OR = {
		merg_is_standard_empire = yes
		is_country_type = awakened_marauders
		is_country_type = primitive
		is_crisis_faction = yes
		is_country_type = gate_builders
		is_country_type = gray_goo
		is_country_type = ratlings
	}
}
TAC_is_sc_void = {
	optimize_memory
	OR = {
		merg_is_void_system = yes
		NOT = { exists = star }
	}
}

############################### The DAL Species Mod ###############################
is_special_colony_planet_class = {
	optimize_memory
	OR = {
		merg_is_arcology = yes
		is_planet_class = pc_cybrex
		merg_is_habitat = yes
		merg_is_hab_ringworld = yes
		# Gigastructural Engineering & More
		giga_habitable_structure = yes
	}
}

############################### The Empty Vagrant ###############################
can_be_ev_investment_country = {
	OR = {
		is_country_type = default
		# Darkspace
		is_country_type = ds_nomads
	}
	is_hive_empire = no
	is_machine_empire = no
	num_owned_planets > 0
	opinion = {
		who = root
		value > -99
	}
	NOT = {
		is_at_war_with = root
	}
	NOR = {
		has_ethic = ethic_fanatic_xenophobe
		is_homicidal = yes
		# Expanded Traits, Civics, Pops, and More
		has_valid_civic = civic_infestation
	}
	has_communications = ROOT
	NOT = {
		has_country_flag = ev_received_an_investment
	}
	is_ai = yes
}

############################### The Storm Cluster ###############################
scluster_uninhabitable_planet = {
	OR = {
		uninhabitable_regular_planet = yes
		merg_is_gas_giant = yes
	}
}
scluster_habitable_planet_urban = {
	OR = {
		merg_is_relic_world = yes
		merg_is_arcology = yes
	}
}
scluster_habitable_planet_normal_dry = {
	OR = {
		merg_is_arid = yes
		merg_is_desert = yes
		merg_is_savannah = yes
	}
}
scluster_habitable_planet_normal_wet = {
	OR = {
		merg_is_continental = yes
		merg_is_ocean = yes
		merg_is_tropical = yes
	}
}
scluster_habitable_planet_normal_cold = {
	OR = {
		merg_is_tundra = yes
		merg_is_arctic = yes
		merg_is_alpine = yes
	}
}
scluster_is_barren = {
	OR = {
		merg_is_barren = yes
		merg_is_barren_cold = yes
		is_asteroid = yes
	}
}

############################### Shadowgate ###############################
shadowgate_is_fe = {
	optimize_memory
	OR = {
		is_country_type = fallen_empire
		# History of the Lost Empire
		is_country_type = LsE_fallen_empire
		# SW:KUAT ANCIENT EMPIRE
		is_country_type = kuat_fallen_empire
		# The Empty Vagrant
		is_country_type = fallen_empire_ev
		# ZOFE
		is_country_type = lost_empire
	}
}
shadowgate_is_ae = {
	optimize_memory
	OR = {
		is_country_type = awakened_fallen_empire
		# A Deadly Tempest
		is_country_type = awakened_gate_builders
		# SW:KUAT ANCIENT EMPIRE
		is_country_type = kuat_awakened_fallen_empire
		is_country_type = awakened_return_kuat_empire
		# ZOFE
		is_country_type = ascended_empire
	}
}
shadowgate_aggressor_is_valid_cb_target = {
	optimize_memory
	NOR = {
		is_in_federation_with = root.from
		is_hostile = root.from
		has_casus_belli = { type = cb_shadowrift_attacked target = root.from }
	}
	root.from = {
		OR = {
			merg_is_default_empire = yes
			shadowgate_is_fe = yes
			shadowgate_is_ae = yes
		}
	}
	OR = {
		is_subject = no
		overlord = { NOT = { is_same_value = root.from } }
	}
	root.fromfrom.solar_system = { has_access_fleet = event_target:shadowgate_assaulted_owner }
	has_communications = root.from
}

############################### Voyage to Eternity ###############################
KZ_VOY_has_communications_normal_country = {
	optimize_memory
	OR = {
		merg_is_default_empire = yes
		merg_is_fallen_empire = yes
		merg_is_awakened_fe = yes
	}
	has_communications = prev
	NOT = { is_country = prev }
}

############################### Wandering Witch: Voyagers ###############################
has_psi_jumpdrive = {
	OR = {
		has_component = PSI_JUMP_DRIVE_1
		has_component = EST_JUMP_DRIVE
		# ACOT
		has_component = SHROUD_DRIVE
	}
}
can_reduce_upkeep_dummy = {
	has_trait = trait_dummy
	planet = {
		OR = {
			merg_is_gaia = yes
			merg_is_continental = yes
			merg_is_tropical = yes
			merg_is_ocean = yes
			merg_is_hab_ringworld = yes
			has_planet_flag = wet_planet
		}
	}
}

############################### Warship Girls R and MIST Species ###############################
is_habitat_wg = {
	optimize_memory
	OR = {
		is_planet_class = pc_flat_world
		is_planet_class = pc_squareworld_habitable
		merg_is_habitat = yes
	}
}
is_default_and_fallen_country = {
	optimize_memory
	OR = {
		merg_is_default_empire = yes
		merg_is_fallen_empire = yes
		merg_is_awakened_fe = yes
	}
}
is_default_country_wg = {
	optimize_memory
	merg_is_default_empire = yes
}
has_active_wg_foundry_building = {
	OR = {
		has_active_wg_foundry_building_lv_low = yes
		has_active_wg_foundry_building_lv_high = yes
	}
}
has_active_wg_foundry_building_lv_low = {
	OR = {
		has_active_building = building_foundry_1
		has_active_building = building_foundry_2
		# Warship Girls R and MIST Species
		has_active_building = building_sep_foundry
		has_active_building = building_wsg_foundry
		has_active_building = building_gray_nano_foundry
		has_active_building = building_sh_foundry
	}
}
has_active_wg_foundry_building_lv_high = {
	OR = {
		has_active_building = building_foundry_3
		has_active_building = building_nano_forge
		# ACOT
		has_active_building = building_fe_alloy_forge
		has_active_building = building_ae_alloy_forge
		has_active_building = building_ae_nano_forge
		# AOT
		has_active_building = building_fe_nano_forge
		has_active_building = building_phanon_nano_forge
		has_active_building = building_phanon_alloy_forge
		has_active_building = building_stellarite_nano_forge
		has_active_building = building_stellarite_alloy_forge
		# AVB
		has_active_building = building_avb_foundry_4
		has_active_building = building_avb_foundry_5
		has_active_building = building_avb_foundry_6
		# EDA
		has_active_building = eda_building_alloy_foundry
		# Protoss
		has_active_building = protoss_building_bf
		# Warship Girls R and MIST Species
		has_active_building = building_sep_foundry2
		has_active_building = building_wsg_foundry
		has_active_building = building_gray_nano_foundry2
		has_active_building = building_sh_foundryU
		# Wula Fallen Empire
		has_active_building = building_wula_foundry
	}
}
has_active_wg_factory_building = {
	OR = {
		has_active_building = building_factory_1
		has_active_building = building_factory_2
		has_active_building = building_factory_3
		has_active_building = building_affluence_center
		# ACOT
		has_active_building = building_fe_factory
		has_active_building = building_ae_factory
		has_active_building = building_ae_affluence_center
		# AOT
		has_active_building = building_fe_affluence_center
		has_active_building = building_phanon_affluence_center
		has_active_building = building_phanon_civilian_factory
		has_active_building = building_stellarite_affluence_center
		# AVB
		has_active_building = building_avb_factory_4
		has_active_building = building_avb_factory_5
		has_active_building = building_avb_factory_6
		# EDA
		has_active_building = eda_building_factory
		# GPM
		has_active_building = gpm_building_manufactory_hub
		# Warship Girls R and MIST Species
		has_active_building = building_sep_foundry
		has_active_building = building_gray_nano_factory
	}
}
has_gate_megastructure = {
	optimize_memory
	merg_is_gate_mega = yes
}

############################### Wild Space ###############################
is_nebula_star = {
	optimize_memory
	Or = {
		is_star_class = sc_collapsar
		is_star_class = sc_p_purple
		is_star_class = sc_p_green
		is_star_class = sc_p_red
		# Misc Nebulae
		is_star_class = sc_p_purple
		is_star_class = sc_p_green
		is_star_class = sc_p_red
		is_star_class = sc_nova_1
		is_star_class = sc_nova_2
		is_star_class = sc_w_azure
		is_star_class = sc_w_red
		is_star_class = sc_w_green
		is_star_class = sc_w_purple
		is_star_class = sc_lbv_blue
		is_star_class = sc_lbv_green
		is_star_class = sc_lbv_red
	}
}

############################### Zenith of the Fallen Empires ###############################
# Overwriting this for ZOFE and comp mods
is_zofe_compatible = {
	optimize_memory
	merg_is_default_empire = yes
}
is_zofe_megacorp = {
	optimize_memory
	is_zofe_country = yes
	OR = {
		is_megacorp = yes
		# Forgotten Queens
		has_valid_civic = civic_mutualistic_behavior
		has_valid_civic = civic_machine_trading
	}
}
