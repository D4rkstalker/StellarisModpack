is_base_planet = {
	OR = {
		is_planet_class = pc_barren
		is_planet_class = pc_barren_cold
	}
}

is_difficult_planet = {
	OR = {
		is_planet_class = pc_molten
		is_planet_class = pc_toxic
		is_planet_class = pc_frozen
		is_planet_class = pc_broken
		is_planet_class = pc_shattered
		NOR = {
			is_base_planet = yes
			is_planet_class = pc_molten
			is_planet_class = pc_toxic
			is_planet_class = pc_frozen
			is_planet_class = pc_broken
			is_planet_class = pc_shattered
			is_vacuum_planet = yes
		}
	}
}

is_vacuum_planet = {
	OR = {
		is_planet_class = pc_gas_giant
		is_planet_class = pc_asteroid
		is_planet_class = pc_ice_asteroid
		is_planet_class = pc_rare_crystal_asteroid
	}
}

#Planet Scope
system_has_colonizeable_planet = {
	NOT = { has_modifier = colonized_planet }
	has_exploit_technology = yes
	can_build_exploit_colony = yes
}

system_has_colonizeable_power_planet = {
	NOT = { has_modifier = colonized_planet }
	has_exploit_technology = yes
	can_build_exploit_colony = yes
	is_planet_class = pc_gas_giant
}

system_has_colonizeable_mine_planet = {
	NOT = { has_modifier = colonized_planet }
	has_exploit_technology = yes
	can_build_exploit_colony = yes
	NOT = { is_planet_class = pc_gas_giant }
}

system_has_colonizeable_alloy_planet = {
	NOT = { has_modifier = colonized_planet }
	has_exploit_technology = yes
	can_build_exploit_colony = yes
	OR = {
		is_planet_class = pc_asteroid
		is_planet_class = pc_broken
		is_planet_class = pc_shattered
	}
}

system_has_colonizeable_lava_planet = {
	NOT = { has_modifier = colonized_planet }
	has_exploit_technology = yes
	can_build_exploit_colony = yes
	is_planet_class = pc_molten
}

system_has_colonizeable_mote_planet = {
	NOT = { has_modifier = colonized_planet }
	has_exploit_technology = yes
	can_build_exploit_colony = yes
	is_planet_class = pc_molten
}

system_has_colonizeable_gas_planet = {
	NOT = { has_modifier = colonized_planet }
	has_exploit_technology = yes
	can_build_exploit_colony = yes
	OR = {
		is_planet_class = pc_gas_giant
		is_planet_class = pc_toxic
	}
}

system_has_colonizeable_crystal_planet = {
	NOT = { has_modifier = colonized_planet }
	has_exploit_technology = yes
	can_build_exploit_colony = yes
	is_planet_class = pc_rare_crystal_asteroid
}

#System Scope
system_has_exploit = {
	any_system_planet = {
		has_planet_flag = exploit_center
	}
}

#System Scope
system_has_viable_exploit_host = {
	NOT = { any_system_planet = {
		has_planet_flag = exploit_center
	} }
	any_system_planet = {
		NOT = { has_planet_flag = exploit_center }
		is_major_colony = yes
	}
}

has_perm_flag = {
	OR = {
		has_planet_flag = exploit_mine_loop
		has_planet_flag = exploit_power_loop
		has_planet_flag = exploit_alloy_mine_loop
		has_planet_flag = exploit_alloy_foundry_loop
		has_planet_flag = exploit_lava_refinery_loop
		has_planet_flag = exploit_research_loop
		has_planet_flag = exploit_motes_loop
		has_planet_flag = exploit_gases_loop
		has_planet_flag = exploit_crystals_loop
	}
}

#Country Scope
has_exploit_queue = {
	OR = {
		check_variable = { which = exploit_power_plant_queue value > 0 }
		check_variable = { which = exploit_mineral_mine_queue value > 0 }
		check_variable = { which = exploit_alloy_queue value > 0 }
		check_variable = { which = exploit_foundry_queue value > 0 }
		check_variable = { which = exploit_research_queue value > 0 }
		check_variable = { which = exploit_lava_refinery_queue value > 0 }
		check_variable = { which = exploit_motes_queue value > 0 }
		check_variable = { which = exploit_gas_well_queued value > 0 }
		check_variable = { which = exploit_crystal_mine_queued value > 0 }
	}
}

#Planet Scope
has_exploit_technology = {
	OR = {
		is_planet_class = pc_barren
		is_planet_class = pc_barren_cold
		is_planet_class = pc_molten
		is_planet_class = pc_toxic
		is_planet_class = pc_frozen
		is_planet_class = pc_asteroid
		is_planet_class = pc_ice_asteroid
		is_planet_class = pc_rare_crystal_asteroid
		AND = {
			is_planet_class = pc_gas_giant
			space_owner = { has_technology = tech_habitat_1 }
		}
	}
}

#Planet scope
can_build_exploit_colony = {
	OR = {
		AND = {
			is_base_planet = yes
			space_owner = {
				resource_stockpile_compare = {
					resource = energy
					value >= @BaseEnergyCost
				}
				resource_stockpile_compare = {
					resource = alloys
					value >= @BaseAlloyCost
				}
				resource_stockpile_compare = {
					resource = minerals
					value >= @BaseMineralCost
				}
			}
		}
		AND = {
			is_difficult_planet = yes
			space_owner = {
				resource_stockpile_compare = {
					resource = energy
					value >= @DifficultEnergyCost
				}
				resource_stockpile_compare = {
					resource = alloys
					value >= @DifficultAlloyCost
				}
				resource_stockpile_compare = {
					resource = minerals
					value >= @DifficultMineralCost
				}
			}
		}
		AND = {
			is_vacuum_planet = yes
			space_owner = {
				resource_stockpile_compare = {
					resource = energy
					value >= @VacuumEnergyCost
				}
				resource_stockpile_compare = {
					resource = alloys
					value >= @VacuumAlloyCost
				}
				resource_stockpile_compare = {
					resource = minerals
					value >= @VacuumMineralCost
				}
			}
		}
		
	}
}
can_build_exploit_mine = {
	check_variable = { which = exploitation_size value > 0 }
	count_deposits = { type = d_energy_1 count > 0 }
	OR = {
		AND = {
			is_base_planet = yes
			space_owner = {
				resource_stockpile_compare = {
					resource = energy
					value >= @BaseEnergyCost
				}
				resource_stockpile_compare = {
					resource = alloys
					value >= @BaseAlloyCost
				}
				resource_stockpile_compare = {
					resource = minerals
					value >= @BaseMineralCost
				}
			}
		}
		AND = {
			is_difficult_planet = yes
			space_owner = {
				resource_stockpile_compare = {
					resource = energy
					value >= @DifficultEnergyCost
				}
				resource_stockpile_compare = {
					resource = alloys
					value >= @DifficultAlloyCost
				}
				resource_stockpile_compare = {
					resource = minerals
					value >= @DifficultMineralCost
				}
			}
		}
		AND = {
			is_vacuum_planet = yes
			space_owner = {
				resource_stockpile_compare = {
					resource = energy
					value >= @VacuumEnergyCost
				}
				resource_stockpile_compare = {
					resource = alloys
					value >= @VacuumAlloyCost
				}
				resource_stockpile_compare = {
					resource = minerals
					value >= @VacuumMineralCost
				}
			}
		}
		
	}
}
can_build_exploit_power = {
	check_variable = { which = exploitation_size value > 0 }
	OR = {
		AND = {
			is_base_planet = yes
			space_owner = {
				resource_stockpile_compare = {
					resource = energy
					value >= @BaseEnergyCost
				}
				resource_stockpile_compare = {
					resource = alloys
					value >= @BaseAlloyCost
				}
				resource_stockpile_compare = {
					resource = minerals
					value >= @BaseMineralCost
				}
			}
		}
		AND = {
			is_difficult_planet = yes
			space_owner = {
				resource_stockpile_compare = {
					resource = energy
					value >= @DifficultEnergyCost
				}
				resource_stockpile_compare = {
					resource = alloys
					value >= @DifficultAlloyCost
				}
				resource_stockpile_compare = {
					resource = minerals
					value >= @DifficultMineralCost
				}
			}
		}
		AND = {
			is_vacuum_planet = yes
			space_owner = {
				resource_stockpile_compare = {
					resource = energy
					value >= @VacuumEnergyCost
				}
				resource_stockpile_compare = {
					resource = alloys
					value >= @VacuumAlloyCost
				}
				resource_stockpile_compare = {
					resource = minerals
					value >= @VacuumMineralCost
				}
			}
		}
	}
}
can_build_exploit_alloy_mine = {
	check_variable = { which = exploitation_size value > 0 }
	count_deposits = { type = d_energy_1 count > 0 }
	OR = {
		AND = {
			is_base_planet = yes
			space_owner = {
				resource_stockpile_compare = {
					resource = energy
					value >= @BaseEnergyCost
				}
				resource_stockpile_compare = {
					resource = alloys
					value >= @BaseAlloyCost
				}
				resource_stockpile_compare = {
					resource = minerals
					value >= @BaseMineralCost
				}
			}
		}
		AND = {
			is_difficult_planet = yes
			space_owner = {
				resource_stockpile_compare = {
					resource = energy
					value >= @DifficultEnergyCost
				}
				resource_stockpile_compare = {
					resource = alloys
					value >= @DifficultAlloyCost
				}
				resource_stockpile_compare = {
					resource = minerals
					value >= @DifficultMineralCost
				}
			}
		}
		AND = {
			is_vacuum_planet = yes
			space_owner = {
				resource_stockpile_compare = {
					resource = energy
					value >= @VacuumEnergyCost
				}
				resource_stockpile_compare = {
					resource = alloys
					value >= @VacuumAlloyCost
				}
				resource_stockpile_compare = {
					resource = minerals
					value >= @VacuumMineralCost
				}
			}
		}
	}
}
can_build_exploit_alloy_foundry = {
	check_variable = { which = exploitation_size value > 0 }
	count_deposits = { type = d_energy_1 count > 0 }
	count_deposits = { type = d_minerals_1 count > 1 }
	space_owner = {
		resource_stockpile_compare = {
			resource = volatile_motes
			value >= @BaseSRCost
		}
	}
	OR = {
		AND = {
			is_base_planet = yes
			space_owner = {
				resource_stockpile_compare = {
					resource = energy
					value >= @BaseEnergyCost
				}
				resource_stockpile_compare = {
					resource = alloys
					value >= @BaseAlloyCost
				}
				resource_stockpile_compare = {
					resource = minerals
					value >= @BaseMineralCost
				}
			}
		}
		AND = {
			is_difficult_planet = yes
			space_owner = {
				resource_stockpile_compare = {
					resource = energy
					value >= @DifficultEnergyCost
				}
				resource_stockpile_compare = {
					resource = alloys
					value >= @DifficultAlloyCost
				}
				resource_stockpile_compare = {
					resource = minerals
					value >= @DifficultMineralCost
				}
			}
		}
		AND = {
			is_vacuum_planet = yes
			space_owner = {
				resource_stockpile_compare = {
					resource = energy
					value >= @VacuumEnergyCost
				}
				resource_stockpile_compare = {
					resource = alloys
					value >= @VacuumAlloyCost
				}
				resource_stockpile_compare = {
					resource = minerals
					value >= @VacuumMineralCost
				}
			}
		}
	}
}
can_build_exploit_lava_refinery = {
	check_variable = { which = exploitation_size value > 0 }
	OR = {
		AND = {
			is_base_planet = yes
			space_owner = {
				resource_stockpile_compare = {
					resource = energy
					value >= @AdvancedBaseEnergyCost
				}
				resource_stockpile_compare = {
					resource = alloys
					value >= @AdvancedBaseAlloyCost
				}
				resource_stockpile_compare = {
					resource = minerals
					value >= @AdvancedBaseMineralCost
				}
			}
		}
		AND = {
			is_difficult_planet = yes
			space_owner = {
				resource_stockpile_compare = {
					resource = energy
					value >= @AdvancedDifficultEnergyCost
				}
				resource_stockpile_compare = {
					resource = alloys
					value >= @AdvancedDifficultAlloyCost
				}
				resource_stockpile_compare = {
					resource = minerals
					value >= @AdvancedDifficultMineralCost
				}
			}
		}
		AND = {
			is_vacuum_planet = yes
			space_owner = {
				resource_stockpile_compare = {
					resource = energy
					value >= @AdvancedVacuumEnergyCost
				}
				resource_stockpile_compare = {
					resource = alloys
					value >= @AdvancedVacuumAlloyCost
				}
				resource_stockpile_compare = {
					resource = minerals
					value >= @AdvancedVacuumMineralCost
				}
			}
		}
	}
}
can_build_exploit_research = {
	check_variable = { which = exploitation_size value > 0 }
	count_deposits = { type = d_energy_1 count > 1 }
	space_owner = {
		resource_stockpile_compare = {
			resource = exotic_gases
			value >= @BaseSRCost
		}
	}
	OR = {
		AND = {
			is_base_planet = yes
			space_owner = {
				resource_stockpile_compare = {
					resource = energy
					value >= @AdvancedBaseEnergyCost
				}
				resource_stockpile_compare = {
					resource = alloys
					value >= @AdvancedBaseAlloyCost
				}
				resource_stockpile_compare = {
					resource = minerals
					value >= @AdvancedBaseMineralCost
				}
			}
		}
		AND = {
			is_difficult_planet = yes
			space_owner = {
				resource_stockpile_compare = {
					resource = energy
					value >= @AdvancedDifficultEnergyCost
				}
				resource_stockpile_compare = {
					resource = alloys
					value >= @AdvancedDifficultAlloyCost
				}
				resource_stockpile_compare = {
					resource = minerals
					value >= @AdvancedDifficultMineralCost
				}
			}
		}
		AND = {
			is_vacuum_planet = yes
			space_owner = {
				resource_stockpile_compare = {
					resource = energy
					value >= @AdvancedVacuumEnergyCost
				}
				resource_stockpile_compare = {
					resource = alloys
					value >= @AdvancedVacuumAlloyCost
				}
				resource_stockpile_compare = {
					resource = minerals
					value >= @AdvancedVacuumMineralCost
				}
			}
		}
	}
}
can_build_exploit_motes = {
	check_variable = { which = exploitation_size value > 0 }
	count_deposits = { type = d_energy_1 count > 0 }
	OR = {
		AND = {
			is_base_planet = yes
			space_owner = {
				resource_stockpile_compare = {
					resource = energy
					value >= @BaseEnergyCost
				}
				resource_stockpile_compare = {
					resource = alloys
					value >= @BaseAlloyCost
				}
				resource_stockpile_compare = {
					resource = minerals
					value >= @BaseMineralCost
				}
			}
		}
		AND = {
			is_difficult_planet = yes
			space_owner = {
				resource_stockpile_compare = {
					resource = energy
					value >= @DifficultEnergyCost
				}
				resource_stockpile_compare = {
					resource = alloys
					value >= @DifficultAlloyCost
				}
				resource_stockpile_compare = {
					resource = minerals
					value >= @DifficultMineralCost
				}
			}
		}
		AND = {
			is_vacuum_planet = yes
			space_owner = {
				resource_stockpile_compare = {
					resource = energy
					value >= @VacuumEnergyCost
				}
				resource_stockpile_compare = {
					resource = alloys
					value >= @VacuumAlloyCost
				}
				resource_stockpile_compare = {
					resource = minerals
					value >= @VacuumMineralCost
				}
			}
		}
	}
}
can_build_exploit_gases = {
	check_variable = { which = exploitation_size value > 0 }
	count_deposits = { type = d_energy_1 count > 0 }
	OR = {
		AND = {
			is_base_planet = yes
			space_owner = {
				resource_stockpile_compare = {
					resource = energy
					value >= @BaseEnergyCost
				}
				resource_stockpile_compare = {
					resource = alloys
					value >= @BaseAlloyCost
				}
				resource_stockpile_compare = {
					resource = minerals
					value >= @BaseMineralCost
				}
			}
		}
		AND = {
			is_difficult_planet = yes
			space_owner = {
				resource_stockpile_compare = {
					resource = energy
					value >= @DifficultEnergyCost
				}
				resource_stockpile_compare = {
					resource = alloys
					value >= @DifficultAlloyCost
				}
				resource_stockpile_compare = {
					resource = minerals
					value >= @DifficultMineralCost
				}
			}
		}
		AND = {
			is_vacuum_planet = yes
			space_owner = {
				resource_stockpile_compare = {
					resource = energy
					value >= @VacuumEnergyCost
				}
				resource_stockpile_compare = {
					resource = alloys
					value >= @VacuumAlloyCost
				}
				resource_stockpile_compare = {
					resource = minerals
					value >= @VacuumMineralCost
				}
			}
		}
	}
}
can_build_exploit_crystals = {
	check_variable = { which = exploitation_size value > 0 }
	count_deposits = { type = d_energy_1 count > 0 }
	OR = {
		AND = {
			is_base_planet = yes
			space_owner = {
				resource_stockpile_compare = {
					resource = energy
					value >= @BaseEnergyCost
				}
				resource_stockpile_compare = {
					resource = alloys
					value >= @BaseAlloyCost
				}
				resource_stockpile_compare = {
					resource = minerals
					value >= @BaseMineralCost
				}
			}
		}
		AND = {
			is_difficult_planet = yes
			space_owner = {
				resource_stockpile_compare = {
					resource = energy
					value >= @DifficultEnergyCost
				}
				resource_stockpile_compare = {
					resource = alloys
					value >= @DifficultAlloyCost
				}
				resource_stockpile_compare = {
					resource = minerals
					value >= @DifficultMineralCost
				}
			}
		}
		AND = {
			is_vacuum_planet = yes
			space_owner = {
				resource_stockpile_compare = {
					resource = energy
					value >= @VacuumEnergyCost
				}
				resource_stockpile_compare = {
					resource = alloys
					value >= @VacuumAlloyCost
				}
				resource_stockpile_compare = {
					resource = minerals
					value >= @VacuumMineralCost
				}
			}
		}
	}
}