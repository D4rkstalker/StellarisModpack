#	Example:
#
#	example_trigger = {
#		is_country_type = default
#		num_communications > 0
#	}
#
#
#	In a script file:
#
#	trigger = {
#		example_trigger = yes
#	}
#

SPT_calling_for_peace = {
	is_war_leader = no
	is_at_war_with = root
	NOT = { has_country_flag = SPT_recently_received_peace_offer }
	OR = {
		off_war_exhaustion_sum > 0.50
		def_war_exhaustion_sum > 0.50
	}
	root = {
		OR = {
			is_ai = yes
			any_envoy = { has_envoy_task = { task = spy_network target = prevprev } }
		}
	}
}

# THIS = The country being peaced out.
# ROOT = The war leader.

SPT_offered_peace_is_desired = {
	switch = {
		trigger = has_country_flag
		SPT_flag_offered_white_peace = { SPT_white_peace_desired = yes }
		SPT_flag_offered_status_quo = { SPT_status_quo_desired = yes }
		SPT_flag_offered_claims = { SPT_cede_claims_desired = yes }
		SPT_flag_offered_break_treaties = { SPT_break_treaties_desired = yes }
		default = { always = no }
	}
}

SPT_white_peace_desired = {
	event_target:SPT_target = { check_variable = { which = SPT_white_peace_value value > 0 } }
}

SPT_status_quo_desired = {
	event_target:SPT_target = { check_variable = { which = SPT_status_quo_value value > 0 } }
}

SPT_cede_claims_desired = {
	event_target:SPT_target = { check_variable = { which = SPT_cede_claims_value value > 0 } }
}

SPT_break_treaties_desired = {
	event_target:SPT_target = { check_variable = { which = SPT_break_treaties_value value > 0 } }
}
