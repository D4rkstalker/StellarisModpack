
apsr_enclave_assault_completed = {
	AND = {
		has_country_flag = apsr_enclave_assault_button_01_purchase
		has_country_flag = apsr_enclave_assault_button_02_purchase
		has_country_flag = apsr_enclave_assault_button_03_purchase
		has_country_flag = apsr_enclave_assault_button_04_purchase
		has_country_flag = apsr_enclave_assault_button_05_purchase
		has_country_flag = apsr_enclave_assault_button_06_purchase
		has_country_flag = apsr_enclave_assault_button_07_purchase
		has_country_flag = apsr_enclave_assault_button_08_purchase
		has_country_flag = apsr_enclave_assault_button_09_purchase
		has_country_flag = apsr_enclave_assault_button_10_purchase
		has_country_flag = apsr_enclave_assault_button_11_purchase
		has_country_flag = apsr_enclave_assault_button_12_purchase
		has_country_flag = apsr_enclave_assault_button_13_purchase
		has_country_flag = apsr_enclave_assault_button_14_purchase
		OR = {
			has_country_flag = apsr_enclave_assault_button_15_purchase
			has_country_flag = apsr_enclave_assault_button_15ext_purchase
		}
		has_country_flag = apsr_enclave_assault_button_16_purchase
		has_country_flag = apsr_enclave_assault_button_17_purchase
		OR = {
			has_country_flag = apsr_enclave_assault_button_18_purchase
			has_country_flag = apsr_enclave_assault_button_18ext_purchase
		}
		has_country_flag = apsr_enclave_assault_button_19_purchase
		has_country_flag = apsr_enclave_assault_button_20_purchase
	}
	
}


apsr_enclave_defence_completed = {
	AND = {
		has_country_flag = apsr_enclave_defence_button_01_purchase
		has_country_flag = apsr_enclave_defence_button_02_purchase
		has_country_flag = apsr_enclave_defence_button_03_purchase
		has_country_flag = apsr_enclave_defence_button_04_purchase
		has_country_flag = apsr_enclave_defence_button_05_purchase
		has_country_flag = apsr_enclave_defence_button_06_purchase
		has_country_flag = apsr_enclave_defence_button_07_purchase
		has_country_flag = apsr_enclave_defence_button_08_purchase
		has_country_flag = apsr_enclave_defence_button_09_purchase
		has_country_flag = apsr_enclave_defence_button_10_purchase
		has_country_flag = apsr_enclave_defence_button_11_purchase
		has_country_flag = apsr_enclave_defence_button_12_purchase
		has_country_flag = apsr_enclave_defence_button_13_purchase
		has_country_flag = apsr_enclave_defence_button_14_purchase
		has_country_flag = apsr_enclave_defence_button_15_purchase
		has_country_flag = apsr_enclave_defence_button_16_purchase
		has_country_flag = apsr_enclave_defence_button_17_purchase
		has_country_flag = apsr_enclave_defence_button_18_purchase
		has_country_flag = apsr_enclave_defence_button_19_purchase
		has_country_flag = apsr_enclave_defence_button_20_purchase
	}
}


apsr_enclave_economy_completed = {
	AND = {
		has_country_flag = apsr_enclave_economy_button_01_purchase
		has_country_flag = apsr_enclave_economy_button_02_purchase
		OR = {
			has_country_flag = apsr_enclave_economy_button_03dg_purchase
			has_country_flag = apsr_enclave_economy_button_03m_purchase
			has_country_flag = apsr_enclave_economy_button_03l_purchase
		}
		has_country_flag = apsr_enclave_economy_button_04_purchase
		has_country_flag = apsr_enclave_economy_button_05_purchase
		has_country_flag = apsr_enclave_economy_button_06_purchase
		has_country_flag = apsr_enclave_economy_button_07_purchase
		OR = {
			has_country_flag = apsr_enclave_economy_button_08dg_purchase
			has_country_flag = apsr_enclave_economy_button_08m_purchase
			has_country_flag = apsr_enclave_economy_button_08l_purchase
		}
		has_country_flag = apsr_enclave_economy_button_09_purchase
		OR = {
			has_country_flag = apsr_enclave_economy_button_10d_purchase
			has_country_flag = apsr_enclave_economy_button_10gm_purchase
		}
		OR = {
			has_country_flag = apsr_enclave_economy_button_11d_purchase
			has_country_flag = apsr_enclave_economy_button_11gm_purchase
		}
		OR = {
			has_country_flag = apsr_enclave_economy_button_12d_purchase
			has_country_flag = apsr_enclave_economy_button_12gm_purchase
		}
		has_country_flag = apsr_enclave_economy_button_13_purchase
		has_country_flag = apsr_enclave_economy_button_14_purchase
		has_country_flag = apsr_enclave_economy_button_15_purchase
		has_country_flag = apsr_enclave_economy_button_16_purchase
		has_country_flag = apsr_enclave_economy_button_17_purchase
		OR = {
			has_country_flag = apsr_enclave_economy_button_18_purchase
			has_country_flag = apsr_enclave_economy_button_18ext_purchase
		}
		has_country_flag = apsr_enclave_economy_button_19_purchase
		has_country_flag = apsr_enclave_economy_button_20_purchase
	}
}


apsr_enclave_science_completed = {
	AND = {
		has_country_flag = apsr_enclave_science_button_01_purchase
		has_country_flag = apsr_enclave_science_button_02_purchase
		has_country_flag = apsr_enclave_science_button_03_purchase
		has_country_flag = apsr_enclave_science_button_04_purchase
		has_country_flag = apsr_enclave_science_button_05_purchase
		has_country_flag = apsr_enclave_science_button_06_purchase
		has_country_flag = apsr_enclave_science_button_07_purchase
		has_country_flag = apsr_enclave_science_button_08_purchase
		has_country_flag = apsr_enclave_science_button_09_purchase
		has_country_flag = apsr_enclave_science_button_10_purchase
		OR = {
			has_country_flag = apsr_enclave_science_button_11dg_purchase
			has_country_flag = apsr_enclave_science_button_11m_purchase
		}
		has_country_flag = apsr_enclave_science_button_12_purchase
		has_country_flag = apsr_enclave_science_button_13_purchase
		has_country_flag = apsr_enclave_science_button_14_purchase
		has_country_flag = apsr_enclave_science_button_15_purchase
		has_country_flag = apsr_enclave_science_button_16_purchase
		has_country_flag = apsr_enclave_science_button_17_purchase
		OR = {
			has_country_flag = apsr_enclave_science_button_18_purchase
			has_country_flag = apsr_enclave_science_button_18ext_purchase
		}
		has_country_flag = apsr_enclave_science_button_19_purchase
		has_country_flag = apsr_enclave_science_button_20_purchase
	}
}

# Условие постройки Колоссов за ДЗ (запрет строить)
apsr_is_enclave_ancients = {
	has_country_flag = apsr_is_enclave_ancients
}

# Условия выстрелов Колоссов
can_destroy_planet_with_PLANET_KILLER_APSR_DARK_ANGEL = {  # Dark Angel
	custom_tooltip = {
		text = apsr_dark_angel_only_for_standart_hostile_planets
		AND = {
			OR = {
				is_planet_class = pc_desert
				is_planet_class = pc_tropical
				is_planet_class = pc_arid
				is_planet_class = pc_continental
				is_planet_class = pc_ocean
				is_planet_class = pc_tundra
				is_planet_class = pc_arctic
				is_planet_class = pc_alpine
				is_planet_class = pc_savannah
				is_planet_class = pc_gaia
				is_planet_class = pc_nuked
				is_planet_class = pc_barren
				is_planet_class = pc_barren_cold
				is_planet_class = pc_frozen
				is_planet_class = pc_molten
				is_planet_class = pc_toxic
				is_planet_class = pc_hive
				is_planet_class = pc_machine
				is_planet_class = pc_relic
				is_planet_class = pc_ai
			}
			OR = {
				AND = {
					exists = space_owner
					space_owner = {
						OR = {
							is_at_war_with = from.owner
							is_country_type = swarm
							is_country_type = extradimensional
							is_country_type = extradimensional_2
							is_country_type = extradimensional_3
							is_country_type = ai_empire
						}
					}
				}
				AND = { # colony
					exists = owner
					owner = {
						OR = {
							is_at_war_with = from.owner
							is_country_type = swarm
							is_country_type = extradimensional
							is_country_type = extradimensional_2
							is_country_type = extradimensional_3
							is_country_type = ai_empire
						}
					}
				}
				AND = { # primitive
					exists = space_owner
					exists = owner
					owner = {
						is_primitive = yes
					}
					space_owner = {
						OR = {
							is_same_value = from.owner
							is_at_war_with = from.owner
							is_country_type = swarm
							is_country_type = extradimensional
							is_country_type = extradimensional_2
							is_country_type = extradimensional_3
							is_country_type = ai_empire
						}
					}
				}
			}
		}
	}
	custom_tooltip = {
		fail_text = apsr_dark_angel_planet_lives_matter
		NOR = {
			is_planet_class = pc_city
			is_planet_class = pc_apsr_ancient
			is_planet_class = pc_apsr_unique
		}
	}
	custom_tooltip = {
		fail_text = apsr_dark_angel_dark_planet
		NOT = {
			is_planet_class = pc_apsr_dark
		}
	}
}

can_destroy_planet_with_PLANET_KILLER_APSR_PROJECTOR = { # Projector
	custom_tooltip = {
		text = apsr_projector_only_for_own_habitat_planet
		exists = owner
		owner = {
			OR = {
				is_same_value = from.owner
				AND = {
					is_subject = yes
					overlord = { is_same_value = from.owner  }
				}
			}
		}
		OR = {
			is_colony = yes
			is_capital = yes
		}
	}
}	

can_destroy_planet_with_PLANET_KILLER_APSR_INATOR = { # Inator
	custom_tooltip = {
		text = apsr_inator_only_for_unhabitat_planet
		NOT = { exists = owner }
		OR = {
			NOT = { exists = space_owner }
			AND = {
				exists = space_owner
				space_owner = { 
					OR = {
						is_same_value = from.owner 
						AND = {
							is_subject = yes
							overlord = { is_same_value = from.owner  }
						}
					}
				}
			}
		}
		OR = {
			is_planet_class = pc_barren
			is_planet_class = pc_barren_cold
			is_planet_class = pc_frozen
			is_planet_class = pc_molten
			is_planet_class = pc_toxic
		}
	}
	custom_tooltip = {
		fail_text = apsr_inator_planet_lives_matter
		NOR = {
			has_apsr_modifiers = yes
			has_modifier = terraforming_candidate
			has_modifier = frozen_terraforming_candidate
			has_modifier = toxic_terraforming_candidate
			has_modifier = apsr_terraforming_candidate
			has_modifier = apsr_restoration_candidate
			has_modifier = apsr_unshielded_candidate
			has_modifier = apsr_uninfected_candidate
		}
	}
}	

can_destroy_planet_with_PLANET_KILLER_APSR_PROCESSOR = { # Processor
	custom_tooltip = {
		text = apsr_processor_only_for_own_habitat_planet
		exists = owner
		owner = {
			OR = {
				is_same_value = from.owner
				AND = {
					is_subject = yes
					overlord = { is_same_value = from.owner  }
				}
			}
		}
		OR = {
			is_colony = yes
			is_capital = yes
		}
	}
}

