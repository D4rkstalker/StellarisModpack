
ag_ancient_runis_archaeological_exploration = {
	owned_planets_only = yes
	icon = decision_archaeological_dig
	sound = event_administrative_work
	enactment_time = 720

	resources = {
		category = decisions
		cost = {
			energy = 1000
			consumer_goods = 500
			influence = 80
		}
	}

	potential = { OR = {
		has_deposit = ag_ancient_ruins
		has_deposit = ag_ancient_ruins_alt
		has_deposit = ag_ancient_ruins_alt2
	} }

	effect = {
		custom_tooltip = ag_ancient_runis_archaeological_exploration_effect
		hidden_effect = {
			if = { limit = { has_deposit = ag_ancient_ruins } remove_deposit = ag_ancient_ruins }
			else = {
				if = { limit = { has_deposit = ag_ancient_ruins_alt } remove_deposit = ag_ancient_ruins_alt }
				else = { if = { limit = { has_deposit = ag_ancient_ruins_alt2 } remove_deposit = ag_ancient_ruins_alt2 } }
			}
			planet_event = { id = ag_ancient.61 }
		}
	}

	ai_weight = { weight = 100 }
}
# ag_ancient_runis_archaeological_exploration_alt = {
	# owned_planets_only = yes
	# icon = decision_archaeological_dig
	# sound = event_administrative_work
	# enactment_time = 720

	# resources = {
		# category = decisions
		# cost = {
			# energy = 1000
			# consumer_goods = 500
			# influence = 80
		# }
	# }

	# potential = { has_deposit = ag_ancient_ruins_alt }

	# effect = {
		# custom_tooltip = ag_ancient_runis_archaeological_exploration_effect
		# hidden_effect = {
			# remove_deposit = ag_ancient_ruins_alt
			# planet_event = { id = ag_ancient.61 }
		# }
	# }

	# ai_weight = { weight = 100 }
# }

ag_enable_construction_section = {
	sound = event_activating_unknown_technology
	resources = {
		category = decisions
		cost = { energy = 500 }
	}
	potential = {
		exists = solar_system.space_owner
		solar_system.space_owner = { is_same_value = from }
		solar_system.star = {
			NOT = { has_planet_flag = ag_ancient_construction_section_actived_star }
			is_variable_set = ag_construction_section_counter
			check_variable = { which = ag_construction_section_counter value > 0 }
		}
	}
	# allow = {
	# 	custom_tooltip = {
	# 		fail_text = ag_ancient_construction_section_using_system
	# 		NOT = { has_planet_flag = ag_using_ancient_construction_section_system }
	# 	}
	# }
	effect = {
		custom_tooltip = ag_enable_construction_section_effect
		hidden_effect = {
			solar_system = { ag_spawn_ancient_construction_section = yes }
		}
	}
	ai_weight = { weight = 100 }
}
ag_disable_construction_section = {
	sound = event_activating_unknown_technology
	resources = {
		category = decisions
		cost = { energy = 500 }
	}
	potential = {
		exists = solar_system.space_owner
		solar_system.space_owner = { is_same_value = from }
		solar_system.star = { has_planet_flag = ag_ancient_construction_section_actived_star }
	}
	effect = {
		custom_tooltip = ag_disable_construction_section_effect
		hidden_effect = { solar_system = { ag_despawn_ancient_construction_section = yes } }
	}
	ai_weight = { weight = 0 }
}

ag_dimensional_obelisk_settings = {
	owned_planets_only = yes
	sound = event_default
	resources = {
		category = decisions
		cost = { energy = 100 sr_dark_matter = 10 influence = 10 }
	}
	potential = {
		has_active_building = ag_dimensional_obelisk
		NOT = { has_planet_flag = ag_dimensional_obelisk_settings_flag }
		owner = { NOT = { has_country_flag = ag_dimensional_obelisk_settings_opened } }
	}
	effect = {
		custom_tooltip = ag_dimensional_obelisk_settings_effect
		hidden_effect = {
			planet_event = { id = ag_side.159 }
			set_planet_flag = ag_dimensional_obelisk_settings_flag
			owner = { set_country_flag = ag_dimensional_obelisk_settings_opened }
		}
	}
	ai_weight = { weight = 0 }
}

ag_advanced_resource_arcology_project = {
	owned_planets_only = yes
	icon = decision_arcology_project

	enactment_time = 360
	resources = {
		category = decisions
		cost = {
			energy = 10000
			unity = 5000
			influence = 100
		}
	}

	potential = {
		is_planet_class = pc_city
		exists = owner
		owner = { has_technology = "tech_ag_advanced_resource_arcology_project" }
	}

	effect = {
		custom_tooltip = "ag_advanced_resource_arcology_project_effect"
		hidden_effect = {
			change_pc = pc_ag_city
			set_planet_entity = { entity = "city_planet_entity" graphical_culture = owner }
			planet_event = { id = ag_ancient.1010 }
			while = { limit = { has_district = district_arcology_housing } remove_district = district_arcology_housing add_district = district_ag_ancient_city_housing }
			while = { limit = { has_district = district_arcology_leisure } remove_district = district_arcology_leisure add_district = district_ag_ancient_city_housing }
			while = { limit = { has_district = district_arcology_organic_housing } remove_district = district_arcology_organic_housing add_district = district_ag_ancient_city_housing }
			while = { limit = { has_district = district_arcology_administrative } remove_district = district_arcology_administrative add_district = district_ag_ancient_city_housing }
			while = { limit = { has_district = district_arcology_religious } remove_district = district_arcology_religious add_district = district_ag_ancient_city_housing }
			while = { limit = { has_district = district_arcology_arms_industry } remove_district = district_arcology_arms_industry add_district = district_ag_ancient_city_industry }
			while = { limit = { has_district = district_arcology_civilian_industry } remove_district = district_arcology_civilian_industry add_district = district_ag_ancient_city_industry }
		}
	}

	ai_weight = { weight = 0 }
}
ag_advanced_resource_arcology_project_cancel = {
	owned_planets_only = yes
	icon = decision_arcology_project

	enactment_time = 360
	resources = {
		category = decisions
		cost = {
			energy = 10000
			unity = 5000
			influence = 100
		}
	}

	potential = { is_planet_class = pc_ag_city }

	effect = {
		custom_tooltip = "ag_advanced_resource_arcology_project_cancel_effect"
		hidden_effect = {
			change_pc = pc_city
			set_planet_entity = { entity = "city_planet_entity" graphical_culture = owner }
			planet_event = { id = ag_ancient.1011 }
			while = { limit = { has_district = district_ag_ancient_city_housing } remove_district = district_arcology_housing add_district = district_arcology_housing }
			while = {
				limit = { has_district = district_ag_ancient_city_industry }
				remove_district = district_ag_ancient_city_industry
				random_list = {
					50 = { add_district = district_arcology_arms_industry }
					50 = { add_district = district_arcology_civilian_industry }
				}
				reroll_random = yes
			}
			while = {
				limit = { has_district = district_ag_ancient_city_living_metal }
				remove_district = district_ag_ancient_city_living_metal
				random_list = {
					50 = { add_district = district_arcology_arms_industry }
					50 = { add_district = district_arcology_civilian_industry }
				}
				reroll_random = yes
			}
			while = {
				limit = { has_district = district_ag_ancient_city_nanites }
				remove_district = district_ag_ancient_city_nanites
				random_list = {
					50 = { add_district = district_arcology_arms_industry }
					50 = { add_district = district_arcology_civilian_industry }
				}
				reroll_random = yes
			}
			while = {
				limit = { has_district = district_ag_ancient_city_dark_matter }
				remove_district = district_ag_ancient_city_dark_matter
				random_list = {
					50 = { add_district = district_arcology_arms_industry }
					50 = { add_district = district_arcology_civilian_industry }
				}
				reroll_random = yes
			}
		}
	}

	ai_weight = { weight = 0 }
}

ag_auto_starbase_build_starbase = {
	owned_planets_only = no
	icon = ag_auto_starbase_construction
	sound = event_administrative_work

	resources = {
		category = decisions
		cost = { alloys = 3500 trigger = { solar_system.starbase = { has_starbase_size < starbase_citadel owner = { check_variable = { which = ag_auto_starbase_default_lvl_starbase value >= 4 } } } } }
		cost = { alloys = 1250 trigger = { solar_system.starbase = { has_starbase_size < starbase_starfortress owner = { check_variable = { which = ag_auto_starbase_default_lvl_starbase value >= 3 } } } } }
		cost = { alloys = 500 trigger = { solar_system.starbase = { has_starbase_size < starbase_starhold owner = { check_variable = { which = ag_auto_starbase_default_lvl_starbase value >= 2 } } } } }
		cost = { alloys = 200 trigger = { solar_system.starbase = { has_starbase_size < starbase_starport owner = { check_variable = { which = ag_auto_starbase_default_lvl_starbase value >= 1 } } } } }
	}

	potential = {
		is_primary_star = yes
		NOT = { has_planet_flag = ag_auto_starbase_build_starbase_on_going }
		solar_system = {
			exists = starbase
			starbase = {
				exists = owner
				exists = controller
				owner = { is_ai = no is_same_value = prev.controller is_variable_set = ag_auto_starbase_default_lvl_starbase }
			}
		}
	}
	prerequisites = { "tech_ag_auto_starbase" }

	effect = {
		if = {
			limit = { OR = {
				solar_system.starbase = { has_starbase_size = starbase_citadel owner = { check_variable = { which = ag_auto_starbase_default_lvl_starbase value = 4 } } }
				solar_system.starbase = { has_starbase_size = starbase_starfortress owner = { check_variable = { which = ag_auto_starbase_default_lvl_starbase value = 3 } } }
				solar_system.starbase = { has_starbase_size = starbase_starhold owner = { check_variable = { which = ag_auto_starbase_default_lvl_starbase value = 2 } } }
				solar_system.starbase = { has_starbase_size = starbase_starport owner = { check_variable = { which = ag_auto_starbase_default_lvl_starbase value = 1 } } }
				solar_system.starbase = { has_starbase_size = starbase_outpost owner = { check_variable = { which = ag_auto_starbase_default_lvl_starbase value = 0 } } }
			} }
			custom_tooltip = ag_auto_starbase_build_starbase_no_effect
		}
		else = {
			custom_tooltip = ag_auto_starbase_build_starbase_effect
			hidden_effect = {
				solar_system.starbase = {
					if = {
						limit = { has_starbase_size = starbase_outpost }
						if = {
							limit = { owner = { check_variable = { which = ag_auto_starbase_default_lvl_starbase value = 4 } } }
							starbase_event = { id = ag_ancient.152 days = 3600 }
							root = { set_timed_planet_flag = { flag = ag_auto_starbase_build_starbase_on_going days = 3600 } }
						}
						else_if = {
							limit = { owner = { check_variable = { which = ag_auto_starbase_default_lvl_starbase value = 3 } } }
							starbase_event = { id = ag_ancient.152 days = 2160 }
							root = { set_timed_planet_flag = { flag = ag_auto_starbase_build_starbase_on_going days = 2160 } }
						}
						else_if = {
							limit = { owner = { check_variable = { which = ag_auto_starbase_default_lvl_starbase value = 2 } } }
							starbase_event = { id = ag_ancient.152 days = 1080 }
							root = { set_timed_planet_flag = { flag = ag_auto_starbase_build_starbase_on_going days = 1080 } }
						}
						else_if = {
							limit = { owner = { check_variable = { which = ag_auto_starbase_default_lvl_starbase value = 1 } } }
							starbase_event = { id = ag_ancient.152 days = 360 }
							root = { set_timed_planet_flag = { flag = ag_auto_starbase_build_starbase_on_going days = 360 } }
						}
						else_if = {
							limit = { always = yes }
							starbase_event = { id = ag_ancient.152 days = 2 }
							root = { set_timed_planet_flag = { flag = ag_auto_starbase_build_starbase_on_going days = 2 } }
						}
					}
					else_if = {
						limit = { has_starbase_size = starbase_starport }
						if = {
							limit = { owner = { check_variable = { which = ag_auto_starbase_default_lvl_starbase value = 4 } } }
							starbase_event = { id = ag_ancient.152 days = 3240 }
							root = { set_timed_planet_flag = { flag = ag_auto_starbase_build_starbase_on_going days = 3240 } }
						}
						else_if = {
							limit = { owner = { check_variable = { which = ag_auto_starbase_default_lvl_starbase value = 3 } } }
							starbase_event = { id = ag_ancient.152 days = 1800 }
							root = { set_timed_planet_flag = { flag = ag_auto_starbase_build_starbase_on_going days = 1800 } }
						}
						else_if = {
							limit = { owner = { check_variable = { which = ag_auto_starbase_default_lvl_starbase value = 2 } } }
							starbase_event = { id = ag_ancient.152 days = 720 }
							root = { set_timed_planet_flag = { flag = ag_auto_starbase_build_starbase_on_going days = 720 } }
						}
						else_if = {
							limit = { always = yes }
							starbase_event = { id = ag_ancient.152 days = 2 }
							root = { set_timed_planet_flag = { flag = ag_auto_starbase_build_starbase_on_going days = 2 } }
						}
					}
					else_if = {
						limit = { has_starbase_size = starbase_starhold }
						if = {
							limit = { owner = { check_variable = { which = ag_auto_starbase_default_lvl_starbase value = 4 } } }
							starbase_event = { id = ag_ancient.152 days = 2520 }
							root = { set_timed_planet_flag = { flag = ag_auto_starbase_build_starbase_on_going days = 2520 } }
						}
						else_if = {
							limit = { owner = { check_variable = { which = ag_auto_starbase_default_lvl_starbase value = 3 } } }
							starbase_event = { id = ag_ancient.152 days = 1080 }
							root = { set_timed_planet_flag = { flag = ag_auto_starbase_build_starbase_on_going days = 1080 } }
						}
						else_if = {
							limit = { always = yes }
							starbase_event = { id = ag_ancient.152 days = 2 }
							root = { set_timed_planet_flag = { flag = ag_auto_starbase_build_starbase_on_going days = 2 } }
						}
					}
					else_if = {
						limit = { has_starbase_size = starbase_starfortress }
						if = {
							limit = { owner = { check_variable = { which = ag_auto_starbase_default_lvl_starbase value = 4 } } }
							starbase_event = { id = ag_ancient.152 days = 1440 }
							root = { set_timed_planet_flag = { flag = ag_auto_starbase_build_starbase_on_going days = 1440 } }
						}
						else = { starbase_event = { id = ag_ancient.152 days = 2 } root = { set_timed_planet_flag = { flag = ag_auto_starbase_build_starbase_on_going days = 2 } } }
					}
					else_if = {
						limit = { has_starbase_size = starbase_citadel }
						starbase_event = { id = ag_ancient.152 days = 2 } root = { set_timed_planet_flag = { flag = ag_auto_starbase_build_starbase_on_going days = 2 } }
					}
				}
			}
		}
	}

	ai_weight = { weight = 0 }
}

ag_auto_starbase_build_orbital_ring = {
	owned_planets_only = yes
	icon = ag_auto_starbase_construction
	sound = event_administrative_work

	resources = {
		category = decisions
		cost = {
			alloys = 2000 influence = 150
			trigger = {
				owner = { check_variable = { which = ag_auto_starbase_default_lvl_orbital_ring value >= 2 } }
				OR = {
					NAND = { exists = orbital_defence orbital_defence = { exists = starbase } }
					AND = { exists = orbital_defence orbital_defence = { exists = starbase } orbital_defence.starbase = { has_starbase_size < orbital_ring_tier_3 } }
				}
			}
		}
		cost = {
			alloys = 1500 influence = 100
			trigger = {
				owner = { check_variable = { which = ag_auto_starbase_default_lvl_orbital_ring value >= 1 } }
				OR = {
					NAND = { exists = orbital_defence orbital_defence = { exists = starbase } }
					AND = { exists = orbital_defence orbital_defence = { exists = starbase } orbital_defence.starbase = { has_starbase_size < orbital_ring_tier_2 } }
				}
			}
		}
		cost = {
			alloys = 1000 influence = 50
			trigger = { NAND = { exists = orbital_defence orbital_defence = { exists = starbase } } }
		}
	}

	potential = {
		NOR = {
			has_planet_flag = megastructure
			has_planet_flag = ag_auto_starbase_build_orbital_ring_on_going
			solar_system = { has_star_flag = ring_world_built }
		}
		is_artificial = no
		owner = { is_ai = no }
		OR = {
			NOT = { has_planet_flag = has_megastructure }
			has_planet_flag = ruined_orbital_ring_planet
			AND = { exists = orbital_defence orbital_defence = { exists = starbase } exists = owner exists = controller owner = { is_same_value = prev.controller } }
		}
	}
	prerequisites = { "tech_ag_auto_starbase" }

	effect = {
		if = {
			limit = { OR = {
				AND = { exists = orbital_defence orbital_defence = { exists = starbase } orbital_defence.starbase = { has_starbase_size = orbital_ring_tier_3 } owner = { check_variable = { which = ag_auto_starbase_default_lvl_orbital_ring value = 2 } } }
				AND = { exists = orbital_defence orbital_defence = { exists = starbase } orbital_defence.starbase = { has_starbase_size = orbital_ring_tier_2 } owner = { check_variable = { which = ag_auto_starbase_default_lvl_orbital_ring value = 1 } } }
				AND = { exists = orbital_defence orbital_defence = { exists = starbase } orbital_defence.starbase = { has_starbase_size = orbital_ring_tier_1 } owner = { check_variable = { which = ag_auto_starbase_default_lvl_orbital_ring value = 0 } } }
			} }
			custom_tooltip = ag_auto_starbase_build_orbital_ring_no_effect
		}
		else = {
			custom_tooltip = ag_auto_starbase_build_orbital_ring_effect
			hidden_effect = {
				if = {
					limit = { NAND = { exists = orbital_defence orbital_defence = { exists = starbase } } }
					if = {
						limit = { owner = { check_variable = { which = ag_auto_starbase_default_lvl_orbital_ring value = 2 } } }
						planet_event = { id = ag_ancient.153 days = 2700 }
						set_timed_planet_flag = { flag = ag_auto_starbase_build_orbital_ring_on_going days = 2700 }
					}
					else_if = {
						limit = { owner = { check_variable = { which = ag_auto_starbase_default_lvl_orbital_ring value = 1 } } }
						planet_event = { id = ag_ancient.153 days = 1620 }
						set_timed_planet_flag = { flag = ag_auto_starbase_build_orbital_ring_on_going days = 1620 }
					}
					else_if = {
						limit = { owner = { check_variable = { which = ag_auto_starbase_default_lvl_orbital_ring value = 0 } } }
						planet_event = { id = ag_ancient.153 days = 720 }
						set_timed_planet_flag = { flag = ag_auto_starbase_build_orbital_ring_on_going days = 720 }
					}
				}
				else = {
					orbital_defence.starbase = {
						if = {
							limit = { has_starbase_size = orbital_ring_tier_1 }
							if = {
								limit = { owner = { check_variable = { which = ag_auto_starbase_default_lvl_orbital_ring value = 2 } } }
								root = { planet_event = { id = ag_ancient.153 days = 1980 } set_timed_planet_flag = { flag = ag_auto_starbase_build_orbital_ring_on_going days = 1980 } }
							}
							else_if = {
								limit = { owner = { check_variable = { which = ag_auto_starbase_default_lvl_orbital_ring value = 1 } } }
								root = { planet_event = { id = ag_ancient.153 days = 900 } set_timed_planet_flag = { flag = ag_auto_starbase_build_orbital_ring_on_going days = 900 } }
							}
							else_if = {
								limit = { always = yes }
								root = { planet_event = { id = ag_ancient.153 days = 2 } set_timed_planet_flag = { flag = ag_auto_starbase_build_orbital_ring_on_going days = 2 } }
							}
						}
						else_if = {
							limit = { has_starbase_size = orbital_ring_tier_2 }
							if = {
								limit = { owner = { check_variable = { which = ag_auto_starbase_default_lvl_orbital_ring value = 2 } } }
								root = { planet_event = { id = ag_ancient.153 days = 1080 } set_timed_planet_flag = { flag = ag_auto_starbase_build_orbital_ring_on_going days = 1080 } }
							}
							else = { root = { planet_event = { id = ag_ancient.153 days = 2 } set_timed_planet_flag = { flag = ag_auto_starbase_build_orbital_ring_on_going days = 2 } } }
						}
						else_if = {
							limit = { has_starbase_size = orbital_ring_tier_3 }
							root = { planet_event = { id = ag_ancient.153 days = 2 } set_timed_planet_flag = { flag = ag_auto_starbase_build_orbital_ring_on_going days = 2 } }
						}
					}
				}
			}
		}
	}

	ai_weight = { weight = 0 }
}
