decision_sacrifice = {
    owned_planets_only = yes

    icon = decision_surreal_visions

    resources = {
        category = decisions
        cost = {
            influence = 25
            energy = 500
        }
    }

    enactment_time = 60

    potential = {
        habitable_planet = yes #No sacrificing habitats for indefinite survival
        
        owner = {
            has_origin = origin_end_covenant
            has_modifier = covenant_end_of_the_cycle
        }
        
    }
    effect = {
        custom_tooltip = "decision_sacrifice_effects"
            hidden_effect = {
                from = {
                    if = {
                        limit = {
                            NOT = {
                                has_event_chain = "cycle_sacrifices_chain"
                            }
                        }
                        begin_event_chain = {
                            event_chain = "cycle_sacrifices_chain"
                            target = this
                        }
                        while = {
                            count = sacrifices
                            add_event_chain_counter = {
                                event_chain = "cycle_sacrifices_chain"
                                counter = sacrifices_made
                                amount = 1
                            }
                        }
                    }
                    change_variable = {
                        which = sacrifices
                        value = 1
                    }
                    change_variable = {#Willing sacrifices are more valuable
                        which = end_power
                        value = 50
                    }
                    add_event_chain_counter = {
                        event_chain = "cycle_sacrifices_chain"
                        counter = sacrifices_made
                        amount = 1
                    }
                }
                every_owned_pop = {
                    prev.from = {
                        change_variable = {
                            which = end_power
                            value = 3
                        }
                    }
                    kill_pop = yes
                }
                change_pc = pc_shrouded
			    clear_planet_modifiers = yes
			    clear_deposits = yes
                every_country = {
                    limit = {
                        NOR = {
                            is_same_value =from.owner
                            AND = {
							    has_federation = yes
							    is_in_federation_with = from.owner
						    }
                        }
                        has_communications = from.owner
                        OR = {
                            is_country_type = default
                            has_ai_personality = awakened_fallen_empire_xenophile
                        }
                    }
                    add_opinion_modifier = {
                        modifier = opinion_sacrificed_a_world
                        who = from.owner
                    }
                }
            }
        }
}