
decision_htbd_egg_inprogress = {
	sound = event_laboratory_sound
	icon = decision_htbd_egg_seed

	prerequisites = { }

	potential = {
		exists = from
		from = {
			is_ai = no
			has_country_flag = htbd_dragonborn_done
		}
		exists = space_owner
		space_owner = { is_same_value = from }
		is_colony = no
		OR = {
			is_planet_class = pc_molten
			is_planet_class = pc_shattered
		}
		has_planet_flag = htbd_egg_decision

	}

	allow = {
		custom_tooltip = {
			NOT = { has_planet_flag = htbd_egg_decision }
			fail_text = htbd_incubation_inprogress
		}
	}

	effect = {
	}

	on_queued = {
	}

	on_unqueued = {
	}

	abort_trigger = {
		NOT = { has_planet_flag = htbd_egg_decision }
	}

	abort_effect = {
	}

	ai_weight = {
		weight = 0
	}
}

decision_htbd_egg_seed = {
	sound = event_laboratory_sound
	icon = decision_htbd_egg_seed

	resources = {
		category = decisions
		cost = {
			food = 1000
			alloys = 1000
			energy = 3000
		}
	}

	enactment_time = 180

	prerequisites = { "tech_society_2" "tech_mining_2" }

	potential = {
		exists = from
		from = {
			has_country_flag = htbd_dragonborn_done
			is_variable_set = htbd_num_eggs
		}
		exists = space_owner
		space_owner = { is_same_value = from }
		is_colony = no
		OR = {
			is_planet_class = pc_molten
			is_planet_class = pc_shattered
		}
		NOT = { has_planet_flag = egg_incubated	}
		NOT = { has_planet_flag = htbd_egg_decision }
	}

	allow = {
		custom_tooltip = {
			NOT = { has_planet_flag = htbd_egg_decision }
			fail_text = htbd_incubation_inprogress
		}
		custom_tooltip = {
			from = {
				check_variable = {
					which = htbd_num_eggs
					value > 0
				}
			}
			fail_text = htbd_no_more_eggs
		}
	}

	effect = {
		custom_tooltip = decision_htbd_egg_seed_effects
		hidden_effect = {
			from = { save_event_target_as = decision_owner }
			htbd_decision_effect = yes
		}
	}

	on_queued = {
		if = {
			limit = { htbd_debug_egg = yes }
			log = "[From.GetName] start incubation of dragon on [This.GetName]"
		}
		set_planet_flag = htbd_egg_decision
		from = {
			subtract_variable = { which = htbd_num_eggs value = 1 }
		}
	}

	on_unqueued = {
		htbd_egg_decision_done = yes
	}

	abort_trigger = {
		# somehow planet class was changed
		NOR = {
			is_planet_class = pc_molten
			is_planet_class = pc_shattered
		}
	}

	abort_effect = {
		htbd_egg_decision_done = yes
		from = { country_event = { id = htbd_ev.94 } }
	}

	ai_weight = {
		weight = 100
	}
}

decision_htbd_psion_seed = {
	sound = event_laboratory_sound
	icon = decision_htbd_psion_seed

	resources = {
		category = decisions
		cost = {
			food = 1500
			alloys = 1200
			energy = 4000
			sr_zro = 15
		}
	}

	enactment_time = 240

	prerequisites = { "tech_htbd_psion" }

	potential = {
		exists = from
		from = {
			has_country_flag = htbd_dragonborn_done
			is_variable_set = htbd_num_eggs
		}
		exists = space_owner
		space_owner = { is_same_value = from }
		is_colony = no
		OR = {
			is_planet_class = pc_molten
			is_planet_class = pc_shattered
		}
		NOT = { has_planet_flag = egg_incubated	}
		NOT = { has_planet_flag = htbd_egg_decision }
	}

	allow = {
		custom_tooltip = {
			NOT = { has_planet_flag = htbd_egg_decision }
			fail_text = htbd_incubation_inprogress
		}
		custom_tooltip = {
			from = {
				check_variable = {
					which = htbd_num_eggs
					value > 0
				}
			}
			fail_text = htbd_no_more_eggs
		}
	}

	effect = {
		custom_tooltip = decision_htbd_xegg_seed_effects
		hidden_effect = {
			from = { save_event_target_as = decision_owner }
			htbd_decision_effect = yes
		}
	}

	on_queued = {
		if = {
			limit = { htbd_debug_egg = yes }
			log = "[From.GetName] start incubation of psi dragon on [This.GetName]"
		}
		set_planet_flag = htbd_egg_decision
		set_planet_flag = htbd_psion_egg
		from = {
			subtract_variable = { which = htbd_num_eggs value = 1 }
		}
	}

	on_unqueued = {
		htbd_egg_decision_done = yes
	}

	abort_trigger = {
		# somehow planet class was changed
		NOR = {
			is_planet_class = pc_molten
			is_planet_class = pc_shattered
		}
	}

	abort_effect = {
		htbd_egg_decision_done = yes
		from = { country_event = { id = htbd_ev.94 } }
	}

	ai_weight = {
		weight = 100
	}
}

decision_htbd_dolly_seed = {
	sound = event_laboratory_sound
	icon = decision_htbd_dolly_seed

	resources = {
		category = decisions
		cost = {
			food = 2000
			alloys = 1500
			energy = 4000
			exotic_gases = 20
		}
	}

	enactment_time = 240

	prerequisites = { "tech_htbd_dolly" }

	potential = {
		exists = from
		from = {
			has_country_flag = htbd_dragonborn_done
			is_variable_set = htbd_num_eggs
		}
		exists = space_owner
		space_owner = { is_same_value = from }
		is_colony = no
		OR = {
			is_planet_class = pc_molten
			is_planet_class = pc_shattered
		}
		NOT = { has_planet_flag = egg_incubated	}
		NOT = { has_planet_flag = htbd_egg_decision }
	}

	allow = {
		custom_tooltip = {
			NOT = { has_planet_flag = htbd_egg_decision }
			fail_text = htbd_incubation_inprogress
		}
		custom_tooltip = {
			from = {
				check_variable = {
					which = htbd_num_eggs
					value > 0
				}
			}
			fail_text = htbd_no_more_eggs
		}
	}

	effect = {
		custom_tooltip = decision_htbd_xegg_seed_effects
		hidden_effect = {
			from = { save_event_target_as = decision_owner }
			htbd_decision_effect = yes
		}
	}

	on_queued = {
		if = {
			limit = { htbd_debug_egg = yes }
			log = "[From.GetName] start incubation of psi dragon on [This.GetName]"
		}
		set_planet_flag = htbd_egg_decision
		set_planet_flag = htbd_dolly_egg
		from = {
			subtract_variable = { which = htbd_num_eggs value = 1 }
		}
	}

	on_unqueued = {
		htbd_egg_decision_done = yes
	}

	abort_trigger = {
		# somehow planet class was changed
		NOR = {
			is_planet_class = pc_molten
			is_planet_class = pc_shattered
		}
	}

	abort_effect = {
		htbd_egg_decision_done = yes
		from = { country_event = { id = htbd_ev.94 } }
	}

	ai_weight = {
		weight = 100
	}
}

decision_htbd_cyborg_seed = {
	sound = event_laboratory_sound
	icon = decision_htbd_cyborg_seed

	resources = {
		category = decisions
		cost = {
			food = 1500
			alloys = 1500
			energy = 4500
			volatile_motes = 20
		}
	}

	enactment_time = 240

	prerequisites = { "tech_htbd_cyborg" }

	potential = {
		exists = from
		from = {
			has_country_flag = htbd_dragonborn_done
			is_variable_set = htbd_num_eggs
		}
		exists = space_owner
		space_owner = { is_same_value = from }
		is_colony = no
		OR = {
			is_planet_class = pc_molten
			is_planet_class = pc_shattered
		}
		NOT = { has_planet_flag = egg_incubated	}
		NOT = { has_planet_flag = htbd_egg_decision }
	}

	allow = {
		custom_tooltip = {
			NOT = { has_planet_flag = htbd_egg_decision }
			fail_text = htbd_incubation_inprogress
		}
		custom_tooltip = {
			from = {
				check_variable = {
					which = htbd_num_eggs
					value > 0
				}
			}
			fail_text = htbd_no_more_eggs
		}
	}

	effect = {
		custom_tooltip = decision_htbd_xegg_seed_effects
		hidden_effect = {
			from = { save_event_target_as = decision_owner }
			htbd_decision_effect = yes
		}
	}

	on_queued = {
		if = {
			limit = { htbd_debug_egg = yes }
			log = "[From.GetName] start incubation of psi dragon on [This.GetName]"
		}
		set_planet_flag = htbd_egg_decision
		set_planet_flag = htbd_cyborg_egg
		from = {
			subtract_variable = { which = htbd_num_eggs value = 1 }
		}
	}

	on_unqueued = {
		htbd_egg_decision_done = yes
	}

	abort_trigger = {
		# somehow planet class was changed
		NOR = {
			is_planet_class = pc_molten
			is_planet_class = pc_shattered
		}
	}

	abort_effect = {
		htbd_egg_decision_done = yes
		from = { country_event = { id = htbd_ev.94 } }
	}

	ai_weight = {
		weight = 100
	}
}

decision_htbd_nano_seed = {
	sound = event_laboratory_sound
	icon = decision_htbd_nano_seed

	resources = {
		category = decisions
		cost = {
			food = 1500
			alloys = 1200
			energy = 4000
			nanites = 15
		}
	}

	enactment_time = 240

	prerequisites = { "tech_htbd_nano" }

	potential = {
		exists = from
		from = {
			has_country_flag = htbd_dragonborn_done
			is_variable_set = htbd_num_eggs
		}
		exists = space_owner
		space_owner = { is_same_value = from }
		is_colony = no
		OR = {
			is_planet_class = pc_molten
			is_planet_class = pc_shattered
		}
		NOT = { has_planet_flag = egg_incubated	}
		NOT = { has_planet_flag = htbd_egg_decision }
	}

	allow = {
		custom_tooltip = {
			NOT = { has_planet_flag = htbd_egg_decision }
			fail_text = htbd_incubation_inprogress
		}
		custom_tooltip = {
			from = {
				check_variable = {
					which = htbd_num_eggs
					value > 0
				}
			}
			fail_text = htbd_no_more_eggs
		}
	}

	effect = {
		custom_tooltip = decision_htbd_xegg_seed_effects
		hidden_effect = {
			from = { save_event_target_as = decision_owner }
			htbd_decision_effect = yes
		}
	}

	on_queued = {
		if = {
			limit = { htbd_debug_egg = yes }
			log = "[From.GetName] start incubation of psi dragon on [This.GetName]"
		}
		set_planet_flag = htbd_egg_decision
		set_planet_flag = htbd_nano_egg
		from = {
			subtract_variable = { which = htbd_num_eggs value = 1 }
		}
	}

	on_unqueued = {
		htbd_egg_decision_done = yes
	}

	abort_trigger = {
		# somehow planet class was changed
		NOR = {
			is_planet_class = pc_molten
			is_planet_class = pc_shattered
		}
	}

	abort_effect = {
		htbd_egg_decision_done = yes
		from = { country_event = { id = htbd_ev.94 } }
	}

	ai_weight = {
		weight = 100
	}
}

