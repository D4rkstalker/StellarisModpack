@diff_t0 = 4
@diff_t1 = 5
@diff_t2 = 6
@diff_t3 = 7
@diff_t4 = 8
@diff_t5 = 9
@diff_t6 = 10
@diff_t7 = 11
@diff_t8 = 12
@diff_t9 = 13

operation_Virus_infect = {
    target = none 
    categories = { op_cat_provocation op_cat_technology op_cat_economy }
    picture = GFX_evt_unidentified_monster
    desc = operation_Virus_infect_desc
    stages = 3

   resources = {
        category = operations
        cost = {
            energy = 6400
        }
        upkeep = {
            energy = 16
        }
    }

    spy_power_cost = 30
    spy_network_lvl_requirement = 80
    potential = {
        has_country_flag = "Virusonline"
            }
        
    allow = {
        custom_tooltip = {
            NOT = {
                any_country = { has_country_flag = virus_outbreak }
            }
            fail_text = operation_virus_too_recent
        }
        custom_tooltip = {
            is_running_espionage_operation = no
            fail_text = operation_one_at_a_time
        }
        custom_tooltip = {
        target = {
            is_machine_empire = no
        }
        fail_text = virus_fail_machine
        }
    }
    stage = {
        difficulty = @diff_t8
        icon = GFX_espionage_chapter_icon_target
        event = Imp_operation.1000
    }
    stage = {
        difficulty = @diff_t8
        icon = GFX_espionage_chapter_icon_motion
        event = Imp_operation.1001
    }
    stage = {
        difficulty = @diff_t8
        icon = GFX_espionage_chapter_icon_success
        event = Imp_operation.1002
    }
    on_roll_failed = {
        standard_espionage_operation_on_roll_failed = { RANDOM_EVENTS = operation_random_events_deepcover }
    }
    on_create = {}
    abort = {
        NOT = {
           has_country_flag = Virusonline
        }
    }
}