
special_project = {
	key = ag_ancient_debris_project
	days_to_research = 90
	timelimit = 1800
	tech_department = physics_technology
	picture = GFX_evt_debris
	icon = "gfx/interface/icons/situation_log/situation_log_ag_ancient_debris.dds"
	
	event_scope = ship_event
	
	requirements = {
		shipclass_science_ship = 1
		leader = scientist
	}
	
	on_success = {
		random_list = {
			50 = {
				owner = { country_event = { id = ag_ancient_knowledge.28 } }
				solar_system = {
					save_event_target_as = ag_debris_system
					random_system_ambient_object = {
						limit = { has_ambient_object_flag = ag_ancient_debris_object }
						destroy_ambient_object = this
					}
				}
			}
			25 = {
				solar_system = {
					save_event_target_as = ag_debris_system
					random_system_ambient_object = {
						limit = { has_ambient_object_flag = ag_ancient_debris_object }
						destroy_ambient_object = this
					}
				}
				owner = {
					if = {
						limit = { has_country_flag = ag_has_research_project_2 NOR = { has_technology = tech_ag_ship_hull_upgrade has_tech_option = tech_ag_ship_hull_upgrade } }
						ag_finish_research_project = { ag_project_id = @ag_ship_hull_upgrade_project_id }
					}
					else = {
						if = {
							limit = {
								has_tech_option = tech_ag_ship_hull_upgrade
								NOT = { has_technology = tech_ag_ship_hull_upgrade }
							}
							ag_add_research_option = { ag_tech = tech_ag_ship_hull_upgrade }
							add_tech_progress = { tech = tech_ag_ship_hull_upgrade progress = 1.0 }
						}
						else = {
							if = {
								limit = { has_technology = tech_ag_ship_hull_upgrade }
								country_event = { id = ag_ancient_knowledge.28 }
							}
							if = {
								limit = { NOR = { has_tech_option = tech_ag_ship_hull_upgrade has_technology = tech_ag_ship_hull_upgrade } }
								ag_add_research_option = { ag_tech = tech_ag_ship_hull_upgrade }
								add_tech_progress = { tech = tech_ag_ship_hull_upgrade progress = 0.1 }
							}
						}
					}
					add_resource = { engineering_research = 20 }
					create_message = {
						type = "DEBRIS_ANALYZED_FINISH_MESSAGE_TYPE"
						localization = "ag_ancient_debris_project_desc"
						days = 30
						target = from
						variable = {
							type = name
							localization = "ag_debris_system"
							scope = event_target:ag_debris_system
						}
					}
				}
			}
			25 = {
				solar_system = {
					save_event_target_as = ag_debris_system
					random_system_ambient_object = {
						limit = { has_ambient_object_flag = ag_ancient_debris_object }
						destroy_ambient_object = this
					}
				}
				owner = {
					if = {
						limit = { has_country_flag = ag_has_research_project_2 NOR = { has_technology = tech_ag_ship_bow_upgrade has_tech_option = tech_ag_ship_bow_upgrade } }
						ag_finish_research_project = { ag_project_id = @ag_ship_bow_upgrade_project_id }
					}
					else = {
						if = {
							limit = {
								has_tech_option = tech_ag_ship_bow_upgrade
								NOT = { has_technology = tech_ag_ship_bow_upgrade }
							}
							ag_add_research_option = { ag_tech = tech_ag_ship_bow_upgrade }
							add_tech_progress = { tech = tech_ag_ship_bow_upgrade progress = 1.0 }
						}
						else = {
							if = {
								limit = { has_technology = tech_ag_ship_bow_upgrade }
								country_event = { id = ag_ancient_knowledge.28 }
							}
							if = {
								limit = { NOR = { has_tech_option = tech_ag_ship_bow_upgrade has_technology = tech_ag_ship_bow_upgrade } }
								ag_add_research_option = { ag_tech = tech_ag_ship_bow_upgrade }
								add_tech_progress = { tech = tech_ag_ship_bow_upgrade progress = 0.1 }
							}
						}
					}
					add_resource = { engineering_research = 20 }
					create_message = {
						type = "DEBRIS_ANALYZED_FINISH_MESSAGE_TYPE"
						localization = "ag_ancient_debris_project_desc"
						days = 30
						target = from
						variable = {
							type = name
							localization = "ag_debris_system"
							scope = event_target:ag_debris_system
						}
					}
				}
			}
		}
	}
	
	on_fail = { 
		from.solar_system = {
			random_system_ambient_object = {
				limit = {
					has_ambient_object_flag = ag_ancient_debris_object
				}
				destroy_ambient_object = this
			}
		}
	}
}

special_project = {
	key = ag_repair_lost_ancient_ship
	days_to_research = 360
	tech_department = physics_technology
	picture = GFX_evt_ag_lost_ancient_battleship
	icon = "gfx/interface/icons/situation_log/situation_log_ag_engineering.dds"
	
	event_scope = ship_event
	
	requirements = {
		shipclass_science_ship = 1
		leader = scientist
		skill = 3
	}
	
	on_success = {
		owner = {
			country_event = { id = ag_side.24 }
		}
	}
	
	on_fail = { 
	}
}
special_project = {
	key = ag_hack_lost_ancient_ship
	days_to_research = 360
	tech_department = physics_technology
	picture = GFX_evt_ag_lost_ancient_battleship
	icon = "gfx/interface/icons/situation_log/situation_log_ag_quest.dds"
	
	event_scope = ship_event
	
	requirements = {
		shipclass_science_ship = 1
		leader = scientist
		skill = 5
	}
	
	on_success = {
		owner = {
			random_list = {
				50 = {
					modifier = {
						factor = 1.2
						prev.leader = { has_trait = leader_trait_cyborg }
					}
					modifier = {
						factor = 2
						prev.leader = {
							OR = {
								has_trait_tier1or2 = { TRAIT = leader_trait_spark_of_genius }
								has_trait = leader_trait_psionic
								has_trait = leader_trait_sapient_AI_assistant
							}
						}
					}
					modifier = {
						factor = 3
						prev.leader = {
							OR = {
								has_trait_tier1or2or3 = { TRAIT = leader_trait_expertise_computing }
								has_trait = leader_trait_erudite
								has_trait = leader_trait_synthetic
							}
						}
					}
					modifier = {
						factor = 5
						prev.leader = {
							OR = {
								has_trait = leader_trait_curator
								has_trait = leader_trait_chosen
							}
						}
					}
					modifier = {
						factor = 10
						any_controlled_ship = {
							OR = {
								ag_is_ancient_ship = yes
								ag_is_ancient_ship_unlocked = yes
							}
						}
					}
					country_event = { id = ag_side.27 }
				}
				50 = {
					modifier = {
						factor = 10
						NOT = {
							has_technology = tech_administrative_ai
						}
					}
					modifier = {
						factor = 10
						NOT = {
							has_technology = tech_self_aware_logic
						}
					}
					modifier = {
						factor = 5
						NOT = {
							has_technology = tech_sapient_ai
						}
					}
					modifier = {
						factor = 2
						NOT = {
							has_technology = tech_synthetic_workers
						}
					}
					modifier = {
						factor = 2
						NOT = {
							has_technology = tech_synthetic_leaders
						}
					}
					modifier = {
						factor = 2
						NOT = {
							has_country_flag = ag_known_construction_section
						}
					}
					country_event = { id = ag_side.28 }
				}
			}
		}
	}
	
	on_fail = { 
	}
}

special_project = {
	key = ag_located_primitive_system_4
	cost = 3000
	tech_department = physics_technology
	picture = GFX_evt_wormhole
	icon = "gfx/interface/icons/situation_log/situation_log_ag_quest.dds"
	
	event_scope = planet_event
	
	requirements = {
		leader = scientist
	}
	
	on_success = {
		owner = {
			country_event = { id = ag_side.203 }
		}
	}
	
	on_fail = { 
	}
}

special_project = {
	key = ag_shattered_ringworld_ancient_ship_project
	days_to_research = 360
	tech_department = physics_technology
	picture = GFX_evt_space_debris
	icon = "gfx/interface/icons/situation_log/situation_log_ag_ancient_debris.dds"
	event_scope = ship_event
	event_chain = "ag_shattered_ringworld_ancient_ship_chain"
	requirements = { shipclass_science_ship = 1 leader = scientist skill = 2 }
	on_success = { ship_event = { id = ag_side.73 } }
	on_fail = { }
}
special_project = {
	key = ag_shattered_ringworld_ancient_ship_destroy
	cost = 48000
	tech_department = physics_technology
	picture = GFX_evt_space_debris
	icon = "gfx/interface/icons/situation_log/situation_log_ag_ancient_debris.dds"
	event_scope = ship_event
	event_chain = "ag_shattered_ringworld_ancient_ship_chain"
	requirements = { shipclass_science_ship = 1 }
	on_success = { ship_event = { id = ag_side.75 } }
	on_fail = { }
}
special_project = {
	key = ag_shattered_ringworld_ancient_ship_repair
	days_to_research = 480
	tech_department = engineering_technology
	picture = GFX_evt_space_debris
	icon = "gfx/interface/icons/situation_log/situation_log_ag_ancient_debris.dds"
	
	event_scope = ship_event
	requirements = { shipclass_constructor = 1 }
	
	on_success = { random_list = {
		75 = { ship_event = { id = ag_side.76 } }
		25 = { ship_event = { id = ag_side.77 } }
	} }
	
	on_fail = { }
}

special_project = {
	key = ag_find_molten_planet_guardian_weakness
	days_to_research = 180
	tech_department = physics_technology
	picture = GFX_evt_physics_research
	icon = "gfx/interface/icons/situation_log/situation_log_ag_ancient_debris.dds"
	event_scope = planet_event
	on_success = { owner = { country_event = { id = ag_side.360 } } }
	on_fail = { }
}

special_project = {
	key = ag_fallen_habitat_volatile_motes_project
	days_to_research = 360
	tech_department = physics_technology
	picture = GFX_evt_space_station
	icon = "gfx/interface/icons/situation_log/situation_log_ag_quest.dds"
	event_scope = ship_event
	requirements = { shipclass_science_ship = 1 leader = scientist skill = 4 }
	on_success = { ship_event = { id = ag_side.415 } }
	on_fail = { }
}
special_project = {
	key = ag_fallen_habitat_exotic_gases_project
	days_to_research = 360
	tech_department = physics_technology
	picture = GFX_evt_space_station
	icon = "gfx/interface/icons/situation_log/situation_log_ag_quest.dds"
	event_scope = ship_event
	requirements = { shipclass_science_ship = 1 leader = scientist skill = 4 }
	on_success = { ship_event = { id = ag_side.426 } }
	on_fail = { }
}
special_project = {
	key = ag_fallen_habitat_rare_crystals_project_1
	days_to_research = 180
	tech_department = physics_technology
	picture = GFX_evt_space_station
	icon = "gfx/interface/icons/situation_log/situation_log_ag_quest.dds"
	event_scope = ship_event
	requirements = { shipclass_science_ship = 1 leader = scientist }
	on_success = { from = { planet_event = { id = ag_side.434 } } }
	on_fail = { }
}
special_project = {
	key = ag_fallen_habitat_rare_crystals_project_2
	days_to_research = 420
	tech_department = physics_technology
	picture = GFX_evt_space_station
	icon = "gfx/interface/icons/situation_log/situation_log_ag_quest.dds"
	event_scope = ship_event
	requirements = { shipclass_science_ship = 1 leader = scientist skill = 5 }
	on_success = { from = { planet_event = { id = ag_side.436 } } }
	on_fail = { }
}

special_project = {
	key = ag_salvage_gas_giant_ship
	days_to_research = 360
	tech_department = physics_technology
	picture = GFX_evt_gas_giant
	icon = "gfx/interface/icons/situation_log/situation_log_ag_engineering.dds"
	event_scope = ship_event
	requirements = { shipclass_constructor = 1 }
	on_success = {
		from = { save_event_target_as = ag_target_planet }
		ship_event = { id = ag_side.473 }
	}
	on_fail = { }
}

special_project = {
	key = ag_search_ancient_devices
	days_to_research = 480
	tech_department = physics_technology
	picture = GFX_evt_ship_in_orbit
	icon = "gfx/interface/icons/situation_log/situation_log_ag_radar.dds"
	event_scope = planet_event
	requirements = { }
	on_success = {
		save_event_target_as = ag_target_planet
		random_moon = {
			limit = {
				OR = {
					is_planet_class = pc_barren
					is_planet_class = pc_barren_cold
				}
				NOT = { exists = archaeological_site }
			}
			save_event_target_as = ag_target_moon
		}
		owner = { country_event = { id = ag_side.507 } }
	}
	on_fail = { }
}
special_project = {
	key = ag_search_ancient_devices_2
	days_to_research = 1080
	tech_department = physics_technology
	picture = GFX_evt_ship_in_orbit
	icon = "gfx/interface/icons/situation_log/situation_log_ag_radar.dds"
	event_scope = country_event
	requirements = { }
	location = no
	on_success = { country_event = { id = ag_side.508 } }
	on_fail = { }
}

special_project = {
	key = ag_ancient_knowledge_leader_level
	cost = {
		base = 1000
		scaled_modifier = { scope = this add = 200 calc = pop_count }
	}
	tech_department = society_technology
	picture = GFX_evt_enclave_overlord
	icon = "gfx/interface/icons/situation_log/situation_log_ag_tutorial.dds"
	event_scope = country_event
	requirements = { }
	location = no
	on_success = { country_event = { id = ag_ancient_knowledge.30 } }
	on_fail = { }
}
