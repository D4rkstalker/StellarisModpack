# ##################
# FE  Admin Tech
# ##################


#Galactic Administration
tech_ae_ancient_palace = {
	cost = @tier5cost3
	area = society
	tier = 5
	category = { statecraft }
	prerequisites = { "tech_dark_matter_power_core_ae" }
	weight = 100000
	
	gateway = capital	# unlocks Empire Capital-Complex
	
	potential = {
		is_regular_empire = yes
		NOT = { has_global_flag = acot_building_forbidden }
	}

	weight_modifier = {
		factor = 4
		modifier = {
			factor = 1.25
			research_leader = {
				area = society
				has_trait = "leader_trait_expertise_statecraft"
			}
		}
	}
	
	ai_weight = {
		factor = 10
		modifier = {
			factor = 1.25
			research_leader = {
				area = society
				has_trait = "leader_trait_expertise_statecraft"
			}
		}
	}
}

tech_ae_ancient_control_center = {
	cost = @tier5cost3
	area = society
	tier = 5
	category = { statecraft }
	prerequisites = { "tech_dark_matter_power_core_ae" }
	weight = 100000
	
	gateway = capital	# unlocks Empire Capital-Complex
	
	potential = {
		OR = {has_ascension_perk = ap_synthetic_evolution is_machine_empire = yes}
		NOT = { has_global_flag = acot_building_forbidden }
	}

	weight_modifier = {
		factor = 4
		modifier = {
			factor = 1.25
			research_leader = {
				area = society
				has_trait = "leader_trait_expertise_statecraft"
			}
		}
	}
	
	ai_weight = {
		factor = 10
		modifier = {
			factor = 1.25
			research_leader = {
				area = society
				has_trait = "leader_trait_expertise_statecraft"
			}
		}
	}
}

tech_ae_ancient_hive_cluster = {
	cost = @tier5cost3
	area = society
	tier = 5
	category = { statecraft }
	prerequisites = { "tech_dark_matter_power_core_ae" }
	weight = 100000
	
	gateway = capital	# unlocks Empire Capital-Complex
	
	potential = {
		is_hive_empire = yes
		NOT = { has_global_flag = acot_building_forbidden }
	}

	weight_modifier = {
		factor = 4
		modifier = {
			factor = 1.25
			research_leader = {
				area = society
				has_trait = "leader_trait_expertise_statecraft"
			}
		}
	}
	
	ai_weight = {
		factor = 10
		modifier = {
			factor = 1.25
			research_leader = {
				area = society
				has_trait = "leader_trait_expertise_statecraft"
			}
		}
	}
}



# ##################
# FE  Unit Ready Tech
# ##################

#Droids
tech_super_assembly = {
	cost = @tier4cost3
	area = engineering
	tier = 4
	category = { industry }
	prerequisites = { "tech_dark_matter_power_core" }
	weight = @tier4weight2

	potential = {
		NOT = { is_hive_empire = yes }
		NOT = { has_global_flag = acot_building_forbidden }
	}	
	
	weight_modifier = {
		modifier = {
			factor = 0
			has_policy_flag = robots_outlawed
		}		
		modifier = {
			factor = 0.5
			OR = {
				has_ethic = "ethic_spiritualist"
				has_ethic = "ethic_fanatic_spiritualist"
			}
		}
		modifier = {
			factor = 2
			OR = {
				has_ethic = ethic_materialist
				has_ethic = ethic_fanatic_materialist
			}
		}
		modifier = {
			factor = 2
			has_valid_civic = civic_mechanists
		}
		modifier = {
			factor = 1.25
			research_leader = {
				area = engineering
				has_trait = "leader_trait_expertise_industry"
				has_level > 2
			}
		}
	}
	
	ai_weight = {
		weight = 2
		modifier = {
			factor = 2
			OR = {
				has_ethic = ethic_materialist
				has_ethic = ethic_fanatic_materialist
			}
		}
		modifier = {
			factor = 0
			NOR = {
				has_ai_personality_behaviour = robot_exploiter
				has_ai_personality_behaviour = robot_liberator
			}
		}
		modifier = {
			factor = 2
			has_valid_civic = civic_mechanists
		}
		modifier = {
			factor = 1.25
			research_leader = {
				area = engineering
				has_trait = "leader_trait_expertise_industry"
			}
		}
	}
}

#Droids
tech_super_assembly_ae = {
	cost = @tier5cost1
	area = engineering
	tier = 5
	category = { industry }
	prerequisites = { "tech_super_assembly" "tech_dark_matter_power_core_ae" }
	weight = @tier5weight1

	potential = {
		NOT = { is_hive_empire = yes }
		NOT = { has_global_flag = acot_building_forbidden }
	}	

	feature_flags = {
		add_advanced_traits
	}
	
	weight_modifier = {
		modifier = {
			factor = 0
			has_policy_flag = robots_outlawed
		}	
		modifier = {
			factor = 0
			is_regular_empire = yes			
			NOT = {
				has_ascension_perk = ap_synthetic_evolution
			}	
		}	
		modifier = {
			factor = 0
			OR = {has_ascension_perk = ap_synthetic_evolution is_machine_empire = yes}			
			NOT = {
				has_ascension_perk = ap_synthetic_age
			}	
		}	
		modifier = {
			factor = 0.5
			OR = {
				has_ethic = "ethic_spiritualist"
				has_ethic = "ethic_fanatic_spiritualist"
			}
		}
		modifier = {
			factor = 2
			OR = {
				has_ethic = ethic_materialist
				has_ethic = ethic_fanatic_materialist
			}
		}
		modifier = {
			factor = 2
			has_valid_civic = civic_mechanists
		}
		modifier = {
			factor = 1.25
			research_leader = {
				area = engineering
				has_trait = "leader_trait_expertise_industry"
				has_level > 2
			}
		}
	}
	
	ai_weight = {
		weight = 2
		modifier = {
			factor = 2
			OR = {
				has_ethic = ethic_materialist
				has_ethic = ethic_fanatic_materialist
			}
		}
		modifier = {
			factor = 0
			NOR = {
				has_ai_personality_behaviour = robot_exploiter
				has_ai_personality_behaviour = robot_liberator
			}
		}
		modifier = {
			factor = 2
			has_valid_civic = civic_mechanists
		}
		modifier = {
			factor = 1.25
			research_leader = {
				area = engineering
				has_trait = "leader_trait_expertise_industry"
			}
		}
	}
}

# ##################
# FE  Resource Building Tech
# ##################

#Dark Energy Eating
tech_dark_matter_synthersizer = {
	cost = @tier5cost1
	area = physics
	tier = 5
	category = { field_manipulation }
	prerequisites = { "tech_dark_matter_power_core" "tech_mine_dark_energy" }
	weight = @tier5weight3
	
	potential = {
		NOT = { has_global_flag = acot_building_forbidden }
	}

	## unlocks Dark Energy
	
	weight_modifier = {
		modifier = {
			factor = 1.5
			research_leader = {
				area = physics
				has_trait = "leader_trait_expertise_field_manipulation"
			}
		}
		modifier = {
			factor = 0.5
			NOT = {
				is_country_type = default				
			}
		}	
	}	
	
	ai_weight = {
		factor = 5 #strategic resource
		modifier = {
			factor = 1.25
			research_leader = {
				area = physics
				has_trait = "leader_trait_expertise_field_manipulation"
			}
		}	
	}
}


#Dark Energy Eating
tech_dark_matter_synthersizer_ae = {
	cost = @tier5cost1
	area = physics
	tier = 5
	category = { field_manipulation }
	prerequisites = { "tech_dark_matter_synthersizer" "tech_ae_dark_energy_pylon" }
	weight = @tier5weight1
		
	## unlocks Dark Energy
	
	potential = {
		NOT = {
			is_country_type = fallen_empire
		}
		NOT = { has_global_flag = acot_building_forbidden }
	}

	weight_modifier = {
		modifier = {
			factor = 1.5
			research_leader = {
				area = physics
				has_trait = "leader_trait_expertise_field_manipulation"
			}
		}
		modifier = {
			factor = 0.5
			NOT = {
				is_country_type = default				
			}
		}	
	}	
	
	ai_weight = {
		factor = 5 #strategic resource
		modifier = {
			factor = 1.25
			research_leader = {
				area = physics
				has_trait = "leader_trait_expertise_field_manipulation"
			}
		}
	}
}

#Dark Energy Eating
tech_dark_matter_generator = {
	cost = @tier5cost1
	area = engineering
	tier = 5
	category = { materials }
	prerequisites = { "tech_dark_matter_power_core" "tech_mine_dark_matter" }
	weight = 100
		
	potential = {
		NOT = { has_global_flag = acot_building_forbidden }
	}

	## unlocks Dark Energy
	
	weight_modifier = {
		modifier = {
			factor = 1.5
			research_leader = {
				area = engineering
				has_trait = "leader_trait_expertise_materials"
			}
		}
	}	
	
	ai_weight = {
		factor = 5 #strategic resource
		modifier = {
			factor = 1.25
			research_leader = {
				area = engineering
				has_trait = "leader_trait_expertise_materials"
			}
		}
	}
}


#Dark Energy Eating
tech_ae_dark_matter_generator = {
	cost = @tier5cost1
	area = engineering
	tier = 5
	category = { field_manipulation }
	prerequisites = { "tech_dark_matter_power_core_ae" "tech_dark_matter_generator"  }
	weight = @tier5weight1
		
	## unlocks Dark Energy
	
	potential = {
		NOT = {
			is_country_type = fallen_empire
		}
		NOT = { has_global_flag = acot_building_forbidden }
	}

	weight_modifier = {
		modifier = {
			factor = 1.5
			research_leader = {
				area = engineering
				has_trait = "leader_trait_expertise_materials"
			}
		}
		modifier = {
			factor = 0
			NOR = {
				has_technology = tech_ae_ancient_control_center
				has_technology = tech_ae_ancient_palace
				has_technology = tech_ae_ancient_hive_cluster
			}
		}
	}	
	
	ai_weight = {
		factor = 5 #strategic resource
		modifier = {
			factor = 1.25
			research_leader = {
				area = engineering
				has_trait = "leader_trait_expertise_materials"
			}
		}
	}
}


tech_ae_dark_energy_pylon = {
	cost = @tier5cost1
	area = physics
	tier = 5
	category = { field_manipulation }
	prerequisites = { "tech_dark_matter_power_core_ae" "tech_mine_dark_energy" }
	weight = @tier5weight1
		
	## unlocks Dark Energy

	potential = {
		NOT = {
			is_country_type = fallen_empire
		}
		NOT = { has_global_flag = acot_building_forbidden }
	}

	weight_modifier = {
		modifier = {
			factor = 1.5
			research_leader = {
				area = physics
				has_trait = "leader_trait_expertise_field_manipulation"
			}
		}
		modifier = {
			factor = 0
			NOR = {
				has_technology = tech_ae_ancient_control_center
				has_technology = tech_ae_ancient_palace
				has_technology = tech_ae_ancient_hive_cluster
			}
		}
	}	
	
	ai_weight = {
		factor = 5 #strategic resource
		modifier = {
			factor = 1.25
			research_leader = {
				area = physics
				has_trait = "leader_trait_expertise_field_manipulation"
			}
		}
	}
}

# ##################
# FE  Science Building Tech
# ##################

tech_enigmatic_lab = {
	area = physics
	category = { computing }
	tier = 4
	cost = @tier4cost3
	prerequisites = { "tech_basic_science_lab_2" "tech_dark_matter_power_core" }
	weight = @tier4weight2
		
	potential = {
		NOT = { has_global_flag = acot_building_forbidden }
	}

	weight_modifier = {
		factor = 2
		modifier = {
			factor = 1.25
			research_leader = {
				area = physics
				has_trait = "leader_trait_expertise_computing"
			}			
		}
	}
	
	ai_weight = {
		modifier = {
			factor = 1.25
			research_leader = {
				area = physics
				has_trait = "leader_trait_expertise_computing"
			}
		}
	}
}

tech_ae_enigmatic_lab = {
	area = physics
	category = { computing }
	tier = 5
	cost = @tier5cost1
	prerequisites = { "tech_enigmatic_lab" "tech_dark_matter_power_core_ae" }
	weight = @tier5weight1
		
	potential = {
		NOT = {
			is_country_type = fallen_empire
		}
		NOT = { has_global_flag = acot_building_forbidden }
	}

	weight_modifier = {
		factor = 2
		modifier = {
			factor = 1.25
			research_leader = {
				area = physics
				has_trait = "leader_trait_expertise_computing"
			}			
		}
		modifier = {
			factor = 0
			NOR = {
				has_technology = tech_ae_ancient_control_center
				has_technology = tech_ae_ancient_palace
				has_technology = tech_ae_ancient_hive_cluster
			}
		}
	}
	
	ai_weight = {
		modifier = {
			factor = 1.25
			research_leader = {
				area = physics
				has_trait = "leader_trait_expertise_computing"
			}
		}
	}
}


# ##################
#  Defense Building Tech
# ##################

tech_dark_energy_psg = {
	area = physics
	cost = @tier4cost1
	tier = 5
	category = { field_manipulation }
	ai_update_type = all	
	is_rare = yes
	prerequisites = { "tech_dark_matter_deflector" "tech_planetary_shield_generator" }
	weight = @tier4weight1
	
	potential = {
		NOT = { has_global_flag = acot_building_forbidden }
	}

	weight_modifier = {
		factor = 0.5
		modifier = {
			factor = 0.5
			NOR = {
				research_leader = {
					area = physics
					has_trait = "leader_trait_expertise_field_manipulation"
				}			
				research_leader = {
					area = physics
					has_trait = "leader_trait_curator"
				}
				research_leader = {
					area = physics
					has_trait = "leader_trait_spark_of_genius"
				}
			}
		}
	}

}


tech_ae_dark_energy_psg = {
	area = physics
	cost = @tier5cost1
	tier = 5
	category = { field_manipulation }
	ai_update_type = all	
	is_rare = yes
	prerequisites = { "tech_dark_matter_deflector_ae" "tech_dark_energy_psg" }
	weight = @tier5weight1
	
	potential = {
		NOT = {
			is_country_type = fallen_empire
		}
		NOT = { has_global_flag = acot_building_forbidden }
	}

	weight_modifier = {
		factor = 0.5
		modifier = {
			factor = 0.5
			NOR = {
				research_leader = {
					area = physics
					has_trait = "leader_trait_expertise_field_manipulation"
				}			
				research_leader = {
					area = physics
					has_trait = "leader_trait_curator"
				}
				research_leader = {
					area = physics
					has_trait = "leader_trait_spark_of_genius"
				}
			}
		}
		modifier = {
			factor = 0
			NOR = {
				has_technology = tech_ae_ancient_control_center
				has_technology = tech_ae_ancient_palace
				has_technology = tech_ae_ancient_hive_cluster
			}
		}
	}

}


# Global Defense Grid
tech_ae_stronghold = {
	cost = @tier4cost3
	area = society
	tier = 5
	category = { military_theory }
	prerequisites = { "tech_global_defense_grid" "tech_dark_matter_power_core_ae" }
	weight = @tier4weight3
	
	potential = {
		NOT = { has_global_flag = acot_building_forbidden }
	}

	# unlocks fortress
	
	modifier = {
		army_defense_health_mult = 0.25
	}	
	
	weight_modifier = {
		factor = 2
		modifier = {
			factor = 1.25
			has_ethic = ethic_militarist
		}
		modifier = {
			factor = 1.5
			has_ethic = ethic_fanatic_militarist
		}
		modifier = {
			factor = 1.25
			research_leader = {
				area = society
				has_trait = "leader_trait_expertise_military_theory"
			}
		}
		modifier = {
			factor = 0
			NOR = {
				has_technology = tech_ae_ancient_control_center
				has_technology = tech_ae_ancient_palace
				has_technology = tech_ae_ancient_hive_cluster
			}
		}
	}
	
	ai_weight = {
		factor = 2
		modifier = {
			factor = 1.25
			has_ethic = ethic_militarist
		}
		modifier = {
			factor = 1.5
			has_ethic = ethic_fanatic_militarist
		}
		modifier = {
			factor = 1.25
			research_leader = {
				area = society
				has_trait = "leader_trait_expertise_military_theory"
			}
		}
	}
}


# Global Defense Grid
tech_giga_fortress = {
	cost = @tier5cost3
	area = society
	tier = 5
	category = { military_theory }
	prerequisites = { "tech_ae_stronghold" }
	weight = @tier5weight3
	
	potential = {
		NOT = { has_global_flag = acot_building_forbidden }
	}

	# unlocks fortress
	
	weight_modifier = {
		factor = 2
		modifier = {
			factor = 1.25
			has_ethic = ethic_militarist
		}
		modifier = {
			factor = 1.5
			has_ethic = ethic_fanatic_militarist
		}
		modifier = {
			factor = 1.25
			research_leader = {
				area = society
				has_trait = "leader_trait_expertise_military_theory"
			}
		}
	}
	
	ai_weight = {
		factor = 2
		modifier = {
			factor = 1.25
			has_ethic = ethic_militarist
		}
		modifier = {
			factor = 1.5
			has_ethic = ethic_fanatic_militarist
		}
		modifier = {
			factor = 1.25
			research_leader = {
				area = society
				has_trait = "leader_trait_expertise_military_theory"
			}
		}
	}
}

#Cloning
tech_ae_clone_vats = {
	cost = @tier5cost3
	area = society
	tier = 5
	category = { biology }	
	prerequisites = { "tech_cloning" "tech_elite_clone" }
	weight = @tier5weight3
	
	modifier = {
		pop_growth_speed = 0.20
	}

	potential = {
		OR = {
			NOT = { has_authority = auth_machine_intelligence }
			has_civic = civic_machine_assimilator
		}
		has_ascension_perk = ap_evolutionary_mastery
		OR = {
			has_technology = tech_ae_ancient_palace
			has_technology = tech_ae_ancient_hive_cluster
			has_technology = tech_ae_ancient_control_center
		}
	}
	
	weight_modifier = {
		factor = 1.5 	# genetech needs to be a bit more common
		modifier = {
			factor = 1.25
			has_authority = auth_hive_mind
		}
		modifier = {
			factor = 0.5
			NOT = {
				is_country_type = default				
			}
		}	
		modifier = {
			factor = 1.25
			has_tradition = tr_supremacy_adopt
		}
		modifier = {
			factor = 1.25
			research_leader = {
				area = society
				has_trait = "leader_trait_expertise_biology"
			}
		}
	}
	
	ai_weight = {
		modifier = {
			factor = 1.25
			research_leader = {
				area = society
				has_trait = "leader_trait_expertise_biology"
			}
		}
	}
}

#Advanced Mineral Purification
tech_fe_mineral_processing_plant = {
	cost = @tier5cost1
	area = engineering
	tier = 5
	category = { industry }	
	prerequisites = { "tech_mineral_purification_2" "tech_dark_matter_power_core" }
	weight = @tier5weight1
	
	potential = {
		NOT = { has_global_flag = acot_building_forbidden }
	}


	weight_modifier = {
		factor = 2
		modifier = {
			factor = 1.25
			research_leader = {
				area = engineering
				has_trait = "leader_trait_expertise_industry"
			}			
		}
	}
	
	ai_weight = {
		modifier = {
			factor = 1.25
			research_leader = {
				area = engineering
				has_trait = "leader_trait_expertise_industry"
			}
		}
	}
}

#Advanced Mineral Purification
tech_ae_mineral_processing_plant = {
	cost = @tier5cost3
	area = engineering
	tier = 5
	category = { industry }	
	prerequisites = { "tech_fe_mineral_processing_plant" }
	weight = @tier5weight1
	
	potential = {
		NOT = { has_global_flag = acot_building_forbidden }
		has_technology = tech_dark_matter_power_core_ae
	}


	weight_modifier = {
		factor = 2
		modifier = {
			factor = 1.25
			research_leader = {
				area = engineering
				has_trait = "leader_trait_expertise_industry"
			}			
		}
	}
	
	ai_weight = {
		modifier = {
			factor = 1.25
			research_leader = {
				area = engineering
				has_trait = "leader_trait_expertise_industry"
			}
		}
	}
}

#Planetary Power Grid
tech_fe_power_hub = {
	cost = @tier5cost1
	area = physics
	tier = 5
	category = { field_manipulation }	
	prerequisites = { "tech_power_hub_2" "tech_dark_matter_power_core" "tech_mine_dark_energy"  }
	weight = @tier5weight1
		
	potential = {
		NOT = { has_global_flag = acot_building_forbidden }
	}


	weight_modifier = {
		modifier = {
			factor = 0
			NOR = {
				has_technology = tech_mine_exotic_gases
				has_technology = tech_exotic_gases
				has_country_flag = has_market_access
			}
		}
		modifier = {
			factor = 2
			has_tradition = tr_prosperity_adopt
		}
		modifier = {
			factor = 1.25
			research_leader = {
				area = physics
				has_trait = "leader_trait_expertise_field_manipulation"
			}			
		}
	}
	
	ai_weight = {
		modifier = {
			factor = 1.25
			research_leader = {
				area = physics
				has_trait = "leader_trait_expertise_field_manipulation"
			}
		}
	}
}

#Planetary Power Grid
tech_ae_power_hub = {
	cost = @tier5cost1
	area = physics
	tier = 5
	category = { field_manipulation }	
	prerequisites = { "tech_fe_power_hub" }
	weight = @tier5weight1
		
	potential = {
		NOT = { has_global_flag = acot_building_forbidden }
		has_technology = tech_dark_matter_power_core_ae
	}


	weight_modifier = {
		modifier = {
			factor = 0
			NOR = {
				has_technology = tech_mine_exotic_gases
				has_technology = tech_exotic_gases
				has_country_flag = has_market_access
			}
		}
		modifier = {
			factor = 2
			has_tradition = tr_prosperity_adopt
		}
		modifier = {
			factor = 1.25
			research_leader = {
				area = physics
				has_trait = "leader_trait_expertise_field_manipulation"
			}			
		}
	}
	
	ai_weight = {
		modifier = {
			factor = 1.25
			research_leader = {
				area = physics
				has_trait = "leader_trait_expertise_field_manipulation"
			}
		}
	}
}

tech_fe_institute = {
	area = physics
	tier = 5
	cost = @tier5cost1
	category = { computing }
	prerequisites = { "tech_global_research_initiative" "tech_dark_matter_power_core" "tech_enigmatic_lab" }
	weight = @tier5weight1
	
	potential = {
		NOT = { has_global_flag = acot_building_forbidden }
	}


	weight_modifier = {
		factor = 1.5
		modifier = {
			factor = 0.25
			NOR = {
				research_leader = {
					area = physics
					has_trait = "leader_trait_expertise_computing"
				}
				research_leader = {
					area = physics
					has_trait = "leader_trait_curator"
				}
			}
		}
		modifier = {
			factor = 1.25
			research_leader = {
				area = physics
				has_trait = "leader_trait_expertise_computing"
			}
		}
	}
	
	ai_weight = {
		modifier = {
			factor = 1.25
			research_leader = {
				area = physics
				has_trait = "leader_trait_expertise_computing"
			}
		}
	}
}

tech_ae_institute = {
	area = physics
	tier = 5
	cost = @tier5cost1
	category = { computing }
	prerequisites = { "tech_fe_institute" }
	weight = @tier5weight1
	
	potential = {
		NOT = { has_global_flag = acot_building_forbidden }
		has_technology = tech_dark_matter_power_core_ae
	}


	weight_modifier = {
		factor = 1.5
		modifier = {
			factor = 0.25
			NOR = {
				research_leader = {
					area = physics
					has_trait = "leader_trait_expertise_computing"
				}
				research_leader = {
					area = physics
					has_trait = "leader_trait_curator"
				}
			}
		}
		modifier = {
			factor = 1.25
			research_leader = {
				area = physics
				has_trait = "leader_trait_expertise_computing"
			}
		}
	}
	
	ai_weight = {
		modifier = {
			factor = 1.25
			research_leader = {
				area = physics
				has_trait = "leader_trait_expertise_computing"
			}
		}
	}
}


#Very Advanced Food Processing
tech_fe_food_processing = {
	cost = @tier5cost1
	area = society
	tier = 5
	category = { biology }	
	prerequisites = { "tech_food_processing_2" "tech_dark_matter_power_core" }
	weight = @tier5weight1
	
	potential = {
		NOT = { has_global_flag = acot_building_forbidden }
	}


	weight_modifier = {
		factor = 2
		modifier = {
			factor = 0.01
			OR = {has_ascension_perk = ap_synthetic_evolution is_machine_empire = yes}
			NOR = { 
				has_valid_civic = civic_machine_servitor 
				has_valid_civic = civic_machine_assimilator 	
				any_owned_planet = {
					num_districts = { type = district_farming value > 0 }
				}
			}
		}
		modifier = {
			factor = 1.25
			research_leader = {
				area = society
				has_trait = "leader_trait_expertise_biology"
			}
		}
		modifier = {
			factor = 0
			NOR = {
				has_technology = tech_mine_dark_matter
			}
		}
	}
	
	ai_weight = {
		modifier = {
			factor = 1.25
			research_leader = {
				area = society
				has_trait = "leader_trait_expertise_biology"
			}
		}
	}
}

#Very Advanced Food Processing
tech_ae_food_processing = {
	cost = @tier5cost1
	area = society
	tier = 5
	category = { biology }	
	prerequisites = { "tech_fe_food_processing" }
	weight = @tier5weight1
	
	potential = {
		NOT = { has_global_flag = acot_building_forbidden }
		has_technology = tech_dark_matter_power_core_ae
	}


	weight_modifier = {
		factor = 2
		modifier = {
			factor = 0.01
			OR = {has_ascension_perk = ap_synthetic_evolution is_machine_empire = yes}
			NOR = { 
				has_valid_civic = civic_machine_servitor 
				has_valid_civic = civic_machine_assimilator 	
				any_owned_planet = {
					num_districts = { type = district_farming value > 0 }
				}
			}
		}
		modifier = {
			factor = 1.25
			research_leader = {
				area = society
				has_trait = "leader_trait_expertise_biology"
			}
		}
		modifier = {
			factor = 0
			NOR = {
				has_technology = tech_mine_dark_matter
			}
		}
	}
	
	ai_weight = {
		modifier = {
			factor = 1.25
			research_leader = {
				area = society
				has_trait = "leader_trait_expertise_biology"
			}
		}
	}
}

#Alloys 2
tech_fe_alloy_foundry = {
	cost = @tier5cost1
	area = engineering
	tier = 5
	category = { materials }	
	prerequisites = { "tech_alloys_2" "tech_fe_mineral_processing_plant" }
	weight = @tier5weight1
	
	# Unlock better alloy buildings
	potential = {
		NOT = { has_global_flag = acot_building_forbidden }
	}
	

	weight_modifier = {
		factor = 2
		modifier = {
			factor = 1.25
			research_leader = {
				area = engineering
				has_trait = "leader_trait_expertise_materials"
			}			
		}
	}
	
	ai_weight = {
		modifier = {
			factor = 1.25
			research_leader = {
				area = engineering
				has_trait = "leader_trait_expertise_materials"
			}
		}
	}
}

#Alloys 2
tech_ae_alloy_foundry = {
	cost = @tier5cost1
	area = engineering
	tier = 5
	category = { materials }	
	prerequisites = { "tech_fe_alloy_foundry" }
	weight = @tier5weight1
	
	# Unlock better alloy buildings
	potential = {
		NOT = { has_global_flag = acot_building_forbidden }
		has_technology = tech_dark_matter_power_core_ae
	}
	

	weight_modifier = {
		factor = 2
		modifier = {
			factor = 1.25
			research_leader = {
				area = engineering
				has_trait = "leader_trait_expertise_materials"
			}			
		}
	}
	
	ai_weight = {
		modifier = {
			factor = 1.25
			research_leader = {
				area = engineering
				has_trait = "leader_trait_expertise_materials"
			}
		}
	}
}

#Volatile Material Plants
tech_fe_transmutor = {
	cost = @tier5cost1
	area = physics
	tier = 5
	category = { particles }	
	prerequisites = { "tech_volatile_motes" "tech_exotic_gases" "tech_rare_crystals" "tech_dark_matter_power_core" }
	weight = @tier5weight1
	
	potential = {
		NOT = { has_global_flag = acot_building_forbidden }
	}


	weight_modifier = {
		factor = 2
		modifier = {
			factor = 1.25
			research_leader = {
				area = physics
				has_trait = "leader_trait_expertise_particles"
			}
		}
	}
	
	ai_weight = {
		factor = 5 #important resource
		modifier = {
			factor = 1.25
			research_leader = {
				area = physics
				has_trait = "leader_trait_expertise_particles"
			}
		}
	}
}

#Volatile Material Plants
tech_ae_transmutor = {
	cost = @tier5cost1
	area = physics
	tier = 5
	category = { particles }	
	prerequisites = { "tech_fe_transmutor" }
	weight = @tier5weight1
	
	potential = {
		NOT = { has_global_flag = acot_building_forbidden }
		has_technology = tech_dark_matter_power_core_ae
	}


	weight_modifier = {
		factor = 2
		modifier = {
			factor = 1.25
			research_leader = {
				area = physics
				has_trait = "leader_trait_expertise_particles"
			}
		}
	}
	
	ai_weight = {
		factor = 5 #important resource
		modifier = {
			factor = 1.25
			research_leader = {
				area = physics
				has_trait = "leader_trait_expertise_particles"
			}
		}
	}
}

tech_dark_mansion = {
	cost = @tier5cost1
	area = society
	category = { statecraft }
	tier = 5
	prerequisites = { "tech_paradise_dome" "tech_dark_matter_power_core" }
	weight = @tier5weight1
	
	potential = {
		OR = {
			is_gestalt = no
			has_valid_civic = civic_machine_servitor
		}
		NOT = { has_global_flag = acot_building_forbidden }
	}

	weight_modifier = {	
		modifier = {
			factor = 0
			NOR = {
				has_technology = tech_mine_dark_matter
				has_country_flag = has_market_access
			}
		}
		modifier = {
			factor = 1.25
			research_leader = {
				area = society
				has_trait = "leader_trait_expertise_statecraft"
			}
		}
	}
	
	ai_weight = {
		modifier = {
			factor = 1.25
			research_leader = {
				area = society
				has_trait = "leader_trait_expertise_statecraft"
			}
		}
	}
}

tech_ae_dark_mansion = {
	cost = @tier5cost1
	area = society
	category = { statecraft }
	tier = 5
	prerequisites = { "tech_dark_mansion" }
	weight = @tier5weight1
	
	potential = {
		OR = {
			is_gestalt = no
			has_valid_civic = civic_machine_servitor
		}
		NOT = { has_global_flag = acot_building_forbidden }
		has_technology = tech_dark_matter_power_core_ae
	}

	weight_modifier = {	
		modifier = {
			factor = 0
			NOR = {
				has_technology = tech_mine_dark_matter
				has_country_flag = has_market_access
			}
		}
		modifier = {
			factor = 1.25
			research_leader = {
				area = society
				has_trait = "leader_trait_expertise_statecraft"
			}
		}
	}
	
	ai_weight = {
		modifier = {
			factor = 1.25
			research_leader = {
				area = society
				has_trait = "leader_trait_expertise_statecraft"
			}
		}
	}
}


#Frontier Hospital
tech_fe_hospital = {
	cost = @tier5cost1
	area = society
	tier = 5
	category = { biology }
	prerequisites = { "tech_frontier_hospital" "tech_dark_matter_power_core" }
	weight = @tier5weight1
	
	potential = {
		NOT = { has_global_flag = acot_building_forbidden }
		is_gestalt = no
	}
	
	weight_modifier = {
		modifier = {
			factor = 0
			NOR = {
				has_technology = tech_mine_exotic_gases
				has_technology = tech_exotic_gases
				has_country_flag = has_market_access
			}
		}
		modifier = {
			factor = 1.25
			has_tradition = tr_harmony_adopt
		}
		modifier = {
			factor = 1.25
			research_leader = {
				area = society
				has_trait = "leader_trait_expertise_biology"
			}
		}
	}
}

#Frontier Hospital
tech_ae_hospital = {
	cost = @tier5cost1
	area = society
	tier = 5
	category = { biology }
	prerequisites = { "tech_fe_hospital" }
	weight = @tier5weight1
	
	potential = {
		NOT = { has_global_flag = acot_building_forbidden }
		is_gestalt = no
		has_technology = tech_dark_matter_power_core_ae
	}
	
	weight_modifier = {
		modifier = {
			factor = 0
			NOR = {
				has_technology = tech_mine_exotic_gases
				has_technology = tech_exotic_gases
				has_country_flag = has_market_access
			}
		}
		modifier = {
			factor = 1.25
			has_tradition = tr_harmony_adopt
		}
		modifier = {
			factor = 1.25
			research_leader = {
				area = society
				has_trait = "leader_trait_expertise_biology"
			}
		}
	}
}

#Luxuries 2
tech_fe_factory = {
	cost = @tier5cost1
	area = engineering
	tier = 5
	category = { materials }	
	prerequisites = { "tech_luxuries_2" "tech_colonial_centralization" "tech_dark_matter_power_core" }
	weight = @tier5weight1
	
	# Unlocks better luxury goods buildings
	
	potential = {
		OR = {
			is_gestalt = no
			has_valid_civic = civic_machine_servitor
		}
		NOT = { has_global_flag = acot_building_forbidden }
	}
	
	weight_modifier = {
		factor = 2
		modifier = {
			factor = 1.25
			research_leader = {
				area = engineering
				has_trait = "leader_trait_expertise_materials"
			}			
		}
	}
	
	ai_weight = {
		modifier = {
			factor = 1.25
			research_leader = {
				area = engineering
				has_trait = "leader_trait_expertise_materials"
			}
		}
	}
}

#Luxuries 2
tech_ae_factory = {
	cost = @tier5cost1
	area = engineering
	tier = 5
	category = { materials }	
	prerequisites = { "tech_fe_factory" }
	weight = @tier5weight1
	
	# Unlocks better luxury goods buildings
	
	potential = {
		OR = {
			is_gestalt = no
			has_valid_civic = civic_machine_servitor
		}
		NOT = { has_global_flag = acot_building_forbidden }
		has_technology = tech_dark_matter_power_core_ae
	}
	
	weight_modifier = {
		factor = 2
		modifier = {
			factor = 1.25
			research_leader = {
				area = engineering
				has_trait = "leader_trait_expertise_materials"
			}			
		}
	}
	
	ai_weight = {
		modifier = {
			factor = 1.25
			research_leader = {
				area = engineering
				has_trait = "leader_trait_expertise_materials"
			}
		}
	}
}

tech_dm_ancient_cryo_chamber = {
	cost = @tier5cost1
	area = engineering
	tier = 5
	category = { industry }
	prerequisites = { "tech_dark_matter_power_core" "tech_micro_replicators" }

	weight = @tier5weight3
	
	is_rare = yes
	
	potential = {
		NOT = { has_global_flag = acot_building_forbidden }
		is_machine_empire = yes
	}
	
	
	weight_modifier = {
		factor = 1.5 
		modifier = {
			factor = 1.25
			research_leader = {
				area = engineering
				has_trait = "leader_trait_expertise_industry"
			}
		}
	}
	
	ai_weight = {
		modifier = {
			factor = 1.25
			research_leader = {
				area = engineering
				has_trait = "leader_trait_expertise_industry"
			}
		}
	}
}

tech_ae_ancient_cryo_chamber = {
	cost = @tier5cost1
	area = engineering
	tier = 5
	category = { industry }
	prerequisites = { "tech_dm_ancient_cryo_chamber" }

	weight = @tier5weight3
	
	is_rare = yes
	
	potential = {
		NOT = { has_global_flag = acot_building_forbidden }
		is_machine_empire = yes
		has_technology = tech_dark_matter_power_core_ae
	}
	
	
	weight_modifier = {
		factor = 1.5 
		modifier = {
			factor = 1.25
			research_leader = {
				area = engineering
				has_trait = "leader_trait_expertise_industry"
			}
		}
	}
	
	ai_weight = {
		modifier = {
			factor = 1.25
			research_leader = {
				area = engineering
				has_trait = "leader_trait_expertise_industry"
			}
		}
	}
}

tech_fe_hive_depot = {
	cost = @tier5cost1
	area = society
	tier = 5
	category = { biology }
	prerequisites = { "tech_dark_matter_power_core" "tech_housing_2" }

	weight = @tier5weight3
	
	
	potential = {
		NOT = { has_global_flag = acot_building_forbidden }
		is_hive_empire = yes
	}
	
	
	weight_modifier = {
		factor = 1.5 
		modifier = {
			factor = 1.25
			research_leader = {
				area = society
				has_trait = "leader_trait_expertise_biology"
			}
		}
	}
	
	ai_weight = {
		modifier = {
			factor = 1.25
			research_leader = {
				area = society
				has_trait = "leader_trait_expertise_biology"
			}
		}
	}
}

tech_ae_hive_depot = {
	cost = @tier5cost1
	area = society
	tier = 5
	category = { biology }
	prerequisites = { "tech_fe_hive_depot" }

	weight = @tier5weight3
	
	
	potential = {
		NOT = { has_global_flag = acot_building_forbidden }
		is_hive_empire = yes
		has_technology = tech_dark_matter_power_core_ae
	}
	
	
	weight_modifier = {
		factor = 1.5 
		modifier = {
			factor = 1.25
			research_leader = {
				area = society
				has_trait = "leader_trait_expertise_biology"
			}
		}
	}
	
	ai_weight = {
		modifier = {
			factor = 1.25
			research_leader = {
				area = society
				has_trait = "leader_trait_expertise_biology"
			}
		}
	}
}

#################### BUILDING TECH ###########################

tech_stellarite_nexus = {
	area = physics
	cost = 60000
	tier = 5
	category = { field_manipulation }
	weight = 5
	ai_update_type = military
	is_rare = yes
	prerequisites = { tech_stellarite_reactor tech_stellarite_reactor_booster }
	

	potential = {
		NOT = { has_global_flag = acot_shipcom_forbidden }
		has_technology = tech_stellarite_reactor
	}

	ai_weight = {
		factor = 200		#components are OP
	}
}

tech_stellarite_generator_ae = {
	area = physics
	cost = 60000
	tier = 5
	category = { field_manipulation }
	weight = 0
	ai_update_type = military
	is_rare = yes
	prerequisites = { tech_stellarite_reactor tech_stellarite_reactor_booster tech_stellarite_nexus }
	

	potential = {
		NOT = { has_global_flag = acot_shipcom_forbidden }
		has_technology = tech_stellarite_reactor
	}

	ai_weight = {
		factor = 200		#components are OP
	}
}

############################ENIGMATIC BUILDINGU


tech_ae_affluence_center = {
	cost = @fallentechcost
	area = engineering
	tier = @fallentechtier
	category = { materials }	
	prerequisites = { "tech_precursor_design" "tech_dark_matter_power_core_ae" }
	weight = @tier5weight1
	
	is_rare = yes
	
	potential = {
		NOT = { has_global_flag = acot_building_forbidden }
		NOT = {
			is_country_type = fallen_empire
		}
	}
	
	weight_modifier = {
		factor = 2
		modifier = {
			factor = 1.25
			research_leader = {
				area = engineering
				has_trait = "leader_trait_expertise_materials"
			}			
		}
		modifier = {
			factor = 0
			has_ae_capital_tech = no
		}
		modifier = {
			factor = 0
			NOT = {
				any_owned_planet = {
					has_building = building_affluence_center
				}
			}
		}
	}
	
	ai_weight = {
		modifier = {
			factor = 1.25
			research_leader = {
				area = engineering
				has_trait = "leader_trait_expertise_materials"
			}
		}
	}
}


tech_ae_nourishment_center = {
	cost = @fallentechcost
	area = society
	tier = @fallentechtier
	category = { biology }	
	prerequisites = { "tech_precursor_design" "tech_dark_matter_power_core_ae" }
	weight = @tier5weight1
	
	is_rare = yes
	
	potential = {
		NOT = { has_global_flag = acot_building_forbidden }
		NOT = {
			is_country_type = fallen_empire
		}
	}
	
	weight_modifier = {
		factor = 2
		modifier = {
			factor = 0.01
			OR = {has_ascension_perk = ap_synthetic_evolution is_machine_empire = yes}
			NOR = { 
				has_valid_civic = civic_machine_servitor 
				has_valid_civic = civic_machine_assimilator 	
				any_owned_planet = {
					num_districts = { type = district_farming value > 0 }
				}
			}
		}	
		modifier = {
			factor = 0
			NOT = {
				any_owned_planet = {
					has_building = building_nourishment_center
				}
			}
		}
		modifier = {
			factor = 0
			has_ae_capital_tech = no
		}
		modifier = {
			factor = 1.25
			research_leader = {
				area = society
				has_trait = "leader_trait_expertise_biology"
			}			
		}
	}
	
	ai_weight = {
		modifier = {
			factor = 1.25
			research_leader = {
				area = society
				has_trait = "leader_trait_expertise_biology"
			}
		}
	}
}

tech_ae_dimensional_fabricator = {
	cost = @fallentechcost
	area = engineering
	tier = @fallentechtier
	category = { industry }	
	prerequisites = { "tech_precursor_design" "tech_dark_matter_power_core_ae" }
	weight = @tier5weight1
	
	is_rare = yes
	
	potential = {
		NOT = { has_global_flag = acot_building_forbidden }
		NOT = {
			is_country_type = fallen_empire
		}
	}
	
	weight_modifier = {
		factor = 2
		modifier = {
			factor = 1.25
			research_leader = {
				area = engineering
				has_trait = "leader_trait_expertise_industry"
			}			
		}
		modifier = {
			factor = 0
			has_ae_capital_tech = no
		}
		modifier = {
			factor = 0
			NOT = {
				any_owned_planet = {
					has_building = building_dimensional_fabricator
				}
			}
		}
	}
	
	ai_weight = {
		modifier = {
			factor = 1.25
			research_leader = {
				area = engineering
				has_trait = "leader_trait_expertise_industry"
			}
		}
	}
}

tech_ae_class_4_singularity = {
	cost = @fallentechcost
	area = physics
	tier = @fallentechtier
	category = { field_manipulation }	
	prerequisites = { "tech_precursor_design" "tech_dark_matter_power_core_ae" }
	weight = @tier5weight1
	
	is_rare = yes
	
	potential = {
		NOT = { has_global_flag = acot_building_forbidden }
		NOT = {
			is_country_type = fallen_empire
		}
	}
	
	weight_modifier = {
		modifier = {
			factor = 10
			OR = {
				has_technology = tech_mine_exotic_gases
				has_technology = tech_exotic_gases
			}
		}
		modifier = {
			factor = 2
			has_tradition = tr_prosperity_adopt
		}
		modifier = {
			factor = 0
			NOT = {
				any_owned_planet = {
					has_building = building_class_4_singularity
				}
			}
		}
		modifier = {
			factor = 0
			has_ae_capital_tech = no
		}
		modifier = {
			factor = 1.25
			research_leader = {
				area = physics
				has_trait = "leader_trait_expertise_field_manipulation"
			}			
		}
	}
	
	ai_weight = {
		modifier = {
			factor = 1.25
			research_leader = {
				area = physics
				has_trait = "leader_trait_expertise_field_manipulation"
			}
		}
	}
}

tech_ae_nano_forge = {
	cost = @fallentechcost
	area = engineering
	tier = @fallentechtier
	category = { materials }	
	prerequisites = { "tech_precursor_design" "tech_dark_matter_power_core_ae" }
	weight = @tier5weight1
	
	is_rare = yes
	
	potential = {
		NOT = { has_global_flag = acot_building_forbidden }
		NOT = {
			is_country_type = fallen_empire
		}
	}
	
	weight_modifier = {
		factor = 2
		modifier = {
			factor = 1.25
			research_leader = {
				area = engineering
				has_trait = "leader_trait_expertise_materials"
			}			
		}
		modifier = {
			factor = 0
			has_ae_capital_tech = no
		}
		modifier = {
			factor = 0
			NOT = {
				any_owned_planet = {
					has_building = building_nano_forge
				}
			}
		}
	}
	
	ai_weight = {
		modifier = {
			factor = 1.25
			research_leader = {
				area = engineering
				has_trait = "leader_trait_expertise_materials"
			}
		}
	}
}

tech_ae_master_archive = {
	cost = @fallentechcost
	area = physics
	tier = @fallentechtier
	category = { computing }
	prerequisites = { "tech_precursor_design" "tech_dark_matter_power_core_ae" }
	weight = @tier5weight1
	
	is_rare = yes
	
	potential = {
		NOT = { has_global_flag = acot_building_forbidden }
		NOT = {
			is_country_type = fallen_empire
		}
	}
	
	weight_modifier = {
		factor = 2
		modifier = {
			factor = 1.25
			research_leader = {
				area = physics
				has_trait = "leader_trait_expertise_computing"
			}			
		}
		modifier = {
			factor = 0
			has_ae_capital_tech = no
		}
		modifier = {
			factor = 0
			NOT = {
				any_owned_planet = {
					has_building = building_master_archive
				}
			}
		}
	}
	
	ai_weight = {
		modifier = {
			factor = 1.25
			research_leader = {
				area = physics
				has_trait = "leader_trait_expertise_computing"
			}
		}
	}
}

tech_ae_empyrean_shrine = {
	cost = @fallentechcost
	area = society
	tier = @fallentechtier
	category = { statecraft }
	prerequisites = { "tech_precursor_design" "tech_dark_matter_power_core_ae" }
	weight = @tier5weight1
	
	is_rare = yes
	
	potential = {
		NOT = { has_global_flag = acot_building_forbidden }
		NOT = {
			is_country_type = fallen_empire
		}
	}
	
	weight_modifier = {
		modifier = {
			factor = 1.25
			research_leader = {
				area = society
				has_trait = "leader_trait_expertise_statecraft"
			}
		}
		modifier = {
			factor = 0
			has_ae_capital_tech = no
		}
		modifier = {
			factor = 0
			NOT = {
				any_owned_planet = {
					has_building = building_empyrean_shrine
				}
			}
		}
	}
	
	ai_weight = {
		modifier = {
			factor = 1.25
			research_leader = {
				area = society
				has_trait = "leader_trait_expertise_statecraft"
			}
		}
	}
}

tech_ae_sky_dome = {
	cost = @fallentechcost
	area = society
	tier = @fallentechtier
	category = { statecraft }
	prerequisites = { "tech_precursor_design" "tech_dark_matter_power_core_ae" }
	weight = @tier5weight1
	
	potential = {
		NOT = { has_global_flag = acot_building_forbidden }
		NOT = {
			is_country_type = fallen_empire
		}
	}
	
	weight_modifier = {	
		modifier = {
			factor = 10
			OR = {
				has_technology = tech_mine_rare_crystals
				has_technology = tech_rare_crystals
			}
		}
		modifier = {
			factor = 0
			NOT = {
				any_owned_planet = {
					has_building = building_fe_dome
				}
			}
		}
		modifier = {
			factor = 0
			has_ae_capital_tech = no
		}
		modifier = {
			factor = 1.25
			research_leader = {
				area = society
				has_trait = "leader_trait_expertise_statecraft"
			}
		}
	}
	
	ai_weight = {
		modifier = {
			factor = 1.25
			research_leader = {
				area = society
				has_trait = "leader_trait_expertise_statecraft"
			}
		}
	}
}