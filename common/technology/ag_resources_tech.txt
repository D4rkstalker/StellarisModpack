
tech_ag_living_metal_forge = {
	area = engineering
	start_tech = no
	cost = @ag_tech_cost_1_1
	is_rare = yes
	tier = 5
	category = { industry }
	# prerequisites = { tech_mine_living_metal }
	
	weight = 1

	weight_modifier = {
		modifier = {
			factor = 0
			resource_stockpile_compare = {
				resource = sr_living_metal
				value < 200.0
			}
		}
		modifier = {
			factor = 5
			has_technology = tech_mine_living_metal
		}
		modifier = {
			factor = 2
			any_planet_within_border = {
				has_building = ag_living_metal_forge
			}
		}
		modifier = {
			factor = 1.5
			has_ascension_perk = ap_technological_ascendancy
		}
	}
	
	ai_weight = {
		factor = 1000
	}
}
tech_ag_living_metal_forge_advanced = {
	area = engineering
	start_tech = no
	cost = @ag_tech_cost_1_2
	is_rare = yes
	tier = 5
	category = { industry }
	prerequisites = { tech_ag_living_metal_forge }

	modifier = { planet_jobs_sr_living_metal_produces_mult = 0.20 }
	
	weight = 1

	weight_modifier = {
		modifier = {
			factor = 0
			resource_stockpile_compare = {
				resource = sr_living_metal
				value < 10000.0
			}
		}
		modifier = {
			factor = 1.25
			OR = {
				has_edict = ag_living_metal_subsidies
				has_edict = ag_living_metal_subsidies_gestalt
			}
		}
		modifier = {
			factor = 1.5
			has_ascension_perk = ap_technological_ascendancy
		}
	}
	
	ai_weight = {
		factor = 1000
	}
}
tech_ag_nanites_assembly_plant = {
	area = engineering
	start_tech = no
	cost = @ag_tech_cost_1_1
	is_rare = yes
	tier = 5
	category = { industry }
	# prerequisites = { tech_nanite_transmutation }
	
	weight = 1

	weight_modifier = {
		modifier = {
			factor = 0
			resource_stockpile_compare = {
				resource = nanites
				value < 200.0
			}
		}
		modifier = {
			factor = 5
			has_technology = tech_nanite_transmutation
		}
		modifier = {
			factor = 2
			any_planet_within_border = {
				has_building = ag_nanites_assembly_plant
			}
		}
		modifier = {
			factor = 1.5
			has_ascension_perk = ap_technological_ascendancy
		}
	}
	
	ai_weight = {
		factor = 1000
	}
}
tech_ag_nanites_assembly_plant_advanced = {
	area = engineering
	start_tech = no
	cost = @ag_tech_cost_1_2
	is_rare = yes
	tier = 5
	category = { industry }
	prerequisites = { tech_ag_nanites_assembly_plant }

	modifier = { planet_jobs_nanites_produces_mult = 0.20 }
	
	weight = 1

	weight_modifier = {
		modifier = {
			factor = 0
			resource_stockpile_compare = {
				resource = nanites
				value < 10000.0
			}
		}
		modifier = {
			factor = 1.25
			OR = {
				has_edict = ag_nanites_subsidies
				has_edict = ag_nanites_subsidies_gestalt
			}
		}
		modifier = {
			factor = 1.5
			has_ascension_perk = ap_technological_ascendancy
		}
	}
	
	ai_weight = {
		factor = 1000
	}
}
tech_ag_dark_matter_plant = {
	area = engineering
	start_tech = no
	cost = @ag_tech_cost_1_2
	is_rare = yes
	tier = 5
	category = { industry }
	# prerequisites = { tech_mine_dark_matter }
	
	weight = 1

	weight_modifier = {
		modifier = {
			factor = 0
			resource_stockpile_compare = {
				resource = sr_dark_matter
				value < 200.0
			}
		}
		modifier = {
			factor = 5
			has_technology = tech_mine_dark_matter
		}
		modifier = {
			factor = 1.25
			any_planet_within_border = {
				has_building = ag_dark_matter_plant
			}
		}
		modifier = {
			factor = 1.5
			has_ascension_perk = ap_technological_ascendancy
		}
	}
	
	ai_weight = {
		factor = 1000
	}
}
tech_ag_dark_matter_plant_advanced = {
	area = engineering
	start_tech = no
	cost = @ag_tech_cost_1_3
	is_rare = yes
	tier = 5
	category = { industry }
	prerequisites = { tech_ag_dark_matter_plant }

	modifier = { planet_jobs_sr_dark_matter_produces_mult = 0.20 }
	
	weight = 1

	weight_modifier = {
		modifier = {
			factor = 0
			resource_stockpile_compare = {
				resource = sr_dark_matter
				value < 10000.0
			}
		}
		modifier = {
			factor = 1.25
			OR = {
				has_edict = ag_dark_matter_subsidies
				has_edict = ag_dark_matter_subsidies_gestalt
			}
		}
		modifier = {
			factor = 1.5
			has_ascension_perk = ap_technological_ascendancy
		}
	}
	
	ai_weight = {
		factor = 1000
	}
}
tech_ag_zro_refinery = {
	area = engineering
	start_tech = no
	cost = @ag_tech_cost_1_3
	is_rare = yes
	tier = 5
	category = { industry }
	prerequisites = { tech_psionic_theory }
	
	weight = 1

	weight_modifier = {
		modifier = {
			factor = 0
			resource_stockpile_compare = {
				resource = sr_zro
				value < 500.0
			}
		}
		modifier = {
			factor = 5
			has_technology = tech_mine_zro
		}
		modifier = {
			factor = 1.25
			any_planet_within_border = {
				has_building = ag_zro_refinery
			}
		}
		modifier = {
			factor = 1.5
			has_ascension_perk = ap_technological_ascendancy
		}
	}
	
	ai_weight = {
		factor = 1000
	}
}
tech_ag_zro_refinery_advanced = {
	area = engineering
	start_tech = no
	cost = @ag_tech_cost_1_4
	is_rare = yes
	tier = 5
	category = { industry }
	prerequisites = { tech_ag_zro_refinery }

	modifier = { planet_jobs_sr_zro_produces_mult = 0.20 }
	
	weight = 1

	weight_modifier = {
		modifier = {
			factor = 0
			resource_stockpile_compare = {
				resource = sr_zro
				value < 10000.0
			}
		}
		modifier = {
			factor = 1.25
			OR = {
				has_edict = ag_zro_subsidies
				has_edict = ag_zro_subsidies_gestalt
			}
		}
		modifier = {
			factor = 1.5
			has_ascension_perk = ap_technological_ascendancy
		}
	}
	
	ai_weight = {
		factor = 1000
	}
}
tech_ag_living_metal_mining_station = {
	area = engineering
	start_tech = no
	cost = @tier5cost1
	is_rare = no
	tier = 5
	category = { materials }
	prerequisites = { "tech_mine_living_metal" }

	weight = 20
	
	weight_modifier = {
		modifier = {
			factor = 0.20
			NOR = {
				has_trait_in_council = { TRAIT = leader_trait_maniacal }
				has_trait_in_council = { TRAIT = leader_trait_maniacal_2 }
				has_trait_in_council = { TRAIT = leader_trait_maniacal_3 }
				has_trait_in_council = { TRAIT = leader_trait_spark_of_genius }
				has_trait_in_council = { TRAIT = leader_trait_spark_of_genius_2 }
				has_trait_in_council = { TRAIT = leader_trait_curator }
				has_trait_in_council = { TRAIT = leader_trait_expertise_industry }
			}
		}
		modifier = {
			factor = 0
			NOT = {
				any_owned_planet = {
					OR = {
						has_deposit = ag_living_metal_spring
						has_deposit = ag_living_metal_lake
					}
				}				
				any_planet_within_border = {
					OR = {
						has_deposit = ag_living_metal_spring
						has_deposit = ag_living_metal_lake
					}
				}	
			}
		}
	}
}
tech_ag_nanites_mining_station = {
	area = engineering
	start_tech = no
	cost = @tier5cost1
	is_rare = no
	tier = 5
	category = { materials }

	weight = 20
	
	weight_modifier = {
		modifier = {
			factor = 0.20
			NOR = {
				has_trait_in_council = { TRAIT = leader_trait_maniacal }
				has_trait_in_council = { TRAIT = leader_trait_maniacal_2 }
				has_trait_in_council = { TRAIT = leader_trait_maniacal_3 }
				has_trait_in_council = { TRAIT = leader_trait_spark_of_genius }
				has_trait_in_council = { TRAIT = leader_trait_spark_of_genius_2 }
				has_trait_in_council = { TRAIT = leader_trait_curator }
				has_trait_in_council = { TRAIT = leader_trait_expertise_industry }
			}
		}
		modifier = {
			factor = 0
			NOT = {
				any_owned_planet = {
					OR = {
						has_deposit = ag_nanites_caverns
						has_deposit = ag_nanites_desert
					}
				}				
				any_planet_within_border = {
					OR = {
						has_deposit = ag_nanites_caverns
						has_deposit = ag_nanites_desert
					}
				}	
			}
		}
	}	
}
tech_ag_dark_matter_mining_station = {
	area = engineering
	start_tech = no
	cost = @tier5cost1
	is_rare = no
	tier = 5
	category = { materials }
	prerequisites = { "tech_mine_dark_matter" }

	weight = 20
	
	weight_modifier = {
		modifier = {
			factor = 0.20
			NOR = {
				has_trait_in_council = { TRAIT = leader_trait_maniacal }
				has_trait_in_council = { TRAIT = leader_trait_maniacal_2 }
				has_trait_in_council = { TRAIT = leader_trait_maniacal_3 }
				has_trait_in_council = { TRAIT = leader_trait_spark_of_genius }
				has_trait_in_council = { TRAIT = leader_trait_spark_of_genius_2 }
				has_trait_in_council = { TRAIT = leader_trait_curator }
				has_trait_in_council = { TRAIT = leader_trait_expertise_industry }
			}
		}
		modifier = {
			factor = 0
			NOT = {
				any_owned_planet = {
					OR = {
						has_deposit = ag_dark_matter_crater
						has_deposit = ag_dark_matter_source
					}
				}				
				any_planet_within_border = {
					OR = {
						has_deposit = ag_dark_matter_crater
						has_deposit = ag_dark_matter_source
					}
				}	
			}
		}
	}	
}

tech_ag_sr_production_center = {
	area = engineering
	start_tech = no
	cost = @ag_tech_cost_1_4
	is_rare = yes
	tier = 5
	category = { industry }
	prerequisites = { "tech_global_production_strategy" "tech_ag_living_metal_forge_advanced" "tech_ag_nanites_assembly_plant_advanced" "tech_ag_dark_matter_plant_advanced" "tech_ag_zro_refinery_advanced" }

	weight = 1

	weight_modifier = {
		modifier = {
			factor = 0
			OR = {
				resource_stockpile_compare = { resource = sr_living_metal value < 10000.0 }
				resource_stockpile_compare = { resource = nanites value < 10000.0 }
				resource_stockpile_compare = { resource = sr_dark_matter value < 10000.0 }
				resource_stockpile_compare = { resource = sr_zro value < 10000.0 }
			}
		}
		modifier = {
			factor = 1.25
			OR = {
				has_edict = ag_living_metal_subsidies
				has_edict = ag_living_metal_subsidies_gestalt
				has_edict = ag_nanites_subsidies
				has_edict = ag_nanites_subsidies_gestalt
				has_edict = ag_dark_matter_subsidies
				has_edict = ag_dark_matter_subsidies_gestalt
				has_edict = ag_zro_subsidies
				has_edict = ag_zro_subsidies_gestalt
			}
		}
		modifier = {
			factor = 1.5
			has_ascension_perk = ap_technological_ascendancy
		}
	}

	ai_weight = { factor = 1000 }
}

tech_ag_adv_chemical_plant = {
	area = engineering
	start_tech = no
	cost = @ag_tech_cost_1_2
	is_rare = yes
	tier = 5
	category = { materials }
	prerequisites = { "tech_volatile_motes" }
	is_reverse_engineerable = no
	weight = 1
	weight_modifier = { modifier = {
		factor = 0
		NOT = { any_owned_planet = { has_building = ag_adv_chemical_plant } }
	} }
	ai_weight = { factor = 1000 }
}
tech_ag_adv_gas_refinery = {
	area = engineering
	start_tech = no
	cost = @ag_tech_cost_1_2
	is_rare = yes
	tier = 5
	category = { materials }
	prerequisites = { "tech_exotic_gases" }
	is_reverse_engineerable = no
	weight = 1
	weight_modifier = { modifier = {
		factor = 0
		NOT = { any_owned_planet = { has_building = ag_adv_gas_refinery } }
	} }
	ai_weight = { factor = 1000 }
}
tech_ag_adv_crystal_plant = {
	area = engineering
	start_tech = no
	cost = @ag_tech_cost_1_2
	is_rare = yes
	tier = 5
	category = { materials }
	prerequisites = { "tech_rare_crystals" }
	is_reverse_engineerable = no
	weight = 1
	weight_modifier = { modifier = {
		factor = 0
		NOT = { any_owned_planet = { has_building = ag_adv_crystal_plant } }
	} }
	ai_weight = { factor = 1000 }
}

tech_ag_advanced_resource_arcology_project = {
	area = engineering
	start_tech = no
	cost = @ag_tech_cost_1_3
	is_rare = yes
	tier = 5
	category = { industry }
	
	prereqfor_desc = {
		custom = {
			title = "tech_ag_advanced_resource_arcology_project_custom"
			desc = "tech_ag_advanced_resource_arcology_project_custom_desc"
		}
	}
	
	weight = 1
	weight_modifier = {
		modifier = {
			factor = 0
			NAND = {
				has_technology = tech_alloys_2
				has_technology = tech_advanced_metallurgy_2
				has_technology = tech_luxuries_2
				has_technology = tech_consumer_good_refinement_2
				has_technology = tech_ag_living_metal_forge_advanced
				has_technology = tech_ag_nanites_assembly_plant_advanced
				has_technology = tech_ag_dark_matter_plant_advanced
				OR = {
					has_ascension_perk = ap_arcology_project
					any_owned_planet = { is_planet_class = pc_city }
				}
			}
		}
		modifier = {
			factor = 1.5
			has_ascension_perk = ap_technological_ascendancy
		}
	}
	
	ai_weight = { factor = 1000 }
}
