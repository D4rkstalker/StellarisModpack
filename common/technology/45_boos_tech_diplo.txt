# Mod by Terak_Lapis
# All Weight Trees custom by Terak_Lapis

tech_diplo_boost_1 = { #10% Diplo
	cost = @tier4cost1
	area = society
	tier = 4
	category = { statecraft	}
	prerequisites = { "tech_xeno_relations" }
	potential = {
		is_regular_empire = yes
		#is_galactic_community_member = yes # Only availible to Members
	}

	modifier = {
		diplo_weight_mult = 0.1 # 10% Diplo Weight as an Bonus
	}

	weight_modifier = { # From xeno relations - vanilla - should be balanced
		factor = 2
		modifier = {
			factor = 1.25
			research_leader = {
				area = society
				has_trait = "leader_trait_expertise_statecraft"
			}
		}
		modifier = {
			factor = 1.25
			has_ethic = ethic_xenophile
		}
		modifier = {
			factor = 2
			has_ethic = ethic_fanatic_xenophile
		}
		modifier = {
			factor = 2
			is_galactic_community_member = yes
		}
		modifier = {
			factor = 0.01
			has_civic = civic_inwards_perfection
		}
	}

	ai_weight = {
		factor = 2
		modifier = {
			factor = 1.25
			research_leader = {
				area = society
				has_trait = "leader_trait_expertise_statecraft"
			}
		}
		modifier = {
			factor = 1.25
			has_ethic = ethic_xenophile
		}
		modifier = {
			factor = 2
			has_ethic = ethic_fanatic_xenophile
		}
		modifier = {
			factor = 0.01
			has_civic = civic_inwards_perfection
		}
		modifier = {
			factor = 4.5
			is_part_of_galactic_council = yes # They will need all the Influence they can get
		}
	}


}

tech_diplo_boost_2 = { # 20 % +1 Env
	cost = @tier5cost1
	area = society
	tier = 5
	category = { statecraft	}
	prerequisites = { "tech_xeno_relations" "tech_diplo_boost_1" }
	potential = {
		is_regular_empire = yes
		#is_galactic_community_member = yes # Only availible to Members
	} # Mod by Terak_Lapis

	modifier = {
		diplo_weight_mult = 0.2 # 20% Diplo Weight as an Bonus
		envoys_add = 1 
	}

	weight_modifier = { # From xeno relations - vanilla - should be balanced
		factor = 2
		modifier = {
			factor = 1.25
			research_leader = {
				area = society
				has_trait = "leader_trait_expertise_statecraft"
			}
		}
		modifier = {
			factor = 1.25
			has_ethic = ethic_xenophile
		}
		modifier = {
			factor = 2
			has_ethic = ethic_fanatic_xenophile
		}
		modifier = {
			factor = 2
			is_galactic_community_member = yes
		}
		modifier = {
			factor = 0.01
			has_civic = civic_inwards_perfection
		}
	}

	ai_weight = {
		factor = 3
		modifier = {
			factor = 1.25
			research_leader = {
				area = society
				has_trait = "leader_trait_expertise_statecraft"
			}
		}
		modifier = {
			factor = 1.25
			has_ethic = ethic_xenophile
		}
		modifier = {
			factor = 2
			has_ethic = ethic_fanatic_xenophile
		}
		modifier = {
			factor = 0.01
			has_civic = civic_inwards_perfection
		}
		modifier = {
			factor = 4.5
			is_part_of_galactic_council = yes # They will need all the Influence they can get
		}
	}


}

tech_diplo_boost_3 = { # 20 % +1 Env
	cost = @tier5cost1
	area = society
	tier = 5
	category = {	statecraft		}
	prerequisites = { "tech_diplo_boost_2" }
	potential = {
		is_regular_empire = yes
		#is_galactic_community_member = yes # Only availible to Members
	} # Mod by Terak_Lapis

	modifier = {
		diplo_weight_mult = 0.2 # 20% Diplo Weight as an Bonus
		envoys_add = 1 
	}

	weight_modifier = { # From xeno relations - vanilla - should be balanced
		factor = 2
		modifier = {
			factor = 1.25
			research_leader = {
				area = society
				has_trait = "leader_trait_expertise_statecraft"
			}
		}
		modifier = {
			factor = 1.25
			has_ethic = ethic_xenophile
		}
		modifier = {
			factor = 2
			has_ethic = ethic_fanatic_xenophile
		}
		modifier = {
			factor = 2
			is_galactic_community_member = yes
		}
		modifier = {
			factor = 0.01
			has_civic = civic_inwards_perfection
		}
	}

	ai_weight = {
		factor = 3
		modifier = {
			factor = 1.25
			research_leader = {
				area = society
				has_trait = "leader_trait_expertise_statecraft"
			}
		}
		modifier = {
			factor = 1.25
			has_ethic = ethic_xenophile
		}
		modifier = {
			factor = 2
			has_ethic = ethic_fanatic_xenophile
		}
		modifier = {
			factor = 0.01
			has_civic = civic_inwards_perfection
		}
		modifier = {
			factor = 4.5
			is_part_of_galactic_council = yes # They will need all the Influence they can get
		}
	}


}

tech_envoy_school_1 = {
	cost = @tier3cost1
	area = society
	tier = 3
	category = {
		statecraft
	}
	prerequisites = { }
	potential = {
		is_regular_empire = yes
		is_hive_empire = no
		is_machine_empire = no
		is_fallen_empire = no
	}

	modifier = {		
	}

	ai_weight = {
		factor = 3
		modifier = {
			factor = 1.25
			research_leader = {
				area = society
				has_trait = "leader_trait_expertise_statecraft"
			}
		}
		modifier = {
			factor = 1.25
			has_ethic = ethic_xenophile
		}
		modifier = {
			factor = 2
			has_ethic = ethic_fanatic_xenophile
		}
		modifier = {
			factor = 0.01
			has_civic = civic_inwards_perfection
		}
		modifier = {
			factor = 4.5
			is_part_of_galactic_council = yes # They will need all the Influence they can get
		}
		modifier = {
			factor = 3
			any_neighbor_country = {
				count >= 2
				is_country_type = default
				is_subject = no
				is_fallen_empire = no
				is_country_type_with_subjects = yes
				prev = {
					relative_power = {
						who = prev
						value < superior
						category = all
					}
				}
			}
		}
		
		
	}
}

tech_envoy_school_2 = {
	cost = @tier3cost2
	area = society
	tier = 3
	category = {
		statecraft
	}
	prerequisites = { tech_envoy_school_1 }
	potential = {
		is_regular_empire = yes
		is_hive_empire = no
		is_machine_empire = no
		is_fallen_empire = no
		has_technology = tech_envoy_school_1
	}


	modifier = {
		diplo_weight_pops_mult = 0.2
	}

	ai_weight = {
		factor = 3
		modifier = {
			factor = 1.25
			research_leader = {
				area = society
				has_trait = "leader_trait_expertise_statecraft"
			}
		}
		modifier = {
			factor = 1.25
			has_ethic = ethic_xenophile
		}
		modifier = {
			factor = 2
			has_ethic = ethic_fanatic_xenophile
		}
		modifier = {
			factor = 0.01
			has_civic = civic_inwards_perfection
		}
		modifier = {
			factor = 4.5
			is_part_of_galactic_council = yes # They will need all the Influence they can get
		}
		modifier = {
			factor = 3
			any_neighbor_country = {
				count >= 2
				is_country_type = default
				is_subject = no
				is_fallen_empire = no
				is_country_type_with_subjects = yes
				prev = {
					relative_power = {
						who = prev
						value < superior
						category = all
					}
				}
			}
		}
		
		
	}
}

tech_envoy_school_3 = { 
	cost = @tier5cost2
	area = society
	tier = 5
	category = {
		statecraft
	}
	prerequisites = { tech_envoy_school_1 }
	potential = {
		is_regular_empire = yes
		is_hive_empire = no
		is_machine_empire = no
		is_fallen_empire = no
		has_technology = tech_envoy_school_2
	}


	modifier = {
		diplo_weight_pops_mult = 0.1
		diplo_weight_mult = 0.2
		country_influence_produces_add = 2
		envoys_add = 1
	}

	ai_weight = {
		factor = 3
		modifier = {
			factor = 1.25
			research_leader = {
				area = society
				has_trait = "leader_trait_expertise_statecraft"
			}
		}
		modifier = {
			factor = 1.25
			has_ethic = ethic_xenophile
		}
		modifier = {
			factor = 2
			has_ethic = ethic_fanatic_xenophile
		}
		modifier = {
			factor = 0.01
			has_civic = civic_inwards_perfection
		}
		modifier = {
			factor = 4.5
			is_part_of_galactic_council = yes # They will need all the Influence they can get
		}
		modifier = {
			factor = 3
			any_neighbor_country = {
				count >= 2
				is_country_type = default
				is_subject = no
				is_fallen_empire = no
				is_country_type_with_subjects = yes
				prev = {
					relative_power = {
						who = prev
						value < superior
						category = all
					}
				}
			}
		}
		
		
	}
}

tech_diplo_drugs_exploit = { # Mind altering Drugs
	cost = @tier4cost2
	area = engineering
	category = { materials }
	tier = 4
	potential = {
	   #has_origin = origin_churl
		always = yes
	}

	modifier = {
	}
	ai_weight = {
		weight = 20
		modifier = {
			factor = 30
			research_leader = {
				area = engineering
				has_trait = "leader_trait_expertise_materials"
			}
		}
		modifier = {
			factor = 0.1
			is_hive_empire = yes
			is_machine_empire = yes
		}
		modifier = {
			factor = 10
			is_country_type = default
		}
		modifier = {
			factor = 0.01
			is_fallen_empire = yes
		}
		modifier = {
			factor = 30
			OR = {
				has_origin = origin_churl
				has_origin = origin_fortdiplo
				has_origin = origin_diploboost
			}
		}
		modifier = {
			factor = 10
			OR = {
				has_ascension_perk = ap_churl
				has_ascension_perk = ap_one_vision
				has_ascension_perk = ap_diploboost
			}
		}
		modifier = {
			factor = 0.01
			is_egalitarian = yes
			has_ethic = ethic_fanatic_egalitarian
			has_ethic = ethic_egalitarian 
		}
		modifier = {
			factor = 100
			has_policy_flag = free_usage
		}
	}


}

tech_diplodrugs_synt = { # farm Diplodrugs yourself
	area = engineering
	category = {
		materials
	}
	cost = @tier4cost2
	tier = 4
	weight = @tier4weight1

	modifier = { 
	#	mod_diplodrugs_produces_mult = 0.2 
	}

	prerequisites = { tech_diplo_drugs_exploit }
}
 
tech_diplodrugs_synt_2 = {
	area = engineering
	category = {
		materials
	}
	cost = @tier4cost2
	tier = 4
	weight = @tier4weight1
	modifier = {
		pop_growth_speed = 0.2
	}

	prerequisites = { tech_diplodrugs_synt }

	ai_weight = {
		weight = 20
		modifier = {
			factor = 30
			research_leader = {
				area = engineering
				has_trait = "leader_trait_expertise_materials"
			}
		}
		modifier = {
			factor = 0.1
			is_hive_empire = yes
			is_machine_empire = yes
		}
		modifier = {
			factor = 10
			is_country_type = default
		}
		modifier = {
			factor = 0.01
			is_fallen_empire = yes
		}
		modifier = {
			factor = 30
			OR = {
				has_origin = origin_churl
				has_origin = origin_fortdiplo
				has_origin = origin_diploboost
			}
		}
		modifier = {
			factor = 10
			OR = {
				has_ascension_perk = ap_churl
				has_ascension_perk = ap_one_vision
				has_ascension_perk = ap_diploboost
			}
		}
		modifier = {
			factor = 0.01
			is_egalitarian = yes
			has_ethic = ethic_fanatic_egalitarian
			has_ethic = ethic_egalitarian 
		}
		modifier = {
			factor = 100
			has_policy_flag = free_usage
		}
	}
}

tech_diplodrugs_synt_3 = {
	area = engineering
	category = {
		materials
	}
	cost = @tier4cost2
	tier = 4
	weight = @tier4weight1
	modifier = {
		pop_growth_speed = 0.2
	}

	prerequisites = { tech_diplodrugs_synt_2 }

	ai_weight = {
		weight = 20
		modifier = {
			factor = 30
			research_leader = {
				area = engineering
				has_trait = "leader_trait_expertise_materials"
			}
		}
		modifier = {
			factor = 0.1
			is_hive_empire = yes
			is_machine_empire = yes
		}
		modifier = {
			factor = 10
			is_country_type = default
		}
		modifier = {
			factor = 0.01
			is_fallen_empire = yes
		}
		modifier = {
			factor = 30
			OR = {
				has_origin = origin_churl
				has_origin = origin_fortdiplo
				has_origin = origin_diploboost
			}
		}
		modifier = {
			factor = 10
			OR = {
				has_ascension_perk = ap_churl
				has_ascension_perk = ap_one_vision
				has_ascension_perk = ap_diploboost
			}
		}
		modifier = {
			factor = 0.01
			is_egalitarian = yes
			has_ethic = ethic_fanatic_egalitarian
			has_ethic = ethic_egalitarian 
		}
		modifier = {
			factor = 100
			has_policy_flag = free_usage
		}
	}
}

tech_force_applyed = {
	area = physics
	category = { particles }
	cost = @tier5cost2 # Mod by Terak_Lapis
	tier = 5
	weight = @tier5weight2
	is_rare = yes

	modifier = {
		country_unity_produces_add = 2
	}
	ai_weight = {
		weight = 20
		modifier = {
			factor = 30
			research_leader = {
				area = physics
				has_trait = "leader_trait_expertise_particles"
			}
		}
		modifier = {
			factor = 0.1
			is_hive_empire = yes
			is_machine_empire = yes
		}
		modifier = {
			factor = 10
			is_country_type = default
		}
		modifier = {
			factor = 0.01
			is_fallen_empire = yes
		}
		modifier = {
			factor = 30
			OR = {
				has_origin = origin_churl
				has_origin = origin_fortdiplo
				has_origin = origin_diploboost
			}
		}
		modifier = {
			factor = 10
			OR = {
				has_ascension_perk = ap_churl
				has_ascension_perk = ap_one_vision
				has_ascension_perk = ap_diploboost
				has_ascension_perk = ap_galactic_contender
				has_ascension_perk = ap_galactic_force_projection
			}
		}
		modifier = {
			factor = 3
			is_spiritualist  = yes
			#has_ethic = ethic_fanatic_egalitarian
			#has_ethic = ethic_egalitarian 
		}
	}

}


# V 0.9
tech_plasma_power = { # Gateway Tech for Peace Keeper Stuff
	area = physics
	category = { field_manipulation }
	cost = @tier5cost2
	tier = 5
	weight = @tier5weight2
	is_rare = yes
	is_reverse_engineerable = no
	is_dangerous = yes

	modifier = { } # Maybe Phys Research - up to test

	ai_weight = { # Custom Tree by Terak_Lapis
		weight = 50
		modifier = {
			is_country_type = fallen_empire # NO FALLEN WANTS THIS LOW TIER; THEY HAVE DM STUFF
			is_country_type = awakened_fallen_empire # DONT GET TO PLAY WITH THIS ONE
			is_country_type = awakened_marauders # STILL NOT THEIR PLAYGROUND
			is_spiritualist = yes
			NOT = {
				has_ascension_perk = ap_defender_of_the_galaxy
			}
			weight = 0
		}
		modifier = {
			research_leader = { # THEY KONW THEIR STUFF
				area = physics
				has_trait = leader_trait_expertise_field_manipulation
			}
			weight = 10
		}
		modifier = {
			any_neighbor_country = { # IF THEY HAVE IT WE WANT IT TOO!!
				has_communications = root 
				has_technology = tech_plasma_power
				has_research_agreement = root 
				has_tech_option = tech_plasma_power
			}
			weight = 60
		}
	}
}

tech_peace_keeper_tech = { #Gateway Tech for all Peace Keeper Techs
	area = engineering
	category = { peace_keeper }
	cost = 50000
	tier = 5
	weight = 0 # You can only aquire this through an Event
	is_reverse_engineerable = no
	is_rare = yes
	modifier = {
		ship_hull_add = 1875
		country_unity_produces_add = 5
	}

	ai_weight = { # You can only aquire this through an Event
		weight = 0
	}
}

tech_better_pe = { # Need AI Tree # Gotten from Enclave # Gateway 	Tech for advanced Peace Keeper Techs
	tier = 5
	weight = @tier5weight1
	cost = 35000
	category = {
		peace_keeper
	}
	area = engineering
	is_rare = yes
	prerequisites = {
		tech_peace_keeper_tech
		tech_vatican_base
		tech_peke_shield_t1
		tech_peke_jdrive
		tech_force_applyed
		tech_battleships
		tech_mega_engineering
		tech_peke_armor
		tech_plasma_power
	}
	is_reverse_engineerable = no
	ai_weight = {
		weight = 0
	}
}

tech_peke_laser_tier1 = {
	tier = 5
	category = { peace_keeper }
	cost = @tier5cost3
	weight = @tier5weight2
	area = physics
	is_reverse_engineerable = no

	prerequisites = {
		tech_peace_keeper_tech
		tech_plasma_power
		tech_battleships
		tech_lasers_5
		tech_diplodrugs_synt_2
	}

	ai_weight = { # Custom Weight Tree by Terak_Lapis
		weight = 0
		modifier = {
			any_neighbor_country = {
				has_communications = root 
				NOT = {	is_subject = yes }
				OR = {
					has_technology = tech_peace_keeper_tech
					has_tech_option = tech_peace_keeper_tech
				}
			}
			weight = 30
		}
		modifier = {
			is_brutal_empire = yes
			weight = 0 # They dont want to protect anybody
		}
		modifier = {
			AND = {
				has_global_flag = war_in_heaven_ongoing
				NOT = { is_subject = yes }
			}
			weight = 9999 # Need to protect against the fallen
		}
		modifier = {
			is_fallen_empire = yes
			weight = 0
		}
		modifier = {
			any_neighbor_country = {
				OR= { # Need to protect ourselves
					has_communications = root
					has_policy_flag = diplo_stance_supremacist
					has_policy_flag = diplo_stance_belligerent
					has_policy_flag = diplo_stance_churl
					has_policy_flag = diplo_stance_extermination
					has_policy_flag = diplo_stance_hunger
					is_arrogant_to = root  
				}
			}
			weight = 60
		}
		modifier = {
			any_neighbor_country = {
				is_loyal_to = root
			}
			weight = 40
		}
		modifier = {
			has_civic = civic_distinguished_admiralty
			weight = 10
		}
		modifier = {
			has_authority = auth_hive_mind
			has_authority = auth_machine_intelligence
			weight = 2
		}
	}

}

tech_peke_laser_tier2 = {
	tier = 5
	category = { peace_keeper }
	cost = 10000
	weight = @tier5weight2
	area = physics
	is_rare = yes
	is_reverse_engineerable = no

	prerequisites = {
		tech_envoy_school_3
		tech_force_applyed
		tech_peke_laser_tier1
	}

	modifier = {
		country_diplodrugs_produces_mult = 0.05
	}

	ai_weight = { # Custom Weight Tree by Terak_Lapis
		weight = 0
		modifier = {
			any_neighbor_country = {
				has_communications = root 
				NOT = {	is_subject = yes }
				OR = {
					has_technology = tech_peace_keeper_tech
					has_tech_option = tech_peace_keeper_tech
				}
			}
			weight = 30
		}
		modifier = {
			is_brutal_empire = yes
			weight = 0 # They dont want to protect anybody
		}
		modifier = {
			AND = {
				has_global_flag = war_in_heaven_ongoing
				NOT = { is_subject = yes }
			}
			weight = 9999 # Need to protect against the fallen
		}
		modifier = {
			is_fallen_empire = yes
			weight = 0
		}
		modifier = {
			any_neighbor_country = {
				OR= { # Need to protect ourselves
					has_communications = root
					has_policy_flag = diplo_stance_supremacist
					has_policy_flag = diplo_stance_belligerent
					has_policy_flag = diplo_stance_churl
					has_policy_flag = diplo_stance_extermination
					has_policy_flag = diplo_stance_hunger
					is_arrogant_to = root  
				}
			}
			weight = 60
		}
		modifier = {
			any_neighbor_country = {
				is_loyal_to = root
			}
			weight = 40
		}
		modifier = {
			has_civic = civic_distinguished_admiralty
			weight = 10
		}
		modifier = {
			has_authority = auth_hive_mind
			has_authority = auth_machine_intelligence
			weight = 2
		}
		modifier = {
			OR = {
				resource_income_compare = {
					resource = diploforce
					value = 4
				}
				resource_stockpile_compare = {
					resource = diploforce
					value = 200
				}
			}
			weight = 40
		}
		modifier = {
			any_neighbor_country = {
				has_communications = root 
				has_research_agreement = root 
				has_technology = tech_peke_laser_tier1
			}
			weight = 30
		}
		modifier = {
			any_neighbor_country = {
				relative_power = {
					who = root
					value = superior # We need to defend ourself and our dominion
				}
			}
			weight = 100
		}
		modifier = {
			any_neighbor_country = {
				is_subject_type = dominion
				has_established_contact = root 
			}
			weight = 300
		}
	}
}

tech_peke_armor = {
	tier = 5
	category = { peace_keeper }
	area = engineering
	weight = @tier5weight2
	cost = @tier5cost3
	is_rare = yes
	is_reverse_engineerable = yes
	prerequisites = {
		tech_peace_keeper_tech
		tech_ship_armor_5
		tech_plasma_power
		tech_diplodrugs_synt_3
	}
	ai_weight = { # Custom Weight Tree by Terak_Lapis
		weight = 0
		modifier = {
			any_neighbor_country = {
				has_communications = root 
				NOT = {	is_subject = yes }
				OR = {
					has_technology = tech_peace_keeper_tech
					has_tech_option = tech_peace_keeper_tech
				}
			}
			weight = 30
		}
		modifier = {
			is_brutal_empire = yes
			weight = 0 # They dont want to protect anybody
		}
		modifier = {
			AND = {
				has_global_flag = war_in_heaven_ongoing
				NOT = { is_subject = yes }
			}
			weight = 9999 # Need to protect against the fallen
		}
		modifier = {
			is_fallen_empire = yes
			weight = 0
		}
		modifier = {
			any_neighbor_country = {
				OR= { # Need to protect ourselves
					has_communications = root
					has_policy_flag = diplo_stance_supremacist
					has_policy_flag = diplo_stance_belligerent
					has_policy_flag = diplo_stance_churl
					has_policy_flag = diplo_stance_extermination
					has_policy_flag = diplo_stance_hunger
					is_arrogant_to = root  
				}
			}
			weight = 60
		}
		modifier = {
			any_neighbor_country = {
				is_loyal_to = root
			}
			weight = 40
		}
		modifier = {
			has_civic = civic_distinguished_admiralty
			weight = 10
		}
		modifier = {
			has_authority = auth_hive_mind
			has_authority = auth_machine_intelligence
			weight = 2
		}
		modifier = {
			OR = {
				resource_income_compare = {
					resource = diploforce
					value = 4
				}
				resource_stockpile_compare = {
					resource = diploforce
					value = 200
				}
			}
			weight = 40
		}
		modifier = {
			any_neighbor_country = {
				has_communications = root 
				has_research_agreement = root 
				has_technology = tech_peke_armor
			}
			weight = 30
		}
		modifier = {
			any_neighbor_country = {
				relative_power = {
					who = root
					value = superior # We need to defend ourself and our dominion
				}
			}
			weight = 100
		}
		modifier = {
			any_neighbor_country = {
				is_subject_type = dominion
				has_established_contact = root 
			}
			weight = 300
		}
	}
}

tech_peke_armor_2 = {
	tier = 5
	category = { peace_keeper }
	area = engineering
	weight = @tier5weight2
	cost = @tier5cost3
 	is_rare = yes
	is_reverse_engineerable = yes
	prerequisites = {
		tech_peace_keeper_tech
		tech_ship_armor_5
		tech_plasma_power
		tech_diplodrugs_synt_3
		tech_peke_armor
	}
	ai_weight = { # Custom Weight Tree by Terak_Lapis
		weight = 0
		modifier = {
			any_neighbor_country = {
				has_communications = root 
				NOT = {	is_subject = yes }
				OR = {
					has_technology = tech_peace_keeper_tech
					has_tech_option = tech_peace_keeper_tech
				}
			}
			weight = 30
		}
		modifier = {
			any_neighbor_country = {
				has_communications = root 
				has_origin = origin_churl
			}
			weight = 500
		}
		modifier = {
			is_brutal_empire = yes
			weight = 0 # They dont want to protect anybody
		}
		modifier = {
			AND = {
				has_global_flag = war_in_heaven_ongoing
				NOT = { is_subject = yes }
			}
			weight = 9999 # Need to protect against the fallen
		}
		modifier = {
			is_fallen_empire = yes
			weight = 0
		}
		modifier = {
			any_neighbor_country = {
				OR= { # Need to protect ourselves
					has_communications = root
					has_policy_flag = diplo_stance_supremacist
					has_policy_flag = diplo_stance_belligerent
					has_policy_flag = diplo_stance_churl
					has_policy_flag = diplo_stance_extermination
					has_policy_flag = diplo_stance_hunger
					is_arrogant_to = root  
				}
			}
			weight = 60
		}
		modifier = {
			any_neighbor_country = {
				is_loyal_to = root
			}
			weight = 40
		}
		modifier = {
			has_civic = civic_distinguished_admiralty
			weight = 10
		}
		modifier = {
			has_authority = auth_hive_mind
			has_authority = auth_machine_intelligence
			weight = 2
		}
		modifier = {
			OR = {
				resource_income_compare = {
					resource = diploforce
					value = 4
				}
				resource_stockpile_compare = {
					resource = diploforce
					value = 200
				}
			}
			weight = 40
		}
		modifier = {
			any_neighbor_country = {
				has_communications = root 
				has_research_agreement = root 
				has_technology = tech_peke_armor
			}
			weight = 30
		}
		modifier = {
			any_neighbor_country = {
				relative_power = {
					who = root
					value = superior # We need to defend ourself and our dominion
				}
			}
			weight = 100
		}
		modifier = {
			any_neighbor_country = {
				is_subject_type = dominion
				has_established_contact = root 
			}
			weight = 300
		}
	}
}

tech_peke_jdrive = {
	area = physics
	category = {
		peace_keeper
	}
	tier = 5
	cost = 15000
	weight = @tier5weight2
	prerequisites = {
		tech_peace_keeper_tech
		tech_jump_drive_1
		tech_force_applyed
	}
	ai_weight = {
		weight = 100
		modifier = {
			any_neighbor_country = {
				has_communications = root 
				has_technology = tech_peke_jdrive
			}
			weight = 300
		}
		modifier = {
			is_at_war = yes
			weight = 900
		}
		modifier = {
			any_neighbor_country = {
				has_communications = root 
				has_technology = tech_jump_drive_1
			}
			weight = 120
		}
		modifier = {
			end_game_years_passed >= 1
			weight = 9999
		}
		modifier = {
			any_neighbor_country = {
				relative_power = {
					who = THIS
					value = superior
				}
				has_communications = root 
			}
			weight = 50
		}
	}
}

tech_peke_sensor_t1 = {
	area = physics
	category = {
		peace_keeper
	}
	tier = 5
	cost = 13000
	weight = @tier5weight2
	prerequisites = {
		tech_peace_keeper_tech
		tech_sensors_4
		tech_interstellar_fleet_traditions
		tech_diplodrugs_synt_3
	}
	ai_weight = {
		weight = 25
		modifier = {
			OR = {
				has_megastructure = spy_orb_4
				has_megastructure = spy_orb_restored
			}
			weight = 0
		}
		modifier = {
			any_neighbor_country = {
				is_harming_relations_with = root # May be useful to be suspicios
				has_communications = root 
			}
			weight = 75
		}
	}
}

tech_peke_sensor_t2 = {
	area = physics
	category = {
		peace_keeper
	}
	tier = 5
	cost = 18000
	weight = @tier5weight2
	prerequisites = {
		tech_force_applyed
		tech_better_pe
		tech_peace_keeper_tech
		tech_peke_sensor_t1
	}
	ai_weight = {
		weight = 25
		modifier = {
			OR = {
				has_megastructure = spy_orb_4
				has_megastructure = spy_orb_restored
			}
			weight = 0
		}
		modifier = {
			any_neighbor_country = {
				is_harming_relations_with = root # May be useful to be suspicios
				has_communications = root 
			}
			weight = 75
		}
		modifier = {
			any_country = {
				has_technology = tech_peke_sensor_t1
			}
			weight = 30
		}
	}
}

tech_peke_shield_t1 = {
	area = physics
	category = {
		peace_keeper
	}
	cost = 14000
	weight = @tier5weight2
	tier = 5
	prerequisites = {
		tech_peace_keeper_tech 
		tech_shields_5 
		tech_shield_rechargers_1 
		tech_diplodrugs_synt_2 
	}
	ai_weight = { # Custom Weight Tree by Terak_Lapis
		weight = 45
		modifier = {
			OR = {
				has_technology = tech_dark_matter_deflector
				has_megastructure = strategic_coordination_center_3
				has_megastructure = strategic_coordination_center_restored
				has_ascension_perk = ap_eternal_vigilance
			}
			weight = 90
		}
		modifier = {
			has_technology = tech_psionic_barrier
			weight = 12
		}
		modifier = {
			is_overlord = yes
			weight = 100
		}
		modifier = {
			any_neighbor_country = {
				has_technology = tech_better_pe
			}
			weight = 500
		}
		modifier = {
			is_materialist = yes
			weight = 50
		}
		modifier = {
			is_pacifist = yes
			weight = 800
		}
		modifier = {
			galactic_community_rank >= 5
			weight = 70
		}
		modifier = {
			has_crisis = yes
			weight = 9999
		}
		modifier = {
			has_global_flag = war_in_heaven_ongoing
			weight = 5000
		}
	}
}

tech_peke_shield_t2 = {
	area = physics
	category = {
		peace_keeper
	}
	cost = 14000
	weight = @tier5weight2
	tier = 5
	prerequisites = {
		tech_force_applyed
		tech_better_pe
		tech_peace_keeper_tech
		tech_peke_shield_t1 
	}
	ai_weight = { # Custom Weight Tree by Terak_Lapis
		weight = 45
		modifier = {
			OR = {
				has_technology = tech_dark_matter_deflector
				has_megastructure = strategic_coordination_center_3
				has_megastructure = strategic_coordination_center_restored
				has_ascension_perk = ap_eternal_vigilance
			}
			weight = 90
		}
		modifier = {
			has_technology = tech_psionic_barrier
			weight = 12
		}
		modifier = {
			is_overlord = yes
			weight = 100
		}
		modifier = {
			any_neighbor_country = {
				has_technology = tech_better_pe
			}
			weight = 500
		}
		modifier = {
			is_materialist = yes
			weight = 50
		}
		modifier = {
			is_pacifist = yes
			weight = 800
		}
		modifier = {
			galactic_community_rank >= 5
			weight = 70
		}
		modifier = {
			has_crisis = yes
			weight = 9999
		}
		modifier = {
			has_global_flag = war_in_heaven_ongoing
			weight = 5000
		}
		modifier = {
			has_technology = tech_peke_shield_t1
			weight = 9999
		}
	}
}
# Test Tech
tech_test_ap_unlock = { # Only for Testing - shouldn´t show up normal
	area = society
	tier = 1
	cost = 1
	weight = 0
	category = {
		statecraft
	}
	is_dangerous = yes
	is_rare = yes

	modifier = {
		ascension_perks_add = 8
	}
}
# Planet Killers
tech_pk_brainsmelter = {
	area = society
	category = {
		military_theory
	}
	tier = 5
	cost = 25000
	weight = 15
	is_rare = yes
	is_dangerous = yes
	is_reverse_engineerable = no
	prerequisites = {
		tech_pk_cracker
		tech_pk_shielder
		tech_better_pe # Since this is ancient stuff
	}

	potential = {
		NOT = {
			has_ethic = ethic_gestalt_consciousness
		}
	}

	ai_weight = { # Custom Weight Tree by Terak_Lapis
		weight = 0
		modifier = {
			weight = 100
			is_brutal_empire = yes
		}
		modifier = {
			weight = 10
			is_authoritarian = yes
			has_ethic = ethic_xenophobe
		}
		modifier = {
			weight = 30
			is_authoritarian = yes
			has_ethic = ethic_fanatic_xenophobe
		}
		modifier = {
			weight = 0
			is_egalitarian = yes
			is_xenophile = yes
		}
		modifier = {
			weight = 0
			AND = {
				is_galactic_community_member = yes
				is_active_resolution = resolution_greatergood_workers_rights
			}
		}
		modifier = {
			weight = 0
			is_democracy = yes
		}
		modifier = {
			weight = 40
			OR = { 
				has_authority = auth_dictatorial
				has_authority = auth_imperial
			}
		}
	}

}
# PP
#Advanced Bureaucracy
tech_admin_cap_xtr_1 = {
	cost = @tier4cost1
	area = society
	tier = 4
	category = { statecraft }
	prerequisites = { "tech_galactic_bureaucracy" }
	weight = @tier4weight1

	modifier = {
		country_admin_cap_add = 40
	}
}
#Grown Bureaus
tech_admin_cap_xtr_2 = {
	cost = @tier4cost2
	area = society
	tier = 4
	category = { statecraft }
	prerequisites = { "tech_admin_cap_xtr_1" }
	weight = @tier4weight2

	modifier = {
		country_admin_cap_add = 50
		country_edict_cap_add = 1
	}
}
#Certificates for Food
tech_admin_cap_xtr_3 = {
	cost = @tier4cost3
	area = society
	tier = 4
	category = { statecraft }
	prerequisites = { "tech_admin_cap_xtr_2" }
	weight = @tier4weight3

	modifier = {
		country_admin_cap_add = 60
		country_edict_cap_add = 1
	}
}
#Herds of Nitpickers
tech_admin_cap_xtr_4 = {
	cost = @tier4cost3
	area = society
	tier = 4
	category = { statecraft }
	prerequisites = { "tech_admin_cap_xtr_3" }
	weight = @tier4weight3
	is_rare = yes

	modifier = {
		country_admin_cap_add = 100
		country_edict_cap_add = 2
		edict_length_mult = 1
		rare_edicts_cost_mult = -0.2
	}
}
#All Praise the Standart Form
tech_admin_cap_xtr_5 = {
	cost = @tier5cost1
	area = society
	tier = 5
	category = { statecraft }
	prerequisites = { "tech_admin_cap_xtr_4" }
	weight = @tier5weight1
	is_rare = yes
	is_dangerous = yes

	modifier = {
		country_admin_cap_add = 120
		country_edict_cap_add = 2
		edict_length_mult = 2
		country_base_influence_produces_add = 2
		pop_ethic_spiritualist_attraction_mult = 0.1
	}

}
#Paper Pope
tech_paper_pope = {
	cost = @tier4cost1
	area = society
	tier = 5
	category = { statecraft }
	prerequisites = { "tech_admin_cap_xtr_5" }
	weight = @tier5weight1
	is_dangerous = yes
	is_rare = yes

	## feature_flags = { paper_pope_active }

	modifier = { 
		pop_factions_influence_produces_add = 1 
		country_base_influence_produces_add = 3
		country_admin_cap_add = 100
		country_edict_cap_add = 1
		ascension_perks_add = 1
	}	
}
##Vatican Protocol - Military Paper Pope Troops
##Base VP - MPPT
tech_vatican_base = { # Gateway TECH
	cost = @tier5cost2
	area = society
	tier = 5
	category = { statecraft }
	prerequisites = { "tech_paper_pope" }
	weight = @tier5weight1
	is_rare = yes
	is_dangerous = yes

}
#Holy Paper Fleets
tech_vatican_fleet_1 = {
	cost = @tier5cost2
	area = society
	tier = 5
	category = { military_theory }
	prerequisites = { "tech_vatican_base" }
	weight = @tier5weight1
	is_rare = yes

	modifier = {
		country_naval_cap_add = 30
	}
}
##Greater Holy Fleets
tech_vatican_fleet_2 = {
	cost = @tier5cost2
	area = society
	tier = 5
	category = { military_theory }
	prerequisites = { "tech_vatican_fleet_1" }
	weight = @tier5weight1
	is_rare = yes

	modifier = {
		country_naval_cap_add = 50
	}
}
##Papery Power
tech_vatican_fleet_3 = {
	cost = @tier5cost2
	area = society
	tier = 5
	category = { military_theory }
	prerequisites = { "tech_vatican_fleet_2" }
	weight = @tier5weight1
	is_rare = yes

	modifier = {
		country_naval_cap_add = 50
		country_starbase_capacity_add = 8
	}
}
##Grand Papacy Military Program
tech_vatican_fleet_4 = {
	cost = @tier5cost2
	area = society
	tier = 5
	category = { military_theory }
	prerequisites = { "tech_vatican_fleet_3" }
	weight = @tier5weight1
	is_rare = yes
	is_dangerous = yes 

	modifier = {
		country_naval_cap_add = 100
		country_starbase_capacity_add = 20
		country_command_limit_add = 80
		country_occupation_armies_add = 8
	}
}
# Planetary Wall
tech_peke_shield_planetary = {
	area = engineering
	is_rare = yes
	category = {
		peace_keeper
	}
	cost = 25000
	weight = @tier5weight2
	tier = 5
	prerequisites = {
		tech_better_pe
		tech_peace_keeper_tech
		tech_peke_shield_t2
		tech_force_applyed
		tech_vatican_base
	}
	ai_weight = {
		weight = 0 # Since they arent allowed to build it anyway they shoulnd waste their research onto that 
	}
	modifier = {}# SCIS
}
tech_bureau_armies = {
	tier = 4
	area = society
	category = {
		military_theory
	}
	weight = @tier3weight1
	cost = @tier4cost1 
	is_rare = yes
	prerequisites = {
		tech_vatican_base
	}
	ai_weight = {
		weight = 25
		modifier = {
			has_relic = r_paper_pope
			weight = 1000
		}
	}
}
tech_peke_garnison = {
	tier = 5
	area = society
	category = {
		peace_keeper
	}
	weight = @tier5weight1
	cost = @tier5cost1
	prerequisites = {
		tech_vatican_base
		tech_peace_keeper_tech
		tech_diplo_drugs_exploit
		tech_force_applyed
	}
	modifier = {
		planet_army_build_speed_mult = 0.05
	}
	ai_weight = {
		weight = 25
		modifier = {
			OR = {
				has_origin = origin_peke_guard_player
				has_ascension_perk = ap_guardian_techt
				federation = {
					has_federation_type = peke_federation # Mod by Terak_Lapis
				}
			}
			weight = 100
		}
		modifier = {
			any_neighbor_country = {
				has_communications = root 
				has_ascension_perk = ap_colossus
			}
			weight = 0
		}
		modifier = {
			any_neighbor_country = {
				is_brutal_empire = yes
				has_communications = root 
			}
			weight = 300
		}
	}
}
tech_peke_afterburner_t1 = {
	area = engineering
	category = {
		peace_keeper
	}
	cost = 14000
	weight = @tier5weight2
	tier = 5
	prerequisites = {
		tech_peace_keeper_tech
		tech_afterburners_2
		tech_battleships
		tech_zero_point_power
		tech_advanced_metallurgy_2
		tech_physics_3
	}
	ai_weight = { # Custom Weigt Tree by Terak_Lapis
		weight = 15
		modifier = {
			any_neighbor_country = {
				has_communications = root 
				count_owned_ship = {
					count >= 15
				}
			}
			weight = 30
		}
		modifier = {
			any_neighbor_country = {
				has_communications = root 
				count_owned_ship = {
					count >= 20
				}
			}
			weight = 50
		}
		modifier = {
			any_neighbor_country = {
				has_communications = root 
				count_owned_ship = {
					count >= 30
				}
			}
			weight = 70
		}
		modifier = {
			any_neighbor_country = {
				has_communications = root 
				count_owned_ship = {
					count >= 100
				}
			}
			weight = 100
		}
		modifier = {
			has_technology = tech_better_pe
			weight = 100
		}
		modifier = {
			OR = {
				has_ascension_perk = ap_colossus
				has_technology = tech_juggernaut
				has_technology = tech_peke_jdrive
				has_technology = tech_titans
			}
			weight = 500
		}
		modifier = {
			has_policy_flag = economic_policy_military
			weight = 40
		}
		modifier = {
			any_neighbor_country = {
				has_communications = root 
				is_angry_to = root 
			}
			weight = 15
		}
	}
}
tech_peke_afterburner_t2 = {
	area = engineering
	category = {
		peace_keeper
	}
	cost = 16000
	weight = @tier5weight2
	tier = 5
	prerequisites = {
		tech_peke_afterburner_t1
		tech_peke_armor_2
		tech_better_pe
		tech_diplo_boost_3
		tech_force_applyed
	}
	ai_weight = { # Custom Weigt Tree by Terak_Lapis
		weight = 15
		modifier = {
			any_neighbor_country = {
				has_communications = root 
				count_owned_ship = {
					count >= 15
				}
			}
			weight = 30
		}
		modifier = {
			any_neighbor_country = {
				has_communications = root 
				count_owned_ship = {
					count >= 20
				}
			}
			weight = 50
		}
		modifier = {
			any_neighbor_country = {
				has_communications = root 
				count_owned_ship = {
					count >= 30
				}
			}
			weight = 70
		}
		modifier = {
			any_neighbor_country = {
				has_communications = root 
				count_owned_ship = {
					count >= 100
				}
			}
			weight = 100
		}
		modifier = {
			has_technology = tech_peke_afterburner_t1
			weight = 100
		}
		modifier = {
			OR = {
				has_ascension_perk = ap_colossus
				has_technology = tech_juggernaut
				has_technology = tech_peke_jdrive
				has_technology = tech_titans
			}
			weight = 500
		}
		modifier = {
			has_policy_flag = economic_policy_military
			weight = 40
		}
		modifier = {
			any_neighbor_country = {
				has_communications = root 
				is_angry_to = root 
			}
			weight = 15
		}
		modifier = {
			any_neighbor_country = {
				has_communications = root 
				relative_power = {
					who = THIS
					value = superior
				}
			}
			weight = 30
		}
	}
}
tech_mass_canon_peke_t1 = {
	tier = 5
	category = { peace_keeper }
	cost = @tier5cost3
	weight = @tier5weight2
	area = engineering
	is_reverse_engineerable = no
	is_rare = yes

	prerequisites = {
		tech_peace_keeper_tech
		tech_plasma_power
		tech_battleships
		tech_mass_drivers_5
		tech_kinetic_artillery_2
		tech_diplodrugs_synt_2
	}

	ai_weight = { # Custom Weight Tree by Terak_Lapis
		weight = 0
		modifier = {
			any_neighbor_country = {
				has_communications = root 
				NOT = {	is_subject = yes }
				OR = {
					has_technology = tech_peace_keeper_tech
					has_tech_option = tech_peace_keeper_tech
				}
			}
			weight = 30
		}
		modifier = {
			is_brutal_empire = yes
			weight = 0 # They dont want to protect anybody
		}
		modifier = {
			AND = {
				has_global_flag = war_in_heaven_ongoing
				NOT = { is_subject = yes }
			}
			weight = 9999 # Need to protect against the fallen
		}
		modifier = {
			is_fallen_empire = yes
			weight = 0
		}
		modifier = {
			any_neighbor_country = {
				OR= { # Need to protect ourselves
					has_communications = root
					has_policy_flag = diplo_stance_supremacist
					has_policy_flag = diplo_stance_belligerent
					has_policy_flag = diplo_stance_churl
					has_policy_flag = diplo_stance_extermination
					has_policy_flag = diplo_stance_hunger
					is_arrogant_to = root  
				}
			}
			weight = 60
		}
		modifier = {
			any_neighbor_country = {
				is_loyal_to = root
			}
			weight = 40
		}
		modifier = {
			has_civic = civic_distinguished_admiralty
			weight = 10
		}
		modifier = {
			has_authority = auth_hive_mind
			has_authority = auth_machine_intelligence
			weight = 2
		}
	}
}