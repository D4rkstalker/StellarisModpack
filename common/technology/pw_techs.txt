# Base tech: Planetary Mega-Engineering

pw_tech_planetary_mega_engineering = {
	area = engineering
	category = { industry }
	cost = @pw_tech_cost_0
	tier = 4
	prerequisites = {
		tech_housing_1
		tech_starbase_4
		tech_galactic_administration
	}
	weight = @tier4weight2
	is_rare = yes

	prereqfor_desc = {
		custom = {
			title = pw_prereq_planetary_wonders
			desc = pw_prereq_planetary_wonders_desc
		}
	}

	modifier = {
		country_resource_max_add = 10000
		planet_building_build_speed_mult = 0.25
	}

	weight_modifier = {
		factor = 0.5

		modifier = {
			factor = 1.5
			research_leader = {
				area = engineering
				has_trait = leader_trait_expertise_industry
			}
		}

		modifier = {
			factor = 1.5
			research_leader = {
				area = engineering
				has_trait = leader_trait_spark_of_genius
			}
		}

		modifier = {
			factor = 1.5
			research_leader = {
				area = engineering
				has_trait = leader_trait_curator
			}
		}

		modifier = {
			factor = @ap_technological_ascendancy_rare_tech
			has_ascension_perk = ap_technological_ascendancy
		}

		modifier = {
			factor = @federation_perk_factor
			has_federation = yes
			federation = {
				has_federation_perk = rare_tech_boost
				any_member = { has_technology = pw_tech_planetary_mega_engineering }
			}
		}

		modifier = {
			factor = 1.5
			has_ascension_perk = ap_master_builders
		}

		modifier = {
			factor = 1.5
			OR = {
				has_ascension_perk = ap_arcology_project
				has_ascension_perk = ap_machine_worlds
				has_ascension_perk = ap_hive_worlds
			}
		}

		modifier = {
			factor = 2
			any_neighbor_country = {
				has_technology = pw_tech_planetary_mega_engineering
			}
		}

		modifier = {
			factor = 2
			has_valid_civic = civic_functional_architecture
		}

		modifier = {
			factor = 2
			has_valid_civic = civic_machine_builder
		}

		modifier = {
			factor = 5
			has_edict = pw_ambition_monumentality
		}
	}

	ai_weight = {
		factor = @pw_tech_ai_weight
		modifier = {
			factor = 1.25
			research_leader = {
				area = engineering
				has_trait = leader_trait_expertise_industry
			}
		}
	}
}

# Individual tech: Planetary Wonders

#Space Elevator
pw_tech_space_elevator = {
	area = engineering
	cost = @pw_tech_cost_1
	tier = 4
	category = { voidcraft }
	prerequisites = { pw_tech_planetary_mega_engineering }
	weight = @tier4weight2
	is_rare = yes

	weight_modifier = {
		factor = @pw_tech_weight_mod

		modifier = {
			factor = 1.5
			research_leader = {
				area = engineering
				has_trait = leader_trait_expertise_voidcraft
			}
		}

		modifier = {
			factor = 1.5
			research_leader = {
				area = engineering
				has_trait = leader_trait_spark_of_genius
			}
		}

		modifier = {
			factor = 1.5
			research_leader = {
				area = engineering
				has_trait = leader_trait_curator
			}
		}

		modifier = {
			factor = @ap_technological_ascendancy_rare_tech
			has_ascension_perk = ap_technological_ascendancy
		}

		modifier = {
			factor = @federation_perk_factor
			has_federation = yes
			federation = {
				has_federation_perk = rare_tech_boost
				any_member = { has_technology = pw_tech_space_elevator }
			}
		}

		modifier = {
			factor = 1.5
			has_ascension_perk = ap_master_builders
		}

		modifier = {
			factor = 1.5
			has_valid_civic = civic_corvee_system
		}

		modifier = {
			factor = 2
			has_valid_civic = civic_free_traders
		}
	}

	ai_weight = {
		factor = @pw_tech_ai_weight
		modifier = {
			factor = 1.25
			research_leader = {
				area = engineering
				has_trait = leader_trait_expertise_voidcraft
			}
		}
	}
}

#Space Elevator - Orbital Commerce (non Gestalt)
pw_tech_space_elevator_orbital_commerce = {
	area = society
	cost = @pw_tech_cost_2
	tier = 4
	category = { statecraft }
	prerequisites = {
		pw_tech_space_elevator
		tech_galactic_markets
	}
	weight = @tier4weight2

	potential = {
		is_gestalt = no
	}

	prereqfor_desc = {
		custom = {
			title = pw_tech_space_elevator_orbital_commerce_policy
			desc = pw_tech_space_elevator_orbital_commerce_policy_desc
		}
	}

	modifier = {
		custom_tooltip = pw_tech_space_elevator_orbital_commerce_merchants
	}

	weight_modifier = {
		modifier = {
			factor = 0
			count_owned_planet = {
				count < 2
				limit = {
					has_active_building = pw_building_space_elevator
				}
			}
		}

		modifier = {
			factor = 2
			count_owned_planet = {
				count > 2
				limit = {
					has_active_building = pw_building_space_elevator
				}
			}
		}

		modifier = {
			factor = 1.5
			research_leader = {
				area = society
				has_trait = leader_trait_expertise_statecraft
			}
		}

		modifier = {
			factor = 2
			is_megacorp = yes
		}

		modifier = {
			factor = 1.5
			has_ascension_perk = ap_master_builders
		}

		modifier = {
			factor = 1.5
			has_valid_civic = civic_corvee_system
		}

		modifier = {
			factor = 2
			has_valid_civic = civic_free_traders
		}

		modifier = {
			factor = 2
			has_valid_civic = civic_merchant_guilds
		}
	}

	ai_weight = {
		factor = @pw_tech_ai_weight
		modifier = {
			factor = 1.25
			research_leader = {
				area = society
				has_trait = leader_trait_expertise_statecraft
			}
		}
	}
}

#Space Elevator - Orbital Logistics (Gestalt)
pw_tech_space_elevator_orbital_logistics = {
	area = society
	cost = @pw_tech_cost_2
	tier = 4
	category = { statecraft }
	prerequisites = { pw_tech_space_elevator }
	weight = @tier4weight2

	potential = {
		is_gestalt = yes
	}

	prereqfor_desc = {
		custom = {
			title = pw_tech_space_elevator_orbital_logistics_policy
			desc = pw_tech_space_elevator_orbital_logistics_policy_desc
		}
	}

	modifier = {
		custom_tooltip = pw_tech_space_elevator_orbital_logistics_jobs
	}

	weight_modifier = {
		modifier = {
			factor = 0
			count_owned_planet = {
				count < 2
				limit = {
					has_active_building = pw_building_space_elevator
				}
			}
		}

		modifier = {
			factor = 2
			count_owned_planet = {
				count > 2
				limit = {
					has_active_building = pw_building_space_elevator
				}
			}
		}

		modifier = {
			factor = 1.5
			research_leader = {
				area = society
				has_trait = leader_trait_expertise_statecraft
			}
		}

		modifier = {
			factor = 1.5
			has_ascension_perk = ap_master_builders
		}

		modifier = {
			factor = 1.5
			has_valid_civic = civic_machine_ota_updates
		}

		modifier = {
			factor = 1.5
			has_valid_civic = civic_hive_subspace_ephapse
		}

		modifier = {
			factor = 1.5
			has_valid_civic = civic_hive_empath
		}
	}

	ai_weight = {
		factor = @pw_tech_ai_weight
		modifier = {
			factor = 1.25
			research_leader = {
				area = society
				has_trait = leader_trait_expertise_statecraft
			}
		}
	}
}

#Space Elevator - Planetary-Orbital Logistics
pw_tech_space_elevator_planetary_orbital_logistics = {
	area = engineering
	cost = @pw_tech_cost_2
	tier = 4
	category = { voidcraft }
	prerequisites = { pw_tech_space_elevator }
	weight = @tier4weight2

	weight_modifier = {
		modifier = {
			factor = 0
			count_owned_planet = {
				count < 1
				limit = {
					has_active_building = pw_building_space_elevator
				}
			}
		}

		modifier = {
			factor = 2
			count_owned_planet = {
				count > 2
				limit = {
					has_active_building = pw_building_space_elevator
				}
			}
		}

		modifier = {
			factor = 1.5
			research_leader = {
				area = engineering
				has_trait = leader_trait_expertise_voidcraft
			}
		}

		modifier = {
			factor = 2
			is_megacorp = yes
		}

		modifier = {
			factor = 1.5
			has_ascension_perk = ap_master_builders
		}

		modifier = {
			factor = 1.5
			has_valid_civic = civic_corvee_system
		}

		modifier = {
			factor = 2
			has_valid_civic = civic_free_traders
		}

		modifier = {
			factor = 2
			has_valid_civic = civic_merchant_guilds
		}

		modifier = {
			factor = 1.5
			has_valid_civic = civic_machine_ota_updates
		}

		modifier = {
			factor = 1.5
			has_valid_civic = civic_hive_subspace_ephapse
		}

		modifier = {
			factor = 1.5
			has_valid_civic = civic_hive_empath
		}
	}

	ai_weight = {
		factor = @pw_tech_ai_weight
		modifier = {
			factor = 1.25
			research_leader = {
				area = engineering
				has_trait = leader_trait_expertise_voidcraft
			}
		}
	}
}

#Space Elevator - Orbital-Planetary Logistics
pw_tech_space_elevator_orbital_planetary_logistics = {
	area = engineering
	cost = @pw_tech_cost_2
	tier = 4
	category = { voidcraft }
	prerequisites = { pw_tech_space_elevator }
	weight = @tier4weight2

	weight_modifier = {
		modifier = {
			factor = 0
			count_owned_planet = {
				count < 1
				limit = {
					has_active_building = pw_building_space_elevator
				}
			}
		}

		modifier = {
			factor = 2
			count_owned_planet = {
				count > 2
				limit = {
					has_active_building = pw_building_space_elevator
				}
			}
		}

		modifier = {
			factor = 1.5
			research_leader = {
				area = engineering
				has_trait = leader_trait_expertise_voidcraft
			}
		}

		modifier = {
			factor = 2
			is_megacorp = yes
		}

		modifier = {
			factor = 1.5
			has_ascension_perk = ap_master_builders
		}

		modifier = {
			factor = 1.5
			has_valid_civic = civic_corvee_system
		}

		modifier = {
			factor = 2
			has_valid_civic = civic_free_traders
		}

		modifier = {
			factor = 2
			has_valid_civic = civic_merchant_guilds
		}

		modifier = {
			factor = 1.5
			has_valid_civic = civic_machine_ota_updates
		}

		modifier = {
			factor = 1.5
			has_valid_civic = civic_hive_subspace_ephapse
		}

		modifier = {
			factor = 1.5
			has_valid_civic = civic_hive_empath
		}
	}

	ai_weight = {
		factor = @pw_tech_ai_weight
		modifier = {
			factor = 1.25
			research_leader = {
				area = engineering
				has_trait = leader_trait_expertise_voidcraft
			}
		}
	}
}

#Space Elevator - Orbital Districts
pw_tech_space_elevator_orbital_districts = {
	area = engineering
	cost = @pw_tech_cost_4
	tier = 5
	category = { voidcraft }
	prerequisites = {
		tech_habitat_1
		pw_tech_space_elevator
	}
	weight = @tier5weight1

	weight_modifier = {
		modifier = {
			factor = 0
			count_owned_planet = {
				count < 1
				limit = {
					has_active_building = pw_building_space_elevator
					has_moon = no
				}
			}
		}

		modifier = {
			factor = 2
			count_owned_planet = {
				count > 2
				limit = {
					has_active_building = pw_building_space_elevator
					has_moon = no
				}
			}
		}

		modifier = {
			factor = 1.5
			research_leader = {
				area = engineering
				has_trait = leader_trait_expertise_voidcraft
			}
		}

		modifier = {
			factor = 1.5
			has_ascension_perk = ap_master_builders
		}

		modifier = {
			factor = 1.5
			has_ascension_perk = pw_ap_planetary_wonders
		}

		modifier = {
			factor = 1.5
			has_ascension_perk = ap_mastery_of_nature
		}

		modifier = {
			factor = 2
			has_valid_civic = civic_inwards_perfection
		}
	}

	ai_weight = {
		factor = @pw_tech_ai_weight
		modifier = {
			factor = 1.25
			research_leader = {
				area = engineering
				has_trait = leader_trait_expertise_voidcraft
			}
		}
	}
}

#Space Elevator - Moon Colony Expansion
pw_tech_space_elevator_moon_colony_expansion = {
	area = engineering
	cost = @pw_tech_cost_4
	tier = 5
	category = { voidcraft }
	prerequisites = {
		tech_habitat_1
		pw_tech_space_elevator
	}
	weight = @tier5weight1

	weight_modifier = {
		modifier = {
			factor = 0
			count_owned_planet = {
				count < 1
				limit = {
					has_active_building = pw_building_space_elevator
					has_moon = yes
				}
			}
		}

		modifier = {
			factor = 2
			count_owned_planet = {
				count > 2
				limit = {
					has_active_building = pw_building_space_elevator
					has_moon = yes
				}
			}
		}

		modifier = {
			factor = 1.5
			research_leader = {
				area = engineering
				has_trait = leader_trait_expertise_voidcraft
			}
		}

		modifier = {
			factor = 1.5
			has_ascension_perk = ap_master_builders
		}

		modifier = {
			factor = 1.5
			has_ascension_perk = pw_ap_planetary_wonders
		}

		modifier = {
			factor = 1.5
			has_ascension_perk = ap_mastery_of_nature
		}

		modifier = {
			factor = 2
			has_valid_civic = civic_inwards_perfection
		}
	}

	ai_weight = {
		factor = @pw_tech_ai_weight
		modifier = {
			factor = 1.25
			research_leader = {
				area = engineering
				has_trait = leader_trait_expertise_voidcraft
			}
		}
	}
}

#Space Elevator - Habitat
pw_tech_space_elevator_counterweight_habitat = {
	area = engineering
	cost = @pw_tech_cost_5
	tier = 5
	category = { voidcraft }
	is_rare = yes
	prerequisites = {
		tech_habitat_2
		pw_tech_space_elevator_orbital_districts
	}
	weight = @tier5weight2

	weight_modifier = {
		factor = @pw_tech_weight_mod

		modifier = {
			factor = 0
			count_owned_planet = {
				count < 1
				limit = {
					has_active_building = pw_building_space_elevator
					habitable_structure = no
				}
			}
		}

		modifier = {
			factor = 2
			count_owned_planet = {
				count > 2
				limit = {
					has_active_building = pw_building_space_elevator
					habitable_structure = no
				}
			}
		}

		modifier = {
			factor = 2
			any_owned_planet = {
				is_planet_class = pc_habitat
			}
		}

		modifier = {
			factor = 1.5
			research_leader = {
				area = engineering
				has_trait = leader_trait_expertise_voidcraft
			}
		}

		modifier = {
			factor = 1.5
			research_leader = {
				area = engineering
				has_trait = leader_trait_spark_of_genius
			}
		}

		modifier = {
			factor = 1.5
			research_leader = {
				area = engineering
				has_trait = leader_trait_curator
			}
		}

		modifier = {
			factor = @ap_technological_ascendancy_rare_tech
			has_ascension_perk = ap_technological_ascendancy
		}

		modifier = {
			factor = @federation_perk_factor
			has_federation = yes
			federation = {
				has_federation_perk = rare_tech_boost
				any_member = { has_technology = pw_tech_space_elevator_counterweight_habitat }
			}
		}

		modifier = {
			factor = 1.5
			has_ascension_perk = ap_master_builders
		}

		modifier = {
			factor = 1.5
			has_ascension_perk = pw_ap_planetary_wonders
		}

		modifier = {
			factor = 1.5
			has_ascension_perk = ap_mastery_of_nature
		}

		modifier = {
			factor = 2
			has_valid_civic = civic_inwards_perfection
		}
	}

	ai_weight = {
		factor = @pw_tech_ai_weight
		modifier = {
			factor = 1.25
			research_leader = {
				area = engineering
				has_trait = leader_trait_expertise_voidcraft
			}
		}
	}
}

#Space Elevator - Open for the Galactic Market
pw_tech_space_elevator_intergalactic_assets_concession = {
	area = society
	cost = @pw_tech_cost_3
	tier = 4
	category = { statecraft }
	is_rare = yes
	prerequisites = {
		pw_tech_space_elevator
	}
	weight = @tier4weight2

	potential = {
		is_galactic_community_member = yes
	}

	modifier = {
		diplo_weight_economy_mult = 0.10
	}

	weight_modifier = {
		factor = @pw_tech_weight_mod

		modifier = {
			factor = 0
			NOR = {
				is_active_resolution = resolution_commerce_holistic_asset_coordination
				is_active_resolution = resolution_commerce_profit_maximization_engines
				is_active_resolution = resolution_commerce_underdeveloped_system_utilization
			}
		}

		modifier = {
			factor = 2
			OR = {
				is_active_resolution = resolution_commerce_profit_maximization_engines
				is_active_resolution = resolution_commerce_underdeveloped_system_utilization
			}
		}
		modifier = {
			factor = 2
			is_active_resolution = resolution_commerce_underdeveloped_system_utilization
		}

		modifier = {
			factor = 0
			count_owned_planet = {
				count < 1
				limit = {
					has_active_building = pw_building_space_elevator
				}
			}
		}

		modifier = {
			factor = 2
			count_owned_planet = {
				count > 2
				limit = {
					has_active_building = pw_building_space_elevator
				}
			}
		}

		modifier = {
			factor = 2
			any_owned_planet = {
				is_planet_class = pc_habitat
			}
		}

		modifier = {
			factor = 1.5
			research_leader = {
				area = society
				has_trait = leader_trait_expertise_statecraft
			}
		}

		modifier = {
			factor = 1.5
			research_leader = {
				area = society
				has_trait = leader_trait_spark_of_genius
			}
		}

		modifier = {
			factor = 1.5
			research_leader = {
				area = society
				has_trait = leader_trait_curator
			}
		}

		modifier = {
			factor = @ap_technological_ascendancy_rare_tech
			has_ascension_perk = ap_technological_ascendancy
		}

		modifier = {
			factor = @federation_perk_factor
			has_federation = yes
			federation = {
				has_federation_perk = rare_tech_boost
				any_member = { has_technology = pw_tech_space_elevator_counterweight_habitat }
			}
		}

		modifier = {
			factor = 1.5
			has_ascension_perk = ap_master_builders
		}

		modifier = {
			factor = 1.5
			has_ascension_perk = pw_ap_planetary_wonders
		}

		modifier = {
			factor = 1.5
			has_ascension_perk = ap_mastery_of_nature
		}

		modifier = {
			factor = 2
			has_valid_civic = civic_inwards_perfection
		}
	}

	ai_weight = {
		factor = @pw_tech_ai_weight
		modifier = {
			factor = 1.25
			research_leader = {
				area = society
				has_trait = leader_trait_expertise_statecraft
			}
		}
	}
}

# Particle Supercollider
pw_tech_particle_supercollider = {
	area = physics
	cost = @pw_tech_cost_2
	tier = 4
	category = { particles }
	prerequisites = {
		pw_tech_planetary_mega_engineering
		tech_engineering_3
	}
	weight = @tier4weight3
	is_rare = yes

	weight_modifier = {
		factor = @pw_tech_weight_mod

		modifier = {
			factor = 1.5
			research_leader = {
				area = physics
				has_trait = leader_trait_expertise_particles
			}
		}

		modifier = {
			factor = 1.5
			research_leader = {
				area = physics
				has_trait = leader_trait_spark_of_genius
			}
		}

		modifier = {
			factor = 1.5
			research_leader = {
				area = physics
				has_trait = leader_trait_curator
			}
		}

		modifier = {
			factor = @ap_technological_ascendancy_rare_tech
			has_ascension_perk = ap_technological_ascendancy
		}

		modifier = {
			factor = @federation_perk_factor
			has_federation = yes
			federation = {
				has_federation_perk = rare_tech_boost
				any_member = { has_technology = pw_tech_particle_supercollider }
			}
		}

		modifier = {
			factor = 2
			research_leader = {
				area = physics
				species = {
					has_trait = trait_natural_physicists
				}
			}
		}

	}

	ai_weight = {
		factor = @pw_tech_ai_weight
		modifier = {
			factor = 1.25
			research_leader = {
				area = physics
				has_trait = leader_trait_expertise_particles
			}
		}
	}
}

# Domed City
pw_tech_domed_city = {
	area = society
	cost = @pw_tech_cost_2
	tier = 4
	category = { statecraft }
	prerequisites = {
		pw_tech_planetary_mega_engineering
		tech_society_3
	}
	weight = @tier4weight3
	is_rare = yes

	weight_modifier = {
		factor = @pw_tech_weight_mod

		modifier = {
			factor = 1.5
			research_leader = {
				area = society
				has_trait = leader_trait_expertise_statecraft
			}
		}

		modifier = {
			factor = 1.5
			research_leader = {
				area = society
				has_trait = leader_trait_spark_of_genius
			}
		}

		modifier = {
			factor = 1.5
			research_leader = {
				area = society
				has_trait = leader_trait_curator
			}
		}

		modifier = {
			factor = @ap_technological_ascendancy_rare_tech
			has_ascension_perk = ap_technological_ascendancy
		}

		modifier = {
			factor = @federation_perk_factor
			has_federation = yes
			federation = {
				has_federation_perk = rare_tech_boost
				any_member = { has_technology = pw_tech_domed_city }
			}
		}

		modifier = {
			factor = 2
			research_leader = {
				area = society
				species = {
					has_trait = trait_natural_sociologists
				}
			}
		}
	}

	ai_weight = {
		factor = @pw_tech_ai_weight
		modifier = {
			factor = 1.25
			research_leader = {
				area = society
				has_trait = leader_trait_expertise_statecraft
			}
		}
	}
}

# Abyssal Crater Test Site
pw_tech_abyssal_crater_test_site = {
	area = engineering
	cost = @pw_tech_cost_2
	tier = 4
	category = { propulsion }
	prerequisites = {
		pw_tech_planetary_mega_engineering
		tech_physics_3
	}
	weight = @tier4weight3
	is_rare = yes

	weight_modifier = {
		factor = @pw_tech_weight_mod

		modifier = {
			factor = 1.5
			research_leader = {
				area = engineering
				has_trait = leader_trait_expertise_propulsion
			}
		}

		modifier = {
			factor = 1.5
			research_leader = {
				area = engineering
				has_trait = leader_trait_spark_of_genius
			}
		}

		modifier = {
			factor = 1.5
			research_leader = {
				area = engineering
				has_trait = leader_trait_curator
			}
		}

		modifier = {
			factor = @ap_technological_ascendancy_rare_tech
			has_ascension_perk = ap_technological_ascendancy
		}

		modifier = {
			factor = @federation_perk_factor
			has_federation = yes
			federation = {
				has_federation_perk = rare_tech_boost
				any_member = { has_technology = pw_tech_abyssal_crater_test_site }
			}
		}

		modifier = {
			factor = 2
			research_leader = {
				area = engineering
				species = {
					has_trait = trait_natural_engineers
				}
			}
		}
	}

	ai_weight = {
		factor = @pw_tech_ai_weight
		modifier = {
			factor = 1.25
			research_leader = {
				area = engineering
				has_trait = leader_trait_expertise_propulsion
			}
		}
	}
}

# Erebus Project
pw_tech_erebus_project = {
	area = engineering
	cost = @pw_tech_cost_1
	tier = 4
	category = { industry }
	prerequisites = {
		pw_tech_planetary_mega_engineering
		tech_mineral_purification_2
	}
	weight = @tier4weight2
	is_rare = yes

	weight_modifier = {
		factor = @pw_tech_weight_mod

		modifier = {
			factor = 1.5
			research_leader = {
				area = engineering
				has_trait = leader_trait_expertise_industry
			}
		}

		modifier = {
			factor = 1.5
			research_leader = {
				area = engineering
				has_trait = leader_trait_spark_of_genius
			}
		}

		modifier = {
			factor = 1.5
			research_leader = {
				area = engineering
				has_trait = leader_trait_curator
			}
		}

		modifier = {
			factor = @ap_technological_ascendancy_rare_tech
			has_ascension_perk = ap_technological_ascendancy
		}

		modifier = {
			factor = @federation_perk_factor
			has_federation = yes
			federation = {
				has_federation_perk = rare_tech_boost
				any_member = { has_technology = pw_tech_erebus_project }
			}
		}

		modifier = {
			factor = 2
			OR = {
				has_valid_civic = civic_machine_rockbreakers
				has_valid_civic = civic_mining_guilds
			}
		}
	}

	ai_weight = {
		factor = @pw_tech_ai_weight
		modifier = {
			factor = 1.25
			research_leader = {
				area = engineering
				has_trait = leader_trait_expertise_industry
			}
		}
	}
}

# Erebus Project -> Erebus Fracking Plant
pw_tech_erebus_fracking_plant = {
	area = engineering
	cost = @pw_tech_cost_3
	tier = 5
	category = { industry }
	prerequisites = {
		tech_volatile_motes
		pw_tech_erebus_project
	}
	weight = @tier5weight1
	is_rare = yes

	weight_modifier = {
		factor = @pw_tech_weight_mod_very_rare

		modifier = {
			factor = 0
			count_owned_planet = {
				count < 1
				limit = {
					has_active_building = pw_building_erebus_project
				}
			}
		}

		modifier = {
			factor = 1.5
			research_leader = {
				area = engineering
				has_trait = leader_trait_expertise_industry
			}
		}

		modifier = {
			factor = 1.5
			research_leader = {
				area = engineering
				has_trait = leader_trait_spark_of_genius
			}
		}

		modifier = {
			factor = 1.5
			research_leader = {
				area = engineering
				has_trait = leader_trait_curator
			}
		}

		modifier = {
			factor = @ap_technological_ascendancy_rare_tech
			has_ascension_perk = ap_technological_ascendancy
		}

		modifier = {
			factor = @federation_perk_factor
			has_federation = yes
			federation = {
				has_federation_perk = rare_tech_boost
				any_member = { has_technology = pw_tech_erebus_fracking_plant }
			}
		}

		modifier = {
			factor = 2
			has_ascension_perk = pw_ap_planetary_wonders
		}

		modifier = {
			factor = 1.5
			has_edict = pw_ambition_monumentality
		}

		modifier = {
			factor = 1.5
			has_edict = pw_ambition_wonders_beyond_ambition
		}

		modifier = {
			factor = 1.5
			count_owned_planet = {
				count > 0
				limit = {
					has_active_building = pw_building_erebus_project
				}
			}
		}

		modifier = {
			factor = 1.5
			count_owned_planet = {
				count > 1
				limit = {
					has_active_building = pw_building_erebus_project
				}
			}
		}

		modifier = {
			factor = 1.5
			count_owned_planet = {
				count > 2
				limit = {
					has_active_building = pw_building_erebus_project
				}
			}
		}

		modifier = {
			factor = 1.25
			any_owned_planet = {
				OR = {
					has_active_building = pw_building_helios_tower
					has_active_building = pw_building_helios_translucent_obelisk
				}
			}
		}

		modifier = {
			factor = 1.25
			any_owned_planet = {
				OR = {
					has_active_building = pw_building_demetrius_fields
					has_active_building = pw_building_demetrius_chemical_garden
				}
			}
		}

		modifier = {
			factor = 1.5
			has_monthly_income = {
				resource = volatile_motes
				value < 5
			}
		}

		modifier = {
			factor = 1.5
			has_monthly_income = {
				resource = minerals
				value > 100
			}
		}

		modifier = {
			factor = 2
			OR = {
				has_valid_civic = civic_machine_rockbreakers
				has_valid_civic = civic_mining_guilds
			}
		}
	}

	ai_weight = {
		factor = @pw_tech_ai_weight
		modifier = {
			factor = 1.25
			research_leader = {
				area = engineering
				has_trait = leader_trait_expertise_industry
			}
		}
	}
}

# Helios Tower
pw_tech_helios_tower = {
	area = physics
	cost = @pw_tech_cost_1
	tier = 4
	category = { field_manipulation }
	prerequisites = {
		pw_tech_planetary_mega_engineering
		tech_power_hub_2
	}
	weight = @tier4weight2
	is_rare = yes

	weight_modifier = {
		factor = @pw_tech_weight_mod

		modifier = {
			factor = 1.5
			research_leader = {
				area = physics
				has_trait = leader_trait_expertise_field_manipulation
			}
		}

		modifier = {
			factor = 1.5
			research_leader = {
				area = physics
				has_trait = leader_trait_spark_of_genius
			}
		}

		modifier = {
			factor = 1.5
			research_leader = {
				area = physics
				has_trait = leader_trait_curator
			}
		}

		modifier = {
			factor = @ap_technological_ascendancy_rare_tech
			has_ascension_perk = ap_technological_ascendancy
		}

		modifier = {
			factor = @federation_perk_factor
			has_federation = yes
			federation = {
				has_federation_perk = rare_tech_boost
				any_member = { has_technology = pw_tech_helios_tower }
			}
		}

		modifier = {
			factor = 2
			OR = {
				is_megacorp = yes
				is_machine_empire = yes
			}
		}
	}

	ai_weight = {
		factor = @pw_tech_ai_weight
		modifier = {
			factor = 1.25
			research_leader = {
				area = physics
				has_trait = leader_trait_expertise_field_manipulation
			}
		}
	}
}

pw_tech_helios_translucent_obelisk = {
	area = physics
	cost = @pw_tech_cost_3
	tier = 5
	category = { field_manipulation }
	prerequisites = {
		tech_rare_crystals
		pw_tech_helios_tower
	}
	weight = @tier5weight1
	is_rare = yes

	weight_modifier = {
		factor = @pw_tech_weight_mod_very_rare

		modifier = {
			factor = 0
			count_owned_planet = {
				count < 1
				limit = {
					has_active_building = pw_building_helios_tower
				}
			}
		}

		modifier = {
			factor = 1.5
			research_leader = {
				area = physics
				has_trait = leader_trait_expertise_field_manipulation
			}
		}

		modifier = {
			factor = 1.5
			research_leader = {
				area = physics
				has_trait = leader_trait_spark_of_genius
			}
		}

		modifier = {
			factor = 1.5
			research_leader = {
				area = physics
				has_trait = leader_trait_curator
			}
		}

		modifier = {
			factor = @ap_technological_ascendancy_rare_tech
			has_ascension_perk = ap_technological_ascendancy
		}

		modifier = {
			factor = @federation_perk_factor
			has_federation = yes
			federation = {
				has_federation_perk = rare_tech_boost
				any_member = { has_technology = pw_tech_helios_translucent_obelisk }
			}
		}

		modifier = {
			factor = 2
			has_ascension_perk = pw_ap_planetary_wonders
		}

		modifier = {
			factor = 1.5
			has_edict = pw_ambition_monumentality
		}

		modifier = {
			factor = 1.5
			has_edict = pw_ambition_wonders_beyond_ambition
		}

		modifier = {
			factor = 1.5
			count_owned_planet = {
				count > 0
				limit = {
					has_active_building = pw_building_helios_tower
				}
			}
		}

		modifier = {
			factor = 1.5
			count_owned_planet = {
				count > 1
				limit = {
					has_active_building = pw_building_helios_tower
				}
			}
		}

		modifier = {
			factor = 1.5
			count_owned_planet = {
				count > 2
				limit = {
					has_active_building = pw_building_helios_tower
				}
			}
		}

		modifier = {
			factor = 1.25
			any_owned_planet = {
				OR = {
					has_active_building = pw_building_erebus_project
					has_active_building = pw_building_erebus_fracking_plant
				}
			}
		}

		modifier = {
			factor = 1.25
			any_owned_planet = {
				OR = {
					has_active_building = pw_building_demetrius_fields
					has_active_building = pw_building_demetrius_chemical_garden
				}
			}
		}

		modifier = {
			factor = 1.5
			has_monthly_income = {
				resource = rare_crystals
				value < 5
			}
		}

		modifier = {
			factor = 1.5
			has_monthly_income = {
				resource = energy
				value > 100
			}
		}

		modifier = {
			factor = 2
			OR = {
				is_megacorp = yes
				is_machine_empire = yes
			}
		}
	}

	ai_weight = {
		factor = @pw_tech_ai_weight
		modifier = {
			factor = 1.25
			research_leader = {
				area = physics
				has_trait = leader_trait_expertise_field_manipulation
			}
		}
	}
}

# Demetrius Cornucopia
pw_tech_demetrius_fields = {
	area = society
	cost = @pw_tech_cost_1
	tier = 4
	category = { biology }
	prerequisites = {
		pw_tech_planetary_mega_engineering
		tech_food_processing_2
	}
	weight = @tier4weight2
	is_rare = yes

	weight_modifier = {
		factor = @pw_tech_weight_mod

		modifier = {
			factor = 1.5
			research_leader = {
				area = society
				has_trait = leader_trait_expertise_biology
			}
		}

		modifier = {
			factor = 1.5
			research_leader = {
				area = society
				has_trait = leader_trait_spark_of_genius
			}
		}

		modifier = {
			factor = 1.5
			research_leader = {
				area = society
				has_trait = leader_trait_curator
			}
		}

		modifier = {
			factor = @ap_technological_ascendancy_rare_tech
			has_ascension_perk = ap_technological_ascendancy
		}

		modifier = {
			factor = @federation_perk_factor
			has_federation = yes
			federation = {
				has_federation_perk = rare_tech_boost
				any_member = { has_technology = pw_tech_demetrius_fields }
			}
		}

		modifier = {
			factor = 2
			OR = {
				has_valid_civic = civic_agrarian_idyll
				is_hive_empire = yes
			}
		}

		modifier = {
			factor = 0.5
			OR = {
				has_ascension_perk = ap_the_flesh_is_weak
				has_ascension_perk = ap_synthetic_evolution
			}
		}
	}

	ai_weight = {
		factor = @pw_tech_ai_weight
		modifier = {
			factor = 1.25
			research_leader = {
				area = society
				has_trait = leader_trait_expertise_biology
			}
		}
	}
}


pw_tech_demetrius_chemical_garden = {
	area = society
	cost = @pw_tech_cost_3
	tier = 5
	category = { biology }
	prerequisites = {
		tech_exotic_gases
		pw_tech_demetrius_fields
	}
	weight = @tier5weight1
	is_rare = yes

	weight_modifier = {
		factor = @pw_tech_weight_mod_very_rare

		modifier = {
			factor = 0
			count_owned_planet = {
				count < 1
				limit = {
					has_active_building = pw_building_demetrius_fields
				}
			}
		}

		modifier = {
			factor = 1.5
			research_leader = {
				area = society
				has_trait = leader_trait_expertise_biology
			}
		}

		modifier = {
			factor = 1.5
			research_leader = {
				area = society
				has_trait = leader_trait_spark_of_genius
			}
		}

		modifier = {
			factor = 1.5
			research_leader = {
				area = society
				has_trait = leader_trait_curator
			}
		}

		modifier = {
			factor = @ap_technological_ascendancy_rare_tech
			has_ascension_perk = ap_technological_ascendancy
		}

		modifier = {
			factor = @federation_perk_factor
			has_federation = yes
			federation = {
				has_federation_perk = rare_tech_boost
				any_member = { has_technology = pw_tech_demetrius_chemical_garden }
			}
		}

		modifier = {
			factor = 2
			has_ascension_perk = pw_ap_planetary_wonders
		}

		modifier = {
			factor = 1.5
			has_edict = pw_ambition_monumentality
		}

		modifier = {
			factor = 1.5
			has_edict = pw_ambition_wonders_beyond_ambition
		}

		modifier = {
			factor = 1.5
			count_owned_planet = {
				count > 0
				limit = {
					has_active_building = pw_building_demetrius_fields
				}
			}
		}

		modifier = {
			factor = 1.5
			count_owned_planet = {
				count > 1
				limit = {
					has_active_building = pw_building_demetrius_fields
				}
			}
		}

		modifier = {
			factor = 1.5
			count_owned_planet = {
				count > 2
				limit = {
					has_active_building = pw_building_demetrius_fields
				}
			}
		}

		modifier = {
			factor = 1.25
			any_owned_planet = {
				OR = {
					has_active_building = pw_building_erebus_project
					has_active_building = pw_building_erebus_fracking_plant
				}
			}
		}

		modifier = {
			factor = 1.25
			any_owned_planet = {
				OR = {
					has_active_building = pw_building_helios_tower
					has_active_building = pw_building_helios_translucent_obelisk
				}
			}
		}

		modifier = {
			factor = 1.5
			has_monthly_income = {
				resource = exotic_gases
				value < 5
			}
		}

		modifier = {
			factor = 1.5
			has_monthly_income = {
				resource = food
				value > 25
			}
		}

		modifier = {
			factor = 2
			OR = {
				has_valid_civic = civic_agrarian_idyll
				is_hive_empire = yes
			}
		}

		modifier = {
			factor = 0.5
			OR = {
				has_ascension_perk = ap_the_flesh_is_weak
				has_ascension_perk = ap_synthetic_evolution
			}
		}
	}

	ai_weight = {
		factor = @pw_tech_ai_weight
		modifier = {
			factor = 1.25
			research_leader = {
				area = society
				has_trait = leader_trait_expertise_biology
			}
		}
	}
}

#Land Repurposing techs
pw_tech_resource_land_repurposing_1 = {
	area = society
	cost = @pw_tech_cost_3
	tier = 5
	category = { new_worlds }
	prerequisites = { pw_tech_planetary_mega_engineering }
	weight = @tier5weight1
	is_rare = yes

	potential = {
		any_owned_planet = {
			OR = {
				has_active_building = pw_building_erebus_project
				has_active_building = pw_building_erebus_fracking_plant
				has_active_building = pw_building_helios_tower
				has_active_building = pw_building_helios_translucent_obelisk
				has_active_building = pw_building_demetrius_fields
				has_active_building = pw_building_demetrius_chemical_garden
			}
		}
	}

	weight_modifier = {
		factor = @pw_tech_weight_mod

		modifier = {
			factor = 1.5
			research_leader = {
				area = society
				has_trait = leader_trait_expertise_new_worlds
			}
		}

		modifier = {
			factor = 1.5
			research_leader = {
				area = society
				has_trait = leader_trait_spark_of_genius
			}
		}

		modifier = {
			factor = 1.5
			research_leader = {
				area = society
				has_trait = leader_trait_curator
			}
		}

		modifier = {
			factor = @ap_technological_ascendancy_rare_tech
			has_ascension_perk = ap_technological_ascendancy
		}

		modifier = {
			factor = @federation_perk_factor
			has_federation = yes
			federation = {
				has_federation_perk = rare_tech_boost
				any_member = { has_technology = pw_tech_resource_land_repurposing_1 }
			}
		}

		modifier = {
			factor = 2
			any_owned_planet = {
				OR = {
					has_active_building = pw_building_erebus_project
					has_active_building = pw_building_erebus_fracking_plant
				}
			}
		}

		modifier = {
			factor = 2
			any_owned_planet = {
				OR = {
					has_active_building = pw_building_helios_tower
					has_active_building = pw_building_helios_translucent_obelisk
				}
			}
		}

		modifier = {
			factor = 2
			any_owned_planet = {
				OR = {
					has_active_building = pw_building_demetrius_fields
					has_active_building = pw_building_demetrius_chemical_garden
				}
			}
		}
	}

	ai_weight = {
		factor = @pw_tech_ai_weight
		modifier = {
			factor = 1.25
			research_leader = {
				area = society
				has_trait = leader_trait_expertise_new_worlds
			}
		}
	}
}

pw_tech_resource_land_repurposing_2 = {
	area = society
	cost = @pw_tech_cost_4
	tier = 5
	category = { new_worlds }
	prerequisites = { pw_tech_resource_land_repurposing_1 }
	weight = @tier5weight2
	is_rare = yes

	potential = {
		any_owned_planet = {
			OR = {
				has_active_building = pw_building_erebus_project
				has_active_building = pw_building_erebus_fracking_plant
				has_active_building = pw_building_helios_tower
				has_active_building = pw_building_helios_translucent_obelisk
				has_active_building = pw_building_demetrius_fields
				has_active_building = pw_building_demetrius_chemical_garden
			}
		}
	}

	prereqfor_desc = {
		custom = {
			title = pw_tech_resource_land_repurposing_2_tooltip
			desc = pw_tech_resource_land_repurposing_2_tooltip_desc
		}
	}

	weight_modifier = {
		factor = @pw_tech_weight_mod

		modifier = {
			factor = 1.5
			research_leader = {
				area = society
				has_trait = leader_trait_expertise_new_worlds
			}
		}

		modifier = {
			factor = 1.5
			research_leader = {
				area = society
				has_trait = leader_trait_spark_of_genius
			}
		}

		modifier = {
			factor = 1.5
			research_leader = {
				area = society
				has_trait = leader_trait_curator
			}
		}

		modifier = {
			factor = @ap_technological_ascendancy_rare_tech
			has_ascension_perk = ap_technological_ascendancy
		}

		modifier = {
			factor = @federation_perk_factor
			has_federation = yes
			federation = {
				has_federation_perk = rare_tech_boost
				any_member = { has_technology = pw_tech_resource_land_repurposing_2 }
			}
		}

		modifier = {
			factor = 2
			any_owned_planet = {
				OR = {
					has_active_building = pw_building_erebus_project
					has_active_building = pw_building_erebus_fracking_plant
				}
			}
		}

		modifier = {
			factor = 2
			any_owned_planet = {
				OR = {
					has_active_building = pw_building_helios_tower
					has_active_building = pw_building_helios_translucent_obelisk
				}
			}
		}

		modifier = {
			factor = 2
			any_owned_planet = {
				OR = {
					has_active_building = pw_building_demetrius_fields
					has_active_building = pw_building_demetrius_chemical_garden
				}
			}
		}
	}

	ai_weight = {
		factor = @pw_tech_ai_weight
		modifier = {
			factor = 1.25
			research_leader = {
				area = society
				has_trait = leader_trait_expertise_new_worlds
			}
		}
	}
}

pw_tech_resource_land_repurposing_3 = {
	area = society
	cost = @pw_tech_cost_5
	tier = 5
	category = { new_worlds }
	prerequisites = { pw_tech_resource_land_repurposing_2 }
	weight = @tier5weight3
	is_rare = yes

	potential = {
		any_owned_planet = {
			OR = {
				has_active_building = pw_building_erebus_project
				has_active_building = pw_building_erebus_fracking_plant
				has_active_building = pw_building_helios_tower
				has_active_building = pw_building_helios_translucent_obelisk
				has_active_building = pw_building_demetrius_fields
				has_active_building = pw_building_demetrius_chemical_garden
			}
		}
	}

	prereqfor_desc = {
		custom = {
			title = pw_tech_resource_land_repurposing_3_tooltip
			desc = pw_tech_resource_land_repurposing_3_tooltip_desc
		}
	}

	weight_modifier = {
		factor = @pw_tech_weight_mod

		modifier = {
			factor = 1.5
			research_leader = {
				area = society
				has_trait = leader_trait_expertise_new_worlds
			}
		}

		modifier = {
			factor = 1.5
			research_leader = {
				area = society
				has_trait = leader_trait_spark_of_genius
			}
		}

		modifier = {
			factor = 1.5
			research_leader = {
				area = society
				has_trait = leader_trait_curator
			}
		}

		modifier = {
			factor = @ap_technological_ascendancy_rare_tech
			has_ascension_perk = ap_technological_ascendancy
		}

		modifier = {
			factor = @federation_perk_factor
			has_federation = yes
			federation = {
				has_federation_perk = rare_tech_boost
				any_member = { has_technology = pw_tech_resource_land_repurposing_3 }
			}
		}

		modifier = {
			factor = 2
			any_owned_planet = {
				OR = {
					has_active_building = pw_building_erebus_project
					has_active_building = pw_building_erebus_fracking_plant
				}
			}
		}

		modifier = {
			factor = 2
			any_owned_planet = {
				OR = {
					has_active_building = pw_building_helios_tower
					has_active_building = pw_building_helios_translucent_obelisk
				}
			}
		}

		modifier = {
			factor = 2
			any_owned_planet = {
				OR = {
					has_active_building = pw_building_demetrius_fields
					has_active_building = pw_building_demetrius_chemical_garden
				}
			}
		}
	}

	ai_weight = {
		factor = @pw_tech_ai_weight
		modifier = {
			factor = 1.25
			research_leader = {
				area = society
				has_trait = leader_trait_expertise_new_worlds
			}
		}
	}
}

#Astronomical Modeling
pw_tech_galactic_modeling = {
	area = society
	cost = @pw_tech_cost_3
	tier = 5
	category = { statecraft }
	prerequisites = {
		pw_tech_planetary_mega_engineering
		tech_galactic_bureaucracy
	}
	weight = @tier5weight1
	is_rare = yes

	weight_modifier = {
		factor = @pw_tech_weight_mod

		modifier = {
			factor = 1.5
			research_leader = {
				area = society
				has_trait = leader_trait_expertise_statecraft
			}
		}

		modifier = {
			factor = 1.5
			research_leader = {
				area = society
				has_trait = leader_trait_spark_of_genius
			}
		}

		modifier = {
			factor = 1.5
			research_leader = {
				area = society
				has_trait = leader_trait_curator
			}
		}

		modifier = {
			factor = @ap_technological_ascendancy_rare_tech
			has_ascension_perk = ap_technological_ascendancy
		}

		modifier = {
			factor = @federation_perk_factor
			has_federation = yes
			federation = {
				has_federation_perk = rare_tech_boost
				any_member = { has_technology = pw_tech_galactic_modeling }
			}
		}

		modifier = {
			factor = 2
			has_valid_civic = civic_byzantine_bureaucracy
		}

		modifier = {
			factor = 2
			has_valid_civic = civic_efficient_bureaucracy
		}

		modifier = {
			factor = 0
			num_owned_planets < 3
		}

		modifier = {
			factor = 1.25
			num_owned_planets > 5
		}

		modifier = {
			factor = 1.25
			num_owned_planets > 8
		}

		modifier = {
			factor = 1.25
			num_owned_planets > 12
		}

	}

	ai_weight = {
		factor = @pw_tech_ai_weight
		modifier = {
			factor = 1.25
			research_leader = {
				area = society
				has_trait = leader_trait_expertise_statecraft
			}
		}
	}
}

#Astronomical Modeling - Expanding Bureaucracy (non Gestalt)
pw_tech_galactic_model_expanding_bureaucracy = {
	area = society
	cost = @pw_tech_cost_4
	tier = 5
	category = { statecraft }
	prerequisites = {
		pw_tech_galactic_modeling
	}
	weight = @tier5weight2
	is_rare = yes

	potential = {
		is_gestalt = no
	}

	prereqfor_desc = {
		custom = {
			title = pw_prereq_galactic_modeling
			desc = pw_prereq_galactic_modeling_desc
		}
	}

	modifier = {
		custom_tooltip = pw_tech_galactic_model_expanding_bureaucracy_bureaucrats
	}

	weight_modifier = {
		factor = @pw_tech_weight_mod

		modifier = {
			factor = 0
			count_owned_planet = {
				count < 1
				limit = {
					OR = {
						has_active_building = pw_building_galactic_model
						has_active_building = pw_building_aligned_galactic_model
					}
				}
			}
		}

		modifier = {
			factor = 1.5
			research_leader = {
				area = society
				has_trait = leader_trait_expertise_statecraft
			}
		}

		modifier = {
			factor = 1.5
			research_leader = {
				area = society
				has_trait = leader_trait_spark_of_genius
			}
		}

		modifier = {
			factor = 1.5
			research_leader = {
				area = society
				has_trait = leader_trait_curator
			}
		}

		modifier = {
			factor = @ap_technological_ascendancy_rare_tech
			has_ascension_perk = ap_technological_ascendancy
		}

		modifier = {
			factor = @federation_perk_factor
			has_federation = yes
			federation = {
				has_federation_perk = rare_tech_boost
				any_member = {
					OR = {
						has_technology = pw_tech_galactic_model_expanding_bureaucracy
						has_technology = pw_tech_galactic_model_expanding_bureaucracy_hive
						has_technology = pw_tech_galactic_model_expanding_bureaucracy_machine
					}
				}
			}
		}

		modifier = {
			factor = 2
			has_valid_civic = civic_byzantine_bureaucracy
		}

		modifier = {
			factor = 2
			has_valid_civic = civic_efficient_bureaucracy
		}

		modifier = {
			factor = 0
			num_owned_planets < 3
		}

		modifier = {
			factor = 1.25
			num_owned_planets > 5
		}

		modifier = {
			factor = 1.25
			num_owned_planets > 8
		}

		modifier = {
			factor = 1.25
			num_owned_planets > 12
		}

	}

	ai_weight = {
		factor = @pw_tech_ai_weight
		modifier = {
			factor = 1.25
			research_leader = {
				area = society
				has_trait = leader_trait_expertise_statecraft
			}
		}
	}
}

#Astronomical Modeling - Expanding Bureaucracy (Hive)
pw_tech_galactic_model_expanding_bureaucracy_hive = {
	area = society
	cost = @pw_tech_cost_4
	tier = 5
	category = { statecraft }
	prerequisites = {
		pw_tech_galactic_modeling
	}
	weight = @tier5weight2
	is_rare = yes
	icon = pw_tech_galactic_model_expanding_bureaucracy

	potential = {
		is_hive_empire = yes
	}

	prereqfor_desc = {
		custom = {
			title = pw_prereq_galactic_modeling
			desc = pw_prereq_galactic_modeling_desc
		}
	}

	modifier = {
		custom_tooltip = pw_tech_galactic_model_expanding_bureaucracy_synapse_drones
	}

	weight_modifier = {
		factor = @pw_tech_weight_mod

		modifier = {
			factor = 0
			count_owned_planet = {
				count < 1
				limit = {
					OR = {
						has_active_building = pw_building_galactic_model
						has_active_building = pw_building_aligned_galactic_model
					}
				}
			}
		}

		modifier = {
			factor = 1.5
			research_leader = {
				area = society
				has_trait = leader_trait_expertise_statecraft
			}
		}

		modifier = {
			factor = 1.5
			research_leader = {
				area = society
				has_trait = leader_trait_spark_of_genius
			}
		}

		modifier = {
			factor = 1.5
			research_leader = {
				area = society
				has_trait = leader_trait_curator
			}
		}

		modifier = {
			factor = @ap_technological_ascendancy_rare_tech
			has_ascension_perk = ap_technological_ascendancy
		}

		modifier = {
			factor = @federation_perk_factor
			has_federation = yes
			federation = {
				has_federation_perk = rare_tech_boost
				any_member = {
					OR = {
						has_technology = pw_tech_galactic_model_expanding_bureaucracy
						has_technology = pw_tech_galactic_model_expanding_bureaucracy_hive
						has_technology = pw_tech_galactic_model_expanding_bureaucracy_machine
					}
				}
			}
		}

		modifier = {
			factor = 2
			has_valid_civic = civic_byzantine_bureaucracy
		}

		modifier = {
			factor = 2
			has_valid_civic = civic_efficient_bureaucracy
		}

		modifier = {
			factor = 0
			num_owned_planets < 3
		}

		modifier = {
			factor = 1.25
			num_owned_planets > 5
		}

		modifier = {
			factor = 1.25
			num_owned_planets > 8
		}

		modifier = {
			factor = 1.25
			num_owned_planets > 12
		}

	}

	ai_weight = {
		factor = @pw_tech_ai_weight
		modifier = {
			factor = 1.25
			research_leader = {
				area = society
				has_trait = leader_trait_expertise_statecraft
			}
		}
	}
}

#Astronomical Modeling - Expanding Bureaucracy (Machine)
pw_tech_galactic_model_expanding_bureaucracy_machine = {
	area = society
	cost = @pw_tech_cost_4
	tier = 5
	category = { statecraft }
	prerequisites = {
		pw_tech_galactic_modeling
	}
	weight = @tier5weight2
	is_rare = yes
	icon = pw_tech_galactic_model_expanding_bureaucracy

	potential = {
		is_machine_empire = yes
	}

	prereqfor_desc = {
		custom = {
			title = pw_prereq_galactic_modeling
			desc = pw_prereq_galactic_modeling_desc
		}
	}

	modifier = {
		custom_tooltip = pw_tech_galactic_model_expanding_bureaucracy_coordinator
	}

	weight_modifier = {
		factor = @pw_tech_weight_mod

		modifier = {
			factor = 0
			count_owned_planet = {
				count < 1
				limit = {
					OR = {
						has_active_building = pw_building_galactic_model
						has_active_building = pw_building_aligned_galactic_model
					}
				}
			}
		}

		modifier = {
			factor = 1.5
			research_leader = {
				area = society
				has_trait = leader_trait_expertise_statecraft
			}
		}

		modifier = {
			factor = 1.5
			research_leader = {
				area = society
				has_trait = leader_trait_spark_of_genius
			}
		}

		modifier = {
			factor = 1.5
			research_leader = {
				area = society
				has_trait = leader_trait_curator
			}
		}

		modifier = {
			factor = @ap_technological_ascendancy_rare_tech
			has_ascension_perk = ap_technological_ascendancy
		}

		modifier = {
			factor = @federation_perk_factor
			has_federation = yes
			federation = {
				has_federation_perk = rare_tech_boost
				any_member = {
					OR = {
						has_technology = pw_tech_galactic_model_expanding_bureaucracy
						has_technology = pw_tech_galactic_model_expanding_bureaucracy_hive
						has_technology = pw_tech_galactic_model_expanding_bureaucracy_machine
					}
				}
			}
		}

		modifier = {
			factor = 2
			has_valid_civic = civic_byzantine_bureaucracy
		}

		modifier = {
			factor = 2
			has_valid_civic = civic_efficient_bureaucracy
		}

		modifier = {
			factor = 0
			num_owned_planets < 3
		}

		modifier = {
			factor = 1.25
			num_owned_planets > 5
		}

		modifier = {
			factor = 1.25
			num_owned_planets > 8
		}

		modifier = {
			factor = 1.25
			num_owned_planets > 12
		}

	}

	ai_weight = {
		factor = @pw_tech_ai_weight
		modifier = {
			factor = 1.25
			research_leader = {
				area = society
				has_trait = leader_trait_expertise_statecraft
			}
		}
	}
}

#Align Galactic model (Upgrade)
pw_tech_hyperreality_modeling = {
	area = society
	cost = @pw_tech_cost_4
	tier = 5
	category = { statecraft }
	prerequisites = {
		pw_tech_galactic_modeling
	}
	weight = 0
	is_rare = yes

	ai_weight = {
		factor = @pw_tech_ai_weight
		modifier = {
			factor = 1.25
			research_leader = {
				area = society
				has_trait = leader_trait_expertise_statecraft
			}
		}
	}
}

# Panopticon
pw_tech_utilitarian_vigilance = {
	area = society
	cost = @pw_tech_cost_1
	tier = 4
	category = { statecraft }
	prerequisites = {
		pw_tech_planetary_mega_engineering
		tech_penal_colonies
	}
	weight = @tier4weight2
	is_rare = yes

	potential = {
		NOT = {
			has_valid_civic = civic_criminal_heritage
		}
	}

	weight_modifier = {
		factor = @pw_tech_weight_mod

		modifier = {
			factor = 1.5
			research_leader = {
				area = society
				has_trait = leader_trait_expertise_statecraft
			}
		}

		modifier = {
			factor = 1.5
			research_leader = {
				area = society
				has_trait = leader_trait_spark_of_genius
			}
		}

		modifier = {
			factor = 1.5
			research_leader = {
				area = society
				has_trait = leader_trait_curator
			}
		}

		modifier = {
			factor = @ap_technological_ascendancy_rare_tech
			has_ascension_perk = ap_technological_ascendancy
		}

		modifier = {
			factor = @federation_perk_factor
			has_federation = yes
			federation = {
				has_federation_perk = rare_tech_boost
				any_member = { has_technology = pw_tech_utilitarian_vigilance }
			}
		}

		modifier = {
			factor = 1.25
			is_authoritarian = yes
		}

		modifier = {
			factor = 0
			num_owned_planets < 2
		}

		modifier = {
			factor = 5
			any_owned_planet ={
				has_modifier = penal_colony
			}
		}

		modifier = {
			factor = 2
			has_valid_civic = civic_police_state
		}

		modifier = {
			factor = 1.5
			has_valid_civic = civic_cutthroat_politics
		}

		modifier = {
			factor = 0
			has_valid_civic = civic_criminal_heritage
		}

		modifier = {
			factor = 0.25
			has_valid_civic = civic_beacon_of_liberty
		}
	}

	ai_weight = {
		factor = @pw_tech_ai_weight
		modifier = {
			factor = 2
			research_leader = {
				area = society
				has_trait = leader_trait_expertise_statecraft
			}
		}
	}
}

# Panopticon - Penal Industries
pw_tech_panopticon_penal_industries = {
	area = society
	cost = @pw_panopticon_tech_cost
	tier = 3
	category = { statecraft }
	prerequisites = { pw_tech_utilitarian_vigilance }
	weight = @tier3weight2

	potential = {
		is_authoritarian = yes
		any_owned_planet = {
			has_active_building = pw_building_panopticon
		}
	}

	modifier = {
		custom_tooltip = pw_tech_panopticon_penal_industries_tooltip
	}

	weight_modifier = {
		modifier = {
			factor = 1.5
			research_leader = {
				area = society
				has_trait = leader_trait_expertise_statecraft
			}
		}

		modifier = {
			factor = 1.25
			is_authoritarian = yes
		}

		modifier = {
			factor = 1.5
			has_ethic = ethic_fanatic_authoritarian
		}

		modifier = {
			factor = 2
			has_valid_civic = civic_police_state
		}

		modifier = {
			factor = 1.5
			has_valid_civic = civic_cutthroat_politics
		}

		modifier = {
			factor = 0.25
			has_valid_civic = civic_beacon_of_liberty
		}
	}

	ai_weight = {
		factor = @pw_tech_ai_weight
		modifier = {
			factor = 2
			research_leader = {
				area = society
				has_trait = leader_trait_expertise_statecraft
			}
		}
	}
}

# Panopticon - Criminal Reintegration
pw_tech_panopticon_criminal_reintegration = {
	area = society
	cost = @pw_panopticon_tech_cost
	tier = 3
	category = { statecraft }
	prerequisites = { pw_tech_utilitarian_vigilance }
	weight = @tier3weight3

	potential = {
		is_egalitarian = yes
		any_owned_planet = {
			has_active_building = pw_building_panopticon
		}
	}

	modifier = {
		custom_tooltip = pw_tech_panopticon_criminal_reintegration_tooltip
	}

	weight_modifier = {
		modifier = {
			factor = 1.5
			research_leader = {
				area = society
				has_trait = leader_trait_expertise_statecraft
			}
		}

		modifier = {
			factor = 2
			has_valid_civic = civic_police_state
		}

		modifier = {
			factor = 1.5
			has_valid_civic = civic_cutthroat_politics
		}

		modifier = {
			factor = 0.25
			has_valid_civic = civic_beacon_of_liberty
		}
	}

	ai_weight = {
		factor = @pw_tech_ai_weight
		modifier = {
			factor = 2
			research_leader = {
				area = society
				has_trait = leader_trait_expertise_statecraft
			}
		}
	}
}

# Panopticon - Reformatory Bureaucratic Work
pw_tech_panopticon_reformatory_bureaucratic_work = {
	area = society
	cost = @pw_panopticon_tech_cost
	tier = 3
	category = { statecraft }
	prerequisites = { pw_tech_utilitarian_vigilance }
	weight = @tier3weight2

	potential = {
		is_pacifist = yes
		any_owned_planet = {
			has_active_building = pw_building_panopticon
		}
	}

	modifier = {
		custom_tooltip = pw_tech_panopticon_reformatory_bureaucratic_work_tooltip
	}

	weight_modifier = {
		modifier = {
			factor = 1.5
			research_leader = {
				area = society
				has_trait = leader_trait_expertise_statecraft
			}
		}

		modifier = {
			factor = 1.25
			is_authoritarian = yes
		}

		modifier = {
			factor = 1.5
			has_ethic = ethic_fanatic_authoritarian
		}

		modifier = {
			factor = 2
			has_valid_civic = civic_police_state
		}

		modifier = {
			factor = 1.5
			has_valid_civic = civic_cutthroat_politics
		}

		modifier = {
			factor = 0.25
			has_valid_civic = civic_beacon_of_liberty
		}
	}

	ai_weight = {
		factor = @pw_tech_ai_weight
		modifier = {
			factor = 2
			research_leader = {
				area = society
				has_trait = leader_trait_expertise_statecraft
			}
		}
	}
}

# Panopticon - Enlist Prisoners
pw_tech_panopticon_enlist_prisoners = {
	area = society
	cost = @pw_panopticon_tech_cost
	tier = 3
	category = { statecraft }
	prerequisites = { pw_tech_utilitarian_vigilance }
	weight = @tier3weight2

	potential = {
		is_militarist = yes
		any_owned_planet = {
			has_active_building = pw_building_panopticon
		}
	}

	modifier = {
		custom_tooltip = pw_tech_panopticon_enlist_prisoners_tooltip
	}

	weight_modifier = {
		modifier = {
			factor = 1.5
			research_leader = {
				area = society
				has_trait = leader_trait_expertise_statecraft
			}
		}

		modifier = {
			factor = 1.25
			is_authoritarian = yes
		}

		modifier = {
			factor = 1.5
			has_ethic = ethic_fanatic_authoritarian
		}

		modifier = {
			factor = 2
			has_valid_civic = civic_police_state
		}

		modifier = {
			factor = 1.5
			has_valid_civic = civic_cutthroat_politics
		}

		modifier = {
			factor = 0.25
			has_valid_civic = civic_beacon_of_liberty
		}
	}

	ai_weight = {
		factor = @pw_tech_ai_weight
		modifier = {
			factor = 2
			research_leader = {
				area = society
				has_trait = leader_trait_expertise_statecraft
			}
		}
	}
}

# Panopticon - Repentance Preaching
pw_tech_panopticon_repentance_preaching = {
	area = society
	cost = @pw_panopticon_tech_cost
	tier = 3
	category = { statecraft }
	prerequisites = { pw_tech_utilitarian_vigilance }
	weight = @tier3weight2

	potential = {
		is_spiritualist = yes
		any_owned_planet = {
			has_active_building = pw_building_panopticon
		}
	}

	modifier = {
		custom_tooltip = pw_tech_panopticon_repentance_preaching_tooltip
	}

	weight_modifier = {
		modifier = {
			factor = 1.5
			research_leader = {
				area = society
				has_trait = leader_trait_expertise_statecraft
			}
		}

		modifier = {
			factor = 1.25
			is_authoritarian = yes
		}

		modifier = {
			factor = 1.5
			has_ethic = ethic_fanatic_authoritarian
		}

		modifier = {
			factor = 2
			has_valid_civic = civic_police_state
		}

		modifier = {
			factor = 1.5
			has_valid_civic = civic_cutthroat_politics
		}

		modifier = {
			factor = 0.25
			has_valid_civic = civic_beacon_of_liberty
		}
	}

	ai_weight = {
		factor = @pw_tech_ai_weight
		modifier = {
			factor = 2
			research_leader = {
				area = society
				has_trait = leader_trait_expertise_statecraft
			}
		}
	}
}

# Panopticon - Prisoner Subjects
pw_tech_panopticon_prisoner_subjects = {
	area = society
	cost = @pw_panopticon_tech_cost
	tier = 3
	category = { statecraft }
	prerequisites = { pw_tech_utilitarian_vigilance }
	weight = @tier3weight2

	potential = {
		is_materialist = yes
		any_owned_planet = {
			has_active_building = pw_building_panopticon
		}
	}

	modifier = {
		custom_tooltip = pw_tech_panopticon_prisoner_subjects_tooltip
	}

	weight_modifier = {
		modifier = {
			factor = 1.5
			research_leader = {
				area = society
				has_trait = leader_trait_expertise_statecraft
			}
		}

		modifier = {
			factor = 1.25
			is_authoritarian = yes
		}

		modifier = {
			factor = 1.5
			has_ethic = ethic_fanatic_authoritarian
		}

		modifier = {
			factor = 0.75
			is_egalitarian = yes
		}

		modifier = {
			factor = 0.50
			has_ethic = ethic_fanatic_egalitarian
		}

		modifier = {
			factor = 2
			has_valid_civic = civic_police_state
		}

		modifier = {
			factor = 1.5
			has_valid_civic = civic_cutthroat_politics
		}

		modifier = {
			factor = 0.25
			has_valid_civic = civic_beacon_of_liberty
		}
	}

	ai_weight = {
		factor = @pw_tech_ai_weight
		modifier = {
			factor = 2
			research_leader = {
				area = society
				has_trait = leader_trait_expertise_statecraft
			}
		}
	}
}

# Panopticon - Racialized Sentencing
pw_tech_panopticon_racialized_sentencing = {
	area = society
	cost = @pw_panopticon_tech_cost
	tier = 3
	category = { statecraft }
	prerequisites = { pw_tech_utilitarian_vigilance }
	weight = @tier3weight2

	potential = {
		is_xenophobe = yes
		any_owned_planet = {
			has_active_building = pw_building_panopticon
		}
	}

	modifier = {
		pop_government_ethic_attraction = 0.20
	}

	weight_modifier = {
		modifier = {
			factor = 1.5
			research_leader = {
				area = society
				has_trait = leader_trait_expertise_statecraft
			}
		}

		modifier = {
			factor = 1.25
			is_authoritarian = yes
		}

		modifier = {
			factor = 1.5
			has_ethic = ethic_fanatic_authoritarian
		}

		modifier = {
			factor = 2
			has_valid_civic = civic_police_state
		}

		modifier = {
			factor = 1.5
			has_valid_civic = civic_cutthroat_politics
		}

		modifier = {
			factor = 0.25
			has_valid_civic = civic_beacon_of_liberty
		}
	}

	ai_weight = {
		factor = @pw_tech_ai_weight
		modifier = {
			factor = 2
			research_leader = {
				area = society
				has_trait = leader_trait_expertise_statecraft
			}
		}
	}
}

# Panopticon - GalPol Detention Center
pw_tech_panopticon_galpol_detention_center = {
	area = society
	cost = @pw_panopticon_tech_cost
	tier = 3
	category = { statecraft }
	prerequisites = { pw_tech_utilitarian_vigilance }
	weight = @tier3weight2

	potential = {
		is_xenophile = yes
		is_galactic_community_member = yes
		any_owned_planet = {
			has_active_building = pw_building_panopticon
		}
	}

	modifier = {
		diplo_weight_mult = 0.05
	}

	weight_modifier = {
		modifier = {
			factor = 1.5
			research_leader = {
				area = society
				has_trait = leader_trait_expertise_statecraft
			}
		}

		modifier = {
			factor = 1.25
			is_authoritarian = yes
		}

		modifier = {
			factor = 1.5
			has_ethic = ethic_fanatic_authoritarian
		}

		modifier = {
			factor = 0.1
			NOT = { is_active_resolution = resolution_custodian_galpol }
		}

		modifier = {
			factor = 10
			is_active_resolution = resolution_custodian_galpol
		}

		modifier = {
			factor = 2
			has_valid_civic = civic_police_state
		}

		modifier = {
			factor = 1.5
			has_valid_civic = civic_cutthroat_politics
		}

		modifier = {
			factor = 0.25
			has_valid_civic = civic_beacon_of_liberty
		}
	}

	ai_weight = {
		factor = @pw_tech_ai_weight
		modifier = {
			factor = 2
			research_leader = {
				area = society
				has_trait = leader_trait_expertise_statecraft
			}
		}
	}
}

# Enigma Engine
pw_tech_metaphysical_singularity = {
	area = physics
	cost = @pw_tech_cost_5
	tier = 5
	category = { computing }
	prerequisites = {
		pw_tech_planetary_mega_engineering
		tech_physics_3
		tech_positronic_implants
	}
	weight = @tier5weight2
	is_rare = yes

	potential = {
		is_machine_empire = yes
	}

	prereqfor_desc = {
		custom = {
			title = pw_prereq_enigmas
			desc = pw_prereq_enigmas_desc
		}
	}

	weight_modifier = {
		factor = @pw_tech_weight_mod

		modifier = {
			factor = 1.5
			research_leader = {
				area = physics
				has_trait = leader_trait_expertise_computing
			}
		}

		modifier = {
			factor = 1.5
			research_leader = {
				area = physics
				has_trait = leader_trait_spark_of_genius
			}
		}

		modifier = {
			factor = 1.5
			research_leader = {
				area = physics
				has_trait = leader_trait_curator
			}
		}

		modifier = {
			factor = @ap_technological_ascendancy_rare_tech
			has_ascension_perk = ap_technological_ascendancy
		}

		modifier = {
			factor = @federation_perk_factor
			has_federation = yes
			federation = {
				has_federation_perk = rare_tech_boost
				any_member = { has_technology = pw_tech_metaphysical_singularity }
			}
		}

		modifier = {
			factor = 2
			has_ascension_perk = ap_enigmatic_engineering
		}

		modifier = {
			factor = 2
			has_valid_civic = civic_machine_introspective
		}

		modifier = {
			factor = 2
			has_valid_civic = civic_machine_predictive_analysis
		}
	}

	ai_weight = {
		factor = @pw_tech_ai_weight
		modifier = {
			factor = 2
			research_leader = {
				area = physics
				has_trait = leader_trait_expertise_computing
			}
		}
	}
}

# Solipsist Debate Hall
pw_tech_metacognition_dialectics = {
	area = society
	cost = @pw_tech_cost_4
	tier = 5
	category = { statecraft }
	prerequisites = {
		pw_tech_planetary_mega_engineering
		tech_hive_confluence
		tech_society_3
	}
	weight = @tier5weight1
	is_rare = yes

	potential = {
		is_hive_empire = yes
	}

	weight_modifier = {
		factor = @pw_tech_weight_mod

		modifier = {
			factor = 1.5
			research_leader = {
				area = society
				has_trait = leader_trait_expertise_statecraft
			}
		}

		modifier = {
			factor = 1.5
			research_leader = {
				area = society
				has_trait = leader_trait_spark_of_genius
			}
		}

		modifier = {
			factor = 1.5
			research_leader = {
				area = society
				has_trait = leader_trait_curator
			}
		}

		modifier = {
			factor = @ap_technological_ascendancy_rare_tech
			has_ascension_perk = ap_technological_ascendancy
		}

		modifier = {
			factor = @federation_perk_factor
			has_federation = yes
			federation = {
				has_federation_perk = rare_tech_boost
				any_member = { has_technology = pw_tech_metaphysical_singularity }
			}
		}

		modifier = {
			factor = 1.5
			has_valid_civic = civic_hive_divided_attention
		}

		modifier = {
			factor = 1.5
			has_valid_civic = civic_hive_natural_neural_network
		}

		modifier = {
			factor = 1.5
			has_valid_civic = civic_hive_pooled_knowledge
		}

		modifier = {
			factor = 1.5
			has_valid_civic = civic_hive_memorialist
		}

		modifier = {
			factor = 0.5
			has_valid_civic = civic_hive_one_mind
		}
	}

	ai_weight = {
		factor = @pw_tech_ai_weight
		modifier = {
			factor = 2
			research_leader = {
				area = society
				has_trait = leader_trait_expertise_statecraft
			}
		}
	}
}

# Guardian Angel
pw_tech_guardian_angel = {
	area = society
	cost = @pw_tech_cost_2
	tier = 4
	category = { military_theory }
	prerequisites = {
		pw_tech_planetary_mega_engineering
		tech_planetary_defenses
		tech_combat_training
	}
	weight = @tier4weight3
	is_rare = yes

	weight_modifier = {
		factor = @pw_tech_weight_mod

		modifier = {
			factor = 1.5
			research_leader = {
				area = society
				has_trait = leader_trait_expertise_military_theory
			}
		}

		modifier = {
			factor = 1.5
			research_leader = {
				area = society
				has_trait = leader_trait_spark_of_genius
			}
		}

		modifier = {
			factor = 1.5
			research_leader = {
				area = society
				has_trait = leader_trait_curator
			}
		}

		modifier = {
			factor = @ap_technological_ascendancy_rare_tech
			has_ascension_perk = ap_technological_ascendancy
		}

		modifier = {
			factor = @federation_perk_factor
			has_federation = yes
			federation = {
				has_federation_perk = rare_tech_boost
				any_member = { has_technology = pw_tech_guardian_angel }
			}
		}

		modifier = {
			factor = 1.5
			has_valid_civic = civic_citizen_service
		}

		modifier = {
			factor = 1.5
			has_valid_civic = civic_distinguished_admiralty
		}

		modifier = {
			factor = 1.5
			has_valid_civic = civic_warrior_culture
		}

		modifier = {
			factor = 1.5
			has_valid_civic = civic_private_military_companies
		}

		modifier = {
			factor = 1.5
			has_valid_civic = civic_hive_strength_of_legions
		}

		modifier = {
			factor = 1.5
			has_valid_civic = civic_hive_devouring_swarm
		}

		modifier = {
			factor = 1.5
			has_valid_civic = civic_machine_warbots
		}

		modifier = {
			factor = 1.5
			has_valid_civic = civic_machine_terminator
		}

		modifier = {
			factor = 0.5
			is_pacifist = yes
		}

		modifier = {
			factor = 2
			is_at_war = yes
		}
	}

	ai_weight = {
		factor = @pw_tech_ai_weight
		modifier = {
			factor = 2
			research_leader = {
				area = society
				has_trait = leader_trait_expertise_military_theory
			}
		}
	}
}

# Guardian Angel - Upgrade: Stellar Sentinel
pw_tech_stellar_sentinel = {
	area = society
	cost = @pw_tech_cost_4
	tier = 5
	category = { military_theory }
	prerequisites = {
		pw_tech_guardian_angel
	}
	weight = @tier5weight1
	is_rare = yes

	weight_modifier = {
		factor = @pw_tech_weight_mod

		modifier = {
			factor = 0
			count_owned_planet = {
				count < 1
				limit = {
					has_active_building = pw_building_guardian_angel
				}
			}
		}

		modifier = {
			factor = 2
			count_owned_planet = {
				count > 1
				limit = {
					has_active_building = pw_building_guardian_angel
				}
			}
		}

		modifier = {
			factor = 1.5
			research_leader = {
				area = society
				has_trait = leader_trait_expertise_military_theory
			}
		}

		modifier = {
			factor = 1.5
			research_leader = {
				area = society
				has_trait = leader_trait_spark_of_genius
			}
		}

		modifier = {
			factor = 1.5
			research_leader = {
				area = society
				has_trait = leader_trait_curator
			}
		}

		modifier = {
			factor = @ap_technological_ascendancy_rare_tech
			has_ascension_perk = ap_technological_ascendancy
		}

		modifier = {
			factor = @federation_perk_factor
			has_federation = yes
			federation = {
				has_federation_perk = rare_tech_boost
				any_member = { has_technology = pw_tech_stellar_sentinel }
			}
		}

		modifier = {
			factor = 1.25
			has_valid_civic = civic_citizen_service
		}

		modifier = {
			factor = 1.25
			has_valid_civic = civic_distinguished_admiralty
		}

		modifier = {
			factor = 1.25
			has_valid_civic = civic_warrior_culture
		}

		modifier = {
			factor = 1.25
			has_valid_civic = civic_private_military_companies
		}

		modifier = {
			factor = 1.25
			has_valid_civic = civic_hive_strength_of_legions
		}

		modifier = {
			factor = 1.25
			has_valid_civic = civic_hive_devouring_swarm
		}

		modifier = {
			factor = 1.25
			has_valid_civic = civic_machine_warbots
		}

		modifier = {
			factor = 1.25
			has_valid_civic = civic_machine_terminator
		}

		modifier = {
			factor = 0.5
			is_pacifist = yes
		}

		modifier = {
			factor = 2
			is_at_war = yes
		}
	}

	ai_weight = {
		factor = @pw_tech_ai_weight
		modifier = {
			factor = 2
			research_leader = {
				area = society
				has_trait = leader_trait_expertise_military_theory
			}
		}
	}
}

# Mantle Crucible
pw_tech_planetary_mantle_production = {
	area = engineering
	category = { materials }
	tier = 4
	cost = @pw_tech_cost_2
	prerequisites = {
		pw_tech_planetary_mega_engineering
		tech_advanced_metallurgy_2
		tech_mining_3
	}
	weight = @tier4weight3
	is_rare = yes

	weight_modifier = {
		factor = @pw_tech_weight_mod

		modifier = {
			factor = 1.5
			research_leader = {
				area = engineering
				has_trait = leader_trait_expertise_materials
			}
		}

		modifier = {
			factor = 1.5
			research_leader = {
				area = engineering
				has_trait = leader_trait_spark_of_genius
			}
		}

		modifier = {
			factor = 1.5
			research_leader = {
				area = engineering
				has_trait = leader_trait_curator
			}
		}

		modifier = {
			factor = @ap_technological_ascendancy_rare_tech
			has_ascension_perk = ap_technological_ascendancy
		}

		modifier = {
			factor = @federation_perk_factor
			has_federation = yes
			federation = {
				has_federation_perk = rare_tech_boost
				any_member = { has_technology = pw_tech_planetary_mantle_production }
			}
		}

		modifier = {
			factor = 2
			OR = {
				has_ascension_perk = ap_world_shaper
				has_ascension_perk = ap_hive_worlds
				has_ascension_perk = ap_machine_worlds
			}
		}

		modifier = {
			factor = 0.5
			has_valid_civic = civic_environmentalist
		}

		modifier = {
			factor = 2
			has_valid_civic = civic_mining_guilds
		}

		modifier = {
			factor = 2
			has_valid_civic = civic_hive_devouring_swarm
			is_lithoid = yes
		}

		modifier = {
			factor = 1.25
			is_lithoid = yes
		}

		modifier = {
			factor = 2
			has_valid_civic = civic_machine_rockbreakers
		}
	}

	ai_weight = {
		factor = @pw_tech_ai_weight
		modifier = {
			factor = 2
			research_leader = {
				area = engineering
				has_trait = leader_trait_expertise_materials
			}
		}
	}
}

# Titan Forge
pw_tech_titan_forge = {
	area = engineering
	category = { materials }
	tier = 5
	cost = @pw_tech_cost_4
	prerequisites = {
		pw_tech_planetary_mantle_production
		tech_alloys_2
	}
	weight = @tier5weight2
	is_rare = yes

	prereqfor_desc = {
		custom = {
			title = pw_mantle_crucible_upgrade
			desc = pw_mantle_crucible_upgrade_forge_desc
		}
	}

	weight_modifier = {
		factor = @pw_tech_weight_mod

		modifier = {
			factor = 1.5
			research_leader = {
				area = engineering
				has_trait = leader_trait_expertise_materials
			}
		}

		modifier = {
			factor = 1.5
			research_leader = {
				area = engineering
				has_trait = leader_trait_spark_of_genius
			}
		}

		modifier = {
			factor = 1.5
			research_leader = {
				area = engineering
				has_trait = leader_trait_curator
			}
		}

		modifier = {
			factor = @ap_technological_ascendancy_rare_tech
			has_ascension_perk = ap_technological_ascendancy
		}

		modifier = {
			factor = @federation_perk_factor
			has_federation = yes
			federation = {
				has_federation_perk = rare_tech_boost
				any_member = { has_technology = pw_tech_titan_forge }
			}
		}

		modifier = {
			factor = 0.5
			has_valid_civic = civic_environmentalist
		}

		modifier = {
			factor = 2
			has_valid_civic = civic_mining_guilds
		}

		modifier = {
			factor = 2
			has_valid_civic = civic_hive_devouring_swarm
			is_lithoid = yes
		}

		modifier = {
			factor = 1.25
			is_lithoid = yes
		}

		modifier = {
			factor = 2
			has_valid_civic = civic_machine_rockbreakers
		}

		modifier = {
			factor = 2
			has_policy_flag = economic_policy_military
		}
	}

	ai_weight = {
		factor = @pw_tech_ai_weight
		modifier = {
			factor = 2
			research_leader = {
				area = engineering
				has_trait = leader_trait_expertise_materials
			}
		}
	}
}

# Titan Forge Event Techs:
pw_tech_titan_forge_crystals = {
	area = engineering
	category = { materials }
	tier = 5
	cost = @pw_tech_cost_5
	prerequisites = {
		pw_tech_titan_forge
	}
	weight = 0

	potential = {
		has_country_flag = pw_titan_forge_built
	}

	modifier = {
		country_rare_crystals_produces_mult = 0.1
	}

	ai_weight = {
		factor = 10
	}
}

pw_tech_titan_forge_gases = {
	area = engineering
	category = { materials }
	tier = 5
	cost = @pw_tech_cost_5
	prerequisites = {
		pw_tech_titan_forge
	}
	weight = 0

	potential = {
		has_country_flag = pw_titan_forge_built
	}

	modifier = {
		country_exotic_gases_produces_mult = 0.1
	}

	ai_weight = {
		factor = 10
	}
}

pw_tech_titan_forge_motes = {
	area = physics
	category = { particles }
	tier = 5
	cost = @pw_tech_cost_5
	prerequisites = {
		pw_tech_titan_forge
	}
	weight = 0

	potential = {
		has_country_flag = pw_titan_forge_built
	}

	modifier = {
		country_volatile_motes_produces_mult = 0.1
	}

	ai_weight = {
		factor = 10
	}
}

# Industrial Hearth
pw_tech_industrial_hearth = {
	area = engineering
	category = { industry }
	tier = 5
	cost = @pw_tech_cost_4
	prerequisites = {
		pw_tech_planetary_mantle_production
	}
	weight = @tier5weight2
	is_rare = yes

	potential = {
		country_uses_consumer_goods = yes
	}

	prereqfor_desc = {
		custom = {
			title = pw_mantle_crucible_upgrade
			desc = pw_mantle_crucible_upgrade_industry_desc
		}
	}

	weight_modifier = {
		factor = @pw_tech_weight_mod

		modifier = {
			factor = 1.5
			research_leader = {
				area = engineering
				has_trait = leader_trait_expertise_industry
			}
		}

		modifier = {
			factor = 1.5
			research_leader = {
				area = engineering
				has_trait = leader_trait_spark_of_genius
			}
		}

		modifier = {
			factor = 1.5
			research_leader = {
				area = engineering
				has_trait = leader_trait_curator
			}
		}

		modifier = {
			factor = @ap_technological_ascendancy_rare_tech
			has_ascension_perk = ap_technological_ascendancy
		}

		modifier = {
			factor = @federation_perk_factor
			has_federation = yes
			federation = {
				has_federation_perk = rare_tech_boost
				any_member = { has_technology = pw_tech_industrial_hearth }
			}
		}

		modifier = {
			factor = 0.5
			has_valid_civic = civic_environmentalist
		}

		modifier = {
			factor = 2
			NOT = { has_policy_flag = economic_policy_military }
		}
	}

	ai_weight = {
		factor = @pw_tech_ai_weight
		modifier = {
			factor = 2
			research_leader = {
				area = engineering
				has_trait = leader_trait_expertise_industry
			}
		}
	}
}

# Industrial Hearth techs:
pw_tech_industrial_hearth_industry_military = {
	area = engineering
	category = { materials }
	tier = 5
	cost = @pw_tech_cost_5
	prerequisites = {
		pw_tech_industrial_hearth
	}
	weight = 0

	potential = {
		has_country_flag = pw_industrial_hearth_built
	}

	modifier = {
		planet_jobs_alloys_produces_mult = 0.1
	}

	ai_weight = {
		factor = 20
	}
}

pw_tech_industrial_hearth_industry_civilian = {
	area = engineering
	category = { industry }
	tier = 5
	cost = @pw_tech_cost_5
	prerequisites = {
		pw_tech_industrial_hearth
	}
	weight = 0

	potential = {
		has_country_flag = pw_industrial_hearth_built
	}

	modifier = {
		planet_jobs_consumer_goods_produces_mult = 0.1
	}

	ai_weight = {
		factor = 20
	}
}

pw_tech_industrial_hearth_housing = {
	area = engineering
	category = { industry }
	tier = 5
	cost = @pw_tech_cost_5
	prerequisites = {
		pw_tech_industrial_hearth
	}
	weight = 0

	potential = {
		has_country_flag = pw_industrial_hearth_built
	}

	modifier = {
		planet_housing_mult = 0.10
	}

	ai_weight = {
		factor = 20
	}
}

pw_tech_industrial_hearth_design = {
	area = physics
	category = { computing }
	tier = 5
	cost = @pw_tech_cost_5
	prerequisites = {
		pw_tech_industrial_hearth
	}
	weight = 0

	potential = {
		has_country_flag = pw_industrial_hearth_built
	}

	modifier = {
		planet_pops_consumer_goods_upkeep_mult = -0.20
	}

	ai_weight = {
		factor = 20
	}
}

pw_tech_industrial_hearth_design_megacorp = {
	area = physics
	category = { computing }
	tier = 5
	cost = @pw_tech_cost_5
	prerequisites = {
		pw_tech_industrial_hearth
	}
	weight = 0

	potential = {
		has_country_flag = pw_industrial_hearth_built
	}

	modifier = {
		trade_value_mult = 0.15
	}

	ai_weight = {
		factor = 20
	}
}

pw_tech_industrial_hearth_gardens = {
	area = society
	category = { new_worlds }
	tier = 5
	cost = @pw_tech_cost_5
	prerequisites = {
		pw_tech_industrial_hearth
	}
	weight = 0

	potential = {
		has_country_flag = pw_industrial_hearth_built
	}

	modifier = {
		pop_environment_tolerance = 0.10
	}

	ai_weight = {
		factor = 20
	}
}

pw_tech_industrial_hearth_production = {
	area = society
	category = { statecraft }
	tier = 5
	cost = @pw_tech_cost_5
	prerequisites = {
		pw_tech_industrial_hearth
	}
	weight = 0

	potential = {
		has_country_flag = pw_industrial_hearth_built
	}

	modifier = {
		planet_jobs_produces_mult = 0.10
		planet_jobs_upkeep_mult = 0.10
	}

	ai_weight = {
		factor = 20
	}
}

# Pavilion of Wonders
pw_tech_great_art_exhibition = {
	area = society
	category = { statecraft }
	tier = 4
	cost = @pw_tech_cost_1
	prerequisites = {
		pw_tech_planetary_mega_engineering
	}
	weight = @tier4weight2
	is_rare = yes

	potential = {
		is_gestalt = no
	}

	weight_modifier = {
		factor = @pw_tech_weight_mod

		modifier = {
			factor = 1.5
			research_leader = {
				area = society
				has_trait = leader_trait_expertise_statecraft
			}
		}

		modifier = {
			factor = 1.5
			research_leader = {
				area = society
				has_trait = leader_trait_spark_of_genius
			}
		}

		modifier = {
			factor = 1.5
			research_leader = {
				area = society
				has_trait = leader_trait_curator
			}
		}

		modifier = {
			factor = @ap_technological_ascendancy_rare_tech
			has_ascension_perk = ap_technological_ascendancy
		}

		modifier = {
			factor = @federation_perk_factor
			has_federation = yes
			federation = {
				has_federation_perk = rare_tech_boost
				any_member = { has_technology = pw_tech_great_art_exhibition }
			}
		}

		modifier = {
			factor = 0.25
			has_valid_civic = civic_fanatic_purifiers
		}

		modifier = {
			factor = 0.5
			has_valid_civic = civic_barbaric_despoilers
		}

		modifier = {
			factor = 0.5
			is_militarist = yes
		}

		modifier = {
			factor = 2
			is_pacifist = yes
		}

		modifier = {
			factor = 2
			is_xenophobe = yes
		}

		modifier = {
			factor = 2
			is_xenophile = yes
		}

		modifier = {
			factor = 2
			has_ascension_perk = pw_ap_planetary_wonders
		}

		modifier = {
			factor = 5
			has_ascension_perk = ap_one_vision
		}

		modifier = {
			factor = 5
			OR = {
				has_megastructure = mega_art_installation_restored
				has_megastructure = mega_art_installation_restored_2
				has_megastructure = mega_art_installation_1
				has_megastructure = mega_art_installation_2
				has_megastructure = mega_art_installation_3
				has_megastructure = mega_art_installation_4
			}
		}
	}

	ai_weight = {
		factor = @pw_tech_ai_weight
		modifier = {
			factor = 2
			research_leader = {
				area = society
				has_trait = leader_trait_expertise_statecraft
			}
		}
	}
}

# Campaign (Pavilion of Wonders)
pw_tech_artistic_dissemination = {
	area = society
	category = { statecraft }
	tier = 4
	cost = @pw_tech_cost_3
	prerequisites = {
		pw_tech_great_art_exhibition
	}
	weight = @tier4weight3

	potential = {
		is_gestalt = no
		any_owned_planet = {
			has_active_building = pw_building_pavilion_of_wonders
		}
	}

	weight_modifier = {
		factor = @pw_tech_weight_mod

		modifier = {
			factor = 1.5
			research_leader = {
				area = society
				has_trait = leader_trait_expertise_statecraft
			}
		}

		modifier = {
			factor = 1.5
			research_leader = {
				area = society
				has_trait = leader_trait_spark_of_genius
			}
		}

		modifier = {
			factor = 1.5
			research_leader = {
				area = society
				has_trait = leader_trait_curator
			}
		}

		modifier = {
			factor = @ap_technological_ascendancy_rare_tech
			has_ascension_perk = ap_technological_ascendancy
		}

		modifier = {
			factor = @federation_perk_factor
			has_federation = yes
			federation = {
				has_federation_perk = rare_tech_boost
				any_member = { has_technology = pw_tech_great_art_exhibition }
			}
		}

		modifier = {
			factor = 0.25
			has_valid_civic = civic_fanatic_purifiers
		}

		modifier = {
			factor = 0.5
			has_valid_civic = civic_barbaric_despoilers
		}

		modifier = {
			factor = 0.5
			is_militarist = yes
		}

		modifier = {
			factor = 2
			is_pacifist = yes
		}

		modifier = {
			factor = 2
			is_xenophobe = yes
		}

		modifier = {
			factor = 2
			is_xenophile = yes
		}

		modifier = {
			factor = 2
			has_ascension_perk = pw_ap_planetary_wonders
		}

		modifier = {
			factor = 5
			has_ascension_perk = ap_one_vision
		}
	}

	ai_weight = {
		factor = @pw_tech_ai_weight
		modifier = {
			factor = 2
			research_leader = {
				area = society
				has_trait = leader_trait_expertise_statecraft
			}
		}
	}
}

# Fair of Worlds
pw_tech_xeno_art_integration = {
	area = society
	category = { statecraft }
	tier = 5
	cost = @pw_tech_cost_4
	prerequisites = {
		pw_tech_great_art_exhibition
	}
	weight = @tier5weight1
	is_rare = yes

	potential = {
		is_gestalt = no
		is_xenophile = yes
	}

	prereqfor_desc = {
		custom = {
			title = pw_tech_great_art_exhibition_upgrade
			desc = pw_tech_great_art_exhibition_integration_desc
		}
	}

	weight_modifier = {
		factor = 0.5

		modifier = {
			factor = 1.5
			research_leader = {
				area = society
				has_trait = leader_trait_expertise_statecraft
			}
		}

		modifier = {
			factor = 1.5
			research_leader = {
				area = society
				has_trait = leader_trait_spark_of_genius
			}
		}

		modifier = {
			factor = 1.5
			research_leader = {
				area = society
				has_trait = leader_trait_curator
			}
		}

		modifier = {
			factor = @ap_technological_ascendancy_rare_tech
			has_ascension_perk = ap_technological_ascendancy
		}

		modifier = {
			factor = @federation_perk_factor
			has_federation = yes
			federation = {
				has_federation_perk = rare_tech_boost
				any_member = { has_technology = pw_tech_xeno_art_integration }
			}
		}

		modifier = {
			factor = 0
			is_xenophile = no
		}

		modifier = {
			factor = 2
			has_ethic = ethic_fanatic_xenophile
		}

		modifier = {
			factor = 0.05
			NOT = {
				has_country_flag = pw_pavilion_of_wonders_built
			}
		}

		modifier = {
			factor = 0.5
			OR = {
				has_ethic = ethic_militarist
				has_ethic = ethic_fanatic_militarist
			}
		}

		modifier = {
			factor = 2
			OR = {
				has_ethic = ethic_pacifist
				has_ethic = ethic_fanatic_pacifist
			}
		}

		modifier = {
			factor = 2
			has_ascension_perk = pw_ap_planetary_wonders
		}

		modifier = {
			factor = 5
			has_ascension_perk = ap_one_vision
		}
	}

	ai_weight = {
		factor = @pw_tech_ai_weight
		modifier = {
			factor = 2
			research_leader = {
				area = society
				has_trait = leader_trait_expertise_statecraft
			}
		}
	}
}

# Cultural Diversity Studies
pw_tech_cultural_diversity_studies = {
	area = society
	category = { statecraft }
	tier = 5
	cost = @pw_tech_cost_5
	prerequisites = {
		pw_tech_xeno_art_integration
	}
	weight = 0 #Only available with event.
	is_rare = yes

	potential = {
		is_gestalt = no
		is_xenophile = yes
	}

	modifier = {
		envoys_add = 1
		envoy_improve_relations_mult = 0.25
	}

	ai_weight = {
		factor = @pw_tech_ai_weight
		modifier = {
			factor = 2
			research_leader = {
				area = society
				has_trait = leader_trait_expertise_statecraft
			}
		}
	}
}

# Campaign -> Artistic Exaltation
pw_tech_artistic_exaltation = {
	area = society
	category = { statecraft }
	tier = 5
	cost = @pw_tech_cost_4
	prerequisites = {
		pw_tech_xeno_art_integration
	}
	weight = @tier5weight1

	potential = {
		is_gestalt = no
		is_xenophile = yes
		any_owned_planet = {
			has_active_building = pw_building_fair_of_worlds
		}
	}

	weight_modifier = {
		factor = @pw_tech_weight_mod

		modifier = {
			factor = 1.5
			research_leader = {
				area = society
				has_trait = leader_trait_expertise_statecraft
			}
		}

		modifier = {
			factor = 1.5
			research_leader = {
				area = society
				has_trait = leader_trait_spark_of_genius
			}
		}

		modifier = {
			factor = 1.5
			research_leader = {
				area = society
				has_trait = leader_trait_curator
			}
		}

		modifier = {
			factor = @ap_technological_ascendancy_rare_tech
			has_ascension_perk = ap_technological_ascendancy
		}

		modifier = {
			factor = @federation_perk_factor
			has_federation = yes
			federation = {
				has_federation_perk = rare_tech_boost
				any_member = { has_technology = pw_tech_great_art_exhibition }
			}
		}

		modifier = {
			factor = 0.25
			has_valid_civic = civic_fanatic_purifiers
		}

		modifier = {
			factor = 0.5
			has_valid_civic = civic_barbaric_despoilers
		}

		modifier = {
			factor = 0.5
			OR = {
				has_ethic = ethic_militarist
				has_ethic = ethic_fanatic_militarist
			}
		}

		modifier = {
			factor = 2
			OR = {
				has_ethic = ethic_pacifist
				has_ethic = ethic_fanatic_pacifist
			}
		}

		modifier = {
			factor = 2
			has_ascension_perk = pw_ap_planetary_wonders
		}

		modifier = {
			factor = 5
			has_ascension_perk = ap_one_vision
		}
	}

	ai_weight = {
		factor = @pw_tech_ai_weight
		modifier = {
			factor = 2
			research_leader = {
				area = society
				has_trait = leader_trait_expertise_statecraft
			}
		}
	}
}

# Museum of the Grotesque
pw_tech_xeno_art_alienation = {
	area = society
	category = { statecraft }
	tier = 5
	cost = @pw_tech_cost_4
	prerequisites = {
		pw_tech_great_art_exhibition
	}
	weight = @tier5weight1
	is_rare = yes

	potential = {
		is_gestalt = no
		is_xenophobe = yes
	}

	prereqfor_desc = {
		custom = {
			title = pw_tech_great_art_exhibition_upgrade
			desc = pw_tech_great_art_exhibition_alienation_desc
		}
	}

	weight_modifier = {
		factor = 0.5

		modifier = {
			factor = 1.5
			research_leader = {
				area = society
				has_trait = leader_trait_expertise_statecraft
			}
		}

		modifier = {
			factor = 1.5
			research_leader = {
				area = society
				has_trait = leader_trait_spark_of_genius
			}
		}

		modifier = {
			factor = 1.5
			research_leader = {
				area = society
				has_trait = leader_trait_curator
			}
		}

		modifier = {
			factor = @ap_technological_ascendancy_rare_tech
			has_ascension_perk = ap_technological_ascendancy
		}

		modifier = {
			factor = @federation_perk_factor
			has_federation = yes
			federation = {
				has_federation_perk = rare_tech_boost
				any_member = { has_technology = pw_tech_xeno_art_alienation }
			}
		}

		modifier = {
			factor = 0
			is_xenophobe = no
		}

		modifier = {
			factor = 2
			has_ethic = ethic_fanatic_xenophobe
		}

		modifier = {
			factor = 0.05
			NOT = {
				has_country_flag = pw_pavilion_of_wonders_built
			}
		}

		modifier = {
			factor = 1.5
			OR = {
				has_ethic = ethic_militarist
				has_ethic = ethic_fanatic_militarist
			}
		}

		modifier = {
			factor = 1.5
			OR = {
				has_ethic = ethic_pacifist
				has_ethic = ethic_fanatic_pacifist
			}
		}

		modifier = {
			factor = 2
			has_ascension_perk = pw_ap_planetary_wonders
		}

		modifier = {
			factor = 5
			has_ascension_perk = ap_one_vision
		}
	}

	ai_weight = {
		factor = @pw_tech_ai_weight
		modifier = {
			factor = 2
			research_leader = {
				area = society
				has_trait = leader_trait_expertise_industry
			}
		}
	}
}

# Cultural Hegemony Studies
pw_tech_cultural_hegemony_studies = {
	area = society
	category = { statecraft }
	tier = 5
	cost = @pw_tech_cost_5
	prerequisites = {
		pw_tech_xeno_art_alienation
	}
	weight = 0 #Only available with event.
	is_rare = yes

	potential = {
		is_gestalt = no
		is_xenophobe = yes
	}

	modifier = {
		envoys_add = 1
		envoy_harm_relations_mult = 0.15
	}

	ai_weight = {
		factor = @pw_tech_ai_weight
		modifier = {
			factor = 2
			research_leader = {
				area = society
				has_trait = leader_trait_expertise_statecraft
			}
		}
	}
}

pw_tech_artistic_defamation = {
	area = society
	category = { statecraft }
	tier = 5
	cost = @pw_tech_cost_4
	prerequisites = {
		pw_tech_xeno_art_alienation
	}
	weight = @tier5weight1

	potential = {
		is_gestalt = no
		is_xenophobe = yes
		any_owned_planet = {
			has_active_building = pw_building_museum_of_the_grotesque
		}
	}

	weight_modifier = {
		factor = @pw_tech_weight_mod

		modifier = {
			factor = 1.5
			research_leader = {
				area = society
				has_trait = leader_trait_expertise_statecraft
			}
		}

		modifier = {
			factor = 1.5
			research_leader = {
				area = society
				has_trait = leader_trait_spark_of_genius
			}
		}

		modifier = {
			factor = 1.5
			research_leader = {
				area = society
				has_trait = leader_trait_curator
			}
		}

		modifier = {
			factor = @ap_technological_ascendancy_rare_tech
			has_ascension_perk = ap_technological_ascendancy
		}

		modifier = {
			factor = @federation_perk_factor
			has_federation = yes
			federation = {
				has_federation_perk = rare_tech_boost
				any_member = { has_technology = pw_tech_great_art_exhibition }
			}
		}

		modifier = {
			factor = 0.25
			has_valid_civic = civic_fanatic_purifiers
		}

		modifier = {
			factor = 0.5
			has_valid_civic = civic_barbaric_despoilers
		}

		modifier = {
			factor = 0.5
			OR = {
				has_ethic = ethic_militarist
				has_ethic = ethic_fanatic_militarist
			}
		}

		modifier = {
			factor = 2
			OR = {
				has_ethic = ethic_pacifist
				has_ethic = ethic_fanatic_pacifist
			}
		}

		modifier = {
			factor = 2
			has_ascension_perk = pw_ap_planetary_wonders
		}

		modifier = {
			factor = 5
			has_ascension_perk = ap_one_vision
		}
	}

	ai_weight = {
		factor = @pw_tech_ai_weight
		modifier = {
			factor = 2
			research_leader = {
				area = society
				has_trait = leader_trait_expertise_statecraft
			}
		}
	}
}

# Holy Reliquary
pw_tech_spiritual_artifacts_studies = {
	area = society
	category = { statecraft }
	tier = 5
	cost = @pw_tech_cost_4
	prerequisites = {
		pw_tech_planetary_mega_engineering
		tech_transcendent_faith
	}
	weight = @tier5weight2
	is_rare = yes

	potential = {
		is_gestalt = no
		is_spiritualist = yes
	}

	weight_modifier = {
		factor = @pw_tech_weight_mod

		modifier = {
			factor = 1.5
			research_leader = {
				area = society
				has_trait = leader_trait_expertise_statecraft
			}
		}

		modifier = {
			factor = 1.5
			research_leader = {
				area = society
				has_trait = leader_trait_spark_of_genius
			}
		}

		modifier = {
			factor = 1.5
			research_leader = {
				area = society
				has_trait = leader_trait_curator
			}
		}

		modifier = {
			factor = @ap_technological_ascendancy_rare_tech
			has_ascension_perk = ap_technological_ascendancy
		}

		modifier = {
			factor = @federation_perk_factor
			has_federation = yes
			federation = {
				has_federation_perk = rare_tech_boost
				any_member = { has_technology = pw_tech_spiritual_artifacts_studies }
			}
		}

		modifier = {
			factor = 0
			is_spiritualist = no
		}

		modifier = {
			factor = 2
			has_ethic = ethic_fanatic_spiritualist
		}

		modifier = {
			factor = 1.5
			OR = {
				has_valid_civic = civic_death_cult
				has_valid_civic = civic_death_cult_corporate
			}
		}

		modifier = {
			factor = 1.5
			has_valid_civic = civic_exalted_priesthood
		}

		modifier = {
			factor = 2
			has_ascension_perk = pw_ap_planetary_wonders
		}

		modifier = {
			factor = 3
			has_ascension_perk = ap_consecrated_worlds
		}

		modifier = {
			factor = 1.5
			num_owned_relics > 1
		}

		modifier = {
			factor = 2
			num_owned_relics > 2
		}

		modifier = {
			factor = 2
			num_owned_relics > 3
		}
	}

	ai_weight = {
		factor = @pw_tech_ai_weight
		modifier = {
			factor = 2
			research_leader = {
				area = society
				has_trait = leader_trait_expertise_statecraft
			}
		}
	}
}

#Expansion bonus techs:
pw_tech_holy_reliquary_inward_expansion = {
	area = society
	category = { statecraft }
	tier = 5
	cost = @pw_grand_archive_tech_cost_final
	prerequisites = {
		pw_tech_spiritual_artifacts_studies
	}
	weight = 0
	is_rare = yes

	potential = {
		has_country_flag = pw_holy_reliquary_built
	}

	modifier = {
		planet_max_districts_add = 1
	}

	ai_weight = {
		factor = 20
	}
}

pw_tech_holy_reliquary_revealed_destiny = {
	area = society
	category = { new_worlds }
	tier = 5
	cost = @pw_grand_archive_tech_cost_final
	prerequisites = {
		pw_tech_spiritual_artifacts_studies
	}
	weight = 0
	is_rare = yes

	potential = {
		has_country_flag = pw_holy_reliquary_built
	}

	modifier = {
		country_starbase_capacity_add = 4
	}

	ai_weight = {
		factor = 20
	}
}

# Holy Reliquary (final Tech)
pw_tech_holy_reliquary_venerable_tradition = {
	area = society
	category = { statecraft }
	tier = 5
	cost = @pw_grand_archive_tech_cost_final
	prerequisites = {
		pw_tech_spiritual_artifacts_studies
	}
	weight = 0
	is_rare = yes

	potential = {
		has_country_flag = pw_holy_reliquary_built
	}

	modifier = {
		country_government_civic_points_add = 1
		pop_government_ethic_attraction = 0.15
	}

	ai_weight = {
		factor = 20
	}
}

# The Grand Archive
pw_tech_materialist_archiving = {
	area = physics
	category = { computing }
	tier = 5
	cost = @pw_tech_cost_4
	prerequisites = {
		pw_tech_planetary_mega_engineering
		tech_global_research_initiative
	}
	weight = @tier5weight2
	is_rare = yes

	potential = {
		is_gestalt = no
		is_materialist = yes
	}

	weight_modifier = {
		factor = @pw_tech_weight_mod

		modifier = {
			factor = 1.5
			research_leader = {
				area = physics
				has_trait = leader_trait_expertise_computing
			}
		}

		modifier = {
			factor = 1.5
			research_leader = {
				area = physics
				has_trait = leader_trait_spark_of_genius
			}
		}

		modifier = {
			factor = 1.5
			research_leader = {
				area = physics
				has_trait = leader_trait_curator
			}
		}

		modifier = {
			factor = @ap_technological_ascendancy_rare_tech
			has_ascension_perk = ap_technological_ascendancy
		}

		modifier = {
			factor = @federation_perk_factor
			has_federation = yes
			federation = {
				has_federation_perk = rare_tech_boost
				any_member = { has_technology = pw_tech_materialist_archiving }
			}
		}

		modifier = {
			factor = 0
			is_materialist = no
		}

		modifier = {
			factor = 2
			has_ethic = ethic_fanatic_materialist
		}

		modifier = {
			factor = 1.5
			has_valid_civic = civic_technocracy
		}

		modifier = {
			factor = 1.5
			has_valid_civic = civic_memorialist
		}

		modifier = {
			factor = 2
			has_ascension_perk = pw_ap_planetary_wonders
		}

		modifier = {
			factor = 2
			has_ascension_perk = ap_transcendent_learning
		}

		modifier = {
			factor = 1.5
			num_owned_relics > 1
		}

		modifier = {
			factor = 2
			num_owned_relics > 2
		}

		modifier = {
			factor = 2
			num_owned_relics > 3
		}
	}

	ai_weight = {
		factor = @pw_tech_ai_weight
		modifier = {
			factor = 2
			research_leader = {
				area = physics
				has_trait = leader_trait_expertise_computing
			}
		}
	}
}

# The Grand Archive -> Delve into secrets techs
pw_tech_grand_archive_genetic_secrets = {
	area = society
	category = { biology }
	tier = 5
	cost = @pw_grand_archive_tech_cost
	prerequisites = {
		pw_tech_materialist_archiving
	}
	weight = 0
	is_rare = yes

	potential = {
		has_country_flag = pw_grand_archive_built
	}

	modifier = {
		BIOLOGICAL_species_trait_points_add = 1
		modify_species_cost_mult = -0.25
	}

	ai_weight = {
		factor = @pw_tech_ai_weight
	}
}

pw_tech_grand_archive_lost_state_secrets = {
	area = society
	category = { statecraft }
	tier = 5
	cost = @pw_grand_archive_tech_cost
	prerequisites = {
		pw_tech_materialist_archiving
	}
	weight = 0
	is_rare = yes

	potential = {
		has_country_flag = pw_grand_archive_built
	}

	modifier = {
		country_leader_pool_size = 1
		country_naval_cap_add = 30
	}

	ai_weight = {
		factor = @pw_tech_ai_weight
	}
}

pw_tech_grand_archive_crucible_of_worlds_secrets = {
	area = society
	category = { new_worlds }
	tier = 5
	cost = @pw_grand_archive_tech_cost
	prerequisites = {
		pw_tech_materialist_archiving
	}
	weight = 0
	is_rare = yes

	potential = {
		has_country_flag = pw_grand_archive_built
	}

	modifier = {
		terraform_speed_mult = 0.25
		terraforming_cost_mult = -0.25
	}

	ai_weight = {
		factor = @pw_tech_ai_weight
	}
}

pw_tech_grand_archive_subspace_particle_secrets = {
	area = physics
	category = { particles }
	tier = 5
	cost = @pw_grand_archive_tech_cost
	prerequisites = {
		pw_tech_materialist_archiving
	}
	weight = 0
	is_rare = yes

	potential = {
		has_country_flag = pw_grand_archive_built
	}

	modifier = {
		ship_ftl_jumpdrive_range_mult = 0.15
		ship_jumpdrive_cooldown_mult = -0.15
	}

	ai_weight = {
		factor = @pw_tech_ai_weight
	}
}

pw_tech_grand_archive_omnidatabase_secrets = {
	area = physics
	category = { computing }
	tier = 5
	cost = @pw_grand_archive_tech_cost
	prerequisites = {
		pw_tech_materialist_archiving
	}
	weight = 0
	is_rare = yes

	potential = {
		has_country_flag = pw_grand_archive_built
	}

	modifier = {
		num_tech_alternatives_add = 1
		intel_decryption_add = 1
	}

	ai_weight = {
		factor = @pw_tech_ai_weight
	}
}

pw_tech_grand_archive_stellar_secrets = {
	area = physics
	category = { field_manipulation }
	tier = 5
	cost = @pw_grand_archive_tech_cost
	prerequisites = {
		pw_tech_materialist_archiving
	}
	weight = 0
	is_rare = yes

	potential = {
		has_country_flag = pw_grand_archive_built
	}

	modifier = {
		station_gatherers_produces_mult = 0.50
	}

	ai_weight = {
		factor = @pw_tech_ai_weight
	}
}

pw_tech_grand_archive_void_construction_secrets = {
	area = engineering
	category = { voidcraft }
	tier = 5
	cost = @pw_grand_archive_tech_cost
	prerequisites = {
		pw_tech_materialist_archiving
	}
	weight = 0
	is_rare = yes

	potential = {
		has_country_flag = pw_grand_archive_built
	}

	modifier = {
		megastructure_build_speed_mult = 0.15
		country_megastructure_build_cap_add = 1
	}

	ai_weight = {
		factor = @pw_tech_ai_weight
	}
}

pw_tech_grand_archive_mechanist_secrets = {
	area = engineering
	category = { industry }
	tier = 5
	cost = @pw_grand_archive_tech_cost
	prerequisites = {
		pw_tech_materialist_archiving
	}
	weight = 0
	is_rare = yes

	potential = {
		has_country_flag = pw_grand_archive_built
	}

	modifier = {
		ROBOT_species_trait_points_add = 1
		modify_species_cost_mult = -0.25
	}

	ai_weight = {
		factor = @pw_tech_ai_weight
	}
}

pw_tech_grand_archive_original_mechanist_secrets = {
	area = engineering
	category = { industry }
	tier = 5
	cost = @pw_grand_archive_tech_cost
	prerequisites = {
		pw_tech_grand_archive_mechanist_secrets
	}
	weight = 0
	is_rare = yes

	potential = {
		has_country_flag = pw_grand_archive_built
		has_origin = origin_mechanists
	}

	modifier = {
		planet_pop_assembly_mult = 0.15
		planet_pop_assemblers_upkeep_mult = -0.15
	}

	ai_weight = {
		factor = @pw_tech_ai_weight
	}
}

pw_tech_grand_archive_architectural_secrets = {
	area = engineering
	category = { materials }
	tier = 5
	cost = @pw_grand_archive_tech_cost
	prerequisites = {
		pw_tech_materialist_archiving
	}
	weight = 0
	is_rare = yes

	potential = {
		has_country_flag = pw_grand_archive_built
	}

	modifier = {
		planet_buildings_cost_mult = -0.15
		planet_max_buildings_add = 1
	}

	ai_weight = {
		factor = @pw_tech_ai_weight
	}
}

pw_tech_grand_archive_our_lost_secrets = {
	area = society
	category = { statecraft }
	tier = 5
	cost = @pw_grand_archive_tech_cost_final
	prerequisites = {
		pw_tech_grand_archive_genetic_secrets
		pw_tech_grand_archive_lost_state_secrets
		pw_tech_grand_archive_subspace_particle_secrets
		pw_tech_grand_archive_omnidatabase_secrets
		pw_tech_grand_archive_stellar_secrets
		pw_tech_grand_archive_void_construction_secrets
		pw_tech_grand_archive_mechanist_secrets
		pw_tech_grand_archive_architectural_secrets
	}
	weight = 0
	is_rare = yes

	potential = {
		has_country_flag = pw_grand_archive_built
	}

	modifier = {
		country_government_civic_points_add = 1
		pop_government_ethic_attraction = 0.15
	}

	ai_weight = {
		factor = @pw_tech_ai_weight
	}
}

# Transplanetary Logistics System
pw_tech_transplanetary_logistics = {
	area = society
	category = { new_worlds }
	tier = 5
	cost = @pw_tech_cost_4
	prerequisites = {
		pw_tech_planetary_mega_engineering
		tech_planetary_infrastructure_2
		tech_capital_productivity_3
	}
	weight = @tier5weight1
	is_rare = yes

	potential = {
		is_gestalt = no
		is_egalitarian = yes
	}

	weight_modifier = {
		factor = @pw_tech_weight_mod

		modifier = {
			factor = 1.5
			research_leader = {
				area = society
				has_trait = leader_trait_expertise_new_worlds
			}
		}

		modifier = {
			factor = 1.5
			research_leader = {
				area = society
				has_trait = leader_trait_spark_of_genius
			}
		}

		modifier = {
			factor = 1.5
			research_leader = {
				area = society
				has_trait = leader_trait_curator
			}
		}

		modifier = {
			factor = @ap_technological_ascendancy_rare_tech
			has_ascension_perk = ap_technological_ascendancy
		}

		modifier = {
			factor = @federation_perk_factor
			has_federation = yes
			federation = {
				has_federation_perk = rare_tech_boost
				any_member = { has_technology = pw_tech_transplanetary_logistics }
			}
		}

		modifier = {
			factor = 0
			is_egalitarian = no
		}

		modifier = {
			factor = 2
			has_ethic = ethic_fanatic_egalitarian
		}

		modifier = {
			factor = 1.5
			has_valid_civic = civic_shared_burden
		}

		modifier = {
			factor = 1.5
			has_valid_civic = civic_beacon_of_liberty
		}

		modifier = {
			factor = 2
			has_ascension_perk = pw_ap_planetary_wonders
		}

		modifier = {
			factor = 1.25
			num_pops > 100
		}

		modifier = {
			factor = 1.5
			num_pops > 200
		}

		modifier = {
			factor = 1.5
			num_pops > 300
		}
	}

	ai_weight = {
		factor = @pw_tech_ai_weight
		modifier = {
			factor = 2
			research_leader = {
				area = society
				has_trait = leader_trait_expertise_new_worlds
			}
		}
	}
}

# Transplanetary Logistics System (Infrastructure Techs):

#Egalitarian Distribution Services
pw_tech_egalitarian_distribution_services = {
	area = physics
	category = { computing }
	tier = 5
	cost = @pw_tech_cost_infra
	prerequisites = {
		pw_tech_transplanetary_logistics
	}
	weight = @tier4weight3

	potential = {
		is_gestalt = no
		is_egalitarian = yes
	}

	weight_modifier = {
		modifier = {
			factor = 1.5
			research_leader = {
				area = physics
				has_trait = leader_trait_expertise_computing
			}
		}

		modifier = {
			factor = 1.5
			research_leader = {
				area = physics
				has_trait = leader_trait_spark_of_genius
			}
		}

		modifier = {
			factor = 1.5
			research_leader = {
				area = physics
				has_trait = leader_trait_curator
			}
		}

		modifier = {
			factor = @ap_technological_ascendancy_rare_tech
			has_ascension_perk = ap_technological_ascendancy
		}

		modifier = {
			factor = @federation_perk_factor
			has_federation = yes
			federation = {
				has_federation_perk = rare_tech_boost
				any_member = { has_technology = pw_tech_egalitarian_distribution_services }
			}
		}

		modifier = {
			factor = 0
			is_egalitarian = no
		}

		modifier = {
			factor = 2
			has_ethic = ethic_fanatic_egalitarian
		}

		modifier = {
			factor = 1.5
			has_valid_civic = civic_shared_burden
		}

		modifier = {
			factor = 1.5
			has_valid_civic = civic_beacon_of_liberty
		}

		modifier = {
			factor = 2
			has_ascension_perk = pw_ap_planetary_wonders
		}

		modifier = {
			factor = 5
			any_owned_planet = {
				has_active_building = pw_building_transplanetary_logistics_network
			}
		}
	}

	ai_weight = {
		factor = @pw_tech_ai_weight
		modifier = {
			factor = 2
			research_leader = {
				area = physics
				has_trait = leader_trait_expertise_computing
			}
		}
		modifier = {
			factor = 5
			any_owned_planet = {
				has_active_building = pw_building_transplanetary_logistics_network
			}
		}
	}
}

#Egalitarian Emergency Services
pw_tech_egalitarian_emergency_services = {
	area = society
	category = { new_worlds }
	tier = 5
	cost = @pw_tech_cost_infra
	prerequisites = {
		pw_tech_transplanetary_logistics
	}
	weight = @tier4weight3

	potential = {
		is_gestalt = no
		is_egalitarian = yes
	}

	weight_modifier = {
		modifier = {
			factor = 1.5
			research_leader = {
				area = society
				has_trait = leader_trait_expertise_new_worlds
			}
		}

		modifier = {
			factor = 1.5
			research_leader = {
				area = society
				has_trait = leader_trait_spark_of_genius
			}
		}

		modifier = {
			factor = 1.5
			research_leader = {
				area = society
				has_trait = leader_trait_curator
			}
		}

		modifier = {
			factor = @ap_technological_ascendancy_rare_tech
			has_ascension_perk = ap_technological_ascendancy
		}

		modifier = {
			factor = @federation_perk_factor
			has_federation = yes
			federation = {
				has_federation_perk = rare_tech_boost
				any_member = { has_technology = pw_tech_egalitarian_emergency_services }
			}
		}

		modifier = {
			factor = 0
			is_egalitarian = no
		}

		modifier = {
			factor = 2
			has_ethic = ethic_fanatic_egalitarian
		}

		modifier = {
			factor = 1.5
			has_valid_civic = civic_shared_burden
		}

		modifier = {
			factor = 1.5
			has_valid_civic = civic_beacon_of_liberty
		}

		modifier = {
			factor = 2
			has_ascension_perk = pw_ap_planetary_wonders
		}

		modifier = {
			factor = 5
			any_owned_planet = {
				has_active_building = pw_building_transplanetary_logistics_network
			}
		}
	}

	ai_weight = {
		factor = @pw_tech_ai_weight
		modifier = {
			factor = 2
			research_leader = {
				area = society
				has_trait = leader_trait_expertise_new_worlds
			}
		}
		modifier = {
			factor = 5
			any_owned_planet = {
				has_active_building = pw_building_transplanetary_logistics_network
			}
		}
	}
}

#Egalitarian Cultural Development
pw_tech_egalitarian_cultural_development = {
	area = society
	category = { statecraft }
	tier = 5
	cost = @pw_tech_cost_infra
	prerequisites = {
		pw_tech_transplanetary_logistics
	}
	weight = @tier4weight3

	potential = {
		is_gestalt = no
		is_egalitarian = yes
	}

	weight_modifier = {
		modifier = {
			factor = 1.5
			research_leader = {
				area = society
				has_trait = leader_trait_expertise_statecraft
			}
		}

		modifier = {
			factor = 1.5
			research_leader = {
				area = society
				has_trait = leader_trait_spark_of_genius
			}
		}

		modifier = {
			factor = 1.5
			research_leader = {
				area = society
				has_trait = leader_trait_curator
			}
		}

		modifier = {
			factor = @ap_technological_ascendancy_rare_tech
			has_ascension_perk = ap_technological_ascendancy
		}

		modifier = {
			factor = @federation_perk_factor
			has_federation = yes
			federation = {
				has_federation_perk = rare_tech_boost
				any_member = { has_technology = pw_tech_egalitarian_cultural_development }
			}
		}

		modifier = {
			factor = 0
			is_egalitarian = no
		}

		modifier = {
			factor = 2
			has_ethic = ethic_fanatic_egalitarian
		}

		modifier = {
			factor = 1.5
			has_valid_civic = civic_shared_burden
		}

		modifier = {
			factor = 1.5
			has_valid_civic = civic_beacon_of_liberty
		}

		modifier = {
			factor = 2
			has_ascension_perk = pw_ap_planetary_wonders
		}

		modifier = {
			factor = 5
			any_owned_planet = {
				has_active_building = pw_building_transplanetary_logistics_network
			}
		}
	}

	ai_weight = {
		factor = @pw_tech_ai_weight
		modifier = {
			factor = 2
			research_leader = {
				area = society
				has_trait = leader_trait_expertise_statecraft
			}
		}
		modifier = {
			factor = 5
			any_owned_planet = {
				has_active_building = pw_building_transplanetary_logistics_network
			}
		}
	}
}

#Egalitarian Industrial Development
pw_tech_egalitarian_industrial_development = {
	area = engineering
	category = { industry }
	tier = 5
	cost = @pw_tech_cost_infra
	prerequisites = {
		pw_tech_transplanetary_logistics
	}
	weight = @tier4weight3

	potential = {
		is_gestalt = no
		is_egalitarian = yes
	}

	weight_modifier = {
		modifier = {
			factor = 1.5
			research_leader = {
				area = engineering
				has_trait = leader_trait_expertise_industry
			}
		}

		modifier = {
			factor = 1.5
			research_leader = {
				area = engineering
				has_trait = leader_trait_spark_of_genius
			}
		}

		modifier = {
			factor = 1.5
			research_leader = {
				area = engineering
				has_trait = leader_trait_curator
			}
		}

		modifier = {
			factor = @ap_technological_ascendancy_rare_tech
			has_ascension_perk = ap_technological_ascendancy
		}

		modifier = {
			factor = @federation_perk_factor
			has_federation = yes
			federation = {
				has_federation_perk = rare_tech_boost
				any_member = { has_technology = pw_tech_egalitarian_industrial_development }
			}
		}

		modifier = {
			factor = 0
			is_egalitarian = no
		}

		modifier = {
			factor = 2
			has_ethic = ethic_fanatic_egalitarian
		}

		modifier = {
			factor = 1.5
			has_valid_civic = civic_shared_burden
		}

		modifier = {
			factor = 1.5
			has_valid_civic = civic_beacon_of_liberty
		}

		modifier = {
			factor = 2
			has_ascension_perk = pw_ap_planetary_wonders
		}

		modifier = {
			factor = 5
			any_owned_planet = {
				has_active_building = pw_building_transplanetary_logistics_network
			}
		}
	}

	ai_weight = {
		factor = @pw_tech_ai_weight
		modifier = {
			factor = 2
			research_leader = {
				area = engineering
				has_trait = leader_trait_expertise_industry
			}
		}
		modifier = {
			factor = 5
			any_owned_planet = {
				has_active_building = pw_building_transplanetary_logistics_network
			}
		}
	}
}

# Transplanetary Logistics System (Shared Burdens Tech):
pw_tech_burdens_of_all = {
	area = society
	category = { statecraft }
	tier = 5
	cost = @pw_tech_cost_5
	prerequisites = {
		pw_tech_transplanetary_logistics
	}
	weight = 0
	is_rare = yes

	potential = {
		is_gestalt = no
		is_egalitarian = yes
		has_valid_civic = civic_shared_burden
	}

	prereqfor_desc = {
		custom = {
			title = pw_tech_burdens_of_all_tooltip_title
			desc = pw_tech_burdens_of_all_tooltip_desc
		}
	}

	ai_weight = {
		factor = @pw_tech_ai_weight
		modifier = {
			factor = 2
			research_leader = {
				area = society
				has_trait = leader_trait_expertise_statecraft
			}
		}
	}
}

# Forbidden City
pw_tech_elitist_urbanism = {
	area = society
	category = { statecraft }
	tier = 5
	cost = @pw_tech_cost_4
	prerequisites = {
		pw_tech_planetary_mega_engineering
		tech_planetary_infrastructure_2
		tech_capital_productivity_3
	}
	weight = @tier5weight1
	is_rare = yes

	potential = {
		is_gestalt = no
		is_authoritarian = yes
	}

	weight_modifier = {
		factor = @pw_tech_weight_mod

		modifier = {
			factor = 1.5
			research_leader = {
				area = society
				has_trait = leader_trait_expertise_statecraft
			}
		}

		modifier = {
			factor = 1.5
			research_leader = {
				area = society
				has_trait = leader_trait_spark_of_genius
			}
		}

		modifier = {
			factor = 1.5
			research_leader = {
				area = society
				has_trait = leader_trait_curator
			}
		}

		modifier = {
			factor = @ap_technological_ascendancy_rare_tech
			has_ascension_perk = ap_technological_ascendancy
		}

		modifier = {
			factor = @federation_perk_factor
			has_federation = yes
			federation = {
				has_federation_perk = rare_tech_boost
				any_member = { has_technology = pw_tech_elitist_urbanism }
			}
		}

		modifier = {
			factor = 0
			is_authoritarian = no
		}

		modifier = {
			factor = 2
			has_ethic = ethic_fanatic_authoritarian
		}

		modifier = {
			factor = 1.25
			has_valid_civic = civic_corvee_system
		}

		modifier = {
			factor = 1.5
			has_valid_civic = civic_aristocratic_elite
		}

		modifier = {
			factor = 1.5
			has_valid_civic = civic_imperial_cult
		}

		modifier = {
			factor = 1.5
			has_valid_civic = civic_slaver_guilds
		}

		modifier = {
			factor = 1.5
			has_valid_civic = civic_indentured_assets
		}

		modifier = {
			factor = 2
			has_ascension_perk = pw_ap_planetary_wonders
		}

		modifier = {
			factor = 1.5
			has_authority = auth_dictatorial
		}

		modifier = {
			factor = 2
			has_authority = auth_imperial
		}
	}

	ai_weight = {
		factor = @pw_tech_ai_weight
		modifier = {
			factor = 2
			research_leader = {
				area = society
				has_trait = leader_trait_expertise_statecraft
			}
		}
	}
}

# Forbidden City (Infrastructure Techs):

#Capital Developments
pw_tech_capital_developments = {
	area = society
	category = { statecraft }
	tier = 5
	cost = @pw_tech_cost_infra
	prerequisites = {
		pw_tech_elitist_urbanism
	}
	weight = @tier4weight3

	potential = {
		is_gestalt = no
		is_authoritarian = yes
	}

	weight_modifier = {
		modifier = {
			factor = 1.5
			research_leader = {
				area = society
				has_trait = leader_trait_expertise_statecraft
			}
		}

		modifier = {
			factor = 1.5
			research_leader = {
				area = society
				has_trait = leader_trait_spark_of_genius
			}
		}

		modifier = {
			factor = 1.5
			research_leader = {
				area = society
				has_trait = leader_trait_curator
			}
		}

		modifier = {
			factor = @ap_technological_ascendancy_rare_tech
			has_ascension_perk = ap_technological_ascendancy
		}

		modifier = {
			factor = @federation_perk_factor
			has_federation = yes
			federation = {
				has_federation_perk = rare_tech_boost
				any_member = { has_technology = pw_tech_centralized_emergency_developments }
			}
		}

		modifier = {
			factor = 0
			is_authoritarian = no
		}

		modifier = {
			factor = 2
			has_ethic = ethic_fanatic_authoritarian
		}

		modifier = {
			factor = 1.5
			has_valid_civic = civic_aristocratic_elite
		}

		modifier = {
			factor = 1.5
			has_valid_civic = civic_technocracy
		}

		modifier = {
			factor = 1.5
			has_valid_civic = civic_exalted_priesthood
		}

		modifier = {
			factor = 1.5
			has_valid_civic = civic_merchant_guilds
		}

		modifier = {
			factor = 2
			has_ascension_perk = pw_ap_planetary_wonders
		}

		modifier = {
			factor = 5
			any_owned_planet = {
				has_active_building = pw_building_forbidden_city
			}
		}
	}

	ai_weight = {
		factor = @pw_tech_ai_weight
		modifier = {
			factor = 2
			research_leader = {
				area = society
				has_trait = leader_trait_expertise_statecraft
			}
		}
		modifier = {
			factor = 5
			any_owned_planet = {
				has_active_building = pw_building_forbidden_city
			}
		}
	}
}

#Capital Developments -> Luxury Retreat
pw_tech_capital_developments_luxury_retreat = {
	area = society
	category = { statecraft }
	tier = 4
	cost = @tier5cost1
	prerequisites = {
		pw_tech_capital_developments
		tech_resort_colonies
	}
	weight = @tier4weight3

	potential = {
		is_gestalt = no
		is_authoritarian = yes
	}

	weight_modifier = {
		modifier = {
			factor = 1.5
			research_leader = {
				area = society
				has_trait = leader_trait_expertise_statecraft
			}
		}

		modifier = {
			factor = 0
			is_authoritarian = no
		}

		modifier = {
			factor = 0
			NOT = {
				any_owned_planet = {
					has_modifier = resort_colony
				}
			}
		}

		modifier = {
			factor = 2
			has_ethic = ethic_fanatic_authoritarian
		}

		modifier = {
			factor = 1.5
			has_valid_civic = civic_aristocratic_elite
		}

		modifier = {
			factor = 1.5
			has_valid_civic = civic_technocracy
		}

		modifier = {
			factor = 1.5
			has_valid_civic = civic_exalted_priesthood
		}

		modifier = {
			factor = 1.5
			has_valid_civic = civic_merchant_guilds
		}

		modifier = {
			factor = 2
			has_ascension_perk = pw_ap_planetary_wonders
		}

		modifier = {
			factor = 5
			any_owned_planet = {
				has_active_building = pw_building_forbidden_city
			}
		}

		modifier = {
			factor = 0.1
			NOT = {
				any_owned_planet = {
					has_modifier = resort_colony
				}
			}
		}
	}

	ai_weight = {
		factor = @pw_tech_ai_weight
		modifier = {
			factor = 2
			research_leader = {
				area = society
				has_trait = leader_trait_expertise_statecraft
			}
		}
		modifier = {
			factor = 2
			any_owned_planet = {
				has_active_building = pw_building_forbidden_city
			}
		}
		modifier = {
			factor = 5
			any_owned_planet = {
				has_modifier = resort_colony
			}
		}
	}
}

#Capital Developments -> Wardens Directorate
pw_tech_capital_developments_wardens_directorate = {
	area = society
	category = { statecraft }
	tier = 4
	cost = @tier5cost1
	prerequisites = {
		pw_tech_capital_developments
		tech_penal_colonies
	}
	weight = @tier4weight3

	potential = {
		is_gestalt = no
		is_authoritarian = yes
	}

	weight_modifier = {
		modifier = {
			factor = 1.5
			research_leader = {
				area = society
				has_trait = leader_trait_expertise_statecraft
			}
		}

		modifier = {
			factor = 0
			is_authoritarian = no
		}

		modifier = {
			factor = 0
			NOT = {
				any_owned_planet = {
					has_modifier = penal_colony
				}
			}
		}

		modifier = {
			factor = 2
			has_ethic = ethic_fanatic_authoritarian
		}

		modifier = {
			factor = 1.5
			has_valid_civic = civic_aristocratic_elite
		}

		modifier = {
			factor = 1.5
			has_valid_civic = civic_technocracy
		}

		modifier = {
			factor = 1.5
			has_valid_civic = civic_exalted_priesthood
		}

		modifier = {
			factor = 1.5
			has_valid_civic = civic_merchant_guilds
		}

		modifier = {
			factor = 2
			has_ascension_perk = pw_ap_planetary_wonders
		}

		modifier = {
			factor = 5
			any_owned_planet = {
				has_active_building = pw_building_forbidden_city
			}
		}

		modifier = {
			factor = 0.1
			NOT = {
				any_owned_planet = {
					has_modifier = penal_colony
				}
			}
		}
	}

	ai_weight = {
		factor = @pw_tech_ai_weight
		modifier = {
			factor = 2
			research_leader = {
				area = society
				has_trait = leader_trait_expertise_statecraft
			}
		}
		modifier = {
			factor = 2
			any_owned_planet = {
				has_active_building = pw_building_forbidden_city
			}
		}
		modifier = {
			factor = 5
			any_owned_planet = {
				has_modifier = penal_colony
			}
		}
	}
}

#Capital Developments -> Overseers Ring
pw_tech_capital_developments_overseers_ring = {
	area = society
	category = { statecraft }
	tier = 4
	cost = @tier5cost1
	prerequisites = {
		pw_tech_capital_developments
		tech_slave_colonies
	}
	weight = @tier4weight3

	potential = {
		is_gestalt = no
		is_authoritarian = yes
	}

	weight_modifier = {
		modifier = {
			factor = 1.5
			research_leader = {
				area = society
				has_trait = leader_trait_expertise_statecraft
			}
		}

		modifier = {
			factor = 0
			is_authoritarian = no
		}

		modifier = {
			factor = 0
			NOT = {
				any_owned_planet = {
					has_modifier = slave_colony
				}
			}
		}

		modifier = {
			factor = 2
			has_ethic = ethic_fanatic_authoritarian
		}

		modifier = {
			factor = 1.5
			has_valid_civic = civic_aristocratic_elite
		}

		modifier = {
			factor = 1.5
			has_valid_civic = civic_technocracy
		}

		modifier = {
			factor = 1.5
			has_valid_civic = civic_exalted_priesthood
		}

		modifier = {
			factor = 1.5
			has_valid_civic = civic_merchant_guilds
		}

		modifier = {
			factor = 2
			has_ascension_perk = pw_ap_planetary_wonders
		}

		modifier = {
			factor = 5
			any_owned_planet = {
				has_active_building = pw_building_forbidden_city
			}
		}

		modifier = {
			factor = 0.1
			NOT = {
				any_owned_planet = {
					has_modifier = slave_colony
				}
			}
		}
	}

	ai_weight = {
		factor = @pw_tech_ai_weight
		modifier = {
			factor = 2
			research_leader = {
				area = society
				has_trait = leader_trait_expertise_statecraft
			}
		}
		modifier = {
			factor = 2
			any_owned_planet = {
				has_active_building = pw_building_forbidden_city
			}
		}
		modifier = {
			factor = 5
			any_owned_planet = {
				has_modifier = slave_colony
			}
		}
	}
}

#Centralized Emergency Developments
pw_tech_centralized_emergency_developments = {
	area = engineering
	category = { industry }
	tier = 5
	cost = @pw_tech_cost_infra
	prerequisites = {
		pw_tech_elitist_urbanism
	}
	weight = @tier4weight3

	potential = {
		is_gestalt = no
		is_authoritarian = yes
	}

	weight_modifier = {
		modifier = {
			factor = 1.5
			research_leader = {
				area = engineering
				has_trait = leader_trait_expertise_industry
			}
		}

		modifier = {
			factor = 1.5
			research_leader = {
				area = engineering
				has_trait = leader_trait_spark_of_genius
			}
		}

		modifier = {
			factor = 1.5
			research_leader = {
				area = engineering
				has_trait = leader_trait_curator
			}
		}

		modifier = {
			factor = 0
			is_authoritarian = no
		}

		modifier = {
			factor = 2
			has_ethic = ethic_fanatic_authoritarian
		}

		modifier = {
			factor = 1.5
			has_valid_civic = civic_aristocratic_elite
		}

		modifier = {
			factor = 1.5
			has_valid_civic = civic_technocracy
		}

		modifier = {
			factor = 1.5
			has_valid_civic = civic_exalted_priesthood
		}

		modifier = {
			factor = 1.5
			has_valid_civic = civic_merchant_guilds
		}

		modifier = {
			factor = 2
			has_ascension_perk = pw_ap_planetary_wonders
		}

		modifier = {
			factor = 5
			any_owned_planet = {
				has_active_building = pw_building_forbidden_city
			}
		}
	}

	ai_weight = {
		factor = @pw_tech_ai_weight
		modifier = {
			factor = 2
			research_leader = {
				area = engineering
				has_trait = leader_trait_expertise_industry
			}
		}
		modifier = {
			factor = 5
			any_owned_planet = {
				has_active_building = pw_building_forbidden_city
			}
		}
	}
}

#Centralized Power Developments
pw_tech_centralized_power_developments = {
	area = physics
	category = { computing }
	tier = 5
	cost = @pw_tech_cost_infra
	prerequisites = {
		pw_tech_elitist_urbanism
	}
	weight = @tier4weight3

	potential = {
		is_gestalt = no
		is_authoritarian = yes
	}

	weight_modifier = {
		modifier = {
			factor = 1.5
			research_leader = {
				area = physics
				has_trait = leader_trait_expertise_computing
			}
		}

		modifier = {
			factor = 1.5
			research_leader = {
				area = physics
				has_trait = leader_trait_spark_of_genius
			}
		}

		modifier = {
			factor = 1.5
			research_leader = {
				area = physics
				has_trait = leader_trait_curator
			}
		}

		modifier = {
			factor = 0
			is_authoritarian = no
		}

		modifier = {
			factor = 2
			has_ethic = ethic_fanatic_authoritarian
		}

		modifier = {
			factor = 1.5
			has_valid_civic = civic_aristocratic_elite
		}

		modifier = {
			factor = 1.5
			has_valid_civic = civic_technocracy
		}

		modifier = {
			factor = 1.5
			has_valid_civic = civic_exalted_priesthood
		}

		modifier = {
			factor = 1.5
			has_valid_civic = civic_merchant_guilds
		}

		modifier = {
			factor = 2
			has_ascension_perk = pw_ap_planetary_wonders
		}

		modifier = {
			factor = 5
			any_owned_planet = {
				has_active_building = pw_building_forbidden_city
			}
		}
	}

	ai_weight = {
		factor = @pw_tech_ai_weight
		modifier = {
			factor = 2
			research_leader = {
				area = physics
				has_trait = leader_trait_expertise_computing
			}
		}
		modifier = {
			factor = 5
			any_owned_planet = {
				has_active_building = pw_building_forbidden_city
			}
		}
	}
}

#Central Council -> Ambassador Chambers
pw_tech_central_council_ambassador_chambers = {
	area = society
	category = { statecraft }
	tier = 5
	cost = @pw_tech_cost_infra
	prerequisites = {
		pw_tech_elitist_urbanism
	}
	weight = @tier4weight3

	potential = {
		is_gestalt = no
		is_authoritarian = yes
		is_xenophile = yes
	}

	weight_modifier = {
		modifier = {
			factor = 1.5
			research_leader = {
				area = society
				has_trait = leader_trait_expertise_statecraft
			}
		}

		modifier = {
			factor = 0
			is_authoritarian = no
		}

		modifier = {
			factor = 2
			has_ethic = ethic_fanatic_authoritarian
		}

		modifier = {
			factor = 1.5
			has_ethic = ethic_fanatic_xenophile
		}

		modifier = {
			factor = 1.5
			has_valid_civic = civic_public_relations_specialists
		}

		modifier = {
			factor = 1.5
			has_valid_civic = civic_diplomatic_corps
		}

		modifier = {
			factor = 1.5
			has_valid_civic = civic_merchant_guilds
		}

		modifier = {
			factor = 2
			has_ascension_perk = pw_ap_planetary_wonders
		}

		modifier = {
			factor = 5
			any_owned_planet = {
				has_active_building = pw_building_forbidden_city
			}
		}
	}

	ai_weight = {
		factor = @pw_tech_ai_weight
		modifier = {
			factor = 2
			research_leader = {
				area = society
				has_trait = leader_trait_expertise_statecraft
			}
		}
		modifier = {
			factor = 5
			any_owned_planet = {
				has_active_building = pw_building_forbidden_city
			}
		}
	}
}

#Central Council -> Internal Affairs
pw_tech_central_council_internal_affairs = {
	area = society
	category = { statecraft }
	tier = 5
	cost = @pw_tech_cost_infra
	prerequisites = {
		pw_tech_elitist_urbanism
	}
	weight = @tier4weight3

	potential = {
		is_gestalt = no
		is_authoritarian = yes
		is_xenophobe = yes
	}

	weight_modifier = {
		modifier = {
			factor = 1.5
			research_leader = {
				area = society
				has_trait = leader_trait_expertise_statecraft
			}
		}

		modifier = {
			factor = 0
			is_authoritarian = no
		}

		modifier = {
			factor = 2
			has_ethic = ethic_fanatic_authoritarian
		}

		modifier = {
			factor = 1.5
			has_ethic = ethic_fanatic_xenophobe
		}

		modifier = {
			factor = 1.5
			has_valid_civic = civic_inwards_perfection
		}

		modifier = {
			factor = 1.5
			has_valid_civic = civic_fanatic_purifiers
		}

		modifier = {
			factor = 1.5
			has_valid_civic = civic_barbaric_despoilers
		}

		modifier = {
			factor = 2
			has_ascension_perk = pw_ap_planetary_wonders
		}

		modifier = {
			factor = 5
			any_owned_planet = {
				has_active_building = pw_building_forbidden_city
			}
		}
	}

	ai_weight = {
		factor = @pw_tech_ai_weight
		modifier = {
			factor = 2
			research_leader = {
				area = society
				has_trait = leader_trait_expertise_statecraft
			}
		}
		modifier = {
			factor = 5
			any_owned_planet = {
				has_active_building = pw_building_forbidden_city
			}
		}
	}
}

#Central Council -> Intellectual Circles
pw_tech_central_council_intellectual_circles = {
	area = physics
	category = { computing }
	tier = 5
	cost = @pw_tech_cost_infra
	prerequisites = {
		pw_tech_elitist_urbanism
	}
	weight = @tier4weight3

	potential = {
		is_gestalt = no
		is_authoritarian = yes
		is_materialist = yes
	}

	weight_modifier = {
		modifier = {
			factor = 1.5
			research_leader = {
				area = physics
				has_trait = leader_trait_expertise_computing
			}
		}

		modifier = {
			factor = 0
			is_authoritarian = no
		}

		modifier = {
			factor = 2
			has_ethic = ethic_fanatic_authoritarian
		}

		modifier = {
			factor = 1.5
			has_ethic = ethic_fanatic_materialist
		}

		modifier = {
			factor = 3
			has_valid_civic = civic_technocracy
		}

		modifier = {
			factor = 2
			has_ascension_perk = pw_ap_planetary_wonders
		}

		modifier = {
			factor = 5
			any_owned_planet = {
				has_active_building = pw_building_forbidden_city
			}
		}
	}

	ai_weight = {
		factor = @pw_tech_ai_weight
		modifier = {
			factor = 2
			research_leader = {
				area = physics
				has_trait = leader_trait_expertise_computing
			}
		}
		modifier = {
			factor = 5
			any_owned_planet = {
				has_active_building = pw_building_forbidden_city
			}
		}
	}
}

#Central Council -> Holy Tribunal
pw_tech_central_council_holy_tribunal = {
	area = society
	category = { statecraft }
	tier = 5
	cost = @pw_tech_cost_infra
	prerequisites = {
		pw_tech_elitist_urbanism
	}
	weight = @tier4weight3

	potential = {
		is_gestalt = no
		is_authoritarian = yes
		is_spiritualist = yes
	}

	weight_modifier = {
		modifier = {
			factor = 1.5
			research_leader = {
				area = society
				has_trait = leader_trait_expertise_statecraft
			}
		}

		modifier = {
			factor = 0
			is_authoritarian = no
		}

		modifier = {
			factor = 2
			has_ethic = ethic_fanatic_authoritarian
		}

		modifier = {
			factor = 1.5
			has_ethic = ethic_fanatic_spiritualist
		}

		modifier = {
			factor = 2
			has_valid_civic = civic_exalted_priesthood
		}

		modifier = {
			factor = 2
			has_valid_civic = civic_imperial_cult
		}

		modifier = {
			factor = 1.5
			has_valid_civic = civic_death_cult
		}

		modifier = {
			factor = 1.5
			has_valid_civic = civic_gospel_of_the_masses
		}

		modifier = {
			factor = 2
			has_ascension_perk = pw_ap_planetary_wonders
		}

		modifier = {
			factor = 5
			any_owned_planet = {
				has_active_building = pw_building_forbidden_city
			}
		}
	}

	ai_weight = {
		factor = @pw_tech_ai_weight
		modifier = {
			factor = 2
			research_leader = {
				area = society
				has_trait = leader_trait_expertise_statecraft
			}
		}
		modifier = {
			factor = 5
			any_owned_planet = {
				has_active_building = pw_building_forbidden_city
			}
		}
	}
}

#Central Council -> Ballroom
pw_tech_central_council_ballroom = {
	area = society
	category = { statecraft }
	tier = 5
	cost = @pw_tech_cost_infra
	prerequisites = {
		pw_tech_elitist_urbanism
	}
	weight = @tier4weight3

	potential = {
		is_gestalt = no
		is_authoritarian = yes
		is_pacifist = yes
	}

	weight_modifier = {
		modifier = {
			factor = 1.5
			research_leader = {
				area = society
				has_trait = leader_trait_expertise_statecraft
			}
		}

		modifier = {
			factor = 0
			is_authoritarian = no
		}

		modifier = {
			factor = 2
			has_ethic = ethic_fanatic_authoritarian
		}

		modifier = {
			factor = 1.5
			has_ethic = ethic_fanatic_pacifist
		}

		modifier = {
			factor = 2
			has_valid_civic = civic_inwards_perfection
		}

		modifier = {
			factor = 1.5
			has_valid_civic = civic_agrarian_idyll
		}

		modifier = {
			factor = 2
			has_ascension_perk = pw_ap_planetary_wonders
		}

		modifier = {
			factor = 5
			any_owned_planet = {
				has_active_building = pw_building_forbidden_city
			}
		}
	}

	ai_weight = {
		factor = @pw_tech_ai_weight
		modifier = {
			factor = 2
			research_leader = {
				area = society
				has_trait = leader_trait_expertise_statecraft
			}
		}
		modifier = {
			factor = 5
			any_owned_planet = {
				has_active_building = pw_building_forbidden_city
			}
		}
	}
}

#Central Council -> War Room
pw_tech_central_council_war_room = {
	area = society
	category = { military_theory }
	tier = 5
	cost = @pw_tech_cost_infra
	prerequisites = {
		pw_tech_elitist_urbanism
	}
	weight = @tier4weight3

	potential = {
		is_gestalt = no
		is_authoritarian = yes
		is_militarist = yes
	}

	weight_modifier = {
		modifier = {
			factor = 1.5
			research_leader = {
				area = society
				has_trait = leader_trait_expertise_military_theory
			}
		}

		modifier = {
			factor = 0
			is_authoritarian = no
		}

		modifier = {
			factor = 2
			has_ethic = ethic_fanatic_authoritarian
		}

		modifier = {
			factor = 1.5
			has_ethic = ethic_fanatic_militarist
		}

		modifier = {
			factor = 2
			has_valid_civic = civic_warrior_culture
		}

		modifier = {
			factor = 1.5
			has_valid_civic = civic_nationalistic_zeal
		}

		modifier = {
			factor = 1.5
			has_valid_civic = civic_private_military_companies
		}

		modifier = {
			factor = 1.5
			has_valid_civic = civic_naval_contractors
		}

		modifier = {
			factor = 2
			has_ascension_perk = pw_ap_planetary_wonders
		}

		modifier = {
			factor = 5
			any_owned_planet = {
				has_active_building = pw_building_forbidden_city
			}
		}
	}

	ai_weight = {
		factor = @pw_tech_ai_weight
		modifier = {
			factor = 2
			research_leader = {
				area = society
				has_trait = leader_trait_expertise_military_theory
			}
		}
		modifier = {
			factor = 5
			any_owned_planet = {
				has_active_building = pw_building_forbidden_city
			}
		}
	}
}

#Festival Plaza:
pw_tech_festivals_of_harmony = {
	area = society
	category = { statecraft }
	tier = 4
	cost = @pw_tech_cost_2
	prerequisites = {
		pw_tech_planetary_mega_engineering
		tech_hyper_entertainment_forum
	}
	weight = @tier4weight3
	is_rare = yes

	potential = {
		is_gestalt = no
		is_pacifist = yes
	}

	weight_modifier = {
		factor = @pw_tech_weight_mod

		modifier = {
			factor = 1.5
			research_leader = {
				area = society
				has_trait = leader_trait_expertise_statecraft
			}
		}

		modifier = {
			factor = 1.5
			research_leader = {
				area = society
				has_trait = leader_trait_spark_of_genius
			}
		}

		modifier = {
			factor = 1.5
			research_leader = {
				area = society
				has_trait = leader_trait_curator
			}
		}

		modifier = {
			factor = @ap_technological_ascendancy_rare_tech
			has_ascension_perk = ap_technological_ascendancy
		}

		modifier = {
			factor = @federation_perk_factor
			has_federation = yes
			federation = {
				has_federation_perk = rare_tech_boost
				any_member = { has_technology = pw_tech_festivals_of_harmony }
			}
		}

		modifier = {
			factor = 0
			is_pacifist = no
		}

		modifier = {
			factor = 2
			has_ethic = ethic_fanatic_pacifist
		}

		modifier = {
			factor = 1.75
			has_valid_civic = civic_inwards_perfection
		}

		modifier = {
			factor = 1.75
			has_valid_civic = civic_agrarian_idyll
		}

		modifier = {
			factor = 2
			has_ascension_perk = pw_ap_planetary_wonders
		}

		modifier = {
			factor = 0
			is_at_war = yes
		}
	}

	ai_weight = {
		factor = @pw_tech_ai_weight
		modifier = {
			factor = 2
			research_leader = {
				area = society
				has_trait = leader_trait_expertise_statecraft
			}
		}
	}
}

#Agrarian Idyll decision:
pw_tech_harvest_festival = {
	area = society
	category = { statecraft }
	tier = 5
	cost = @pw_tech_cost_3
	prerequisites = {
		pw_tech_festivals_of_harmony
	}
	weight = @tier5weight1

	potential = {
		is_gestalt = no
		is_pacifist = yes
		has_valid_civic = civic_agrarian_idyll
	}

	weight_modifier = {
		modifier = {
			factor = 1.5
			research_leader = {
				area = society
				has_trait = leader_trait_expertise_statecraft
			}
		}

		modifier = {
			factor = 0
			is_pacifist = no
		}

		modifier = {
			factor = 2.5
			has_ethic = ethic_fanatic_pacifist
		}

		modifier = {
			factor = 2
			has_ascension_perk = pw_ap_planetary_wonders
		}

		modifier = {
			factor = 3
			any_owned_planet = {
				has_active_building = pw_building_festival_plaza
			}
		}

		modifier = {
			factor = 0
			is_at_war = yes
		}
	}

	ai_weight = {
		factor = @pw_tech_ai_weight
		modifier = {
			factor = 2
			research_leader = {
				area = society
				has_trait = leader_trait_expertise_statecraft
			}
		}
	}
}

#Inwards Perfection decision:
pw_tech_commemorate_perfection = {
	area = society
	category = { statecraft }
	tier = 5
	cost = @pw_tech_cost_3
	prerequisites = {
		pw_tech_festivals_of_harmony
	}
	weight = @tier5weight1

	potential = {
		is_gestalt = no
		is_pacifist = yes
		has_valid_civic = civic_inwards_perfection
	}

	weight_modifier = {
		modifier = {
			factor = 1.5
			research_leader = {
				area = society
				has_trait = leader_trait_expertise_statecraft
			}
		}

		modifier = {
			factor = 0
			is_pacifist = no
		}

		modifier = {
			factor = 2.5
			has_ethic = ethic_fanatic_pacifist
		}

		modifier = {
			factor = 2
			has_ascension_perk = pw_ap_planetary_wonders
		}

		modifier = {
			factor = 3
			any_owned_planet = {
				has_active_building = pw_building_festival_plaza
			}
		}

		modifier = {
			factor = 0
			is_at_war = yes
		}
	}

	ai_weight = {
		factor = @pw_tech_ai_weight
		modifier = {
			factor = 2
			research_leader = {
				area = society
				has_trait = leader_trait_expertise_statecraft
			}
		}
	}
}

#Peace Edicts:
pw_tech_peace_manipulation = {
	area = society
	category = { statecraft }
	tier = 5
	cost = @pw_tech_cost_3
	prerequisites = {
		pw_tech_festivals_of_harmony
	}
	weight = @tier5weight1

	potential = {
		is_gestalt = no
		is_pacifist = yes
	}

	weight_modifier = {
		modifier = {
			factor = 1.5
			research_leader = {
				area = society
				has_trait = leader_trait_expertise_statecraft
			}
		}

		modifier = {
			factor = 0
			is_pacifist = no
		}

		modifier = {
			factor = 2
			has_ethic = ethic_fanatic_pacifist
		}

		modifier = {
			factor = 1.75
			has_valid_civic = civic_inwards_perfection
		}

		modifier = {
			factor = 1.75
			has_valid_civic = civic_agrarian_idyll
		}

		modifier = {
			factor = 2
			has_ascension_perk = pw_ap_planetary_wonders
		}

		modifier = {
			factor = 2
			any_owned_planet = {
				has_active_building = pw_building_festival_plaza
			}
		}

		modifier = {
			factor = 0
			is_at_war = yes
		}
	}

	ai_weight = {
		factor = @pw_tech_ai_weight
		modifier = {
			factor = 2
			research_leader = {
				area = society
				has_trait = leader_trait_expertise_statecraft
			}
		}
	}
}

#Peace Crisis Edicts:
pw_tech_brace_against_the_storm = {
	area = society
	category = { statecraft }
	tier = 5
	cost = @pw_tech_cost_5
	prerequisites = {
		pw_tech_festivals_of_harmony
		pw_tech_peace_manipulation
	}
	weight = @tier5weight1

	potential = {
		is_gestalt = no
		is_pacifist = yes
		has_crisis = yes
	}

	weight_modifier = {
		modifier = {
			factor = 1.5
			research_leader = {
				area = society
				has_trait = leader_trait_expertise_statecraft
			}
		}

		modifier = {
			factor = 0
			is_pacifist = no
		}

		modifier = {
			factor = 0.5
			has_ethic = ethic_fanatic_pacifist
		}

		modifier = {
			factor = 1.25
			end_game_years_passed > 25
		}

		modifier = {
			factor = 1.25
			end_game_years_passed > 50
		}

		modifier = {
			factor = 1.25
			end_game_years_passed > 75
		}

		modifier = {
			factor = 1.5
			end_game_years_passed > 100
		}

		modifier = {
			factor = 1.25
			has_crisis_stage_1 = yes
		}

		modifier = {
			factor = 1.50
			has_crisis_stage_2 = yes
		}

		modifier = {
			factor = 1.75
			has_crisis_stage_3 = yes
		}

		modifier = {
			factor = 2
			has_crisis_stage_4 = yes
		}

		modifier = {
			factor = 2
			any_owned_planet = {
				has_active_building = pw_building_festival_plaza
			}
		}
	}

	ai_weight = {
		factor = @pw_tech_ai_weight
		modifier = {
			factor = 2
			research_leader = {
				area = society
				has_trait = leader_trait_expertise_statecraft
			}
		}
	}
}


#Martial Avenue:
pw_tech_parades_of_supremacy = {
	area = society
	category = { military_theory }
	tier = 4
	cost = @pw_tech_cost_2
	prerequisites = {
		pw_tech_planetary_mega_engineering
		tech_hyper_entertainment_forum
	}
	weight = @tier5weight1
	is_rare = yes

	potential = {
		is_gestalt = no
		is_militarist = yes
	}

	weight_modifier = {
		factor = @pw_tech_weight_mod

		modifier = {
			factor = 1.5
			research_leader = {
				area = society
				has_trait = leader_trait_expertise_military_theory
			}
		}

		modifier = {
			factor = 1.5
			research_leader = {
				area = society
				has_trait = leader_trait_spark_of_genius
			}
		}

		modifier = {
			factor = 1.5
			research_leader = {
				area = society
				has_trait = leader_trait_curator
			}
		}

		modifier = {
			factor = @ap_technological_ascendancy_rare_tech
			has_ascension_perk = ap_technological_ascendancy
		}

		modifier = {
			factor = @federation_perk_factor
			has_federation = yes
			federation = {
				has_federation_perk = rare_tech_boost
				any_member = { has_technology = pw_tech_parades_of_supremacy }
			}
		}

		modifier = {
			factor = 0
			is_militarist = no
		}

		modifier = {
			factor = 2
			has_ethic = ethic_fanatic_militarist
		}

		modifier = {
			factor = 1.75
			has_valid_civic = civic_nationalistic_zeal
		}

		modifier = {
			factor = 1.75
			has_valid_civic = civic_warrior_culture
		}

		modifier = {
			factor = 1.75
			has_valid_civic = civic_distinguished_admiralty
		}

		modifier = {
			factor = 1.75
			has_valid_civic = civic_private_military_companies
		}

		modifier = {
			factor = 1.75
			has_valid_civic = civic_naval_contractors
		}

		modifier = {
			factor = 2
			has_ascension_perk = pw_ap_planetary_wonders
		}

		modifier = {
			factor = 10
			is_at_war = yes
		}
	}

	ai_weight = {
		factor = @pw_tech_ai_weight
		modifier = {
			factor = 2
			research_leader = {
				area = society
				has_trait = leader_trait_expertise_military_theory
			}
		}
	}
}

#Naval Contractors or Distinguished Admiralty decision:
pw_tech_flight_of_the_corvettes = {
	area = society
	category = { military_theory }
	tier = 5
	cost = @pw_tech_cost_3
	prerequisites = {
		pw_tech_parades_of_supremacy
	}
	weight = @tier5weight1


	potential = {
		is_gestalt = no
		is_militarist = yes
		OR = {
			has_valid_civic = civic_naval_contractors
			has_valid_civic = civic_distinguished_admiralty
		}
	}

	weight_modifier = {
		modifier = {
			factor = 1.5
			research_leader = {
				area = society
				has_trait = leader_trait_expertise_military_theory
			}
		}

		modifier = {
			factor = 0
			is_militarist = no
		}

		modifier = {
			factor = 2.5
			has_ethic = ethic_fanatic_militarist
		}

		modifier = {
			factor = 2
			has_ascension_perk = pw_ap_planetary_wonders
		}

		modifier = {
			factor = 3
			any_owned_planet = {
				has_active_building = pw_building_martial_avenue
			}
		}

		modifier = {
			factor = 0
			is_at_war = yes
		}
	}

	ai_weight = {
		factor = @pw_tech_ai_weight
		modifier = {
			factor = 2
			research_leader = {
				area = society
				has_trait = leader_trait_expertise_military_theory
			}
		}
	}
}

#Nationalistic Zeal decision:
pw_tech_national_march = {
	area = society
	category = { military_theory }
	tier = 5
	cost = @pw_tech_cost_3
	prerequisites = {
		pw_tech_parades_of_supremacy
	}
	weight = @tier5weight1

	potential = {
		is_gestalt = no
		is_militarist = yes
		has_valid_civic = civic_nationalistic_zeal
	}

	weight_modifier = {
		modifier = {
			factor = 1.5
			research_leader = {
				area = society
				has_trait = leader_trait_expertise_military_theory
			}
		}

		modifier = {
			factor = 0
			is_militarist = no
		}

		modifier = {
			factor = 2.5
			has_ethic = ethic_fanatic_militarist
		}

		modifier = {
			factor = 2
			has_ascension_perk = pw_ap_planetary_wonders
		}

		modifier = {
			factor = 3
			any_owned_planet = {
				has_active_building = pw_building_martial_avenue
			}
		}

		modifier = {
			factor = 0
			is_at_war = yes
		}
	}

	ai_weight = {
		factor = @pw_tech_ai_weight
		modifier = {
			factor = 2
			research_leader = {
				area = society
				has_trait = leader_trait_expertise_military_theory
			}
		}
	}
}

#Warrior Culture decision:
pw_tech_combat_demonstrations = {
	area = society
	category = { military_theory }
	tier = 5
	cost = @pw_tech_cost_3
	prerequisites = {
		pw_tech_parades_of_supremacy
	}
	weight = @tier5weight1

	potential = {
		is_gestalt = no
		is_militarist = yes
		has_valid_civic = civic_warrior_culture
	}

	weight_modifier = {
		modifier = {
			factor = 1.5
			research_leader = {
				area = society
				has_trait = leader_trait_expertise_military_theory
			}
		}

		modifier = {
			factor = 0
			is_militarist = no
		}

		modifier = {
			factor = 2.5
			has_ethic = ethic_fanatic_militarist
		}

		modifier = {
			factor = 2
			has_ascension_perk = pw_ap_planetary_wonders
		}

		modifier = {
			factor = 3
			any_owned_planet = {
				has_active_building = pw_building_martial_avenue
			}
		}

		modifier = {
			factor = 0
			is_at_war = yes
		}
	}

	ai_weight = {
		factor = @pw_tech_ai_weight
		modifier = {
			factor = 2
			research_leader = {
				area = society
				has_trait = leader_trait_expertise_military_theory
			}
		}
	}
}

#Private Military Contractors decision:
pw_tech_merchants_of_war = {
	area = society
	category = { military_theory }
	tier = 5
	cost = @pw_tech_cost_3
	prerequisites = {
		pw_tech_parades_of_supremacy
	}
	weight = @tier5weight1

	potential = {
		is_gestalt = no
		is_militarist = yes
		has_valid_civic = civic_private_military_companies
	}

	weight_modifier = {
		modifier = {
			factor = 1.5
			research_leader = {
				area = society
				has_trait = leader_trait_expertise_military_theory
			}
		}

		modifier = {
			factor = 0
			is_militarist = no
		}

		modifier = {
			factor = 2.5
			has_ethic = ethic_fanatic_militarist
		}

		modifier = {
			factor = 2
			has_ascension_perk = pw_ap_planetary_wonders
		}

		modifier = {
			factor = 3
			any_owned_planet = {
				has_active_building = pw_building_martial_avenue
			}
		}

		modifier = {
			factor = 0
			is_at_war = yes
		}
	}

	ai_weight = {
		factor = @pw_tech_ai_weight
		modifier = {
			factor = 2
			research_leader = {
				area = society
				has_trait = leader_trait_expertise_military_theory
			}
		}
	}
}

#Reanimated Armies decision:
pw_tech_march_of_the_dead = {
	area = society
	category = { military_theory }
	tier = 5
	cost = @pw_tech_cost_3
	prerequisites = {
		pw_tech_parades_of_supremacy
	}
	weight = @tier5weight1

	potential = {
		is_gestalt = no
		is_militarist = yes
		has_valid_civic = civic_reanimated_armies
	}

	weight_modifier = {
		modifier = {
			factor = 1.5
			research_leader = {
				area = society
				has_trait = leader_trait_expertise_military_theory
			}
		}

		modifier = {
			factor = 0
			is_militarist = no
		}

		modifier = {
			factor = 2.5
			has_ethic = ethic_fanatic_militarist
		}

		modifier = {
			factor = 2
			has_ascension_perk = pw_ap_planetary_wonders
		}

		modifier = {
			factor = 3
			any_owned_planet = {
				has_active_building = pw_building_martial_avenue
			}
		}

		modifier = {
			factor = 0
			is_at_war = yes
		}
	}

	ai_weight = {
		factor = @pw_tech_ai_weight
		modifier = {
			factor = 2
			research_leader = {
				area = society
				has_trait = leader_trait_expertise_military_theory
			}
		}
	}
}

#War Edicts:
pw_tech_vision_beyond_war = {
	area = society
	category = { military_theory }
	tier = 5
	cost = @pw_tech_cost_3
	prerequisites = {
		pw_tech_parades_of_supremacy
	}
	weight = @tier5weight1

	potential = {
		is_gestalt = no
		is_militarist = yes
	}

	weight_modifier = {
		modifier = {
			factor = 1.5
			research_leader = {
				area = society
				has_trait = leader_trait_expertise_military_theory
			}
		}

		modifier = {
			factor = 0
			is_militarist = no
		}

		modifier = {
			factor = 2
			has_ethic = ethic_fanatic_militarist
		}

		modifier = {
			factor = 1.75
			has_valid_civic = civic_nationalistic_zeal
		}

		modifier = {
			factor = 1.75
			has_valid_civic = civic_warrior_culture
		}

		modifier = {
			factor = 1.75
			has_valid_civic = civic_distinguished_admiralty
		}

		modifier = {
			factor = 1.75
			has_valid_civic = civic_private_military_companies
		}

		modifier = {
			factor = 1.75
			has_valid_civic = civic_naval_contractors
		}

		modifier = {
			factor = 2
			has_ascension_perk = pw_ap_planetary_wonders
		}

		modifier = {
			factor = 2
			any_owned_planet = {
				has_active_building = pw_building_martial_avenue
			}
		}

		modifier = {
			factor = 5
			is_at_war = yes
		}
	}

	ai_weight = {
		factor = @pw_tech_ai_weight
		modifier = {
			factor = 2
			research_leader = {
				area = society
				has_trait = leader_trait_expertise_military_theory
			}
		}
	}
}

#War Crisis Edicts:
pw_tech_into_the_storm = {
	area = society
	category = { military_theory }
	tier = 5
	cost = @pw_tech_cost_5
	prerequisites = {
		pw_tech_parades_of_supremacy
		pw_tech_vision_beyond_war
	}
	weight = @tier5weight1

	potential = {
		is_gestalt = no
		is_militarist = yes
		has_crisis = yes
	}

	weight_modifier = {
		modifier = {
			factor = 1.5
			research_leader = {
				area = society
				has_trait = leader_trait_expertise_military_theory
			}
		}

		modifier = {
			factor = 0
			is_militarist = no
		}

		modifier = {
			factor = 1.25
			has_ethic = ethic_fanatic_militarist
		}

		modifier = {
			factor = 1.25
			end_game_years_passed > 25
		}

		modifier = {
			factor = 1.25
			end_game_years_passed > 50
		}

		modifier = {
			factor = 1.25
			end_game_years_passed > 75
		}

		modifier = {
			factor = 1.5
			end_game_years_passed > 100
		}

		modifier = {
			factor = 1.25
			has_crisis_stage_1 = yes
		}

		modifier = {
			factor = 1.50
			has_crisis_stage_2 = yes
		}

		modifier = {
			factor = 1.75
			has_crisis_stage_3 = yes
		}

		modifier = {
			factor = 2
			has_crisis_stage_4 = yes
		}

		modifier = {
			factor = 2
			any_owned_planet = {
				has_active_building = pw_building_martial_avenue
			}
		}
	}

	ai_weight = {
		factor = @pw_tech_ai_weight
		modifier = {
			factor = 2
			research_leader = {
				area = society
				has_trait = leader_trait_expertise_military_theory
			}
		}
	}
}

#Living Spire:
pw_tech_living_spire = {
	area = engineering
	category = { industry }
	tier = 5
	cost = @tier5cost2
	prerequisites = {
		pw_tech_planetary_mega_engineering
	}
	weight = @tier5weight2
	is_rare = yes

	potential = {
		has_ascension_perk = pw_ap_planetary_wonders
		is_gestalt = no
	}

	prereqfor_desc = {
		custom = {
			title = pw_tech_living_spire_tooltip
			desc = pw_tech_living_spire_tooltip_desc
		}
	}

	weight_modifier = {
		factor = 0.20

		modifier = {
			factor = 1.5
			research_leader = {
				area = engineering
				has_trait = leader_trait_expertise_industry
			}
		}

		modifier = {
			factor = 1.5
			research_leader = {
				area = engineering
				has_trait = leader_trait_spark_of_genius
			}
		}

		modifier = {
			factor = 1.5
			research_leader = {
				area = engineering
				has_trait = leader_trait_curator
			}
		}

		modifier = {
			factor = @ap_technological_ascendancy_rare_tech
			has_ascension_perk = ap_technological_ascendancy
		}

		modifier = {
			factor = @federation_perk_factor
			has_federation = yes
			federation = {
				has_federation_perk = rare_tech_boost
				any_member = { has_technology = pw_tech_living_spire }
			}
		}

		modifier = {
			factor = 1.5
			has_edict = pw_ambition_monumentality
		}

		modifier = {
			factor = 1.5
			has_edict = pw_ambition_wonders_beyond_ambition
		}

		modifier = {
			factor = 1.05
			has_country_flag = pw_space_elevator_built
		}

		modifier = {
			factor = 1.05
			has_country_flag = pw_particle_supercollider_built
		}

		modifier = {
			factor = 1.05
			has_country_flag = pw_domed_city_built
		}

		modifier = {
			factor = 1.05
			has_country_flag = pw_abyssal_crater_test_site_built
		}

		modifier = {
			factor = 1.05
			has_country_flag = pw_erebus_project_built
		}

		modifier = {
			factor = 1.05
			has_country_flag = pw_helios_tower_built
		}

		modifier = {
			factor = 1.05
			has_country_flag = pw_demetrius_fields_built
		}

		modifier = {
			factor = 1.05
			has_country_flag = pw_galactic_model_built
		}

		modifier = {
			factor = 1.05
			has_country_flag = pw_panopticon_built
		}

		modifier = {
			factor = 1.05
			has_country_flag = pw_guardian_angel_built
		}

		modifier = {
			factor = 1.05
			has_country_flag = pw_mantle_crucible_built
		}

		modifier = {
			factor = 1.05
			has_country_flag = pw_titan_forge_built
		}

		modifier = {
			factor = 1.05
			has_country_flag = pw_industrial_hearth_built
		}

		modifier = {
			factor = 1.05
			has_country_flag = pw_pavilion_of_wonders_built
		}

		modifier = {
			factor = 1.05
			has_country_flag = pw_fair_of_worlds_built
		}

		modifier = {
			factor = 1.05
			has_country_flag = pw_museum_of_the_grotesque_built
		}

		modifier = {
			factor = 1.05
			has_country_flag = pw_holy_reliquary_built
		}

		modifier = {
			factor = 1.05
			has_country_flag = pw_grand_archive_built
		}

		modifier = {
			factor = 1.05
			has_country_flag = pw_transplanetary_logistics_network_built
		}

		modifier = {
			factor = 1.05
			has_country_flag = pw_forbidden_city_built
		}

		modifier = {
			factor = 1.05
			has_country_flag = pw_festival_plaza_built
		}

		modifier = {
			factor = 1.05
			has_country_flag = pw_martial_avenue_built
		}
	}

	ai_weight = {
		factor = 15
		modifier = {
			factor = 2
			research_leader = {
				area = engineering
				has_trait = leader_trait_expertise_industry
			}
		}
	}
}

#Conduit of Unity:
pw_tech_conduit_of_unity = {
	area = society
	category = { statecraft }
	tier = 5
	cost = @tier5cost2
	prerequisites = {
		pw_tech_planetary_mega_engineering
	}
	weight = @tier5weight2
	is_rare = yes

	potential = {
		has_ascension_perk = pw_ap_planetary_wonders
		is_gestalt = yes
	}

	prereqfor_desc = {
		custom = {
			title = pw_tech_conduit_of_unity_tooltip
			desc = pw_tech_conduit_of_unity_tooltip_desc
		}
	}

	weight_modifier = {
		factor = 0.20

		modifier = {
			factor = 1.5
			research_leader = {
				area = society
				has_trait = leader_trait_expertise_statecraft
			}
		}

		modifier = {
			factor = 1.5
			research_leader = {
				area = society
				has_trait = leader_trait_spark_of_genius
			}
		}

		modifier = {
			factor = 1.5
			research_leader = {
				area = society
				has_trait = leader_trait_curator
			}
		}

		modifier = {
			factor = @ap_technological_ascendancy_rare_tech
			has_ascension_perk = ap_technological_ascendancy
		}

		modifier = {
			factor = @federation_perk_factor
			has_federation = yes
			federation = {
				has_federation_perk = rare_tech_boost
				any_member = { has_technology = pw_tech_conduit_of_unity }
			}
		}

		modifier = {
			factor = 1.5
			has_edict = pw_ambition_monumentality
		}

		modifier = {
			factor = 1.5
			has_edict = pw_ambition_wonders_beyond_ambition
		}

		modifier = {
			factor = 1.05
			has_country_flag = pw_space_elevator_built
		}

		modifier = {
			factor = 1.05
			has_country_flag = pw_particle_supercollider_built
		}

		modifier = {
			factor = 1.05
			has_country_flag = pw_domed_city_built
		}

		modifier = {
			factor = 1.05
			has_country_flag = pw_abyssal_crater_test_site_built
		}

		modifier = {
			factor = 1.05
			has_country_flag = pw_erebus_project_built
		}

		modifier = {
			factor = 1.05
			has_country_flag = pw_helios_tower_built
		}

		modifier = {
			factor = 1.05
			has_country_flag = pw_demetrius_fields_built
		}

		modifier = {
			factor = 1.05
			has_country_flag = pw_galactic_model_built
		}

		modifier = {
			factor = 1.05
			has_country_flag = pw_guardian_angel_built
		}

		modifier = {
			factor = 1.05
			has_country_flag = pw_mantle_crucible_built
		}

		modifier = {
			factor = 1.05
			has_country_flag = pw_titan_forge_built
		}

		modifier = {
			factor = 1.05
			has_country_flag = pw_industrial_hearth_built
		}

		modifier = {
			factor = 1.25
			has_country_flag = pw_enigma_engine_built
		}

		modifier = {
			factor = 1.25
			has_country_flag = pw_solipsist_debate_hall_built
		}
	}

	ai_weight = {
		factor = 15
		modifier = {
			factor = 2
			research_leader = {
				area = society
				has_trait = leader_trait_expertise_statecraft
			}
		}
	}
}

# Conduit of Unity (Integration Techs):

#Drone Integration
pw_tech_drone_integration = {
	area = engineering
	category = { industry }
	tier = 5
	cost = @pw_tech_cost_infra
	prerequisites = {
		pw_tech_conduit_of_unity
	}
	weight = @tier4weight3

	potential = {
		is_gestalt = yes
	}

	weight_modifier = {
		modifier = {
			factor = 1.5
			research_leader = {
				area = engineering
				has_trait = leader_trait_expertise_industry
			}
		}

		modifier = {
			factor = 1.5
			research_leader = {
				area = engineering
				has_trait = leader_trait_spark_of_genius
			}
		}

		modifier = {
			factor = 1.5
			research_leader = {
				area = engineering
				has_trait = leader_trait_curator
			}
		}

		modifier = {
			factor = 0
			is_gestalt = no
		}

		modifier = {
			factor = 1.5
			any_owned_planet = {
				has_active_building = pw_building_conduit_of_unity_0
			}
		}

		modifier = {
			factor = 5
			any_owned_planet = {
				has_active_building = pw_building_conduit_of_unity_1
			}
		}

		modifier = {
			factor = 5
			any_owned_planet = {
				OR = {
					has_active_building = pw_building_enigma_engine
					has_active_building = pw_building_solipsist_debate_hall
				}
			}
		}
	}

	ai_weight = {
		factor = @pw_tech_ai_weight
		modifier = {
			factor = 2
			research_leader = {
				area = engineering
				has_trait = leader_trait_expertise_industry
			}
		}
		modifier = {
			factor = 5
			any_owned_planet = {
				has_active_building = pw_building_conduit_of_unity_1
			}
		}
	}
}

#Communication Integration
pw_tech_communication_integration = {
	area = physics
	category = { computing }
	tier = 5
	cost = @pw_tech_cost_infra
	prerequisites = {
		pw_tech_conduit_of_unity
	}
	weight = @tier4weight3

	potential = {
		is_gestalt = yes
	}

	weight_modifier = {
		modifier = {
			factor = 1.5
			research_leader = {
				area = physics
				has_trait = leader_trait_expertise_computing
			}
		}

		modifier = {
			factor = 1.5
			research_leader = {
				area = physics
				has_trait = leader_trait_spark_of_genius
			}
		}

		modifier = {
			factor = 1.5
			research_leader = {
				area = physics
				has_trait = leader_trait_curator
			}
		}

		modifier = {
			factor = 0
			is_gestalt = no
		}

		modifier = {
			factor = 1.5
			any_owned_planet = {
				has_active_building = pw_building_conduit_of_unity_0
			}
		}

		modifier = {
			factor = 5
			any_owned_planet = {
				has_active_building = pw_building_conduit_of_unity_1
			}
		}

		modifier = {
			factor = 5
			any_owned_planet = {
				OR = {
					has_active_building = pw_building_enigma_engine
					has_active_building = pw_building_solipsist_debate_hall
				}
			}
		}
	}

	ai_weight = {
		factor = @pw_tech_ai_weight
		modifier = {
			factor = 2
			research_leader = {
				area = physics
				has_trait = leader_trait_expertise_computing
			}
		}
		modifier = {
			factor = 5
			any_owned_planet = {
				has_active_building = pw_building_conduit_of_unity_1
			}
		}
	}
}

#Shard of Enigma
pw_tech_shard_of_enigma = {
	area = physics
	category = { computing }
	tier = 5
	cost = @pw_tech_cost_infra
	prerequisites = {
		pw_tech_metaphysical_singularity
		pw_tech_conduit_of_unity
	}
	weight = @tier4weight3

	potential = {
		is_gestalt = yes
	}

	weight_modifier = {
		modifier = {
			factor = 1.5
			research_leader = {
				area = physics
				has_trait = leader_trait_expertise_computing
			}
		}

		modifier = {
			factor = 1.5
			research_leader = {
				area = physics
				has_trait = leader_trait_spark_of_genius
			}
		}

		modifier = {
			factor = 1.5
			research_leader = {
				area = physics
				has_trait = leader_trait_curator
			}
		}

		modifier = {
			factor = 0
			is_gestalt = no
		}

		modifier = {
			factor = 1.5
			any_owned_planet = {
				has_active_building = pw_building_conduit_of_unity_0
			}
		}

		modifier = {
			factor = 5
			any_owned_planet = {
				has_active_building = pw_building_conduit_of_unity_1
			}
		}

		modifier = {
			factor = 5
			any_owned_planet = {
				has_active_building = pw_building_enigma_engine
			}
		}
	}

	ai_weight = {
		factor = @pw_tech_ai_weight
		modifier = {
			factor = 2
			research_leader = {
				area = physics
				has_trait = leader_trait_expertise_computing
			}
		}
		modifier = {
			factor = 5
			any_owned_planet = {
				has_active_building = pw_building_conduit_of_unity_1
			}
			any_owned_planet = {
				has_active_building = pw_building_enigma_engine
			}
		}
	}
}

#Chamber of Reflection
pw_tech_chamber_of_reflection = {
	area = society
	category = { statecraft }
	tier = 5
	cost = @pw_tech_cost_infra
	prerequisites = {
		pw_tech_metacognition_dialectics
		pw_tech_conduit_of_unity
	}
	weight = @tier4weight3

	potential = {
		is_gestalt = yes
	}

	weight_modifier = {
		modifier = {
			factor = 1.5
			research_leader = {
				area = society
				has_trait = leader_trait_expertise_statecraft
			}
		}

		modifier = {
			factor = 1.5
			research_leader = {
				area = society
				has_trait = leader_trait_spark_of_genius
			}
		}

		modifier = {
			factor = 1.5
			research_leader = {
				area = society
				has_trait = leader_trait_curator
			}
		}

		modifier = {
			factor = 0
			is_gestalt = no
		}

		modifier = {
			factor = 1.5
			any_owned_planet = {
				has_active_building = pw_building_conduit_of_unity_0
			}
		}

		modifier = {
			factor = 5
			any_owned_planet = {
				has_active_building = pw_building_conduit_of_unity_1
			}
		}

		modifier = {
			factor = 5
			any_owned_planet = {
				has_active_building = pw_building_solipsist_debate_hall
			}
		}
	}

	ai_weight = {
		factor = @pw_tech_ai_weight
		modifier = {
			factor = 2
			research_leader = {
				area = society
				has_trait = leader_trait_expertise_statecraft
			}
		}
		modifier = {
			factor = 5
			any_owned_planet = {
				has_active_building = pw_building_conduit_of_unity_1
			}
			any_owned_planet = {
				has_active_building = pw_building_solipsist_debate_hall
			}
		}
	}
}
