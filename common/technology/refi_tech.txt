######################
# Refining Technologies
#####################

#Macro Synthesis
tech_synthesis_arrays = {
	cost = @tier3cost1
	area = engineering
	tier = 3
	category = { materials }	
	prerequisites = { "tech_exotic_gases" "tech_volatile_motes" "tech_rare_crystals" }
	is_rare = yes
	weight = @tier3weight1
	
	weight_modifier = {
		factor = 2
		modifier = {
			factor = 0.25
			NOR = {
				research_leader = {
					area = engineering
					has_trait = "leader_trait_curator"
				}
				research_leader = {
					area = engineering
					has_trait = "leader_trait_spark_of_genius"
				}
				research_leader = {
					area = engineering
					has_trait = "leader_trait_expertise_materials"
				}
			}
		}
		modifier = {
			factor = 0.5
			OR = {
				any_owned_planet = {
					OR = {
						has_deposit = d_dust_caverns
						has_deposit = d_dust_desert
						has_deposit = d_industrial_sector
						has_deposit = d_bubbling_swamp
						has_deposit = d_fuming_bog
						has_deposit = d_crystalline_caverns
						has_deposit = d_crystal_forest
						has_deposit = d_crystal_reef
						has_building = building_synthesis
						has_building = building_chemical_plant
						has_building = building_mote_harvesters
						has_building = building_motes2
						has_building = building_motes3
						has_building = building_refinery
						has_building = building_gas_extractors
						has_building = building_gas2
						has_building = building_gas3
						has_building = building_crystal_plant
						has_building = building_crystal_mines
						has_building = building_crystal2
						has_building = building_crystal3
					}
				}				
				any_planet_within_border = {
					OR = {
						has_deposit = d_volatile_motes_1
						has_deposit = d_volatile_motes_2
						has_deposit = d_volatile_motes_3
						has_deposit = d_volatile_motes_4
						has_deposit = d_volatile_motes_5
						has_deposit = d_exotic_gases_1
						has_deposit = d_exotic_gases_2
						has_deposit = d_exotic_gases_3
						has_deposit = d_exotic_gases_4
						has_deposit = d_exotic_gases_5
						has_deposit = d_rare_crystals_1
						has_deposit = d_rare_crystals_2
						has_deposit = d_rare_crystals_3
						has_deposit = d_rare_crystals_4
						has_deposit = d_rare_crystals_5
					}
				}	
				any_owned_starbase = {
					OR = {
						has_starbase_module = starm_volatile_motes_refinery
						has_starbase_module = starm_exotic_gases_refinery
						has_starbase_module = starm_rare_crystals_refinery
						has_starbase_building = starm_exotic_refinery_booster
						has_starbase_building = starm_exotic_refinery_center
					}
				}	
			}
		}
	}
	
	ai_weight = {
		modifier = {
			factor = 1.25
			research_leader = {
				area = engineering
				has_trait = "leader_trait_expertise_materials"
			}
		}
	}
}

#Volatile Material Plants
tech_volatile_motes = {
	icon = tech_volatile_motes_1
	cost = @tier2cost1
	area = physics
	tier = 2
	category = { particles }	
	prerequisites = { "tech_basic_industry" }
	weight = @tier2weight1
	
	weight_modifier = {
		factor = 2
		modifier = {
			factor = 0.5
			OR = {
				any_owned_planet = {
					OR = {
						has_deposit = d_dust_caverns
						has_deposit = d_dust_desert
						has_deposit = d_industrial_sector
						has_building = building_synthesis
						has_building = building_chemical_plant
						has_building = building_mote_harvesters
						has_building = building_motes2
						has_building = building_motes3
					}
				}				
				any_planet_within_border = {
					OR = {
						has_deposit = d_volatile_motes_1
						has_deposit = d_volatile_motes_2
						has_deposit = d_volatile_motes_3
						has_deposit = d_volatile_motes_4
						has_deposit = d_volatile_motes_5
					}
				}	
				any_owned_starbase = {
					OR = {
						has_starbase_module = starm_volatile_motes_refinery
						has_starbase_building = starm_exotic_refinery_booster
						has_starbase_building = starm_exotic_refinery_center
					}
				}	
			}
		}
		modifier = {
			factor = 1.25
			research_leader = {
				area = physics
				has_trait = "leader_trait_expertise_particles"
			}
		}
	}
	
	ai_weight = {
		factor = 5 #important resource
		modifier = {
			factor = 1.25
			research_leader = {
				area = physics
				has_trait = "leader_trait_expertise_particles"
			}
		}
	}
}

#Volatile Material Plants Level 2
tech_volatile_motes_2 = {
	cost = @tier3cost3
	area = physics
	tier = 3
	category = { particles }	
	prerequisites = { "tech_volatile_motes" }
	weight = @tier3weight3
	
	weight_modifier = {
		factor = 2
		modifier = {
			factor = 0.25
			NOR = {
				research_leader = {
					area = engineering
					has_trait = "leader_trait_curator"
				}
				research_leader = {
					area = engineering
					has_trait = "leader_trait_spark_of_genius"
				}
				research_leader = {
					area = engineering
					has_trait = "leader_trait_expertise_particles"
				}
			}
		}
		modifier = {
			factor = 0.5
			OR = {
				any_owned_planet = {
					OR = {
						has_deposit = d_dust_caverns
						has_deposit = d_dust_desert
						has_deposit = d_industrial_sector
						has_building = building_synthesis
						has_building = building_chemical_plant
						has_building = building_mote_harvesters
						has_building = building_motes2
						has_building = building_motes3
					}
				}				
				any_planet_within_border = {
					OR = {
						has_deposit = d_volatile_motes_1
						has_deposit = d_volatile_motes_2
						has_deposit = d_volatile_motes_3
						has_deposit = d_volatile_motes_4
						has_deposit = d_volatile_motes_5
					}
				}	
				any_owned_starbase = {
					OR = {
						has_starbase_module = starm_volatile_motes_refinery
						has_starbase_building = starm_exotic_refinery_booster
						has_starbase_building = starm_exotic_refinery_center
					}
				}	
			}
		}
	}
	
	ai_weight = {
		factor = 5 #important resource
		modifier = {
			factor = 1.25
			research_leader = {
				area = physics
				has_trait = "leader_trait_expertise_particles"
			}
		}
	}
}

#Volatile Material Plants Level 3
tech_volatile_motes_3 = {
	cost = @tier4cost1
	area = physics
	tier = 4
	category = { particles }	
	prerequisites = { "tech_volatile_motes_2" }
	is_rare = yes
	weight = @tier4weight1
	
	weight_modifier = {
		factor = 2
		modifier = {
			factor = 0.25
			NOR = {
				research_leader = {
					area = engineering
					has_trait = "leader_trait_curator"
				}
				research_leader = {
					area = engineering
					has_trait = "leader_trait_spark_of_genius"
				}
				research_leader = {
					area = engineering
					has_trait = "leader_trait_expertise_particles"
				}
			}
		}
		modifier = {
			factor = 0.5
			OR = {
				any_owned_planet = {
					OR = {
						has_deposit = d_dust_caverns
						has_deposit = d_dust_desert
						has_deposit = d_industrial_sector
						has_building = building_synthesis
						has_building = building_chemical_plant
						has_building = building_mote_harvesters
						has_building = building_motes2
						has_building = building_motes3
					}
				}				
				any_planet_within_border = {
					OR = {
						has_deposit = d_volatile_motes_1
						has_deposit = d_volatile_motes_2
						has_deposit = d_volatile_motes_3
						has_deposit = d_volatile_motes_4
						has_deposit = d_volatile_motes_5
					}
				}	
				any_owned_starbase = {
					OR = {
						has_starbase_module = starm_volatile_motes_refinery
						has_starbase_building = starm_exotic_refinery_booster
						has_starbase_building = starm_exotic_refinery_center
					}
				}	
			}
		}
	}
	
	ai_weight = {
		factor = 5 #important resource
		modifier = {
			factor = 1.25
			research_leader = {
				area = physics
				has_trait = "leader_trait_expertise_particles"
			}
		}
	}
}

#Exotic Gas Refining
tech_exotic_gases = {
	icon = tech_exotic_gases_1
	cost = @tier2cost1
	area = engineering
	tier = 2
	category = { materials }	
	prerequisites = { "tech_basic_industry" }
	weight = @tier2weight1
	
	weight_modifier = {
		factor = 2
		modifier = {
			factor = 0.5
			OR = {
				any_owned_planet = {
					OR = {
						has_deposit = d_industrial_sector
						has_deposit = d_bubbling_swamp
						has_deposit = d_fuming_bog
						has_building = building_synthesis
						has_building = building_refinery
						has_building = building_gas_extractors
						has_building = building_gas2
						has_building = building_gas3
					}
				}				
				any_planet_within_border = {
					OR = {
						has_deposit = d_exotic_gases_1
						has_deposit = d_exotic_gases_2
						has_deposit = d_exotic_gases_3
						has_deposit = d_exotic_gases_4
						has_deposit = d_exotic_gases_5
					}
				}	
				any_owned_starbase = {
					OR = {
						has_starbase_module = starm_exotic_gases_refinery
						has_starbase_building = starm_exotic_refinery_booster
						has_starbase_building = starm_exotic_refinery_center
					}
				}	
			}
		}
		modifier = {
			factor = 1.25
			research_leader = {
				area = engineering
				has_trait = "leader_trait_expertise_materials"
			}
		}
	}
	
	ai_weight = {
		factor = 5 #important resource
		modifier = {
			factor = 1.25
			research_leader = {
				area = engineering
				has_trait = "leader_trait_expertise_materials"
			}
		}
	}
}

#Exotic Gases Plants Level 2
tech_exotic_gases_2 = {
	cost = @tier3cost3
	area = engineering
	tier = 3
	category = { materials }	
	prerequisites = { "tech_exotic_gases" }
	weight = @tier3weight3
	
	weight_modifier = {
		factor = 2
		modifier = {
			factor = 0.25
			NOR = {
				research_leader = {
					area = engineering
					has_trait = "leader_trait_curator"
				}
				research_leader = {
					area = engineering
					has_trait = "leader_trait_spark_of_genius"
				}
				research_leader = {
					area = engineering
					has_trait = "leader_trait_expertise_materials"
				}
			}
		}
		modifier = {
			factor = 0.5
			OR = {
				any_owned_planet = {
					OR = {
						has_deposit = d_industrial_sector
						has_deposit = d_bubbling_swamp
						has_deposit = d_fuming_bog
						has_building = building_synthesis
						has_building = building_refinery
						has_building = building_gas_extractors
						has_building = building_gas2
						has_building = building_gas3
					}
				}				
				any_planet_within_border = {
					OR = {
						has_deposit = d_exotic_gases_1
						has_deposit = d_exotic_gases_2
						has_deposit = d_exotic_gases_3
						has_deposit = d_exotic_gases_4
						has_deposit = d_exotic_gases_5
					}
				}	
				any_owned_starbase = {
					OR = {
						has_starbase_module = starm_exotic_gases_refinery
						has_starbase_building = starm_exotic_refinery_booster
						has_starbase_building = starm_exotic_refinery_center
					}
				}	
			}
		}
	}
	
	ai_weight = {
		modifier = {
			factor = 1.25
			research_leader = {
				area = engineering
				has_trait = "leader_trait_expertise_materials"
			}
		}
	}
}

#Exotic Gases Plants Level 3
tech_exotic_gases_3 = {
	cost = @tier4cost1
	area = engineering
	tier = 4
	category = { materials }	
	prerequisites = { "tech_exotic_gases_2" }
	is_rare = yes
	weight = @tier4weight1
	
	weight_modifier = {
		factor = 2
		modifier = {
			factor = 0.25
			NOR = {
				research_leader = {
					area = engineering
					has_trait = "leader_trait_curator"
				}
				research_leader = {
					area = engineering
					has_trait = "leader_trait_spark_of_genius"
				}
				research_leader = {
					area = engineering
					has_trait = "leader_trait_expertise_materials"
				}
			}
		}
		modifier = {
			factor = 0.5
			OR = {
				any_owned_planet = {
					OR = {
						has_deposit = d_industrial_sector
						has_deposit = d_bubbling_swamp
						has_deposit = d_fuming_bog
						has_building = building_synthesis
						has_building = building_refinery
						has_building = building_gas_extractors
						has_building = building_gas2
						has_building = building_gas3
					}
				}				
				any_planet_within_border = {
					OR = {
						has_deposit = d_exotic_gases_1
						has_deposit = d_exotic_gases_2
						has_deposit = d_exotic_gases_3
						has_deposit = d_exotic_gases_4
						has_deposit = d_exotic_gases_5
					}
				}	
				any_owned_starbase = {
					OR = {
						has_starbase_module = starm_exotic_gases_refinery
						has_starbase_building = starm_exotic_refinery_booster
						has_starbase_building = starm_exotic_refinery_center
					}
				}	
			}
		}
	}
	
	ai_weight = {
		modifier = {
			factor = 1.25
			research_leader = {
				area = engineering
				has_trait = "leader_trait_expertise_materials"
			}
		}
	}
}

#Rare Crystal Manufacturing
tech_rare_crystals = {
	icon = tech_rare_crystals_1
	cost = @tier2cost1
	area = engineering
	tier = 2
	category = { materials }	
	prerequisites = { "tech_basic_industry" }
	weight = @tier2weight1
	
	weight_modifier = {
		factor = 2
		modifier = {
			factor = 0.5
			OR = {
				any_owned_planet = {
					OR = {
						has_deposit = d_industrial_sector
						has_deposit = d_crystalline_caverns
						has_deposit = d_crystal_forest
						has_deposit = d_crystal_reef
						has_building = building_synthesis
						has_building = building_crystal_plant
						has_building = building_crystal_mines
						has_building = building_crystal2
						has_building = building_crystal3
					}
				}				
				any_planet_within_border = {
					OR = {
						has_deposit = d_rare_crystals_1
						has_deposit = d_rare_crystals_2
						has_deposit = d_rare_crystals_3
						has_deposit = d_rare_crystals_4
						has_deposit = d_rare_crystals_5
					}
				}	
				any_owned_starbase = {
					OR = {
						has_starbase_module = starm_rare_crystals_refinery
						has_starbase_building = starm_exotic_refinery_booster
						has_starbase_building = starm_exotic_refinery_center
					}
				}	
			}
		modifier = {
			factor = 1.25
			research_leader = {
				area = engineering
				has_trait = "leader_trait_expertise_materials"
			}
		}
	}
	
	ai_weight = {
		factor = 5 #important resource
		modifier = {
			factor = 1.25
			research_leader = {
				area = engineering
				has_trait = "leader_trait_expertise_materials"
			}
		}
	}
}

#Rare Chrystals Plants Level 2
tech_rare_crystals_2 = {
	cost = @tier3cost3
	area = engineering
	tier = 3
	category = { materials }	
	prerequisites = { "tech_rare_crystals" }
	weight = @tier3weight3
	
	weight_modifier = {
		factor = 2
		modifier = {
			factor = 0.25
			NOR = {
				research_leader = {
					area = engineering
					has_trait = "leader_trait_curator"
				}
				research_leader = {
					area = engineering
					has_trait = "leader_trait_spark_of_genius"
				}
				research_leader = {
					area = engineering
					has_trait = "leader_trait_expertise_materials"
				}
			}
		}
		modifier = {
			factor = 0.5
			OR = {
				any_owned_planet = {
					OR = {
						has_deposit = d_industrial_sector
						has_deposit = d_crystalline_caverns
						has_deposit = d_crystal_forest
						has_deposit = d_crystal_reef
						has_building = building_synthesis
						has_building = building_crystal_plant
						has_building = building_crystal_mines
						has_building = building_crystal2
						has_building = building_crystal3
					}
				}				
				any_planet_within_border = {
					OR = {
						has_deposit = d_rare_crystals_1
						has_deposit = d_rare_crystals_2
						has_deposit = d_rare_crystals_3
						has_deposit = d_rare_crystals_4
						has_deposit = d_rare_crystals_5
					}
				}	
				any_owned_starbase = {
					OR = {
						has_starbase_module = starm_rare_crystals_refinery
						has_starbase_building = starm_exotic_refinery_booster
						has_starbase_building = starm_exotic_refinery_center
					}
				}	
			}
		}
	}
	
	ai_weight = {
		modifier = {
			factor = 1.25
			research_leader = {
				area = engineering
				has_trait = "leader_trait_expertise_materials"
			}
		}
	}
}

#Rare Chrystals Plants Level 3
tech_rare_crystals_3 = {
	cost = @tier4cost1
	area = engineering
	tier = 4
	category = { materials }	
	prerequisites = { "tech_rare_crystals_2" }
	is_rare = yes
	weight = @tier4weight1
	
	weight_modifier = {
		factor = 2
		modifier = {
			factor = 0.25
			NOR = {
				research_leader = {
					area = engineering
					has_trait = "leader_trait_curator"
				}
				research_leader = {
					area = engineering
					has_trait = "leader_trait_spark_of_genius"
				}
				research_leader = {
					area = engineering
					has_trait = "leader_trait_expertise_materials"
				}
			}
		}
		modifier = {
			factor = 0.5
			OR = {
				any_owned_planet = {
					OR = {
						has_deposit = d_industrial_sector
						has_deposit = d_crystalline_caverns
						has_deposit = d_crystal_forest
						has_deposit = d_crystal_reef
						has_building = building_synthesis
						has_building = building_crystal_plant
						has_building = building_crystal_mines
						has_building = building_crystal2
						has_building = building_crystal3
					}
				}				
				any_planet_within_border = {
					OR = {
						has_deposit = d_rare_crystals_1
						has_deposit = d_rare_crystals_2
						has_deposit = d_rare_crystals_3
						has_deposit = d_rare_crystals_4
						has_deposit = d_rare_crystals_5
					}
				}	
				any_owned_starbase = {
					OR = {
						has_starbase_module = starm_rare_crystals_refinery
						has_starbase_building = starm_exotic_refinery_booster
						has_starbase_building = starm_exotic_refinery_center
					}
				}	
			}
		}
	}
	
	ai_weight = {
		modifier = {
			factor = 1.25
			research_leader = {
				area = engineering
				has_trait = "leader_trait_expertise_materials"
			}
		}
	}
}