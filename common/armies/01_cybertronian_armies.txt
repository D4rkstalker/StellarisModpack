#Defensive armies can't transport of the planet
#maintenance is directly scripted here. 0.25 translates to 0.25 monthly cost (excluding other upkeep modifiers)
#morale_damage = 1		# average morale damage of the army, default: auto (calculated from morale * MORALE_DAMAGE_MULT)

#CYBERTRONIAN ARMIES
cybertronian_army = {
	damage = 2.0
	health = 2.0
	has_morale = yes
	morale = 1.0
	morale_damage = 1.0
	collateral_damage = 1.2
	war_exhaustion = 1.0
	time = 100
	has_species = yes

	icon = GFX_army_type_cybertronian

	resources = {
		category = armies
		cost = {
			minerals = 150
			energon = 50
		}

		upkeep = {
			energon = 1
		}
	}

	potential = {
		from = {
			OR = {
				has_trait = "trait_cybertronian"
				has_trait = "trait_bw_cybertronian"
				has_trait = "trait_transtech_cybertronian"
			}
			NOT = {
				has_trait = "trait_robot_vehicon"
			}
		}
	}
	ai_weight = {
		base = 150
	}
}
cybertronian_defense_army = {
	defensive = yes
	is_pop_spawned = yes
	damage = 2.0
	health = 2.0
	has_morale = yes
	morale = 1.0
	morale_damage = 1.0
	collateral_damage = 0.0
	war_exhaustion = 0.0
	icon = GFX_army_type_cybertronian_defensive
	has_species = yes

	potential = {
		from = {
			OR = {
				has_trait = "trait_cybertronian"
				has_trait = "trait_bw_cybertronian"
				has_trait = "trait_transtech_cybertronian"
			}
			NOT = {
				has_trait = "trait_robot_vehicon"
			}
		}
	}
}
cybertronian_occupation_army = {
	defensive = yes
	occupation = yes
	damage = 2.2
	health = 2.2
	has_morale = yes
	morale = 1.3
	morale_damage = 1.3
	collateral_damage = 0.0
	war_exhaustion = 0.0 # No WE from occupation armies
	has_species = yes

	icon = GFX_army_type_cybertronian_defensive

	potential = {
		from = {
			OR = {
				has_trait = "trait_cybertronian"
				has_trait = "trait_bw_cybertronian"
				has_trait = "trait_transtech_cybertronian"
			}
			NOT = {
				has_trait = "trait_robot_vehicon"
			}
		}
	}
}
cybertronian_seekers = {
	damage = 2.8
	health = 2.0
	has_morale = yes
	morale = 2.0
	morale_damage = 2.0
	collateral_damage = 1.2
	war_exhaustion = 1.5
	time = 200
	has_species = yes
	
	icon = GFX_army_type_cybertronian_seeker
	
	resources = {
		category = armies
		cost = {
			minerals = 250
			energon = 100
		}
		upkeep = {
			energon = 2
		}
	}
	potential = {
		from = {
			OR = {
				has_trait = "trait_cybertronian"
				has_trait = "trait_bw_cybertronian"
				has_trait = "trait_transtech_cybertronian"
			}
			NOT = {
				has_trait = "trait_robot_vehicon"
			}
		}
	}
	ai_weight = {
		base = 100
		modifier = {
			factor = 2
			has_trait = trait_cybertronian
		}
		modifier = {
			factor = 2
			has_trait = trait_bw_cybertronian
		}
		modifier = {
			factor = 2
			has_trait = trait_transtech_cybertronian
		}
	}
}
cybertronian_destroyer = {
	damage = 3.5
	health = 3.5
	has_morale = yes
	morale = 2.5
	morale_damage = 1.5
	collateral_damage = 2.0
	war_exhaustion = 2.5
	time = 250
	has_species = yes
	
	icon = GFX_army_type_cybertronian_titan
	
	resources = {
		category = armies
		cost = {
			minerals = 400
			energon = 200
		}
		upkeep = {
			energon = 4
		}
	}
	prerequisites = { "tech_cybertronian_destroyer" }
	potential = {
		from = {
			OR = {
				has_trait = "trait_cybertronian"
				has_trait = "trait_bw_cybertronian"
				has_trait = "trait_transtech_cybertronian"
			}
			NOT = {
				has_trait = "trait_robot_vehicon"
			}
		}
	}
	ai_weight = {
		base = 150
		modifier = {
			factor = 2
			has_trait = trait_cybertronian
		}
		modifier = {
			factor = 2
			has_trait = trait_bw_cybertronian
		}
		modifier = {
			factor = 2
			has_trait = trait_transtech_cybertronian
		}
	}
}
cybertronian_marauder = {
	damage = 2.5
	health = 4.0
	has_morale = no
	morale_damage = 2.0
	collateral_damage = 3.0
	war_exhaustion = 3.0
	time = 360
	has_species = yes
	
	icon = GFX_army_type_maximal_vehicle
	
	resources = {
		category = armies
		cost = {
			minerals = 500
			energon = 250
		}
		upkeep = {
			energon = 4
		}
	}
	prerequisites = { "tech_cybertronian_destroyer" }
	potential = {
		from = {
			OR = {
				has_trait = "trait_cybertronian"
				has_trait = "trait_bw_cybertronian"
				has_trait = "trait_transtech_cybertronian"
			}
			NOT = {
				has_trait = "trait_robot_vehicon"
			}
		}
	}
	ai_weight = {
		base = 150
		modifier = {
			factor = 2
			has_trait = trait_cybertronian
		}
		modifier = {
			factor = 2
			has_trait = trait_bw_cybertronian
		}
		modifier = {
			factor = 2
			has_trait = trait_transtech_cybertronian
		}
	}
}

cybertronian_combiners = {
	damage = 7.0
	health = 7.0
	has_morale = yes
	morale = 2.0
	morale_damage = 2.0
	collateral_damage = 5.0
	war_exhaustion = 4.0
	time = 400
	has_species = yes

	icon = GFX_army_type_cybertronian_combiner

	resources = {
		category = armies
		cost = {
			minerals = 750
			energon = 350
		}

		upkeep = {
			energon = 5
		}
	}
	prerequisites = { "tech_cybertronian_combiner" }
	
	potential = {
		from = {
			OR = {
				has_trait = "trait_cybertronian"
				has_trait = "trait_bw_cybertronian"
				has_trait = "trait_transtech_cybertronian"
			}
			NOT = {
				has_trait = "trait_robot_vehicon"
			}
		}
	}
	ai_weight = {
		base = 200
		modifier = {
			factor = 2
			has_trait = trait_cybertronian
		}
		modifier = {
			factor = 2
			has_trait = trait_bw_cybertronian
		}
		modifier = {
			factor = 2
			has_trait = trait_transtech_cybertronian
		}
	}
	
}

#AUTOBOT ARMIES
autobot_army = {
	damage = 2.4
	health = 2.4
	has_morale = yes
	morale = 3.0
	morale_damage = 1.2
	collateral_damage = 1.0
	war_exhaustion = 1.5
	time = 120
	has_species = yes

	icon = GFX_army_type_autobot

	resources = {
		category = armies
		cost = {
			minerals = 250
			energon = 100
		}

		upkeep = {
			energon = 2
		}
	}
	potential = {
		from = {
			has_trait = "trait_robot_autobot"
		}
		owner = {
			OR = {
				has_civic = "civic_machine_autobots"
				has_civic = "civic_autobots"
			}
		}
	}
	ai_weight = {
		base = 200
		modifier = {
			factor = 2
			has_civic = civic_autobots
		}
		modifier = {
			factor = 2
			has_civic = civic_machine_autobots
		}
	}
}
autobot_defense_army = {
	defensive = yes
	damage = 2.5
	health = 2.5
	has_morale = yes
	morale = 3.0
	morale_damage = 1.0
	collateral_damage = 0.0
	war_exhaustion = 0.0
	icon = GFX_army_type_autobot_defensive
	has_species = yes
	time = 120
	
	resources = {
		category = armies
		cost = {
			minerals = 250
			energon = 100
		}

		upkeep = {
			energon = 2
		}
	}
	
	potential = {
		from = {
			has_trait = "trait_robot_autobot"
		}
		owner = {
			OR = {
				has_civic = "civic_machine_autobots"
				has_civic = "civic_autobots"
			}
		}
	}
	
	ai_weight = {
		base = 120
		modifier = {
			factor = 2
			has_civic = civic_autobots
		}
		modifier = {
			factor = 2
			has_civic = civic_machine_autobots
		}
	}
}
autobot_aerialbots = {
	damage = 3.0
	health = 2.0
	has_morale = yes
	morale = 3.0
	morale_damage = 1.5
	collateral_damage = 1.2
	war_exhaustion = 1.5
	time = 240
	has_species = yes
	
	icon = GFX_army_type_autobot_aerialbot
	
	resources = {
		category = armies
		cost = {
			minerals = 275
			energon = 100
		}
		upkeep = {
			energon = 2
		}
	}
	prerequisites = { "tech_autobot_warriors" }
	potential = {
		from = {
			has_trait = "trait_robot_autobot"
		}
		owner = {
			OR = {
				has_civic = "civic_machine_autobots"
				has_civic = "civic_autobots"
			}
		}
	}
	
	ai_weight = {
		base = 120
		modifier = {
			factor = 2
			has_civic = civic_autobots
		}
		modifier = {
			factor = 2
			has_civic = civic_machine_autobots
		}
	}
}
# The Wreckers
autobot_wreckers = {
	damage = 3.0
	health = 3.5
	has_morale = yes
	morale = 3.5
	morale_damage = 2.0
	collateral_damage = 3.5
	war_exhaustion = 3.5
	time = 300
	has_species = yes
	
	icon = GFX_army_type_autobot_wreckers
	
	resources = {
		category = armies
		cost = {
			minerals = 450
			energon = 200
		}
		upkeep = {
			energon = 3
		}
	}
	prerequisites = { "tech_autobot_warriors" }
	potential = {
		from = {
			has_trait = "trait_robot_autobot"
		}
		owner = {
			OR = {
				has_civic = "civic_machine_autobots"
				has_civic = "civic_autobots"
			}
		}
	}
	allow = {
		owner = {
			check_variable = {
				which = "autobot_wreckers_soldier_count"
				value < 3
			}
		}
	}
	on_queued = {
		owner = {
			change_variable = {
				which = "autobot_wreckers_soldier_count" 
				value = 1
			}
		}
	}
	
	on_unqueued = {
		owner = {
			change_variable = {
				which = "autobot_wreckers_soldier_count" 
				value = -1
			}
		}
	}
	
	ai_weight = {
		base = 120
		modifier = {
			factor = 2
			has_civic = civic_autobots
		}
		modifier = {
			factor = 2
			has_civic = civic_machine_autobots
		}
	}
}
# Mega-Warform - Metroplex
autobot_metroplex = {
	damage = 12.0
	health = 15.0
	has_morale = no
	morale_damage = 5.0
	collateral_damage = 12.0
	war_exhaustion = 10.0
	time = 2500
	has_species = yes
	
	icon = GFX_army_type_autobot_titan
	
	resources = {
		category = armies
		cost = {
			energon = 500
			minerals = 2500
		}
		upkeep = {
			energon = 12
		}
	}
	prerequisites = { "tech_autobot_titans" }
	potential = {
		from = {
			has_trait = "trait_robot_autobot"
		}
		owner = {
			OR = {
				has_civic = "civic_machine_autobots"
				has_civic = "civic_autobots"
			}
		}
	}
	allow = {
		owner = {
			check_variable = {
				which = "autobot_metroplex_soldier_count"
				value < 1
			}
		}
	}
	on_queued = {
		owner = {
			change_variable = {
				which = "autobot_metroplex_soldier_count" 
				value = 1
			}
		}
	}
	
	on_unqueued = {
		owner = {
			change_variable = {
				which = "autobot_metroplex_soldier_count" 
				value = -1
			}
		}
	}	
	ai_weight = {
		base = 125
		modifier = {
			factor = 2
			has_civic = civic_autobots
		}
		modifier = {
			factor = 2
			has_civic = civic_machine_autobots
		}
	}
	
}
# Mega-Warform - Omega Supreme
autobot_omega_sentinel = {
	damage = 7.5
	health = 7.5
	has_morale = no
	morale_damage = 3.0
	collateral_damage = 8.0
	war_exhaustion = 8.0
	time = 1500
	has_species = yes

	icon = GFX_army_type_autobot_titan

	resources = {
		category = armies
		cost = {
			energon = 500
			minerals = 2000
		}

		upkeep = {
			energon = 8
		}
	}
	prerequisites = { "tech_autobot_titans" }
	potential = {
		from = {
			has_trait = "trait_robot_autobot"
		}
		owner = {
			OR = {
				has_civic = "civic_machine_autobots"
				has_civic = "civic_autobots"
			}
		}
	}
	allow = {
		owner = {
			check_variable = {
				which = "autobot_omega_sentinel_soldier_count"
				value < 12
			}
		}
	}
	on_queued = {
		owner = {
			change_variable = {
				which = "autobot_omega_sentinel_soldier_count" 
				value = 1
			}
		}
	}
	
	on_unqueued = {
		owner = {
			change_variable = {
				which = "autobot_omega_sentinel_soldier_count" 
				value = -1
			}
		}
	}	
	ai_weight = {
		base = 125
		modifier = {
			factor = 2
			has_civic = civic_autobots
		}
		modifier = {
			factor = 2
			has_civic = civic_machine_autobots
		}
	}
	
}

autobot_fortress_maximus = {
	damage = 10.0
	health = 15.0
	has_morale = yes
	morale = 8.0
	morale_damage = 5.0
	collateral_damage = 2.0
	war_exhaustion = 8.0
	time = 2500
	has_species = yes

	icon = GFX_army_type_autobot_titan

	resources = {
		category = armies
		cost = {
			energon = 500
			minerals = 2500
		}

		upkeep = {
			energon = 10
		}
	}
	prerequisites = { "tech_autobot_titans" }
	potential = {
		from = {
			has_trait = "trait_robot_autobot"
		}
		owner = {
			OR = {
				has_civic = "civic_machine_autobots"
				has_civic = "civic_autobots"
			}
		}
	}
	allow = {
		owner = {
			check_variable = {
				which = "autobot_fortress_maximus_soldier_count"
				value < 1
			}
		}
	}
	on_queued = {
		owner = {
			change_variable = {
				which = "autobot_fortress_maximus_soldier_count" 
				value = 1
			}
		}
	}
	
	on_unqueued = {
		owner = {
			change_variable = {
				which = "autobot_fortress_maximus_soldier_count" 
				value = -1
			}
		}
	}	
	ai_weight = {
		base = 125
		modifier = {
			factor = 2
			has_civic = civic_autobots
		}
		modifier = {
			factor = 2
			has_civic = civic_machine_autobots
		}
	}
}

autobot_dinobots = {
	damage = 4.5
	health = 4.5
	has_morale = yes
	morale = 3.0
	morale_damage = 3.5
	collateral_damage = 5.0
	war_exhaustion = 5.0
	time = 365
	has_species = yes
	
	icon = GFX_army_type_autobot_dinobot
	
	resources = {
		category = armies
		cost = {
			minerals = 800
			energon = 400
		}
		upkeep = {
			energon = 6
		}
	}
	potential = {
		from = {
			has_trait = "trait_robot_autobot"
		}
		owner = {
			OR = {
				has_civic = "civic_machine_autobots"
				has_civic = "civic_autobots"
			}
		}
	}
	allow = {
		owner = {
			check_variable = {
				which = "autobot_dinobots_soldier_count"
				value < 1
			}
		}
	}
	on_queued = {
		owner = {
			change_variable = {
				which = "autobot_dinobots_soldier_count" 
				value = 1
			}
		}
	}
	
	on_unqueued = {
		owner = {
			change_variable = {
				which = "autobot_dinobots_soldier_count" 
				value = -1
			}
		}
	}
	ai_weight = {
		base = 120
		modifier = {
			factor = 2
			has_civic = civic_autobots
		}
		modifier = {
			factor = 2
			has_civic = civic_machine_autobots
		}
	}
	
	prerequisites = { "tech_morphogenetic_field_mastery" }
}


#DECEPTICON ARMIES
decepticon_army = {
	damage = 2.5
	health = 2.4
	has_morale = yes
	morale = 1.5
	morale_damage = 1.5
	collateral_damage = 1.5
	war_exhaustion = 1.5
	time = 120
	has_species = yes

	icon = GFX_army_type_decepticon

	resources = {
		category = armies
		cost = {
			minerals = 250
			energon = 100
		}

		upkeep = {
			energon = 2
		}
	}
	potential = {
		from = {
			has_trait = "trait_robot_decepticon"
		}
		owner = {
			OR = {
				has_civic = "civic_machine_decepticons"
				has_civic = "civic_decepticons"
			}
		}
	}
	ai_weight = {
		base = 120
		modifier = {
			factor = 2
			has_civic = civic_decepticons
		}
		modifier = {
			factor = 2
			has_civic = civic_machine_decepticons
		}
	}
}
decepticon_defense_army = {
	defensive = yes
	damage = 2.5
	health = 2.5
	has_morale = yes
	morale = 1.5
	morale_damage = 1.0
	collateral_damage = 0.0
	war_exhaustion = 0.0
	icon = GFX_army_type_decepticon_defensive
	has_species = yes
	time = 120
	
	resources = {
		category = armies
		cost = {
			minerals = 250
			energon = 100
		}

		upkeep = {
			energon = 2
		}
	}
	
	potential = {
		from = {
			has_trait = "trait_robot_decepticon"
		}
		owner = {
			OR = {
				has_civic = "civic_machine_decepticons"
				has_civic = "civic_decepticons"
			}
		}
	}
}

decepticon_seekers = {
	damage = 3.0
	health = 2.2
	has_morale = yes
	morale = 2.0
	morale_damage = 2.2
	collateral_damage = 1.5
	war_exhaustion = 1.5
	time = 240
	has_species = yes
	
	icon = GFX_army_type_decepticon_seeker
	
	resources = {
		category = armies
		cost = {
			minerals = 275
			energon = 100
		}
		upkeep = {
			energon = 2
		}
	}
	prerequisites = { "tech_decepticon_warriors" }
	potential = {
		from = {
			has_trait = "trait_robot_decepticon"
		}
		owner = {
			OR = {
				has_civic = "civic_machine_decepticons"
				has_civic = "civic_decepticons"
			}
		}
	}
	ai_weight = {
		base = 120
		modifier = {
			factor = 2
			has_civic = civic_decepticons
		}
		modifier = {
			factor = 2
			has_civic = civic_machine_decepticons
		}
	}
}
decepticon_justice_division = {
	damage = 4.0
	health = 4.5
	has_morale = yes
	morale = 2.5
	morale_damage = 3.5
	collateral_damage = 3.0
	war_exhaustion = 3.0
	time = 350
	has_species = yes
	
	icon = GFX_army_type_decepticon_specialist
	
	resources = {
		category = armies
		cost = {
			minerals = 650
			energon = 250
		}
		upkeep = {
			energon = 4
		}
	}
	prerequisites = { "tech_decepticon_warriors" }
	potential = {
		from = {
			has_trait = "trait_robot_decepticon"
		}
		owner = {
			OR = {
				has_civic = "civic_machine_decepticons"
				has_civic = "civic_decepticons"
			}
		}
	}
	allow = {
		owner = {
			check_variable = {
				which = "decepticon_justice_division_soldier_count"
				value < 3
			}
		}
	}
	on_queued = {
		owner = {
			change_variable = {
				which = "decepticon_justice_division_soldier_count" 
				value = 1
			}
		}
	}
	
	on_unqueued = {
		owner = {
			change_variable = {
				which = "decepticon_justice_division_soldier_count" 
				value = -1
			}
		}
	}
	ai_weight = {
		base = 120
		modifier = {
			factor = 2
			has_civic = civic_decepticons
		}
		modifier = {
			factor = 2
			has_civic = civic_machine_decepticons
		}
	}	
}
	
decepticon_leapers = {
	damage = 2.8
	health = 3.0
	has_morale = yes
	morale = 2.0
	morale_damage = 1.5
	collateral_damage = 4.0
	war_exhaustion = 2.0
	time = 250
	has_species = yes
	
	icon = GFX_army_type_decepticon_specialist
	
	resources = {
		category = armies
		cost = {
			minerals = 350
			energon = 150
		}
		upkeep = {
			energon = 3
		}
	}
	prerequisites = { "tech_decepticon_warriors" }
	potential = {
		from = {
			has_trait = "trait_robot_decepticon"
		}
		owner = {
			OR = {
				has_civic = "civic_machine_decepticons"
				has_civic = "civic_decepticons"
			}
		}
	}
	ai_weight = {
		base = 120
		modifier = {
			factor = 2
			has_civic = civic_decepticons
		}
		modifier = {
			factor = 2
			has_civic = civic_machine_decepticons
		}
	}
}
	

decepticon_predacons = {
	damage = 4.5
	health = 4.2
	has_morale = yes
	morale_damage = 4.0
	collateral_damage = 5.5
	war_exhaustion = 5.0
	time = 30
	has_species = yes

	icon = GFX_army_type_decepticon_predacon

	resources = {
		category = armies
		cost = {
			minerals = 800
			energon = 400
		}

		upkeep = {
			energon = 6
		}
	}
	potential = {
		from = {
			has_trait = "trait_robot_predacon"
		}
		owner = {
			OR = {
				has_civic = "civic_machine_decepticons"
				has_civic = "civic_decepticons"
			}
		}
	}
	
	prerequisites = { "tech_morphogenetic_field_mastery" }

	ai_weight = {
		base = 120
		modifier = {
			factor = 2
			has_civic = civic_decepticons
		}
		modifier = {
			factor = 2
			has_civic = civic_machine_decepticons
		}
		modifier = {
			set = 0
			check_variable = {
				which = "decepticon_predacons_soldier_count"
				value >= 1
			}
		}
	}	
}
decepticon_trypticon = {
	damage = 12.0
	health = 15.0
	has_morale = no
	morale_damage = 5.0
	collateral_damage = 12.0
	war_exhaustion = 10.0
	time = 2500
	has_species = yes

	icon = GFX_army_type_decepticon_titan

	resources = {
		category = armies
		cost = {
			dark_energon = 500
			minerals = 2500
		}

		upkeep = {
			dark_energon = 10
		}
	}
	prerequisites = { "tech_dark_energon_mining" "tech_decepticon_titans" }
	potential = {
		from = {
			has_trait = "trait_robot_decepticon"
		}
		owner = {
			OR = {
				has_civic = "civic_machine_decepticons"
				has_civic = "civic_decepticons"
			}
		}
	}
	allow = {
		owner = {
			check_variable = {
				which = "decepticon_trypticon_soldier_count"
				value < 1
			}
		}
	}
	on_queued = {
		owner = {
			change_variable = {
				which = "decepticon_trypticon_soldier_count" 
				value = 1
			}
		}
	}
	
	on_unqueued = {
		owner = {
			change_variable = {
				which = "decepticon_trypticon_soldier_count" 
				value = -1
			}
		}
	}
	ai_weight = {
		base = 500
		modifier = {
			set = 0
			check_variable = {
				which = "decepticon_trypticon_soldier_count"
				value >= 1
			}
		}
		modifier = {
			factor = 2
			has_civic = civic_decepticons
		}
		modifier = {
			factor = 2
			has_civic = civic_machine_decepticons
		}
		modifier = {
			set = 0
			check_variable = {
				which = "decepticon_trypticon_soldier_count"
				value >= 1
			}
		}
	}	
}



#DARK ENERGON ARMIES

dark_energon_corruptors = {
	damage = 3.5
	health = 4.0
	has_morale = no
	morale_damage = 2.5
	collateral_damage = 8.0
	war_exhaustion = 3.0
	time = 450
	has_species = no
	
	icon = GFX_army_type_undead
	
	resources = {
		category = armies
		cost = {
			dark_energon = 100
			minerals = 500
		}
		upkeep = {
			dark_energon = 2
		}
	}
	prerequisites = { "tech_dark_energon_mining" "tech_dark_energon_armies" }
	potential = {
		from = { has_trait = "trait_mechanical" }
		planet = {
			has_active_building = building_dark_energon_refinery
			num_assigned_jobs = {
				job = dark_energon_refiner
				value >=1
			}
		}
	}
	allow = {
		owner = { NOT = { has_policy_flag = robots_outlawed } }
	}
	ai_weight = {
		base = 120
		modifier = {
			factor = 2
			has_technology = tech_dark_energon_armies
		}
	}
}

dark_energon_terrorcons = {
	damage = 1.8
	health = 1.4
	has_morale = no
	morale_damage = 2.0
	collateral_damage = 1.5
	war_exhaustion = 0.8
	time = 75
	has_species = yes
	pop_limited = no
	
	icon = GFX_army_type_undead
	
	resources = {
		category = armies
		cost = {
			dark_energon = 50
		}
		upkeep = {
			dark_energon = 0.75
		}
	}
	prerequisites = { "tech_dark_energon_mining" "tech_dark_energon_armies" }
	potential = {
		from = { has_trait = "trait_mechanical" }
		planet = {
			has_active_building = building_dark_energon_refinery
			num_assigned_jobs = {
				job = dark_energon_refiner
				value >=1
			}
		}
	}
	allow = {
		owner = { NOT = { has_policy_flag = robots_outlawed } }
	}
	ai_weight = {
		base = 120
		modifier = {
			factor = 2
			has_technology = tech_dark_energon_armies
		}
	}
}

#DARK SPARK ARMIES 
dark_spark_terrorcons = {
	damage = 3.5
	health = 7.0
	has_morale = no
	morale_damage = 3
	collateral_damage = 3.5
	war_exhaustion = 0.50
	time = 175
	pop_limited = no
	has_species = no
	
	icon = GFX_army_type_undead
	
	resources = {
		category = armies
		cost = {
			dark_energon = 500
		}
		upkeep = {
			dark_energon = 5
		}
	}
	potential_country = {
		has_relic = r_dark_spark
	}
	potential = {
		custom_tooltip = {
			planet = { is_capital = yes }
		}
		owner = {
			has_modifier = dark_spark_energy
		}
	}
	ai_weight = {
		base = 50
	}
	
}


#CYBERTRONIAN HEROS

autobot_optimus_prime = {
	damage = 5.3
	health = 5.2
	has_morale = yes
	morale = 8.0
	morale_damage = 3.0
	collateral_damage = 1.5
	war_exhaustion = 8.0
	time = 2000
	has_species = yes

	icon = GFX_army_type_autobot

	resources = {
		category = armies
		cost = {
			energon = 300
			minerals = 1500
		}

		upkeep = {
			energon = 5
		}
	}
	prerequisites = { "tech_autobot_warriors" }
	potential = {
		from = {
			has_trait = "trait_robot_autobot"
		}
		owner = {
			OR = {
				has_civic = "civic_machine_autobots"
				has_civic = "civic_autobots"
			}
		}
	}
	allow = {
		owner = {
			check_variable = {
				which = "autobot_optimus_prime_soldier_count"
				value < 1
			}
		}
	}
	on_queued = {
		owner = {
			change_variable = {
				which = "autobot_optimus_prime_soldier_count" 
				value = 1
			}
		}
	}
	
	on_unqueued = {
		owner = {
			change_variable = {
				which = "autobot_optimus_prime_soldier_count" 
				value = -1
			}
		}
	}
	ai_weight = {
		base = 500
		modifier = {
			set = 0
			check_variable = {
				which = "autobot_optimus_prime_soldier_count"
				value >= 1
			}
		}
		modifier = {
			factor = 2
			has_civic = civic_autobots
		}
		modifier = {
			factor = 2
			has_civic = civic_machine_autobots
		}
		modifier = {
			set = 0
			check_variable = {
				which = "autobot_optimus_prime_soldier_count"
				value >= 1
			}
		}
	}		
}	

decepticon_megatron = {
	damage = 5.5
	health = 5.0
	has_morale = yes
	morale = 5.0
	morale_damage = 5.0
	collateral_damage = 5.0
	war_exhaustion = 8.0
	time = 2000
	has_species = yes

	icon = GFX_army_type_decepticon

	resources = {
		category = armies
		cost = {
			energon = 300
			minerals = 1500
		}

		upkeep = {
			energon = 5
		}
	}
	prerequisites = { "tech_decepticon_warriors" }
	potential = {
		from = {
			has_trait = "trait_robot_decepticon"
		}
		owner = {
			OR = {
				has_civic = "civic_machine_decepticons"
				has_civic = "civic_decepticons"
			}
		}
	}
	allow = {
		owner = {
			check_variable = {
				which = "decepticon_megatron_soldier_count"
				value < 1
			}
		}
	}
	on_queued = {
		owner = {
			change_variable = {
				which = "decepticon_megatron_soldier_count" 
				value = 1
			}
		}
	}
	
	on_unqueued = {
		owner = {
			change_variable = {
				which = "decepticon_megatron_soldier_count" 
				value = -1
			}
		}
	}
	ai_weight = {
		base = 500
		modifier = {
			set = 0
			check_variable = {
				which = "decepticon_megatron_soldier_count"
				value >= 1
			}
		}
		modifier = {
			factor = 2
			has_civic = civic_decepticons
		}
		modifier = {
			factor = 2
			has_civic = civic_machine_decepticons
		}
		modifier = {
			set = 0
			check_variable = {
				which = "decepticon_megatron_soldier_count"
				value >= 1
			}
		}
	}	
}

decepticon_galvatron = {
	damage = 6.0
	health = 5.5
	has_morale = yes
	morale = 5.0
	morale_damage = 5.5
	collateral_damage = 10.0
	war_exhaustion = 8.0
	time = 2000
	has_species = yes

	icon = GFX_army_type_decepticon

	resources = {
		category = armies
		cost = {
			dark_energon = 300
			minerals = 2000
		}

		upkeep = {
			dark_energon = 8
		}
	}
	prerequisites = { "tech_dark_energon_mining" "tech_decepticon_warriors" }
	potential = {
		from = {
			has_trait = "trait_robot_decepticon"
		}
		owner = {
			OR = {
				has_civic = "civic_machine_decepticons"
				has_civic = "civic_decepticons"
			}
		}
	}
	allow = {
		owner = {
			OR = {
				check_variable = {
					which = "decepticon_galvatron_soldier_count"
					value < 1
				}
			}
		}
	}
	on_queued = {
		owner = {
			change_variable = {
				which = "decepticon_galvatron_soldier_count" 
				value = 1
			}
		}
	}
	
	on_unqueued = {
		owner = {
			change_variable = {
				which = "decepticon_galvatron_soldier_count" 
				value = -1
			}
		}
	}
	ai_weight = {
		base = 200
		modifier = {
			factor = 2
			has_civic = civic_decepticons
		}
		modifier = {
			factor = 2
			has_civic = civic_machine_decepticons
		}
		modifier = {
			set = 0
			check_variable = {
				which = "decepticon_galvatron_soldier_count"
				value >= 1
			}
		}
	}	
}		
