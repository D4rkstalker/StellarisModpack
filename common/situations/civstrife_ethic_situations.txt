
# Faction Separatism - Egalitarian
situation_civstrife_faction_egal = {
	picture = GFX_evt_assembly_fight
	category = negative

	complete_icon = GFX_situation_outcome_revolt
	complete_icon_frame = GFX_situation_outcome_frame_red

	on_start = {
		target = {
			set_variable = { which = num_sep_pops value = 0 }
			set_variable = { which = sep_upkeep value = 0 }
			every_owned_pop = {
				limit = { pop_can_be_separatist_gen = yes }
				prev = { change_variable = { which = num_sep_pops value = 1 } }
			}
			multiply_variable = { which = num_sep_pops value = 0.02 }
			ceiling_variable = num_sep_pops
			while = {
				count = num_sep_pops
				random_owned_pop = {
					limit = { pop_can_be_separatist_gen = yes }
					set_pop_flag = sep_pop
					set_pop_flag = sep_pop_ethic
				}
			}
		}
	}

	on_progress_complete = {
		custom_tooltip = situation_civstrife_separatist_end
	}

	on_fail = {
		custom_tooltip = situation_civstrife_separatist_failed
		target = {
			remove_pop_faction_flag = faction_sep_situation
			clear_variable = ethic_sep_chance
			clear_variable = num_sep_pops
			clear_variable = sep_upkeep
			if = {
				limit = { any_owned_pop = { has_pop_flag = sep_pop_ethic } }
				every_owned_pop = {
					limit = { has_pop_flag = sep_pop_ethic }
					remove_pop_faction_flag = sep_pop_ethic
				}
			}
		}
	}

	on_abort = {
		target = {
			remove_pop_faction_flag = faction_sep_situation
			clear_variable = ethic_sep_chance
			clear_variable = num_sep_pops
			clear_variable = sep_upkeep
			if = {
				limit = { any_owned_pop = { has_pop_flag = sep_pop_ethic } }
				every_owned_pop = {
					limit = { has_pop_flag = sep_pop_ethic }
					remove_pop_faction_flag = sep_pop_ethic
				}
			}
		}
	}

	abort_trigger = {
		OR = {
			NOT = { exists = root.target }
			target.leader = { is_same_value = root.owner.ruler }
			owner = { has_country_flag = civ_war_recent_EGAL }
		}
	}

	start_value = 0

	stages = {
		reb_situation_1 = {
			icon = GFX_situation_stage_1
			icon_background = GFX_situation_stage_frame_blue
			end = 30
		}
		reb_situation_2 = {
			icon = GFX_situation_stage_2
			icon_background = GFX_situation_stage_frame_red
			end = 90
		}
		reb_situation_3 = {
			icon = GFX_situation_stage_3
			icon_background = GFX_situation_stage_frame_red
			end = 100
		}
	}

	approach = {
		name = approach_do_nothing
		icon = GFX_situation_approach_suspicious
		icon_background = GFX_situation_approach_bg_red
		default = yes
		resources = {
			category = situations
			upkeep = {
				unity = 0.5
				multiplier = target.sep_upkeep
			}
		}
		ai_weight = {
			base = 1
		}
	}

	approach = {
		name = approach_pr_campaign
		icon = GFX_situation_approach_handshake
		icon_background = GFX_situation_approach_bg_yellow
		on_select = { custom_tooltip = slowed_radical_tooltip }
		resources = {
			category = situations
			upkeep = {
				unity = 1
				energy = 0.2
				multiplier = target.sep_upkeep
			}
		}
		target_modifier = { pop_happiness = -0.05 }
		ai_weight = {
			base = 2
		}
		potential = {
			OR = {
				current_stage = reb_situation_2
				situation_progress >= 90
			}
		}
	}
	
	approach = {
		name = approach_faction_repression
		icon = GFX_situation_approach_whip
		icon_background = GFX_situation_approach_bg_yellow
		on_select = { custom_tooltip = slowed_radical_tooltip_2 }
		resources = {
			category = situations
			upkeep = {
				unity = 1.5
				energy = 0.5
				multiplier = target.sep_upkeep
			}
		}
		target_modifier = { pop_happiness = -0.15 }
		ai_weight = {
			base = 1
		}
		potential = {
			owner = { is_egalitarian = no }
			OR = {
				current_stage = reb_situation_2
				situation_progress >= 90
			}
		}
	}

	on_monthly = {
		events = {
			civethic.2000			# Monthly Separatism Spread
			civwar.5000				# Possible Revolt/Civil War
	    }
	    random_events = {
			91 = 0
			3 = unrest.101
			3 = unrest.105
			3 = unrest.110
		}
	}

	monthly_progress = {
		base = 0
		modifier = {
			desc = radicalisation_occurring
			add = 1
			situation_progress < 90
			is_faction_happy_situation = no
			target.leader = { is_heir = no }
		}

		modifier = {
			desc = approach_pr_campaign
			add = -0.25
			current_situation_approach = approach_pr_campaign
			situation_progress < 90
		}

		modifier = {
			desc = approach_faction_repression
			add = -0.5
			current_situation_approach = approach_faction_repression
			situation_progress < 90
		}

		modifier = {
			desc = faction_happy_no_support
			add = -2
			is_faction_happy_situation = yes
		}

		modifier = {
			desc = heir_leads_faction
			add = -5
			target.leader = { is_heir = yes }
		}
	}
}

# Faction Separatism - Authoritarian
situation_civstrife_faction_auth = {
	picture = GFX_evt_assembly_fight
	category = negative

	complete_icon = GFX_situation_outcome_revolt
	complete_icon_frame = GFX_situation_outcome_frame_red

	on_start = {
		target = {
			set_variable = { which = num_sep_pops value = 0 }
			set_variable = { which = sep_upkeep value = 0 }
			every_owned_pop = {
				limit = { pop_can_be_separatist_gen = yes }
				prev = { change_variable = { which = num_sep_pops value = 1 } }
			}
			multiply_variable = { which = num_sep_pops value = 0.02 }
			ceiling_variable = num_sep_pops
			while = {
				count = num_sep_pops
				random_owned_pop = {
					limit = { pop_can_be_separatist_gen = yes }
					set_pop_flag = sep_pop
					set_pop_flag = sep_pop_ethic
				}
			}
		}
	}

	on_progress_complete = {
		custom_tooltip = situation_civstrife_separatist_end
	}

	on_fail = {
		custom_tooltip = situation_civstrife_separatist_failed
		target = {
			remove_pop_faction_flag = faction_sep_situation
			clear_variable = ethic_sep_chance
			clear_variable = num_sep_pops
			clear_variable = sep_upkeep
			if = {
				limit = { any_owned_pop = { has_pop_flag = sep_pop_ethic } }
				every_owned_pop = {
					limit = { has_pop_flag = sep_pop_ethic }
					remove_pop_faction_flag = sep_pop_ethic
				}
			}
		}
	}

	on_abort = {
		target = {
			remove_pop_faction_flag = faction_sep_situation
			clear_variable = ethic_sep_chance
			clear_variable = num_sep_pops
			clear_variable = sep_upkeep
			if = {
				limit = { any_owned_pop = { has_pop_flag = sep_pop_ethic } }
				every_owned_pop = {
					limit = { has_pop_flag = sep_pop_ethic }
					remove_pop_faction_flag = sep_pop_ethic
				}
			}
		}
	}

	abort_trigger = {
		OR = {
			NOT = { exists = root.target }
			target.leader = { is_same_value = root.owner.ruler }
			owner = { has_country_flag = civ_war_recent_AUTH }
		}
	}

	start_value = 0

	stages = {
		reb_situation_1 = {
			icon = GFX_situation_stage_1
			icon_background = GFX_situation_stage_frame_blue
			end = 30
		}
		reb_situation_2 = {
			icon = GFX_situation_stage_2
			icon_background = GFX_situation_stage_frame_red
			end = 90
		}
		reb_situation_3 = {
			icon = GFX_situation_stage_3
			icon_background = GFX_situation_stage_frame_red
			end = 100
		}
	}

	approach = {
		name = approach_do_nothing
		icon = GFX_situation_approach_suspicious
		icon_background = GFX_situation_approach_bg_red
		default = yes
		resources = {
			category = situations
			upkeep = {
				unity = 0.5
				multiplier = target.sep_upkeep
			}
		}
		ai_weight = {
			base = 1
		}
	}

	approach = {
		name = approach_pr_campaign
		icon = GFX_situation_approach_handshake
		icon_background = GFX_situation_approach_bg_yellow
		on_select = { custom_tooltip = slowed_radical_tooltip }
		resources = {
			category = situations
			upkeep = {
				unity = 1
				energy = 0.2
				multiplier = target.sep_upkeep
			}
		}
		target_modifier = { pop_happiness = -0.05 }
		ai_weight = {
			base = 2
		}
		potential = {
			OR = {
				current_stage = reb_situation_2
				situation_progress >= 90
			}
		}
	}
	
	approach = {
		name = approach_faction_repression
		icon = GFX_situation_approach_whip
		icon_background = GFX_situation_approach_bg_yellow
		on_select = { custom_tooltip = slowed_radical_tooltip_2 }
		resources = {
			category = situations
			upkeep = {
				unity = 1.5
				energy = 0.5
				multiplier = target.sep_upkeep
			}
		}
		target_modifier = { pop_happiness = -0.15 }
		ai_weight = {
			base = 1
		}
		potential = {
			owner = { is_egalitarian = no }
			OR = {
				current_stage = reb_situation_2
				situation_progress >= 90
			}
		}
	}

	on_monthly = {
		events = {
			civethic.2000			# Monthly Separatism Spread
			civwar.5000				# Possible Revolt/Civil War
	    }
	    random_events = {
			91 = 0
			3 = unrest.101
			3 = unrest.105
			3 = unrest.110
		}
	}

	monthly_progress = {
		base = 0
		modifier = {
			desc = radicalisation_occurring
			add = 1
			situation_progress < 90
			is_faction_happy_situation = no
			target.leader = { is_heir = no }
		}

		modifier = {
			desc = approach_pr_campaign
			add = -0.25
			current_situation_approach = approach_pr_campaign
			situation_progress < 90
		}

		modifier = {
			desc = approach_faction_repression
			add = -0.5
			current_situation_approach = approach_faction_repression
			situation_progress < 90
		}

		modifier = {
			desc = faction_happy_no_support
			add = -2
			is_faction_happy_situation = yes
		}

		modifier = {
			desc = heir_leads_faction
			add = -5
			target.leader = { is_heir = yes }
		}
	}
}

# Faction Separatism - Militarist
situation_civstrife_faction_mil = {
	picture = GFX_evt_assembly_fight
	category = negative

	complete_icon = GFX_situation_outcome_revolt
	complete_icon_frame = GFX_situation_outcome_frame_red

	on_start = {
		target = {
			set_variable = { which = num_sep_pops value = 0 }
			set_variable = { which = sep_upkeep value = 0 }
			every_owned_pop = {
				limit = { pop_can_be_separatist_gen = yes }
				prev = { change_variable = { which = num_sep_pops value = 1 } }
			}
			multiply_variable = { which = num_sep_pops value = 0.02 }
			ceiling_variable = num_sep_pops
			while = {
				count = num_sep_pops
				random_owned_pop = {
					limit = { pop_can_be_separatist_gen = yes }
					set_pop_flag = sep_pop
					set_pop_flag = sep_pop_ethic
				}
			}
		}
	}

	on_progress_complete = {
		custom_tooltip = situation_civstrife_separatist_end
	}

	on_fail = {
		custom_tooltip = situation_civstrife_separatist_failed
		target = {
			remove_pop_faction_flag = faction_sep_situation
			clear_variable = ethic_sep_chance
			clear_variable = num_sep_pops
			clear_variable = sep_upkeep
			if = {
				limit = { any_owned_pop = { has_pop_flag = sep_pop_ethic } }
				every_owned_pop = {
					limit = { has_pop_flag = sep_pop_ethic }
					remove_pop_faction_flag = sep_pop_ethic
				}
			}
		}
	}

	on_abort = {
		target = {
			remove_pop_faction_flag = faction_sep_situation
			clear_variable = ethic_sep_chance
			clear_variable = num_sep_pops
			clear_variable = sep_upkeep
			if = {
				limit = { any_owned_pop = { has_pop_flag = sep_pop_ethic } }
				every_owned_pop = {
					limit = { has_pop_flag = sep_pop_ethic }
					remove_pop_faction_flag = sep_pop_ethic
				}
			}
		}
	}

	abort_trigger = {
		OR = {
			NOT = { exists = root.target }
			target.leader = { is_same_value = root.owner.ruler }
			owner = { has_country_flag = civ_war_recent_MIL }
		}
	}

	start_value = 0

	stages = {
		reb_situation_1 = {
			icon = GFX_situation_stage_1
			icon_background = GFX_situation_stage_frame_blue
			end = 30
		}
		reb_situation_2 = {
			icon = GFX_situation_stage_2
			icon_background = GFX_situation_stage_frame_red
			end = 90
		}
		reb_situation_3 = {
			icon = GFX_situation_stage_3
			icon_background = GFX_situation_stage_frame_red
			end = 100
		}
	}

	approach = {
		name = approach_do_nothing
		icon = GFX_situation_approach_suspicious
		icon_background = GFX_situation_approach_bg_red
		default = yes
		resources = {
			category = situations
			upkeep = {
				unity = 0.5
				multiplier = target.sep_upkeep
			}
		}
		ai_weight = {
			base = 1
		}
	}

	approach = {
		name = approach_pr_campaign
		icon = GFX_situation_approach_handshake
		icon_background = GFX_situation_approach_bg_yellow
		on_select = { custom_tooltip = slowed_radical_tooltip }
		resources = {
			category = situations
			upkeep = {
				unity = 1
				energy = 0.2
				multiplier = target.sep_upkeep
			}
		}
		target_modifier = { pop_happiness = -0.05 }
		ai_weight = {
			base = 2
		}
		potential = {
			OR = {
				current_stage = reb_situation_2
				situation_progress >= 90
			}
		}
	}
	
	approach = {
		name = approach_faction_repression
		icon = GFX_situation_approach_whip
		icon_background = GFX_situation_approach_bg_yellow
		on_select = { custom_tooltip = slowed_radical_tooltip_2 }
		resources = {
			category = situations
			upkeep = {
				unity = 1.5
				energy = 0.5
				multiplier = target.sep_upkeep
			}
		}
		target_modifier = { pop_happiness = -0.15 }
		ai_weight = {
			base = 1
		}
		potential = {
			owner = { is_egalitarian = no }
			OR = {
				current_stage = reb_situation_2
				situation_progress >= 90
			}
		}
	}

	on_monthly = {
		events = {
			civethic.2000			# Monthly Separatism Spread
			civwar.5000				# Possible Revolt/Civil War
	    }
	    random_events = {
			91 = 0
			3 = unrest.101
			3 = unrest.105
			3 = unrest.110
		}
	}

	monthly_progress = {
		base = 0
		modifier = {
			desc = radicalisation_occurring
			add = 1
			situation_progress < 90
			is_faction_happy_situation = no
			target.leader = { is_heir = no }
		}

		modifier = {
			desc = approach_pr_campaign
			add = -0.25
			current_situation_approach = approach_pr_campaign
			situation_progress < 90
		}

		modifier = {
			desc = approach_faction_repression
			add = -0.5
			current_situation_approach = approach_faction_repression
			situation_progress < 90
		}

		modifier = {
			desc = faction_happy_no_support
			add = -2
			is_faction_happy_situation = yes
		}

		modifier = {
			desc = heir_leads_faction
			add = -5
			target.leader = { is_heir = yes }
		}
	}
}

# Faction Separatism - Pacifist
situation_civstrife_faction_pac = {
	picture = GFX_evt_assembly_fight
	category = negative

	complete_icon = GFX_situation_outcome_revolt
	complete_icon_frame = GFX_situation_outcome_frame_red

	on_start = {
		target = {
			set_variable = { which = num_sep_pops value = 0 }
			set_variable = { which = sep_upkeep value = 0 }
			every_owned_pop = {
				limit = { pop_can_be_separatist_gen = yes }
				prev = { change_variable = { which = num_sep_pops value = 1 } }
			}
			multiply_variable = { which = num_sep_pops value = 0.05 }
			ceiling_variable = num_sep_pops
			while = {
				count = num_sep_pops
				random_owned_pop = {
					limit = { pop_can_be_separatist_gen = yes }
					set_pop_flag = sep_pop
					set_pop_flag = sep_pop_ethic
					prev = { change_variable = { which = sep_upkeep value = 1 } }
				}
			}
		}
	}

	on_progress_complete = {
		custom_tooltip = situation_civstrife_separatist_end
	}

	on_fail = {
		custom_tooltip = situation_civstrife_separatist_failed
		target = {
			remove_pop_faction_flag = faction_sep_situation
			clear_variable = ethic_sep_chance
			clear_variable = num_sep_pops
			clear_variable = sep_upkeep
			if = {
				limit = { any_owned_pop = { has_pop_flag = sep_pop_ethic } }
				every_owned_pop = {
					limit = { has_pop_flag = sep_pop_ethic }
					remove_pop_faction_flag = sep_pop_ethic
				}
			}
		}
	}

	on_abort = {
		target = {
			remove_pop_faction_flag = faction_sep_situation
			clear_variable = ethic_sep_chance
			clear_variable = num_sep_pops
			clear_variable = sep_upkeep
			if = {
				limit = { any_owned_pop = { has_pop_flag = sep_pop_ethic } }
				every_owned_pop = {
					limit = { has_pop_flag = sep_pop_ethic }
					remove_pop_faction_flag = sep_pop_ethic
				}
			}
		}
	}

	abort_trigger = {
		OR = {
			NOT = { exists = root.target }
			target.leader = { is_same_value = root.owner.ruler }
			owner = { has_country_flag = civ_war_recent_PAC }
		}
	}

	start_value = 0

	stages = {
		reb_situation_1 = {
			icon = GFX_situation_stage_1
			icon_background = GFX_situation_stage_frame_blue
			end = 30
		}
		reb_situation_2 = {
			icon = GFX_situation_stage_2
			icon_background = GFX_situation_stage_frame_red
			end = 90
		}
		reb_situation_3 = {
			icon = GFX_situation_stage_3
			icon_background = GFX_situation_stage_frame_red
			end = 100
		}
	}

	approach = {
		name = approach_do_nothing
		icon = GFX_situation_approach_suspicious
		icon_background = GFX_situation_approach_bg_red
		default = yes
		resources = {
			category = situations
			upkeep = {
				unity = 0.5
				multiplier = target.sep_upkeep
			}
		}
		ai_weight = {
			base = 1
		}
	}

	approach = {
		name = approach_pr_campaign
		icon = GFX_situation_approach_handshake
		icon_background = GFX_situation_approach_bg_yellow
		on_select = { custom_tooltip = slowed_radical_tooltip }
		resources = {
			category = situations
			upkeep = {
				unity = 1
				energy = 0.2
				multiplier = target.sep_upkeep
			}
		}
		target_modifier = { pop_happiness = -0.05 }
		ai_weight = {
			base = 2
		}
		potential = {
			OR = {
				current_stage = reb_situation_2
				situation_progress >= 90
			}
		}
	}

	approach = {
		name = approach_faction_repression
		icon = GFX_situation_approach_whip
		icon_background = GFX_situation_approach_bg_yellow
		on_select = { custom_tooltip = slowed_radical_tooltip_2 }
		resources = {
			category = situations
			upkeep = {
				unity = 1.5
				energy = 0.5
				multiplier = target.sep_upkeep
			}
		}
		target_modifier = { pop_happiness = -0.15 }
		ai_weight = {
			base = 1
		}
		potential = {
			owner = { is_egalitarian = no }
			OR = {
				current_stage = reb_situation_2
				situation_progress >= 90
			}
		}
	}

	on_monthly = {
		events = {
			civethic.2000			# Monthly Separatism Spread
			civwar.5000				# Possible Revolt/Civil War
	    }
	    random_events = {
			91 = 0

			# Radical pacifists shouldln't be engaging in Terrorism.
			# What should they do instead? Protesting?
			# 3 = unrest.101
			# 3 = unrest.105
			# 3 = unrest.110
		}
	}

	monthly_progress = {
		base = 0
		modifier = {
			desc = radicalisation_occurring
			add = 1
			situation_progress < 90
			is_faction_happy_situation = no
			target.leader = { is_heir = no }
		}

		modifier = {
			desc = approach_pr_campaign
			add = -0.25
			current_situation_approach = approach_pr_campaign
			situation_progress < 90
		}

		modifier = {
			desc = approach_faction_repression
			add = -0.5
			current_situation_approach = approach_faction_repression
			situation_progress < 90
		}

		modifier = {
			desc = faction_happy_no_support
			add = -2
			is_faction_happy_situation = yes
		}

		modifier = {
			desc = heir_leads_faction
			add = -5
			target.leader = { is_heir = yes }
		}
	}
}

# Faction Separatism - Materialist
situation_civstrife_faction_mat = {
	picture = GFX_evt_assembly_fight
	category = negative

	complete_icon = GFX_situation_outcome_revolt
	complete_icon_frame = GFX_situation_outcome_frame_red

	on_start = {
		target = {
			set_variable = { which = num_sep_pops value = 0 }
			set_variable = { which = sep_upkeep value = 0 }
			every_owned_pop = {
				limit = { pop_can_be_separatist_gen = yes }
				prev = { change_variable = { which = num_sep_pops value = 1 } }
			}
			multiply_variable = { which = num_sep_pops value = 0.02 }
			ceiling_variable = num_sep_pops
			while = {
				count = num_sep_pops
				random_owned_pop = {
					limit = { pop_can_be_separatist_gen = yes }
					set_pop_flag = sep_pop
					set_pop_flag = sep_pop_ethic
				}
			}
		}
	}

	on_progress_complete = {
		custom_tooltip = situation_civstrife_separatist_end
	}

	on_fail = {
		custom_tooltip = situation_civstrife_separatist_failed
		target = {
			remove_pop_faction_flag = faction_sep_situation
			clear_variable = ethic_sep_chance
			clear_variable = num_sep_pops
			clear_variable = sep_upkeep
			if = {
				limit = { any_owned_pop = { has_pop_flag = sep_pop_ethic } }
				every_owned_pop = {
					limit = { has_pop_flag = sep_pop_ethic }
					remove_pop_faction_flag = sep_pop_ethic
				}
			}
		}
	}

	on_abort = {
		target = {
			remove_pop_faction_flag = faction_sep_situation
			clear_variable = ethic_sep_chance
			clear_variable = num_sep_pops
			clear_variable = sep_upkeep
			if = {
				limit = { any_owned_pop = { has_pop_flag = sep_pop_ethic } }
				every_owned_pop = {
					limit = { has_pop_flag = sep_pop_ethic }
					remove_pop_faction_flag = sep_pop_ethic
				}
			}
		}
	}

	abort_trigger = {
		OR = {
			NOT = { exists = root.target }
			target.leader = { is_same_value = root.owner.ruler }
			owner = { has_country_flag = civ_war_recent_MAT }
		}
	}

	start_value = 0

	stages = {
		reb_situation_1 = {
			icon = GFX_situation_stage_1
			icon_background = GFX_situation_stage_frame_blue
			end = 30
		}
		reb_situation_2 = {
			icon = GFX_situation_stage_2
			icon_background = GFX_situation_stage_frame_red
			end = 90
		}
		reb_situation_3 = {
			icon = GFX_situation_stage_3
			icon_background = GFX_situation_stage_frame_red
			end = 100
		}
	}

	approach = {
		name = approach_do_nothing
		icon = GFX_situation_approach_suspicious
		icon_background = GFX_situation_approach_bg_red
		default = yes
		resources = {
			category = situations
			upkeep = {
				unity = 0.5
				multiplier = target.sep_upkeep
			}
		}
		ai_weight = {
			base = 1
		}
	}

	approach = {
		name = approach_pr_campaign
		icon = GFX_situation_approach_handshake
		icon_background = GFX_situation_approach_bg_yellow
		on_select = { custom_tooltip = slowed_radical_tooltip }
		resources = {
			category = situations
			upkeep = {
				unity = 1
				energy = 0.2
				multiplier = target.sep_upkeep
			}
		}
		target_modifier = { pop_happiness = -0.05 }
		ai_weight = {
			base = 2
		}
		potential = {
			OR = {
				current_stage = reb_situation_2
				situation_progress >= 90
			}
		}
	}

	approach = {
		name = approach_faction_repression
		icon = GFX_situation_approach_whip
		icon_background = GFX_situation_approach_bg_yellow
		on_select = { custom_tooltip = slowed_radical_tooltip_2 }
		resources = {
			category = situations
			upkeep = {
				unity = 1.5
				energy = 0.5
				multiplier = target.sep_upkeep
			}
		}
		target_modifier = { pop_happiness = -0.15 }
		ai_weight = {
			base = 1
		}
		potential = {
			owner = { is_egalitarian = no }
			OR = {
				current_stage = reb_situation_2
				situation_progress >= 90
			}
		}
	}

	approach = {
		name = approach_speak_to_leader
		icon = GFX_situation_approach_handshake
		icon_background = GFX_situation_approach_bg_green
		on_select = {
			# hidden_effect = { situation_event = { id = civwar.5100 } }
		}
		ai_weight = {
			base = 0
		}
		# potential = { owner = { is_egalitarian = no } }
		potential = { always = no }
	}

	on_monthly = {
		events = {
			civethic.2000			# Monthly Separatism Spread
			civwar.5000				# Possible Revolt/Civil War
	    }
	    random_events = {
			91 = 0
			3 = unrest.101
			3 = unrest.105
			3 = unrest.110
		}
	}

	monthly_progress = {
		base = 0
		modifier = {
			desc = radicalisation_occurring
			add = 1
			situation_progress < 90
			is_faction_happy_situation = no
			target.leader = { is_heir = no }
		}

		modifier = {
			desc = approach_pr_campaign
			add = -0.25
			current_situation_approach = approach_pr_campaign
			situation_progress < 90
		}

		modifier = {
			desc = approach_faction_repression
			add = -0.5
			current_situation_approach = approach_faction_repression
			situation_progress < 90
		}

		modifier = {
			desc = faction_happy_no_support
			add = -2
			is_faction_happy_situation = yes
		}

		modifier = {
			desc = heir_leads_faction
			add = -5
			target.leader = { is_heir = yes }
		}
	}
}

# Faction Separatism - Spiritualist
situation_civstrife_faction_spi = {
	picture = GFX_evt_assembly_fight
	category = negative

	complete_icon = GFX_situation_outcome_revolt
	complete_icon_frame = GFX_situation_outcome_frame_red

	on_start = {
		target = {
			set_variable = { which = num_sep_pops value = 0 }
			set_variable = { which = sep_upkeep value = 0 }
			every_owned_pop = {
				limit = { pop_can_be_separatist_gen = yes }
				prev = { change_variable = { which = num_sep_pops value = 1 } }
			}
			multiply_variable = { which = num_sep_pops value = 0.02 }
			ceiling_variable = num_sep_pops
			while = {
				count = num_sep_pops
				random_owned_pop = {
					limit = { pop_can_be_separatist_gen = yes }
					set_pop_flag = sep_pop
					set_pop_flag = sep_pop_ethic
				}
			}
		}
	}

	on_progress_complete = {
		custom_tooltip = situation_civstrife_separatist_end
	}

	on_fail = {
		custom_tooltip = situation_civstrife_separatist_failed
		target = {
			remove_pop_faction_flag = faction_sep_situation
			clear_variable = ethic_sep_chance
			clear_variable = num_sep_pops
			clear_variable = sep_upkeep
			if = {
				limit = { any_owned_pop = { has_pop_flag = sep_pop_ethic } }
				every_owned_pop = {
					limit = { has_pop_flag = sep_pop_ethic }
					remove_pop_faction_flag = sep_pop_ethic
				}
			}
		}
	}

	on_abort = {
		target = {
			remove_pop_faction_flag = faction_sep_situation
			clear_variable = ethic_sep_chance
			clear_variable = num_sep_pops
			clear_variable = sep_upkeep
			if = {
				limit = { any_owned_pop = { has_pop_flag = sep_pop_ethic } }
				every_owned_pop = {
					limit = { has_pop_flag = sep_pop_ethic }
					remove_pop_faction_flag = sep_pop_ethic
				}
			}
		}
	}

	abort_trigger = {
		OR = {
			NOT = { exists = root.target }
			target.leader = { is_same_value = root.owner.ruler }
			owner = { has_country_flag = civ_war_recent_SPI }
		}
	}

	start_value = 0

	stages = {
		reb_situation_1 = {
			icon = GFX_situation_stage_1
			icon_background = GFX_situation_stage_frame_blue
			end = 30
		}
		reb_situation_2 = {
			icon = GFX_situation_stage_2
			icon_background = GFX_situation_stage_frame_red
			end = 90
		}
		reb_situation_3 = {
			icon = GFX_situation_stage_3
			icon_background = GFX_situation_stage_frame_red
			end = 100
		}
	}

	approach = {
		name = approach_do_nothing
		icon = GFX_situation_approach_suspicious
		icon_background = GFX_situation_approach_bg_red
		default = yes
		resources = {
			category = situations
			upkeep = {
				unity = 0.5
				multiplier = target.sep_upkeep
			}
		}
		ai_weight = {
			base = 1
		}
	}

	approach = {
		name = approach_pr_campaign
		icon = GFX_situation_approach_handshake
		icon_background = GFX_situation_approach_bg_yellow
		on_select = { custom_tooltip = slowed_radical_tooltip }
		resources = {
			category = situations
			upkeep = {
				unity = 1
				energy = 0.2
				multiplier = target.sep_upkeep
			}
		}
		target_modifier = { pop_happiness = -0.05 }
		ai_weight = {
			base = 2
		}
		potential = {
			OR = {
				current_stage = reb_situation_2
				situation_progress >= 90
			}
		}
	}
	
	approach = {
		name = approach_faction_repression
		icon = GFX_situation_approach_whip
		icon_background = GFX_situation_approach_bg_yellow
		on_select = { custom_tooltip = slowed_radical_tooltip_2 }
		resources = {
			category = situations
			upkeep = {
				unity = 1.5
				energy = 0.5
				multiplier = target.sep_upkeep
			}
		}
		target_modifier = { pop_happiness = -0.15 }
		ai_weight = {
			base = 1
		}
		potential = {
			owner = { is_egalitarian = no }
			OR = {
				current_stage = reb_situation_2
				situation_progress >= 90
			}
		}
	}

	on_monthly = {
		events = {
			civethic.2000			# Monthly Separatism Spread
			civwar.5000				# Possible Revolt/Civil War
	    }
	    random_events = {
			91 = 0
			3 = unrest.101
			3 = unrest.105
			3 = unrest.110
		}
	}

	monthly_progress = {
		base = 0
		modifier = {
			desc = radicalisation_occurring
			add = 1
			situation_progress < 90
			is_faction_happy_situation = no
			target.leader = { is_heir = no }
		}

		modifier = {
			desc = approach_pr_campaign
			add = -0.25
			current_situation_approach = approach_pr_campaign
			situation_progress < 90
		}

		modifier = {
			desc = approach_faction_repression
			add = -0.5
			current_situation_approach = approach_faction_repression
			situation_progress < 90
		}

		modifier = {
			desc = faction_happy_no_support
			add = -2
			is_faction_happy_situation = yes
		}

		modifier = {
			desc = heir_leads_faction
			add = -5
			target.leader = { is_heir = yes }
		}
	}
}

# Faction Separatism - Xenophile
situation_civstrife_faction_phile = {
	picture = GFX_evt_assembly_fight
	category = negative

	complete_icon = GFX_situation_outcome_revolt
	complete_icon_frame = GFX_situation_outcome_frame_red

	on_start = {
		target = {
			set_variable = { which = num_sep_pops value = 0 }
			set_variable = { which = sep_upkeep value = 0 }
			every_owned_pop = {
				limit = { pop_can_be_separatist_gen = yes }
				prev = { change_variable = { which = num_sep_pops value = 1 } }
			}
			multiply_variable = { which = num_sep_pops value = 0.02 }
			ceiling_variable = num_sep_pops
			while = {
				count = num_sep_pops
				random_owned_pop = {
					limit = { pop_can_be_separatist_gen = yes }
					set_pop_flag = sep_pop
					set_pop_flag = sep_pop_ethic
				}
			}
		}
	}

	on_progress_complete = {
		custom_tooltip = situation_civstrife_separatist_end
	}

	on_fail = {
		custom_tooltip = situation_civstrife_separatist_failed
		target = {
			remove_pop_faction_flag = faction_sep_situation
			clear_variable = ethic_sep_chance
			clear_variable = num_sep_pops
			clear_variable = sep_upkeep
			if = {
				limit = { any_owned_pop = { has_pop_flag = sep_pop_ethic } }
				every_owned_pop = {
					limit = { has_pop_flag = sep_pop_ethic }
					remove_pop_faction_flag = sep_pop_ethic
				}
			}
		}
	}

	on_abort = {
		target = {
			remove_pop_faction_flag = faction_sep_situation
			clear_variable = ethic_sep_chance
			clear_variable = num_sep_pops
			clear_variable = sep_upkeep
			if = {
				limit = { any_owned_pop = { has_pop_flag = sep_pop_ethic } }
				every_owned_pop = {
					limit = { has_pop_flag = sep_pop_ethic }
					remove_pop_faction_flag = sep_pop_ethic
				}
			}
		}
	}

	abort_trigger = {
		OR = {
			NOT = { exists = root.target }
			target.leader = { is_same_value = root.owner.ruler }
			owner = { has_country_flag = civ_war_recent_XENO }
		}
	}

	start_value = 0

	stages = {
		reb_situation_1 = {
			icon = GFX_situation_stage_1
			icon_background = GFX_situation_stage_frame_blue
			end = 30
		}
		reb_situation_2 = {
			icon = GFX_situation_stage_2
			icon_background = GFX_situation_stage_frame_red
			end = 90
		}
		reb_situation_3 = {
			icon = GFX_situation_stage_3
			icon_background = GFX_situation_stage_frame_red
			end = 100
		}
	}

	approach = {
		name = approach_do_nothing
		icon = GFX_situation_approach_suspicious
		icon_background = GFX_situation_approach_bg_red
		default = yes
		resources = {
			category = situations
			upkeep = {
				unity = 0.5
				multiplier = target.sep_upkeep
			}
		}
		ai_weight = {
			base = 1
		}
	}

	approach = {
		name = approach_pr_campaign
		icon = GFX_situation_approach_handshake
		icon_background = GFX_situation_approach_bg_yellow
		on_select = { custom_tooltip = slowed_radical_tooltip }
		resources = {
			category = situations
			upkeep = {
				unity = 1
				energy = 0.2
				multiplier = target.sep_upkeep
			}
		}
		target_modifier = { pop_happiness = -0.05 }
		ai_weight = {
			base = 2
		}
		potential = {
			OR = {
				current_stage = reb_situation_2
				situation_progress >= 90
			}
		}
	}

	approach = {
		name = approach_faction_repression
		icon = GFX_situation_approach_whip
		icon_background = GFX_situation_approach_bg_yellow
		on_select = { custom_tooltip = slowed_radical_tooltip_2 }
		resources = {
			category = situations
			upkeep = {
				unity = 1.5
				energy = 0.5
				multiplier = target.sep_upkeep
			}
		}
		target_modifier = { pop_happiness = -0.15 }
		ai_weight = {
			base = 1
		}
		potential = {
			owner = { is_egalitarian = no }
			OR = {
				current_stage = reb_situation_2
				situation_progress >= 90
			}
		}
	}

	on_monthly = {
		events = {
			civethic.2000			# Monthly Separatism Spread
			civwar.5000				# Possible Revolt/Civil War
	    }
	    random_events = {
			91 = 0
			3 = unrest.101
			3 = unrest.105
			3 = unrest.110
		}
	}

	monthly_progress = {
		base = 0
		modifier = {
			desc = radicalisation_occurring
			add = 1
			situation_progress < 90
			is_faction_happy_situation = no
			target.leader = { is_heir = no }
		}

		modifier = {
			desc = approach_pr_campaign
			add = -0.25
			current_situation_approach = approach_pr_campaign
			situation_progress < 90
		}

		modifier = {
			desc = approach_faction_repression
			add = -0.5
			current_situation_approach = approach_faction_repression
			situation_progress < 90
		}

		modifier = {
			desc = faction_happy_no_support
			add = -2
			is_faction_happy_situation = yes
		}

		modifier = {
			desc = heir_leads_faction
			add = -5
			target.leader = { is_heir = yes }
		}
	}
}

# Faction Separatism - Xenophobe
situation_civstrife_faction_phobe = {
	picture = GFX_evt_assembly_fight
	category = negative

	complete_icon = GFX_situation_outcome_revolt
	complete_icon_frame = GFX_situation_outcome_frame_red

	on_start = {
		target = {
			set_variable = { which = num_sep_pops value = 0 }
			set_variable = { which = sep_upkeep value = 0 }
			every_owned_pop = {
				limit = { pop_can_be_separatist_gen = yes }
				prev = { change_variable = { which = num_sep_pops value = 1 } }
			}
			multiply_variable = { which = num_sep_pops value = 0.02 }
			ceiling_variable = num_sep_pops
			while = {
				count = num_sep_pops
				random_owned_pop = {
					limit = { pop_can_be_separatist_gen = yes }
					set_pop_flag = sep_pop
					set_pop_flag = sep_pop_ethic
				}
			}
		}
	}

	on_progress_complete = {
		custom_tooltip = situation_civstrife_separatist_end
	}

	on_fail = {
		custom_tooltip = situation_civstrife_separatist_failed
		target = {
			remove_pop_faction_flag = faction_sep_situation
			clear_variable = ethic_sep_chance
			clear_variable = num_sep_pops
			clear_variable = sep_upkeep
			if = {
				limit = { any_owned_pop = { has_pop_flag = sep_pop_ethic } }
				every_owned_pop = {
					limit = { has_pop_flag = sep_pop_ethic }
					remove_pop_faction_flag = sep_pop_ethic
				}
			}
		}
	}

	on_abort = {
		target = {
			remove_pop_faction_flag = faction_sep_situation
			clear_variable = ethic_sep_chance
			clear_variable = num_sep_pops
			clear_variable = sep_upkeep
			if = {
				limit = { any_owned_pop = { has_pop_flag = sep_pop_ethic } }
				every_owned_pop = {
					limit = { has_pop_flag = sep_pop_ethic }
					remove_pop_faction_flag = sep_pop_ethic
				}
			}
		}
	}

	abort_trigger = {
		OR = {
			NOT = { exists = root.target }
			target.leader = { is_same_value = root.owner.ruler }
			owner = { has_country_flag = civ_war_recent_PHOBE }
		}
	}

	start_value = 0

	stages = {
		reb_situation_1 = {
			icon = GFX_situation_stage_1
			icon_background = GFX_situation_stage_frame_blue
			end = 30
		}
		reb_situation_2 = {
			icon = GFX_situation_stage_2
			icon_background = GFX_situation_stage_frame_red
			end = 90
		}
		reb_situation_3 = {
			icon = GFX_situation_stage_3
			icon_background = GFX_situation_stage_frame_red
			end = 100
		}
	}

	approach = {
		name = approach_do_nothing
		icon = GFX_situation_approach_suspicious
		icon_background = GFX_situation_approach_bg_red
		default = yes
		resources = {
			category = situations
			upkeep = {
				unity = 0.5
				multiplier = target.sep_upkeep
			}
		}
		ai_weight = {
			base = 1
		}
	}

	approach = {
		name = approach_pr_campaign
		icon = GFX_situation_approach_handshake
		icon_background = GFX_situation_approach_bg_yellow
		on_select = { custom_tooltip = slowed_radical_tooltip }
		resources = {
			category = situations
			upkeep = {
				unity = 1
				energy = 0.2
				multiplier = target.sep_upkeep
			}
		}
		target_modifier = { pop_happiness = -0.05 }
		ai_weight = {
			base = 2
		}
		potential = {
			OR = {
				current_stage = reb_situation_2
				situation_progress >= 90
			}
		}
	}

	approach = {
		name = approach_faction_repression
		icon = GFX_situation_approach_whip
		icon_background = GFX_situation_approach_bg_yellow
		on_select = { custom_tooltip = slowed_radical_tooltip_2 }
		resources = {
			category = situations
			upkeep = {
				unity = 1.5
				energy = 0.5
				multiplier = target.sep_upkeep
			}
		}
		target_modifier = { pop_happiness = -0.15 }
		ai_weight = {
			base = 1
		}
		potential = {
			owner = { is_egalitarian = no }
			OR = {
				current_stage = reb_situation_2
				situation_progress >= 90
			}
		}
	}

	on_monthly = {
		events = {
			civethic.2000			# Monthly Separatism Spread
			civwar.5000				# Possible Revolt/Civil War
	    }
	    random_events = {
			91 = 0
			3 = unrest.101
			3 = unrest.105
			3 = unrest.110
		}
	}

	monthly_progress = {
		base = 0
		modifier = {
			desc = radicalisation_occurring
			add = 1
			situation_progress < 90
			is_faction_happy_situation = no
			target.leader = { is_heir = no }
		}

		modifier = {
			desc = approach_pr_campaign
			add = -0.25
			current_situation_approach = approach_pr_campaign
			situation_progress < 90
		}

		modifier = {
			desc = approach_faction_repression
			add = -0.5
			current_situation_approach = approach_faction_repression
			situation_progress < 90
		}

		modifier = {
			desc = faction_happy_no_support
			add = -2
			is_faction_happy_situation = yes
		}

		modifier = {
			desc = heir_leads_faction
			add = -5
			target.leader = { is_heir = yes }
		}
	}
}

# Faction Separatism - Socialist
situation_civstrife_faction_soc = {
	picture = GFX_evt_assembly_fight
	category = negative

	complete_icon = GFX_situation_outcome_revolt
	complete_icon_frame = GFX_situation_outcome_frame_red

	on_start = {
		target = {
			set_variable = { which = num_sep_pops value = 0 }
			set_variable = { which = sep_upkeep value = 0 }
			every_owned_pop = {
				limit = { pop_can_be_separatist_gen = yes }
				prev = { change_variable = { which = num_sep_pops value = 1 } }
			}
			multiply_variable = { which = num_sep_pops value = 0.02 }
			ceiling_variable = num_sep_pops
			while = {
				count = num_sep_pops
				random_owned_pop = {
					limit = { pop_can_be_separatist_gen = yes }
					set_pop_flag = sep_pop
					set_pop_flag = sep_pop_ethic
				}
			}
		}
	}

	on_progress_complete = {
		custom_tooltip = situation_civstrife_separatist_end
	}

	on_fail = {
		custom_tooltip = situation_civstrife_separatist_failed
		target = {
			remove_pop_faction_flag = faction_sep_situation
			clear_variable = ethic_sep_chance
			clear_variable = num_sep_pops
			clear_variable = sep_upkeep
			if = {
				limit = { any_owned_pop = { has_pop_flag = sep_pop_ethic } }
				every_owned_pop = {
					limit = { has_pop_flag = sep_pop_ethic }
					remove_pop_faction_flag = sep_pop_ethic
				}
			}
		}
	}

	on_abort = {
		target = {
			remove_pop_faction_flag = faction_sep_situation
			clear_variable = ethic_sep_chance
			clear_variable = num_sep_pops
			clear_variable = sep_upkeep
			if = {
				limit = { any_owned_pop = { has_pop_flag = sep_pop_ethic } }
				every_owned_pop = {
					limit = { has_pop_flag = sep_pop_ethic }
					remove_pop_faction_flag = sep_pop_ethic
				}
			}
		}
	}

	abort_trigger = {
		OR = {
			NOT = { exists = root.target }
			target.leader = { is_same_value = root.owner.ruler }
			owner = { has_country_flag = civ_war_recent_SOC }
		}
	}

	start_value = 0

	stages = {
		reb_situation_1 = {
			icon = GFX_situation_stage_1
			icon_background = GFX_situation_stage_frame_blue
			end = 30
		}
		reb_situation_2 = {
			icon = GFX_situation_stage_2
			icon_background = GFX_situation_stage_frame_red
			end = 90
		}
		reb_situation_3 = {
			icon = GFX_situation_stage_3
			icon_background = GFX_situation_stage_frame_red
			end = 100
		}
	}

	approach = {
		name = approach_do_nothing
		icon = GFX_situation_approach_suspicious
		icon_background = GFX_situation_approach_bg_red
		default = yes
		resources = {
			category = situations
			upkeep = {
				unity = 0.5
				multiplier = target.sep_upkeep
			}
		}
		ai_weight = {
			base = 1
		}
	}

	approach = {
		name = approach_pr_campaign
		icon = GFX_situation_approach_handshake
		icon_background = GFX_situation_approach_bg_yellow
		on_select = { custom_tooltip = slowed_radical_tooltip }
		resources = {
			category = situations
			upkeep = {
				unity = 1
				energy = 0.2
				multiplier = target.sep_upkeep
			}
		}
		target_modifier = { pop_happiness = -0.05 }
		ai_weight = {
			base = 2
		}
		potential = {
			OR = {
				current_stage = reb_situation_2
				situation_progress >= 90
			}
		}
	}
	
	approach = {
		name = approach_faction_repression
		icon = GFX_situation_approach_whip
		icon_background = GFX_situation_approach_bg_yellow
		on_select = { custom_tooltip = slowed_radical_tooltip_2 }
		resources = {
			category = situations
			upkeep = {
				unity = 1.5
				energy = 0.5
				multiplier = target.sep_upkeep
			}
		}
		target_modifier = { pop_happiness = -0.15 }
		ai_weight = {
			base = 1
		}
		potential = {
			owner = { is_egalitarian = no }
			OR = {
				current_stage = reb_situation_2
				situation_progress >= 90
			}
		}
	}

	on_monthly = {
		events = {
			civethic.2000			# Monthly Separatism Spread
			civwar.5000				# Possible Revolt/Civil War
	    }
	    random_events = {
			91 = 0
			3 = unrest.101
			3 = unrest.105
			3 = unrest.110
		}
	}

	monthly_progress = {
		base = 0
		modifier = {
			desc = radicalisation_occurring
			add = 1
			situation_progress < 90
			is_faction_happy_situation = no
			target.leader = { is_heir = no }
		}

		modifier = {
			desc = approach_pr_campaign
			add = -0.25
			current_situation_approach = approach_pr_campaign
			situation_progress < 90
		}

		modifier = {
			desc = approach_faction_repression
			add = -0.5
			current_situation_approach = approach_faction_repression
			situation_progress < 90
		}

		modifier = {
			desc = faction_happy_no_support
			add = -2
			is_faction_happy_situation = yes
		}

		modifier = {
			desc = heir_leads_faction
			add = -5
			target.leader = { is_heir = yes }
		}
	}
}

# Faction Separatism - Capitalist
situation_civstrife_faction_cap = {
	picture = GFX_evt_assembly_fight
	category = negative

	complete_icon = GFX_situation_outcome_revolt
	complete_icon_frame = GFX_situation_outcome_frame_red

	on_start = {
		target = {
			set_variable = { which = num_sep_pops value = 0 }
			set_variable = { which = sep_upkeep value = 0 }
			every_owned_pop = {
				limit = { pop_can_be_separatist_gen = yes }
				prev = { change_variable = { which = num_sep_pops value = 1 } }
			}
			multiply_variable = { which = num_sep_pops value = 0.02 }
			ceiling_variable = num_sep_pops
			while = {
				count = num_sep_pops
				random_owned_pop = {
					limit = { pop_can_be_separatist_gen = yes }
					set_pop_flag = sep_pop
					set_pop_flag = sep_pop_ethic
				}
			}
		}
	}

	on_progress_complete = {
		custom_tooltip = situation_civstrife_separatist_end
	}

	on_fail = {
		custom_tooltip = situation_civstrife_separatist_failed
		target = {
			remove_pop_faction_flag = faction_sep_situation
			clear_variable = ethic_sep_chance
			clear_variable = num_sep_pops
			clear_variable = sep_upkeep
			if = {
				limit = { any_owned_pop = { has_pop_flag = sep_pop_ethic } }
				every_owned_pop = {
					limit = { has_pop_flag = sep_pop_ethic }
					remove_pop_faction_flag = sep_pop_ethic
				}
			}
		}
	}

	on_abort = {
		target = {
			remove_pop_faction_flag = faction_sep_situation
			clear_variable = ethic_sep_chance
			clear_variable = num_sep_pops
			clear_variable = sep_upkeep
			if = {
				limit = { any_owned_pop = { has_pop_flag = sep_pop_ethic } }
				every_owned_pop = {
					limit = { has_pop_flag = sep_pop_ethic }
					remove_pop_faction_flag = sep_pop_ethic
				}
			}
		}
	}

	abort_trigger = {
		OR = {
			NOT = { exists = root.target }
			target.leader = { is_same_value = root.owner.ruler }
			owner = { has_country_flag = civ_war_recent_CAP }
		}
	}

	start_value = 0

	stages = {
		reb_situation_1 = {
			icon = GFX_situation_stage_1
			icon_background = GFX_situation_stage_frame_blue
			end = 30
		}
		reb_situation_2 = {
			icon = GFX_situation_stage_2
			icon_background = GFX_situation_stage_frame_red
			end = 90
		}
		reb_situation_3 = {
			icon = GFX_situation_stage_3
			icon_background = GFX_situation_stage_frame_red
			end = 100
		}
	}

	approach = {
		name = approach_do_nothing
		icon = GFX_situation_approach_suspicious
		icon_background = GFX_situation_approach_bg_red
		default = yes
		resources = {
			category = situations
			upkeep = {
				unity = 0.5
				multiplier = target.sep_upkeep
			}
		}
		ai_weight = {
			base = 1
		}
	}

	approach = {
		name = approach_pr_campaign
		icon = GFX_situation_approach_handshake
		icon_background = GFX_situation_approach_bg_yellow
		on_select = { custom_tooltip = slowed_radical_tooltip }
		resources = {
			category = situations
			upkeep = {
				unity = 1
				energy = 0.2
				multiplier = target.sep_upkeep
			}
		}
		target_modifier = { pop_happiness = -0.05 }
		ai_weight = {
			base = 2
		}
		potential = {
			OR = {
				current_stage = reb_situation_2
				situation_progress >= 90
			}
		}
	}
	
	approach = {
		name = approach_faction_repression
		icon = GFX_situation_approach_whip
		icon_background = GFX_situation_approach_bg_yellow
		on_select = { custom_tooltip = slowed_radical_tooltip_2 }
		resources = {
			category = situations
			upkeep = {
				unity = 1.5
				energy = 0.5
				multiplier = target.sep_upkeep
			}
		}
		target_modifier = { pop_happiness = -0.15 }
		ai_weight = {
			base = 1
		}
		potential = {
			owner = { is_egalitarian = no }
			OR = {
				current_stage = reb_situation_2
				situation_progress >= 90
			}
		}
	}

	on_monthly = {
		events = {
			civethic.2000			# Monthly Separatism Spread
			civwar.5000				# Possible Revolt/Civil War
	    }
	    random_events = {
			91 = 0
			3 = unrest.101
			3 = unrest.105
			3 = unrest.110
		}
	}

	monthly_progress = {
		base = 0
		modifier = {
			desc = radicalisation_occurring
			add = 1
			situation_progress < 90
			is_faction_happy_situation = no
			target.leader = { is_heir = no }
		}

		modifier = {
			desc = approach_pr_campaign
			add = -0.25
			current_situation_approach = approach_pr_campaign
			situation_progress < 90
		}

		modifier = {
			desc = approach_faction_repression
			add = -0.5
			current_situation_approach = approach_faction_repression
			situation_progress < 90
		}

		modifier = {
			desc = faction_happy_no_support
			add = -2
			is_faction_happy_situation = yes
		}

		modifier = {
			desc = heir_leads_faction
			add = -5
			target.leader = { is_heir = yes }
		}
	}
}

# Faction Separatism - Industrialist
situation_civstrife_faction_indus = {
	picture = GFX_evt_assembly_fight
	category = negative

	complete_icon = GFX_situation_outcome_revolt
	complete_icon_frame = GFX_situation_outcome_frame_red

	on_start = {
		target = {
			set_variable = { which = num_sep_pops value = 0 }
			set_variable = { which = sep_upkeep value = 0 }
			every_owned_pop = {
				limit = { pop_can_be_separatist_gen = yes }
				prev = { change_variable = { which = num_sep_pops value = 1 } }
			}
			multiply_variable = { which = num_sep_pops value = 0.02 }
			ceiling_variable = num_sep_pops
			while = {
				count = num_sep_pops
				random_owned_pop = {
					limit = { pop_can_be_separatist_gen = yes }
					set_pop_flag = sep_pop
					set_pop_flag = sep_pop_ethic
				}
			}
		}
	}

	on_progress_complete = {
		custom_tooltip = situation_civstrife_separatist_end
	}

	on_fail = {
		custom_tooltip = situation_civstrife_separatist_failed
		target = {
			remove_pop_faction_flag = faction_sep_situation
			clear_variable = ethic_sep_chance
			clear_variable = num_sep_pops
			clear_variable = sep_upkeep
			if = {
				limit = { any_owned_pop = { has_pop_flag = sep_pop_ethic } }
				every_owned_pop = {
					limit = { has_pop_flag = sep_pop_ethic }
					remove_pop_faction_flag = sep_pop_ethic
				}
			}
		}
	}

	on_abort = {
		target = {
			remove_pop_faction_flag = faction_sep_situation
			clear_variable = ethic_sep_chance
			clear_variable = num_sep_pops
			clear_variable = sep_upkeep
			if = {
				limit = { any_owned_pop = { has_pop_flag = sep_pop_ethic } }
				every_owned_pop = {
					limit = { has_pop_flag = sep_pop_ethic }
					remove_pop_faction_flag = sep_pop_ethic
				}
			}
		}
	}

	abort_trigger = {
		OR = {
			NOT = { exists = root.target }
			target.leader = { is_same_value = root.owner.ruler }
			owner = { has_country_flag = civ_war_recent_INDUS }
		}
	}

	start_value = 0

	stages = {
		reb_situation_1 = {
			icon = GFX_situation_stage_1
			icon_background = GFX_situation_stage_frame_blue
			end = 30
		}
		reb_situation_2 = {
			icon = GFX_situation_stage_2
			icon_background = GFX_situation_stage_frame_red
			end = 90
		}
		reb_situation_3 = {
			icon = GFX_situation_stage_3
			icon_background = GFX_situation_stage_frame_red
			end = 100
		}
	}

	approach = {
		name = approach_do_nothing
		icon = GFX_situation_approach_suspicious
		icon_background = GFX_situation_approach_bg_red
		default = yes
		resources = {
			category = situations
			upkeep = {
				unity = 0.5
				multiplier = target.sep_upkeep
			}
		}
		ai_weight = {
			base = 1
		}
	}

	approach = {
		name = approach_pr_campaign
		icon = GFX_situation_approach_handshake
		icon_background = GFX_situation_approach_bg_yellow
		on_select = { custom_tooltip = slowed_radical_tooltip }
		resources = {
			category = situations
			upkeep = {
				unity = 1
				energy = 0.2
				multiplier = target.sep_upkeep
			}
		}
		target_modifier = { pop_happiness = -0.05 }
		ai_weight = {
			base = 2
		}
		potential = {
			OR = {
				current_stage = reb_situation_2
				situation_progress >= 90
			}
		}
	}
	
	approach = {
		name = approach_faction_repression
		icon = GFX_situation_approach_whip
		icon_background = GFX_situation_approach_bg_yellow
		on_select = { custom_tooltip = slowed_radical_tooltip_2 }
		resources = {
			category = situations
			upkeep = {
				unity = 1.5
				energy = 0.5
				multiplier = target.sep_upkeep
			}
		}
		target_modifier = { pop_happiness = -0.15 }
		ai_weight = {
			base = 1
		}
		potential = {
			owner = { is_egalitarian = no }
			OR = {
				current_stage = reb_situation_2
				situation_progress >= 90
			}
		}
	}

	on_monthly = {
		events = {
			civethic.2000			# Monthly Separatism Spread
			civwar.5000				# Possible Revolt/Civil War
	    }
	    random_events = {
			91 = 0
			3 = unrest.101
			3 = unrest.105
			3 = unrest.110
		}
	}

	monthly_progress = {
		base = 0
		modifier = {
			desc = radicalisation_occurring
			add = 1
			situation_progress < 90
			is_faction_happy_situation = no
			target.leader = { is_heir = no }
		}

		modifier = {
			desc = approach_pr_campaign
			add = -0.25
			current_situation_approach = approach_pr_campaign
			situation_progress < 90
		}

		modifier = {
			desc = approach_faction_repression
			add = -0.5
			current_situation_approach = approach_faction_repression
			situation_progress < 90
		}

		modifier = {
			desc = faction_happy_no_support
			add = -2
			is_faction_happy_situation = yes
		}

		modifier = {
			desc = heir_leads_faction
			add = -5
			target.leader = { is_heir = yes }
		}
	}
}

# Faction Separatism - Environmentalist
situation_civstrife_faction_eco = {
	picture = GFX_evt_assembly_fight
	category = negative

	complete_icon = GFX_situation_outcome_revolt
	complete_icon_frame = GFX_situation_outcome_frame_red

	on_start = {
		target = {
			set_variable = { which = num_sep_pops value = 0 }
			set_variable = { which = sep_upkeep value = 0 }
			every_owned_pop = {
				limit = { pop_can_be_separatist_gen = yes }
				prev = { change_variable = { which = num_sep_pops value = 1 } }
			}
			multiply_variable = { which = num_sep_pops value = 0.02 }
			ceiling_variable = num_sep_pops
			while = {
				count = num_sep_pops
				random_owned_pop = {
					limit = { pop_can_be_separatist_gen = yes }
					set_pop_flag = sep_pop
					set_pop_flag = sep_pop_ethic
				}
			}
		}
	}

	on_progress_complete = {
		custom_tooltip = situation_civstrife_separatist_end
	}

	on_fail = {
		custom_tooltip = situation_civstrife_separatist_failed
		target = {
			remove_pop_faction_flag = faction_sep_situation
			clear_variable = ethic_sep_chance
			clear_variable = num_sep_pops
			clear_variable = sep_upkeep
			if = {
				limit = { any_owned_pop = { has_pop_flag = sep_pop_ethic } }
				every_owned_pop = {
					limit = { has_pop_flag = sep_pop_ethic }
					remove_pop_faction_flag = sep_pop_ethic
				}
			}
		}
	}

	on_abort = {
		target = {
			remove_pop_faction_flag = faction_sep_situation
			clear_variable = ethic_sep_chance
			clear_variable = num_sep_pops
			clear_variable = sep_upkeep
			if = {
				limit = { any_owned_pop = { has_pop_flag = sep_pop_ethic } }
				every_owned_pop = {
					limit = { has_pop_flag = sep_pop_ethic }
					remove_pop_faction_flag = sep_pop_ethic
				}
			}
		}
	}

	abort_trigger = {
		OR = {
			NOT = { exists = root.target }
			target.leader = { is_same_value = root.owner.ruler }
			owner = { has_country_flag = civ_war_recent_ECO }
		}
	}

	start_value = 0

	stages = {
		reb_situation_1 = {
			icon = GFX_situation_stage_1
			icon_background = GFX_situation_stage_frame_blue
			end = 30
		}
		reb_situation_2 = {
			icon = GFX_situation_stage_2
			icon_background = GFX_situation_stage_frame_red
			end = 90
		}
		reb_situation_3 = {
			icon = GFX_situation_stage_3
			icon_background = GFX_situation_stage_frame_red
			end = 100
		}
	}

	approach = {
		name = approach_do_nothing
		icon = GFX_situation_approach_suspicious
		icon_background = GFX_situation_approach_bg_red
		default = yes
		resources = {
			category = situations
			upkeep = {
				unity = 0.5
				multiplier = target.sep_upkeep
			}
		}
		ai_weight = {
			base = 1
		}
	}

	approach = {
		name = approach_pr_campaign
		icon = GFX_situation_approach_handshake
		icon_background = GFX_situation_approach_bg_yellow
		on_select = { custom_tooltip = slowed_radical_tooltip }
		resources = {
			category = situations
			upkeep = {
				unity = 1
				energy = 0.2
				multiplier = target.sep_upkeep
			}
		}
		target_modifier = { pop_happiness = -0.05 }
		ai_weight = {
			base = 2
		}
		potential = {
			OR = {
				current_stage = reb_situation_2
				situation_progress >= 90
			}
		}
	}
	
	approach = {
		name = approach_faction_repression
		icon = GFX_situation_approach_whip
		icon_background = GFX_situation_approach_bg_yellow
		on_select = { custom_tooltip = slowed_radical_tooltip_2 }
		resources = {
			category = situations
			upkeep = {
				unity = 1.5
				energy = 0.5
				multiplier = target.sep_upkeep
			}
		}
		target_modifier = { pop_happiness = -0.15 }
		ai_weight = {
			base = 1
		}
		potential = {
			owner = { is_egalitarian = no }
			OR = {
				current_stage = reb_situation_2
				situation_progress >= 90
			}
		}
	}

	on_monthly = {
		events = {
			civethic.2000			# Monthly Separatism Spread
			civwar.5000				# Possible Revolt/Civil War
	    }
	    random_events = {
			91 = 0
			3 = unrest.101
			3 = unrest.105
			3 = unrest.110
		}
	}

	monthly_progress = {
		base = 0
		modifier = {
			desc = radicalisation_occurring
			add = 1
			situation_progress < 90
			is_faction_happy_situation = no
			target.leader = { is_heir = no }
		}

		modifier = {
			desc = approach_pr_campaign
			add = -0.25
			current_situation_approach = approach_pr_campaign
			situation_progress < 90
		}

		modifier = {
			desc = approach_faction_repression
			add = -0.5
			current_situation_approach = approach_faction_repression
			situation_progress < 90
		}

		modifier = {
			desc = faction_happy_no_support
			add = -2
			is_faction_happy_situation = yes
		}

		modifier = {
			desc = heir_leads_faction
			add = -5
			target.leader = { is_heir = yes }
		}
	}
}

# Faction Separatism - Elitist
situation_civstrife_faction_elite = {
	picture = GFX_evt_assembly_fight
	category = negative

	complete_icon = GFX_situation_outcome_revolt
	complete_icon_frame = GFX_situation_outcome_frame_red

	on_start = {
		target = {
			set_variable = { which = num_sep_pops value = 0 }
			set_variable = { which = sep_upkeep value = 0 }
			every_owned_pop = {
				limit = { pop_can_be_separatist_gen = yes }
				prev = { change_variable = { which = num_sep_pops value = 1 } }
			}
			multiply_variable = { which = num_sep_pops value = 0.02 }
			ceiling_variable = num_sep_pops
			while = {
				count = num_sep_pops
				random_owned_pop = {
					limit = { pop_can_be_separatist_gen = yes }
					set_pop_flag = sep_pop
					set_pop_flag = sep_pop_ethic
				}
			}
		}
	}

	on_progress_complete = {
		custom_tooltip = situation_civstrife_separatist_end
	}

	on_fail = {
		custom_tooltip = situation_civstrife_separatist_failed
		target = {
			remove_pop_faction_flag = faction_sep_situation
			clear_variable = ethic_sep_chance
			clear_variable = num_sep_pops
			clear_variable = sep_upkeep
			if = {
				limit = { any_owned_pop = { has_pop_flag = sep_pop_ethic } }
				every_owned_pop = {
					limit = { has_pop_flag = sep_pop_ethic }
					remove_pop_faction_flag = sep_pop_ethic
				}
			}
		}
	}

	on_abort = {
		target = {
			remove_pop_faction_flag = faction_sep_situation
			clear_variable = ethic_sep_chance
			clear_variable = num_sep_pops
			clear_variable = sep_upkeep
			if = {
				limit = { any_owned_pop = { has_pop_flag = sep_pop_ethic } }
				every_owned_pop = {
					limit = { has_pop_flag = sep_pop_ethic }
					remove_pop_faction_flag = sep_pop_ethic
				}
			}
		}
	}

	abort_trigger = {
		OR = {
			NOT = { exists = root.target }
			target.leader = { is_same_value = root.owner.ruler }
			owner = { has_country_flag = civ_war_recent_ELITE }
		}
	}

	start_value = 0

	stages = {
		reb_situation_1 = {
			icon = GFX_situation_stage_1
			icon_background = GFX_situation_stage_frame_blue
			end = 30
		}
		reb_situation_2 = {
			icon = GFX_situation_stage_2
			icon_background = GFX_situation_stage_frame_red
			end = 90
		}
		reb_situation_3 = {
			icon = GFX_situation_stage_3
			icon_background = GFX_situation_stage_frame_red
			end = 100
		}
	}

	approach = {
		name = approach_do_nothing
		icon = GFX_situation_approach_suspicious
		icon_background = GFX_situation_approach_bg_red
		default = yes
		resources = {
			category = situations
			upkeep = {
				unity = 0.5
				multiplier = target.sep_upkeep
			}
		}
		ai_weight = {
			base = 1
		}
	}

	approach = {
		name = approach_pr_campaign
		icon = GFX_situation_approach_handshake
		icon_background = GFX_situation_approach_bg_yellow
		on_select = { custom_tooltip = slowed_radical_tooltip }
		resources = {
			category = situations
			upkeep = {
				unity = 1
				energy = 0.2
				multiplier = target.sep_upkeep
			}
		}
		target_modifier = { pop_happiness = -0.05 }
		ai_weight = {
			base = 2
		}
		potential = {
			OR = {
				current_stage = reb_situation_2
				situation_progress >= 90
			}
		}
	}

	approach = {
		name = approach_faction_repression
		icon = GFX_situation_approach_whip
		icon_background = GFX_situation_approach_bg_yellow
		on_select = { custom_tooltip = slowed_radical_tooltip_2 }
		resources = {
			category = situations
			upkeep = {
				unity = 1.5
				energy = 0.5
				multiplier = target.sep_upkeep
			}
		}
		target_modifier = { pop_happiness = -0.15 }
		ai_weight = {
			base = 1
		}
		potential = {
			owner = { is_egalitarian = no }
			OR = {
				current_stage = reb_situation_2
				situation_progress >= 90
			}
		}
	}

	on_monthly = {
		events = {
			civethic.2000			# Monthly Separatism Spread
			civwar.5000				# Possible Revolt/Civil War
	    }
	    random_events = {
			91 = 0
			3 = unrest.101
			3 = unrest.105
			3 = unrest.110
		}
	}

	monthly_progress = {
		base = 0
		modifier = {
			desc = radicalisation_occurring
			add = 1
			situation_progress < 90
			is_faction_happy_situation = no
			target.leader = { is_heir = no }
		}

		modifier = {
			desc = approach_pr_campaign
			add = -0.25
			current_situation_approach = approach_pr_campaign
			situation_progress < 90
		}

		modifier = {
			desc = approach_faction_repression
			add = -0.5
			current_situation_approach = approach_faction_repression
			situation_progress < 90
		}

		modifier = {
			desc = faction_happy_no_support
			add = -2
			is_faction_happy_situation = yes
		}

		modifier = {
			desc = heir_leads_faction
			add = -5
			target.leader = { is_heir = yes }
		}
	}
}

# Faction Separatism - Pluralist
situation_civstrife_faction_plur = {
	picture = GFX_evt_assembly_fight
	category = negative

	complete_icon = GFX_situation_outcome_revolt
	complete_icon_frame = GFX_situation_outcome_frame_red

	on_start = {
		target = {
			set_variable = { which = num_sep_pops value = 0 }
			set_variable = { which = sep_upkeep value = 0 }
			every_owned_pop = {
				limit = { pop_can_be_separatist_gen = yes }
				prev = { change_variable = { which = num_sep_pops value = 1 } }
			}
			multiply_variable = { which = num_sep_pops value = 0.02 }
			ceiling_variable = num_sep_pops
			while = {
				count = num_sep_pops
				random_owned_pop = {
					limit = { pop_can_be_separatist_gen = yes }
					set_pop_flag = sep_pop
					set_pop_flag = sep_pop_ethic
				}
			}
		}
	}

	on_progress_complete = {
		custom_tooltip = situation_civstrife_separatist_end
	}

	on_fail = {
		custom_tooltip = situation_civstrife_separatist_failed
		target = {
			remove_pop_faction_flag = faction_sep_situation
			clear_variable = ethic_sep_chance
			clear_variable = num_sep_pops
			clear_variable = sep_upkeep
			if = {
				limit = { any_owned_pop = { has_pop_flag = sep_pop_ethic } }
				every_owned_pop = {
					limit = { has_pop_flag = sep_pop_ethic }
					remove_pop_faction_flag = sep_pop_ethic
				}
			}
		}
	}

	on_abort = {
		target = {
			remove_pop_faction_flag = faction_sep_situation
			clear_variable = ethic_sep_chance
			clear_variable = num_sep_pops
			clear_variable = sep_upkeep
			if = {
				limit = { any_owned_pop = { has_pop_flag = sep_pop_ethic } }
				every_owned_pop = {
					limit = { has_pop_flag = sep_pop_ethic }
					remove_pop_faction_flag = sep_pop_ethic
				}
			}
		}
	}

	abort_trigger = {
		OR = {
			NOT = { exists = root.target }
			target.leader = { is_same_value = root.owner.ruler }
			owner = { has_country_flag = civ_war_recent_PLUR }
		}
	}

	start_value = 0

	stages = {
		reb_situation_1 = {
			icon = GFX_situation_stage_1
			icon_background = GFX_situation_stage_frame_blue
			end = 30
		}
		reb_situation_2 = {
			icon = GFX_situation_stage_2
			icon_background = GFX_situation_stage_frame_red
			end = 90
		}
		reb_situation_3 = {
			icon = GFX_situation_stage_3
			icon_background = GFX_situation_stage_frame_red
			end = 100
		}
	}

	approach = {
		name = approach_do_nothing
		icon = GFX_situation_approach_suspicious
		icon_background = GFX_situation_approach_bg_red
		default = yes
		resources = {
			category = situations
			upkeep = {
				unity = 0.5
				multiplier = target.sep_upkeep
			}
		}
		ai_weight = {
			base = 1
		}
	}

	approach = {
		name = approach_pr_campaign
		icon = GFX_situation_approach_handshake
		icon_background = GFX_situation_approach_bg_yellow
		on_select = { custom_tooltip = slowed_radical_tooltip }
		resources = {
			category = situations
			upkeep = {
				unity = 1
				energy = 0.2
				multiplier = target.sep_upkeep
			}
		}
		target_modifier = { pop_happiness = -0.05 }
		ai_weight = {
			base = 2
		}
		potential = {
			OR = {
				current_stage = reb_situation_2
				situation_progress >= 90
			}
		}
	}
	
	approach = {
		name = approach_faction_repression
		icon = GFX_situation_approach_whip
		icon_background = GFX_situation_approach_bg_yellow
		on_select = { custom_tooltip = slowed_radical_tooltip_2 }
		resources = {
			category = situations
			upkeep = {
				unity = 1.5
				energy = 0.5
				multiplier = target.sep_upkeep
			}
		}
		target_modifier = { pop_happiness = -0.15 }
		ai_weight = {
			base = 1
		}
		potential = {
			owner = { is_egalitarian = no }
			OR = {
				current_stage = reb_situation_2
				situation_progress >= 90
			}
		}
	}

	on_monthly = {
		events = {
			civethic.2000			# Monthly Separatism Spread
			civwar.5000				# Possible Revolt/Civil War
	    }
	    random_events = {
			91 = 0
			3 = unrest.101
			3 = unrest.105
			3 = unrest.110
		}
	}

	monthly_progress = {
		base = 0
		modifier = {
			desc = radicalisation_occurring
			add = 1
			situation_progress < 90
			is_faction_happy_situation = no
			target.leader = { is_heir = no }
		}

		modifier = {
			desc = approach_pr_campaign
			add = -0.25
			current_situation_approach = approach_pr_campaign
			situation_progress < 90
		}

		modifier = {
			desc = approach_faction_repression
			add = -0.5
			current_situation_approach = approach_faction_repression
			situation_progress < 90
		}

		modifier = {
			desc = faction_happy_no_support
			add = -2
			is_faction_happy_situation = yes
		}

		modifier = {
			desc = heir_leads_faction
			add = -5
			target.leader = { is_heir = yes }
		}
	}
}
