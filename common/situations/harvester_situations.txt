situation_harvester_analysis = {
	picture = GFX_evt_unidentified_monster
	category = positive
	complete_icon_frame = GFX_situation_outcome_frame_blue
	complete_icon = GFX_situation_outcome_unknown	
	
	abort_trigger = {
		NOT = { has_global_flag = harvester_in_progress }
	}
	on_start = { 
		set_situation_flag = harvester_analysis
		owner = { set_harvester_analysis_upkeep = yes }
	} # To find it again	
	on_abort = { destroy_situation = this }
	on_progress_complete = {
		owner = { add_modifier = { modifier = "harvester_nemesis" days = -1 } }
		destroy_situation = this 
	}
	on_fail = { 
		destroy_situation = this 
	}

	stages = {
		harvester_stage_1 = {
			icon = GFX_situation_stage_1
			icon_background = GFX_situation_stage_frame_blue
			end = 20
		}
		harvester_stage_2 = {
			icon = GFX_situation_stage_2
			icon_background = GFX_situation_stage_frame_blue
			end = 40
			modifier = {
				damage_vs_country_type_harvester_country_type_mult = 0.125
			}
		}
		harvester_stage_3 = {
			icon = GFX_situation_stage_3
			icon_background = GFX_situation_stage_frame_blue
			end = 60
			modifier = {
				damage_vs_country_type_harvester_country_type_mult = 0.25
			}
			on_first_enter = { owner = { country_event = { id = harvester_diplo.9 } } }
		}
		harvester_stage_4 = {
			icon = GFX_situation_stage_4
			icon_background = GFX_situation_stage_frame_blue
			end = 80
			on_first_enter = { owner = { give_technology = { tech = tech_harvester_weapons message = yes } } }
			modifier = {
				damage_vs_country_type_harvester_country_type_mult = 0.375
			}
		}
		harvester_stage_5 = {
			icon = GFX_situation_stage_5
			icon_background = GFX_situation_stage_frame_blue
			end = 100
			on_first_enter = { owner = { give_technology = { tech = tech_harvester_weapons_2 message = yes } } }
			modifier = {
				damage_vs_country_type_harvester_country_type_mult = 0.5
			}
		}		
	}	
	
	monthly_progress = {
		base = 0
		modifier = {
			add = owner.harvester_situation_progress
			desc = string_harvester_situation_progress_desc
			OR = {
				has_situation_flag = fast_harvester
				has_situation_flag = normal_harvester
				has_situation_flag = slow_harvester
			}
		}
	}
	
	approach = {
		name = approach_intense_harvester
		icon = GFX_situation_approach_research
		icon_background = GFX_situation_approach_bg_green
		allow = { 
			always = yes
		} 
		on_select = {
			custom_tooltip = string_harvester_fast_approach
			hidden_effect = {		
				set_situation_flag = fast_harvester
				remove_situation_flag = normal_harvester
				remove_situation_flag  = slow_harvester
				harvester_situation_get_tech_output = yes
			}
		}
		resources = {
			category = situations
			upkeep = {
				physics_research = 1
				multiplier = owner.harvester_situation_phy_upkeep
			}
			upkeep = {
				society_research = 1
				multiplier = owner.harvester_situation_soc_upkeep
			}
			upkeep = {
				engineering_research = 1
				multiplier = owner.harvester_situation_eng_upkeep
			}			
		}
		ai_weight = {
			base = 0
		}
	}
	approach = {
		name = approach_normal_harvester
		icon = GFX_situation_approach_research
		icon_background = GFX_situation_approach_bg_green
		allow = { 
			always = yes
		} 
		on_select = {
			custom_tooltip = string_harvester_normal_approach
			hidden_effect = {
				set_situation_flag = normal_harvester
				remove_situation_flag = fast_harvester
				remove_situation_flag  = slow_harvester
				harvester_situation_get_tech_output = yes
			}
		}
		resources = {
			category = situations
			upkeep = {
				physics_research = 1
				multiplier = owner.harvester_situation_phy_upkeep
			}
			upkeep = {
				society_research = 1
				multiplier = owner.harvester_situation_soc_upkeep
			}
			upkeep = {
				engineering_research = 1
				multiplier = owner.harvester_situation_eng_upkeep
			}			
		}
		ai_weight = {
			base = 1
		}
	}
	approach = {
		name = approach_slow_harvester
		icon = GFX_situation_approach_shrug
		icon_background = GFX_situation_approach_bg_green
		default = yes 
		
		allow = { 
			always = yes
		} 
		on_select = {
			custom_tooltip = string_harvester_slow_approach
			hidden_effect = {
				set_situation_flag = slow_harvester
				remove_situation_flag = fast_harvester
				remove_situation_flag  = normal_harvester
				harvester_situation_get_tech_output = yes
			}
		}
		resources = {
			category = situations
			upkeep = {
				physics_research = 1
				multiplier = owner.harvester_situation_phy_upkeep
			}
			upkeep = {
				society_research = 1
				multiplier = owner.harvester_situation_soc_upkeep
			}
			upkeep = {
				engineering_research = 1
				multiplier = owner.harvester_situation_eng_upkeep
			}			
		}	
		ai_weight = {
			base = 0
		}
	}	
}