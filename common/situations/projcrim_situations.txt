
projcrim_initial_research = {
	picture = GFX_evt_disease_outbreak
	complete_icon_frame = GFX_situation_outcome_frame_green
	complete_icon = GFX_situation_outcome_meh
	category = positive

	on_progress_complete = {
		custom_tooltip = situation_projcrim_sit1_outcome
		hidden_effect = {
			owner = { country_event = { id = projcrim_situation.1 }}
			destroy_situation = root
		}
	}

	stages = {
		stage_1 = {
			icon = GFX_situation_stage_1
			icon_background = GFX_situation_stage_frame_blue
			end = 15
			custom_tooltip = stage_projcrim_sit1
		}
		stage_2 = {
			icon = GFX_situation_stage_2
			icon_background = GFX_situation_stage_frame_blue
			end = 75
			on_first_enter = {
				situation_event = { id = projcrim_situation.2 }
			}
			custom_tooltip = stage_projcrim_sit1
		}
		stage_3 = {
			icon = GFX_situation_stage_3
			icon_background = GFX_situation_stage_frame_blue
			end = 100
			on_first_enter = {
				situation_event = { id = projcrim_situation.3 }
			}
			custom_tooltip = stage_projcrim_sit1
		}
	}

	approach = { # Research
		name = approach_projcrim_research
		icon = GFX_situation_approach_research
		icon_background = GFX_situation_approach_bg_green

		potential = {
		}
		allow = {
			custom_tooltip = {
				fail_text = too_late_to_change_approach
				OR = {
					NOT = { has_situation_flag = path_locked }
					current_situation_approach = approach_projcrim_research
				}
			}
		}
		on_select = {
			custom_tooltip = approach_outcome_tooltip_research
		}

		resources = {
			category = situations
			upkeep = {
				trigger = {
					owner = { is_gestalt = no }
				}
				consumer_goods = 20
			}
			upkeep = {
				trigger = {
					owner = { is_gestalt = yes }
				}
				minerals = 35
			}
		}

		modifier = {
			pop_happiness = 0.10
			planet_projcrim_conformity_mult = -0.05
		}
	}
	approach = { # Restrictions
		name = approach_projcrim_restrictions
		icon = GFX_situation_approach_scales
		icon_background = GFX_situation_approach_bg_yellow
		default = yes

		potential = {
		}
		allow = {
			custom_tooltip = {
				fail_text = too_late_to_change_approach
				OR = {
					NOT = { has_situation_flag = path_locked }
					current_situation_approach = approach_projcrim_restrictions
				}
			}
		}
		on_select = {
			custom_tooltip = approach_outcome_tooltip_restrictions
		}

		resources = {
			category = situations
			upkeep = {
				trigger = {
					owner = { is_gestalt = no }
				}
				energy = 5
				consumer_goods = 5
			}
			upkeep = {
				trigger = {
					owner = { is_gestalt = yes }
				}
				energy = 7
				minerals = 5
			}
		}

		modifier = {
			planet_stability_add = 5
			planet_amenities_mult = -0.50
		}
	}
	approach = { # Containment
		name = approach_projcrim_containment
		icon = GFX_situation_approach_fist
		icon_background = GFX_situation_approach_bg_red

		potential = {
		}
		allow = {
			custom_tooltip = {
				fail_text = too_late_to_change_approach
				OR = {
					NOT = { has_situation_flag = path_locked }
					current_situation_approach = approach_projcrim_containment
				}
			}
		}
		on_select = {
			custom_tooltip = approach_outcome_tooltip_containment
		}

		resources = {
			category = situations
			upkeep = {
				energy = 5
			}
		}

		modifier = {
			planet_stability_add = 5
			planet_projcrim_conformity_mult = 0.10
			pop_happiness = -0.25
			planet_jobs_produces_mult = -0.25
		}
	}

	on_monthly = {
	}

	monthly_progress = {
		base = 2
		modifier = {
			add = 1
			desc = situation_projcrim_current_approach
			current_situation_approach = approach_projcrim_research
		}
		modifier = {
			add = -1
			desc = situation_projcrim_current_approach
			current_situation_approach = approach_projcrim_containment
		}
		modifier = {
			add = 3
			desc = situation_projcrim_cure_shared
			owner = { has_country_flag = cure_shared }
		}
	}

	abort_trigger = {
		NOR = {
			has_global_flag = projcrim_in_progress
			has_global_flag = project_crimson_debug
		}
		has_global_flag = throng_parasite_boon
	}
}

projcrim_cure_research = {
	picture = GFX_evt_society_research
	complete_icon_frame = GFX_situation_outcome_frame_green
	complete_icon = GFX_situation_outcome_positive
	category = positive

	on_progress_complete = {
		custom_tooltip = situation_projcrim_sit2_outcome
		hidden_effect = {
			owner = { country_event = { id = projcrim_situation.4 } } 
			destroy_situation = root
		}
	}

	stages = {
		stage_1 = {
			icon = GFX_situation_stage_1
			icon_background = GFX_situation_stage_frame_blue
			end = 30
			custom_tooltip = stage_projcrim_sit1
		}
		stage_2 = {
			icon = GFX_situation_stage_2
			icon_background = GFX_situation_stage_frame_blue
			end = 60
			on_first_enter = {
				situation_event = { id = projcrim_situation.5 }
			}
			custom_tooltip = stage_projcrim_sit1
		}
		stage_3 = {
			icon = GFX_situation_stage_3
			icon_background = GFX_situation_stage_frame_blue
			end = 100
			on_first_enter = {
				situation_event = { id = projcrim_situation.6 }
			}
			custom_tooltip = stage_projcrim_sit1
		}
	}

	approach = { # Research
		name = approach_projcrim_research
		icon = GFX_situation_approach_research
		icon_background = GFX_situation_approach_bg_green
		default = yes

		potential = {
		}
		allow = {
			custom_tooltip = {
				fail_text = too_late_to_change_approach
				OR = {
					NOT = { has_situation_flag = path_locked }
					current_situation_approach = approach_projcrim_research
				}
			}
		}
		on_select = {
			custom_tooltip = approach_outcome_tooltip_research
		}

		resources = {
			category = situations
			upkeep = {
				physics_research = 15
				society_research = 15
				engineering_research = 15
			}
		}

		modifier = {
			pop_happiness = 0.10
			all_technology_research_speed = -0.05
		}
	}
	approach = { # Balanced Approach
		name = approach_projcrim_balanced
		icon = GFX_situation_approach_handshake
		icon_background = GFX_situation_approach_bg_yellow

		potential = {
		}
		allow = {
			custom_tooltip = {
				fail_text = too_late_to_change_approach
				OR = {
					NOT = { has_situation_flag = path_locked }
					current_situation_approach = approach_projcrim_balanced
				}
			}
		}
		on_select = {
			custom_tooltip = approach_outcome_tooltip_balanced
		}

		resources = {
			category = situations
			upkeep = {
				trigger = {
					owner = { is_gestalt = no }
				}
				physics_research = 5
				society_research = 5
				consumer_goods = 10
			}
			upkeep = {
				trigger = {
					owner = { is_gestalt = yes }
				}
				physics_research = 5
				society_research = 5
				minerals = 10
			}
		}

		modifier = {
			planet_stability_add = 5
		}
	}
	approach = { # Cessation
		name = approach_projcrim_cessation
		icon = GFX_situation_approach_suspicious
		icon_background = GFX_situation_approach_bg_red

		potential = {
		}
		allow = {
			custom_tooltip = {
				fail_text = too_late_to_change_approach
				OR = {
					NOT = { has_situation_flag = path_locked }
					current_situation_approach = approach_projcrim_cessation
				}
			}
		}
		on_select = {
			custom_tooltip = approach_outcome_tooltip_cessation
		}

		resources = {
			category = situations
			upkeep = {
				unity = 10
			}
		}

		modifier = {
			planet_stability_add = 5
			planet_projcrim_conformity_mult = 0.10
			pop_happiness = -0.50
		}
	}

	on_monthly = {
	}

	monthly_progress = {
		base = 0.75
		modifier = {
			add = 1.25
			desc = situation_projcrim_current_approach
			current_situation_approach = approach_projcrim_research
		}
		modifier = {
			add = -0.5
			desc = situation_projcrim_current_approach
			current_situation_approach = approach_projcrim_cessation
		}
		modifier = {
			add = 3
			desc = situation_projcrim_cure_shared
			owner = { has_country_flag = cure_shared }
		}
	}

	abort_trigger = {
		NOR = {
			has_global_flag = projcrim_in_progress
			has_global_flag = project_crimson_debug
		}
		has_global_flag = throng_parasite_boon
	}
}

projcrim_cure_distribution = {
	picture = GFX_evt_scholarium_anomaly
	complete_icon_frame = GFX_situation_outcome_frame_green
	complete_icon = GFX_situation_outcome_positive
	category = positive

	on_progress_complete = {
		custom_tooltip = situation_projcrim_sit3_outcome
		hidden_effect = {
			owner = { country_event = { id = projcrim_situation.10 } }
			destroy_situation = root
		}
	}

	stages = {
		stage_1 = {
			icon = GFX_situation_stage_1
			icon_background = GFX_situation_stage_frame_green
			end = 100
			custom_tooltip = stage_projcrim_final
		}
	}

	approach = { # Distribution
		name = approach_projcrim_distribution
		icon = GFX_situation_approach_unity
		icon_background = GFX_situation_approach_bg_green
		default = yes

		potential = {
		}
		allow = {
			always = yes
		}
		on_select = {
			custom_tooltip = approach_outcome_tooltip_distribution
		}

		resources = {
			category = situations
			upkeep = {
				energy = 10
			}
		}

		modifier = {
			pop_happiness = 0.05
			planet_projcrim_conformity_mult = 0.10
		}
	}

	on_monthly = {
	}

	monthly_progress = {
		base = 5
	}

	abort_trigger = {
		NOR = {
			has_global_flag = projcrim_in_progress
			has_global_flag = project_crimson_debug
			has_global_flag = projcrim_plague_eradicated
			owner = { has_country_flag = projcrim_plague_cured }
		}
		has_global_flag = throng_parasite_boon
	}
}