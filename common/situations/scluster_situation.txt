# Filename:		scluster_situation.txt
# Contributors:	SirBlackAxe

@scluster_base_rate = 0.834 # (100/12)/(years to complete)
@situation_monthly_rate_10_years = 6

scluster_situation = {
	picture = GFX_evt_wormhole # federation_fleet, ship_travel, vortex, wormhole, physics_research
	complete_icon_frame = GFX_situation_outcome_frame_blue
	complete_icon = GFX_situation_outcome_meh

	on_start = {
		log = "Created the Storm Cluster situation."
		# set_situation_locked = yes
		save_global_event_target_as = scluster_situation
		# if = {
		# 	limit = { NOT = { exists = event_target:scluster_situation } }
		# 	log_error = "Failed to save scluster_situation situation as a global event target."
		# }
		# set_variable = { value = 1 which = scluster_system_counter } # scluster_0 has already spawned
		# set_variable = { value = 0 which = scluster_ruined_megastructure_counter }
		# set_variable = { value = 0 which = scluster_guardian_counter }
		# event_target:scluster_0 = { scluster_analyze_galaxy = yes }
	}

	on_progress_complete = {
		#Figure out Patron and give resources
		custom_tooltip = situation_unknown_outcome_approach #not really necessary except to silence the error log
		# Could loop this, and move some space storms around each time it completes
		end_crisis_scluster = yes
		hidden_effect = { destroy_situation = this }
	}
	on_fail = {
		log_error = "scluster_situation situation failed, this is not meant to happen"
		destroy_situation = this
	}
	on_monthly = {
		random_events = {
			5 = 0
			# spread/shift storm systems
			# move wormholes? not sure if possible
			# spawn space critters
		}
	}
	stages = {
		stage_1 = {
			icon = GFX_situation_stage_1
			icon_background = GFX_situation_stage_frame_blue
			end = 50
		}
		stage_2 = {
			icon = GFX_situation_approach_this_is_fine
			icon_background = GFX_situation_stage_frame_red
			end = 100
			# on_first_enter = {
			# 	situation_event = { id = situation.155 }
			# }
		}
	}
	monthly_progress = {
		#total: 100 Can use decimals to fine tune progress
		base = @scluster_base_rate
	}
	approach = { #Actually, the player will never see this Situations. Just adding one in in case one is required
		name = approach_revolt_do_nothing
		icon = GFX_situation_approach_this_is_fine
		icon_background = GFX_situation_approach_bg_yellow
		default = yes
		on_select = {
			custom_tooltip = deficit_approach_do_nothing_tooltip
		}
	}
}
