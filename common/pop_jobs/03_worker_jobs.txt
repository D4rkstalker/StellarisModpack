#PATCHED: Job priority
clerk = {
	category = worker
	condition_string = WORKER_JOB_TRIGGER
	building_icon = building_residence
	clothes_texture_index = 2

	possible_pre_triggers = {
		has_owner = yes
		is_being_purged = no
		is_being_assimilated = no
	}

	possible = {
		worker_job_check_trigger = yes
		exists = owner
		owner = { is_fallen_empire = no }
	}

	planet_modifier = {
		planet_amenities_add = 2
		trade_value_add = 2
	}

	triggered_planet_modifier = {
		potential = {
			exists = owner
			owner = { has_tradition = tr_determinism_1 }
		}
		modifier = {
			planet_amenities_add = 1
		}
	}
	triggered_planet_modifier = {
		potential = {
			exists = pop
			OR = {
				has_trait = trait_robot_domestic_protocols
				has_trait = trait_charismatic
			}
		}
		modifier = {
			planet_amenities_add = 0.4
		}
	}
	triggered_planet_modifier = {
		potential = {
			exists = pop
			has_trait = trait_repugnant
		}
		modifier = {
			planet_amenities_add = -0.4
		}
	}
	triggered_planet_modifier = {
		potential = {
			exists = pop
			OR = {
				has_trait = trait_thrifty
				has_trait = trait_nuumismatic_administration
			}
		}
		modifier = {
			trade_value_add = 0.5
		}
	}

	weight = {
		modifier = { 
			factor = 50 
			has_trait = trait_priority_amenities
			}
		modifier = { 
			factor = 0.1 
			has_trait = trait_negative_priority_amenities
			}
		modifier = { 
			factor = 50 
			has_trait = trait_priority_trade_value
			}
		modifier = { 
			factor = 0.1 
			has_trait = trait_negative_priority_trade_value
			}

		weight = @clerk_job_weight
		modifier = { factor = 1.1 is_a_slave_droid = yes }
		modifier = { factor = 0.5 is_a_slave_robot = yes }
		modifier = { factor = 1.2 good_trader = yes }
		modifier = { factor = 1.2 good_servicer = yes }
		modifier = { factor = 0.8 poor_servicer = yes }
		modifier = { factor = 1.5 has_job = clerk }
	}
}

technician = {
	category = worker
	condition_string = WORKER_JOB_TRIGGER
	building_icon = building_power_plant
	clothes_texture_index = 2

	possible_pre_triggers = {
		has_owner = yes
		is_being_purged = no
		is_being_assimilated = no
	}

	possible = {
		complex_worker_job_check_trigger = yes
		exists = owner
		owner = {
			is_gestalt = no
			is_fallen_empire_spiritualist = no
		}
	}

	resources = {
		category = planet_technician
		produces = {
			energy = 5
		}
		produces = {
			trigger = {
				owner = {
					is_robot_empire = yes
				}
			}
			energy = 2
		}
		produces = {
			trigger = {
				exists = owner
				owner = { not = { has_valid_civic = civic_traditional_economy }}
			}
			energy = 1
		}
		upkeep = {
			trigger = {
				exists = owner
				owner = {
					has_edict = capacity_subsidies
				}
			}
			energy = 0.5
		}
	}

	weight = {
		modifier = { 
			factor = 50 
			has_trait = trait_priority_energy
			}
		modifier = { 
			factor = 0.1 
			has_trait = trait_negative_priority_energy
			}

		weight = @worker_job_weight
		modifier = { factor = 0.5 is_a_slave_droid = yes }
		modifier = { factor = 0.1 is_a_slave_robot = yes }
		modifier = { factor = 2.0 good_technician = yes }
		modifier = { factor = 1.1 good_producer = yes }
		modifier = { factor = 2.0 has_job = technician }
		modifier = { factor = 1.2 technician_work_needed = yes }
		modifier = { factor = 0.9 technician_work_needed = no }
		modifier = {
			factor = 0.9
			exists = owner
			owner = { has_valid_civic = civic_traditional_economy }
		}
	}
}

miner = {
	category = worker
	condition_string = WORKER_JOB_TRIGGER
	building_icon = building_crystal_mines
	clothes_texture_index = 2

	possible_pre_triggers = {
		has_owner = yes
		is_being_purged = no
		is_being_assimilated = no
	}

	possible = {
		worker_job_check_trigger = yes
		owner = {
			is_gestalt = no
			is_fallen_empire_spiritualist = no
		}
	}

	resources = {
		category = planet_miners
		produces = {
			minerals = 4
		}
		upkeep = {
			trigger = {
				exists = owner
				owner = {
					has_edict = mining_subsidies
				}
			}
			energy = 0.5
		}
	}

	weight = {
		modifier = { 
			factor = 50 
			has_trait = trait_priority_minerals
			}
		modifier = { 
			factor = 0.1 
			has_trait = trait_negative_priority_minerals
			}

		weight = @worker_job_weight
		modifier = { factor = 1.3 is_a_slave_droid = yes }
		modifier = { factor = 2.0 is_a_slave_robot = yes }
		modifier = { factor = 2.0 good_miner = yes }
		modifier = { factor = 1.1 good_worker = yes }
		modifier = { factor = 1.1 good_producer = yes }
		modifier = { factor = 2.0 has_job = miner }
		modifier = { factor = 1.2 miner_work_needed = yes }
		modifier = { factor = 0.9 miner_work_needed = no }
	}
}

crystal_miner = {
	category = worker
	condition_string = WORKER_JOB_TRIGGER
	building_icon = building_crystal_mines
	clothes_texture_index = 2

	possible_pre_triggers = {
		has_owner = yes
		is_being_purged = no
		is_being_assimilated = no
	}

	possible = {
		worker_job_check_trigger = yes
		exists = owner
		owner = { is_gestalt = no }
	}

	resources = {
		category = planet_miners
		produces = {
			rare_crystals = 2
		}
		upkeep = {
			trigger = {
				exists = owner
				owner = {
					has_edict = mining_subsidies
				}
			}
			energy = 0.5
		}
	}

	weight = {
		modifier = { 
			factor = 50 
			has_trait = trait_priority_rare_crystals
			}
		modifier = { 
			factor = 0.1 
			has_trait = trait_negative_priority_rare_crystals
			}

		weight = @specialist_job_weight
		modifier = { factor = 2 is_a_slave_droid = yes }
		modifier = { factor = 5 is_a_slave_robot = yes }
		modifier = { factor = 1.9 good_miner = yes }
		modifier = { factor = 1.1 good_worker = yes }
		modifier = { factor = 1.1 good_producer = yes }
		modifier = { factor = 2.0 has_job = crystal_miner }
	}
}

gas_extractor = {
	category = worker
	condition_string = WORKER_JOB_TRIGGER
	building_icon = building_gas_mine
	clothes_texture_index = 2

	possible_pre_triggers = {
		has_owner = yes
		is_being_purged = no
		is_being_assimilated = no

	}

	possible = {
		worker_job_check_trigger = yes
	}

	resources = {
		category = planet_miners
		produces = {
			exotic_gases = 2
		}
		upkeep = {
			trigger = {
				exists = owner
				owner = {
					has_edict = mining_subsidies
				}
			}
			energy = 0.5
		}
	}

	weight = {
		modifier = { 
			factor = 50 
			has_trait = trait_priority_exotic_gases
			}
		modifier = { 
			factor = 0.1 
			has_trait = trait_negative_priority_exotic_gases
			}

		weight = @specialist_job_weight
		modifier = { factor = 2 is_a_slave_droid = yes }
		modifier = { factor = 5 is_a_slave_robot = yes }
		modifier = { factor = 1.9 good_miner = yes }
		modifier = { factor = 1.1 good_worker = yes }
		modifier = { factor = 1.1 good_producer = yes }
		modifier = { factor = 2.0 has_job = gas_extractor }
	}
}

mote_harvester = {
	category = worker
	condition_string = WORKER_JOB_TRIGGER
	building_icon = building_gas_mine
	clothes_texture_index = 2

	possible_pre_triggers = {
		has_owner = yes
		is_being_purged = no
		is_being_assimilated = no
	}

	possible = {
		worker_job_check_trigger = yes
	}

	resources = {
		category = planet_miners
		produces = {
			volatile_motes = 2
		}
		upkeep = {
			trigger = {
				exists = owner
				owner = {
					has_edict = mining_subsidies
				}
			}
			energy = 0.5
		}
	}

	weight = {
		modifier = { 
			factor = 50 
			has_trait = trait_priority_volatile_motes
			}
		modifier = { 
			factor = 0.1 
			has_trait = trait_negative_priority_volatile_motes
			}

		weight = @specialist_job_weight
		modifier = { factor = 2 is_a_slave_droid = yes }
		modifier = { factor = 5 is_a_slave_robot = yes }
		modifier = { factor = 1.9 good_miner = yes }
		modifier = { factor = 1.1 good_worker = yes }
		modifier = { factor = 1.1 good_producer = yes }
		modifier = { factor = 2.0 has_job = mote_harvester }
	}
}

farmer = {
	category = worker
	condition_string = WORKER_JOB_TRIGGER
	building_icon = building_food_processing_facility
	clothes_texture_index = 2

	possible_pre_triggers = {
		has_owner = yes
		is_being_purged = no
		is_being_assimilated = no
	}

	possible = {
		hidden_trigger = { exists = owner }
		worker_job_check_trigger = yes
		exists = owner
		owner = {
			is_gestalt = no
			is_fallen_empire_spiritualist = no
		}
	}

	resources = {
		category = planet_farmers
		produces = {
			food = 6
		}
		produces = {
			trigger = {
				owner = {
					is_robot_empire = yes
				}
			}
			food = -1
		}
		upkeep = {
			trigger = {
				exists = owner
				owner = {
					has_edict = farming_subsidies
				}
			}
			energy = 0.5
		}
	}

	triggered_country_modifier = {
		potential = {
			planet = {
				exists = owner
				owner = { has_valid_civic = civic_stellartisan }
			}
		}
		modifier = {
			country_naval_cap_add = 1
		}
	}

	triggered_planet_modifier = {
		potential = {
			exists = owner
			owner = { has_valid_civic = civic_stellartisan }
		}
		modifier = {
			planet_crime_add = 1
		}
	}

	triggered_planet_modifier = {
		potential = {
			owner = { has_valid_civic = civic_agrarian_idyll }
		}
		modifier = {
			planet_amenities_add = 2
		}
	}
	triggered_planet_modifier = {
		potential = {
			owner = { has_valid_civic = civic_agrarian_idyll }
			OR = {
				has_trait = trait_robot_domestic_protocols
				has_trait = trait_charismatic
			}
		}
		modifier = {
			planet_amenities_add = 0.4
		}
	}
	triggered_planet_modifier = {
		potential = {
			owner = { has_valid_civic = civic_agrarian_idyll }
			has_trait = trait_repugnant
		}
		modifier = {
			planet_amenities_add = -0.4
		}
	}

	weight = {
		modifier = { 
			factor = 50 
			has_trait = trait_priority_food
			}
		modifier = { 
			factor = 0.1 
			has_trait = trait_negative_priority_food
			}
		modifier = { 
			factor = 50 
			has_trait = trait_priority_amenities
			}
		modifier = { 
			factor = 0.1 
			has_trait = trait_negative_priority_amenities
			}

		weight = @worker_job_weight
		modifier = { factor = 1.3 is_a_slave_droid = yes }
		modifier = { factor = 2.0 is_a_slave_robot = yes }
		modifier = { factor = 2.0 good_farmer = yes }
		modifier = { factor = 1.1 good_worker = yes }
		modifier = { factor = 1.1 good_producer = yes }
		modifier = { factor = 2.0 has_job = farmer }
		modifier = { factor = 1.1 owner = { has_valid_civic = civic_agrarian_idyll }}
		modifier = { factor = 1.2 farmer_work_needed = yes }
		modifier = { factor = 0.9 farmer_work_needed = no }
		modifier = {
			factor = 1.2
			has_modifier = pop_nomadic
		}
	}
}

soldier = {
	category = worker
	condition_string = WORKER_JOB_TRIGGER
	building_icon = building_stronghold
	clothes_texture_index = 4

	possible_pre_triggers = {
		has_owner = yes
		is_being_purged = no
		is_being_assimilated = no
	}

	possible = {
		can_be_soldier = yes
		worker_job_check_trigger = yes
		exists = owner
		owner = { is_gestalt = no }
	}

	country_modifier = {
		country_naval_cap_add = 2
	}

	triggered_country_modifier = {
		potential = {
			planet = {
				exists = owner
				owner = { has_technology = "tech_ground_defense_planning" }
			}
		}
		modifier = {
			country_naval_cap_add = 2
		}
	}

	triggered_planet_modifier = {
		potential = {
			exists = owner
			owner = { has_valid_civic = civic_soldiers_of_fortune }
			owner = { is_at_war = no }
		}
		modifier = {
			trade_value_add = 4
		}
	}

	triggered_planet_modifier = {
		potential = {
			exists = owner
			owner = { has_valid_civic = civic_soldiers_of_fortune }
			owner = { is_at_war = yes }
		}
		modifier = {
			trade_value_add = 8
		}
	}

	triggered_planet_modifier = {
		potential = {
			
			exists = owner
			owner = {
				has_valid_civic = "civic_nationalistic_zeal"
				is_at_war = yes
	
			}
		}
		modifier = {
			pop_government_ethic_attraction = 0.05
		}
	}

	pop_modifier = {
		pop_defense_armies_add = 3
	}

	resources = {
		category = planet_soldiers
		produces = {
			trigger = {
				exists = owner
				owner = { has_valid_civic = civic_martial_brotherhood }
			}
			unity = 2
		}
		produces = {
			trigger = {
				exists = owner
				owner = { has_valid_civic = civic_citizen_service }
			}
			unity = 2
		}
		produces = {
			trigger = {
				exists = owner
				owner = { has_valid_civic = civic_soldiers_of_fortune }
				owner = { is_at_war = yes }
			}
			sr_wealth = 0.5
		}
		produces = {
			trigger = {
				exists = owner
				owner = { has_valid_civic = civic_stellartisan }
			}
			food = 1
		}
	}

	triggered_planet_modifier = {
		potential = {
			planet = {
				has_modifier = martial_law
			}
		}
		modifier = {
			planet_stability_add = 5
			planet_crime_add = -5
		}
	}

	triggered_planet_modifier = {
		potential = {
			exists = owner
			owner = { has_valid_civic = civic_stellartisan }
			planet = {
				not = { has_modifier = martial_law }
			}
		}
		modifier = {
			planet_crime_add = 1
		}
	}

	weight = {
		modifier = { 
			factor = 50 
			has_trait = trait_priority_unity
			}
		modifier = { 
			factor = 0.1 
			has_trait = trait_negative_priority_unity
			}
		modifier = { 
			factor = 50 
			has_trait = trait_priority_food
			}
		modifier = { 
			factor = 0.1 
			has_trait = trait_negative_priority_food
			}
		modifier = { 
			factor = 50 
			has_trait = trait_priority_trade_value
			}
		modifier = { 
			factor = 0.1 
			has_trait = trait_negative_priority_trade_value
			}
		modifier = { 
			factor = 50 
			has_trait = trait_priority_defense_armies
			}
		modifier = { 
			factor = 0.1 
			has_trait = trait_negative_priority_defense_armies
			}

		weight = @soldier_job_weight
		modifier = { factor = 0.9 is_a_slave_droid = yes }
		modifier = { factor = 0.5 is_a_slave_robot = yes }
		modifier = { factor = 1.8 good_soldier = yes }
		modifier = { factor = 5.0 under_martial_law = yes }
		modifier = { factor = 5.0 is_military_slave = yes }
		modifier = { factor = 1.9 has_job = soldier }
		modifier = { factor = 2.0 there_be_war = yes }
		modifier = { factor = 0.9 there_be_war = no }
		modifier = {
			factor = 1.5
			has_modifier = pop_tribal
		}
		modifier = {
			factor = 1.1
			has_modifier = pop_vigilant
		}
	}
}

preacher = {
	category = worker
	condition_string = WORKER_JOB_TRIGGER
	building_icon = building_temple_of_prosperity
	clothes_texture_index = 3
	icon = priest

	possible_pre_triggers = {
		has_owner = yes
		is_being_purged = no
		is_being_assimilated = no
	}

	possible = {
		or = {
			has_job = preacher
			is_unemployed = yes
		}
		complex_worker_job_check_trigger = yes
		not = { has_ethic = ethic_materialist }
	}

	resources = {
		category = planet_priests
		produces = {
			unity = 1
		}
	}

	planet_modifier = {
		planet_amenities_add = 3
		trade_value_add = 3
	}

	triggered_planet_modifier = {
		potential = {
			OR = {
				has_trait = trait_robot_domestic_protocols
				has_trait = trait_charismatic
			}
		}
		modifier = {
			planet_amenities_add = 0.6
		}
	}
	triggered_planet_modifier = {
		potential = {
			has_trait = trait_repugnant
		}
		modifier = {
			planet_amenities_add = -0.6
		}
	}
	triggered_planet_modifier = {
		potential = {
			OR = {
				has_trait = trait_thrifty
				has_trait = trait_nuumismatic_administration
			}
		}
		modifier = {
			trade_value_add = 0.6
		}
	}

	weight = {
		modifier = { 
			factor = 50 
			has_trait = trait_priority_unity
			}
		modifier = { 
			factor = 0.1 
			has_trait = trait_negative_priority_unity
			}
		modifier = { 
			factor = 50 
			has_trait = trait_priority_amenities
			}
		modifier = { 
			factor = 0.1 
			has_trait = trait_negative_priority_amenities
			}
		modifier = { 
			factor = 50 
			has_trait = trait_priority_trade_value
			}
		modifier = { 
			factor = 0.1 
			has_trait = trait_negative_priority_trade_value
			}

		weight = @specialist_job_weight
		modifier = { factor = 0.2 is_a_slave_droid = yes }
		modifier = { factor = 0.1 is_a_slave_robot = yes }
		modifier = { factor = 1.2 good_trader = yes }
		modifier = { factor = 1.9 good_servicer = yes }
		modifier = { factor = 1.2 good_unity = yes }
		modifier = { factor = 0.8 poor_unity = yes }
		modifier = { factor = 0.8 poor_servicer = yes }
		modifier = { factor = 1.5 has_job = preacher }
	}
}

