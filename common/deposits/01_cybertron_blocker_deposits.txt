## Possible Deposit Variables ##
# resources, resource and amount
# potential trigger (planet scope)
# planet_modifier - applied to planet only when deposit blocker has been cleared
# constant_modifier - applied to planet always
# station = station class in orbit to gather

@blocker_high = 10
@blocker_low = 5

# Cybertron Deposit Blockers
d_dead_iacon_city = {
	is_for_colonizable = yes
	icon = d_dead_iacon_city
	category = deposit_cat_rare_blocker

	potential = { always = no }

	planet_modifier = {
		district_generator_max = -2
	}
	use_weights_for_blocker_swap_types = no
	blocker_swap_types = {
		d_iacon_city
	}
	
	resources = {
		category = deposit_blockers
		cost = {
			energy = 1000
		}
	}
	
}

d_dead_kaon_city = {
	is_for_colonizable = yes
	icon = d_dead_kaon_city
	
	category = deposit_cat_rare_blocker
	
	potential = { always = no }
	
	planet_modifier = {
		district_mining_max = -2
	}
	use_weights_for_blocker_swap_types = no
	blocker_swap_types = {
		d_kaon_city
	}
	
	resources = {
		category = deposit_blockers
		cost = {
			energy = 1000
		}
	}
	
}
d_dead_teletraan_one = {
	is_for_colonizable = yes
	icon = d_dead_teletraan_one
	
	category = deposit_cat_rare_blocker
	potential = { always = no }
	
	planet_modifier = {

	}
	use_weights_for_blocker_swap_types = no
	blocker_swap_types = {
		d_teletraan_one
	}
	
	resources = {
		category = deposit_blockers
		cost = {
			energy = 1000
		}
	}
	drop_weight = {
		weight = -1
	}
}
d_damaged_cybertron_core = {
	icon = d_damaged_cybertron_core
	
	is_for_colonizable = yes
	category = deposit_cat_rare_blocker
	
	potential = { always = no }
	can_be_cleared = { always = no }
	
	planet_modifier = {
		planet_jobs_upkeep_mult = 0.10
	}
	
	use_weights_for_blocker_swap_types = no
	blocker_swap_types = {
		d_restored_cybertron_core
	}
	drop_weight = {
		weight = -1
	}
	
}
d_damaged_cybertronian_world_core = {
	icon = d_damaged_cybertronian_world_core
	
	is_for_colonizable = yes
	category = deposit_cat_rare_blocker
	
	potential = { always = no }
	can_be_cleared = { always = no }
	
	planet_modifier = {
		planet_jobs_upkeep_mult = 0.10
	}
	
	use_weights_for_blocker_swap_types = no
	blocker_swap_types = {
		d_cybertronian_world_core
	}
	drop_weight = {
		weight = -1
	}
	
}
d_inactive_well_of_all_sparks = {
	icon = d_inactive_well_of_all_sparks
	
	is_for_colonizable = yes
	category = deposit_cat_rare_blocker
	
	potential = { always = no }
	can_be_cleared = { always = no }
	
	planet_modifier = {
		planet_pop_assembly_mult = -0.50
	}
	use_weights_for_blocker_swap_types = no
	blocker_swap_types = {
		d_active_well_of_all_sparks
	}
	
	
	on_cleared = {
		if = {
			limit = {
				any_owned_pop = {
					is_robot_pop = yes
				}
			}
			random_owned_pop = {
				limit = {
					is_robot_pop = yes
				}
				root = {
					create_pop = {
						species = prev
					}
				}
			}
		}
		else = {
			random_owned_pop = {
				root = {
					create_pop = {
						species = prev
					}
				}
			}
		}
	}
	drop_weight = {
		weight = -1
	}
}

d_damaged_well_of_all_sparks_duplicate = {
	icon = d_inactive_well_of_all_sparks
	
	is_for_colonizable = yes
	category = deposit_cat_rare_blocker
	
	potential = { always = no }
	can_be_cleared = { always = no }
	
	planet_modifier = {
		planet_pop_assembly_mult = -0.25
	}
	use_weights_for_blocker_swap_types = no
	blocker_swap_types = {
		d_well_of_all_sparks_duplicate
	}
	
	
	on_cleared = {
		if = {
			limit = {
				any_owned_pop = {
					is_robot_pop = yes
				}
			}
			random_owned_pop = {
				limit = {
					is_robot_pop = yes
				}
				root = {
					create_pop = {
						species = prev
					}
				}
			}
		}
		else = {
			random_owned_pop = {
				root = {
					create_pop = {
						species = prev
					}
				}
			}
		}
	}
	drop_weight = {
		weight = -1
	}
}

d_damaged_energon_bridge = {
	icon = d_damaged_energon_bridge
	time = 500
	
	is_for_colonizable = yes
	category = deposit_cat_rare_blocker
	
	potential = { always = no }
	
	planet_modifier = {
		planet_generator_districts_add = -1
	}
	use_weights_for_blocker_swap_types = no
	blocker_swap_types = {
		d_energon_bridge
	}
	
	resources = {
		category = deposit_blockers
		cost = {
			energy = 750
		}
	}
	drop_weight = {
		weight = -1
	}
}
	

d_cybertron_ruins = {
	icon = d_cybertron_ruins
	time = 300
	
	is_for_colonizable = yes
	category = deposit_cat_blockers
	
	potential = { always = no }
	
	planet_modifier = {
		planet_max_districts_add = -1
	}
	use_weights_for_blocker_swap_types = no
	blocker_swap_types = {
		d_cybertronian_city
	}
	
	resources = {
		category = deposit_blockers
		cost = {
			energy = 500
		}
	}
	drop_weight = {
		weight = -1
	}
}
d_crystal_city_ruins = {
	icon = d_crystal_city_ruins
	time = 500
	
	is_for_colonizable = yes
	category = deposit_cat_blockers
	
	potential = { always = no }
	
	planet_modifier = {
		planet_max_districts_add = -1
	}
	use_weights_for_blocker_swap_types = no
	blocker_swap_types = {
		d_crystal_city
	}
	
	resources = {
		category = deposit_blockers
		cost = {
			energy = 1000
		}
	}
	drop_weight = {
		weight = -1
	}
}

d_insecticon_infestation = {
	icon = d_insecticon_infestation
	time = 360
	
	is_for_colonizable = yes
	category = deposit_cat_blockers
	
	resources = {
		category = deposit_blockers
		cost = {
			energy = 1200
		}
	}
	
	planet_modifier = {
		planet_max_districts_add = -2
		planet_building_build_speed_mult = -0.10
		planet_jobs_energy_produces_mult = -0.05
	}
	on_cleared = {
		if = {
			limit = {
				exists = owner
			}
			owner = { add_resource = { energon = 400 minerals = 400 } }
		}
	}
	drop_weight = {
		weight = -1
	}
}

d_sea_of_rust = {
	icon = d_sea_of_rust
	time = 1500
	
	is_for_colonizable = yes
	category = deposit_cat_rare_blocker
	
	potential = { always = no }
	
	resources = {
		category = deposit_blockers
		cost = {
			energy = 4000
		}
	}
	
	planet_modifier = {
		planet_jobs_society_research_produces_mult = 0.15
		pop_environment_tolerance = -0.15
		planet_max_districts_add = -4
	}
	
	use_weights_for_blocker_swap_types = no
	blocker_swap_types = {
		d_restored_cybertron_city
	}
	on_cleared = {
		if = {
			limit = {
				exists = owner
			}
			custom_tooltip = minor_artifacts_found
			random_list = {
				33 = {
					owner = { add_resource = { minor_artifacts = 4 minerals = 400 alloys = 400 society_research = 200 } }
				}
				33 = {
					owner = { add_resource = { minor_artifacts = 8 minerals = 800 alloys = 800 society_research = 400 } }
				}
				33 = {
					owner = { add_resource = { minor_artifacts = 12 minerals = 1200 alloys = 1200 society_research = 600 } }
				}
			}
		}
	}
	drop_weight = {
		weight = -1
	}
}

d_deactivated_space_bridge = {
	icon = d_deactivated_space_bridge
	time = 750
	
	is_for_colonizable = yes
	category = deposit_cat_rare_blocker
	
	resources = {
		category = deposit_blockers 
		cost = { 
			energy = 1000
		}
	}
	
	planet_modifier = {
		district_generator_max = -2
	}
	
	use_weights_for_blocker_swap_types = no
	blocker_swap_types = {
		d_space_bridge
	}
	on_cleared = {
		if = {
			limit = {
				exists = owner
				owner = {
					has_origin = origin_cybertron
				}
			}
			owner = { add_resource = { energy = 500 } }
		}
	}
	drop_weight = {
		weight = -1
	}
}

#d_insecticon_devastation = {
#	icon = d_insecticon_infestation
#
#	time = 360
#
#	is_for_colonizable = yes
#	category = deposit_cat_blockers
#
#	potential = { always = no }
#	can_be_cleared = {
#		custom_tooltip = {
#			fail_text = requires_actor_not_devouring_swarm_insecticon
#			exists = owner
#			owner = {
#				OR = {
#					is_insecticon_devouring_swarm = no
#					NOT = { has_valid_civic = civic_insecticon_hive }
#				}
#			}
#		}
#	}
#
#	planet_modifier = {
#		planet_max_districts_add = -1
#		pop_environment_tolerance = -0.1
#	}
#
#	drop_weight = {
#		weight = 0
#	}
#
#	resources = {
#		category = deposit_blockers
#		cost = {
#			energy = 1000
#		}
#	}
#}

# Insecticons in Stasis-mode
d_insecticon_nest = {
	icon = d_insecticon_nest
	time = 360
	
	is_for_colonizable = yes
	category = deposit_cat_blockers
	
	resources = {
		category = deposit_blockers
		cost = {
			trigger = {
				NOT = { owner = { has_origin = origin_insecticon_hive } }
			}
			energy = 300
		}
		cost = {
			trigger = {
				owner = { has_origin = origin_insecticon_hive }
			}
			energon = 300
		}
	}
	
	potential = {
		planet_size >= 10
	}

	planet_modifier = {
		planet_max_districts_add = -1
	}


	on_cleared = {
		if = {
			limit = {
				NOT = { owner = { has_origin = origin_insecticon_hive } }
			}
			owner = { add_resource = { energon = 150 alloys = 150 } }
		}
		if = {
			limit = {
				owner = { has_origin = origin_insecticon_hive }
			}
			create_pop = {
				species = owner
			}
		}
	}
	
	drop_weight = {
		weight = 2
		modifier = {
			factor = 5
			has_deposit = d_energon_crystals
		}
		modifier = {
			factor = 0.5
			planet_size < 15
		}
		modifier = {
			factor = 0
			num_free_districts = {
				type = district_city 
				value < 2
			}
		}
	}
	prerequisites = { "tech_dangerous_wildlife" }
	
	ai_weight = {
		weight = 1
		
		modifier = {
			factor = 2
			owner = { has_origin = origin_insecticon_hive }
		}
	}
}