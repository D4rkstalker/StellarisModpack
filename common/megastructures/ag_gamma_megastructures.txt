@entity_x = 0
@entity_y = 0

ag_gamma_station_megastructure_0 = {
	entity = "construction_platform_entity"
	construction_entity = "construction_platform_entity"
	portrait = "GFX_megastructure_construction_background"
	
	place_entity_on_planet_plane = no
	show_galactic_map_icon = yes
	show_in_outliner = yes
	
	build_time = @ag_gamma_station_megastructure_0_buildtime
	
	upgrade_desc = hide
	
	entity_offset = { x = 0 y = -20 }
	
	resources = {
		category = megastructures
		cost = {
			alloys = @ag_gamma_station_megastructure_0_cost_alloys
			influence = @ag_gamma_station_megastructure_0_cost_influence
		}
		upkeep = {
			energy = @ag_gamma_station_megastructure_0_upkeep_energy
		}
		
	}
	
	potential = {
		has_technology = tech_ag_gamma_station
	}
	
	possible = {
		custom_tooltip = {
			fail_text = "requires_inside_border"
			is_inside_border = from
		}		
		custom_tooltip = {
			fail_text = "requires_surveyed_system"
			NOT = { any_system_planet = { is_surveyed = { who = prev.from status = no } } }
		}
		custom_tooltip = {
			fail_text = "requires_no_black_hole_neutron_star_pulsar"
			NOR = {
				is_star_class = sc_black_hole
				is_star_class = sc_neutron_star
				is_star_class = sc_pulsar
			}
		}
		custom_tooltip = {
			fail_text = "requires_no_binary_trinary"
			NOR = {
				is_star_class = sc_binary_1
				is_star_class = sc_binary_2
				is_star_class = sc_binary_3
				is_star_class = sc_binary_4
				is_star_class = sc_binary_5
				is_star_class = sc_binary_6
				is_star_class = sc_binary_7
				is_star_class = sc_binary_8
				is_star_class = sc_binary_9
				is_star_class = sc_binary_10
				is_star_class = sc_trinary_1
				is_star_class = sc_trinary_2
				is_star_class = sc_trinary_3
				is_star_class = sc_trinary_4
			}
		}
		custom_tooltip = {
			fail_text = "requires_star"
			NOT = { is_star_class = sc_ag_void }
		}
		custom_tooltip = {
			fail_text = "ag_requires_tech_ag_gamma_station"
			from = { has_technology = tech_ag_gamma_station }
		}
		custom_tooltip = {
			fail_text = "ag_requires_no_existing_gamma_station"
			from = {
				NOR = {
					any_controlled_fleet = {
						OR = {
							is_ship_size = ag_gamma_station_0
							is_ship_size = ag_gamma_station_1
						}
					}
					any_owned_megastructure = {
						OR = {
							is_megastructure_type = ag_gamma_station_megastructure_0
							is_megastructure_type = ag_gamma_station_megastructure_1
							is_megastructure_type = ag_gamma_station_megastructure_2
							is_megastructure_type = ag_gamma_station_megastructure_3
							is_megastructure_type = ag_gamma_station_megastructure_4
							is_megastructure_type = ag_gamma_station_megastructure_5
							is_megastructure_type = ag_gamma_station_megastructure_6
							is_megastructure_type = ag_gamma_station_megastructure_7
							is_megastructure_type = ag_gamma_station_megastructure_8
							is_megastructure_type = ag_gamma_station_megastructure_9
						}
					}
					has_special_project = ag_structural_protection_system_301
				}
			}
		}
		# custom_tooltip = {
		# 	fail_text = "ag_requires_usable_ancient_construction_section"
		# 	NOT = {
		# 		any_system_planet = {
		# 			OR = {
		# 				has_planet_flag = ag_using_ancient_construction_section_system
		# 				AND = {
		# 					has_planet_flag = ag_ancient_construction_section
		# 					has_planet_flag = has_megastructure
		# 				}
		# 			}
		# 		}
		# 	}
		# }
		custom_tooltip = {
			fail_text = "ag_requires_ancient_construction_section"
			any_system_planet = { ag_is_construction_section = yes }
		}
		# custom_tooltip = {
		# 	fail_text = "ag_requires_ancient_construction_section_shipyard_disabled"
		# 	NOT = {
		# 		any_system_planet = {
		# 			has_planet_flag = ag_ancient_construction_section_actived
		# 		}
		# 	}
		# }
	}
	
	placement_rules = {
		planet_possible = {
			OR = {
				custom_tooltip = { fail_text = "must_build_around_star" is_star = yes }
				ag_is_construction_section = yes
			}
			custom_tooltip = {
				fail_text = "requires_no_anomaly"
				NOT = { has_anomaly = yes }
			}
			custom_tooltip = {
				fail_text = "requires_no_orbital_station"
				has_orbital_station = no
			}
			custom_tooltip = {
				fail_text = "ag_requires_24_size_star"
				solar_system.star = { planet_size < 25 }
			}
			custom_tooltip = {
				fail_text = "ag_requires_usable_ancient_construction_section"
				NOT = { has_planet_flag = has_megastructure }
			}
			custom_tooltip = {
				fail_text = "ag_requires_6_ancient_construction_section"
				solar_system.star = { check_variable = { which = ag_construction_section_counter value >= 6 } }
			}
		}
	}
	
	on_build_start = { }
	on_build_cancel = { }
	on_build_complete = { from = { country_event = { id = ag_gamma.800 } } }

	construction_blocks_and_blocked_by = self_type
	
	
	ai_weight = { weight = 1000 }
}

ag_gamma_station_megastructure_1 = {
	entity = "ag_gamma_station_part_1a_entity"
	construction_entity = "ag_gamma_station_part_1a_construction_entity"
	portrait = "GFX_megastructure_construction_background"
	
	place_entity_on_planet_plane = no
	show_galactic_map_icon = yes
	show_in_outliner = yes
	
	build_time = @ag_gamma_station_megastructure_1_buildtime
	
	upgrade_desc = hide
	
	entity_offset = { x = 0 y = 0 }
	
	upgrade_from = {
		ag_gamma_station_megastructure_0
	}
	
	resources = {
		category = megastructures
		cost = {
			sr_living_metal = @ag_gamma_station_megastructure_1_cost_sr_living_metal
			nanites = @ag_gamma_station_megastructure_1_cost_nanites
			sr_dark_matter = @ag_gamma_station_megastructure_1_cost_sr_dark_matter
		}

		upkeep = {
			energy = @ag_gamma_station_megastructure_1_upkeep_energy
		}
		
	}
	
	potential = {
		has_technology = tech_ag_gamma_station
	}
	
	possible = {
		custom_tooltip = {
			fail_text = "ag_requires_tech_ag_gamma_station"
			from = { has_technology = tech_ag_gamma_station }
		}
		custom_tooltip = {
			fail_text = "ag_requires_no_existing_gamma_station"
			from = {
				NOR = {
					any_controlled_fleet = {
						OR = {
							is_ship_size = ag_gamma_station_0
							is_ship_size = ag_gamma_station_1
						}
					}
					any_owned_megastructure = {
						OR = {
							is_megastructure_type = ag_gamma_station_megastructure_1
							is_megastructure_type = ag_gamma_station_megastructure_2
							is_megastructure_type = ag_gamma_station_megastructure_3
							is_megastructure_type = ag_gamma_station_megastructure_4
							is_megastructure_type = ag_gamma_station_megastructure_5
							is_megastructure_type = ag_gamma_station_megastructure_6
							is_megastructure_type = ag_gamma_station_megastructure_7
							is_megastructure_type = ag_gamma_station_megastructure_8
							is_megastructure_type = ag_gamma_station_megastructure_9
						}
					}
					has_special_project = ag_structural_protection_system_301
				}
			}
		}
		# custom_tooltip = {
		# 	fail_text = "ag_requires_ancient_construction_section_shipyard_disabled"
		# 	NOT = {
		# 		any_system_planet = {
		# 			has_planet_flag = ag_ancient_construction_section_actived
		# 		}
		# 	}
		# }
	}
	
	placement_rules = {
	}
	
	on_build_start = {}
	on_build_cancel = {}
	on_build_complete = {
		if = {
			limit = { fromfrom = { has_megastructure_flag = ag_auto_upgrade_megastructure } }
			system_event = { id = ag_ancient.251 days = 1 scopes = { from = root.fromfrom } }
		}
		else = { from = { country_event = { id = ag_gamma.81 } } }
		from = { country_event = { id = ag_ancient_knowledge.26 } }
	}

	construction_blocks_and_blocked_by = self_type
	
	
	ai_weight = {
		weight = 1000
	}

}

ag_gamma_station_megastructure_2 = {
	entity = "ag_gamma_station_part_1b_entity"
	construction_entity = "ag_gamma_station_part_1b_construction_entity"
	portrait = "GFX_megastructure_construction_background"
	
	place_entity_on_planet_plane = no
	show_galactic_map_icon = yes
	show_in_outliner = yes
	
	build_time = @ag_gamma_station_megastructure_2_buildtime
	
	upgrade_desc = hide
	
	entity_offset = { x = 0 y = 0 }
	
	upgrade_from = {
		ag_gamma_station_megastructure_1
	}
	
	resources = {
		category = megastructures
		cost = {
			sr_living_metal = @ag_gamma_station_megastructure_2_cost_sr_living_metal
			nanites = @ag_gamma_station_megastructure_2_cost_nanites
			sr_dark_matter = @ag_gamma_station_megastructure_2_cost_sr_dark_matter
		}

		upkeep = {
			energy = @ag_gamma_station_megastructure_2_upkeep_energy
		}
		
	}
	
	potential = {
		has_technology = tech_ag_gamma_station
	}
	
	possible = {
		custom_tooltip = {
			fail_text = "ag_requires_tech_ag_gamma_station"
			from = { has_technology = tech_ag_gamma_station }
		}
		custom_tooltip = {
			fail_text = "ag_requires_no_existing_gamma_station"
			from = {
				NOR = {
					any_controlled_fleet = {
						OR = {
							is_ship_size = ag_gamma_station_0
							is_ship_size = ag_gamma_station_1
						}
					}
					any_owned_megastructure = {
						OR = {
							is_megastructure_type = ag_gamma_station_megastructure_0
							is_megastructure_type = ag_gamma_station_megastructure_2
							is_megastructure_type = ag_gamma_station_megastructure_3
							is_megastructure_type = ag_gamma_station_megastructure_4
							is_megastructure_type = ag_gamma_station_megastructure_5
							is_megastructure_type = ag_gamma_station_megastructure_6
							is_megastructure_type = ag_gamma_station_megastructure_7
							is_megastructure_type = ag_gamma_station_megastructure_8
							is_megastructure_type = ag_gamma_station_megastructure_9
						}
					}
					has_special_project = ag_structural_protection_system_301
				}
			}
		}
		# custom_tooltip = {
		# 	fail_text = "ag_requires_ancient_construction_section_shipyard_disabled"
		# 	NOT = {
		# 		any_system_planet = {
		# 			has_planet_flag = ag_ancient_construction_section_actived
		# 		}
		# 	}
		# }
	}
	
	placement_rules = {
	}
	
	on_build_start = {}
	on_build_cancel = {}
	on_build_complete = {
		if = {
			limit = { fromfrom = { has_megastructure_flag = ag_auto_upgrade_megastructure } }
			system_event = { id = ag_ancient.251 days = 1 scopes = { from = root.fromfrom } }
		}
		else = { from = { country_event = { id = ag_gamma.82 } } }
		from = { country_event = { id = ag_ancient_knowledge.26 } }
	}

	construction_blocks_and_blocked_by = self_type
	
	
	ai_weight = {
		weight = 1000
	}

}

ag_gamma_station_megastructure_3 = {
	entity = "ag_gamma_station_part_2a_entity"
	construction_entity = "ag_gamma_station_part_2a_construction_entity"
	portrait = "GFX_megastructure_construction_background"
	
	place_entity_on_planet_plane = no
	show_galactic_map_icon = yes
	show_in_outliner = yes
	
	build_time = @ag_gamma_station_megastructure_3_buildtime
	
	upgrade_desc = hide
	
	entity_offset = { x = 0 y = 0 }
	
	upgrade_from = {
		ag_gamma_station_megastructure_2
	}
	
	resources = {
		category = megastructures
		cost = {
			sr_living_metal = @ag_gamma_station_megastructure_3_cost_sr_living_metal
			nanites = @ag_gamma_station_megastructure_3_cost_nanites
			sr_dark_matter = @ag_gamma_station_megastructure_3_cost_sr_dark_matter
		}

		upkeep = {
			energy = @ag_gamma_station_megastructure_3_upkeep_energy
		}
		
	}
	
	potential = {
		has_technology = tech_ag_gamma_station
	}
	
	possible = {
		custom_tooltip = {
			fail_text = "ag_requires_tech_ag_gamma_station"
			from = { has_technology = tech_ag_gamma_station }
		}
		custom_tooltip = {
			fail_text = "ag_requires_no_existing_gamma_station"
			from = {
				NOR = {
					any_controlled_fleet = {
						OR = {
							is_ship_size = ag_gamma_station_0
							is_ship_size = ag_gamma_station_1
						}
					}
					any_owned_megastructure = {
						OR = {
							is_megastructure_type = ag_gamma_station_megastructure_0
							is_megastructure_type = ag_gamma_station_megastructure_1
							is_megastructure_type = ag_gamma_station_megastructure_3
							is_megastructure_type = ag_gamma_station_megastructure_4
							is_megastructure_type = ag_gamma_station_megastructure_5
							is_megastructure_type = ag_gamma_station_megastructure_6
							is_megastructure_type = ag_gamma_station_megastructure_7
							is_megastructure_type = ag_gamma_station_megastructure_8
							is_megastructure_type = ag_gamma_station_megastructure_9
						}
					}
					has_special_project = ag_structural_protection_system_301
				}
			}
		}
		# custom_tooltip = {
		# 	fail_text = "ag_requires_ancient_construction_section_shipyard_disabled"
		# 	NOT = {
		# 		any_system_planet = {
		# 			has_planet_flag = ag_ancient_construction_section_actived
		# 		}
		# 	}
		# }
	}
	
	placement_rules = {
	}
	
	on_build_start = {}
	on_build_cancel = {}
	on_build_complete = {
		if = {
			limit = { fromfrom = { has_megastructure_flag = ag_auto_upgrade_megastructure } }
			system_event = { id = ag_ancient.251 days = 1 scopes = { from = root.fromfrom } }
		}
		else = { from = { country_event = { id = ag_gamma.83 } } }
		from = { country_event = { id = ag_ancient_knowledge.26 } }
	}

	construction_blocks_and_blocked_by = self_type
	
	
	ai_weight = {
		weight = 1000
	}

}

ag_gamma_station_megastructure_4 = {
	entity = "ag_gamma_station_part_2b_entity"
	construction_entity = "ag_gamma_station_part_2b_construction_entity"
	portrait = "GFX_megastructure_construction_background"
	
	place_entity_on_planet_plane = no
	show_galactic_map_icon = yes
	show_in_outliner = yes
	
	build_time = @ag_gamma_station_megastructure_4_buildtime
	
	upgrade_desc = hide
	
	entity_offset = { x = 0 y = 0 }
	
	upgrade_from = {
		ag_gamma_station_megastructure_3
	}
	
	resources = {
		category = megastructures
		cost = {
			sr_living_metal = @ag_gamma_station_megastructure_4_cost_sr_living_metal
			nanites = @ag_gamma_station_megastructure_4_cost_nanites
			sr_dark_matter = @ag_gamma_station_megastructure_4_cost_sr_dark_matter
		}

		upkeep = {
			energy = @ag_gamma_station_megastructure_4_upkeep_energy
		}
		
	}
	
	potential = {
		has_technology = tech_ag_gamma_station
	}
	
	possible = {
		custom_tooltip = {
			fail_text = "ag_requires_tech_ag_gamma_station"
			from = { has_technology = tech_ag_gamma_station }
		}
		custom_tooltip = {
			fail_text = "ag_requires_no_existing_gamma_station"
			from = {
				NOR = {
					any_controlled_fleet = {
						OR = {
							is_ship_size = ag_gamma_station_0
							is_ship_size = ag_gamma_station_1
						}
					}
					any_owned_megastructure = {
						OR = {
							is_megastructure_type = ag_gamma_station_megastructure_0
							is_megastructure_type = ag_gamma_station_megastructure_1
							is_megastructure_type = ag_gamma_station_megastructure_2
							is_megastructure_type = ag_gamma_station_megastructure_4
							is_megastructure_type = ag_gamma_station_megastructure_5
							is_megastructure_type = ag_gamma_station_megastructure_6
							is_megastructure_type = ag_gamma_station_megastructure_7
							is_megastructure_type = ag_gamma_station_megastructure_8
							is_megastructure_type = ag_gamma_station_megastructure_9
						}
					}
					has_special_project = ag_structural_protection_system_301
				}
			}
		}
		# custom_tooltip = {
		# 	fail_text = "ag_requires_ancient_construction_section_shipyard_disabled"
		# 	NOT = {
		# 		any_system_planet = {
		# 			has_planet_flag = ag_ancient_construction_section_actived
		# 		}
		# 	}
		# }
	}
	
	placement_rules = {
	}
	
	on_build_start = {}
	on_build_cancel = {}
	on_build_complete = {
		if = {
			limit = { fromfrom = { has_megastructure_flag = ag_auto_upgrade_megastructure } }
			system_event = { id = ag_ancient.251 days = 1 scopes = { from = root.fromfrom } }
		}
		else = { from = { country_event = { id = ag_gamma.84 } } }
		from = { country_event = { id = ag_ancient_knowledge.26 } }
	}

	construction_blocks_and_blocked_by = self_type
	
	
	ai_weight = {
		weight = 1000
	}

}

ag_gamma_station_megastructure_5 = {
	entity = "ag_gamma_station_part_3_entity"
	construction_entity = "ag_gamma_station_part_3_construction_entity"
	portrait = "GFX_megastructure_construction_background"
	
	place_entity_on_planet_plane = no
	show_galactic_map_icon = yes
	show_in_outliner = yes
	
	build_time = @ag_gamma_station_megastructure_5_buildtime
	
	upgrade_desc = hide
	
	entity_offset = { x = 0 y = 0 }
	
	upgrade_from = {
		ag_gamma_station_megastructure_4
	}
	
	resources = {
		category = megastructures
		cost = {
			sr_living_metal = @ag_gamma_station_megastructure_5_cost_sr_living_metal
			nanites = @ag_gamma_station_megastructure_5_cost_nanites
			sr_dark_matter = @ag_gamma_station_megastructure_5_cost_sr_dark_matter
		}

		upkeep = {
			energy = @ag_gamma_station_megastructure_5_upkeep_energy
		}
		
	}
	
	potential = {
		has_technology = tech_ag_gamma_station
	}
	
	possible = {
		custom_tooltip = {
			fail_text = "ag_requires_tech_ag_gamma_station"
			from = { has_technology = tech_ag_gamma_station }
		}
		custom_tooltip = {
			fail_text = "ag_requires_no_existing_gamma_station"
			from = {
				NOR = {
					any_controlled_fleet = {
						OR = {
							is_ship_size = ag_gamma_station_0
							is_ship_size = ag_gamma_station_1
						}
					}
					any_owned_megastructure = {
						OR = {
							is_megastructure_type = ag_gamma_station_megastructure_0
							is_megastructure_type = ag_gamma_station_megastructure_1
							is_megastructure_type = ag_gamma_station_megastructure_2
							is_megastructure_type = ag_gamma_station_megastructure_3
							is_megastructure_type = ag_gamma_station_megastructure_5
							is_megastructure_type = ag_gamma_station_megastructure_6
							is_megastructure_type = ag_gamma_station_megastructure_7
							is_megastructure_type = ag_gamma_station_megastructure_8
							is_megastructure_type = ag_gamma_station_megastructure_9
						}
					}
					has_special_project = ag_structural_protection_system_301
				}
			}
		}
		# custom_tooltip = {
		# 	fail_text = "ag_requires_ancient_construction_section_shipyard_disabled"
		# 	NOT = {
		# 		any_system_planet = {
		# 			has_planet_flag = ag_ancient_construction_section_actived
		# 		}
		# 	}
		# }
	}
	
	placement_rules = {
	}
	
	on_build_start = {}
	on_build_cancel = {}
	on_build_complete = {
		if = {
			limit = { fromfrom = { has_megastructure_flag = ag_auto_upgrade_megastructure } }
			system_event = { id = ag_ancient.251 days = 1 scopes = { from = root.fromfrom } }
		}
		else = { from = { country_event = { id = ag_gamma.85 } } }
		from = { country_event = { id = ag_ancient_knowledge.26 } }
	}

	construction_blocks_and_blocked_by = self_type
	
	
	ai_weight = {
		weight = 1000
	}

}

ag_gamma_station_megastructure_6 = {
	entity = "ag_gamma_station_part_4_entity"
	construction_entity = "ag_gamma_station_part_4_construction_entity"
	portrait = "GFX_megastructure_construction_background"
	
	place_entity_on_planet_plane = no
	show_galactic_map_icon = yes
	show_in_outliner = yes
	
	build_time = @ag_gamma_station_megastructure_6_buildtime
	
	upgrade_desc = hide
	
	entity_offset = { x = 0 y = 0 }
	
	upgrade_from = {
		ag_gamma_station_megastructure_5
	}
	
	resources = {
		category = megastructures
		cost = {
			sr_living_metal = @ag_gamma_station_megastructure_6_cost_sr_living_metal
			nanites = @ag_gamma_station_megastructure_6_cost_nanites
			sr_dark_matter = @ag_gamma_station_megastructure_6_cost_sr_dark_matter
		}

		upkeep = {
			energy = @ag_gamma_station_megastructure_6_upkeep_energy
		}
		
	}
	
	potential = {
		has_technology = tech_ag_gamma_station
	}
	
	possible = {
		custom_tooltip = {
			fail_text = "ag_requires_tech_ag_gamma_station"
			from = { has_technology = tech_ag_gamma_station }
		}
		custom_tooltip = {
			fail_text = "ag_requires_no_existing_gamma_station"
			from = {
				NOR = {
					any_controlled_fleet = {
						OR = {
							is_ship_size = ag_gamma_station_0
							is_ship_size = ag_gamma_station_1
						}
					}
					any_owned_megastructure = {
						OR = {
							is_megastructure_type = ag_gamma_station_megastructure_0
							is_megastructure_type = ag_gamma_station_megastructure_1
							is_megastructure_type = ag_gamma_station_megastructure_2
							is_megastructure_type = ag_gamma_station_megastructure_3
							is_megastructure_type = ag_gamma_station_megastructure_4
							is_megastructure_type = ag_gamma_station_megastructure_6
							is_megastructure_type = ag_gamma_station_megastructure_7
							is_megastructure_type = ag_gamma_station_megastructure_8
							is_megastructure_type = ag_gamma_station_megastructure_9
						}
					}
					has_special_project = ag_structural_protection_system_301
				}
			}
		}
		# custom_tooltip = {
		# 	fail_text = "ag_requires_ancient_construction_section_shipyard_disabled"
		# 	NOT = {
		# 		any_system_planet = {
		# 			has_planet_flag = ag_ancient_construction_section_actived
		# 		}
		# 	}
		# }
	}
	
	placement_rules = {
	}
	
	on_build_start = {}
	on_build_cancel = {}
	on_build_complete = {
		if = {
			limit = { fromfrom = { has_megastructure_flag = ag_auto_upgrade_megastructure } }
			system_event = { id = ag_ancient.251 days = 1 scopes = { from = root.fromfrom } }
		}
		else = { from = { country_event = { id = ag_gamma.86 } } }
		from = { country_event = { id = ag_ancient_knowledge.26 } }
	}

	construction_blocks_and_blocked_by = self_type
	
	
	ai_weight = {
		weight = 1000
	}

}

ag_gamma_station_megastructure_7 = {
	entity = "ag_gamma_station_part_5_entity"
	construction_entity = "ag_gamma_station_part_5_construction_entity"
	portrait = "GFX_megastructure_construction_background"
	
	place_entity_on_planet_plane = no
	show_galactic_map_icon = yes
	show_in_outliner = yes
	
	build_time = @ag_gamma_station_megastructure_7_buildtime
	
	upgrade_desc = hide
	
	entity_offset = { x = 0 y = 0 }
	
	upgrade_from = {
		ag_gamma_station_megastructure_6
	}
	
	resources = {
		category = megastructures
		cost = {
			sr_living_metal = @ag_gamma_station_megastructure_7_cost_sr_living_metal
			nanites = @ag_gamma_station_megastructure_7_cost_nanites
			sr_dark_matter = @ag_gamma_station_megastructure_7_cost_sr_dark_matter
		}

		upkeep = {
			energy = @ag_gamma_station_megastructure_7_upkeep_energy
		}
		
	}
	
	potential = {
		has_technology = tech_ag_gamma_station
	}
	
	possible = {
		custom_tooltip = {
			fail_text = "ag_requires_tech_ag_gamma_station"
			from = { has_technology = tech_ag_gamma_station }
		}
		custom_tooltip = {
			fail_text = "ag_requires_no_existing_gamma_station"
			from = {
				NOR = {
					any_controlled_fleet = {
						OR = {
							is_ship_size = ag_gamma_station_0
							is_ship_size = ag_gamma_station_1
						}
					}
					any_owned_megastructure = {
						OR = {
							is_megastructure_type = ag_gamma_station_megastructure_0
							is_megastructure_type = ag_gamma_station_megastructure_1
							is_megastructure_type = ag_gamma_station_megastructure_2
							is_megastructure_type = ag_gamma_station_megastructure_3
							is_megastructure_type = ag_gamma_station_megastructure_4
							is_megastructure_type = ag_gamma_station_megastructure_5
							is_megastructure_type = ag_gamma_station_megastructure_7
							is_megastructure_type = ag_gamma_station_megastructure_8
							is_megastructure_type = ag_gamma_station_megastructure_9
						}
					}
					has_special_project = ag_structural_protection_system_301
				}
			}
		}
		# custom_tooltip = {
		# 	fail_text = "ag_requires_ancient_construction_section_shipyard_disabled"
		# 	NOT = {
		# 		any_system_planet = {
		# 			has_planet_flag = ag_ancient_construction_section_actived
		# 		}
		# 	}
		# }
	}
	
	placement_rules = {
	}
	
	on_build_start = {}
	on_build_cancel = {}
	on_build_complete = {
		if = {
			limit = { fromfrom = { has_megastructure_flag = ag_auto_upgrade_megastructure } }
			system_event = { id = ag_ancient.251 days = 1 scopes = { from = root.fromfrom } }
		}
		else = { from = { country_event = { id = ag_gamma.87 } } }
		from = { country_event = { id = ag_ancient_knowledge.26 } }
	}

	construction_blocks_and_blocked_by = self_type
	
	
	ai_weight = {
		weight = 1000
	}

}

ag_gamma_station_megastructure_8 = {
	entity = "ag_gamma_station_part_6_entity"
	construction_entity = "ag_gamma_station_part_6_construction_entity"
	portrait = "GFX_megastructure_construction_background"
	
	place_entity_on_planet_plane = no
	show_galactic_map_icon = yes
	show_in_outliner = yes
	
	build_time = @ag_gamma_station_megastructure_8_buildtime
	
	upgrade_desc = hide
	
	entity_offset = { x = 0 y = 0 }
	
	upgrade_from = {
		ag_gamma_station_megastructure_7
	}
	
	resources = {
		category = megastructures
		cost = {
			sr_living_metal = @ag_gamma_station_megastructure_8_cost_sr_living_metal
			nanites = @ag_gamma_station_megastructure_8_cost_nanites
			sr_dark_matter = @ag_gamma_station_megastructure_8_cost_sr_dark_matter
		}

		upkeep = {
			energy = @ag_gamma_station_megastructure_8_upkeep_energy
		}
		
	}
	
	potential = {
		has_technology = tech_ag_gamma_station
	}
	
	possible = {
		custom_tooltip = {
			fail_text = "ag_requires_tech_ag_gamma_station"
			from = { has_technology = tech_ag_gamma_station }
		}
		custom_tooltip = {
			fail_text = "ag_requires_no_existing_gamma_station"
			from = {
				NOR = {
					any_controlled_fleet = {
						OR = {
							is_ship_size = ag_gamma_station_0
							is_ship_size = ag_gamma_station_1
						}
					}
					any_owned_megastructure = {
						OR = {
							is_megastructure_type = ag_gamma_station_megastructure_0
							is_megastructure_type = ag_gamma_station_megastructure_1
							is_megastructure_type = ag_gamma_station_megastructure_2
							is_megastructure_type = ag_gamma_station_megastructure_3
							is_megastructure_type = ag_gamma_station_megastructure_4
							is_megastructure_type = ag_gamma_station_megastructure_5
							is_megastructure_type = ag_gamma_station_megastructure_6
							is_megastructure_type = ag_gamma_station_megastructure_8
							is_megastructure_type = ag_gamma_station_megastructure_9
						}
					}
					has_special_project = ag_structural_protection_system_301
				}
			}
		}
		# custom_tooltip = {
		# 	fail_text = "ag_requires_ancient_construction_section_shipyard_disabled"
		# 	NOT = {
		# 		any_system_planet = {
		# 			has_planet_flag = ag_ancient_construction_section_actived
		# 		}
		# 	}
		# }
	}
	
	placement_rules = {
	}
	
	on_build_start = {}
	on_build_cancel = {}
	on_build_complete = {
		if = {
			limit = { fromfrom = { has_megastructure_flag = ag_auto_upgrade_megastructure } }
			system_event = { id = ag_ancient.251 days = 1 scopes = { from = root.fromfrom } }
		}
		else = { from = { country_event = { id = ag_gamma.88 } } }
		from = { country_event = { id = ag_ancient_knowledge.26 } }
	}

	construction_blocks_and_blocked_by = self_type
	
	
	ai_weight = {
		weight = 1000
	}

}

ag_gamma_station_megastructure_9 = {
	entity = "ag_gamma_station_part_7_entity"
	construction_entity = "ag_gamma_station_part_7_construction_entity"
	portrait = "GFX_megastructure_construction_background"
	
	place_entity_on_planet_plane = no
	show_galactic_map_icon = yes
	show_in_outliner = yes
	
	build_time = @ag_gamma_station_megastructure_9_buildtime
	
	upgrade_desc = hide
	
	entity_offset = { x = 0 y = 0 }
	
	upgrade_from = {
		ag_gamma_station_megastructure_8
	}
	
	resources = {
		category = megastructures
		cost = {
			energy = @ag_gamma_station_megastructure_9_cost_energy
		}

		upkeep = {
			energy = @ag_gamma_station_megastructure_9_upkeep_energy
		}
		
	}
	
	potential = {
		has_technology = tech_ag_gamma_station
	}
	
	possible = {
		custom_tooltip = {
			fail_text = "ag_requires_tech_ag_gamma_station"
			from = { has_technology = tech_ag_gamma_station }
		}
		custom_tooltip = {
			fail_text = "ag_requires_no_existing_gamma_station"
			from = {
				NOR = {
					any_controlled_fleet = {
						OR = {
							is_ship_size = ag_gamma_station_0
							is_ship_size = ag_gamma_station_1
						}
					}
					any_owned_megastructure = {
						OR = {
							is_megastructure_type = ag_gamma_station_megastructure_0
							is_megastructure_type = ag_gamma_station_megastructure_1
							is_megastructure_type = ag_gamma_station_megastructure_2
							is_megastructure_type = ag_gamma_station_megastructure_3
							is_megastructure_type = ag_gamma_station_megastructure_4
							is_megastructure_type = ag_gamma_station_megastructure_5
							is_megastructure_type = ag_gamma_station_megastructure_6
							is_megastructure_type = ag_gamma_station_megastructure_7
							is_megastructure_type = ag_gamma_station_megastructure_9
						}
					}
					has_special_project = ag_structural_protection_system_301
				}
			}
		}
	}
	
	placement_rules = {
	}
	
	on_build_start = {}
	on_build_cancel = {}
	on_build_complete = {
		from = { if = { limit = { is_ai = yes } country_event = { id = ag_gamma.101 days = 3600 random = 1800 } } }
		fromfrom.planet = {
			remove_planet_flag = has_megastructure
			# remove_planet_flag = ag_using_ancient_construction_section_system
			if = {
				limit = {
					NOR = {
						is_planet_class = pc_ag_void_star
						planet_size < 2
					}
				}
				ag_change_pc = { ag_planet_class = pc_ag_void_star }
				solar_system = { set_star_class = sc_ag_void }
				set_planet_size = 1
				clear_deposits = yes
			}
			solar_system = {
				set_star_flag = ag_gamma_station_in_system
				every_system_planet = {
					limit = {
						exists = owner
						owner = { NOT = { is_same_value = from } }
					}
					add_modifier = {
						modifier = "ag_ancient_gamma_station_in_system"
						days = -1
					}
				}
			}
		}
		if = {
			limit = {
				from = {
					NOT = {
						has_country_flag = ag_gamma_ships_unlocked
					}
				}
			}
			fromfrom.planet = {
				ag_spawn_explosion_effect = { ag_scale = xl ag_color = blue }
			}
		}
		else = {
			fromfrom.planet = {
				ag_spawn_explosion_effect = { ag_scale = xl ag_color = red }
			}
		}
		from = {
			country_event = { id = ag_gamma.93 }
			country_event = { id = ag_ancient_knowledge.26 }
		}
		add_threat = { who = from amount = 50 }
		if = {
			limit = { from = { NOT = { has_country_flag = ag_gamma_ships_unlocked } } }
			ag_gamma_station_player_spawn = {
				ag_unlock_ship = no
				ag_owner = from
				ag_location_target = fromfrom
			}
		}
		else = {
			ag_gamma_station_player_spawn = {
				ag_unlock_ship = yes
				ag_owner = from
				ag_location_target = fromfrom
			}
		}
		from = {
			every_owned_starbase = {
				limit = {
					has_starbase_size = ag_gamma_station_1
					NAND = {
						has_starbase_building = titan_yards
						has_starbase_building = colossus_yards
					}
				}
				if = {
					limit = { NOT = { has_starbase_building = titan_yards } }
					set_starbase_building = {
						slot = 1
						building = titan_yards
					}
				}
				if = {
					limit = { NOT = { has_starbase_building = colossus_yards } }
					set_starbase_building = {
						slot = 2
						building = colossus_yards
					}
				}
			}
		}
		remove_megastructure = fromfrom
		every_country = {
			limit = { NOT = { is_same_value = from } }
			country_event = { id = ag_gamma.95 }
		}
	}

	construction_blocks_and_blocked_by = self_type
	
	
	ai_weight = {
		weight = 1000
	}

}

ag_gamma_titan_megastructure_0 = {
	entity = "construction_platform_entity"
	construction_entity = "construction_platform_entity"
	portrait = "GFX_megastructure_construction_background"
	
	place_entity_on_planet_plane = no
	show_galactic_map_icon = yes
	show_in_outliner = yes
	
	build_time = @ag_gamma_titan_megastructure_0_buildtime
	
	upgrade_desc = hide
	
	entity_offset = { x = 0 y = 0 }
	
	resources = {
		category = megastructures
		cost = {
			alloys = @ag_gamma_titan_megastructure_0_cost_alloys
			influence = @ag_gamma_titan_megastructure_0_cost_influence
		}
		upkeep = {
			energy = @ag_gamma_titan_megastructure_0_upkeep_energy
		}
		
	}
	
	potential = {
		has_relic = ag_gamma_crisis_relic
		has_country_flag = ag_gamma_crisis_relic_actived
	}
	
	possible = {
		custom_tooltip = {
			fail_text = "requires_inside_border"
			is_inside_border = from
		}		
		custom_tooltip = {
			fail_text = "requires_surveyed_system"
			NOT = {
				any_system_planet = {
					is_surveyed = {
						who = prev.from
						status = no
					}
				}
			}
		}
		custom_tooltip = {
			fail_text = "ag_requires_no_existing_gamma_titan"
			from = {
				NOR = {
					any_controlled_ship = {
						OR = {
							is_ship_size = ag_gamma_titan_0
							is_ship_size = ag_gamma_titan_1
						}
					}
					any_owned_megastructure = {
						OR = {
							is_megastructure_type = ag_gamma_titan_megastructure_0
							is_megastructure_type = ag_gamma_titan_megastructure_1
						}
					}
					has_special_project = ag_structural_protection_system_304
				}
			}
		}
		# custom_tooltip = {
		# 	fail_text = "ag_requires_usable_ancient_construction_section"
		# 	NOT = {
		# 		any_system_planet = {
		# 			has_planet_flag = ag_using_ancient_construction_section_system
		# 		}
		# 	}
		# }
	}
	
	placement_rules = {
		planet_possible = {
			ag_is_construction_section = yes
			custom_tooltip = {
				fail_text = "ag_requires_usable_ancient_construction_section"
				NOT = {
					has_planet_flag = has_megastructure
				}
			}
		}
	}
	
	on_build_start = {
	}
	on_build_cancel = {
	}
	on_build_complete = {
		fromfrom.planet = {
			set_planet_flag = has_megastructure
		}
		from = {
			country_event = { id = ag_gamma.151 }
			country_event = { id = ag_ancient_knowledge.26 }
		}
		every_country = {
			limit = { NOT = { is_same_value = from } }
			country_event = { id = ag_gamma.153 }
		}
	}

	construction_blocks_and_blocked_by = self_type
	
	
	ai_weight = {
		weight = 1000
	}

}
ag_gamma_titan_megastructure_1 = {
	entity = "ag_gamma_titan_unanimated_hull_entity"
	construction_entity = "ag_gamma_titan_unanimated_hull_entity"
	portrait = "GFX_megastructure_construction_background"
	
	place_entity_on_planet_plane = no
	show_galactic_map_icon = yes
	show_in_outliner = yes
	
	build_time = @ag_gamma_titan_megastructure_1_buildtime
	
	upgrade_desc = hide
	
	entity_offset = { x = @entity_x y = @entity_y }
	
	upgrade_from = {
		ag_gamma_titan_megastructure_0
	}
	
	resources = {
		category = megastructures
		cost = {
			sr_living_metal = @ag_gamma_titan_megastructure_1_cost_sr_living_metal
			nanites = @ag_gamma_titan_megastructure_1_cost_nanites
			sr_dark_matter = @ag_gamma_titan_megastructure_1_cost_sr_dark_matter
		}
		upkeep = { energy = @ag_gamma_titan_megastructure_1_upkeep_energy }
	}
	
	potential = {
		has_relic = ag_gamma_crisis_relic
		has_country_flag = ag_gamma_crisis_relic_actived
	}
	
	possible = {
		custom_tooltip = {
			fail_text = "ag_requires_no_existing_gamma_titan"
			from = {
				NOR = {
					any_controlled_ship = {
						OR = {
							is_ship_size = ag_gamma_titan_0
							is_ship_size = ag_gamma_titan_1
						}
					}
					any_owned_megastructure = { is_megastructure_type = ag_gamma_titan_megastructure_1 }
					has_special_project = ag_structural_protection_system_304
				}
			}
		}
		# custom_tooltip = {
		# 	fail_text = "ag_requires_usable_ancient_construction_section"
		# 	NOT = {
		# 		any_system_planet = {
		# 			has_planet_flag = ag_using_ancient_construction_section_system
		# 		}
		# 	}
		# }
	}
	
	placement_rules = {
	}
	
	on_build_start = {}
	on_build_cancel = {}
	on_build_complete = {
		from = { if = { limit = { is_ai = yes } country_event = { id = ag_gamma.101 days = 3600 random = 1800 } } }
		fromfrom.planet = {
			remove_planet_flag = has_megastructure
		}
		from = {
			country_event = { id = ag_gamma.152 }
			country_event = { id = ag_ancient_knowledge.26 }
		}
		add_threat = {
			who = from
			amount = 50
		}
		if = {
			limit = { from = { NOT = { has_country_flag = ag_gamma_ships_unlocked } } }
			ag_gamma_titan_player_spawn = {
				ag_unlock_ship = no
				ag_owner = from
				ag_location_target = fromfrom
			}
		}
		else = {
			ag_gamma_titan_player_spawn = {
				ag_unlock_ship = yes
				ag_owner = from
				ag_location_target = fromfrom
			}
		}
		every_country = {
			limit = { NOT = { is_same_value = from } }
			country_event = { id = ag_gamma.154 }
		}
		remove_megastructure = fromfrom
	}

	construction_blocks_and_blocked_by = self_type
	
	
	ai_weight = {
		weight = 1000
	}

}

ag_gamma_battlecruiser_megastructure = {
	entity = "ag_void_entity"
	construction_entity = "ag_void_entity"
	portrait = "GFX_megastructure_construction_background"
	
	place_entity_on_planet_plane = no
	show_galactic_map_icon = no
	show_in_outliner = no
	
	build_time = @ag_gamma_battlecruiser_megastructure_2x_buildtime
	
	upgrade_desc = hide
	
	entity_offset = { x = 0 y = 0 }
	
	resources = {
		category = megastructures
		cost = {
			sr_living_metal = @ag_gamma_battlecruiser_megastructure_2x_cost_sr_living_metal
			nanites = @ag_gamma_battlecruiser_megastructure_2x_cost_nanites
			sr_dark_matter = @ag_gamma_battlecruiser_megastructure_2x_cost_sr_dark_matter
		}
		cost = {
			trigger = { owner = { NOT = { has_country_flag = ag_ship_subsystem_enabled_302_13 } } }
			sr_living_metal = @ag_gamma_battlecruiser_megastructure_2x_extra_cost_sr_living_metal
			nanites = @ag_gamma_battlecruiser_megastructure_2x_extra_cost_nanites
			sr_dark_matter = @ag_gamma_battlecruiser_megastructure_2x_extra_cost_sr_dark_matter
		}
	}
	
	potential = {
		NOT = { has_global_flag = ag_ancient_empire_mod_shipyard_building }
		has_relic = ag_gamma_crisis_relic
		has_country_flag = ag_gamma_crisis_relic_actived
	}
	
	possible = {
		custom_tooltip = {
			fail_text = "requires_inside_border"
			is_inside_border = from
		}		
		custom_tooltip = {
			fail_text = "requires_surveyed_system"
			NOT = {
				any_system_planet = {
					is_surveyed = {
						who = prev.from
						status = no
					}
				}
			}
		}
		# custom_tooltip = {
		# 	fail_text = "ag_requires_usable_ancient_construction_section"
		# 	NOT = {
		# 		any_system_planet = {
		# 			has_planet_flag = ag_using_ancient_construction_section_system
		# 		}
		# 	}
		# }
	}
	
	placement_rules = {
		planet_possible = {
			ag_is_construction_section = yes
			custom_tooltip = {
				fail_text = "ag_requires_usable_ancient_construction_section"
				NOT = {
					has_planet_flag = has_megastructure
				}
			}
		}
	}
	
	on_build_start = {
	}
	on_build_cancel = {
	}
	on_build_complete = {
		from = { if = { limit = { is_ai = yes } country_event = { id = ag_gamma.101 days = 3600 random = 1800 } } }
		from = {
			country_event = { id = ag_ancient_knowledge.26 }
		}
		create_message = {
			type = "MEGASTRUCTURE_BUILT"
			localization = "ag_gamma_battlecruiser_built_message_desc"
			days = 30
			target = from
			variable = {
				type = name
				localization = "ag_megastructure_system"
				scope = fromfrom.solar_system
			}
		}
		if = {
			limit = {
				from = {
					NOT = {
						has_country_flag = ag_gamma_ships_unlocked
					}
				}
			}
			create_fleet = {
				name = "NAME_ag_gamma_guardian_fleet"
				settings = {
					spawn_debris = no 
				}
				effect = {
					set_owner = from
					while = {
						count = 2
						create_ship = {
							name = "NAME_ag_gamma_battlecruiser_ship"
							design = "NAME_ag_gamma_battlecruiser_0"
							prefix = no
							effect = {
								set_ship_flag = ag_gamma_battlecruiser_player
								ag_difficulty_bonus = yes
							}
						}
					}
					set_location = {
						target = fromfrom
						distance = 0
						angle = 0
					}
				}
			}
		}
		else = {
			create_fleet = {
				name = "NAME_ag_gamma_guardian_fleet"
				settings = {
					spawn_debris = no 
				}
				effect = {
					set_owner = from
					while = {
						count = 2
						create_ship = {
							name = "NAME_ag_gamma_battlecruiser_ship"
							design = "NAME_ag_gamma_battlecruiser_1"
							prefix = no
							effect = {
								set_ship_flag = ag_gamma_battlecruiser_player
								ag_difficulty_bonus = yes
							}
						}
					}
					set_location = {
						target = fromfrom
						distance = 0
						angle = 0
					}
				}
			}
		}
		remove_megastructure = fromfrom
	}
	construction_blocks_and_blocked_by = self_type
	
	
	ai_weight = {
		weight = 0
	}
}

ag_gamma_escort_megastructure = {
	entity = "ag_void_entity"
	construction_entity = "ag_void_entity"
	portrait = "GFX_megastructure_construction_background"
	
	place_entity_on_planet_plane = no
	show_galactic_map_icon = no
	show_in_outliner = no
	
	build_time = @ag_gamma_escort_megastructure_4x_buildtime
	
	upgrade_desc = hide
	
	entity_offset = { x = 0 y = 0 }
	
	resources = {
		category = megastructures
		cost = {
			sr_living_metal = @ag_gamma_escort_megastructure_4x_cost_sr_living_metal
			nanites = @ag_gamma_escort_megastructure_4x_cost_nanites
			sr_dark_matter = @ag_gamma_escort_megastructure_4x_cost_sr_dark_matter
		}
		cost = {
			trigger = { owner = { NOT = { has_country_flag = ag_ship_subsystem_enabled_302_13 } } }
			sr_living_metal = @ag_gamma_escort_megastructure_4x_extra_cost_sr_living_metal
			nanites = @ag_gamma_escort_megastructure_4x_extra_cost_nanites
			sr_dark_matter = @ag_gamma_escort_megastructure_4x_extra_cost_sr_dark_matter
		}
	}
	
	potential = {
		NOT = { has_global_flag = ag_ancient_empire_mod_shipyard_building }
		has_relic = ag_gamma_crisis_relic
		has_country_flag = ag_gamma_crisis_relic_actived
	}
	
	possible = {
		custom_tooltip = {
			fail_text = "requires_inside_border"
			is_inside_border = from
		}		
		custom_tooltip = {
			fail_text = "requires_surveyed_system"
			NOT = {
				any_system_planet = {
					is_surveyed = {
						who = prev.from
						status = no
					}
				}
			}
		}
		# custom_tooltip = {
		# 	fail_text = "ag_requires_usable_ancient_construction_section"
		# 	NOT = {
		# 		any_system_planet = {
		# 			has_planet_flag = ag_using_ancient_construction_section_system
		# 		}
		# 	}
		# }
	}
	
	placement_rules = {
		planet_possible = {
			ag_is_construction_section = yes
			custom_tooltip = {
				fail_text = "ag_requires_usable_ancient_construction_section"
				NOT = {
					has_planet_flag = has_megastructure
				}
			}
		}
	}
	
	on_build_start = {
	}
	on_build_cancel = {
	}
	on_build_complete = {
		from = { if = { limit = { is_ai = yes } country_event = { id = ag_gamma.101 days = 3600 random = 1800 } } }
		from = {
			country_event = { id = ag_ancient_knowledge.26 }
		}
		create_message = {
			type = "MEGASTRUCTURE_BUILT"
			localization = "ag_gamma_escort_built_message_desc"
			days = 30
			target = from
			variable = {
				type = name
				localization = "ag_megastructure_system"
				scope = fromfrom.solar_system
			}
		}
		if = {
			limit = {
				from = {
					NOT = {
						has_country_flag = ag_gamma_ships_unlocked
					}
				}
			}
			create_fleet = {
				name = "NAME_ag_gamma_guardian_fleet"
				settings = {
					spawn_debris = no 
				}
				effect = {
					set_owner = from
					while = {
						count = 4
						create_ship = {
							name = "NAME_ag_gamma_escort_ship"
							design = "NAME_ag_gamma_escort_0"
							prefix = no
							effect = {
								set_ship_flag = ag_gamma_escort_player
								ag_difficulty_bonus = yes
							}
						}
					}
					set_location = {
						target = fromfrom
						distance = 0
						angle = 0
					}
				}
			}
		}
		else = {
			create_fleet = {
				name = "NAME_ag_gamma_guardian_fleet"
				settings = {
					spawn_debris = no 
				}
				effect = {
					set_owner = from
					while = {
						count = 4
						create_ship = {
							name = "NAME_ag_gamma_escort_ship"
							design = "NAME_ag_gamma_escort_1"
							prefix = no
							effect = {
								set_ship_flag = ag_gamma_escort_player
								ag_difficulty_bonus = yes
							}
						}
					}
					set_location = {
						target = fromfrom
						distance = 0
						angle = 0
					}
				}
			}
		}
		remove_megastructure = fromfrom
	}
	construction_blocks_and_blocked_by = self_type
	
	
	ai_weight = {
		weight = 0
	}
}