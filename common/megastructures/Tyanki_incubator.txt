Tyanki_incubator_0 = {
	entity = "construction_platform_entity"
	construction_entity = "construction_platform_entity"
	portrait = "GFX_megastructure_construction_background"
	place_entity_on_planet_plane = no
	prerequisites = {
		Tyanki_incubation
	}
	build_time = 2000
	resources = {
		category = megastructures
		cost = {
			alloys = 5000
			influence = 100
			food = 5000
		}
		upkeep = {
			energy = 10
			food = 15
		}
	}
	potential = {
		OR = {
			is_galactic_emperor = yes
			AND = {
				is_galactic_custodian = yes
				has_global_flag = grand_custodianship_declared
			}
		}
		has_technology = Tyanki_incubation
		NOT = {
			has_global_flag = Incubator_started
		}
	
		}
	possible = {
		custom_tooltip = {
			fail_text = "requires_inside_border"
			is_inside_border = from
		}
		custom_tooltip = {
			fail_text = "There must be no other Incubator"
			NOT = {
				has_global_flag = Incubator_started
			}
	}
}
	placement_rules = {
		planet_possible = {
			custom_tooltip = {
				fail_text = "must be built above barren or cold barren world"
				OR = {
					is_planet_class = pc_barren
					is_planet_class = pc_barren_cold
				}
				
			}
			custom_tooltip = {
				fail_text = "There must be no other Incubator"
				NOT = {
					has_global_flag = Incubator_started
				}
				custom_tooltip = {
					fail_text = "requires_no_existing_megastructure"
					has_any_megastructure = no
				}
			}
		}
	}
	on_build_complete = {
		from = {
			set_global_flag = Incubator_started
		}
	}
}

Tyanki_incubator_1 = {
	entity = "automated_stripmine_1_part_big_entity"
	construction_entity = "automated_stripmine_1_part_big_entity"
	portrait = "GFX_megastructure_matter_decompressor_background"
	place_entity_on_planet_plane = yes
	upgrade_from = {
		Tyanki_incubator_0
	}
	build_time = 1800
	resources = {
		category = megastructures
		cost = {
			energy = 2000
			exotic_gases = 500
			alloys = 5000
		}
		upkeep = {
			energy = 40
			alloys = 10
			food = 50
		}
		produces = {
			society_research = 50
			unity = 100
			consumer_goods = 25
			minerals = 80
		}
	}
	on_build_complete = {
		fromfrom.planet = {
			change_pc = pc_infested
		}
		from = {
			country_event = {
				id = Incubator.0001
			}
			# Notification
			set_global_flag = Incubator_exists
		}
	}
}

Tyanki_incubator_2 = {
	entity = "automated_stripmine_1_part_big_entity"
	construction_entity = "automated_stripmine_1_part_big_entity"
	portrait = "GFX_megastructure_matter_decompressor_background"
	place_entity_on_planet_plane = yes
	prerequisites = {
		Tyanki_incubation_2
	}
	upgrade_from = {
		Tyanki_incubator_1
	}
	build_time = 1800
	resources = {
		category = megastructures
		cost = {
			minerals = 8000
			alloys = 2000
			food = 8000
		}
		upkeep = {
			energy = 90
			alloys = 30
			food = 90
			exotic_gases = 5
		}
		produces = {
			society_research = 100
			unity = 125
			consumer_goods = 40
			minerals = 70
		}
	}
	on_build_complete = {
		from = {
			country_event = {
				id = Incubator.1000
			}
			# Create Big Tyanki lady
		}
	}
}
