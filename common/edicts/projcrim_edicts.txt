@Edict1Cost = 10
@Edict2Cost = 20
@Edict3Cost = 30

@EdictDuration = 3600
@EdictDuration2 = 5000
@EdictPerpetual = -1
@campaignCost = 15

nationwide_lockdown_projcrim = {
	length = 0
	icon = "GFX_edict_type_policy"

	resources = {
		category = edicts
		cost = {
			unity = 100
			multiplier = value:edict_size_effect
		}
	}

	effect = {
		custom_tooltip = projcrim_lockdown_effect
		hidden_effect = {
			set_country_flag = lockdown_edict_active
			every_owned_planet = {
				limit = {
					NOT = { has_modifier = projcrim_lockdown }
				}
				add_modifier = {
					modifier = projcrim_lockdown
				}
				set_planet_flag = projcrim_lockdown_active
			}
		}
	}

	potential = {
		has_event_chain = projcrim_main_chain
		NOR = {
			has_country_flag = lockdown_edict_active
			has_country_flag = projcrim_plague_cured
		}
	}

	ai_weight = {
		weight = 2
		modifier = {
			weight = @EdictHighPrio
			has_resource = { type = unity amount > 2000 }
		}
		modifier = {
			weight = 0
			count_owned_planet  = {
				count = all
				limit = {
					has_modifier = projcrim_lockdown
				}
			}
		}
	}
}

nationwide_remove_lockdown_projcrim = {
	length = 0
	icon = "GFX_edict_type_policy"

	resources = {
		category = edicts
		cost = {
			unity = @Edict2Cost
			multiplier = value:edict_size_effect
		}
	}

	effect = {
		custom_tooltip = projcrim_lockdown_undo
		hidden_effect = {
			remove_country_flag = lockdown_edict_active
			every_owned_planet = {
				remove_modifier = projcrim_lockdown
				remove_planet_flag = projcrim_lockdown_active
			}
		}
	}

	potential = {
		has_event_chain = projcrim_main_chain
		has_country_flag = lockdown_edict_active
		NOT = { has_country_flag = projcrim_plague_cured }
	}

	ai_weight = {
		weight = 1
	}
}

cure_remaining_infected_projcrim = {
	length = 180
	icon = "GFX_edict_type_time"

	resources = {
		category = edicts
		cost = {
			unity = @Edict1Cost
			multiplier = value:edict_size_effect
		}
	}
	effect = {
		custom_tooltip = projcrim_pops_cured
		hidden_effect = {
			set_variable = {
				which = projcrim_pops_changed
				value = value:projcrim_afflicted_pops_local_variable
			}
			every_owned_planet = {
				limit = {
					controller = {
						NOT = { is_country_type = throng_country }
					}
				}
				remove_modifier = projcrim_initial_crime_1
				remove_modifier = projcrim_initial_crime_2
				remove_modifier = projcrim_initial_crime_3
				remove_modifier = projcrim_pop_unrest
				remove_modifier = projcrim_lockdown
				remove_modifier = projcrim_upset_pops
				remove_deposit = d_projcrim_containment
			}
			# add_event_chain_counter = {
			# 	event_chain = projcrim_main_chain
			# 	counter = afflicted_pops_national
			# 	amount = projcrim_afflicted_pops_local_variable2
			# }
			
			every_playable_country = {
				limit = { has_event_chain = "projcrim_main_chain" }
				set_variable = {
					which = projcrim_pops_changed2
					value = value:projcrim_afflicted_pops_local_variable2
				}
				add_event_chain_counter = {
					event_chain = projcrim_main_chain
					counter = afflicted_pops_galaxy
					amount = projcrim_pops_changed2
				}
			}

			every_owned_species	= {
				limit = {
					OR = {
						has_trait = trait_crimson_infected
						has_species_flag = crimson_infected_species
					}
				}
				change_species_characteristics = {
					remove_trait = trait_crimson_infected
					add_trait = trait_crimson_recovered
				}
			}
		}
	}

	potential = {
		has_country_flag = projcrim_plague_cured
		any_owned_pop = {
			pop_has_trait = trait_crimson_infected
		}
	}

	ai_weight = {
		weight = 100
	}
}