
diplomatic_stance = {
	potential = {
		OR = {
			is_country_type = default
			is_country_type = fallen_empire
			is_country_type = awakened_fallen_empire
			is_country_type = primitive
			is_country_type = awakened_marauders
		}
	}

	allow = {
		is_at_war = no # Not allowed to change policies in this group while at war
	}

	option = {
		name = "diplo_stance_belligerent"
		icon = "GFX_diplomatic_stance_belligerent"

		in_breach_of = {
			{
				key = resolution_prime_directive
			}

			{
				key = resolution_galactic_cooperation_initiative
			}
		}

		potential = {
			OR = {
				is_country_type = default
				is_country_type = awakened_fallen_empire
			}
		}

		valid = {
			NOT = { has_valid_civic = civic_inwards_perfection }
			is_homicidal = no # They have their own variants of this
		}

		policy_flags = {
			diplo_stance_belligerent
		}

		modifier = {
			country_war_exhaustion_mult = -0.1
			country_naval_cap_mult = 0.1
			country_claim_influence_cost_mult = -0.1
		}

		ai_weight = {
			weight = 10

			modifier = {
				factor = 0
				NOT = { has_country_flag = has_encountered_other_empire }
			}

			# Pacifists
			modifier = { # Fanatic Pacifists will *only* go belligerent if there's a rival neighbor...
				factor = 0
				has_ethic = ethic_fanatic_pacifist
				NOT = {
					any_neighbor_country = {
						is_rival = root
					}
				}
			}
			modifier = { # Regular Pacifists have only a small chance to go belligerent unless there's a rival neighbor...
				factor = 0.5
				has_ethic = ethic_pacifist
				NOT = {
					any_neighbor_country = {
						is_rival = root
					}
				}
			}
			modifier = {
				factor = 0.5 # ...but they're still less likely to.
				is_pacifist = yes
			}
			modifier = {
				factor = 0.1
				is_galactic_community_member = yes
				OR = {
					is_active_resolution = "resolution_prime_directive"
					is_active_resolution = "resolution_galactic_cooperation_initiative"
				}
			}

			# Angry people like to be belligerent
			modifier = {
				factor = 2.0
				has_ethic = ethic_fanatic_militarist
			}
			modifier = {
				factor = 1.5
				has_ethic = ethic_militarist
			}
			modifier = {
				factor = 1.5
				has_ethic = ethic_fanatic_authoritarian
			}
			modifier = {
				factor = 1.25
				has_ethic = ethic_authoritarian
			}
			modifier = {
				factor = 5.0 # Intentionally high value for despoilers/Nihilistic Acquisition
				is_slaver = yes
			}
			modifier = {
				factor = 1.5
				has_valid_civic = civic_nationalistic_zeal
			}
			modifier = {
				factor = 1.5
				OR = {
					has_valid_civic = civic_hive_strength_of_legions
					has_valid_civic = civic_machine_warbots
					has_valid_civic = civic_private_military_companies
					has_valid_civic = civic_warrior_culture
				}
			}

			modifier = {
				factor = 2.2
				has_civic = civic_crusader_spirit
			}

			modifier = {
				factor = 1.5
				has_ai_personality_behaviour = conqueror
			}
			modifier = {
				factor = 1.5
				has_ai_personality_behaviour = subjugator
			}

			modifier = {
				factor = 3.0 # Blocked in propagators get ANGRY
				has_ai_expansion_plan = no
				has_ai_personality_behaviour = propagator
			}
		}
	}

	option = {
		name = "diplo_stance_cooperative"
		icon = "GFX_diplomatic_stance_cooperative"

		in_breach_of = {
			{
				key = resolution_justified_suspicion
			}

			{
				key = resolution_national_purity
			}
			
			{
				key = resolution_cooperation_discouraged
			}

			{
				key = resolution_closed_society
			}

		}

		potential = {
			OR = {
				is_country_type = default
				is_country_type = awakened_fallen_empire
			}
		}

		valid = {
			NOT = { has_valid_civic = civic_inwards_perfection }
			is_unfriendly = no # Not homicidal or barbaric despoilers
		}

		policy_flags = {
			diplo_stance_cooperative
		}

		modifier = {
			diplo_weight_mult = 0.25
			envoy_improve_relations_mult = 0.5
			country_border_friction_mult = -0.5
			operations_cost_mult = 0.25
			operations_upkeep_mult = 0.25
		}

		ai_weight = {
			weight = 10

			modifier = {
				factor = 0.1
				is_galactic_community_member = yes
				OR = {
					is_active_resolution = "resolution_justified_suspicion"
					is_active_resolution = "resolution_national_purity"
					is_active_resolution = "resolution_cooperation_discouraged"
					is_active_resolution = "resolution_closed_society"
				}
			}

			modifier = {
				factor = 0.01
				has_ascension_perk = ap_become_the_crisis
			}

			modifier = {
				factor = 0
				NOT = { has_country_flag = has_encountered_other_empire }
			}

			# Tons of Ethics modifiers!
			# Cranky people:
			modifier = {
				factor = 0
				has_ethic = ethic_fanatic_xenophobe
			}
			modifier = {
				factor = 0.1
				has_ethic = ethic_xenophobe
			}
			modifier = {
				factor = 0.5
				has_ethic = ethic_fanatic_authoritarian
			}
			modifier = {
				factor = 0.75
				has_ethic = ethic_authoritarian
			}

			# Nice people:
			modifier = {
				factor = 2.0
				has_ethic = ethic_fanatic_xenophile
			}
			modifier = {
				factor = 1.5
				has_ethic = ethic_xenophile
			}
			modifier = {
				factor = 1.3
				has_valid_civic = civic_machine_exploration_protocol
			}
			modifier = {
				factor = 1.3
				has_ethic = ethic_fanatic_pacifist
			}
			modifier = {
				factor = 1.15
				has_ethic = ethic_pacifist
			}
			modifier = {
				factor = 1.3
				has_ethic = ethic_fanatic_egalitarian
			}
			modifier = {
				factor = 1.15
				has_ethic = ethic_egalitarian
			}
			modifier = {
				factor = 1.1
				has_ethic = ethic_fanatic_materialist
			}
			modifier = {
				factor = 1.05
				has_ethic = ethic_materialist
			}

			modifier = {
				factor = 1.25
				has_ai_personality_behaviour = multispecies
			}

			modifier = {
				factor = 3.0
				has_ai_personality = federation_builders
			}
		}
	}

	option = {
		name = "diplo_stance_isolationist"
		icon = "GFX_diplomatic_stance_isolationist"

		in_breach_of = {
			{
				key = resolution_galactic_cooperation_initiative
			}
		}

		potential = {
			OR = {
				is_country_type = default
				is_country_type = awakened_fallen_empire
			}
		}

		valid = {
			is_megacorp = no # "NO! YOU CAN'T BUY OUR STUFF!" makes the shareholders sad
			is_homicidal = no # Homicidal variants below
		}

		policy_flags = {
			diplo_stance_isolationist
		}

		modifier = {
			country_unity_produces_mult = 0.10
			diplo_weight_mult = -0.50
			diplomacy_upkeep_mult = 1
			pop_government_ethic_attraction = 0.25
			country_border_friction_mult = 2.0
		}

		on_enabled = {
		}

		ai_weight = {
			weight = 10

			modifier = {
				factor = 0.1
				is_galactic_community_member = yes
				is_active_resolution = "resolution_galactic_cooperation_initiative"
			}

			modifier = {
				factor = 0.01
				has_ascension_perk = ap_become_the_crisis
			}

			modifier = {
				factor = 0.25 # Let the isolationists start in this if they want
				NOT = { has_country_flag = has_encountered_other_empire }
			}

			modifier = {
				factor = 0
				OR = {
					has_ai_personality = federation_builders
					has_ai_personality = fanatic_befrienders
				}
			}

			modifier = {
				factor = 100.0 # Inwards Perfection should almost always go isolationist
				has_valid_civic = civic_inwards_perfection
			}

			modifier = {
				factor = 3.0
				has_ai_personality_behaviour = isolationist
			}

			modifier = {
				factor = 2.0
				is_xenophobe = yes
				is_militarist = no
				is_authoritarian = no
			}
		}
	}

	option = {
		name = "diplo_stance_expansionist"
		icon = "GFX_diplomatic_stance_expansionist"

		in_breach_of = {
			{
				key = resolution_cooperation_discouraged
			}

			{
				key = resolution_closed_society
			}

			{
				key = resolution_galactic_cooperation_initiative
			}
		}

		potential = {
			OR = {
				is_country_type = default
				is_country_type = awakened_fallen_empire
			}
		}

		valid = {
			is_homicidal = no
		}

		policy_flags = {
			diplo_stance_expansionist
		}

		modifier = {
			starbase_outpost_cost_mult = -0.10
			planet_colony_development_speed_mult = 0.15
			country_border_friction_mult = 1.0
		}

		ai_weight = {
			weight = 10

			modifier = {
				factor = 0.1
				is_galactic_community_member = yes
				OR = {
					is_active_resolution = "resolution_cooperation_discouraged"
					is_active_resolution = "resolution_closed_society"
					is_active_resolution = "resolution_galactic_cooperation_initiative"
				}
			}

			modifier = {
				factor = 2
				NOT = { has_country_flag = has_encountered_other_empire }
			}

			modifier = {
				factor = 0.01
				has_ascension_perk = ap_become_the_crisis
			}
		}
	}

	option = {
		name = "diplo_stance_mercantile"
		icon = "GFX_diplomatic_stance_mercantile"

		in_breach_of = {
			{
				key = resolution_cooperation_discouraged
			}

			{
				key = resolution_closed_society
			}

		}

		potential = {
			OR = {
				is_country_type = default
				is_country_type = awakened_fallen_empire
			}
			is_gestalt = no
		}

		valid = {
			NOT = { has_valid_civic = civic_inwards_perfection }
			is_homicidal = no
			# some ugliness to preserve the
			# auth/civic - potential/valid divide for tooltip
			if = {
				limit = {
					has_megacorp = yes
					is_megacorp = yes
				}
				is_megacorp = yes
			}
			else_if = {
				limit = { has_megacorp = yes }
				has_civic = civic_merchant_guilds
			}
			else = { has_civic = civic_corporate_dominion }
		}

		policy_flags = {
			diplo_stance_mercantile
		}

		modifier = {
			diplo_weight_economy_mult = 0.25
			trade_value_mult = 0.1
			local_trade_protection_add = 5
		}

		ai_weight = {
			weight = 10

			modifier = {
				factor = 0.1
				is_galactic_community_member = yes
				OR = {
					is_active_resolution = "resolution_cooperation_discouraged"
					is_active_resolution = "resolution_closed_society"
				}
			}

			modifier = {
				factor = 0.01
				has_ascension_perk = ap_become_the_crisis
			}
			modifier = {
				factor = 3.0
				is_megacorp = yes # Megacorps should generally prefer this diplo stance unless their ethics get them to specialize differently
			}
			modifier = {
				factor = 1.25
				has_valid_civic = civic_free_traders
			}
			modifier = {
				factor = 10
				should_ai_focus_on_trade = yes
			}
			modifier = {
				factor = 0.65
				OR = {
					has_valid_civic = civic_private_prospectors
					has_valid_civic = civic_private_military_companies
				}
			}
		}
	}
	
	option = {
		name = "diplo_stance_supremacist"
		icon = "GFX_diplomatic_stance_supremacy"

		in_breach_of = {
			{
				key = resolution_charter_of_sentient_rights
			}

			{
				key = resolution_stellar_diplomatic_forums
			}

			{
				key = resolution_prime_directive
			}

			{
				key = resolution_galactic_cooperation_initiative
			}
		}

		potential = {
			OR = {
				is_country_type = awakened_fallen_empire
				is_country_type = awakened_marauders
				is_country_type = default
			}
		}
		valid = {
			NOR = {
				has_valid_civic = civic_inwards_perfection
				has_modifier = humiliated
			}
			is_homicidal = no
			custom_tooltip = {
				fail_text = "requires_supremacy_traditions"
				OR = {
					has_tradition = tr_supremacy_finish
					NOT = { is_country_type = default }
				}
			}
			is_subject = no
		}

		policy_flags = {
			diplo_stance_supremacist
		}

		modifier = {
			diplo_weight_naval_mult = 1.00
			country_war_exhaustion_mult = -0.20
			country_naval_cap_mult = 0.20
			country_claim_influence_cost_mult = -0.1
		}

		on_enabled = {
		}

		ai_weight = {
			weight = 10

			modifier = {
				factor = 0.1
				is_galactic_community_member = yes
				OR = {
					is_active_resolution = "resolution_charter_of_sentient_rights"
					is_active_resolution = "resolution_stellar_diplomatic_forums"
					is_active_resolution = "resolution_prime_directive"
					is_active_resolution = "resolution_galactic_cooperation_initiative"
				}
			}

			modifier = {
				factor = 0
				NOT = { has_country_flag = has_encountered_other_empire }
			}

			modifier = {
				factor = 0
				is_pacifist = yes
			}

			modifier = {
				factor = 10
				OR = {
					is_country_type = awakened_fallen_empire
					is_country_type = awakened_marauders
				}
			}

			# Angry people want to be Supreme
			modifier = {
				factor = 2.0
				has_ethic = ethic_fanatic_militarist
			}
			modifier = {
				factor = 2.0
				has_civic = civic_dragons
			}
			modifier = {
				factor = 1.5
				has_ethic = ethic_militarist
			}
			modifier = {
				factor = 1.5
				has_ethic = ethic_fanatic_authoritarian
			}
			modifier = {
				factor = 1.25
				has_ethic = ethic_authoritarian
			}
			modifier = {
				factor = 1.25 # Despoilers/Nihilistic Acquisition intentionally get a higher multiplier for Belligerent than Supremacist
				is_slaver = yes
			}
			modifier = {
				factor = 2
				has_valid_civic = civic_nationalistic_zeal
			}
			modifier = {
				factor = 3
				OR = {
					has_valid_civic = civic_hive_strength_of_legions
					has_valid_civic = civic_machine_warbots
					has_valid_civic = civic_private_military_companies
					has_valid_civic = civic_warrior_culture
				}
			}

			modifier = {
				factor = 1.5
				has_ai_personality_behaviour = conqueror
			}
			modifier = {
				factor = 1.5
				has_ai_personality_behaviour = subjugator
			}

			modifier = { # Don't be suicidal
				factor = 0
				any_relation = {
					has_communications = root
					has_policy_flag = diplo_stance_supremacist
					is_country_type = default
					is_subject = no
					relative_power = {
						who = root
						category = fleet
						value = overwhelming
					}
				}
			}
			modifier = {
				factor = 0.5
				any_neighbor_country = {
					has_communications = root
					is_country_type = default
					is_subject = no
					relative_power = {
						who = root
						category = fleet
						value > equivalent
					}
				}
			}
		}
	}

	option = {
		name = "diplo_stance_hunger"
		icon = "GFX_diplomatic_stance_rest"

		potential = {
			has_authority = auth_hive_mind
		}

		valid = {
			has_valid_civic = civic_hive_devouring_swarm
		}

		policy_flags = {
			diplo_stance_hunger
		}

		modifier = {
		}

		ai_weight = {
			weight = 100
		}
	}

	option = {
		name = "diplo_stance_extermination"
		icon = "GFX_diplomatic_stance_recompiling"

		potential = {
			has_authority = auth_machine_intelligence
		}

		valid = {
			has_valid_civic = civic_machine_terminator
		}

		policy_flags = {
			diplo_stance_extermination
		}

		modifier = {
		}

		ai_weight = {
			weight = 100
		}
	}

	option = {
		name = "diplo_stance_purification"
		icon = "GFX_diplomatic_stance_withdrawn"

		potential = {
			has_utopia = yes
		}

		valid = {
			has_valid_civic = civic_fanatic_purifiers
		}

		policy_flags = {
			diplo_stance_purification
		}

		modifier = {
		}

		ai_weight = {
			weight = 100
		}
	}

	option = {
		name = "diplo_stance_isolationist_fallen_empire"
		icon = "GFX_diplomatic_stance_isolationist"

		potential = {
			is_country_type = fallen_empire
		}

		policy_flags = {
			diplo_stance_isolationist_fallen_empire
		}

		modifier = {
		}

		ai_weight = {
			weight = 100
		}
	}

	option = {
		name = "diplo_stance_ignorant"
		icon = "GFX_diplomatic_stance_isolationist"

		potential = {
			is_country_type = primitive
			current_awareness_level < medium
			capital_scope = {
				NOT = { has_modifier = culture_shock_diplomacy }
			}
		}

		policy_flags = {
			diplo_stance_ignorant
		}

		modifier = {
		}

		ai_weight = {
			weight = 1
		}
	}

	option = {
		name = "diplo_stance_questioning"
		icon = "GFX_diplomatic_stance_expansionist"

		potential = {
			is_country_type = primitive
			current_awareness_level = medium
			capital_scope = {
				NOT = { has_modifier = culture_shock_diplomacy }
			}
		}

		policy_flags = {
			diplo_stance_questioning
		}

		modifier = {
		}

		ai_weight = {
			weight = 1
		}
	}

	option = {
		name = "diplo_stance_eager"
		icon = "GFX_diplomatic_stance_cooperative"

		potential = {
			is_country_type = primitive
			current_awareness_level >= high
			is_xenophile = yes
			capital_scope = {
				NOT = { has_modifier = culture_shock_diplomacy }
			}
		}

		policy_flags = {
			diplo_stance_eager
		}

		modifier = {
		}

		ai_weight = {
			weight = 1
		}
	}

	option = {
		name = "diplo_stance_fearful"
		icon = "GFX_diplomatic_stance_withdrawn"

		potential = {
			is_country_type = primitive
			current_awareness_level >= high
			is_xenophobe = yes
			capital_scope = {
				NOT = { has_modifier = culture_shock_diplomacy }
			}
		}

		policy_flags = {
			diplo_stance_fearful
		}

		modifier = {
		}

		ai_weight = {
			weight = 1
		}
	}

	option = {
		name = "diplo_stance_uncertain"
		icon = "GFX_diplomatic_stance_isolationist"

		potential = {
			is_country_type = primitive
			current_awareness_level >= high
			is_xenophile = no
			is_xenophobe = no
			capital_scope = {
				NOT = { has_modifier = culture_shock_diplomacy }
			}
		}

		policy_flags = {
			diplo_stance_uncertain
		}

		modifier = {
		}

		ai_weight = {
			weight = 1
		}
	}

	option = {
		name = "diplo_stance_culture_shock"
		icon = "GFX_diplomatic_stance_belligerent"

		potential = {
			is_country_type = primitive
			capital_scope = {
				has_modifier = culture_shock_diplomacy
			}
		}

		policy_flags = {
			diplo_stance_culture_shock
		}

		modifier = {
			diplo_action_acceptance_add = -100
		}

		ai_weight = {
			weight = 100
		}
	}
}

war_philosophy = {

	potential = {
		OR = {
			is_country_type = default
			is_country_type = fallen_empire
			is_country_type = awakened_fallen_empire
		}
	}

	allow = {
		is_at_war = no # Not allowed to change policies in this group while at war
	}

	option = {
		name = "unrestricted_wars"

		policy_flags = {
			unrestricted_wars
		}

		in_breach_of = {
			{
				key = resolution_rulesofwar_last_resort_doctrine
			}
			{
				key = resolution_rulesofwar_demobilization_initiative
			}
			{
				key = resolution_rulesofwar_6
			}
		}

		valid = {
			NOR = {
				has_ethic = "ethic_pacifist"
				has_ethic = "ethic_fanatic_pacifist"
				has_valid_civic = "civic_inwards_perfection"
				has_civic = "civic_crusader_spirit"
			}
		}

		AI_weight = {
			modifier = {
				factor = 10
				OR = {
					has_valid_ai_personality = no
					is_ai = no
				}
				NOT = {
					has_ethic = "ethic_pacifist"
					has_ethic = "ethic_fanatic_pacifist"
				}
			}
			modifier = {
				factor = 10
				has_valid_ai_personality = yes
				is_ai = yes
				OR = {
					has_ai_personality_behaviour = conqueror
					has_ai_personality_behaviour = subjugator
					has_ai_personality_behaviour = purger
				}
			}
			modifier = {
				factor = 10
				has_ascension_perk = ap_become_the_crisis
			}
			modifier = {
				factor = 0.1
				is_ai = yes
				is_galactic_community_member = yes
				OR = {
					is_active_resolution = "resolution_rulesofwar_last_resort_doctrine"
					is_active_resolution = "resolution_rulesofwar_demobilization_initiative"
					is_active_resolution = "resolution_rulesofwar_6"
				}
			}
			modifier = {
				factor = 0
				OR = {
					has_ethic = "ethic_pacifist"
					has_ethic = "ethic_fanatic_pacifist"
				}
			}
		}
	}

	option = {
		name = "liberation_wars"

		policy_flags = {
			liberation_wars
		}

		in_breach_of = {
			{
				key = resolution_rulesofwar_6
			}
		}

		potential = {
			NOT = { has_ethic = ethic_gestalt_consciousness }
		}

		valid = {
			NOR = {
				has_ethic = "ethic_fanatic_pacifist"
				has_valid_civic = "civic_fanatic_purifiers"
			}
		}

		on_enabled = {
			hidden_effect = {
				check_casus_belli_valid = {
					type = cb_ideology
				}
			}
		}

		on_disabled = {
			hidden_effect = {
				check_casus_belli_valid = {
					type = cb_ideology
				}
			}
		}

		AI_weight = {
			modifier = {
				factor = 2
				OR = {
					has_valid_ai_personality = no
					is_ai = no
				}
				has_ethic = "ethic_pacifist"
			}
			modifier = {
				factor = 2
				has_valid_ai_personality = yes
				is_ai = yes
				OR = {
					has_ai_personality_behaviour = conqueror
					has_ai_personality_behaviour = subjugator
					has_ai_personality_behaviour = liberator
				}
			}
			modifier = {
				factor = 0.1
				is_galactic_community_member = yes
				is_active_resolution = resolution_rulesofwar_6
			}
		}
	}

	option = {
		name = "no_wars"

		policy_flags = {
			no_wars
		}

		valid = {
			OR = {
				NOR = {
					has_ethic = "ethic_fanatic_militarist"
					has_valid_civic = "civic_fanatic_purifiers"
					has_valid_civic = "civic_hive_devouring_swarm"
					has_valid_civic = "civic_machine_terminator"
					has_civic = "civic_crusader_spirit"
				}
				AND = {
					is_galactic_community_member = yes
					is_active_resolution = resolution_rulesofwar_6
				}
			}
		}

		AI_weight = {
			modifier = {
				factor = 5
				has_ethic = "ethic_fanatic_pacifist"
			}
			modifier = {
				factor = 5
				is_active_resolution = resolution_rulesofwar_6
				is_galactic_community_member = yes
			}
			modifier = {
				factor = 0
				NOR = { 
					has_ethic = "ethic_fanatic_pacifist"
					is_active_resolution = resolution_rulesofwar_6
				}
			}
		}
	}
}

orbital_bombardment = {

	potential = {
		OR = {
			is_country_type = default
			is_country_type = vol
		}
	}

	option = {
		name = "orbital_bombardment_selective"
		policy_flags = {
			orbital_bombardment_selective
		}

		AI_weight = {
			modifier = {
				factor = 0
				NOR = {
					has_ethic = "ethic_pacifist"
					has_ethic = "ethic_fanatic_pacifist"
				}
				NOT = {
					is_galactic_community_member = yes
					OR = {
						is_active_resolution = "resolution_rulesofwar_independent_tribunals"
						is_active_resolution = "resolution_rulesofwar_last_resort_doctrine"
						is_active_resolution = "resolution_rulesofwar_demobilization_initiative"
					}
				}
			}
		}
	}
	option = {
		name = "orbital_bombardment_indiscriminate"

		in_breach_of = {
			{
				key = resolution_rulesofwar_independent_tribunals
			}
			{
				key = resolution_rulesofwar_last_resort_doctrine
			}
			{
				key = resolution_rulesofwar_demobilization_initiative
			}
			{
				key = resolution_rulesofwar_6
			}
		}

		policy_flags = {
			orbital_bombardment_indiscriminate
		}
		modifier = {}

		valid = {
			NOR = {
				has_ethic = "ethic_pacifist"
				has_ethic = "ethic_fanatic_pacifist"
			}
		}
		AI_weight = {
			modifier = {
				factor = 0.1
				is_galactic_community_member = yes
				OR = {
					is_active_resolution = "resolution_rulesofwar_independent_tribunals"
					is_active_resolution = "resolution_rulesofwar_last_resort_doctrine"
					is_active_resolution = "resolution_rulesofwar_demobilization_initiative"
					is_active_resolution = "resolution_rulesofwar_6"
				}
			}
			modifier = {
				factor = 5
				is_militarist = yes
				NOR = {
					is_active_resolution = "resolution_rulesofwar_independent_tribunals"
					is_active_resolution = "resolution_rulesofwar_last_resort_doctrine"
					is_active_resolution = "resolution_rulesofwar_demobilization_initiative"
					is_active_resolution = "resolution_rulesofwar_6"
				}
			}
		}
	}
	option = {
		name = "orbital_bombardment_armageddon"

		in_breach_of = {
			{
				key = resolution_rulesofwar_independent_tribunals
			}
			{
				key = resolution_rulesofwar_last_resort_doctrine
			}
			{
				key = resolution_rulesofwar_demobilization_initiative
			}
			{
				key = resolution_rulesofwar_6
			}
		}

		potential = {
			OR = {
				has_valid_civic = civic_fanatic_purifiers
				has_valid_civic = civic_machine_terminator
			}
		}

		policy_flags = {
			orbital_bombardment_armageddon
		}
		modifier = {}

		AI_weight = {
			modifier = {
				factor = 10
				OR = {
					has_valid_civic = civic_fanatic_purifiers
					has_valid_civic = civic_machine_terminator
				}
			}
			modifier = {
				factor = 10
				has_ascension_perk = ap_become_the_crisis
			}
		}
	}
}

interference = {

	potential = {
		has_met_primitives = yes
	}

	option = {
		name = "interference_not_allowed"

		policy_flags = {
			interference_not_allowed
		}

		on_enabled = {
			hidden_effect = { 
				set_country_flag = encountered_first_primitive
			}
		}

		in_breach_of = {
			{
				key = resolution_galacticstudies_advanced_xenostudies
			}
			{
				key = resolution_pre_ftl_stances_equal_standing
			}
			{
				key = resolution_pre_ftl_stances_exploitation
			}
		}

		valid = {
			OR = {
				custom_tooltip = {
					text = is_a_signatory_vassal
					any_agreement = { agreement_preset = preset_signatory }
				}
				is_active_resolution = resolution_pre_ftl_stances_non_interference
				NOR = {
					has_ethic = "ethic_fanatic_xenophobe"
					has_valid_civic = "civic_fanatic_purifiers"
					has_valid_civic = "civic_hive_devouring_swarm"
					has_valid_civic = "civic_machine_terminator"
				}
			}
		}

		AI_weight = {
			modifier = {
				factor = 0.1
				is_galactic_community_member = yes
				OR = {
					is_active_resolution = "resolution_galacticstudies_advanced_xenostudies"
					is_active_resolution = "resolution_galacticstudies_ethical_guideline_refactoring"
					is_active_resolution = "resolution_galacticstudies_extradimensional_experimentation"
					is_active_resolution = "resolution_pre_ftl_stances_equal_standing"
					is_active_resolution = "resolution_pre_ftl_stances_exploitation"
				}
			}
		}
	}

	option = {
		name = "interference_subtle"

		policy_flags = {
			interference_subtle
		}

		on_enabled = {
			hidden_effect = { set_country_flag = encountered_first_primitive }
		}

		valid = {
			OR = {
				custom_tooltip = {
					text = is_a_signatory_vassal
					any_agreement = { agreement_preset = preset_signatory }
				}
				NOR = {
					has_ethic = "ethic_fanatic_xenophobe"
					has_valid_civic = "civic_fanatic_purifiers"
					has_valid_civic = "civic_hive_devouring_swarm"
					has_valid_civic = "civic_machine_terminator"
				}
			}
		}

		AI_weight = {
			modifier = {
				factor = 2
				has_valid_ai_personality = yes
				has_ai_personality_behaviour = infiltrator
			}
			modifier = {
				factor = 0.5
				has_valid_ai_personality = yes
				NOT = {
					has_ai_personality_behaviour = infiltrator
				}
			}
		}
	}

	option = {
		name = "interference_active"

		policy_flags = {
			interference_active
		}
		
		in_breach_of = {
			{
				key = resolution_pre_ftl_stances_non_interference
			}
			{
				key = resolution_prime_directive
			}
			{
				key = resolution_galactic_cooperation_initiative
			}
		}

		on_enabled = {
			hidden_effect = { set_country_flag = encountered_first_primitive }
		}

		valid = {
			NOR = {
				custom_tooltip = {
					text = is_a_signatory_vassal
					any_agreement = { agreement_preset = preset_signatory }
				}
				has_valid_civic = "civic_fanatic_purifiers"
				has_valid_civic = "civic_hive_devouring_swarm"
			}
		}

		AI_weight = {
			modifier = {
				factor = 2
				has_valid_ai_personality = yes
				OR = {
					has_ai_personality_behaviour = infiltrator
					has_ai_personality_behaviour = dominator
				}
			}
			modifier = {
				factor = 0.5
				has_valid_ai_personality = yes
				NOR = {
					has_ai_personality_behaviour = infiltrator
					has_ai_personality_behaviour = dominator
				}
			}
			modifier = {
				factor = 0.1
				is_galactic_community_member = yes
				OR = {
					is_active_resolution = "resolution_galacticstudies_advanced_xenostudies"
					is_active_resolution = "resolution_galacticstudies_ethical_guideline_refactoring"
					is_active_resolution = "resolution_galacticstudies_extradimensional_experimentation"
					is_active_resolution = "resolution_pre_ftl_stances_non_interference"
					is_active_resolution = "resolution_prime_directive"
					is_active_resolution = "resolution_galactic_cooperation_initiative"
				}
			}
		}
	}
	option = {
		name = "interference_aggressive"

		in_breach_of = {
			{
				key = resolution_pre_ftl_stances_non_interference
			}
			{
				key = resolution_pre_ftl_stances_equal_standing
			}
			{
				key = resolution_prime_directive
			}
			{
				key = resolution_galactic_cooperation_initiative
			}
		}

		valid = {
			custom_tooltip = {
				success_text = is_not_a_signatory_vassal_success
				fail_text = is_not_a_signatory_vassal_fail
				NOT = { any_agreement = { agreement_preset = preset_signatory } }
			}
			NOR = {
				has_ethic = "ethic_pacifist"
				has_ethic = "ethic_fanatic_pacifist"
				has_ethic = "ethic_xenophile"
				has_ethic = "ethic_fanatic_xenophile"
				has_valid_civic = civic_machine_exploration_protocol
			}
		}
		on_enabled = {
			hidden_effect = { set_country_flag = encountered_first_primitive }
		}
		policy_flags = {
			interference_aggressive
		}
		modifier = {}
		AI_weight = {
			modifier = {
				factor = 3
				has_valid_ai_personality = yes
				has_ai_personality_behaviour = dominator
			}
			modifier = {
				factor = 0.5
				has_valid_ai_personality = yes
				NOT = {
					has_ai_personality_behaviour = dominator
				}
			}
			modifier = {
				factor = 0.5
				OR = {
					has_ethic = "ethic_pacifist"
					has_ethic = "ethic_fanatic_pacifist"
				}
			}
			modifier = {
				factor = 0.1
				is_galactic_community_member = yes
				OR = {
					is_active_resolution = "resolution_pre_ftl_stances_non_interference"
					is_active_resolution = "resolution_pre_ftl_stances_equal_standing"
					is_active_resolution = "resolution_prime_directive"
					is_active_resolution = "resolution_galactic_cooperation_initiative"
				}
			}
		}
	}
}

resettlement = {
	potential = {
		NOT = { has_ethic = "ethic_gestalt_consciousness" }
	}

	option = {
		name = "resettlement_not_allowed"

		policy_flags = {
			resettlement_not_allowed
		}

		in_breach_of = {
			{
				key = resolution_superior_deference
			}
			{
				key = resolution_a_whiff_of_grapeshot
			}
			{
				key = resolution_let_them_eat_cake
			}
		}

		AI_weight = {
			factor = 2
			modifier = {
				factor = 0.1
				is_galactic_community_member = yes
				OR = {
					is_active_resolution = resolution_superior_deference
					is_active_resolution = resolution_a_whiff_of_grapeshot
					is_active_resolution = resolution_let_them_eat_cake
				}
			}
		}
	}

	option = {
		name = "resettlement_allowed"

		policy_flags = {
			resettlement_allowed
		}

		in_breach_of = {
			{
				key = resolution_greatergood_balance_in_the_middle
			}
			{
				key = resolution_greatergood_universal_prosperity_mandate
			}
			{
				key = resolution_greatergood_6
			}
		}

		modifier = {}

		AI_weight = {
			factor = 10
			modifier = {
				factor = 0.1
				OR = {
					has_ethic = ethic_egalitarian
					has_ethic = ethic_fanatic_egalitarian
				}
			}
			modifier = {
				factor = 0.1
				is_galactic_community_member = yes
				OR = {
					is_active_resolution = resolution_greatergood_balance_in_the_middle
					is_active_resolution = resolution_greatergood_universal_prosperity_mandate
					is_active_resolution = resolution_greatergood_6
				}
			}
		}
	}
}

leader_enhancement = {

	potential = {
		has_technology = tech_selected_lineages
	}

	option = {
		name = "leader_enhancement_natural_selection"

		policy_flags = {
			leader_enhancement_natural_selection
		}

		in_breach_of = {
			{
				key = resolution_galacticstudies_ethical_guideline_refactoring
				trigger = {
					OR = {
						has_technology = tech_selected_lineages
						has_technology = tech_capacity_boosters
					}
				}
			}
			{
				key = resolution_a_whiff_of_grapeshot
			}
			{
				key = resolution_let_them_eat_cake
			}
		}

		on_enabled = {
			# custom_tooltip = "policy_allow_slavery_effect_disable"
		}

		modifier = {}

		AI_weight = {
			factor = 1
			modifier = {
				factor = 0.1
				is_galactic_community_member = yes
				OR = {
					is_active_resolution = resolution_galacticstudies_ethical_guideline_refactoring
					is_active_resolution = resolution_a_whiff_of_grapeshot
					is_active_resolution = resolution_let_them_eat_cake
				}
			}
		}
	}

	option = {
		name = "leader_enhancement_selected_lineages"

		policy_flags = {
			leader_enhancement_selected_lineages
		}
		modifier = {
			species_leader_exp_gain = 0.1
			leader_age = 10
			leaders_cost_mult = 0.5
		}

		in_breach_of = {
			{
				key = resolution_galacticstudies_ethical_guideline_refactoring
				trigger = {
					has_technology = tech_capacity_boosters
				}
			}
			{
				key = resolution_greatergood_balance_in_the_middle
			}
			{
				key = resolution_greatergood_universal_prosperity_mandate
			}
			{
				key = resolution_greatergood_6
			}
		}

		valid = {
			NOT = { has_ethic = "ethic_fanatic_egalitarian" }
		}

		AI_weight = {
			factor = 2
			modifier = {
				factor = 0.1
				OR = {
					has_ethic = "ethic_egalitarian"
					has_ethic = "ethic_fanatic_egalitarian"
				}
				NOT = {
					has_valid_ai_personality = yes
					is_ai = yes
					is_galactic_community_member = yes
					OR = {
						is_active_resolution = "resolution_galacticstudies_ethical_guideline_refactoring"
						is_active_resolution = "resolution_galacticstudies_extradimensional_experimentation"
					}
				}
			}
			modifier = {
				factor = 0.1
				is_galactic_community_member = yes
				OR = {
					is_active_resolution = resolution_greatergood_balance_in_the_middle
					is_active_resolution = resolution_greatergood_universal_prosperity_mandate
					is_active_resolution = resolution_greatergood_6
				}
			}
		}

		prerequisites = { tech_selected_lineages }
	}

	option = {
		name = "leader_enhancement_capacity_boosters"

		policy_flags = {
			leader_enhancement_capacity_boosters
		}
		modifier = {
			species_leader_exp_gain = 0.2
			leader_age = 20
			leaders_cost_mult = 1
		}

		in_breach_of = {
			{
				key = resolution_greatergood_balance_in_the_middle
			}
			{
				key = resolution_greatergood_universal_prosperity_mandate
			}
			{
				key = resolution_greatergood_6
			}
		}

		valid = {
			NOR = {
				has_ethic = "ethic_egalitarian"
				has_ethic = "ethic_fanatic_egalitarian"
			}
		}

		prerequisites = { tech_capacity_boosters }

		AI_weight = {
			factor = 3
			modifier = {
				factor = 0.1
				is_galactic_community_member = yes
				OR = {
					is_active_resolution = resolution_greatergood_balance_in_the_middle
					is_active_resolution = resolution_greatergood_universal_prosperity_mandate
					is_active_resolution = resolution_greatergood_6
				}
			}
		}
	}
}

economic_policy = {
	potential = {
		NOT = { has_ethic = ethic_gestalt_consciousness }
	}

	option = {
		name = "economic_policy_civilian"

		modifier = {
			planet_jobs_consumer_goods_produces_mult = 0.25
			planet_jobs_alloys_produces_mult = -0.25
		}

		AI_weight = {
			factor = 0
		}
	}

	option = {
		name = "economic_policy_balanced"

		modifier = {}

		AI_weight = {
			factor = 1
			modifier = {
				factor = 10
				has_valid_ai_personality = yes
				is_ai = yes
				is_galactic_community_member = yes
				is_active_resolution = "resolution_rulesofwar_demobilization_initiative"
			}
		}
	}

	option = {
		name = "economic_policy_military"

		in_breach_of = {
			{
				key = resolution_rulesofwar_demobilization_initiative
			}
			{
				key = resolution_rulesofwar_6
			}
		}

		modifier = {
			planet_jobs_consumer_goods_produces_mult = -0.25
			planet_jobs_alloys_produces_mult = 0.25
		}

		policy_flags = {
			economic_policy_military
		}

		AI_weight = {
			factor = 2
			modifier = {
				factor = 0
				is_authoritarian = no
				NOT = { has_ascension_perk = ap_become_the_crisis }
			}
			modifier = {
				factor = 0.1
				is_galactic_community_member = yes
				OR = {
					is_active_resolution = "resolution_rulesofwar_demobilization_initiative"
					is_active_resolution = "resolution_rulesofwar_6"
				}
			}
		}
	}
}

artificial_intelligence_policy = {

	potential = {
		NOT = { has_ethic = ethic_gestalt_consciousness }
		OR = {
			can_set_ai_policy = yes
			has_country_flag = synthetic_empire
		}
	}

	option = {
		name = "ai_outlawed"

		valid = {
			NOR = {
				has_ethic = "ethic_materialist"
				has_ethic = "ethic_fanatic_materialist"
				custom_tooltip = {
					success_text = is_a_synthetic_empire
					has_country_flag = synthetic_empire
				}
			}
		}

		policy_flags = {
			ai_outlawed
		}

		in_breach_of = {
			{
				key = resolution_galacticstudies_advanced_xenostudies
			}
			{
				key = resolution_galacticstudies_6
			}
		}

		AI_weight = {
			modifier = {
				factor = 0
				OR = {
					has_ethic = "ethic_materialist"
					has_ethic = "ethic_fanatic_materialist"
				}
			}
			modifier = {
				factor = 5
				OR = {
					has_ethic = "ethic_spiritualist"
					has_ethic = "ethic_fanatic_spiritualist"
				}
			}
			modifier = {
				factor = 0.1
				has_valid_ai_personality = yes
				is_ai = yes
				is_galactic_community_member = yes
				OR = {
					is_active_resolution = "resolution_galacticstudies_advanced_xenostudies"
					is_active_resolution = "resolution_galacticstudies_ethical_guideline_refactoring"
					is_active_resolution = "resolution_galacticstudies_extradimensional_experimentation"
					is_active_resolution = "resolution_galacticstudies_6"
				}
			}
		}
	}

	option = {
		name = "ai_servitude"

		valid = {
			custom_tooltip = {
				fail_text = is_a_synthetic_empire_fail
				NOT = { has_country_flag = synthetic_empire }
			}
		}

		in_breach_of = {
			{
				key = resolution_divinity_crusade_against_the_heretic
			}
		}

		policy_flags = {
			ai_servitude
		}

		AI_weight = {
			modifier = {
				factor = 0.1
				is_galactic_community_member = yes
				is_active_resolution = "resolution_divinity_crusade_against_the_heretic"
			}
			modifier = {
				factor = 5
				has_valid_ai_personality = yes
				has_ai_personality_behaviour = robot_exploiter
			}
			modifier = {
				factor = 2
				has_valid_ai_personality = yes
				has_ai_personality_behaviour = robot_liberator
			}
			modifier = {
				factor = 0
				OR = {
					has_ethic = "ethic_spiritualist"
					has_ethic = "ethic_fanatic_spiritualist"
				}
				NOT = {
					has_valid_ai_personality = yes
					is_ai = yes
					is_galactic_community_member = yes
					OR = {
						is_active_resolution = "resolution_galacticstudies_advanced_xenostudies"
						is_active_resolution = "resolution_galacticstudies_ethical_guideline_refactoring"
						is_active_resolution = "resolution_galacticstudies_extradimensional_experimentation"
					}
				}
			}
		}
	}

	option = {
		name = "ai_full_rights"

		valid = {
			OR = {
				custom_tooltip = {
					fail_text = is_a_synthetic_empire
					has_country_flag = synthetic_empire
				}
				NOR = {
					has_ethic = "ethic_spiritualist"
					has_ethic = "ethic_fanatic_spiritualist"
				}
			}
			NOT = { has_policy_flag = robots_outlawed }
		}

		policy_flags = {
			ai_full_rights
		}

		modifier = {}

		AI_weight = {
			modifier = {
				factor = 0.5
				OR = {
					is_materialist = no
				}
				NOR = {
					is_synthetic_empire = yes
					has_technology = tech_synthetic_workers
				}
			}
			modifier = {
				factor = 5
				OR = {
					AND = {
						is_materialist = yes
						is_authoritarian = no
					}
					AND = {
						is_egalitarian = yes
						is_spiritualist = no
					}
				}

			}
			modifier = {
				factor = 5
				has_valid_ai_personality = yes
				has_ai_personality_behaviour = robot_liberator
			}
			modifier = {
				factor = 0
				OR = {
					has_ethic = "ethic_spiritualist"
					has_ethic = "ethic_fanatic_spiritualist"
				}
			}
		}
	}
}

refugees = {
	potential = {
		has_encountered_other_species = yes
		is_country_type = default
		OR = {
			NOT = { has_ethic = "ethic_gestalt_consciousness" }
			has_valid_civic = civic_machine_servitor
		}
	}

	in_breach_of = {
		{
			key = resolution_prime_directive
		}
		{
			key = resolution_galactic_cooperation_initiative
		}
	}

	option = {
		name = "refugees_not_allowed"

		valid = {
			NOR = {
				has_ethic = "ethic_xenophile"
				has_ethic = "ethic_fanatic_xenophile"
			}
		}

		policy_flags = {
			refugees_not_allowed
		}
		AI_weight = {
			factor = 2
			modifier = {
				factor = 10
				is_xenophobe = yes
			}
			modifier = {
				factor = 0.1
				is_galactic_community_member = yes
				OR = {
					is_active_resolution = resolution_prime_directive
					is_active_resolution = resolution_galactic_cooperation_initiative
				}
			}
		}
	}

	option = {

		in_breach_of = {
			{
				key = resolution_closed_society
			}
			{
				key = resolution_galactic_cooperation_initiative
			}
		}

		name = "refugees_only_citizens"

		potential = {
			NOT = { has_ethic = "ethic_gestalt_consciousness" }
		}

		policy_flags = {
			refugees_only_citizens
		}

		valid = {
			NOT = {
				has_authority = auth_hive_mind
			}
		}

		AI_weight = {
			factor = 5
			modifier = {
				factor = 0.1
				is_galactic_community_member = yes
				OR = {
					is_active_resolution = resolution_closed_society
					is_active_resolution = resolution_galactic_cooperation_initiative
				}
			}
			modifier = {
				factor = 0.5
				is_xenophile = yes
			}
			modifier = {
				factor = 3
				is_authoritarian = yes
				is_xenophobe = no
				is_xenophile = no
			}
		}
	}

	option = {
		name = "refugees_allowed"

		in_breach_of = {
			{
				key = resolution_homogenous_state
			}

			{
				key = resolution_justified_suspicion
			}

			{
				key = resolution_national_purity
			}

			{
				key = resolution_cooperation_discouraged
			}

			{
				key = resolution_closed_society
			}
		}

		policy_flags = {
			refugees_allowed
		}

		valid = {
			NOR = {
				has_ethic = "ethic_xenophobe"
				has_ethic = "ethic_fanatic_xenophobe"
			}
		}

		AI_weight = {
			factor = 10
			modifier = {
				factor = 0
				NOR = {
					has_ethic = ethic_xenophile
					has_ethic = ethic_fanatic_xenophile
					has_valid_civic = civic_machine_servitor
					AND = {
						has_valid_ai_personality = yes
						NOT = { has_ai_personality_behaviour = multispecies }
					}
				}
			}
			modifier = {
				factor = 0.1
				is_galactic_community_member = yes
				OR = {
					is_active_resolution = "resolution_homogenous_state"
					is_active_resolution = "resolution_justified_suspicion"
					is_active_resolution = "resolution_national_purity"
					is_active_resolution = "resolution_cooperation_discouraged"
					is_active_resolution = "resolution_closed_society"
				}
			}
		}
	}
}

population_controls = {
	potential = {
		NOT = { has_ethic = "ethic_gestalt_consciousness" }
	}

	option = {
		name = "population_controls_not_allowed"

		on_enabled = {
			hidden_effect = { every_owned_planet = { remove_modifier = planet_population_control } }
		}

		policy_flags = {
			population_controls_not_allowed
		}

		in_breach_of = {
			{
				key = resolution_superior_deference
			}
			{
				key = resolution_a_whiff_of_grapeshot
			}
			{
				key = resolution_let_them_eat_cake
			}
		}

		AI_weight = {
			factor = 2
			modifier = {
				factor = 0.1
				is_galactic_community_member = yes
				OR = {
					is_active_resolution = resolution_superior_deference
					is_active_resolution = resolution_a_whiff_of_grapeshot
					is_active_resolution = resolution_let_them_eat_cake
				}
			}
		}
	}

	option = {
		name = "population_controls_allowed"

		on_enabled = {
			hidden_effect = { every_owned_planet = { remove_modifier = planet_growth_discouraged } }
		}

		policy_flags = {
			population_controls_allowed
		}

		in_breach_of = {
			{
				key = resolution_greatergood_balance_in_the_middle
			}
			{
				key = resolution_greatergood_universal_prosperity_mandate
			}
			{
				key = resolution_greatergood_6
			}
		}

		modifier = {}

		AI_weight = {
			factor = 10
			modifier = {
				factor = 0.1
				OR = {
					has_ethic = ethic_egalitarian
					has_ethic = ethic_fanatic_egalitarian
					has_ethic = ethic_xenophile
					has_ethic = ethic_fanatic_xenophile
				}
			}
			modifier = {
				factor = 0.1
				is_galactic_community_member = yes
				OR = {
					is_active_resolution = resolution_greatergood_balance_in_the_middle
					is_active_resolution = resolution_greatergood_universal_prosperity_mandate
					is_active_resolution = resolution_greatergood_6
				}
			}
		}
	}
}

slavery = {
	potential = {
		NOT = { has_ethic = "ethic_gestalt_consciousness" }
	}

	option = {
		name = "slavery_not_allowed"

		valid = {
			NOR = {
				has_valid_civic = civic_slaver_guilds
				has_valid_civic = civic_indentured_assets
			}
		}

		policy_flags = {
			slavery_not_allowed
		}

		on_enabled = {
			hidden_effect = { every_owned_planet = { remove_modifier = slave_colony } }
		}

		modifier = {
			slave_market_cost_mult = 1
		}
	}

	option = {
		name = "slavery_allowed"

		valid = {
			custom_tooltip = {
				success_text = is_not_a_signatory_vassal_success
				fail_text = is_not_a_signatory_vassal_fail
				NOT = { any_agreement = { agreement_preset = preset_signatory } }
			}
			custom_tooltip = {
				fail_text = is_broken_shackles_origin
				NOT = { has_origin = origin_broken_shackles }
			}
			OR = {
				has_ethic = ethic_authoritarian
				has_ethic = ethic_fanatic_authoritarian
				has_ethic = ethic_xenophobe
				has_ethic = ethic_fanatic_xenophobe
			}
		}

		policy_flags = {
			slavery_allowed
		}
		modifier = {}

		AI_weight = {
			factor = 10
			modifier = {
				factor = 0
				has_valid_ai_personality = yes
				NOT = { has_ai_personality_behaviour = slaver }
			}
			modifier = {
				factor = 0
				has_valid_ai_personality = no
				NOR = {
					has_ethic = ethic_authoritarian
					has_ethic = ethic_fanatic_authoritarian
					has_ethic = ethic_xenophobe
					has_ethic = ethic_fanatic_xenophobe
				}
			}
			# special case for harmonious collectives
			modifier = {
				factor = 0
				has_valid_ai_personality = no
				is_ai = yes
				NOR = {
					has_ethic = "ethic_xenophobe"
					has_ethic = "ethic_fanatic_xenophobe"
					has_ethic = "ethic_militarist"
					has_ethic = "ethic_fanatic_militarist"
				}
				OR = {
					has_ethic = "ethic_pacifist"
					has_ethic = "ethic_fanatic_pacifist"
					has_ethic = "ethic_xenophile"
					has_ethic = "ethic_fanatic_xenophile"
				}
				OR = {
					has_ethic = "ethic_authoritarian"
					has_ethic = "ethic_fanatic_authoritarian"
				}
				NOR = {
					has_valid_civic = "civic_slaver_guilds"
					has_trait = "trait_decadent"
				}
			}
		}
	}
}

purge = {
	option = {
		name = "purge_not_allowed"

		valid = {
			NOT = { has_ethic = ethic_gestalt_consciousness }
			NOT = { has_valid_civic = "civic_fanatic_purifiers" }
		}

		policy_flags = {
			purge_not_allowed
		}
	}

	option = {

		in_breach_of = {
			{
				key = resolution_prime_directive
			}
			{
				key = resolution_galactic_cooperation_initiative
			}
		}

		name = "purge_displacement_only"

		policy_flags = {
			purge_displacement_only
		}

		modifier = {}

		valid = {
			NOR = {
				has_ethic = ethic_xenophile
				has_ethic = ethic_fanatic_xenophile
			}
			is_homicidal = no
		}

		AI_weight = {
			factor = 5
			modifier = {
				factor = 0
				has_valid_ai_personality = yes
				has_ai_personality_behaviour = multispecies
			}
			modifier = {
				factor = 0.1
				is_galactic_community_member = yes
				OR = {
					is_active_resolution = resolution_prime_directive
					is_active_resolution = resolution_galactic_cooperation_initiative
				}
			}
		}
	}

	option = {
		name = "purge_allowed"

		in_breach_of = {
			{
				key = resolution_rulesofwar_reverence_for_life
			}
			{
				key = resolution_rulesofwar_independent_tribunals
			}
			{
				key = resolution_rulesofwar_last_resort_doctrine
			}
			{
				key = resolution_rulesofwar_demobilization_initiative
			}
			{
				key = resolution_charter_of_sentient_rights
			}
			{
				key = resolution_stellar_diplomatic_forums
			}
			{
				key = resolution_prime_directive
			}
			{
				key = resolution_galactic_cooperation_initiative
			}
		}

		policy_flags = {
			purge_allowed
		}
		modifier = {}

		valid = {
			custom_tooltip = {
				success_text = is_not_a_signatory_vassal_success
				fail_text = is_not_a_signatory_vassal_fail
				NOT = { any_agreement = { agreement_preset = preset_signatory } }
			}
			custom_tooltip = {
				fail_text = is_broken_shackles_origin
				NOT = { has_origin = origin_broken_shackles }
			}
			OR = {
				has_ethic = ethic_gestalt_consciousness
				has_ethic = ethic_xenophobe
				has_ethic = ethic_fanatic_xenophobe
				has_origin = origin_necrophage
				has_menace_perk = menp_undertaker	# Unlocked with Crisis Level 1
			}
		}

		AI_weight = {
			factor = 10
			modifier = {
				factor = 40
				has_ethic = ethic_gestalt_consciousness
				NOT = { has_valid_civic = civic_hive_empath }
			}
			modifier = {
				factor = 0
				OR = {
					has_ethic = ethic_pacifist
					has_ethic = ethic_fanatic_pacifist
				}
			}
			modifier = {
				factor = 0
				has_valid_ai_personality = yes
				NOR = {
					has_ai_personality_behaviour = purger
					has_ethic = ethic_gestalt_consciousness
					AND = {
						has_origin = origin_necrophage
						is_xenophobe = yes
					}
				}
			}
			modifier = {
				factor = 0.1
				has_valid_ai_personality = yes
				is_ai = yes
				is_galactic_community_member = yes
				OR = {
					is_active_resolution = "resolution_rulesofwar_reverence_for_life"
					is_active_resolution = "resolution_rulesofwar_independent_tribunals"
					is_active_resolution = "resolution_rulesofwar_last_resort_doctrine"
					is_active_resolution = "resolution_rulesofwar_demobilization_initiative"
					is_active_resolution = "resolution_charter_of_sentient_rights"
					is_active_resolution = "resolution_stellar_diplomatic_forums"
					is_active_resolution = "resolution_prime_directive"
					is_active_resolution = "resolution_galactic_cooperation_initiative"
				}
			}
			modifier = {
				factor = 10
				has_ascension_perk = ap_become_the_crisis
			}
			modifier = {
				factor = 1000
				has_origin = origin_necrophage
				is_xenophobe = yes
			}
		}
	}
}

