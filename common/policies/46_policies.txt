# Mod by Terak_Lapis
diplomatic_stance = {
	potential = {
		OR = {
			is_country_type = default
			is_country_type = fallen_empire
			is_country_type = awakened_fallen_empire
			is_country_type = primitive
			is_country_type = awakened_marauders
		}
	}

	option = { # Custom Stance for Churl Empires
		name = "diplo_stance_churl"
		icon = "GFX_diplomatic_stance_churl"

		potential = {
			has_origin = origin_churl
			is_country_type = default
		}

		policy_flags = {
			diplo_stance_churl
		}

		modifier = {
			country_war_exhaustion_mult = -0.3
			country_naval_cap_add = 150
			country_border_friction_mult = 0.6
			pop_government_ethic_attraction = 0.3
			country_unity_produces_mult = 0.05
			diplo_weight_mult = -0.55
		}

		ai_weight = {
			weight = 0

			modifier = {
				factor = 4
				has_origin = origin_churl
			}
			modifier = {
				factor = 100
				has_ascension_perk = ap_churl
			}
		}


	}

	option = {
		name = "diplo_stance_belligerent"
		icon = "GFX_diplomatic_stance_belligerent"

		potential = {
			OR = {
				is_country_type = default
				is_country_type = awakened_fallen_empire
			}

			is_homicidal = no # They have their own variants of this
			NOT = { has_valid_civic = civic_inwards_perfection }
		}

		policy_flags = {
			diplo_stance_belligerent
		}

		modifier = {
			country_war_exhaustion_mult = -0.1
			country_naval_cap_mult = 0.1
			country_claim_influence_cost_mult = -0.1
		}

		ai_weight = {
			weight = 10

			modifier = {
				factor = 0
				NOT = { has_country_flag = has_encountered_other_empire }
			}

			# Pacifists
			modifier = { # Fanatic Pacifists can *only* go belligerent if they are at war or there's a rival neighbor...
				factor = 0
				has_ethic = ethic_fanatic_pacifist
				NOR = {
					is_at_war = yes
					any_neighbor_country = {
						is_rival = root
					}
				}
			}
			modifier = { # Regular Pacifists have only a small chance to go belligerent if they are not at war or there's a rival neighbor...
				factor = 0.5
				has_ethic = ethic_pacifist
				NOR = {
					is_at_war = yes
					any_neighbor_country = {
						is_rival = root
					}
				}
			}
			modifier = {
				factor = 0.5 # ...but they're still less likely to.
				is_pacifist = yes
			}

			# Angry people like to be belligerent
			modifier = {
				factor = 2.0
				has_ethic = ethic_fanatic_militarist
			}
			modifier = {
				factor = 1.5
				has_ethic = ethic_militarist
			}
			modifier = {
				factor = 1.5
				has_ethic = ethic_fanatic_authoritarian
			}
			modifier = {
				factor = 1.25
				has_ethic = ethic_authoritarian
			}
			modifier = {
				factor = 5.0 # Intentionally high value for despoilers/Nihilistic Acquisition
				is_slaver = yes
			}
			modifier = {
				factor = 1.5
				has_valid_civic = civic_nationalistic_zeal
			}
			modifier = {
				factor = 1.5
				OR = {
					has_valid_civic = civic_hive_strength_of_legions
					has_valid_civic = civic_machine_warbots
					has_valid_civic = civic_private_military_companies
					has_valid_civic = civic_warrior_culture
				}
			}

			modifier = {
				factor = 1.5
				has_ai_personality_behaviour = conqueror
			}
			modifier = {
				factor = 1.5
				has_ai_personality_behaviour = subjugator
			}

			modifier = {
				factor = 3.0 # Blocked in propagators get ANGRY
				has_ai_expansion_plan = no
				has_ai_personality_behaviour = propagator
			}
		}
	}

	option = {
		name = "diplo_stance_cooperative"
		icon = "GFX_diplomatic_stance_cooperative"

		potential = {
			OR = {
				is_country_type = default
				is_country_type = awakened_fallen_empire
			}
			is_unfriendly = no # Not homicidal or barbaric despoilers
			NOT = { has_valid_civic = civic_inwards_perfection }
		}

		policy_flags = {
			diplo_stance_cooperative
		}

		modifier = {
			diplo_weight_mult = 0.25
			envoy_improve_relations_mult = 0.5
			country_border_friction_mult = -0.5
		}

		ai_weight = {
			weight = 10

			modifier = {
				factor = 0
				NOT = { has_country_flag = has_encountered_other_empire }
			}

			# Tons of Ethics modifiers!
			# Cranky people:
			modifier = {
				factor = 0
				has_ethic = ethic_fanatic_xenophobe
			}
			modifier = {
				factor = 0.1
				has_ethic = ethic_xenophobe
			}
			modifier = {
				factor = 0.5
				has_ethic = ethic_fanatic_authoritarian
			}
			modifier = {
				factor = 0.75
				has_ethic = ethic_authoritarian
			}

			# Nice people:
			modifier = {
				factor = 2.0
				has_ethic = ethic_fanatic_xenophile
			}
			modifier = {
				factor = 1.5
				has_ethic = ethic_xenophile
			}
			modifier = {
				factor = 1.3
				has_ethic = ethic_fanatic_pacifist
			}
			modifier = {
				factor = 1.15
				has_ethic = ethic_pacifist
			}
			modifier = {
				factor = 1.3
				has_ethic = ethic_fanatic_egalitarian
			}
			modifier = {
				factor = 1.15
				has_ethic = ethic_egalitarian
			}
			modifier = {
				factor = 1.1
				has_ethic = ethic_fanatic_materialist
			}
			modifier = {
				factor = 1.05
				has_ethic = ethic_materialist
			}

			modifier = {
				factor = 1.25
				has_ai_personality_behaviour = multispecies
			}

			modifier = {
				factor = 3.0
				has_ai_personality = federation_builders
			}
		}
	}

	option = {
		name = "diplo_stance_isolationist"
		icon = "GFX_diplomatic_stance_isolationist"

		potential = {
			OR = {
				is_country_type = default
				is_country_type = awakened_fallen_empire
			}
			is_homicidal = no # Homicidal variants below
			is_megacorp = no  # "NO! YOU CAN'T BUY OUR STUFF!" makes the shareholders sad
		}

		policy_flags = {
			diplo_stance_isolationist
		}

		modifier = {
			country_admin_cap_mult = 0.15
			country_unity_produces_mult = 0.10
			diplo_weight_mult = -0.50
			diplomacy_upkeep_mult = 1
			pop_government_ethic_attraction = 0.25
			country_border_friction_mult = 2.0
		}

		on_enabled = {
		}

		ai_weight = {
			weight = 10

			modifier = {
				factor = 0.25 # Let the isolationists start in this if they want
				NOT = { has_country_flag = has_encountered_other_empire }
			}

			modifier = {
				factor = 0
				OR = {
					has_ai_personality = federation_builders
					has_ai_personality = fanatic_befrienders
				}
			}

			modifier = {
				factor = 100.0 # Inwards Perfection should almost always go isolationist
				has_valid_civic = civic_inwards_perfection
			}

			modifier = {
				factor = 3.0
				has_ai_personality_behaviour = isolationist
			}

			modifier = {
				factor = 2.0
				is_xenophobe = yes
				is_militarist = no
				is_authoritarian = no
			}
		}
	}

	option = {
		name = "diplo_stance_expansionist"
		icon = "GFX_diplomatic_stance_expansionist"

		potential = {
			OR = {
				is_country_type = default
				is_country_type = awakened_fallen_empire
			}
			is_homicidal = no
		}

		policy_flags = {
			diplo_stance_expansionist
		}

		modifier = {
			starbase_outpost_cost_mult = -0.10
			planet_colony_development_speed_mult = 0.15
			country_border_friction_mult = 1.0
		}

		ai_weight = {
			weight = 10

			modifier = {
				factor = 2
				NOT = { has_country_flag = has_encountered_other_empire }
			}
		}
	}

	option = {
		name = "diplo_stance_mercantile"
		icon = "GFX_diplomatic_stance_mercantile"

		potential = {
			OR = {
				is_country_type = default
				is_country_type = awakened_fallen_empire
			}
			OR = {
				is_megacorp = yes
				has_civic = civic_corporate_dominion
				has_civic = civic_merchant_guilds
			}
			NOT = { has_valid_civic = civic_inwards_perfection }
		}

		policy_flags = {
			diplo_stance_mercantile
		}

		modifier = {
			diplo_weight_economy_mult = 0.25
			trade_value_mult = 0.1
			local_trade_protection_add = 5
		}

		ai_weight = {
			weight = 10

			modifier = {
				factor = 3.0
				is_megacorp = yes # Megacorps should generally prefer this diplo stance unless their ethics get them to specialize differently
			}
			modifier = {
				factor = 1.25
				has_valid_civic = civic_free_traders
			}
			modifier = {
				factor = 0.65
				OR = {
					has_valid_civic = civic_private_prospectors
					has_valid_civic = civic_private_military_companies
				}
			}
		}
	}

	option = {
		name = "diplo_stance_supremacist"
		icon = "GFX_diplomatic_stance_supremacy"

		potential = {
			is_homicidal = no
			OR = {
				is_country_type = awakened_fallen_empire
				is_country_type = awakened_marauders
				is_country_type = default
			}
			NOT = { has_valid_civic = civic_inwards_perfection }
		}

		valid = {
			NOT = { has_modifier = humiliated }

			OR = {
				has_tradition = tr_supremacy_finish
				NOT = { is_country_type = default }
			}
			is_subject = no
		}

		policy_flags = {
			diplo_stance_supremacist
		}

		modifier = {
			diplo_weight_naval_mult = 1.00
			country_war_exhaustion_mult = -0.20
			country_naval_cap_mult = 0.20
			country_claim_influence_cost_mult = -0.1
		}

		on_enabled = {
		}

		ai_weight = {
			weight = 10

			modifier = {
				factor = 0
				NOT = { has_country_flag = has_encountered_other_empire }
			}

			modifier = {
				factor = 0
				is_pacifist = yes
			}

			modifier = {
				factor = 10
				OR = {
					is_country_type = awakened_fallen_empire
					is_country_type = awakened_marauders
				}
			}

			# Angry people want to be Supreme
			modifier = {
				factor = 2.0
				has_ethic = ethic_fanatic_militarist
			}
			modifier = {
				factor = 1.5
				has_ethic = ethic_militarist
			}
			modifier = {
				factor = 1.5
				has_ethic = ethic_fanatic_authoritarian
			}
			modifier = {
				factor = 1.25
				has_ethic = ethic_authoritarian
			}
			modifier = {
				factor = 1.25 # Despoilers/Nihilistic Acquisition intentionally get a higher multiplier for Belligerent than Supremacist
				is_slaver = yes
			}
			modifier = {
				factor = 2
				has_valid_civic = civic_nationalistic_zeal
			}
			modifier = {
				factor = 3
				OR = {
					has_valid_civic = civic_hive_strength_of_legions
					has_valid_civic = civic_machine_warbots
					has_valid_civic = civic_private_military_companies
					has_valid_civic = civic_warrior_culture
				}
			}

			modifier = {
				factor = 1.5
				has_ai_personality_behaviour = conqueror
			}
			modifier = {
				factor = 1.5
				has_ai_personality_behaviour = subjugator
			}

			modifier = { # Don't be suicidal
				factor = 0
				any_relation = {
					has_communications = root
					has_policy_flag = diplo_stance_supremacist
					is_country_type = default
					is_subject = no
					relative_power = {
						who = root
						category = fleet
						value = overwhelming
					}
				}
			}
			modifier = {
				factor = 0.25
				any_neighbor_country = {
					has_communications = root
					is_country_type = default
					is_subject = no
					relative_power = {
						who = root
						category = fleet
						value > equivalent
					}
				}
			}
		}
	}

	option = {
		name = "diplo_stance_hunger"
		icon = "GFX_diplomatic_stance_rest"

		potential = {
			has_valid_civic = civic_hive_devouring_swarm
		}

		policy_flags = {
			diplo_stance_hunger
		}

		modifier = {
		}

		ai_weight = {
			weight = 100
		}
	}

	option = {
		name = "diplo_stance_extermination"
		icon = "GFX_diplomatic_stance_recompiling"

		potential = {
			has_valid_civic = civic_machine_terminator
		}

		policy_flags = {
			diplo_stance_extermination
		}

		modifier = {
		}

		ai_weight = {
			weight = 100
		}
	}

	option = {
		name = "diplo_stance_purification"
		icon = "GFX_diplomatic_stance_withdrawn"

		potential = {
			has_valid_civic = civic_fanatic_purifiers
		}

		policy_flags = {
			diplo_stance_purification
		}

		modifier = {
		}

		ai_weight = {
			weight = 100
		}
	}

	option = {
		name = "diplo_stance_isolationist_fallen_empire"
		icon = "GFX_diplomatic_stance_isolationist"

		potential = {
			is_country_type = fallen_empire
		}

		policy_flags = {
			diplo_stance_isolationist_fallen_empire
		}

		modifier = {
		}

		ai_weight = {
			weight = 100
		}
	}

	option = {
		name = "diplo_stance_primitive"
		icon = "GFX_diplomatic_stance_isolationist"

		potential = {
			is_country_type = primitive
		}

		policy_flags = {
			diplo_stance_primitive
		}

		modifier = {
		}

		ai_weight = {
			weight = 1
		}
	}

}

diplomatic_work_ethic = { # Custom Diplo Ethic


	potential = {
		OR = {
			is_country_type = default
			is_country_type = fallen_empire
			is_country_type = awakened_fallen_empire
			#is_country_type = primitive
			is_country_type = awakened_marauders
		}
	}

	option = { # neutral
		name = "neutral"

		policy_flags = {
			neutral_diplomacy
		}

		valid = {
			always = yes
			NOR = { # Homocids are never neutral
				is_country_type = awakened_marauders
				is_homicidal = yes
			}
		}

		modifier = {
			#pop_government_ethic_attraction = 0.05
			diplomacy_upkeep_mult = 0.05
			country_admin_cap_add = 40
			#country_claim_influence_cost_mult = -0.1
			all_technology_research_speed = 0.15
		}

		on_enabled = {
			set_country_flag = diplo_neutral
		}

		on_disabled = {
			remove_country_flag = diplo_neutral
		}

		AI_weight = {
			modifier = {
				factor = 10
			}
			modifier = { # Invards should only pick this one
				factor = 200
				OR = {
					has_valid_civic = "civic_inwards_perfection"
				}
			}
			modifier = { # Bullis and Friends should not stand neutral
				factor = 0.09
				OR = {
					has_ethic = ethic_fanatic_militarist
					has_ethic = ethic_militarist
					has_ethic = ethic_xenophobe
					has_ethic = ethic_fanatic_xenophobe
					has_ethic = ethic_fanatic_xenophile
					has_ethic = ethic_pacifist
					has_ethic = ethic_fanatic_pacifist
					has_ethic = ethic_xenophile
				}
			}

		}

	}
 
 	option = { # bully
 		name = "bully"
 
 		policy_flags = {
 			bully_diplomacy
 		} # Mod Terak_Lapis
 
 		valid = {
 			always = yes
 			is_galactic_community_member = yes
 			NOR = {
 				has_ethic = ethic_fanatic_xenophile
 				#has_ethic = ethic_pacifist
 				has_ethic = ethic_fanatic_pacifist
 				#has_ethic = ethic_xenophile
 				
 			}
 		}
 
 		modifier = {
 			diplo_weight_naval_mult = 0.1
 			#ship_build_speed_mult = 0.5
 			country_claim_influence_cost_mult = -0.25
 			envoy_harm_relations_mult = 0.3
 			envoy_improve_relations_mult = -0.5
 			#diplomacy_upkeep_mult = -0.15
 			country_base_influence_produces_add = -1
 			country_base_unity_produces_add = 10
 			country_border_friction_mult = 0.7
 			ship_weapon_damage = 0.18
 			ship_speed_mult = 0.1
 			pop_ethic_militarist_attraction_mult = 0.4
 			pop_ethic_xenophobe_attraction_mult = 0.6
 			armies_energy_upkeep_mult = 0.15
 			pop_growth_from_immigration = -0.5
 			starbase_outpost_cost_mult = -0.3
 		}
 
 		on_disabled = {
 			remove_country_flag = diplo_bully
 		}
 
 		on_enabled = {
 			set_country_flag = diplo_bully
 		}
 
 		AI_weight = {
 			weight = 8
 			modifier = {
 				factor = 200
 				OR = {
 					has_origin = origin_churl
 					has_ascension_perk = ap_churl
 				}
 			}
 			modifier = {
 				factor = 0.5
 				OR = {
 					is_pacifist = yes
 					is_xenophile = yes
 					has_ethic = ethic_fanatic_xenophile
 					has_ethic = ethic_pacifist
 					has_ethic = ethic_fanatic_pacifist
 					has_ethic = ethic_xenophile
 				}
 			}
 			modifier = {
 				factor = 200
 				is_homicidal = yes
 			}
 			modifier = {
 				factor = 20
 				OR = {
 					is_militarist = yes
 					is_xenophobe = yes
 					has_ethic = ethic_fanatic_xenophobe
 					has_ethic = ethic_xenophobe
 					has_ethic = ethic_fanatic_militarist
 					has_ethic = ethic_militarist
 				}
 			}
 			modifier = {
 				factor = 0.2
 				owner = {
 					count_owned_pops = {
 						count < 60
 					}
 				}
 			}
 			modifier = {
 				factor = 0.1
 				has_policy_flag = "diplo_stance_expansionist"
 			}
 			modifier = {
 				factor = 0.01
 				has_ai_expansion_plan = yes
 			}
 			modifier = {
 				factor = 0
 				years_passed < 50
 			}
 		}
 		
 	}
 
 	option = { # friendly
 
 		name = "friendly"
 
 		policy_flags = {
 			friendly_diplomacy
 		}
 
 		valid = {
 			always = yes
 			is_galactic_community_member = yes
 			NOR = {
 				has_ethic = ethic_fanatic_xenophobe
 				#has_ethic = ethic_xenophobe
 				has_ethic = ethic_fanatic_militarist
 				#has_ethic = ethic_militarist
 			}
 		}
 
 		on_enabled = {
 			set_country_flag = diplo_friendly
 		}
 
 		on_disabled = {
 			remove_country_flag = diplo_friendly
 		}
 
 		AI_weight = {
 			weight = 8
 			modifier = {
 				factor = 200
 				OR = { # Great Diplomats should be friendly
 					has_origin = origin_fortdiplo
 					has_origin = origin_diploboost
 					has_ascension_perk = ap_diploboost
 				}
 			}
 			modifier = {
 				factor = 50
 				OR = {
 					is_pacifist = yes
 					is_xenophile = yes
 					has_ethic = ethic_fanatic_xenophile
 					has_ethic = ethic_pacifist
 					has_ethic = ethic_fanatic_pacifist
 					has_ethic = ethic_xenophile
 				}
 			}
 			modifier = {
 				factor = 0
 				is_homicidal = yes
 			}
 			modifier = {
 				factor = 0.5
 				OR = {
 					is_militarist = yes
 					is_xenophobe = yes
 					has_ethic = ethic_fanatic_xenophobe
 					has_ethic = ethic_xenophobe
 					has_ethic = ethic_fanatic_militarist
 					has_ethic = ethic_militarist
 				}
 			}
 			modifier = {
 				factor = 0.01
 				has_policy_flag = diplo_stance_isolationist
 			}
 			modifier = {
 				factor = 0.6
 				has_policy_flag = "diplo_stance_expansionist"
 			}
 		}
 
 		modifier = {
 			envoys_add = 1
 			diplo_weight_mult = 0.1
 			diplomacy_upkeep_mult = -0.2
 			#country_border_friction_mult = -0.22
 			country_base_influence_produces_add = 1
 			pop_government_ethic_attraction = 0.3
 			pop_ethic_xenophile_attraction_mult = 0.5
 			pop_ethic_pacifist_attraction_mult = 0.5
 			#country_base_energy_produces_mult = 0.01
 			envoy_improve_relations_mult = 0.14
 			all_technology_research_speed = -0.15
 			country_energy_produces_mult = -0.09
 			starbase_outpost_cost_mult = 0.2
 
 			
 		}
 
 	}
 
}

drugs_usage = { # Diplo Drugs Usage
	potential = {
		OR = {
			is_country_type = default
			is_country_type = fallen_empire
			is_country_type = awakened_fallen_empire
			is_country_type = primitive
			is_country_type = awakened_marauders
		}
	}

	option = { # Forbidden Usage
		name = "forbidden_usage"
		valid = {
			always = yes
		}
		policy_flags = {
			forbidden_usage
		}
		modifier = {
			country_base_diplodrugs_produces_add = 0
		}
		AI_weight = {
			weight = 100
			modifier = {
				weight = 0
				has_technology = tech_diplo_drugs_exploit
			}
		}

	}
	option = { # Free Usage
		name = "free_usage"
		valid = {
			always = yes
		}
		policy_flags = {
			free_usage
		}
		modifier = {
			country_base_diplodrugs_produces_add = -1
			pop_growth_from_immigration = 0.05
			pop_growth_speed = 0.1
		}
		AI_weight = {
			weight = 0
			modifier = {
				weight = 50
				has_technology = tech_diplo_drugs_exploit
			}
			modifier = {
				weight = 100
				exists = owner
				owner = {
					AND = {
					has_technology = tech_diplo_drugs_exploit
					has_origin = origin_churl
					}
				}				
			}
		}
	}
}