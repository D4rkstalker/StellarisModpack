building_machine_parts_factory = {
	base_buildtime = 360
	can_build = no
	icon = building_machinedlc_parts_plants
	category = pop_assembly
	
	potential = {
		owner = { has_authority = auth_machine_intelligence }
	}
	
	convert_to = {
		building_clinic
	}
	
	destroy_trigger = {
		exists = owner
		NOT = { owner = { has_authority = auth_machine_intelligence } }
	}
	
	planet_modifier = {
		job_machinedlcmod_drone_parts_assembler_add = 2
	}
	
	resources = {
		category = planet_buildings
		cost = {
			minerals = 300
		}
		upkeep = {
			energy = 2
		}
	}

	prerequisites = {
		"tech_machine_parts_assembly"
	}

	show_tech_unlock_if = {
		has_authority = auth_machine_intelligence
	}

	triggered_desc = {
		text = job_machinedlcmod_drone_parts_assembler_effect_desc
	}

	upgrades = {
		"building_machine_parts_plants"
	}
		
	ai_weight = {
		weight = 5000
		modifier = {
			factor = 0
			OR = {
				is_planet_class = pc_habitat
				num_buildings = { type = any value >= 14 }
			}
		}
		modifier = {
			factor = 0
			has_modifier = planet_population_control_gestalt
		}
	}
}
building_machine_parts_plants = {
	base_buildtime = 480
	can_build = no
	icon = building_machinedlc_drone_parts_complex
	category = pop_assembly
	
	potential = {
		owner = { has_authority = auth_machine_intelligence }
	}
	
	convert_to = {
		building_hospital
	}
	
	destroy_trigger = {
		exists = owner
		NOT = { owner = { has_authority = auth_machine_intelligence } }
	}
	
	planet_modifier = {
		job_machinedlcmod_drone_parts_assembler_add = 5
	}
	
	resources = {
		category = planet_buildings
		cost = {
			minerals = 600
			volatile_motes = 50
		}
		upkeep = {
			energy = 4
			volatile_motes = 1
		}
	}

	prerequisites = {
		"tech_machine_parts_mass_assembly"
	}
	
	show_tech_unlock_if = {
		has_authority = auth_machine_intelligence
	}

	triggered_desc = {
		text = job_machinedlcmod_drone_parts_assembler_effect_desc
	}

	ai_weight = {
		weight = 0
		modifier = {
			weight = 1000
			buildings_has_motes = yes
		}
	}

	on_queued = {
		IF = {
			limit = {
				owner = { has_technology = tech_construction_templates }
			}
			owner = { set_timed_country_flag = { flag = buildings_new_mote_building days = 270 } }
		}
		ELSE_IF = {
			limit = {
				owner = { has_technology = tech_assembly_pattern }
			}
			owner = { set_timed_country_flag = { flag = buildings_new_mote_building days = 390 } }
		}
		ELSE = {
			planet = { 
				owner = { set_timed_country_flag = { flag = buildings_new_mote_building days = 510 } }
			}
		}
	}
}