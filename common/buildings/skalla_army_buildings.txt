#############
# Army buildings
#############
building_stronghold = {
	base_buildtime = 240
	position_priority = 100

	category = army
	
	potential = {
		buildings_simple_allow = yes
	}

	destroy_trigger = {
		AND = {
			OR = {
				num_buildings = { type = building_stronghold value > 1 }
				has_building = building_fortress
			}
			free_building_slots = 0
		}
	}
	
	triggered_planet_modifier = {
		potential = {
			exists = owner
			owner = { is_gestalt = no }
		}
		modifier = {
			job_soldier_add = @b1_jobs
		}
	}
	triggered_planet_modifier = {
		potential = {
			exists = owner
			owner = { is_gestalt = yes }
		}
		modifier = {
			job_warrior_drone_add = @b1_jobs
		}
	}

	resources = {
		category = planet_buildings
		cost = {
			minerals = @b1_minerals
		}			
		upkeep = {
			energy = 1
		}
	}
	
	prerequisites = {
		"tech_planetary_defenses"
	}
	
	upgrades = {
		"building_fortress"
	}
	
	triggered_desc = {
		trigger = {
			exists = owner
			owner = { is_gestalt = yes }
		}
		text = job_warrior_drone_effect_desc
	}
	triggered_desc = {
		trigger = {
			exists = owner
			owner = { is_gestalt = no }
		}
		text = job_soldier_effect_desc
	}

	ai_resource_production = {
		alloys = 50
		trigger = {
			used_naval_capacity > 0.8
		}
	}
}

building_fortress = {
	base_buildtime = @b1_time
	can_build = no
	planetary_ftl_inhibitor = yes
	position_priority = 100

	category = army
	
	allow = {
		has_upgraded_capital = yes
	}
	
	destroy_trigger = {
		OR = {
			AND = {
				num_buildings = { type = building_fortress value > 1 }
				free_building_slots = 0
			}
			buildings_no_motes = yes
		}
	}
	
	triggered_planet_modifier = {
		potential = {
			exists = owner
			owner = { is_gestalt = no }
		}
		modifier = {
			job_soldier_add = @b2_jobs
		}
	}
	triggered_planet_modifier = {
		potential = {
			exists = owner
			owner = { is_gestalt = yes }
		}
		modifier = {
			job_warrior_drone_add = @b2_jobs
		}
	}

	resources = {
		category = planet_buildings
		cost = {
			minerals = @b2_minerals
			volatile_motes = @b2_rare_cost
		}			
		upkeep = {
			energy = 1
			volatile_motes = @b2_rare_upkeep
		}
	}
	
	prerequisites = {
		"tech_global_defense_grid"
	}
	
	triggered_desc = {
		trigger = {
			exists = owner
			owner = { is_gestalt = yes }
		}
		text = job_warrior_drone_effect_desc
	}
	triggered_desc = {
		trigger = {
			exists = owner
			owner = { is_gestalt = no }
		}
		text = job_soldier_effect_desc
	}
}