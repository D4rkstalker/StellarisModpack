building_waste_recycle_center = {
	icon = building_waste_reprocessing_center
	base_buildtime = 180
	category = amenity
	base_cap_amount = 2
	
	potential = {
		exists = owner
		owner = { is_regular_empire = yes }
	}
	
	allow = {
		owner = { has_policy_flag = alp_waste_recycle }	
	}
	
	destroy_trigger = {
		exists = owner
		owner = { is_regular_empire = no }
	}	
	
	resources = {
		category = planet_buildings
		cost = {
			minerals = 150
		}
		upkeep = {
			trigger = {
				planet = {
					or = {
						is_producing_waste_lots = yes 
						has_waste_to_dispose_lots = yes
					}
				}
			}
			sr_waste = 8
		}
		upkeep = {
			trigger = {
				planet = {
					or = {
						is_producing_waste_little = yes 
						has_waste_to_dispose_little = yes
					}
				}
			}
			sr_waste = 1
		}
		produces = {
			trigger = { planet = { has_waste_to_dispose_lots = yes }}
			consumer_goods = 1
		}
	}
	
	planet_modifier = {
		job_service_add = 1
		job_labourer_add = 1
		planet_amenities_add = 2
		planet_jobs_sr_waste_produces_mult = -0.1
		pop_environment_tolerance = 0.01
	}
	
	ai_weight = { weight = 0 }
}

building_waste_elimination_center = {
	icon = building_public_relations_office
	base_buildtime = 360
	category = amenity
	base_cap_amount = 1
	
	potential = {
		exists = owner
		owner = { is_regular_empire = yes }
	}
	
	allow = {
		owner = { has_policy_flag = alp_waste_eliminate }	
	}
	
	destroy_trigger = {
		exists = owner
		owner = { is_regular_empire = no }
	}	
	
	resources = {
		category = planet_buildings
		cost = {
			minerals = 250
		}
		upkeep = {
			energy = 2
		}
		upkeep = {
			trigger = {
				planet = {
					or = {
						is_producing_waste_lots = yes 
						has_waste_to_dispose_lots = yes
					}
				}
			}
			sr_waste = 8
		}
		upkeep = {
			trigger = {
				planet = {
					or = {
						is_producing_waste_little = yes 
						has_waste_to_dispose_little = yes
					}
				}
			}
			sr_waste = 1
		}
	}
	
	planet_modifier = {
		job_researcher_add = 1
		planet_amenities_add = 3
		planet_jobs_sr_waste_produces_mult = -0.25
		pop_environment_tolerance = 0.02
	}
	
	ai_weight = { weight = 0 }
}

building_atmos_gen = {
	base_buildtime = 360
	category = amenity
	base_cap_amount = 5
	can_demolish = no
	can_be_ruined = no
	can_be_disabled = no
	
	potential = {
		is_hostile_planet_ia = yes
		exists = owner
		owner = { is_machine_empire = no }
	}
	
	planet_modifier = {
		pop_environment_tolerance = 0.1
		planet_max_districts_add = 1
	}
	
	resources = {
		category = planet_buildings
		cost = {
			minerals = 500
		}
		upkeep = {
			sr_ice = 5
		}
		upkeep = {
			trigger = { planet = { has_ice_left = no }}
			minerals = 5
		}
		upkeep = {
			sr_biomass = 5
		}
		upkeep = {
			trigger = { planet = { has_biomass_left = no }}
			energy = 5
		}
	}
	
	prerequisites = {
		tech_colonization_2
	}
	show_tech_unlock_if = {
		is_machine_empire = no
	}
	
	ai_weight = { 
		weight = 0
		modifier = {
			weight = 10
			exists = owner
			num_districts = { type = district_habitation_dome value > 0 }
			num_buildings = { type = building_atmos_gen value < 3 }
			num_free_districts = { type = district_habitation_dome value < 3 }
			owner = { has_monthly_income = { resource = sr_biomass value > 5 }}
			owner = { has_monthly_income = { resource = sr_ice value > 5 }}
		}
	}
}

building_traditional_entertainments_park = {
	base_buildtime = 90
	icon = building_xeno_tourism_agency

	category = amenity
	
	potential = {
		NOT = { has_modifier = slave_colony }
		NOT = { has_modifier = penal_colony }		
		owner = { 
			is_regular_empire = yes
			not = { has_technology = tech_holo_entertainment }
		}
	}
	
	destroy_trigger = {
		or = {
			and = {
				owner = { is_ai = yes }
				or = {
					free_amenities > 50
					num_buildings = { type = building_holo_theatres value > 0 }
					num_buildings = { type = building_hyper_entertainment_forum value > 0 }
				}
			}
			owner = { is_regular_empire = no }
		}
	}
		
	planet_modifier = {
		planet_amenities_add = 2
	}
	
	triggered_planet_modifier = {
		potential = {
			exists = owner
			owner = { NOT = { has_valid_civic = civic_warrior_culture }}					
		}
		modifier = { job_entertainer_add = 1 }
	}
	
	triggered_planet_modifier = {
		potential = {
			exists = owner
			owner = { has_valid_civic = civic_warrior_culture }					
		}
		modifier = { job_duelist_add = 1 }
	}

	resources = {
		category = planet_buildings
		cost = { minerals = 50 }
		upkeep = { energy = 1 }
	}
	
	upgrades = {
		"building_holo_theatres"
	}
	
	triggered_desc = { text = job_entertainer_effect_desc }

	ai_weight = {
		weight = 0
		modifier = {
			weight = 1
			num_pops > 10
		}
		modifier = {
			factor = 2
			free_amenities < 15
		}
		modifier = {
			factor = 5
			free_amenities < 10
		}
		modifier = {
			factor = 10
			free_amenities < 2
		}
		modifier = {
			weight = 0
			or = {
				and = {
					free_amenities > 20
					no_unemployment_or_servants = yes
				}
				free_amenities > 25
				num_buildings = { type = building_traditional_entertainments_park value > 1 }
				num_buildings = { type = building_holo_theatres value > 0 }
				num_buildings = { type = building_hyper_entertainment_forum value > 0 }
			}
		}
	}
}