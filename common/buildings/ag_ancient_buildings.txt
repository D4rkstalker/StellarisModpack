
####################################
#			Event Buildings
####################################
ag_ancient_structure = {
	capital = no
	can_build = no
	can_demolish = yes
	can_be_ruined = yes
	can_be_disabled = yes
	
	icon = ag_ancient_lab_2
	
	base_buildtime = 1440
	category = research
	
	potential = {
		always = no
	}

	planet_modifier = {
		planet_researchers_produces_mult = 0.02
		planet_housing_add = 12
		planet_amenities_add = 20
	}
	
	triggered_planet_modifier = {
		potential = {
			exists = owner
			owner = { is_regular_empire = yes }
		}
		modifier = {
			job_head_researcher_add = 1
			job_researcher_add = 10
		}
	}
	triggered_planet_modifier = {
		potential = {
			exists = owner
			owner = { is_hive_empire = yes }
		}
		modifier = {
			job_brain_drone_add = 11
		}
	}
	triggered_planet_modifier = {
		potential = {
			exists = owner
			owner = { is_machine_empire = yes }
		}
		modifier = {	
			job_calculator_add = 11
		}
	}
	triggered_planet_modifier = {
		potential = {
			exists = owner
			owner = {
				is_regular_empire = yes
				is_galactic_community_member = yes
			}
			is_active_resolution = "resolution_galacticstudies_extradimensional_experimentation"
			has_modifier = pm_extradimensional_experimentation
		}
		modifier = {
			job_dimensional_portal_researcher_add = 1
		}
	}
	triggered_planet_modifier = {
		potential = {
			exists = owner
			owner = {
				is_gestalt = yes
				is_galactic_community_member = yes
			}
			is_active_resolution = "resolution_galacticstudies_extradimensional_experimentation"
			has_modifier = pm_extradimensional_experimentation
		}
		modifier = {
			job_dimensional_portal_researcher_gestalt_add = 1
		}
	}

	triggered_desc = {
		trigger = {
			exists = owner
			owner = { is_regular_empire = yes }
		}
		text = job_researcher_effect_desc
	}
	triggered_desc = {
		trigger = {
			exists = owner
			owner = { is_hive_empire = yes }
		}
		text = job_brain_drone_effect_desc
	}
	triggered_desc = {
		trigger = {
			exists = owner
			owner = { is_machine_empire = yes }
		}
		text = job_calculator_effect_desc
	}

	resources = {
		category = planet_buildings
		cost = {
			energy = 720
			alloys = 540
		}
		upkeep = {
			energy = 10
			exotic_gases = 2
		}
		upkeep = {
			trigger = {
				owner = {
					is_galactic_community_member = yes
				}
				is_active_resolution = "resolution_galacticstudies_extradimensional_experimentation"
				planet = {
					has_modifier = pm_extradimensional_experimentation
				}
			}
			sr_zro = 1
		}
	}
}

ag_ancient_structure_primitive = {
	capital = yes
	can_build = no
	can_demolish = yes
	can_be_ruined = no
	can_be_disabled = yes
	
	base_buildtime = 1440
	
	potential = {
		exists = owner
		owner = { 
			is_primitive = yes
			has_country_flag = ag_primitive_age
		}
	}

	destroy_trigger = {
		exists = owner
		owner = {
			is_primitive = no
		}
	}

	convert_to = {
		building_hive_capital
		building_machine_capital
		building_colony_shelter
	}
	
	planet_modifier = {
		job_ag_primitive_noble_add = 1
		job_ag_primitive_warrior_add = 1
		job_ag_primitive_researcher_add = 1
		job_ag_primitive_priest_add = 1
		planet_housing_add = 10
		planet_amenities_add = 25
		planet_crime_add = -10
	}

	resources = {
		category = planet_buildings
		cost = {
			energy = 720
			alloys = 540
		}
		produces = {
			energy = 5
			unity = 3
		}
	}
}
ag_primitive_dwellings = {
	capital = no
	can_build = no
	can_demolish = yes
	can_be_ruined = no
	can_be_disabled = yes
	
	icon = building_primitive_dwellings
	
	base_buildtime = 30
	
	potential = {
		exists = owner
		owner = { 
			is_primitive = yes
			has_country_flag = ag_primitive_age
		}
	}
	
	destroy_trigger = {
		owner = { 
			is_primitive = no
		}
	}
	
	planet_modifier = {
		planet_housing_add = 4
	}

	resources = {
		category = planet_buildings
		cost = {
			minerals = 30
		}
	}
}

ag_ancient_structure_primitive_2 = {
	capital = yes
	can_build = no
	can_demolish = yes
	can_be_ruined = no
	can_be_disabled = yes
	
	icon = ag_ancient_structure_primitive
	
	base_buildtime = 1440
	
	potential = {
		exists = owner
		owner = { 
			is_primitive = yes
			has_country_flag = ag_primitive_age_2
		}
	}

	destroy_trigger = {
		exists = owner
		owner = {
			is_primitive = no
		}
	}

	convert_to = {
		building_hive_capital
		building_machine_capital
		building_colony_shelter
	}
	
	planet_modifier = {
		job_ag_primitive_bureaucrat_add = 2
		job_ag_primitive_warrior_2_add = 2
		job_ag_primitive_researcher_2_add = 2
		job_ag_primitive_priest_2_add = 4
		planet_housing_add = 10
		planet_amenities_add = 25
		planet_crime_add = -20
	}

	resources = {
		category = planet_buildings
		cost = {
			energy = 720
			alloys = 540
		}
		produces = {
			energy = 5
			unity = 3
		}
	}
}
ag_urban_dwellings = {
	capital = no
	can_build = no
	can_demolish = yes
	can_be_ruined = no
	can_be_disabled = yes
	
	icon = building_residence
	
	base_buildtime = 1080
	
	potential = {
		exists = owner
		owner = { 
			is_primitive = yes
			has_country_flag = ag_primitive_age_2
		}
	}
	
	destroy_trigger = {
		owner = { 
			is_primitive = no
		}
	}

	resources = {
		category = planet_buildings
		cost = {
			minerals = 200
		}
	}
	
	planet_modifier = {
		planet_housing_add = 20
	}
}
ag_primitive_farm = {
	capital = no
	can_build = no
	can_demolish = yes
	can_be_ruined = no
	can_be_disabled = yes
	
	icon = building_primitive_farm
	
	base_buildtime = 1080
	
	potential = {
		exists = owner
		owner = { 
			is_primitive = yes
			has_country_flag = ag_primitive_age_2
		}
	}
	
	destroy_trigger = {
		owner = { 
			is_primitive = no
		}
	}

	resources = {
		category = planet_buildings
		cost = {
			minerals = 300
		}
	}
	
	planet_modifier = {
		job_ag_primitive_farmer_2_add = 10
	}
}
ag_primitive_power_plant = {
	capital = no
	can_build = no
	can_demolish = yes
	can_be_ruined = no
	can_be_disabled = yes
	
	base_buildtime = 540
	
	icon = building_primitive_power_plant
	
	potential = {
		exists = owner
		owner = { 
			is_primitive = yes
			has_country_flag = ag_primitive_age_2
		}
	}
	
	destroy_trigger = {
		owner = { 
			is_primitive = no
		}
	}

	resources = {
		category = planet_buildings
		cost = {
			minerals = 100
		}
	}
	
	planet_modifier = {
		job_ag_primitive_technician_add = 1
	}
}
ag_primitive_mine = {
	capital = no
	can_build = no
	can_demolish = yes
	can_be_ruined = no
	can_be_disabled = yes
	
	icon = building_primitive_mine
	
	base_buildtime = 1080
	
	potential = {
		exists = owner
		owner = { 
			is_primitive = yes
			has_country_flag = ag_primitive_age_2
		}
	}
	
	destroy_trigger = {
		owner = { 
			is_primitive = no
		}
	}

	resources = {
		category = planet_buildings
		cost = {
			minerals = 400
		}
	}
	
	planet_modifier = {
		job_ag_primitive_miner_add = 3
	}
}
ag_primitive_factory = {
	capital = no
	can_build = no
	can_demolish = yes
	can_be_ruined = no
	can_be_disabled = yes
	
	icon = ag_ancient_replicator
	
	base_buildtime = 1440
	
	potential = {
		exists = owner
		owner = { 
			is_primitive = yes
			has_country_flag = ag_primitive_age_2
		}
	}
	
	destroy_trigger = {
		owner = { 
			is_primitive = no
		}
	}

	resources = {
		category = planet_buildings
		cost = {
			energy = 720
			alloys = 540
		}
	}
	
	planet_modifier = {
		job_ag_primitive_laborer_add = 4
	}
}

####################################
#	Ancient Resource Buildings
####################################
ag_ancient_lab = {
	capital = no
	can_build = yes
	can_demolish = yes
	can_be_ruined = yes
	can_be_disabled = yes
	
	base_buildtime = 1440
	category = research
	
	potential = {
		has_major_upgraded_capital = yes
		NOR = {
			has_modifier = resort_colony
			has_modifier = slave_colony
		}
	}
	prerequisites = { "tech_ag_ancient_lab" }

	planet_modifier = {
		planet_jobs_physics_research_produces_mult = 0.02
		planet_jobs_society_research_produces_mult = 0.02
		planet_jobs_engineering_research_produces_mult = 0.02
		planet_housing_add = 8
		planet_amenities_add = 20
	}

	triggered_planet_modifier = {
		potential = {
			exists = owner
			owner = {
				is_regular_empire = yes
				NOT = { is_fallen_empire = yes }
			}
		}
		modifier = {
			job_head_researcher_add = 1
			job_researcher_add = 7
		}
	}
	triggered_planet_modifier = {
		potential = {
			exists = owner
			owner = { is_hive_empire = yes }
		}
		modifier = {
			job_brain_drone_add = 9
			planet_housing_add = 1
		}
	}
	triggered_planet_modifier = {
		potential = {
			exists = owner
			owner = {
				is_machine_empire = yes
				NOT = { is_fallen_empire = yes }
			}
		}
		modifier = {	
			job_calculator_add = 9
			planet_housing_add = 1
		}
	}
	triggered_planet_modifier = {
		potential = {
			exists = owner
			owner = {
				is_regular_empire = yes
				is_galactic_community_member = yes
			}
			is_active_resolution = "resolution_galacticstudies_extradimensional_experimentation"
			has_modifier = pm_extradimensional_experimentation
		}
		modifier = {
			job_dimensional_portal_researcher_add = 1
		}
	}
	triggered_planet_modifier = {
		potential = {
			exists = owner
			owner = {
				is_gestalt = yes
				is_galactic_community_member = yes
			}
			is_active_resolution = "resolution_galacticstudies_extradimensional_experimentation"
			has_modifier = pm_extradimensional_experimentation
		}
		modifier = {
			job_dimensional_portal_researcher_gestalt_add = 1
		}
	}

	triggered_desc = {
		trigger = {
			exists = owner
			owner = {
				is_regular_empire = yes
				NOT = { is_fallen_empire = yes }
			}
		}
		text = job_researcher_effect_desc
	}
	triggered_desc = {
		trigger = {
			exists = owner
			owner = { is_hive_empire = yes }
		}
		text = job_brain_drone_effect_desc
	}
	triggered_desc = {
		trigger = {
			exists = owner
			owner = {
				is_machine_empire = yes
				NOT = { is_fallen_empire = yes }
			}
		}
		text = job_calculator_effect_desc
	}

	resources = {
		category = planet_buildings
		cost = {
			energy = 720
			alloys = 540
			exotic_gases = 180
		}
		upkeep = {
			energy = 10
		}
		upkeep = {
			trigger = {
				exists = owner
				owner = { is_fallen_empire = no }
			}
			exotic_gases = 2
		}
		upkeep = {
			trigger = {
				exists = owner
				owner = {
					is_galactic_community_member = yes
					is_fallen_empire = no
				}
				is_active_resolution = "resolution_galacticstudies_extradimensional_experimentation"
				planet = {
					has_modifier = pm_extradimensional_experimentation
				}
			}
			sr_zro = 1
		}
		produces = {
			trigger = {
				exists = owner
				owner = {
					is_fallen_empire = yes
				}
			}
			physics_research = 75
			society_research = 75
			engineering_research = 75
		}
	}
}
ag_living_metal_forge = {
	can_build = yes
	can_demolish = yes
	can_be_ruined = yes
	can_be_disabled = yes
	
	base_buildtime = 1440
	category = manufacturing

	potential = { NOR = { has_modifier = resort_colony has_modifier = slave_colony } building_relaxed_basic_income_check = yes }
	allow = { has_upgraded_capital = yes buildings_upgrade_allow = yes }
	destroy_trigger = { OR = { has_modifier = resort_colony has_modifier = slave_colony } }

	triggered_planet_modifier = {
		potential = {
			exists = owner
			owner = {
				is_gestalt = no
				is_fallen_empire = no
			}
		}
		modifier = { job_ag_living_metal_fabricator_add = 3 }
	}
	triggered_planet_modifier = {
		potential = {
			exists = owner
			owner = {
				is_gestalt = yes
				is_fallen_empire = no
			}
		}
		modifier = { job_ag_living_metal_fabricator_gestalt_add = 3 }
	}
	triggered_planet_modifier = {
		potential = {
			exists = owner
			owner = {
				is_gestalt = no
				is_fallen_empire = no
				has_edict = ag_living_metal_subsidies
			}
		}
		modifier = { job_ag_living_metal_fabricator_add = 2 }
	}
	triggered_planet_modifier = {
		potential = {
			exists = owner
			owner = {
				is_gestalt = yes
				is_fallen_empire = no
				has_edict = ag_living_metal_subsidies_gestalt
			}
		}
		modifier = { job_ag_living_metal_fabricator_gestalt_add = 2 }
	}

	resources = {
		category = planet_buildings
		cost = {
			energy = 540
			alloys = 400
		}
		upkeep = {
			energy = 10
		}
		upkeep = {
			trigger = {
				exists = owner
				owner = { is_fallen_empire = yes }
			}
			energy = 10
			alloys = 10
		}
		produces = {
			trigger = {
				exists = owner
				owner = { is_fallen_empire = yes }
			}
			sr_living_metal = 10
		}
	}

	prerequisites = { "tech_ag_living_metal_forge" }

	triggered_desc = {
		trigger = {
			exists = owner
			owner = {
				is_gestalt = no
				is_fallen_empire = no
			}
		}
		text = job_ag_living_metal_fabricator_effect_desc
	}
	triggered_desc = {
		trigger = {
			exists = owner
			owner = {
				is_gestalt = yes
				is_fallen_empire = no
			}
		}
		text = job_ag_living_metal_fabricator_gestalt_effect_desc
	}
	ai_resource_production = {
		trigger = { always = yes }
		sr_living_metal = 2
	}
}
ag_nanites_assembly_plant = {
	can_build = yes
	can_demolish = yes
	can_be_ruined = yes
	can_be_disabled = yes
	
	base_buildtime = 1440
	category = manufacturing

	potential = { NOR = { has_modifier = resort_colony has_modifier = slave_colony } building_relaxed_basic_income_check = yes }
	allow = { has_upgraded_capital = yes buildings_upgrade_allow = yes }
	destroy_trigger = { OR = { has_modifier = resort_colony has_modifier = slave_colony } }

	triggered_planet_modifier = {
		potential = {
			exists = owner
			owner = {
				is_gestalt = no
				is_fallen_empire = no
			}
		}
		modifier = { job_ag_nanites_assembler_add = 3 }
	}
	triggered_planet_modifier = {
		potential = {
			exists = owner
			owner = {
				is_gestalt = yes
				is_fallen_empire = no
			}
		}
		modifier = { job_ag_nanites_assembler_gestalt_add = 3 }
	}
	triggered_planet_modifier = {
		potential = {
			exists = owner
			owner = {
				is_gestalt = no
				is_fallen_empire = no
				has_edict = ag_nanites_subsidies
			}
		}
		modifier = { job_ag_nanites_assembler_add = 2 }
	}
	triggered_planet_modifier = {
		potential = {
			exists = owner
			owner = {
				is_gestalt = yes
				is_fallen_empire = no
				has_edict = ag_nanites_subsidies_gestalt
			}
		}
		modifier = { job_ag_nanites_assembler_gestalt_add = 2 }
	}

	resources = {
		category = planet_buildings
		cost = {
			energy = 540
			alloys = 400
		}
		upkeep = {
			energy = 10
		}
		upkeep = {
			trigger = {
				exists = owner
				owner = { is_fallen_empire = yes }
			}
			alloys = 5
		}
		produces = {
			trigger = {
				exists = owner
				owner = { is_fallen_empire = yes }
			}
			nanites = 10
		}
	}

	prerequisites = { "tech_ag_nanites_assembly_plant" }

	triggered_desc = {
		trigger = {
			exists = owner
			owner = {
				is_gestalt = no
				is_fallen_empire = no
			}
		}
		text = job_ag_nanites_assembler_effect_desc
	}
	triggered_desc = {
		trigger = {
			exists = owner
			owner = {
				is_gestalt = yes
				is_fallen_empire = no
			}
		}
		text = job_ag_nanites_assembler_gestalt_effect_desc
	}
	ai_resource_production = {
		trigger = { always = yes }
		nanites = 2
	}
}
ag_dark_matter_plant = {
	can_build = yes
	can_demolish = yes
	can_be_ruined = yes
	can_be_disabled = yes
	
	base_buildtime = 1440
	category = manufacturing

	potential = { NOR = { has_modifier = resort_colony has_modifier = slave_colony } building_relaxed_basic_income_check = yes }
	allow = { has_upgraded_capital = yes buildings_upgrade_allow = yes }
	destroy_trigger = { OR = { has_modifier = resort_colony has_modifier = slave_colony } }

	triggered_planet_modifier = {
		potential = {
			exists = owner
			owner = {
				is_gestalt = no
				is_fallen_empire = no
			}
		}
		modifier = { job_ag_dark_matter_fabricator_add = 3 }
	}
	triggered_planet_modifier = {
		potential = {
			exists = owner
			owner = {
				is_gestalt = yes
				is_fallen_empire = no
			}
		}
		modifier = { job_ag_dark_matter_fabricator_gestalt_add = 3 }
	}
	triggered_planet_modifier = {
		potential = {
			exists = owner
			owner = {
				is_gestalt = no
				is_fallen_empire = no
				has_edict = ag_dark_matter_subsidies
			}
		}
		modifier = { job_ag_dark_matter_fabricator_add = 2 }
	}
	triggered_planet_modifier = {
		potential = {
			exists = owner
			owner = {
				is_gestalt = yes
				is_fallen_empire = no
				has_edict = ag_dark_matter_subsidies_gestalt
			}
		}
		modifier = { job_ag_dark_matter_fabricator_gestalt_add = 2 }
	}

	resources = {
		category = planet_buildings
		cost = {
			energy = 540
			alloys = 400
		}
		upkeep = {
			energy = 10
		}
		upkeep = {
			trigger = {
				exists = owner
				owner = { is_fallen_empire = yes }
			}
			energy = 50
		}
		produces = {
			trigger = {
				exists = owner
				owner = { is_fallen_empire = yes }
			}
			sr_dark_matter = 10
		}
	}

	prerequisites = { "tech_ag_dark_matter_plant" }

	triggered_desc = {
		trigger = {
			exists = owner
			owner = {
				is_gestalt = no
				is_fallen_empire = no
			}
		}
		text = job_ag_dark_matter_fabricator_effect_desc
	}
	triggered_desc = {
		trigger = {
			exists = owner
			owner = {
				is_gestalt = yes
				is_fallen_empire = no
			}
		}
		text = job_ag_dark_matter_fabricator_gestalt_effect_desc
	}
	ai_resource_production = {
		trigger = { always = yes }
		sr_dark_matter = 2
	}
}
ag_zro_refinery = {
	can_build = yes
	can_demolish = yes
	can_be_ruined = yes
	can_be_disabled = yes
	
	base_buildtime = 1440
	category = manufacturing

	potential = { NOR = { has_modifier = resort_colony has_modifier = slave_colony } building_relaxed_basic_income_check = yes }
	allow = { has_upgraded_capital = yes buildings_upgrade_allow = yes }
	destroy_trigger = { OR = { has_modifier = resort_colony has_modifier = slave_colony } }

	triggered_planet_modifier = {
		potential = {
			exists = owner
			owner = {
				is_gestalt = no
				is_fallen_empire = no
			}
		}
		modifier = { job_ag_zro_refiner_add = 3 }
	}
	triggered_planet_modifier = {
		potential = {
			exists = owner
			owner = {
				is_gestalt = yes
				is_fallen_empire = no
			}
		}
		modifier = { job_ag_zro_refiner_gestalt_add = 3 }
	}
	triggered_planet_modifier = {
		potential = {
			exists = owner
			owner = {
				is_gestalt = no
				is_fallen_empire = no
				has_edict = ag_zro_subsidies
			}
		}
		modifier = { job_ag_zro_refiner_add = 2 }
	}
	triggered_planet_modifier = {
		potential = {
			exists = owner
			owner = {
				is_gestalt = yes
				is_fallen_empire = no
				has_edict = ag_zro_subsidies_gestalt
			}
		}
		modifier = { job_ag_zro_refiner_gestalt_add = 2 }
	}

	resources = {
		category = planet_buildings
		cost = {
			energy = 540
			alloys = 400
		}
		upkeep = {
			energy = 10
		}
		upkeep = {
			trigger = {
				exists = owner
				owner = { is_fallen_empire = yes }
			}
			energy = 30
		}
		produces = {
			trigger = {
				exists = owner
				owner = { is_fallen_empire = yes }
			}
			sr_zro = 10
		}
	}

	prerequisites = { "tech_ag_zro_refinery" }

	triggered_desc = {
		trigger = {
			exists = owner
			owner = {
				is_gestalt = no
				is_fallen_empire = no
			}
		}
		text = job_ag_zro_refiner_effect_desc
	}
	triggered_desc = {
		trigger = {
			exists = owner
			owner = {
				is_gestalt = yes
				is_fallen_empire = no
			}
		}
		text = job_ag_zro_refiner_gestalt_effect_desc
	}
	ai_resource_production = {
		trigger = { always = yes }
		sr_zro = 2
	}
}
ag_living_metal_mining_station = {
	base_buildtime = 480
	is_capped_by_modifier = yes
	category = resource
	potential = { NOT = { has_modifier = resort_colony } }

	triggered_planet_modifier = {
		potential = {
			exists = owner
			owner = {
				is_gestalt = no
				is_fallen_empire = no
			}
		}
		modifier = { job_ag_living_metal_miner_add = 1 }
	}
	triggered_planet_modifier = {
		potential = {
			exists = owner
			owner = {
				is_gestalt = yes
				is_fallen_empire = no
			}
		}
		modifier = { job_ag_living_metal_miner_gestalt_add = 1 }
	}
	triggered_desc = {
		trigger = {
			exists = owner
			owner = {
				is_gestalt = no
				is_fallen_empire = no
			}
		}
		text = job_ag_living_metal_miner_effect_desc
	}
	triggered_desc = {
		trigger = {
			exists = owner
			owner = {
				is_gestalt = yes
				is_fallen_empire = no
			}
		}
		text = job_ag_living_metal_miner_gestalt_effect_desc
	}

	resources = {
		category = planet_buildings
		cost = {
			energy = 160
			alloys = 100
		}
		upkeep = { energy = 5 }
		produces = {
			trigger = {
				exists = owner
				owner = { is_fallen_empire = yes }
			}
			sr_living_metal = 5
		}
	}

	prerequisites = { "tech_ag_living_metal_mining_station" }
}
ag_nanites_mining_station = {
	base_buildtime = 480
	is_capped_by_modifier = yes
	category = resource
	potential = { NOT = { has_modifier = resort_colony } }

	triggered_planet_modifier = {
		potential = {
			exists = owner
			owner = {
				is_gestalt = no
				is_fallen_empire = no
			}
		}
		modifier = { job_ag_nanites_miner_add = 1 }
	}
	triggered_planet_modifier = {
		potential = {
			exists = owner
			owner = {
				is_gestalt = yes
				is_fallen_empire = no
			}
		}
		modifier = { job_ag_nanites_miner_gestalt_add = 1 }
	}
	triggered_desc = {
		trigger = {
			exists = owner
			owner = {
				is_gestalt = no
				is_fallen_empire = no
			}
		}
		text = job_ag_nanites_miner_effect_desc
	}
	triggered_desc = {
		trigger = {
			exists = owner
			owner = {
				is_gestalt = yes
				is_fallen_empire = no
			}
		}
		text = job_ag_nanites_miner_gestalt_effect_desc
	}

	resources = {
		category = planet_buildings
		cost = {
			energy = 160
			alloys = 100
		}
		upkeep = { energy = 5 }
		produces = {
			trigger = {
				exists = owner
				owner = { is_fallen_empire = yes }
			}
			nanites = 5
		}
	}

	prerequisites = { "tech_ag_nanites_mining_station" }
}
ag_dark_matter_mining_station = {
	base_buildtime = 480
	is_capped_by_modifier = yes
	category = resource
	potential = { NOT = { has_modifier = resort_colony } }

	triggered_planet_modifier = {
		potential = {
			exists = owner
			owner = {
				is_gestalt = no
				is_fallen_empire = no
			}
		}
		modifier = { job_ag_dark_matter_miner_add = 1 }
	}
	triggered_planet_modifier = {
		potential = {
			exists = owner
			owner = {
				is_gestalt = yes
				is_fallen_empire = no
			}
		}
		modifier = { job_ag_dark_matter_miner_gestalt_add = 1 }
	}
	triggered_desc = {
		trigger = {
			exists = owner
			owner = {
				is_gestalt = no
				is_fallen_empire = no
			}
		}
		text = job_ag_dark_matter_miner_effect_desc
	}
	triggered_desc = {
		trigger = {
			exists = owner
			owner = {
				is_gestalt = yes
				is_fallen_empire = no
			}
		}
		text = job_ag_dark_matter_miner_gestalt_effect_desc
	}

	resources = {
		category = planet_buildings
		cost = {
			energy = 160
			alloys = 100
		}
		upkeep = { energy = 5 }
		produces = {
			trigger = {
				exists = owner
				owner = { is_fallen_empire = yes }
			}
			sr_dark_matter = 5
		}
	}

	prerequisites = { "tech_ag_dark_matter_mining_station" }
}

####################################
#	Ancient Resource Buildings
####################################
ag_class_5_singularity = {
	capital = no
	can_build = yes
	can_demolish = yes
	can_be_ruined = no
	can_be_disabled = yes
	
	base_buildtime = 1080
	category = resource
	
	potential = {
		custom_tooltip = {
			fail_text = "ag_need_ancient_core"
			exists = owner
			owner = {
				check_variable = {
					which = ag_class_5_singularity_counter
					value > 0
				}
			}
		}
	}

	on_queued = {
		owner = {
			if = {
				limit = {
					check_variable = {
						which = ag_class_5_singularity_counter
						value > 0
					}
				}
				subtract_variable = {
					which = ag_class_5_singularity_counter
					value = 1
				}
			}
			else = {
				set_variable = {
					which = ag_class_5_singularity_counter
					value = 0
				}
			}
		}
	}

	on_unqueued = {
		owner = {
			change_variable = {
				which = ag_class_5_singularity_counter
				value = 1
			}
		}
	}

	resources = {
		category = planet_buildings
		cost = {
			energy = 540
			alloys = 720
		}
		produces = {
			energy = 1000.0
		}
	}
}
ag_matter_generator = {
	capital = no
	can_build = yes
	can_demolish = yes
	can_be_ruined = no
	can_be_disabled = yes
	
	base_buildtime = 1080
	category = resource
	
	potential = {
		custom_tooltip = {
			fail_text = "ag_need_ancient_core"
			exists = owner
			owner = {
				check_variable = {
					which = ag_matter_generator_counter
					value > 0
				}
			}
		}
	}

	on_queued = {
		owner = {
			if = {
				limit = {
					check_variable = {
						which = ag_matter_generator_counter
						value > 0
					}
				}
				subtract_variable = {
					which = ag_matter_generator_counter
					value = 1
				}
			}
			else = {
				set_variable = {
					which = ag_matter_generator_counter
					value = 0
				}
			}
		}
	}

	on_unqueued = {
		owner = {
			change_variable = {
				which = ag_matter_generator_counter
				value = 1
			}
		}
	}

	resources = {
		category = planet_buildings
		cost = {
			energy = 540
			alloys = 720
		}
		upkeep = {
			energy = 100.0
		}
		produces = {
			trigger = {
				exists = owner
				owner = { NOT = { has_deficit = energy } }
			}
			minerals = 200.0
			alloys = 100.0
			sr_living_metal = 50.0
			nanites = 50.0
			sr_dark_matter = 50.0
		}
	}
}
ag_fabrication_facility = {
	capital = no
	can_build = yes
	can_demolish = yes
	can_be_ruined = no
	can_be_disabled = yes
	
	base_buildtime = 1080
	category = resource
	
	potential = {
		custom_tooltip = {
			fail_text = "ag_need_ancient_core"
			exists = owner
			owner = {
				check_variable = {
					which = ag_fabrication_facility_counter
					value > 0
				}
			}
		}
	}

	on_queued = {
		owner = {
			if = {
				limit = {
					check_variable = {
						which = ag_fabrication_facility_counter
						value > 0
					}
				}
				subtract_variable = {
					which = ag_fabrication_facility_counter
					value = 1
				}
			}
			else = {
				set_variable = {
					which = ag_fabrication_facility_counter
					value = 0
				}
			}
		}
	}

	on_unqueued = {
		owner = {
			change_variable = {
				which = ag_fabrication_facility_counter
				value = 1
			}
		}
	}

	resources = {
		category = planet_buildings
		cost = {
			energy = 540
			alloys = 720
		}
		upkeep = {
			energy = 100.0
		}
		produces = {
			trigger = {
				exists = owner
				owner = { NOT = { has_deficit = energy } }
			}
			food = 300.0
			consumer_goods = 200.0
			rare_crystals = 75.0
		}
	}
}
ag_ancient_unknown_building = {
	capital = no
	can_build = yes
	can_demolish = yes
	can_be_ruined = no
	can_be_disabled = yes
	
	base_buildtime = 1080
	category = manufacturing
	
	potential = {
		custom_tooltip = {
			fail_text = "ag_need_ancient_core"
			exists = owner
			owner = {
				check_variable = {
					which = ag_ancient_unknown_building_counter
					value > 0
				}
			}
		}
	}

	on_queued = {
		owner = {
			if = {
				limit = {
					check_variable = {
						which = ag_ancient_unknown_building_counter
						value > 0
					}
				}
				subtract_variable = {
					which = ag_ancient_unknown_building_counter
					value = 1
				}
			}
			else = {
				set_variable = {
					which = ag_ancient_unknown_building_counter
					value = 0
				}
			}
		}
	}

	on_unqueued = {
		owner = {
			change_variable = {
				which = ag_ancient_unknown_building_counter
				value = 1
			}
		}
	}

	resources = {
		category = planet_buildings
		cost = {
			energy = 540
			alloys = 720
		}
		upkeep = {
			energy = 25.0
			alloys = 25.0
		}
		produces = {
			trigger = {
				owner = {
					NOR = {
						has_deficit = energy
						has_deficit = alloys
					}
				}
			}
			# 36 artifacts/10 years
			minor_artifacts = 0.3
		}
	}
}