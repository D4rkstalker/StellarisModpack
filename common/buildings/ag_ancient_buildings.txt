
####################################
#			Event Buildings
####################################
ag_ancient_structure_primitive = {
	capital = yes
	can_build = no
	can_demolish = yes
	can_be_ruined = no
	can_be_disabled = yes
	position_priority = 0
	
	base_buildtime = 1440
	
	potential = {
		exists = owner
		owner = { 
			is_primitive = yes
			has_country_flag = ag_primitive_age
		}
	}

	destroy_trigger = {
		exists = owner
		owner = {
			is_primitive = no
		}
	}

	convert_to = {
		building_hive_capital
		building_machine_capital
		building_colony_shelter
	}
	
	planet_modifier = {
		job_ag_primitive_noble_add = 1
		job_ag_primitive_warrior_add = 1
		job_ag_primitive_researcher_add = 1
		job_ag_primitive_priest_add = 1
		planet_housing_add = 10
		planet_amenities_add = 25
		planet_crime_add = -10
	}

	resources = {
		category = planet_buildings
		cost = {
			energy = 720
			alloys = 540
		}
		produces = {
			energy = 5
			unity = 3
		}
	}
}
ag_primitive_dwellings = {
	capital = no
	can_build = no
	can_demolish = yes
	can_be_ruined = no
	can_be_disabled = yes
	
	icon = building_primitive_dwellings
	
	base_buildtime = 30
	
	potential = {
		exists = owner
		owner = { 
			is_primitive = yes
			has_country_flag = ag_primitive_age
		}
	}
	
	destroy_trigger = {
		owner = { 
			is_primitive = no
		}
	}
	
	planet_modifier = {
		planet_housing_add = 4
	}

	resources = {
		category = planet_buildings
		cost = {
			minerals = 30
		}
	}
}

ag_ancient_structure_primitive_2 = {
	capital = yes
	can_build = no
	can_demolish = yes
	can_be_ruined = no
	can_be_disabled = yes
	position_priority = 0
	
	icon = ag_ancient_structure_primitive
	
	base_buildtime = 1440
	
	potential = {
		exists = owner
		owner = { 
			is_primitive = yes
			has_country_flag = ag_primitive_age_2
		}
	}

	destroy_trigger = {
		exists = owner
		owner = {
			is_primitive = no
		}
	}

	convert_to = {
		building_hive_capital
		building_machine_capital
		building_colony_shelter
	}
	
	planet_modifier = {
		job_ag_primitive_bureaucrat_add = 2
		job_ag_primitive_warrior_2_add = 2
		job_ag_primitive_researcher_2_add = 2
		job_ag_primitive_priest_2_add = 4
		planet_housing_add = 10
		planet_amenities_add = 25
		planet_crime_add = -20
	}

	resources = {
		category = planet_buildings
		cost = {
			energy = 720
			alloys = 540
		}
		produces = {
			energy = 5
			unity = 3
		}
	}
}
ag_urban_dwellings = {
	capital = no
	can_build = no
	can_demolish = yes
	can_be_ruined = no
	can_be_disabled = yes
	
	icon = building_residence
	
	base_buildtime = 1080
	
	potential = {
		exists = owner
		owner = { 
			is_primitive = yes
			has_country_flag = ag_primitive_age_2
		}
	}
	
	destroy_trigger = {
		owner = { 
			is_primitive = no
		}
	}

	resources = {
		category = planet_buildings
		cost = {
			minerals = 200
		}
	}
	
	planet_modifier = {
		planet_housing_add = 20
	}
}
ag_primitive_farm = {
	capital = no
	can_build = no
	can_demolish = yes
	can_be_ruined = no
	can_be_disabled = yes
	
	icon = building_primitive_farm
	
	base_buildtime = 1080
	
	potential = {
		exists = owner
		owner = { 
			is_primitive = yes
			has_country_flag = ag_primitive_age_2
		}
	}
	
	destroy_trigger = {
		owner = { 
			is_primitive = no
		}
	}

	resources = {
		category = planet_buildings
		cost = {
			minerals = 300
		}
	}
	
	planet_modifier = {
		job_ag_primitive_farmer_2_add = 10
	}
}
ag_primitive_power_plant = {
	capital = no
	can_build = no
	can_demolish = yes
	can_be_ruined = no
	can_be_disabled = yes
	
	base_buildtime = 540
	
	icon = building_primitive_power_plant
	
	potential = {
		exists = owner
		owner = { 
			is_primitive = yes
			has_country_flag = ag_primitive_age_2
		}
	}
	
	destroy_trigger = {
		owner = { 
			is_primitive = no
		}
	}

	resources = {
		category = planet_buildings
		cost = {
			minerals = 100
		}
	}
	
	planet_modifier = {
		job_ag_primitive_technician_add = 1
	}
}
ag_primitive_mine = {
	capital = no
	can_build = no
	can_demolish = yes
	can_be_ruined = no
	can_be_disabled = yes
	
	icon = building_primitive_mine
	
	base_buildtime = 1080
	
	potential = {
		exists = owner
		owner = { 
			is_primitive = yes
			has_country_flag = ag_primitive_age_2
		}
	}
	
	destroy_trigger = {
		owner = { 
			is_primitive = no
		}
	}

	resources = {
		category = planet_buildings
		cost = {
			minerals = 400
		}
	}
	
	planet_modifier = {
		job_ag_primitive_miner_add = 3
	}
}
ag_primitive_factory = {
	capital = no
	can_build = no
	can_demolish = yes
	can_be_ruined = no
	can_be_disabled = yes
	
	icon = ag_ancient_replicator
	
	base_buildtime = 1440
	
	potential = {
		exists = owner
		owner = { 
			is_primitive = yes
			has_country_flag = ag_primitive_age_2
		}
	}
	
	destroy_trigger = {
		owner = { 
			is_primitive = no
		}
	}

	resources = {
		category = planet_buildings
		cost = {
			energy = 720
			alloys = 540
		}
	}
	
	planet_modifier = {
		job_ag_primitive_laborer_add = 4
	}
}

####################################
#	Ancient Resource Buildings
####################################
ag_class_5_singularity = {
	capital = no
	can_build = yes
	can_demolish = yes
	can_be_ruined = no
	can_be_disabled = yes
	
	base_buildtime = 1080
	category = resource
	
	potential = {
		custom_tooltip = {
			fail_text = "ag_need_ancient_core"
			exists = owner
			owner = {
				check_variable = {
					which = ag_class_5_singularity_counter
					value > 0
				}
			}
		}
	}

	on_queued = {
		owner = {
			if = {
				limit = {
					check_variable = {
						which = ag_class_5_singularity_counter
						value > 0
					}
				}
				subtract_variable = {
					which = ag_class_5_singularity_counter
					value = 1
				}
			}
			else = {
				set_variable = {
					which = ag_class_5_singularity_counter
					value = 0
				}
			}
		}
	}

	on_unqueued = {
		owner = {
			change_variable = {
				which = ag_class_5_singularity_counter
				value = 1
			}
		}
	}

	resources = {
		category = planet_buildings
		cost = {
			energy = 540
			alloys = 720
		}
		produces = {
			energy = 1000.0
		}
	}
}
ag_matter_generator = {
	capital = no
	can_build = yes
	can_demolish = yes
	can_be_ruined = no
	can_be_disabled = yes
	
	base_buildtime = 1080
	category = resource
	
	potential = {
		custom_tooltip = {
			fail_text = "ag_need_ancient_core"
			exists = owner
			owner = {
				check_variable = {
					which = ag_matter_generator_counter
					value > 0
				}
			}
		}
	}

	on_queued = {
		owner = {
			if = {
				limit = {
					check_variable = {
						which = ag_matter_generator_counter
						value > 0
					}
				}
				subtract_variable = {
					which = ag_matter_generator_counter
					value = 1
				}
			}
			else = {
				set_variable = {
					which = ag_matter_generator_counter
					value = 0
				}
			}
		}
	}

	on_unqueued = {
		owner = {
			change_variable = {
				which = ag_matter_generator_counter
				value = 1
			}
		}
	}

	resources = {
		category = planet_buildings
		cost = {
			energy = 540
			alloys = 720
		}
		upkeep = {
			energy = 100.0
		}
		produces = {
			trigger = {
				exists = owner
				owner = { NOT = { has_deficit = energy } }
			}
			minerals = 200.0
			alloys = 100.0
			sr_living_metal = 50.0
			nanites = 50.0
			sr_dark_matter = 50.0
		}
	}
}
ag_fabrication_facility = {
	capital = no
	can_build = yes
	can_demolish = yes
	can_be_ruined = no
	can_be_disabled = yes
	
	base_buildtime = 1080
	category = resource
	
	potential = {
		custom_tooltip = {
			fail_text = "ag_need_ancient_core"
			exists = owner
			owner = {
				check_variable = {
					which = ag_fabrication_facility_counter
					value > 0
				}
			}
		}
	}

	on_queued = {
		owner = {
			if = {
				limit = {
					check_variable = {
						which = ag_fabrication_facility_counter
						value > 0
					}
				}
				subtract_variable = {
					which = ag_fabrication_facility_counter
					value = 1
				}
			}
			else = {
				set_variable = {
					which = ag_fabrication_facility_counter
					value = 0
				}
			}
		}
	}

	on_unqueued = {
		owner = {
			change_variable = {
				which = ag_fabrication_facility_counter
				value = 1
			}
		}
	}

	resources = {
		category = planet_buildings
		cost = {
			energy = 540
			alloys = 720
		}
		upkeep = {
			energy = 100.0
		}
		produces = {
			trigger = {
				exists = owner
				owner = { NOT = { has_deficit = energy } }
			}
			food = 300.0
			consumer_goods = 200.0
			rare_crystals = 75.0
		}
	}
}
ag_ancient_unknown_building = {
	capital = no
	can_build = yes
	can_demolish = yes
	can_be_ruined = no
	can_be_disabled = yes
	
	base_buildtime = 1080
	category = manufacturing
	
	potential = {
		custom_tooltip = {
			fail_text = "ag_need_ancient_core"
			exists = owner
			owner = {
				check_variable = {
					which = ag_ancient_unknown_building_counter
					value > 0
				}
			}
		}
	}

	on_queued = {
		owner = {
			if = {
				limit = {
					check_variable = {
						which = ag_ancient_unknown_building_counter
						value > 0
					}
				}
				subtract_variable = {
					which = ag_ancient_unknown_building_counter
					value = 1
				}
			}
			else = {
				set_variable = {
					which = ag_ancient_unknown_building_counter
					value = 0
				}
			}
		}
	}

	on_unqueued = {
		owner = {
			change_variable = {
				which = ag_ancient_unknown_building_counter
				value = 1
			}
		}
	}

	resources = {
		category = planet_buildings
		cost = {
			energy = 540
			alloys = 720
		}
		upkeep = {
			energy = 25.0
			alloys = 25.0
		}
		produces = {
			trigger = {
				owner = {
					NOR = {
						has_deficit = energy
						has_deficit = alloys
					}
				}
			}
			# 36 artifacts/10 years
			minor_artifacts = 0.3
		}
	}
}