#capitals
building_sleeper_capital = {
	capital = yes
	can_build = no
	can_demolish = no
	can_be_ruined = no
	can_be_disabled = no

	category = government
	
	potential = {
		exists = owner
		owner = { is_sleeper = yes }
	}
	
	convert_to = {
		building_machine_major_capital
		building_major_capital
		building_hive_major_capital
	}
	
	planet_modifier = {
		planet_housing_add = 20
		planet_amenities_add = 20
		job_synapse_drone_add = 2
		job_maintenance_drone_add = 2
		job_patrol_drone_add = 8
		planet_stability_add = 20
	}
	
	triggered_planet_modifier = {
		potential = {
			exists = owner
			owner = { is_country_type = awakened_sleeper }
		}
		modifier = {
			job_synapse_drone_add = 8
			job_patrol_drone_add = 5
			job_spawning_drone_add = 2
			planet_amenities_add = 5
			planet_stability_add = -5
		}
	}
	
	resources = {
		category = planet_buildings		
		upkeep = {
			energy = 4
		}
	}
	
	triggered_desc = {
		text = job_synapse_drone_effect_desc
	}	

	triggered_desc = {
		text = job_maintenance_drone_effect_desc
	}	
	
	triggered_desc = {
		text = job_patrol_drone_effect_desc
	}		

	ai_weight = {
		weight = 100
	}
}

#border capitals
building_drone_capital = {
	capital = yes
	can_build = no
	can_demolish = no
	can_be_ruined = no
	can_be_disabled = no

	category = government
	
	potential = {
		exists = owner
		owner = { 
			OR = {
				is_country_type = the_sleeper_fallen
				is_country_type = berserker_awoken_hive
			}
		}
	}
	
	convert_to = {
		building_machine_capital
		building_capital
		building_hive_capital
	}
	
	planet_modifier = {
		planet_amenities_add = 20
		job_synapse_drone_add = 1
		job_maintenance_drone_add = 2
		job_patrol_drone_add = 2
		planet_stability_add = 10
	}
	
	resources = {
		category = planet_buildings		
		upkeep = {
			energy = 4
		}
	}
	
	triggered_desc = {
		text = job_synapse_drone_effect_desc
	}	

	triggered_desc = {
		text = job_maintenance_drone_effect_desc
	}	
	
	triggered_desc = {
		text = job_patrol_drone_effect_desc
	}		

	ai_weight = {
		weight = 100
	}
}

#mega foundry
building_sleeper_foundry = {
	can_build = no

	category = manufacturing
	
	potential = {
		exists = owner
	}

	triggered_planet_modifier = {
		potential = {
			exists = owner
			owner = { is_country_type = the_sleeper_fallen }
		}
		modifier = {
			job_alloy_drone_add = 2
		}
	}

	triggered_planet_modifier = {
		potential = {
			exists = owner
			owner = { 
				is_hive_empire = yes
				NOT = { is_country_type = the_sleeper_fallen }
			}
		}
		modifier = {
			job_alloy_drone_add = 25
		}
	}

	triggered_planet_modifier = {
		potential = {
			exists = owner
			owner = { is_machine_empire = yes }
		}
		modifier = {
			job_fabricator_add = 25
		}
	}
	
	triggered_planet_modifier = {
		potential = {
			exists = owner
			owner = { is_regular_empire = yes }
		}
		modifier = {
			job_foundry_add = 25
		}
	}
	
	resources = {
		category = planet_buildings
		upkeep = {
			energy = 4
		}
	}

	triggered_desc = {
		trigger = { 
			exists = owner
			owner = { is_regular_empire = yes } 
		}
		text = job_foundry_effect_desc
	}
	
	triggered_desc = {
		trigger = { 
			exists = owner
			owner = { is_hive_empire = yes } 
		}
		text = job_alloy_drone_effect_desc
	}
	
	triggered_desc = {
		trigger = { 
			exists = owner
			owner = { is_machine_empire = yes } 
		}
		text = job_fabricator_effect_desc
	}
	
	ai_weight = {
		weight = 0
	}

	ai_resource_production = {
		alloys = 1
		trigger = {
			always = yes
		}
	}
}

#mega fortress
building_sleeper_fortress = {
	can_build = no
	planetary_ftl_inhibitor = yes
	add_to_first_building_slot = yes

	category = army
	
	potential = {
		exists = owner
		owner = { has_authority = auth_hive_mind }
	}
	
	allow = {
	}
	
	convert_to = {
		building_stronghold
	}
	
	planet_modifier = {
		planet_housing_add = 8
	}
	
	triggered_planet_modifier = {
		potential = {
			owner = { is_gestalt = yes }
			NOT = { has_modifier = sleeper_drone_planet }
		}
		modifier = {
			job_warrior_drone_add = 8
		}
	}

	triggered_planet_modifier = {
		potential = {
			owner = { is_gestalt = yes }
			has_modifier = sleeper_drone_planet
		}
		modifier = {
			job_warrior_drone_add = 2
		}
	}

	resources = {
		category = planet_buildings		
		upkeep = {
			energy = 6
		}
	}
	
	prerequisites = {
	}
	
	triggered_desc = {
		trigger = {
			exists = owner
			owner = { is_gestalt = yes }
		}
		text = job_warrior_drone_effect_desc
	}
	
	ai_weight = {
		weight = 0
	}
}

#rotting warrens
building_sleeper_rotting_warrens = {
	can_build = no

	category = army
	
	potential = {
		exists = owner
		NOT = {
			owner = { is_country_type = awakened_sleeper }
		}
	}
	
	allow = {
	}

	convert_to = {
		building_sleeper_restored_warrens
	}
	
	triggered_planet_modifier = {
		potential = {
			exists = owner
			OR = {
				AND = {
					owner = { is_sleeper = yes }
					NOT = {
						owner = { is_country_type = awakened_sleeper }
					}
				}
			}
		}
		planet_housing_add = 10
		planet_amenities_add = 10
	}
	
	resources = {
		category = planet_buildings
		produces = {
			trigger = {
				exists = owner
				NOR = {
					owner = { is_sleeper = yes }
				}
			}
			society_research = 20
		}
		upkeep = {
			energy = 1
		}
	}
	
	prerequisites = {
	}
	
	triggered_desc = {
		trigger = {
			exists = owner
			OR = {
				owner = { is_sleeper = yes }
			}
		}
		text = job_sleeper_still_drone_effect_desc
	}
	
	ai_weight = {
		weight = 0
	}
}

#restored warrens
building_sleeper_restored_warrens = {
	can_build = no
	icon = building_expanded_warren

	category = army
	
	potential = {
		exists = owner
	}
	
	triggered_planet_modifier = {
		potential = {
			exists = owner
			owner = { is_sleeper = yes }
		}
		planet_housing_add = 12
		planet_amenities_add = 10
		job_alloy_drone_add = 2
		job_mining_drone_add = 2
		job_technician_drone_add = 2
		job_maintenance_drone_add = 2
	}
	
	resources = {
		category = planet_buildings
		produces = {
			trigger = {
				exists = owner
				NOT = {
					owner = { is_sleeper = yes }
				}
			}
			society_research = 30
		}
		upkeep = {
			energy = 1
		}
	}
	
	prerequisites = {
	}
	
	ai_weight = {
		weight = 0
	}
}

#Seasoning fabricator
building_sleeper_seasoning_fabricator = {
	base_buildtime = 360
	can_build = no

	category = army
	
	potential = {
		exists = owner
	}
	
	allow = {
	}
	
	planet_modifier = {
	}
	
	triggered_planet_modifier = {
		potential = {
			exists = owner
			owner = { is_gestalt = yes }
		}
		modifier = {
			job_agri_drone_add = 5
		}
	}
	
	triggered_planet_modifier = {
		potential = {
			exists = owner
			owner = { is_regular_empire = yes }
		}
		modifier = {
			job_farmer_add = 5
		}
	}

	triggered_desc = {
		trigger = {
			exists = owner
			owner = { is_gestalt = yes }
		}
		text = job_agri_drone_effect_desc
	}
	triggered_desc = {
		trigger = {
			exists = owner
			owner = { is_gestalt = no }
		}
		text = job_farmer_effect_desc
	}
	
	resources = {
		category = planet_buildings		
		upkeep = {
			energy = 6
		}
	}
	
	prerequisites = {
	}
	
	ai_weight = {
		weight = 0
	}
}

#Livestock pens
building_sleeper_livestock_pens = {
	base_buildtime = 360
	can_build = no

	category = army
	
	potential = {
		exists = owner
		owner = { is_sleeper = yes }
	}
	
	allow = {
	}
	
	planet_modifier = {
		planet_housing_add = 20
		planet_amenities_add = 10
		job_patrol_drone_add = 2
	}
	
	triggered_planet_modifier = {
		potential = {
			exists = owner
			owner = { is_country_type = awakened_sleeper }
		}
		modifier = {
			planet_housing_add = 5
			planet_stability_add = 5
			job_patrol_drone_add = 1
			planet_amenities_add = 10
			planet_housing_add = 5
		}
	}

	resources = {
		category = planet_buildings
		cost = {
			minerals = 400
		}			
		upkeep = {
			energy = 2
		}
	}
	
	prerequisites = {
	}
	
	triggered_desc = {
		text = job_patrol_drone_effect_desc
	}
	
	ai_weight = {
		weight = 0
	}
}
