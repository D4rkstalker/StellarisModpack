
####################################
#		Research Buildings
####################################
ag_ancient_structure = {
	capital = no
	can_build = no
	can_demolish = yes
	can_be_ruined = yes
	can_be_disabled = yes
	
	icon = ag_ancient_lab_2
	
	base_buildtime = 1440
	category = research
	
	potential = {
		always = no
	}

	planet_modifier = {
		planet_jobs_physics_research_produces_mult = 0.02
		planet_jobs_society_research_produces_mult = 0.02
		planet_jobs_engineering_research_produces_mult = 0.02
		planet_housing_add = 8
		planet_amenities_add = 20
	}
	
	triggered_planet_modifier = {
		potential = {
			exists = owner
			owner = { is_regular_empire = yes }
		}
		modifier = {
			job_head_researcher_add = 1
			job_researcher_add = 7
		}
	}
	triggered_planet_modifier = {
		potential = {
			exists = owner
			owner = { is_hive_empire = yes }
		}
		modifier = {
			job_brain_drone_add = 9
			planet_housing_add = 1
		}
	}
	triggered_planet_modifier = {
		potential = {
			exists = owner
			owner = { is_machine_empire = yes }
		}
		modifier = {	
			job_calculator_add = 9
			planet_housing_add = 1
		}
	}
	triggered_planet_modifier = {
		potential = {
			exists = owner
			owner = {
				is_regular_empire = yes
				is_galactic_community_member = yes
			}
			is_active_resolution = "resolution_galacticstudies_extradimensional_experimentation"
			has_modifier = pm_extradimensional_experimentation
		}
		modifier = {
			job_dimensional_portal_researcher_add = 1
		}
	}
	triggered_planet_modifier = {
		potential = {
			exists = owner
			owner = {
				is_gestalt = yes
				is_galactic_community_member = yes
			}
			is_active_resolution = "resolution_galacticstudies_extradimensional_experimentation"
			has_modifier = pm_extradimensional_experimentation
		}
		modifier = {
			job_dimensional_portal_researcher_gestalt_add = 1
		}
	}

	triggered_desc = {
		trigger = {
			exists = owner
			owner = { is_regular_empire = yes }
		}
		text = job_researcher_effect_desc
	}
	triggered_desc = {
		trigger = {
			exists = owner
			owner = { is_hive_empire = yes }
		}
		text = job_brain_drone_effect_desc
	}
	triggered_desc = {
		trigger = {
			exists = owner
			owner = { is_machine_empire = yes }
		}
		text = job_calculator_effect_desc
	}

	resources = {
		category = planet_buildings
		cost = {
			energy = 720
			alloys = 540
		}
		upkeep = {
			energy = 10
			exotic_gases = 2
		}
		upkeep = {
			trigger = {
				owner = {
					is_galactic_community_member = yes
				}
				is_active_resolution = "resolution_galacticstudies_extradimensional_experimentation"
				planet = {
					has_modifier = pm_extradimensional_experimentation
				}
			}
			sr_zro = 1
		}
	}
}
ag_ancient_lab = {
	capital = no
	can_build = yes
	can_demolish = yes
	can_be_ruined = yes
	can_be_disabled = yes
	
	base_buildtime = 1440
	category = research
	
	potential = {
		has_major_upgraded_capital = yes
		NOR = {
			has_modifier = resort_colony
			has_modifier = slave_colony
		}
	}
	prerequisites = { "tech_ag_ancient_lab" }

	planet_modifier = {
		planet_jobs_physics_research_produces_mult = 0.02
		planet_jobs_society_research_produces_mult = 0.02
		planet_jobs_engineering_research_produces_mult = 0.02
		planet_housing_add = 8
		planet_amenities_add = 20
	}

	triggered_planet_modifier = {
		potential = {
			exists = owner
			owner = {
				is_regular_empire = yes
				NOT = { is_fallen_empire = yes }
			}
		}
		modifier = {
			job_head_researcher_add = 1
			job_researcher_add = 7
		}
	}
	triggered_planet_modifier = {
		potential = {
			exists = owner
			owner = { is_hive_empire = yes }
		}
		modifier = {
			job_brain_drone_add = 9
			planet_housing_add = 1
		}
	}
	triggered_planet_modifier = {
		potential = {
			exists = owner
			owner = {
				is_machine_empire = yes
				NOT = { is_fallen_empire = yes }
			}
		}
		modifier = {	
			job_calculator_add = 9
			planet_housing_add = 1
		}
	}
	triggered_planet_modifier = {
		potential = {
			exists = owner
			owner = {
				is_regular_empire = yes
				is_galactic_community_member = yes
			}
			is_active_resolution = "resolution_galacticstudies_extradimensional_experimentation"
			has_modifier = pm_extradimensional_experimentation
		}
		modifier = {
			job_dimensional_portal_researcher_add = 1
		}
	}
	triggered_planet_modifier = {
		potential = {
			exists = owner
			owner = {
				is_gestalt = yes
				is_galactic_community_member = yes
			}
			is_active_resolution = "resolution_galacticstudies_extradimensional_experimentation"
			has_modifier = pm_extradimensional_experimentation
		}
		modifier = {
			job_dimensional_portal_researcher_gestalt_add = 1
		}
	}

	triggered_desc = {
		trigger = {
			exists = owner
			owner = {
				is_regular_empire = yes
				NOT = { is_fallen_empire = yes }
			}
		}
		text = job_researcher_effect_desc
	}
	triggered_desc = {
		trigger = {
			exists = owner
			owner = { is_hive_empire = yes }
		}
		text = job_brain_drone_effect_desc
	}
	triggered_desc = {
		trigger = {
			exists = owner
			owner = {
				is_machine_empire = yes
				NOT = { is_fallen_empire = yes }
			}
		}
		text = job_calculator_effect_desc
	}

	resources = {
		category = planet_buildings
		cost = {
			energy = 720
			alloys = 540
			exotic_gases = 180
		}
		upkeep = {
			energy = 10
		}
		upkeep = {
			trigger = {
				exists = owner
				owner = { is_fallen_empire = no }
			}
			exotic_gases = 2
		}
		upkeep = {
			trigger = {
				exists = owner
				owner = {
					is_galactic_community_member = yes
					is_fallen_empire = no
				}
				is_active_resolution = "resolution_galacticstudies_extradimensional_experimentation"
				planet = {
					has_modifier = pm_extradimensional_experimentation
				}
			}
			sr_zro = 1
		}
		produces = {
			trigger = {
				exists = owner
				owner = {
					is_fallen_empire = yes
				}
			}
			physics_research = 75
			society_research = 75
			engineering_research = 75
		}
	}
}

####################################
#		Army Buildings
####################################
ag_ancient_fortress = {
	base_buildtime = 540
	planetary_ftl_inhibitor = yes
	can_be_disabled = no
	can_be_ruined = no
	position_priority = 2
	base_cap_amount = 1

	category = army

	potential = { exists = owner }
	allow = { has_major_upgraded_capital = yes }

	planet_modifier = {
		planet_housing_add = 6
		planet_orbital_bombardment_damage = -0.50
	}
	
	army_modifier = {
		army_defense_damage_mult = 0.5
		army_defense_health_mult = 1.0
		army_defense_morale_mult = 0.5
		army_starting_experience_add = 100
	}
	
	triggered_planet_modifier = {
		potential = {
			exists = owner
			owner = {
				is_gestalt = no
				is_fallen_empire = no
			}
		}
		modifier = { job_soldier_add = 6 }
	}
	triggered_planet_modifier = {
		potential = {
			exists = owner
			owner = {
				is_gestalt = yes
				is_fallen_empire = no
			}
		}
		modifier = { job_warrior_drone_add = 6 }
	}
	triggered_planet_modifier = {
		potential = {
			exists = owner
			owner = { is_fallen_empire = yes }
		}
		modifier = { job_fe_protector_add = 6 }
	}
	
	prerequisites = { "tech_ag_ancient_fortress" }

	resources = {
		category = planet_buildings_strongholds
		cost = { minerals = 200 alloys = 400 }
		upkeep = { energy = 8 alloys = 2 }
		upkeep = {
			trigger = { planet = { has_orbital_bombardment = yes } }
			energy = 72
		}
	}
	
	triggered_desc = { trigger = { always = yes } text = "ag_ancient_fortress_effect" }
	triggered_desc = {
		trigger = {
			exists = owner
			owner = {
				is_gestalt = no
				is_fallen_empire = no
			}
		}
		text = job_soldier_effect_desc
	}
	triggered_desc = {
		trigger = {
			exists = owner
			owner = {
				is_gestalt = yes
				is_fallen_empire = no
			}
		}
		text = job_warrior_drone_effect_desc
	}
	triggered_desc = {
		trigger = {
			exists = owner
			owner = {
				is_fallen_empire = yes
			}
		}
		text = job_fe_protector_effect_desc
	}
}

####################################
#		Resources Buildings
####################################
ag_living_metal_forge = {
	can_build = yes
	can_demolish = yes
	can_be_ruined = yes
	can_be_disabled = yes
	
	base_buildtime = 1440
	category = manufacturing

	potential = { NOR = { has_modifier = resort_colony has_modifier = slave_colony } building_relaxed_basic_income_check = yes }
	allow = { has_upgraded_capital = yes buildings_upgrade_allow = yes }
	destroy_trigger = { OR = { has_modifier = resort_colony has_modifier = slave_colony } }

	triggered_planet_modifier = {
		potential = {
			exists = owner
			owner = {
				is_gestalt = no
				is_fallen_empire = no
			}
		}
		modifier = { job_ag_living_metal_fabricator_add = 3 }
	}
	triggered_planet_modifier = {
		potential = {
			exists = owner
			owner = {
				is_gestalt = yes
				is_fallen_empire = no
			}
		}
		modifier = { job_ag_living_metal_fabricator_gestalt_add = 3 }
	}
	triggered_planet_modifier = {
		potential = {
			exists = owner
			owner = {
				is_gestalt = no
				is_fallen_empire = no
				has_edict = ag_living_metal_subsidies
			}
		}
		modifier = { job_ag_living_metal_fabricator_add = 2 }
	}
	triggered_planet_modifier = {
		potential = {
			exists = owner
			owner = {
				is_gestalt = yes
				is_fallen_empire = no
				has_edict = ag_living_metal_subsidies_gestalt
			}
		}
		modifier = { job_ag_living_metal_fabricator_gestalt_add = 2 }
	}

	resources = {
		category = planet_buildings
		cost = {
			energy = 540
			alloys = 400
		}
		upkeep = {
			energy = 10
		}
		upkeep = {
			trigger = {
				exists = owner
				owner = { is_fallen_empire = yes }
			}
			energy = 10
			alloys = 10
		}
		produces = {
			trigger = {
				exists = owner
				owner = { is_fallen_empire = yes }
			}
			sr_living_metal = 10
		}
	}

	prerequisites = { "tech_ag_living_metal_forge" }

	triggered_desc = {
		trigger = {
			exists = owner
			owner = {
				is_gestalt = no
				is_fallen_empire = no
			}
		}
		text = job_ag_living_metal_fabricator_effect_desc
	}
	triggered_desc = {
		trigger = {
			exists = owner
			owner = {
				is_gestalt = yes
				is_fallen_empire = no
			}
		}
		text = job_ag_living_metal_fabricator_gestalt_effect_desc
	}
	ai_resource_production = {
		trigger = { always = yes }
		sr_living_metal = 2
	}
}
ag_nanites_assembly_plant = {
	can_build = yes
	can_demolish = yes
	can_be_ruined = yes
	can_be_disabled = yes
	
	base_buildtime = 1440
	category = manufacturing

	potential = { NOR = { has_modifier = resort_colony has_modifier = slave_colony } building_relaxed_basic_income_check = yes }
	allow = { has_upgraded_capital = yes buildings_upgrade_allow = yes }
	destroy_trigger = { OR = { has_modifier = resort_colony has_modifier = slave_colony } }

	triggered_planet_modifier = {
		potential = {
			exists = owner
			owner = {
				is_gestalt = no
				is_fallen_empire = no
			}
		}
		modifier = { job_ag_nanites_assembler_add = 3 }
	}
	triggered_planet_modifier = {
		potential = {
			exists = owner
			owner = {
				is_gestalt = yes
				is_fallen_empire = no
			}
		}
		modifier = { job_ag_nanites_assembler_gestalt_add = 3 }
	}
	triggered_planet_modifier = {
		potential = {
			exists = owner
			owner = {
				is_gestalt = no
				is_fallen_empire = no
				has_edict = ag_nanites_subsidies
			}
		}
		modifier = { job_ag_nanites_assembler_add = 2 }
	}
	triggered_planet_modifier = {
		potential = {
			exists = owner
			owner = {
				is_gestalt = yes
				is_fallen_empire = no
				has_edict = ag_nanites_subsidies_gestalt
			}
		}
		modifier = { job_ag_nanites_assembler_gestalt_add = 2 }
	}

	resources = {
		category = planet_buildings
		cost = {
			energy = 540
			alloys = 400
		}
		upkeep = {
			energy = 10
		}
		upkeep = {
			trigger = {
				exists = owner
				owner = { is_fallen_empire = yes }
			}
			alloys = 5
		}
		produces = {
			trigger = {
				exists = owner
				owner = { is_fallen_empire = yes }
			}
			nanites = 10
		}
	}

	prerequisites = { "tech_ag_nanites_assembly_plant" }

	triggered_desc = {
		trigger = {
			exists = owner
			owner = {
				is_gestalt = no
				is_fallen_empire = no
			}
		}
		text = job_ag_nanites_assembler_effect_desc
	}
	triggered_desc = {
		trigger = {
			exists = owner
			owner = {
				is_gestalt = yes
				is_fallen_empire = no
			}
		}
		text = job_ag_nanites_assembler_gestalt_effect_desc
	}
	ai_resource_production = {
		trigger = { always = yes }
		nanites = 2
	}
}
ag_dark_matter_plant = {
	can_build = yes
	can_demolish = yes
	can_be_ruined = yes
	can_be_disabled = yes
	
	base_buildtime = 1440
	category = manufacturing

	potential = { NOR = { has_modifier = resort_colony has_modifier = slave_colony } building_relaxed_basic_income_check = yes }
	allow = { has_upgraded_capital = yes buildings_upgrade_allow = yes }
	destroy_trigger = { OR = { has_modifier = resort_colony has_modifier = slave_colony } }

	triggered_planet_modifier = {
		potential = {
			exists = owner
			owner = {
				is_gestalt = no
				is_fallen_empire = no
			}
		}
		modifier = { job_ag_dark_matter_fabricator_add = 3 }
	}
	triggered_planet_modifier = {
		potential = {
			exists = owner
			owner = {
				is_gestalt = yes
				is_fallen_empire = no
			}
		}
		modifier = { job_ag_dark_matter_fabricator_gestalt_add = 3 }
	}
	triggered_planet_modifier = {
		potential = {
			exists = owner
			owner = {
				is_gestalt = no
				is_fallen_empire = no
				has_edict = ag_dark_matter_subsidies
			}
		}
		modifier = { job_ag_dark_matter_fabricator_add = 2 }
	}
	triggered_planet_modifier = {
		potential = {
			exists = owner
			owner = {
				is_gestalt = yes
				is_fallen_empire = no
				has_edict = ag_dark_matter_subsidies_gestalt
			}
		}
		modifier = { job_ag_dark_matter_fabricator_gestalt_add = 2 }
	}

	resources = {
		category = planet_buildings
		cost = {
			energy = 540
			alloys = 400
		}
		upkeep = {
			energy = 10
		}
		upkeep = {
			trigger = {
				exists = owner
				owner = { is_fallen_empire = yes }
			}
			energy = 50
		}
		produces = {
			trigger = {
				exists = owner
				owner = { is_fallen_empire = yes }
			}
			sr_dark_matter = 10
		}
	}

	prerequisites = { "tech_ag_dark_matter_plant" }

	triggered_desc = {
		trigger = {
			exists = owner
			owner = {
				is_gestalt = no
				is_fallen_empire = no
			}
		}
		text = job_ag_dark_matter_fabricator_effect_desc
	}
	triggered_desc = {
		trigger = {
			exists = owner
			owner = {
				is_gestalt = yes
				is_fallen_empire = no
			}
		}
		text = job_ag_dark_matter_fabricator_gestalt_effect_desc
	}
	ai_resource_production = {
		trigger = { always = yes }
		sr_dark_matter = 2
	}
}
ag_zro_refinery = {
	can_build = yes
	can_demolish = yes
	can_be_ruined = yes
	can_be_disabled = yes
	
	base_buildtime = 1440
	category = manufacturing

	potential = { NOR = { has_modifier = resort_colony has_modifier = slave_colony } building_relaxed_basic_income_check = yes }
	allow = { has_upgraded_capital = yes buildings_upgrade_allow = yes }
	destroy_trigger = { OR = { has_modifier = resort_colony has_modifier = slave_colony } }

	triggered_planet_modifier = {
		potential = {
			exists = owner
			owner = {
				is_gestalt = no
				is_fallen_empire = no
			}
		}
		modifier = { job_ag_zro_refiner_add = 3 }
	}
	triggered_planet_modifier = {
		potential = {
			exists = owner
			owner = {
				is_gestalt = yes
				is_fallen_empire = no
			}
		}
		modifier = { job_ag_zro_refiner_gestalt_add = 3 }
	}
	triggered_planet_modifier = {
		potential = {
			exists = owner
			owner = {
				is_gestalt = no
				is_fallen_empire = no
				has_edict = ag_zro_subsidies
			}
		}
		modifier = { job_ag_zro_refiner_add = 2 }
	}
	triggered_planet_modifier = {
		potential = {
			exists = owner
			owner = {
				is_gestalt = yes
				is_fallen_empire = no
				has_edict = ag_zro_subsidies_gestalt
			}
		}
		modifier = { job_ag_zro_refiner_gestalt_add = 2 }
	}

	resources = {
		category = planet_buildings
		cost = {
			energy = 540
			alloys = 400
		}
		upkeep = {
			energy = 10
		}
		upkeep = {
			trigger = {
				exists = owner
				owner = { is_fallen_empire = yes }
			}
			energy = 30
		}
		produces = {
			trigger = {
				exists = owner
				owner = { is_fallen_empire = yes }
			}
			sr_zro = 10
		}
	}

	prerequisites = { "tech_ag_zro_refinery" }

	triggered_desc = {
		trigger = {
			exists = owner
			owner = {
				is_gestalt = no
				is_fallen_empire = no
			}
		}
		text = job_ag_zro_refiner_effect_desc
	}
	triggered_desc = {
		trigger = {
			exists = owner
			owner = {
				is_gestalt = yes
				is_fallen_empire = no
			}
		}
		text = job_ag_zro_refiner_gestalt_effect_desc
	}
	ai_resource_production = {
		trigger = { always = yes }
		sr_zro = 2
	}
}
ag_living_metal_mining_station = {
	base_buildtime = 480
	is_capped_by_modifier = yes
	category = resource
	potential = { NOT = { has_modifier = resort_colony } }

	triggered_planet_modifier = {
		potential = {
			exists = owner
			owner = {
				is_gestalt = no
				is_fallen_empire = no
			}
		}
		modifier = { job_ag_living_metal_miner_add = 1 }
	}
	triggered_planet_modifier = {
		potential = {
			exists = owner
			owner = {
				is_gestalt = yes
				is_fallen_empire = no
			}
		}
		modifier = { job_ag_living_metal_miner_gestalt_add = 1 }
	}
	triggered_desc = {
		trigger = {
			exists = owner
			owner = {
				is_gestalt = no
				is_fallen_empire = no
			}
		}
		text = job_ag_living_metal_miner_effect_desc
	}
	triggered_desc = {
		trigger = {
			exists = owner
			owner = {
				is_gestalt = yes
				is_fallen_empire = no
			}
		}
		text = job_ag_living_metal_miner_gestalt_effect_desc
	}

	resources = {
		category = planet_buildings
		cost = {
			energy = 160
			alloys = 100
		}
		upkeep = { energy = 5 }
		produces = {
			trigger = {
				exists = owner
				owner = { is_fallen_empire = yes }
			}
			sr_living_metal = 5
		}
	}

	prerequisites = { "tech_ag_living_metal_mining_station" }
}
ag_nanites_mining_station = {
	base_buildtime = 480
	is_capped_by_modifier = yes
	category = resource
	potential = { NOT = { has_modifier = resort_colony } }

	triggered_planet_modifier = {
		potential = {
			exists = owner
			owner = {
				is_gestalt = no
				is_fallen_empire = no
			}
		}
		modifier = { job_ag_nanites_miner_add = 1 }
	}
	triggered_planet_modifier = {
		potential = {
			exists = owner
			owner = {
				is_gestalt = yes
				is_fallen_empire = no
			}
		}
		modifier = { job_ag_nanites_miner_gestalt_add = 1 }
	}
	triggered_desc = {
		trigger = {
			exists = owner
			owner = {
				is_gestalt = no
				is_fallen_empire = no
			}
		}
		text = job_ag_nanites_miner_effect_desc
	}
	triggered_desc = {
		trigger = {
			exists = owner
			owner = {
				is_gestalt = yes
				is_fallen_empire = no
			}
		}
		text = job_ag_nanites_miner_gestalt_effect_desc
	}

	resources = {
		category = planet_buildings
		cost = {
			energy = 160
			alloys = 100
		}
		upkeep = { energy = 5 }
		produces = {
			trigger = {
				exists = owner
				owner = { is_fallen_empire = yes }
			}
			nanites = 5
		}
	}

	prerequisites = { "tech_ag_nanites_mining_station" }
}
ag_dark_matter_mining_station = {
	base_buildtime = 480
	is_capped_by_modifier = yes
	category = resource
	potential = { NOT = { has_modifier = resort_colony } }

	triggered_planet_modifier = {
		potential = {
			exists = owner
			owner = {
				is_gestalt = no
				is_fallen_empire = no
			}
		}
		modifier = { job_ag_dark_matter_miner_add = 1 }
	}
	triggered_planet_modifier = {
		potential = {
			exists = owner
			owner = {
				is_gestalt = yes
				is_fallen_empire = no
			}
		}
		modifier = { job_ag_dark_matter_miner_gestalt_add = 1 }
	}
	triggered_desc = {
		trigger = {
			exists = owner
			owner = {
				is_gestalt = no
				is_fallen_empire = no
			}
		}
		text = job_ag_dark_matter_miner_effect_desc
	}
	triggered_desc = {
		trigger = {
			exists = owner
			owner = {
				is_gestalt = yes
				is_fallen_empire = no
			}
		}
		text = job_ag_dark_matter_miner_gestalt_effect_desc
	}

	resources = {
		category = planet_buildings
		cost = {
			energy = 160
			alloys = 100
		}
		upkeep = { energy = 5 }
		produces = {
			trigger = {
				exists = owner
				owner = { is_fallen_empire = yes }
			}
			sr_dark_matter = 5
		}
	}

	prerequisites = { "tech_ag_dark_matter_mining_station" }
}

####################################
#			Event Buildings
####################################
ag_spiral_tower = {
	base_buildtime = 540
	capital = no
	can_build = yes
	can_demolish = yes
	can_be_ruined = yes
	can_be_disabled = yes
	
	potential = {
		exists = planet
		planet = { is_capital = yes }
		custom_tooltip = {
			fail_text = "ag_cannot_build_spiral_tower"
			exists = owner
			owner = {
				check_variable = {
					which = ag_num_spiral_towers
					value >= 1
				}
			}
		}
	}

	planet_modifier = {
		pop_happiness = -0.05
	}

	resources = {
		category = planet_buildings
		cost = {
			minerals = 800
		}
		produces = {
			physics_research = 200
			engineering_research = 100
		}
		upkeep = {
			energy = 20
		}
	}

	on_queued = {
		owner = {
			subtract_variable = {
				which = ag_num_spiral_towers
				value = 1
			}
		}
	}

	on_unqueued = {
		owner = {
			change_variable = {
				which = ag_num_spiral_towers
				value = 1
			}
		}
	}
}