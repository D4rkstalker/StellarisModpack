
# Beacon of Prosperity
ag_primitive_system_4 = {
	class = "sc_g"

	flags = { ag_ancient_system ag_primitive_system_4 guardian hostile_system }
	max_instances = 1
	
	planet = {
		class = "pc_g_star"
		orbit_distance = 0
		orbit_angle = 0
		size = 35
		has_ring = no
	}
	
	planet = {
		count = 1
		class = "ag_hot_unhabitable_world"
		orbit_distance = 80
		orbit_angle = random
		size = { min = 7 max = 17 }
		
		init_effect = {
			ag_ancient_random_system_gas_giant_size = yes
			ag_ancient_random_system_spawn_debris = yes
		}
		
		moon = {
			count = { min = 0 max = 2 }
			class = "ag_hot_unhabitable_moon"
			orbit_distance = { min = 20 max = 25 }
			orbit_angle = random
			size = { min = 5 max = 9 }
		}
	}
	
	planet = {
		name = "NAME_ag_primitive_world_4"
		class = "pc_toxic"
		orbit_distance = 55
		orbit_angle = random
		size = 20
		has_ring = no

		flags = { ag_primitive_world_4 ag_primitive_world_4_relic_world colony_event }

		init_effect = {
			prevent_anomaly = yes
			save_global_event_target_as = ag_primitive_world_4
			random_list = {
				50 = { ag_set_beacon_of_prosperity_relic = yes }
				50 = { ag_set_beacon_of_prosperity_barren = yes }
			}
		}
		
		moon = {
			name = "NAME_ag_primitive_world_4a"
			class = "pc_barren"
			size = 6
			orbit_distance = 22
			orbit_angle = random
			has_ring = no
			init_effect = { prevent_anomaly = yes }
		}
	}

	planet = {
		count = { min = 0 max = 2 }
		class = "ag_warm_unhabitable_world"
		orbit_distance = { min = 40 max = 55 }
		orbit_angle = random
		size = { min = 10 max = 18 }
		
		init_effect = {
			ag_ancient_random_system_gas_giant_size = yes
			ag_ancient_random_system_spawn_debris = yes
		}

		moon = {
			count = { min = 0 max = 1 }
			class = "ag_warm_unhabitable_moon"
			orbit_distance = { min = 20 max = 25 }
			orbit_angle = random
			size = { min = 5 max = 9 }
		}
	}

	planet = {
		count = { min = 0 max = 3 }
		class = "ag_cold_unhabitable_world"
		orbit_distance = { min = 40 max = 90 }
		orbit_angle = random
		size = { min = 10 max = 18 }
		
		init_effect = {
			ag_ancient_random_system_gas_giant_size = yes
			ag_ancient_random_system_spawn_debris = yes
		}

		change_orbit = 10

		moon = {
			count = { min = 0 max = 2 }
			class = "ag_cold_unhabitable_moon"
			orbit_distance = { min = 10 max = 15 }
			orbit_angle = random
			size = { min = 5 max = 9 }
		}
	}

	init_effect = {
		set_global_flag = ag_beacon_of_prosperity_spawned
		ag_ancient_random_system_set_name = yes
		ag_mod_compatibility_effect = yes
	}
}

# Random Ancient Wreckage.
ag_shattered_ringworld_init = {
	class = sc_black_hole
	usage = misc_system_init
	usage_odds = {
		base = 4
		modifier = { factor = 0 is_bottleneck_system = yes }
		modifier = { factor = 0 has_star_flag = empire_cluster }
	}

	flags = { ag_ancient_system ag_shattered_ringworld_system }
	max_instances = 1
	
	planet = {
		count = 1
		class = "pc_black_hole"
		orbit_angle = 0
		orbit_distance = 0
		size = 24
		has_ring = no
		init_effect = {
			prevent_anomaly = yes
			while = {
				count = 15
				create_ambient_object = {
					type = "large_debris_object"
					entity_offset_height = { min = -0 max = -25 }
					location = this
				}
				last_created_ambient_object = {
					set_location = {
						target = prev
						distance = 110
						angle = random
					}
				}
			}
			while = {
				count = 25
				create_ambient_object = {
					type = "medium_debris_01_object"
					entity_offset_height = { min = -0 max = -25 }
					location = this
				}
				last_created_ambient_object = {
					set_location = {
						target = prev
						distance = 110
						angle = random
					}
				}
			}
			while = {
				count = 25
				create_ambient_object = {
					type = "medium_debris_02_object"
					entity_offset_height = { min = -0 max = -25 }
					location = this
				}
				last_created_ambient_object = {
					set_location = {
						target = prev
						distance = 110
						angle = random
					}
				}
			}
			while = {
				count = 30
				create_ambient_object = {
					type = "small_debris_object"
					entity_offset_height = { min = -0 max = -25 }
					location = this
				}
				last_created_ambient_object = {
					set_location = {
						target = prev
						distance = 110
						angle = random
					}
				}
			}
		}
	}
	
	change_orbit = 100
	
	planet = {
		class = "pc_ringworld_tech_damaged"
		name = "NAME_Ring_Segment_B"
		orbit_angle = 30
		orbit_distance = 0
		init_effect = { prevent_anomaly = yes }
	}
	planet = {
		class = "pc_ringworld_seam_damaged"
		name = "NAME_Ring_Segment_C"
		orbit_angle = 130
		orbit_distance = 0

		init_effect = {
			create_ambient_object = {
				type = "medium_debris_01_object"
				location = THIS
			}
			prevent_anomaly = yes
		}
	}

	change_orbit = 30

	planet = {
		count = { min = 0 max = 1 }
		class = "ag_cold_habitable_world"
		orbit_distance = { min = 35 max = 50 }
		orbit_angle = random
		size = { min = 10 max = 18 }
		
		init_effect = {
			ag_ancient_random_system_cold_habitable_world_effect = yes
			ag_ancient_random_system_spawn_debris = yes
		}

		change_orbit = 10

		moon = {
			count = { min = 0 max = 2 }
			class = "ag_cold_unhabitable_moon"
			orbit_distance = { min = 10 max = 15 }
			orbit_angle = random
			size = { min = 5 max = 9 }
		}
	}
	
	change_orbit = 20

	planet = {
		count = { min = 0 max = 3 }
		class = "ag_cold_habitable_world"
		orbit_distance = { min = 20 max = 33 }
		orbit_angle = random
		size = { min = 10 max = 18 }
		
		init_effect = {
			ag_ancient_random_system_cold_habitable_world_effect = yes
			ag_ancient_random_system_spawn_debris = yes
		}
	}

	init_effect = {
		ag_mod_compatibility_effect = yes
		random_list = {
			10 = {
				star = { change_variable = { which = ag_num_ancient_debris value = 1 } }
				create_ambient_object = {
					type = "ag_zeta_titan_debris_1_object"
					entity_offset_height = { min = 15 max = -15 }
					entity_offset_angle = { min = 0 max = 359 }
					location = solar_system
				}
				last_created_ambient_object = {
					set_ambient_object_flag = ag_shattered_ringworld_ancient_ship
					set_ambient_object_flag = ag_shattered_ringworld_ancient_ship_titan
					ag_set_zeta_debris_object_flag = { ag_ship_class = titan }
				}
			}
			10 = {
				star = { change_variable = { which = ag_num_ancient_debris value = 1 } }
				create_ambient_object = {
					type = "ag_zeta_titan_debris_2_object"
					entity_offset_height = { min = 15 max = -15 }
					entity_offset_angle = { min = 0 max = 359 }
					location = solar_system
				}
				last_created_ambient_object = {
					set_ambient_object_flag = ag_shattered_ringworld_ancient_ship
					set_ambient_object_flag = ag_shattered_ringworld_ancient_ship_titan
					ag_set_zeta_debris_object_flag = { ag_ship_class = titan }
				}
			}
			10 = {
				star = { change_variable = { which = ag_num_ancient_debris value = 1 } }
				create_ambient_object = {
					type = "ag_zeta_titan_debris_3_object"
					entity_offset_height = { min = 15 max = -15 }
					entity_offset_angle = { min = 0 max = 359 }
					location = solar_system
				}
				last_created_ambient_object = {
					set_ambient_object_flag = ag_shattered_ringworld_ancient_ship
					set_ambient_object_flag = ag_shattered_ringworld_ancient_ship_titan
					ag_set_zeta_debris_object_flag = { ag_ship_class = titan }
				}
			}
			10 = {
				star = { change_variable = { which = ag_num_ancient_debris value = 1 } }
				create_ambient_object = {
					type = "ag_zeta_battleship_debris_1_object"
					entity_offset_height = { min = 15 max = -15 }
					entity_offset_angle = { min = 0 max = 359 }
					location = solar_system
				}
				last_created_ambient_object = {
					random_list = {
						10 = {
							create_ambient_object = {
								type = "ag_zeta_battleship_debris_1_object"
								entity_offset_height = { min = 15 max = -15 }
								entity_offset_angle = { min = 0 max = 359 }
								location = solar_system
							}
							last_created_ambient_object = {
								set_ambient_object_flag = ag_shattered_ringworld_ancient_ship
								set_ambient_object_flag = ag_shattered_ringworld_ancient_ship_battleship
								ag_set_zeta_debris_object_flag = { ag_ship_class = battleship }
								random_list = {
									25 = { set_location = { target = prev distance = 10 angle = random } }
									25 = { set_location = { target = prev distance = 15 angle = random } }
									25 = { set_location = { target = prev distance = 20 angle = random } }
									25 = { set_location = { target = prev distance = 25 angle = random } }
								}
							}
						}
						10 = {
							create_ambient_object = {
								type = "ag_zeta_battleship_debris_2_object"
								entity_offset_height = { min = 15 max = -15 }
								entity_offset_angle = { min = 0 max = 359 }
								location = solar_system
							}
							last_created_ambient_object = {
								set_ambient_object_flag = ag_shattered_ringworld_ancient_ship
								set_ambient_object_flag = ag_shattered_ringworld_ancient_ship_battleship
								ag_set_zeta_debris_object_flag = { ag_ship_class = battleship }
								random_list = {
									25 = { set_location = { target = prev distance = 10 angle = random } }
									25 = { set_location = { target = prev distance = 15 angle = random } }
									25 = { set_location = { target = prev distance = 20 angle = random } }
									25 = { set_location = { target = prev distance = 25 angle = random } }
								}
							}
						}
						10 = {
							create_ambient_object = {
								type = "ag_zeta_battleship_debris_3_object"
								entity_offset_height = { min = 15 max = -15 }
								entity_offset_angle = { min = 0 max = 359 }
								location = solar_system
							}
							last_created_ambient_object = {
								set_ambient_object_flag = ag_shattered_ringworld_ancient_ship
								set_ambient_object_flag = ag_shattered_ringworld_ancient_ship_battleship
								ag_set_zeta_debris_object_flag = { ag_ship_class = battleship }
								random_list = {
									25 = { set_location = { target = prev distance = 10 angle = random } }
									25 = { set_location = { target = prev distance = 15 angle = random } }
									25 = { set_location = { target = prev distance = 20 angle = random } }
									25 = { set_location = { target = prev distance = 25 angle = random } }
								}
							}
						}
					}
					set_ambient_object_flag = ag_shattered_ringworld_ancient_ship
					set_ambient_object_flag = ag_shattered_ringworld_ancient_ship_battleship
					ag_set_zeta_debris_object_flag = { ag_ship_class = battleship }
				}
			}
			10 = {
				star = { change_variable = { which = ag_num_ancient_debris value = 1 } }
				create_ambient_object = {
					type = "ag_zeta_battleship_debris_2_object"
					entity_offset_height = { min = 15 max = -15 }
					entity_offset_angle = { min = 0 max = 359 }
					location = solar_system
				}
				last_created_ambient_object = {
					random_list = {
						10 = {
							create_ambient_object = {
								type = "ag_zeta_battleship_debris_1_object"
								entity_offset_height = { min = 15 max = -15 }
								entity_offset_angle = { min = 0 max = 359 }
								location = solar_system
							}
							last_created_ambient_object = {
								set_ambient_object_flag = ag_shattered_ringworld_ancient_ship
								set_ambient_object_flag = ag_shattered_ringworld_ancient_ship_battleship
								ag_set_zeta_debris_object_flag = { ag_ship_class = battleship }
								random_list = {
									25 = { set_location = { target = prev distance = 10 angle = random } }
									25 = { set_location = { target = prev distance = 15 angle = random } }
									25 = { set_location = { target = prev distance = 20 angle = random } }
									25 = { set_location = { target = prev distance = 25 angle = random } }
								}
							}
						}
						10 = {
							create_ambient_object = {
								type = "ag_zeta_battleship_debris_2_object"
								entity_offset_height = { min = 15 max = -15 }
								entity_offset_angle = { min = 0 max = 359 }
								location = solar_system
							}
							last_created_ambient_object = {
								set_ambient_object_flag = ag_shattered_ringworld_ancient_ship
								set_ambient_object_flag = ag_shattered_ringworld_ancient_ship_battleship
								ag_set_zeta_debris_object_flag = { ag_ship_class = battleship }
								random_list = {
									25 = { set_location = { target = prev distance = 10 angle = random } }
									25 = { set_location = { target = prev distance = 15 angle = random } }
									25 = { set_location = { target = prev distance = 20 angle = random } }
									25 = { set_location = { target = prev distance = 25 angle = random } }
								}
							}
						}
						10 = {
							create_ambient_object = {
								type = "ag_zeta_battleship_debris_3_object"
								entity_offset_height = { min = 15 max = -15 }
								entity_offset_angle = { min = 0 max = 359 }
								location = solar_system
							}
							last_created_ambient_object = {
								set_ambient_object_flag = ag_shattered_ringworld_ancient_ship
								set_ambient_object_flag = ag_shattered_ringworld_ancient_ship_battleship
								ag_set_zeta_debris_object_flag = { ag_ship_class = battleship }
								random_list = {
									25 = { set_location = { target = prev distance = 10 angle = random } }
									25 = { set_location = { target = prev distance = 15 angle = random } }
									25 = { set_location = { target = prev distance = 20 angle = random } }
									25 = { set_location = { target = prev distance = 25 angle = random } }
								}
							}
						}
					}
					set_ambient_object_flag = ag_shattered_ringworld_ancient_ship
					set_ambient_object_flag = ag_shattered_ringworld_ancient_ship_battleship
					ag_set_zeta_debris_object_flag = { ag_ship_class = battleship }
				}
			}
			10 = {
				star = { change_variable = { which = ag_num_ancient_debris value = 1 } }
				create_ambient_object = {
					type = "ag_zeta_battleship_debris_3_object"
					entity_offset_height = { min = 15 max = -15 }
					entity_offset_angle = { min = 0 max = 359 }
					location = solar_system
				}
				last_created_ambient_object = {
					random_list = {
						10 = {
							create_ambient_object = {
								type = "ag_zeta_battleship_debris_1_object"
								entity_offset_height = { min = 15 max = -15 }
								entity_offset_angle = { min = 0 max = 359 }
								location = solar_system
							}
							last_created_ambient_object = {
								set_ambient_object_flag = ag_shattered_ringworld_ancient_ship
								set_ambient_object_flag = ag_shattered_ringworld_ancient_ship_battleship
								ag_set_zeta_debris_object_flag = { ag_ship_class = battleship }
								random_list = {
									25 = { set_location = { target = prev distance = 10 angle = random } }
									25 = { set_location = { target = prev distance = 15 angle = random } }
									25 = { set_location = { target = prev distance = 20 angle = random } }
									25 = { set_location = { target = prev distance = 25 angle = random } }
								}
							}
						}
						10 = {
							create_ambient_object = {
								type = "ag_zeta_battleship_debris_2_object"
								entity_offset_height = { min = 15 max = -15 }
								entity_offset_angle = { min = 0 max = 359 }
								location = solar_system
							}
							last_created_ambient_object = {
								set_ambient_object_flag = ag_shattered_ringworld_ancient_ship
								set_ambient_object_flag = ag_shattered_ringworld_ancient_ship_battleship
								ag_set_zeta_debris_object_flag = { ag_ship_class = battleship }
								random_list = {
									25 = { set_location = { target = prev distance = 10 angle = random } }
									25 = { set_location = { target = prev distance = 15 angle = random } }
									25 = { set_location = { target = prev distance = 20 angle = random } }
									25 = { set_location = { target = prev distance = 25 angle = random } }
								}
							}
						}
						10 = {
							create_ambient_object = {
								type = "ag_zeta_battleship_debris_3_object"
								entity_offset_height = { min = 15 max = -15 }
								entity_offset_angle = { min = 0 max = 359 }
								location = solar_system
							}
							last_created_ambient_object = {
								set_ambient_object_flag = ag_shattered_ringworld_ancient_ship
								set_ambient_object_flag = ag_shattered_ringworld_ancient_ship_battleship
								ag_set_zeta_debris_object_flag = { ag_ship_class = battleship }
								random_list = {
									25 = { set_location = { target = prev distance = 10 angle = random } }
									25 = { set_location = { target = prev distance = 15 angle = random } }
									25 = { set_location = { target = prev distance = 20 angle = random } }
									25 = { set_location = { target = prev distance = 25 angle = random } }
								}
							}
						}
					}
					set_ambient_object_flag = ag_shattered_ringworld_ancient_ship
					set_ambient_object_flag = ag_shattered_ringworld_ancient_ship_battleship
					ag_set_zeta_debris_object_flag = { ag_ship_class = battleship }
				}
			}
			10 = {
				star = { change_variable = { which = ag_num_ancient_debris value = 1 } }
				create_ambient_object = {
					type = "ag_zeta_destroyer_debris_1_object"
					entity_offset_height = { min = 15 max = -15 }
					entity_offset_angle = { min = 0 max = 359 }
					location = solar_system
				}
				last_created_ambient_object = {
					while = {
						count = 3
						random_list = {
							10 = {
								create_ambient_object = {
									type = "ag_zeta_destroyer_debris_1_object"
									entity_offset_height = { min = 15 max = -15 }
									entity_offset_angle = { min = 0 max = 359 }
									location = solar_system
								}
								last_created_ambient_object = {
									set_ambient_object_flag = ag_shattered_ringworld_ancient_ship
									set_ambient_object_flag = ag_shattered_ringworld_ancient_ship_destroyer
									ag_set_zeta_debris_object_flag = { ag_ship_class = destroyer }
									random_list = {
										25 = { set_location = { target = prev distance = 10 angle = random } }
										25 = { set_location = { target = prev distance = 15 angle = random } }
										25 = { set_location = { target = prev distance = 20 angle = random } }
										25 = { set_location = { target = prev distance = 25 angle = random } }
									}
								}
							}
							10 = {
								create_ambient_object = {
									type = "ag_zeta_destroyer_debris_2_object"
									entity_offset_height = { min = 15 max = -15 }
									entity_offset_angle = { min = 0 max = 359 }
									location = solar_system
								}
								last_created_ambient_object = {
									set_ambient_object_flag = ag_shattered_ringworld_ancient_ship
									set_ambient_object_flag = ag_shattered_ringworld_ancient_ship_destroyer
									ag_set_zeta_debris_object_flag = { ag_ship_class = destroyer }
									random_list = {
										25 = { set_location = { target = prev distance = 10 angle = random } }
										25 = { set_location = { target = prev distance = 15 angle = random } }
										25 = { set_location = { target = prev distance = 20 angle = random } }
										25 = { set_location = { target = prev distance = 25 angle = random } }
									}
								}
							}
							10 = {
								create_ambient_object = {
									type = "ag_zeta_destroyer_debris_3_object"
									entity_offset_height = { min = 15 max = -15 }
									entity_offset_angle = { min = 0 max = 359 }
									location = solar_system
								}
								last_created_ambient_object = {
									set_ambient_object_flag = ag_shattered_ringworld_ancient_ship
									set_ambient_object_flag = ag_shattered_ringworld_ancient_ship_destroyer
									ag_set_zeta_debris_object_flag = { ag_ship_class = destroyer }
									random_list = {
										25 = { set_location = { target = prev distance = 10 angle = random } }
										25 = { set_location = { target = prev distance = 15 angle = random } }
										25 = { set_location = { target = prev distance = 20 angle = random } }
										25 = { set_location = { target = prev distance = 25 angle = random } }
									}
								}
							}
						}
					}
					set_ambient_object_flag = ag_shattered_ringworld_ancient_ship
					set_ambient_object_flag = ag_shattered_ringworld_ancient_ship_destroyer
					ag_set_zeta_debris_object_flag = { ag_ship_class = destroyer }
				}
			}
			10 = {
				star = { change_variable = { which = ag_num_ancient_debris value = 1 } }
				create_ambient_object = {
					type = "ag_zeta_destroyer_debris_2_object"
					entity_offset_height = { min = 15 max = -15 }
					entity_offset_angle = { min = 0 max = 359 }
					location = solar_system
				}
				last_created_ambient_object = {
					while = {
						count = 3
						random_list = {
							10 = {
								create_ambient_object = {
									type = "ag_zeta_destroyer_debris_1_object"
									entity_offset_height = { min = 15 max = -15 }
									entity_offset_angle = { min = 0 max = 359 }
									location = solar_system
								}
								last_created_ambient_object = {
									set_ambient_object_flag = ag_shattered_ringworld_ancient_ship
									set_ambient_object_flag = ag_shattered_ringworld_ancient_ship_destroyer
									ag_set_zeta_debris_object_flag = { ag_ship_class = destroyer }
									random_list = {
										25 = { set_location = { target = prev distance = 10 angle = random } }
										25 = { set_location = { target = prev distance = 15 angle = random } }
										25 = { set_location = { target = prev distance = 20 angle = random } }
										25 = { set_location = { target = prev distance = 25 angle = random } }
									}
								}
							}
							10 = {
								create_ambient_object = {
									type = "ag_zeta_destroyer_debris_2_object"
									entity_offset_height = { min = 15 max = -15 }
									entity_offset_angle = { min = 0 max = 359 }
									location = solar_system
								}
								last_created_ambient_object = {
									set_ambient_object_flag = ag_shattered_ringworld_ancient_ship
									set_ambient_object_flag = ag_shattered_ringworld_ancient_ship_destroyer
									ag_set_zeta_debris_object_flag = { ag_ship_class = destroyer }
									random_list = {
										25 = { set_location = { target = prev distance = 10 angle = random } }
										25 = { set_location = { target = prev distance = 15 angle = random } }
										25 = { set_location = { target = prev distance = 20 angle = random } }
										25 = { set_location = { target = prev distance = 25 angle = random } }
									}
								}
							}
							10 = {
								create_ambient_object = {
									type = "ag_zeta_destroyer_debris_3_object"
									entity_offset_height = { min = 15 max = -15 }
									entity_offset_angle = { min = 0 max = 359 }
									location = solar_system
								}
								last_created_ambient_object = {
									set_ambient_object_flag = ag_shattered_ringworld_ancient_ship
									set_ambient_object_flag = ag_shattered_ringworld_ancient_ship_destroyer
									ag_set_zeta_debris_object_flag = { ag_ship_class = destroyer }
									random_list = {
										25 = { set_location = { target = prev distance = 10 angle = random } }
										25 = { set_location = { target = prev distance = 15 angle = random } }
										25 = { set_location = { target = prev distance = 20 angle = random } }
										25 = { set_location = { target = prev distance = 25 angle = random } }
									}
								}
							}
						}
					}
					set_ambient_object_flag = ag_shattered_ringworld_ancient_ship
					set_ambient_object_flag = ag_shattered_ringworld_ancient_ship_destroyer
					ag_set_zeta_debris_object_flag = { ag_ship_class = destroyer }
				}
			}
			10 = {
				star = { change_variable = { which = ag_num_ancient_debris value = 1 } }
				create_ambient_object = {
					type = "ag_zeta_destroyer_debris_3_object"
					entity_offset_height = { min = 15 max = -15 }
					entity_offset_angle = { min = 0 max = 359 }
					location = solar_system
				}
				last_created_ambient_object = {
					while = {
						count = 3
						random_list = {
							10 = {
								create_ambient_object = {
									type = "ag_zeta_destroyer_debris_1_object"
									entity_offset_height = { min = 15 max = -15 }
									entity_offset_angle = { min = 0 max = 359 }
									location = solar_system
								}
								last_created_ambient_object = {
									set_ambient_object_flag = ag_shattered_ringworld_ancient_ship
									set_ambient_object_flag = ag_shattered_ringworld_ancient_ship_destroyer
									ag_set_zeta_debris_object_flag = { ag_ship_class = destroyer }
									random_list = {
										25 = { set_location = { target = prev distance = 10 angle = random } }
										25 = { set_location = { target = prev distance = 15 angle = random } }
										25 = { set_location = { target = prev distance = 20 angle = random } }
										25 = { set_location = { target = prev distance = 25 angle = random } }
									}
								}
							}
							10 = {
								create_ambient_object = {
									type = "ag_zeta_destroyer_debris_2_object"
									entity_offset_height = { min = 15 max = -15 }
									entity_offset_angle = { min = 0 max = 359 }
									location = solar_system
								}
								last_created_ambient_object = {
									set_ambient_object_flag = ag_shattered_ringworld_ancient_ship
									set_ambient_object_flag = ag_shattered_ringworld_ancient_ship_destroyer
									ag_set_zeta_debris_object_flag = { ag_ship_class = destroyer }
									random_list = {
										25 = { set_location = { target = prev distance = 10 angle = random } }
										25 = { set_location = { target = prev distance = 15 angle = random } }
										25 = { set_location = { target = prev distance = 20 angle = random } }
										25 = { set_location = { target = prev distance = 25 angle = random } }
									}
								}
							}
							10 = {
								create_ambient_object = {
									type = "ag_zeta_destroyer_debris_3_object"
									entity_offset_height = { min = 15 max = -15 }
									entity_offset_angle = { min = 0 max = 359 }
									location = solar_system
								}
								last_created_ambient_object = {
									set_ambient_object_flag = ag_shattered_ringworld_ancient_ship
									set_ambient_object_flag = ag_shattered_ringworld_ancient_ship_destroyer
									ag_set_zeta_debris_object_flag = { ag_ship_class = destroyer }
									random_list = {
										25 = { set_location = { target = prev distance = 10 angle = random } }
										25 = { set_location = { target = prev distance = 15 angle = random } }
										25 = { set_location = { target = prev distance = 20 angle = random } }
										25 = { set_location = { target = prev distance = 25 angle = random } }
									}
								}
							}
						}
					}
					set_ambient_object_flag = ag_shattered_ringworld_ancient_ship
					set_ambient_object_flag = ag_shattered_ringworld_ancient_ship_destroyer
					ag_set_zeta_debris_object_flag = { ag_ship_class = destroyer }
				}
			}
		}
		random_list = {
			50 = {
				create_drone_country = yes
				random_system_planet = {
					limit = { is_planet_class = pc_ringworld_seam_damaged }
					clear_deposits = yes
					random_list = {
						16 = { add_deposit = d_living_metal_deposit }
						4 = { while = { count = 2 add_deposit = d_living_metal_deposit } }
						1 = { while = { count = 3 add_deposit = d_living_metal_deposit } }
					}
					random_list = {
						64 = { }
						16 = { add_deposit = d_living_metal_deposit }
						4 = { while = { count = 2 add_deposit = d_living_metal_deposit } }
						1 = { while = { count = 3 add_deposit = d_living_metal_deposit } }
					}
					random_list = {
						16 = { add_deposit = d_alloys_3 }
						4 = { add_deposit = d_alloys_4 }
						1 = { add_deposit = d_alloys_5 }
					}
					event_target:drone_country = {
						save_event_target_as = mining_drones
						create_fleet = {
							name = "NAME_Ancient_Mining_Drones"
							effect = {
								set_owner = event_target:drone_country
								while = {
									count = 16
									create_ship = {
										name = ""
										design = "NAME_Ancient_Mining_Drone"
									}
								}
								while = {
									count = 8
									create_ship = {
										name = ""
										design = "NAME_Ancient_Combat_Drone"
									}
								}
								while = {
									count = 4
									create_ship = {
										name = ""
										design = "NAME_Ancient_Destroyer"
									}
								}
								set_location = prevprev
								set_fleet_stance = aggressive
								set_aggro_range_measure_from = return_point
								set_aggro_range = 500
							}
						}
					}
					create_mining_station = { owner = event_target:mining_drones }
				}
			}
			50 = {
				create_cloud_country = yes
				random_system_planet = {
					limit = { is_star = yes }
					clear_deposits = yes
					random_list = {
						16 = { add_deposit = d_dark_matter_deposit_1 }
						4 = { add_deposit = d_dark_matter_deposit_2 }
						1 = { add_deposit = d_dark_matter_deposit_3 }
					}
					random_list = {
						64 = { }
						16 = { add_deposit = d_dark_matter_deposit_1 }
						4 = { add_deposit = d_dark_matter_deposit_2 }
						1 = { add_deposit = d_dark_matter_deposit_3 }
					}
					random_list = {
						16 = { add_deposit = d_energy_6 }
						4 = { add_deposit = d_energy_8 }
						1 = { add_deposit = d_energy_10 }
					}
					event_target:cloud_country = {
						if = {
							limit = { NOT = { has_modifier = cloud_power } }
							add_modifier = { modifier = cloud_power days = -1 }
						}
						create_fleet = {
							name = "NAME_Void_Cloud"
							effect = {
								set_owner = event_target:cloud_country
								while = {
									count = 6
									create_ship = {
										name = ""
										design = "NAME_Cloud_Entity"
									}
								}
								set_location = prevprev
								set_fleet_stance = aggressive
								set_aggro_range_measure_from = return_point
								set_aggro_range = 500
							}
						}
					}
				}
			}
		}
	}
}

# Shielded World, Improved Large Ship Hull tech.
ag_ancient_shielded_molten_planet_init = {
	class = "rl_standard_stars"
	usage = misc_system_init
	usage_odds = {
		base = 4
		modifier = { factor = 0 is_bottleneck_system = yes }
		modifier = { factor = 0 has_star_flag = empire_cluster }
	}

	flags = { ag_ancient_system ag_ancient_shielded_molten_planet_system }
	max_instances = 1

	planet = {
		count = 1
		class = star
		orbit_distance = 0
		orbit_angle = 0
		size = { min = 20 max = 30 }
		has_ring = no
	}

	planet = {
		count = 1
		class = "pc_shielded"
		orbit_distance = { min = 70 max = 85 }
		orbit_angle = random
		size = 11
		has_ring = no
		
		entity = "ag_ancient_molten_planet_shielded_blue_entity"

		init_effect = {
			prevent_anomaly = yes
			set_planet_flag = ag_ancient_shielded_molten_planet
			clear_deposits = yes
			add_deposit = ag_ancient_shield_deposit_blue
			add_modifier = {
				modifier = ag_ancient_shield_deposit_blue
				days = -1
			}
		}
	}

	change_orbit = 20

	planet = {
		count = 1
		class = "ag_warm_unhabitable_world"
		orbit_distance = { min = 20 max = 35 }
		orbit_angle = random
		size = { min = 10 max = 18 }
		has_ring= yes
		
		init_effect = {
			ag_ancient_random_system_gas_giant_size = yes
			ag_ancient_random_system_spawn_debris = yes
		}
	}

	planet = {
		count = { min = 0 max = 2 }
		class = "ag_warm_unhabitable_world"
		orbit_distance = { min = 40 max = 55 }
		orbit_angle = random
		size = { min = 10 max = 18 }
		
		init_effect = {
			ag_ancient_random_system_gas_giant_size = yes
			ag_ancient_random_system_spawn_debris = yes
		}

		moon = {
			count = { min = 0 max = 1 }
			class = "ag_warm_unhabitable_moon"
			orbit_distance = { min = 20 max = 25 }
			orbit_angle = random
			size = { min = 5 max = 9 }
		}
	}

	planet = {
		count = { min = 2 max = 5 }
		class = "ag_cold_unhabitable_world"
		orbit_distance = { min = 40 max = 90 }
		orbit_angle = random
		size = { min = 10 max = 18 }
		
		init_effect = {
			ag_ancient_random_system_gas_giant_size = yes
			ag_ancient_random_system_spawn_debris = yes
		}

		change_orbit = 10

		moon = {
			count = { min = 0 max = 2 }
			class = "ag_cold_unhabitable_moon"
			orbit_distance = { min = 10 max = 15 }
			orbit_angle = random
			size = { min = 5 max = 9 }
		}
	}
	
	init_effect = {
		ag_mod_compatibility_effect = yes
		random_list = {
			60 = { }
			40 = { random_system_planet = {
				limit = { is_star = yes }
				create_ambient_object = { type = ag_ancient_station_small_closed_object }
				last_created_ambient_object = { set_location = { target = prev distance = 10 } save_event_target_as = ag_ancient_broken_outpost }
				create_ambient_object = { type = small_debris_object }
				last_created_ambient_object = { set_location = { target = event_target:ag_ancient_broken_outpost distance = 1 angle = 0 } }
				create_ambient_object = { type = small_debris_object }
				last_created_ambient_object = { set_location = { target = event_target:ag_ancient_broken_outpost distance = 1 angle = 90 } }
				create_ambient_object = { type = small_debris_object }
				last_created_ambient_object = { set_location = { target = event_target:ag_ancient_broken_outpost distance = 1 angle = 180 } }
				create_ambient_object = { type = small_debris_object }
				last_created_ambient_object = { set_location = { target = event_target:ag_ancient_broken_outpost distance = 1 angle = 270 } }
				create_ambient_object = { type = medium_debris_01_object }
				last_created_ambient_object = { set_location = { target = event_target:ag_ancient_broken_outpost distance = 6 angle = 240 } }
				create_ambient_object = { type = medium_debris_02_object }
				last_created_ambient_object = { set_location = { target = event_target:ag_ancient_broken_outpost distance = 3 angle = 5 } }
				create_ambient_object = { type = medium_debris_02_object }
				last_created_ambient_object = { set_location = { target = event_target:ag_ancient_broken_outpost distance = 9 angle = 120 } }
			} }
		}
	}
}

ag_fallen_habitat_system_init = {
	class = "rl_trinary_stars"
	usage = misc_system_init
	usage_odds = {
		base = 4
		modifier = { factor = 0 is_bottleneck_system = yes }
		modifier = { factor = 0 has_star_flag = empire_cluster }
	}

	flags = { ag_ancient_system ag_fallen_habitat_system }
	max_instances = 1

	planet = {
		count = 1
		class = star
		orbit_distance = 0
		orbit_angle = 0
		size = { min = 30 max = 35 }
		has_ring = no
	}

	planet = {
		count = 1
		class = star
		orbit_distance = 240
		orbit_angle = random
		size = { min = 20 max = 30 }
		has_ring = no
		satellite_naming_policy = upper_case_roman_numerals

		change_orbit = 30

		planet = {
			count = 1
			class = "ag_hot_unhabitable_world"
			orbit_distance = 25
			orbit_angle = random
			size = { min = 8 max = 14 }
			has_ring = no
			satellite_naming_policy = lower_case_latin_letters

			change_orbit = 12

			moon = {
				count = { min = 0 max = 1 }
				class = "ag_hot_unhabitable_moon"
				orbit_distance = 5
				orbit_angle = random
				size = { min = 4 max = 7 }
			}
		}

		planet = {
			count = 1
			class = "ag_warm_unhabitable_world"
			orbit_distance = 25
			orbit_angle = random
			size = { min = 16 max = 20 }
			has_ring = yes
			flags = { ag_exotic_gases_habitat_planet }
		}

		planet = {
			count = 1
			class = "pc_gas_giant"
			orbit_distance = 25
			orbit_angle = random
			size = { min = 24 max = 32 }
			has_ring = yes
			satellite_naming_policy = lower_case_latin_letters

			change_orbit = 12

			moon = {
				count = { min = 0 max = 1 }
				class = "ag_cold_unhabitable_moon"
				orbit_distance = 5
				orbit_angle = random
				size = { min = 3 max = 7 }
			}
		}
	}

	planet = {
		count = 1
		class = star
		orbit_distance = 0
		orbit_angle = random
		size = { min = 15 max = 30 }
		has_ring = no
		satellite_naming_policy = upper_case_roman_numerals

		change_orbit = 30

		planet = {
			count = 1
			class = "ag_warm_unhabitable_world"
			orbit_distance = 25
			orbit_angle = random
			size = { min = 12 max = 22 }
			has_ring = no
			satellite_naming_policy = lower_case_latin_letters

			change_orbit = 12

			moon = {
				count = 1
				class = "ag_warm_unhabitable_moon"
				orbit_distance = 5
				orbit_angle = random
				size = { min = 4 max = 8 }
			}
		}

		planet = {
			count = 1
			class = "ag_cold_unhabitable_world"
			orbit_distance = 25
			orbit_angle = random
			size = { min = 16 max = 27 }
			has_ring = no
			satellite_naming_policy = lower_case_latin_letters

			change_orbit = 12

			moon = {
				count = 1
				class = "ag_cold_unhabitable_moon"
				orbit_distance = 5
				orbit_angle = random
				size = { min = 3 max = 7 }
			}
		}

		planet = {
			count = 1
			class = "pc_gas_giant"
			orbit_distance = 25
			orbit_angle = random
			size = { min = 16 max = 20 }
			has_ring = yes
			flags = { ag_rare_crystals_habitat_planet }
		}
	}

	change_orbit = -210

	planet = {
		count = 1
		class = "ag_hot_unhabitable_world"
		orbit_distance = 15
		orbit_angle = random
		size = { min = 9 max = 17 }
		has_ring = no
	}

	planet = {
		count = 1
		class = "ag_warm_unhabitable_world"
		orbit_distance = 15
		orbit_angle = random
		size = { min = 7 max = 14 }
		has_ring = no
	}

	planet = {
		count = 1
		orbit_distance = 20
		class = "pc_broken"
		orbit_angle = random
		size = { min = 16 max = 20 }
		flags = { ag_volatile_motes_habitat_planet }
	}

	planet = {
		count = 1
		class = "pc_gas_giant"
		orbit_distance = 20
		orbit_angle = random
		size = { min = 22 max = 28 }
		has_ring = no

		change_orbit = 12

		moon = {
			count = { min = 1 max = 2 }
			class = "ag_cold_unhabitable_moon"
			orbit_distance = 5
			orbit_angle = random
			size = { min = 3 max = 7 }
		}
	}
	
	init_effect = {
		ag_mod_compatibility_effect = yes
		random_list = {
			33 = { random_system_planet = { limit = { has_planet_flag = ag_volatile_motes_habitat_planet } ag_create_fallen_habitat_object = { ag_type = volatile_motes } } }
			33 = { random_system_planet = { limit = { has_planet_flag = ag_exotic_gases_habitat_planet } ag_create_fallen_habitat_object = { ag_type = exotic_gases } } }
			33 = { random_system_planet = { limit = { has_planet_flag = ag_rare_crystals_habitat_planet } ag_create_fallen_habitat_object = { ag_type = rare_crystals } } }
		}
	}
}
