@base_moon_distance = 10
fallen_empire_hive = {
	usage = fallen_empire_init
	class = "rl_standard_stars"
	asteroid_belt = {
		type = rocky_asteroid_belt
		radius = 50
	}

	planet = {
		count = 1
		class = star
		orbit_distance = 0
		orbit_angle = 1
		size = { min = 20 max = 30 }
		has_ring = no
	}

	change_orbit = 50

	planet = {
		count = { min = 0 max = 3 }
		class = pc_asteroid
		orbit_distance = 0
		orbit_angle = { min = 40 max = 100 }
	}

	planet = {
		count = { min = 0 max = 3 }
		orbit_distance = 20
		class = random_non_colonizable
		orbit_angle = { min = 90 max = 270 }

		change_orbit = @base_moon_distance

		moon = {
			count = { min = 0 max = 1 }
			class = random_non_colonizable
			orbit_angle = { min = 90 max = 270 }
			orbit_distance = 5
		}
	}

	planet = {
		name = "NAME_the_thinkery"
		orbit_distance = 20
		class = pc_hive
		orbit_angle = { min = 90 max = 270 }
		size = 30
		deposit_blockers = none
		modifiers = none
		has_ring = no

		init_effect = {
			create_cluster = {
				id = fe4_cluster
				radius = 100
				center = this.solar_system
			}

			set_planet_flag = fallen_empire_world
			set_planet_flag = hive_core_world
			set_planet_flag = hive_original_homeworld
			save_event_target_as = hive_homeworld
			prevent_anomaly = yes
			set_owner = root
			set_controller = root
			set_capital = yes
			add_building = building_sleeper_capital
			add_building = building_sleeper_foundry
			add_building = building_sleeper_foundry
			add_building = building_sleeper_fortress
			add_building = building_sleeper_fortress
			add_building = building_class_4_singularity
			add_building = building_class_4_singularity
			add_building = building_dimensional_fabricator
			add_building = building_dimensional_fabricator
			add_building = building_sleeper_rotting_warrens
			add_building = building_sleeper_rotting_warrens
			add_building = building_sleeper_rotting_warrens
			add_building = building_sleeper_rotting_warrens
			add_building = building_sleeper_rotting_warrens
			add_building = building_sleeper_rotting_warrens
			while = {
				count = 9
				add_district = district_hive
			}
			while = {
				count = 6
				add_district = district_generator_uncapped
			}
			while = {
				count = 6
				add_district = district_mining_uncapped
			}
			while = {
				count = 156
				create_pop = {
					species = owner_main_species
				}
			}
			spawn_sleeper_starting_navy_part_one = yes

			while = {
				count = 20
				create_army = {
					name = random
					owner = root
					species = root
					type = "xenomorph_army"
				}
			}

			create_species = {
				name = "TN-3 Network"
				class = MACHINE
				portrait = random
				traits = { trait_robot_logic_engines trait_robot_enhanced_memory trait_robot_domestic_protocols trait_robot_custom_made }
			}
			create_country = {
				name = "TN-3 Network"
				type = hive_researcher_enclave
				authority = "auth_imperial"
				civics = {
					civic = civic_hive_observers
				}
				species = last_created
				flag = {
					icon = {
						category = "enclaves"
						file = "enclaves_flag_curator.dds"
					}
					background= {
						category = "backgrounds"
						file = "vertical.dds"
					}
					colors={
						"blue"
						"dark_blue"
						"null"
						"null"
					}
				}
				ethos = {
					ethic = ethic_fanatic_materialist
					ethic = ethic_pacifist
				}
				ignore_initial_colony_error = yes
			}
			last_created_country = {
				set_country_flag = hive_enclave_country
				set_graphical_culture = mammalian_01
				create_fleet = {
					name = "Observation Post"
					settings = { spawn_debris = yes }
					effect = {
						set_owner = prev
						create_ship = {
							name = random
							design = "NAME_Curator_Enclave_Station"
							graphical_culture = prev
						}
						set_location = {
							target = event_target:hive_homeworld
							angle = random
							distance = 25
						}
					}
				}
				create_leader = {
					class = ruler
					name = "TN-3"
					species = prev
					skill = 10
					set_age = 2421
					traits = {
						trait = leader_trait_tony
					}
				}
				set_leader = last_created_leader
			}
		}

		moon = {
			name = "NAME_the_farms"
			class = "pc_gaia"
			size = 20
			orbit_distance = 20
			orbit_angle = 10
			deposit_blockers = none
			modifiers = none

			init_effect = {
				set_planet_flag = fallen_empire_world
				set_planet_flag = hive_core_world
				set_planet_flag = sleeper_farms
				prevent_anomaly = yes
				set_owner = root
				set_controller = root

				add_building = building_sleeper_capital
				add_building = building_sleeper_fortress
				add_building = building_sleeper_fortress
				add_building = building_dimensional_fabricator
				add_building = building_class_4_singularity
				add_building = building_class_4_singularity
				add_building = building_sleeper_rotting_warrens
				add_building = building_sleeper_rotting_warrens
				add_building = building_sleeper_livestock_pens
				add_building = building_sleeper_livestock_pens
				add_building = building_sleeper_livestock_pens
				add_building = building_sleeper_livestock_pens
				add_building = building_sleeper_livestock_pens
				add_building = building_sleeper_seasoning_fabricator
				add_building = building_sleeper_seasoning_fabricator
				add_building = building_sleeper_seasoning_fabricator
				while = {
					count = 14
					add_district = district_hive
				}
				while = {
					count = 106
					create_pop = {
						species = owner_main_species
					}
				}
				root = { create_sleeper_food_1 = yes }
				last_created_species = { save_event_target_as = sleeper_food_1 }
				while = {
					count = 35
					create_pop = {
						species = event_target:sleeper_food_1
					}
				}
				root = { create_sleeper_food_2 = yes }
				last_created_species = { save_event_target_as = sleeper_food_2 }
				while = {
					count = 15
					create_pop = {
						species = event_target:sleeper_food_2
					}
				}
				root = { create_sleeper_food_3 = yes }
				last_created_species = { save_event_target_as = sleeper_food_3 }
				while = {
					count = 15
					create_pop = {
						species = event_target:sleeper_food_3
					}
				}
				root = { create_sleeper_food_4 = yes }
				last_created_species = { save_event_target_as = sleeper_food_4 }
				while = {
					count = 15
					create_pop = {
						species = event_target:sleeper_food_4
					}
				}
			}
		}
	}

	planet = {
		count = { min = 2 max = 4 }
		orbit_distance = 20
		class = random_non_colonizable
		orbit_angle = { min = 90 max = 270 }

		change_orbit = @base_moon_distance

		moon = {
			count = { min = 0 max = 1 }
			class = random_non_colonizable
			orbit_angle = { min = 90 max = 270 }
			orbit_distance = 5
		}
	}

	planet = {
		count = { min = 1 max = 2 }
		orbit_distance = 20
		class = pc_gas_giant
		orbit_angle = { min = 90 max = 270 }

		change_orbit = @base_moon_distance

		moon = {
			count = { min = 0 max = 3 }
			class = random_non_colonizable
			orbit_angle = { min = 90 max = 270 }
			orbit_distance = 5
		}
	}

	neighbor_system = {
		distance = { min = 0 max = 50 }
		initializer = "fallen_empire_hive_2"
	}
	neighbor_system = {
		distance = { min = 0 max = 50 }
		initializer = "sleeper_empty_space_1"
	}

	init_effect = {
		create_sleeper_home_citadel = yes
		set_star_flag = sleeper_home_system
	}
}

fallen_empire_hive_2 = {
	usage = fallen_empire_init
	class = "rl_standard_stars"
	asteroid_belt = {
		type = rocky_asteroid_belt
		radius = 120
	}

	planet = {
		count = 1
		class = star
		orbit_distance = 0
		orbit_angle = 1
		size = { min = 20 max = 30 }
		has_ring = no
	}

	change_orbit = 40

	planet = {
		count = { min = 1 max = 1 }
		orbit_distance = 15
		class = pc_molten
		size = { min = 8 max = 16 }
		orbit_angle = { min = 90 max = 270 }
	}

	planet = {
		name = "NAME_the_annex"
		orbit_distance = 20
		class = pc_hive
		orbit_angle = { min = 90 max = 270 }
		size = 20
		deposit_blockers = none
		modifiers = none
		has_ring = no

		init_effect = {
			set_planet_flag = fallen_empire_world
			set_planet_flag = sleeper_secondary_core_world
			prevent_anomaly = yes
			set_owner = root
			set_controller = root

			spawn_sleeper_starting_navy_part_two = yes

			add_building = building_sleeper_capital
			add_building = building_sleeper_foundry
			add_building = building_sleeper_fortress
			add_building = building_sleeper_fortress
			add_building = building_class_4_singularity
			add_building = building_sleeper_rotting_warrens
			add_building = building_sleeper_rotting_warrens
			add_building = building_sleeper_rotting_warrens
			add_building = building_sleeper_rotting_warrens
			add_building = building_sleeper_rotting_warrens
			while = {
				count = 4
				add_district = district_hive
			}
			while = {
				count = 3
				add_district = district_mining_uncapped
			}
			while = {
				count = 3
				add_district = district_generator_uncapped
			}
			while = {
				count = 115
				create_pop = {
					species = owner_main_species
				}
			}
		}
	}

	planet = {
		count = { min = 0 max = 2 }
		orbit_distance = 20
		class = random_non_colonizable
		orbit_angle = { min = 90 max = 270 }

		change_orbit = @base_moon_distance

		moon = {
			count = { min = 0 max = 1 }
			class = random_non_colonizable
			orbit_angle = { min = 90 max = 270 }
			orbit_distance = 5
		}
	}

	planet = {
		count = { min = 1 max = 1 }
		orbit_distance = 20
		class = pc_gas_giant
		orbit_angle = { min = 90 max = 270 }

		change_orbit = @base_moon_distance

		moon = {
			count = { min = 0 max = 3 }
			class = random_non_colonizable
			orbit_angle = { min = 90 max = 270 }
			orbit_distance = 5
		}
	}

	init_effect = {
		create_sleeper_citadel = yes
	}
	neighbor_system = {
		distance = { min = 0 max = 50 }
		initializer = "sleeper_drone_3"
	}
}

sleeper_empty_space_1 = {
	class = "rl_standard_stars"

	asteroid_belt = {
		type = rocky_asteroid_belt
		radius = 95
	}

	planet = {
		count = 1
		class = star
		orbit_distance = 0
		orbit_angle = 1
		size = { min = 20 max = 30 }
		has_ring = no
	}

	change_orbit = 30

	planet = {
		count = 2
		orbit_distance = 20
		orbit_angle = { min = 90 max = 270 }
	}

	change_orbit = 25

	planet = {
		count = { min = 1 max = 4 }
		class = pc_asteroid
		orbit_distance = 0
		orbit_angle = { min = 90 max = 270 }
	}

	planet = {
		count = { min = 2 max = 5 }
		orbit_distance = 25
		orbit_angle = { min = 90 max = 270 }

		change_orbit = @base_moon_distance

		moon = {
			count = { min = 0 max = 1 }
			orbit_angle = { min = 90 max = 270 }
			orbit_distance = 5
		}
	}

	init_effect = {
		create_sleeper_outpost = yes
	}

	neighbor_system = {
		distance = { min = 0 max = 50 }
		initializer = "sleeper_empty_space_2"
	}
	neighbor_system = {
		distance = { min = 0 max = 50 }
		initializer = "sleeper_drone_2"
	}
}

sleeper_empty_space_2 = {
	class = "rl_standard_stars"
	asteroid_belt = {
		type = rocky_asteroid_belt
		radius = 130
	}
	asteroid_belt = {
		type = rocky_asteroid_belt
		radius = 240
	}

	planet = {
		count = 1
		class = star
		orbit_distance = 0
		orbit_angle = 1
		size = { min = 20 max = 30 }
		has_ring = no
	}

	change_orbit = 130

	planet = {
		count = { min = 3 max = 6 }
		class = pc_asteroid
		orbit_distance = 0
		orbit_angle = { min = 70 max = 120 }
	}

	change_orbit = 110

	planet = {
		count = { min = 3 max = 6 }
		class = pc_asteroid
		orbit_distance = 0
		orbit_angle = { min = 70 max = 120 }
	}

	change_orbit = -210

	planet = {
		count = { min = 2 max = 2 }
		orbit_distance = 30
		orbit_angle = { min = 90 max = 270 }

		change_orbit = @base_moon_distance

		moon = {
            count = { min = 0 max = 1 }
            orbit_angle = { min = 90 max = 270 }
            orbit_distance = 5
        }
	}

	change_orbit = 35

	planet = {
		count = { min = 2 max = 2 }
		orbit_distance = 40
		orbit_angle = { min = 90 max = 270 }

		change_orbit = @base_moon_distance

		moon = {
            count = { min = 0 max = 1 }
            orbit_angle = { min = 90 max = 270 }
            orbit_distance = 5
        }
	}

	change_orbit = 35

	planet = {
		count = { min = 2 max = 2 }
		orbit_distance = 40
		orbit_angle = { min = 90 max = 270 }

		change_orbit = @base_moon_distance

		moon = {
            count = { min = 0 max = 1 }
            orbit_angle = { min = 90 max = 270 }
            orbit_distance = 5
        }
	}

	init_effect = {
		create_sleeper_outpost = yes
	}

	neighbor_system = {
		distance = { min = 0 max = 50 }
		initializer = "sleeper_drone_1"
	}
	neighbor_system = {
		distance = { min = 0 max = 50 }
		initializer = "sleeper_drone_4"
	}
}

sleeper_drone_1 = {
	class = "rl_standard_stars"

	flags = { hostile_system }

	asteroid_belt = {
		type = rocky_asteroid_belt
		radius = 95
	}

	planet = {
		count = 1
		class = star
		orbit_distance = 0
		orbit_angle = 1
		size = { min = 20 max = 30 }
		has_ring = no
		init_effect = {
			set_planet_flag = sleeper_drone_country_system
		}
	}

	change_orbit = 30

	planet = {
		count = 2
		orbit_distance = 20
		orbit_angle = { min = 90 max = 270 }
	}

	change_orbit = 25

	planet = {
		count = { min = 1 max = 4 }
		class = pc_asteroid
		orbit_distance = 0
		orbit_angle = { min = 90 max = 270 }
	}

	planet = {
		count = { min = 2 max = 5 }
		orbit_distance = 25
		orbit_angle = { min = 90 max = 270 }

		change_orbit = @base_moon_distance

		moon = {
			count = { min = 0 max = 1 }
			orbit_angle = { min = 90 max = 270 }
			orbit_distance = 5
		}
	}

	init_effect = {
		random_system_planet = {
			limit = {
				is_star = no
				is_asteroid = no
			}
			set_planet_flag = sleeper_drone_planet_1
			change_pc = { class = rl_habitable_normal inherit_entity = no }
			reset_planet = yes
		}
	}
}

sleeper_drone_2 = {
	class = "rl_standard_stars"

	flags = { hostile_system }

	asteroid_belt = {
		type = rocky_asteroid_belt
		radius = 95
	}

	planet = {
		count = 1
		class = star
		orbit_distance = 0
		orbit_angle = 1
		size = { min = 20 max = 30 }
		has_ring = no
		init_effect = {
			set_planet_flag = sleeper_drone_country_system
		}
	}

	change_orbit = 30

	planet = {
		count = 2
		orbit_distance = 20
		orbit_angle = { min = 90 max = 270 }
	}

	change_orbit = 25

	planet = {
		count = { min = 1 max = 4 }
		class = pc_asteroid
		orbit_distance = 0
		orbit_angle = { min = 90 max = 270 }
	}

	planet = {
		count = { min = 2 max = 5 }
		orbit_distance = 25
		orbit_angle = { min = 90 max = 270 }

		change_orbit = @base_moon_distance

		moon = {
			count = { min = 0 max = 1 }
			orbit_angle = { min = 90 max = 270 }
			orbit_distance = 5
		}
	}

	init_effect = {
		random_system_planet = {
			limit = {
				is_star = no
				is_asteroid = no
			}
			set_planet_flag = sleeper_drone_planet_2
			change_pc = { class = rl_habitable_normal inherit_entity = no }
			reset_planet = yes
		}
	}
}

sleeper_drone_3 = {
	class = "rl_standard_stars"

	flags = { hostile_system }

	asteroid_belt = {
		type = rocky_asteroid_belt
		radius = 95
	}

	planet = {
		count = 1
		class = star
		orbit_distance = 0
		orbit_angle = 1
		size = { min = 20 max = 30 }
		has_ring = no
		init_effect = {
			set_planet_flag = sleeper_drone_country_system
		}
	}

	change_orbit = 30

	planet = {
		count = 2
		orbit_distance = 20
		orbit_angle = { min = 90 max = 270 }
	}

	change_orbit = 25

	planet = {
		count = { min = 1 max = 4 }
		class = pc_asteroid
		orbit_distance = 0
		orbit_angle = { min = 90 max = 270 }
	}

	planet = {
		count = { min = 2 max = 5 }
		orbit_distance = 25
		orbit_angle = { min = 90 max = 270 }

		change_orbit = @base_moon_distance

		moon = {
			count = { min = 0 max = 1 }
			orbit_angle = { min = 90 max = 270 }
			orbit_distance = 5
		}
	}

	init_effect = {
		random_system_planet = {
			limit = {
				is_star = no
				is_asteroid = no
			}
			set_planet_flag = sleeper_drone_planet_3
			change_pc = { class = rl_habitable_normal inherit_entity = no }
			reset_planet = yes
		}
	}
}

sleeper_drone_4 = {
	class = "rl_standard_stars"

	flags = { hostile_system }

	asteroid_belt = {
		type = rocky_asteroid_belt
		radius = 95
	}

	planet = {
		count = 1
		class = star
		orbit_distance = 0
		orbit_angle = 1
		size = { min = 20 max = 30 }
		has_ring = no
		init_effect = {
			set_planet_flag = sleeper_drone_country_system
		}
	}

	change_orbit = 30

	planet = {
		count = 2
		orbit_distance = 20
		orbit_angle = { min = 90 max = 270 }
	}

	change_orbit = 25

	planet = {
		count = { min = 1 max = 4 }
		class = pc_asteroid
		orbit_distance = 0
		orbit_angle = { min = 90 max = 270 }
	}

	planet = {
		count = { min = 2 max = 5 }
		orbit_distance = 25
		orbit_angle = { min = 90 max = 270 }

		change_orbit = @base_moon_distance

		moon = {
			count = { min = 0 max = 1 }
			orbit_angle = { min = 90 max = 270 }
			orbit_distance = 5
		}
	}

	init_effect = {
		random_system_planet = {
			limit = {
				is_star = no
				is_asteroid = no
			}
			set_planet_flag = sleeper_drone_planet_4
			change_pc = { class = rl_habitable_normal inherit_entity = no }
			reset_planet = yes
		}
	}
}

