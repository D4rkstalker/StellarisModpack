
# Random System
ag_shattered_ringworld_init = {
	class = sc_black_hole
	usage = misc_system_init
	usage_odds = {
		base = 4
		modifier = { factor = 0 is_bottleneck_system = yes }
		modifier = { factor = 0 has_star_flag = empire_cluster }
	}

	flags = { ag_shattered_ringworld_system }
	max_instances = 1
	
	planet = {
		count = 1
		class = "pc_black_hole"
		orbit_angle = 0
		orbit_distance = 0
		size = 24
		has_ring = no
		init_effect = {
			prevent_anomaly = yes
			while = {
				count = 15
				create_ambient_object = {
					type = "large_debris_object"
					entity_offset_height = { min = -0 max = -25 }
					location = this
				}
				last_created_ambient_object = {
					set_location = {
						target = prev
						distance = 110
						angle = random
					}
				}
			}
			while = {
				count = 25
				create_ambient_object = {
					type = "medium_debris_01_object"
					entity_offset_height = { min = -0 max = -25 }
					location = this
				}
				last_created_ambient_object = {
					set_location = {
						target = prev
						distance = 110
						angle = random
					}
				}
			}
			while = {
				count = 25
				create_ambient_object = {
					type = "medium_debris_02_object"
					entity_offset_height = { min = -0 max = -25 }
					location = this
				}
				last_created_ambient_object = {
					set_location = {
						target = prev
						distance = 110
						angle = random
					}
				}
			}
			while = {
				count = 30
				create_ambient_object = {
					type = "small_debris_object"
					entity_offset_height = { min = -0 max = -25 }
					location = this
				}
				last_created_ambient_object = {
					set_location = {
						target = prev
						distance = 110
						angle = random
					}
				}
			}
		}
	}
	
	change_orbit = 100
	
	planet = {
		class = "pc_ringworld_tech_damaged"
		name = "NAME_Ring_Segment_B"
		orbit_angle = 30
		orbit_distance = 0
		init_effect = { prevent_anomaly = yes }
	}
	planet = {
		class = "pc_ringworld_seam_damaged"
		name = "NAME_Ring_Segment_C"
		orbit_angle = 130
		orbit_distance = 0

		init_effect = {
			create_ambient_object = {
				type = "medium_debris_01_object"
				location = THIS
			}
			prevent_anomaly = yes
		}
	}

	change_orbit = 30

	planet = {
		count = { min = 0 max = 1 }
		class = "ag_cold_habitable_world"
		orbit_distance = { min = 35 max = 50 }
		orbit_angle = random
		size = { min = 10 max = 18 }
		
		init_effect = {
			ag_ancient_random_system_cold_habitable_world_effect = yes
			ag_ancient_random_system_spawn_debris = yes
		}

		change_orbit = 10

		moon = {
			count = { min = 0 max = 2 }
			class = "ag_cold_unhabitable_moon"
			orbit_distance = { min = 10 max = 15 }
			orbit_angle = random
			size = { min = 5 max = 9 }
		}
	}
	
	change_orbit = 20

	planet = {
		count = { min = 0 max = 3 }
		class = "ag_cold_habitable_world"
		orbit_distance = { min = 20 max = 33 }
		orbit_angle = random
		size = { min = 10 max = 18 }
		
		init_effect = {
			ag_ancient_random_system_cold_habitable_world_effect = yes
			ag_ancient_random_system_spawn_debris = yes
		}
	}

	init_effect = {
		random_list = {
			10 = {
				star = { change_variable = { which = ag_num_ancient_debris value = 1 } }
				create_ambient_object = {
					type = "ag_zeta_titan_debris_1_object"
					entity_offset_height = { min = 15 max = -15 }
					entity_offset_angle = { min = 0 max = 359 }
					location = solar_system
				}
				last_created_ambient_object = {
					ag_set_zeta_debris_object_flag = { ag_ship_class = titan }
				}
			}
			10 = {
				star = { change_variable = { which = ag_num_ancient_debris value = 1 } }
				create_ambient_object = {
					type = "ag_zeta_titan_debris_2_object"
					entity_offset_height = { min = 15 max = -15 }
					entity_offset_angle = { min = 0 max = 359 }
					location = solar_system
				}
				last_created_ambient_object = {
					ag_set_zeta_debris_object_flag = { ag_ship_class = titan }
				}
			}
			10 = {
				star = { change_variable = { which = ag_num_ancient_debris value = 1 } }
				create_ambient_object = {
					type = "ag_zeta_titan_debris_3_object"
					entity_offset_height = { min = 15 max = -15 }
					entity_offset_angle = { min = 0 max = 359 }
					location = solar_system
				}
				last_created_ambient_object = {
					ag_set_zeta_debris_object_flag = { ag_ship_class = titan }
				}
			}
			10 = {
				star = { change_variable = { which = ag_num_ancient_debris value = 1 } }
				create_ambient_object = {
					type = "ag_zeta_battleship_debris_1_object"
					entity_offset_height = { min = 15 max = -15 }
					entity_offset_angle = { min = 0 max = 359 }
					location = solar_system
				}
				last_created_ambient_object = {
					random_list = {
						10 = {
							create_ambient_object = {
								type = "ag_zeta_battleship_debris_1_object"
								entity_offset_height = { min = 15 max = -15 }
								entity_offset_angle = { min = 0 max = 359 }
								location = solar_system
							}
							last_created_ambient_object = {
								ag_set_zeta_debris_object_flag = { ag_ship_class = battleship }
								random_list = {
									25 = { set_location = { target = prev distance = 10 angle = random } }
									25 = { set_location = { target = prev distance = 15 angle = random } }
									25 = { set_location = { target = prev distance = 20 angle = random } }
									25 = { set_location = { target = prev distance = 25 angle = random } }
								}
							}
						}
						10 = {
							create_ambient_object = {
								type = "ag_zeta_battleship_debris_2_object"
								entity_offset_height = { min = 15 max = -15 }
								entity_offset_angle = { min = 0 max = 359 }
								location = solar_system
							}
							last_created_ambient_object = {
								ag_set_zeta_debris_object_flag = { ag_ship_class = battleship }
								random_list = {
									25 = { set_location = { target = prev distance = 10 angle = random } }
									25 = { set_location = { target = prev distance = 15 angle = random } }
									25 = { set_location = { target = prev distance = 20 angle = random } }
									25 = { set_location = { target = prev distance = 25 angle = random } }
								}
							}
						}
						10 = {
							create_ambient_object = {
								type = "ag_zeta_battleship_debris_3_object"
								entity_offset_height = { min = 15 max = -15 }
								entity_offset_angle = { min = 0 max = 359 }
								location = solar_system
							}
							last_created_ambient_object = {
								ag_set_zeta_debris_object_flag = { ag_ship_class = battleship }
								random_list = {
									25 = { set_location = { target = prev distance = 10 angle = random } }
									25 = { set_location = { target = prev distance = 15 angle = random } }
									25 = { set_location = { target = prev distance = 20 angle = random } }
									25 = { set_location = { target = prev distance = 25 angle = random } }
								}
							}
						}
					}
					ag_set_zeta_debris_object_flag = { ag_ship_class = battleship }
				}
			}
			10 = {
				star = { change_variable = { which = ag_num_ancient_debris value = 1 } }
				create_ambient_object = {
					type = "ag_zeta_battleship_debris_2_object"
					entity_offset_height = { min = 15 max = -15 }
					entity_offset_angle = { min = 0 max = 359 }
					location = solar_system
				}
				last_created_ambient_object = {
					random_list = {
						10 = {
							create_ambient_object = {
								type = "ag_zeta_battleship_debris_1_object"
								entity_offset_height = { min = 15 max = -15 }
								entity_offset_angle = { min = 0 max = 359 }
								location = solar_system
							}
							last_created_ambient_object = {
								ag_set_zeta_debris_object_flag = { ag_ship_class = battleship }
								random_list = {
									25 = { set_location = { target = prev distance = 10 angle = random } }
									25 = { set_location = { target = prev distance = 15 angle = random } }
									25 = { set_location = { target = prev distance = 20 angle = random } }
									25 = { set_location = { target = prev distance = 25 angle = random } }
								}
							}
						}
						10 = {
							create_ambient_object = {
								type = "ag_zeta_battleship_debris_2_object"
								entity_offset_height = { min = 15 max = -15 }
								entity_offset_angle = { min = 0 max = 359 }
								location = solar_system
							}
							last_created_ambient_object = {
								ag_set_zeta_debris_object_flag = { ag_ship_class = battleship }
								random_list = {
									25 = { set_location = { target = prev distance = 10 angle = random } }
									25 = { set_location = { target = prev distance = 15 angle = random } }
									25 = { set_location = { target = prev distance = 20 angle = random } }
									25 = { set_location = { target = prev distance = 25 angle = random } }
								}
							}
						}
						10 = {
							create_ambient_object = {
								type = "ag_zeta_battleship_debris_3_object"
								entity_offset_height = { min = 15 max = -15 }
								entity_offset_angle = { min = 0 max = 359 }
								location = solar_system
							}
							last_created_ambient_object = {
								ag_set_zeta_debris_object_flag = { ag_ship_class = battleship }
								random_list = {
									25 = { set_location = { target = prev distance = 10 angle = random } }
									25 = { set_location = { target = prev distance = 15 angle = random } }
									25 = { set_location = { target = prev distance = 20 angle = random } }
									25 = { set_location = { target = prev distance = 25 angle = random } }
								}
							}
						}
					}
					ag_set_zeta_debris_object_flag = { ag_ship_class = battleship }
				}
			}
			10 = {
				star = { change_variable = { which = ag_num_ancient_debris value = 1 } }
				create_ambient_object = {
					type = "ag_zeta_battleship_debris_3_object"
					entity_offset_height = { min = 15 max = -15 }
					entity_offset_angle = { min = 0 max = 359 }
					location = solar_system
				}
				last_created_ambient_object = {
					random_list = {
						10 = {
							create_ambient_object = {
								type = "ag_zeta_battleship_debris_1_object"
								entity_offset_height = { min = 15 max = -15 }
								entity_offset_angle = { min = 0 max = 359 }
								location = solar_system
							}
							last_created_ambient_object = {
								ag_set_zeta_debris_object_flag = { ag_ship_class = battleship }
								random_list = {
									25 = { set_location = { target = prev distance = 10 angle = random } }
									25 = { set_location = { target = prev distance = 15 angle = random } }
									25 = { set_location = { target = prev distance = 20 angle = random } }
									25 = { set_location = { target = prev distance = 25 angle = random } }
								}
							}
						}
						10 = {
							create_ambient_object = {
								type = "ag_zeta_battleship_debris_2_object"
								entity_offset_height = { min = 15 max = -15 }
								entity_offset_angle = { min = 0 max = 359 }
								location = solar_system
							}
							last_created_ambient_object = {
								ag_set_zeta_debris_object_flag = { ag_ship_class = battleship }
								random_list = {
									25 = { set_location = { target = prev distance = 10 angle = random } }
									25 = { set_location = { target = prev distance = 15 angle = random } }
									25 = { set_location = { target = prev distance = 20 angle = random } }
									25 = { set_location = { target = prev distance = 25 angle = random } }
								}
							}
						}
						10 = {
							create_ambient_object = {
								type = "ag_zeta_battleship_debris_3_object"
								entity_offset_height = { min = 15 max = -15 }
								entity_offset_angle = { min = 0 max = 359 }
								location = solar_system
							}
							last_created_ambient_object = {
								ag_set_zeta_debris_object_flag = { ag_ship_class = battleship }
								random_list = {
									25 = { set_location = { target = prev distance = 10 angle = random } }
									25 = { set_location = { target = prev distance = 15 angle = random } }
									25 = { set_location = { target = prev distance = 20 angle = random } }
									25 = { set_location = { target = prev distance = 25 angle = random } }
								}
							}
						}
					}
					ag_set_zeta_debris_object_flag = { ag_ship_class = battleship }
				}
			}
			10 = {
				star = { change_variable = { which = ag_num_ancient_debris value = 1 } }
				create_ambient_object = {
					type = "ag_zeta_destroyer_debris_1_object"
					entity_offset_height = { min = 15 max = -15 }
					entity_offset_angle = { min = 0 max = 359 }
					location = solar_system
				}
				last_created_ambient_object = {
					while = {
						count = 3
						random_list = {
							10 = {
								create_ambient_object = {
									type = "ag_zeta_destroyer_debris_1_object"
									entity_offset_height = { min = 15 max = -15 }
									entity_offset_angle = { min = 0 max = 359 }
									location = solar_system
								}
								last_created_ambient_object = {
									ag_set_zeta_debris_object_flag = { ag_ship_class = destroyer }
									random_list = {
										25 = { set_location = { target = prev distance = 10 angle = random } }
										25 = { set_location = { target = prev distance = 15 angle = random } }
										25 = { set_location = { target = prev distance = 20 angle = random } }
										25 = { set_location = { target = prev distance = 25 angle = random } }
									}
								}
							}
							10 = {
								create_ambient_object = {
									type = "ag_zeta_destroyer_debris_2_object"
									entity_offset_height = { min = 15 max = -15 }
									entity_offset_angle = { min = 0 max = 359 }
									location = solar_system
								}
								last_created_ambient_object = {
									ag_set_zeta_debris_object_flag = { ag_ship_class = destroyer }
									random_list = {
										25 = { set_location = { target = prev distance = 10 angle = random } }
										25 = { set_location = { target = prev distance = 15 angle = random } }
										25 = { set_location = { target = prev distance = 20 angle = random } }
										25 = { set_location = { target = prev distance = 25 angle = random } }
									}
								}
							}
							10 = {
								create_ambient_object = {
									type = "ag_zeta_destroyer_debris_3_object"
									entity_offset_height = { min = 15 max = -15 }
									entity_offset_angle = { min = 0 max = 359 }
									location = solar_system
								}
								last_created_ambient_object = {
									ag_set_zeta_debris_object_flag = { ag_ship_class = destroyer }
									random_list = {
										25 = { set_location = { target = prev distance = 10 angle = random } }
										25 = { set_location = { target = prev distance = 15 angle = random } }
										25 = { set_location = { target = prev distance = 20 angle = random } }
										25 = { set_location = { target = prev distance = 25 angle = random } }
									}
								}
							}
						}
					}
					ag_set_zeta_debris_object_flag = { ag_ship_class = destroyer }
				}
			}
			10 = {
				star = { change_variable = { which = ag_num_ancient_debris value = 1 } }
				create_ambient_object = {
					type = "ag_zeta_destroyer_debris_2_object"
					entity_offset_height = { min = 15 max = -15 }
					entity_offset_angle = { min = 0 max = 359 }
					location = solar_system
				}
				last_created_ambient_object = {
					while = {
						count = 3
						random_list = {
							10 = {
								create_ambient_object = {
									type = "ag_zeta_destroyer_debris_1_object"
									entity_offset_height = { min = 15 max = -15 }
									entity_offset_angle = { min = 0 max = 359 }
									location = solar_system
								}
								last_created_ambient_object = {
									ag_set_zeta_debris_object_flag = { ag_ship_class = destroyer }
									random_list = {
										25 = { set_location = { target = prev distance = 10 angle = random } }
										25 = { set_location = { target = prev distance = 15 angle = random } }
										25 = { set_location = { target = prev distance = 20 angle = random } }
										25 = { set_location = { target = prev distance = 25 angle = random } }
									}
								}
							}
							10 = {
								create_ambient_object = {
									type = "ag_zeta_destroyer_debris_2_object"
									entity_offset_height = { min = 15 max = -15 }
									entity_offset_angle = { min = 0 max = 359 }
									location = solar_system
								}
								last_created_ambient_object = {
									ag_set_zeta_debris_object_flag = { ag_ship_class = destroyer }
									random_list = {
										25 = { set_location = { target = prev distance = 10 angle = random } }
										25 = { set_location = { target = prev distance = 15 angle = random } }
										25 = { set_location = { target = prev distance = 20 angle = random } }
										25 = { set_location = { target = prev distance = 25 angle = random } }
									}
								}
							}
							10 = {
								create_ambient_object = {
									type = "ag_zeta_destroyer_debris_3_object"
									entity_offset_height = { min = 15 max = -15 }
									entity_offset_angle = { min = 0 max = 359 }
									location = solar_system
								}
								last_created_ambient_object = {
									ag_set_zeta_debris_object_flag = { ag_ship_class = destroyer }
									random_list = {
										25 = { set_location = { target = prev distance = 10 angle = random } }
										25 = { set_location = { target = prev distance = 15 angle = random } }
										25 = { set_location = { target = prev distance = 20 angle = random } }
										25 = { set_location = { target = prev distance = 25 angle = random } }
									}
								}
							}
						}
					}
					ag_set_zeta_debris_object_flag = { ag_ship_class = destroyer }
				}
			}
			10 = {
				star = { change_variable = { which = ag_num_ancient_debris value = 1 } }
				create_ambient_object = {
					type = "ag_zeta_destroyer_debris_3_object"
					entity_offset_height = { min = 15 max = -15 }
					entity_offset_angle = { min = 0 max = 359 }
					location = solar_system
				}
				last_created_ambient_object = {
					while = {
						count = 3
						random_list = {
							10 = {
								create_ambient_object = {
									type = "ag_zeta_destroyer_debris_1_object"
									entity_offset_height = { min = 15 max = -15 }
									entity_offset_angle = { min = 0 max = 359 }
									location = solar_system
								}
								last_created_ambient_object = {
									ag_set_zeta_debris_object_flag = { ag_ship_class = destroyer }
									random_list = {
										25 = { set_location = { target = prev distance = 10 angle = random } }
										25 = { set_location = { target = prev distance = 15 angle = random } }
										25 = { set_location = { target = prev distance = 20 angle = random } }
										25 = { set_location = { target = prev distance = 25 angle = random } }
									}
								}
							}
							10 = {
								create_ambient_object = {
									type = "ag_zeta_destroyer_debris_2_object"
									entity_offset_height = { min = 15 max = -15 }
									entity_offset_angle = { min = 0 max = 359 }
									location = solar_system
								}
								last_created_ambient_object = {
									ag_set_zeta_debris_object_flag = { ag_ship_class = destroyer }
									random_list = {
										25 = { set_location = { target = prev distance = 10 angle = random } }
										25 = { set_location = { target = prev distance = 15 angle = random } }
										25 = { set_location = { target = prev distance = 20 angle = random } }
										25 = { set_location = { target = prev distance = 25 angle = random } }
									}
								}
							}
							10 = {
								create_ambient_object = {
									type = "ag_zeta_destroyer_debris_3_object"
									entity_offset_height = { min = 15 max = -15 }
									entity_offset_angle = { min = 0 max = 359 }
									location = solar_system
								}
								last_created_ambient_object = {
									ag_set_zeta_debris_object_flag = { ag_ship_class = destroyer }
									random_list = {
										25 = { set_location = { target = prev distance = 10 angle = random } }
										25 = { set_location = { target = prev distance = 15 angle = random } }
										25 = { set_location = { target = prev distance = 20 angle = random } }
										25 = { set_location = { target = prev distance = 25 angle = random } }
									}
								}
							}
						}
					}
					ag_set_zeta_debris_object_flag = { ag_ship_class = destroyer }
				}
			}
		}
		random_list = {
			50 = { }
			50 = {
				create_cloud_country = yes
				random_system_planet = {
					limit = { is_star = yes }
					add_dark_matter = yes
					event_target:cloud_country = {
						if = {
							limit = { NOT = { has_modifier = cloud_power } }
							add_modifier = { modifier = cloud_power days = -1 }
						}
						create_fleet = {
							name = "NAME_Void_Cloud"
							effect = {
								set_owner = event_target:cloud_country
								create_ship = {
									name = ""
									design = "NAME_Cloud_Entity"
								}
								set_location = prevprev
								set_fleet_stance = aggressive
								set_aggro_range_measure_from = self
								set_aggro_range = 500
							}
						}
					}
				}
			}
		}
	}
}
