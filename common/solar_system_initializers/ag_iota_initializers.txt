
# Iota Area, Special Enclave
ag_ancient_iota_init = {
	name = "NAME_iota_area"
	class = "sc_g"
	prevent_anomalies = yes
	
	asteroid_belt = {
		type = ag_crystalized_asteroid_red_belt
		radius = 250
	}

	flags = { ag_ancient_system ag_ancient_iota_system guardian hostile_system enclave }
	max_instances = 1
	
	planet = {
		count = 1
		name = "NAME_iota_area"
		class = pc_g_star
		orbit_angle = 0
		orbit_distance = 0
		size = 24
		has_ring = no

		init_effect = {
			save_global_event_target_as = ag_ancient_iota_star
		}
	}
	
	change_orbit = 45
	
	planet = {
		name = "NAME_iota_shielded_world"
		class = "pc_ringworld_tech"
		orbit_angle = 30
		orbit_distance = 0
		size = 5
		
		flags = { ag_ancient_iota_shielded_world ag_ring_habitable_section colony_event }
		
		init_effect = {
			ag_set_ancient_ringworld = {
				ag_color = red
				ag_type = habitable
				ag_surface_type = barren
			}
			save_global_event_target_as = ag_ancient_iota_shielded_world
			create_species = {
				name = random
				class = random_non_machine
				portrait = random
				traits = {
					ideal_planet_class = pc_habitat
					trait = "trait_void_dweller_1"
					trait = "trait_erudite"
					trait = "trait_intelligent"
					trait = "trait_charismatic"
					trait = "trait_slow_breeders"
				}
				homeworld = this
			}
			last_created_species = { save_global_event_target_as = ag_ancient_iota_enclave_species }
			create_country = {
				name = "NAME_ag_ancient_iota_enclave"
				type = ag_ancient_iota_enclave
				authority = "auth_democratic"
				civics = {
					civic = civic_ag_ancient_iota_enclave
					civic = civic_ag_inwards_perfection
				}
				origin = "origin_ag_ancient_remnants"
				species = event_target:ag_ancient_iota_enclave_species
				flag = {
					icon={
						category = "spherical"
						file = "flag_spherical_2.dds"
					}
					background={
						category = "backgrounds"
						file = "circle.dds"
					}
					colors={
						"dark_grey"
						"red"
						"null"
						"null"
					}
				}
				ethos = {
					ethic = ethic_fanatic_pacifist
					ethic = ethic_xenophobe
				}
				ignore_initial_colony_error = yes
			}
			last_created_country = {
				set_country_flag = ag_ancient_empire_mod_country
				save_global_event_target_as = ag_ancient_iota_enclave
				set_country_flag = ag_ancient_iota_enclave
				set_graphical_culture = fallen_empire_02
				create_fleet = {
					name = "NAME_ag_ancient_iota_enclave_station_fleet"
					settings = {
						spawn_debris = no
					}
					effect = {
						set_owner = prev
						create_ship = {
							name = "NAME_ag_ancient_iota_enclave_station_ship"
							design = "NAME_ag_iota_station_1"
							prefix = no
							effect = {
								ag_difficulty_bonus = yes
							}
						}
						set_location = {
							target = prevprev
							distance = 95
							angle = 0
						}
						prev = {
							set_custom_capital_location = prev
						}
					}
				}
				create_leader = {
					class = ruler
					species = prev
					name = random
					skill = 10
					traits = {
						trait = trait_ruler_champion_of_the_people_2
						trait = trait_ruler_eye_for_talent_2
						trait = trait_ruler_charismatic_2
						trait = leader_trait_erudite
					}
				}
				set_leader = last_created_leader
			}
		}
	}
	
	#################### Ringworld Structures #####################
	
	planet = {
		name = "NAME_ring_struct"
		class = "pc_ringworld_tech"
		orbit_angle = 30
		orbit_distance = 0
		flags = { ag_ring_struct_1 }
		
		init_effect = { 
			ag_set_ancient_ringworld = { ag_color = red ag_type = tech }
			save_global_event_target_as = ag_iota_ring_1
			set_planet_flag = ag_ancient_construction_section_0
		}
	}
	
	planet = {
		name = "NAME_ring_struct"
		class = "pc_ringworld_tech"
		orbit_angle = 30
		orbit_distance = 0
		flags = { ag_ring_struct_2 }

		init_effect = {
			ag_set_ancient_ringworld = { ag_color = red ag_type = seam }
			set_planet_flag = ag_ancient_resource_section_0
			save_global_event_target_as = ag_iota_ring_2
		}
	}
	
	planet = {
		name = "NAME_ring_struct"
		class = "pc_ringworld_tech"
		orbit_angle = 30
		orbit_distance = 0
		flags = { ag_ring_struct_3 }

		init_effect = {
			ag_set_ancient_ringworld = { ag_color = red ag_type = tech }
			save_global_event_target_as = ag_iota_ring_3
			set_planet_flag = ag_ancient_construction_section_0
		}
	}
	
	planet = {
		name = "NAME_ring_struct"
		class = "pc_ringworld_tech"
		orbit_angle = 30
		orbit_distance = 0
		flags = { ag_ring_struct_4 }

		init_effect = {
			ag_set_ancient_ringworld = { ag_color = red ag_type = seam }
			set_planet_flag = ag_ancient_resource_section_0
			save_global_event_target_as = ag_iota_ring_4
		}
	}
	
	planet = {
		name = "NAME_ring_struct"
		class = "pc_ringworld_tech"
		orbit_angle = 30
		orbit_distance = 0
		flags = { ag_ring_struct_5 }

		init_effect = {
			ag_set_ancient_ringworld = { ag_color = red ag_type = tech }
			save_global_event_target_as = ag_iota_ring_5
			set_planet_flag = ag_ancient_construction_section_0
		}
	}
	
	planet = {
		name = "NAME_ring_struct"
		class = "pc_ringworld_tech"
		orbit_angle = 30
		orbit_distance = 0
		flags = { ag_ring_struct_6 }

		init_effect = {
			ag_set_ancient_ringworld = { ag_color = red ag_type = seam }
			set_planet_flag = ag_ancient_resource_section_0
			save_global_event_target_as = ag_iota_ring_6
		}
	}
	
	planet = {
		name = "NAME_ring_struct"
		class = "pc_ringworld_tech"
		orbit_angle = 30
		orbit_distance = 0
		flags = { ag_ring_struct_7 }

		init_effect = {
			ag_set_ancient_ringworld = { ag_color = red ag_type = tech }
			save_global_event_target_as = ag_iota_ring_7
			set_planet_flag = ag_ancient_construction_section_0
		}
	}
	
	planet = {
		name = "NAME_ring_struct"
		class = "pc_ringworld_tech"
		orbit_angle = 30
		orbit_distance = 0
		flags = { ag_ring_struct_8 }

		init_effect = {
			ag_set_ancient_ringworld = { ag_color = red ag_type = seam }
			set_planet_flag = ag_ancient_resource_section_0
			save_global_event_target_as = ag_iota_ring_8
		}
	}
	
	planet = {
		name = "NAME_ring_struct"
		class = "pc_ringworld_tech"
		orbit_angle = 30
		orbit_distance = 0
		flags = { ag_ring_struct_9 }

		init_effect = {
			ag_set_ancient_ringworld = { ag_color = red ag_type = tech }
			save_global_event_target_as = ag_iota_ring_9
			set_planet_flag = ag_ancient_construction_section_0
		}
	}
	
	planet = {
		name = "NAME_ring_struct"
		class = "pc_ringworld_tech"
		orbit_angle = 30
		orbit_distance = 0
		flags = { ag_ring_struct_10 }

		init_effect = {
			ag_set_ancient_ringworld = { ag_color = red ag_type = seam }
			set_planet_flag = ag_ancient_resource_section_0
			save_global_event_target_as = ag_iota_ring_10
		}
	}
	
	planet = {
		name = "NAME_ring_struct"
		class = "pc_ringworld_tech"
		orbit_angle = 30
		orbit_distance = 0
		flags = { ag_ring_struct_11 }

		init_effect = {
			ag_set_ancient_ringworld = { ag_color = red ag_type = tech }
			save_global_event_target_as = ag_iota_ring_11
			set_planet_flag = ag_ancient_construction_section_0
		}
	}
	
	################################################
	
	change_orbit = 205
	
	planet = {
		class = pc_ice_asteroid
		orbit_distance = 0
		orbit_angle = random
		count = { max = 6 min = 3 }
		size = 4
		
		init_effect = {
			random_list = { 50 = { } 50 = { ag_crystalize_astroid = { ag_color = red } } }
		}
	}
	
	change_orbit = 250
	
	init_effect = { set_global_flag = ag_iota_area_spawned ag_mod_compatibility_effect = yes }
}