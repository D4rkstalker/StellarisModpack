# Filename:		03_scluster_hostile_system_initializers.txt
# Contributors:	SirBlackAxe

@distance = 50
@jumps = 3
@planet_min_size = 10
@planet_max_size = 25
@base_moon_distance = 10
@moon_min_size = 6
@moon_max_size = 10
@homeworld_min_size = 18
@homeworld_max_size = 24 # 21

### Privateer Conglomerate: Buffed in both fleet power and deposits.
	# spawn_chance = 100 (if not using apocalypse)
	# flags = { hostile_system pirate_home_system pirate_system }
	# Overlord: Make them mercenaries?
	# pirate sttions?
scluster_hostile_init_18 = {
	class = "rl_standard_stars"
	asteroid_belt = {
		type = rocky_asteroid_belt
		radius = 95
	}
	asteroid_belt = { # Added
		type = debris_asteroid_belt
		radius = 160
	}

	max_instances = 1
	# spawn_chance = 100
	# usage = misc_system_init
	# usage_odds = {
	# 	base = 100
	# 	modifier = {
	# 		factor = 0
	# 		NOT = { is_in_cluster = resource_cluster_0 }
	# 	}
	# 	modifier = {
	# 		factor = 0
	# 		OR = {
	# 			has_star_flag = empire_cluster
	# 			host_has_dlc = "Apocalypse"
	# 		}
	# 	}
	# 	modifier = {
	# 		factor = 0
	# 		is_bottleneck_system = yes
	# 	}
	# }

	flags = { scluster hostile_system pirate_home_system pirate_system }

	planet = {
		count = 1
		class = star
		orbit_distance = 0
		orbit_angle = 1
		size = { min = 20 max = 30 }
		has_ring = no

		init_effect = {
			# prevent_anomaly = yes
			set_deposit = d_energy_4
			create_pirate_country = yes
			event_target:pirate_country = {
				if = {
					limit = {
						NOT = {
							has_modifier = pirate_power
						}
					}
					add_modifier = {
						modifier = pirate_power
						days = -1
					}
				}
			}
			every_country = {
				establish_communications_no_message = event_target:pirate_country
			}

			create_fleet = {
				name = "NAME_Old_Guard" # 9k
				effect = {
					set_owner = event_target:pirate_country
					set_fleet_flag = pirate_home_system_fleet
					while = {
						count = 3 # 1
						create_ship = {
							name = random
							design = "NAME_Pirate_Galleon"
							graphical_culture = "pirate_01"
						}
					}
					set_fleet_stance = aggressive
					set_aggro_range_measure_from = self
					set_aggro_range = 250
					set_location = {
						target = prev
						distance = 90
						angle = 330
					}
					set_fleet_flag = pirate_home_system_fleet
				}
			}

			create_fleet = {
				name = "NAME_Scarred_Veterans" # 12k
				effect = {
					set_owner = event_target:pirate_country
					set_fleet_flag = pirate_home_system_fleet
					while = { # Added
						count = 1
						create_ship = {
							name = random
							design = "NAME_Pirate_Galleon"
							graphical_culture = "pirate_01"
						}
					}
					while = {
						count = 12 # 6
						create_ship = {
							name = random
							design = "NAME_Corsair"
							graphical_culture = "pirate_01"
						}
					}
					while = {
						count = 20 # 10
						create_ship = {
							name = random
							design = "NAME_Marauder"
							graphical_culture = "pirate_01"
						}
					}
					while = {
						count = 40 # 20
						create_ship = {
							name = random
							design = "NAME_Black_Earl"
							graphical_culture = "pirate_01"
						}
					}
					while = {
						count = 8 # 4
						create_ship = {
							name = random
							design = "NAME_Skull"
							graphical_culture = "pirate_01"
						}
					}
					set_fleet_flag = pirate_home_system_fleet
					set_formation_scale = 2
					set_fleet_stance = aggressive
					set_aggro_range_measure_from = self
					set_aggro_range = 250
					set_location = {
						target = prev
						distance = 90
						angle = 120
					}
				}
			}

			create_fleet = {
				name = "NAME_Young_Blood" # 1k
				effect = {
					set_owner = event_target:pirate_country
					create_ship_design = {
						design = "NAME_Reaver"
					}
					while = {
						count = 60 # 12
						create_ship = {
							name = random
							design = last_created_design
							graphical_culture = "pirate_01"
						}
					}
					set_location = {
						target = prev
						distance = 90
						angle = 200
					}
					set_fleet_stance = aggressive
					set_aggro_range_measure_from = self
					set_aggro_range = 150
					set_fleet_flag = pirate_home_system_fleet
					save_global_event_target_as = young_blood
				}
			}
		}
	}

	change_orbit = 50

	planet = {
		class = pc_shattered
		orbit_distance = 0
		orbit_angle = { min = 90 max = 270 }

		change_orbit = @base_moon_distance

		moon = {
			count = { min = 3 max = 5 }
			orbit_angle = { min = 90 max = 270 }
			orbit_distance = 5
		}

		init_effect = {
			prevent_anomaly = yes
			set_deposit = d_minerals_10
		}
	}

	change_orbit = 45 # 95

	planet = {
		class = pc_asteroid
		orbit_distance = 0
		orbit_angle = {
			min = 0
			max = 110 # 150
		}

		init_effect = {
			prevent_anomaly = yes
			# set_deposit = d_minerals_10
			add_deposit = d_trade_value_10
		}
	}
	planet = { # Added
		class = pc_rare_crystal_asteroid
		orbit_distance = 0
		orbit_angle = { min = 160 max = 330 }

		init_effect = {
			prevent_anomaly = yes
			add_deposit = d_rare_crystals_4
		}
	}
	planet = {
		class = pc_asteroid
		orbit_distance = 0
		orbit_angle = { min = 160 max = 330 }

		init_effect = {
			prevent_anomaly = yes
			add_deposit = d_minerals_8
		}
	}
}

##########################################
# Void Clouds
##########################################

# Cloud Entity
	# flags = { hostile_system void_system }
scluster_hostile_init_08 = {
	class = "rl_standard_stars"
	asteroid_belt = {
		type = rocky_asteroid_belt
		radius = 95
	}

	# usage = misc_system_init
	# usage_odds = {
	# 	base = 4
	# 	modifier = {
	# 		factor = 0.1
	# 		NOT = { is_in_cluster = resource_cluster_2 }
	# 	}
	# 	modifier = {
	# 		factor = 0
	# 		has_star_flag = empire_cluster
	# 	}
	# 	modifier = {
	# 		factor = 0
	# 		is_bottleneck_system = yes
	# 	}
	# }

	flags = { scluster hostile_system void_system }

	planet = {
		count = 1
		class = star
		orbit_distance = 0
		orbit_angle = 1
		size = { min = 20 max = 30 }
		has_ring = no
	}

	change_orbit = 30

	planet = {
		count = 2
		orbit_distance = 20
		orbit_angle = { min = 90 max = 270 }
	}

	change_orbit = 25

	planet = {
		class = pc_asteroid
		orbit_distance = 0
		orbit_angle = { min = 0 max = 150 }
	}
	planet = {
		class = pc_asteroid
		orbit_distance = 0
		orbit_angle = { min = 160 max = 330 }
	}

	planet = { # 2-5 planets w/ 0-1 moons
		count = { min = 2 max = 5 }
		orbit_distance = 25
		orbit_angle = { min = 90 max = 270 }

		change_orbit = @base_moon_distance

		moon = {
			count = { min = 0 max = 1 }
			orbit_angle = { min = 90 max = 270 }
			orbit_distance = 5
		}
	}

	init_effect = {
		create_cloud_country = yes
		random_system_planet = {
			limit = { is_star = yes }
			set_deposit = d_energy_2
			event_target:cloud_country = {
				set_aggro_range = 500
				create_fleet = {
					name = "NAME_Void_Cloud"
					effect = {
						set_owner = event_target:cloud_country
						create_ship = {
							name = ""
							design = "NAME_Cloud_Entity"
						}
						set_location = PREVPREV
						set_fleet_stance = aggressive
						set_aggro_range_measure_from = self
						set_aggro_range = 500
					}
				}
			}
		}
	}
}

##########################################
# Tiyanki
##########################################

# Tiyanki
	# flags = { tiyanki_home_system }
scluster_hostile_init_15 = {
	class = "rl_standard_stars"

	# usage = misc_system_init
	# usage_odds = {
	# 	base = 4
	# 	modifier = {
	# 		factor = 0.1
	# 		NOT = { is_in_cluster = resource_cluster_5 }
	# 	}
	# 	modifier = {
	# 		factor = 0
	# 		has_star_flag = empire_cluster
	# 	}
	# }

	flags = { scluster tiyanki_home_system }

	planet = {
		count = 1
		class = star
		orbit_distance = 0
		orbit_angle = 1
		size = { min = 20 max = 30 }
		has_ring = no
	}

	change_orbit = 45

	planet = {
		count = { min = 0 max = 1 }
		orbit_distance = 10
		orbit_angle = { min = 90 max = 270 }
	}

	planet = {
		count = { min = 1 max = 2 }
		orbit_distance = 60
		class = pc_gas_giant
		orbit_angle = { min = 90 max = 270 }
		size = 25

		change_orbit = @base_moon_distance

		moon = {
			count = { min = 1 max = 4 }
			size = { min = 8 max = 20 }
			orbit_angle = { min = 90 max = 270 }
			orbit_distance = 6
		}
	}

	change_orbit = 20

	planet = {
		count = { min = 0 max = 2 }
		orbit_distance = 20
		orbit_angle = { min = 90 max = 270 }
	}

	init_effect = {
		create_tiyanki_country = yes
		random_system_planet = {
			limit = { is_planet_class = pc_gas_giant }
			save_event_target_as = giant
			event_target:tiyanki_country = {
				save_event_target_as = tiyanki_country2
				reroll_random = yes
				random_list = {
					10 = { create_tiyanki_fleet_1 = yes }
					10 = { create_tiyanki_fleet_2 = yes }
					10 = { create_tiyanki_fleet_3 = yes }
					10 = { create_tiyanki_fleet_4 = yes }
					10 = { create_tiyanki_fleet_5 = yes }
				}
			}
		}
	}
}

# Tiyanki Spawn System
	# flags = { tiyanki_spawn_system }
	# create_tiyanki_home_roaming_fleets causes issues due to duplicate trigger names
# scluster_hostile_init_16 = {
	# class = "rl_standard_stars"
	# name = "NAME_Tiyana_Vek"

	# # usage = misc_system_init
	# # usage_odds = {
	# # 	base = 90000
	# # 	modifier = {
	# # 		factor = 0
	# # 		has_star_flag = empire_cluster
	# # 	}
	# # }
	# max_instances = 1

	# flags = { scluster tiyanki_spawn_system }

	# planet = {
	# 	count = 1
	# 	class = star
	# 	orbit_distance = 0
	# 	orbit_angle = 1
	# 	size = { min = 20 max = 30 }
	# 	has_ring = no

	# 	init_effect = {
	# 		prevent_anomaly = yes
	# 		clear_deposits = yes
	# 		add_deposit = d_physics_6
	# 		create_ambient_object = {
	# 			type = "space_storm_2"
	# 			location = this
	# 		}
	# 		last_created_ambient_object = {
	# 			set_location = {
	# 				target = prev
	# 				distance = 0
	# 				angle = random
	# 			}
	# 		}
	# 	}
	# }

	# planet = {
	# 	class = "pc_gas_giant"
	# 	name = "NAME_Zathika_Mev"
	# 	orbit_distance = 45
	# 	orbit_angle = 35
	# 	size = 30
	# 	has_ring = no
	# 	flags = { tiyanki_giant1 }

	# 	init_effect = {
	# 		prevent_anomaly = yes
	# 		clear_deposits = yes
	# 		save_event_target_as = giant1
	# 		add_deposit = d_society_6
	# 	}
	# }

	# planet = {
	# 	class = "pc_gas_giant"
	# 	name = "NAME_Surribzha"
	# 	orbit_distance = 0
	# 	orbit_angle = 85
	# 	size = 25
	# 	has_ring = yes
	# 	flags = { tiyanki_giant2 }

	# 	init_effect = {
	# 		prevent_anomaly = yes
	# 		clear_deposits = yes
	# 		save_event_target_as = giant2
	# 		add_deposit = d_society_6
	# 	}
	# }

	# planet = {
	# 	class = "pc_gas_giant"
	# 	name = "NAME_Yllarv"
	# 	orbit_distance = 0
	# 	orbit_angle = 95
	# 	size = 35
	# 	has_ring = no
	# 	flags = { tiyanki_giant3 }

	# 	init_effect = {
	# 		prevent_anomaly = yes
	# 		clear_deposits = yes
	# 		save_event_target_as = giant3
	# 		add_deposit = d_society_6
	# 	}
	# }

	# planet = {
	# 	class = "pc_gas_giant"
	# 	name = "NAME_Khetzhavu"
	# 	orbit_distance = 0
	# 	orbit_angle = 90
	# 	size = 31
	# 	has_ring = no
	# 	flags = { tiyanki_giant4 }

	# 	init_effect = {
	# 		prevent_anomaly = yes
	# 		clear_deposits = yes
	# 		save_event_target_as = giant4
	# 		add_deposit = d_society_6
	# 	}
	# }

	# planet = {
	# 	class = "pc_barren_cold"
	# 	name = "NAME_Dulna"
	# 	orbit_distance = 135
	# 	orbit_angle = 145
	# 	size = 22
	# 	has_ring = no

	# 	init_effect = {
	# 		prevent_anomaly = yes
	# 	}
	# }

	# planet = {
	# 	class = "pc_frozen"
	# 	name = "NAME_Valzhuva"
	# 	orbit_distance = 25
	# 	orbit_angle = 145
	# 	size = 14
	# 	has_ring = no

	# 	init_effect = {
	# 		prevent_anomaly = yes
	# 	}
	# }

	# init_effect = {
	# 	create_tiyanki_garrison_country = yes
	# 	save_global_event_target_as = tiyanki_spawn_system
	# 	create_tiyanki_home_fleet_1 = yes
	# 	create_tiyanki_home_fleet_2 = yes
	# 	create_tiyanki_home_fleet_3 = yes
	# 	create_tiyanki_home_fleet_4 = yes
	# 	create_tiyanki_home_roaming_fleets = yes
	# }
# }

# Tiyanki graveyard
	# flags = { tiyanki_graveyard_system }
	# create_tiyanki_graveyard_roaming_fleet_1 causes issues due to duplicate trigger names
# scluster_hostile_init_21 = {
	# name = "NAME_Tiyun_Ort"
	# class = "sc_m_giant"
	# asteroid_belt = {
	# 	type = icy_asteroid_belt
	# 	radius = 150
	# }

	# # usage = misc_system_init
	# # usage_odds = {
	# # 	base = 90000
	# # 	modifier = {
	# # 		factor = 0
	# # 		has_star_flag = empire_cluster
	# # 	}
	# # 	modifier = {
	# # 		factor = 2
	# # 		is_bottleneck_system = yes
	# # 	}
	# # }

	# max_instances = 1
	# flags = { tiyanki_graveyard_system }

	# planet = {
	# 	count = 1
	# 	class = star
	# 	orbit_distance = 0
	# 	orbit_angle = 1
	# 	size = { min = 20 max = 30 }
	# 	has_ring = no

	# 	init_effect = {
	# 		prevent_anomaly = yes
	# 		clear_deposits = yes
	# 		add_deposit = d_physics_6
	# 		save_event_target_as = graveyard_star
	# 		set_planet_flag = graveyard_star
	# 		create_ambient_object = {
	# 			type = "space_storm_2"
	# 			location = this
	# 		}
	# 		last_created_ambient_object = {
	# 			set_location = {
	# 				target = prev
	# 				distance = 0
	# 				angle = random
	# 			}
	# 		}
	# 		# Decorations
	# 		while = {
	# 			count = 10
	# 			create_ambient_object = {
	# 				type = "small_dead_tiyanki_object"
	# 				entity_offset_angle = { min = 0 max = 360 }
	# 				entity_offset = { min = -10 max = 10 }
	# 				entity_offset_height = { min = -5 max = 5 }
	# 			}
	# 			last_created_ambient_object = {
	# 				set_location = {
	# 					target = prev
	# 					distance = 40
	# 					angle = random
	# 				}
	# 			}
	# 		}
	# 	}
	# }

	# planet = {
	# 	class = pc_barren
	# 	name = "NAME_Orek_Vuul"
	# 	orbit_distance = 50
	# 	size = 1
	# 	has_ring = no

	# 	init_effect = {
	# 		prevent_anomaly = yes
	# 		clear_deposits = yes
	# 		save_event_target_as = graveyard_site
	# 		set_planet_flag = graveyard_site
	# 		create_archaeological_site = site_tiyanki_graveyard
	# 		# Graveyard
	# 		create_ambient_object = {
	# 			type = "NAME_Orek_Vuul"
	# 			location = this
	# 			use_3d_location = yes
	# 		}
	# 	}
	# }
	
	# planet = {
	# 	count = 1
	# 	class = pc_ice_asteroid
	# 	name = "NAME_Zhaduva"
	# 	orbit_distance = 100
	# 	orbit_angle = 100

	# 	init_effect = {
	# 		prevent_anomaly = yes
	# 		clear_deposits = yes
	# 		save_event_target_as = graveyard_asteroid
	# 		set_planet_flag = graveyard_asteroid
	# 		add_anomaly = {
	# 			category = TIYANKI_ASTEROID_CAT
	# 		}
	# 	}
	# }

	# planet = {
	# 	class = "pc_barren"
	# 	name = "NAME_Ghanek"
	# 	orbit_distance = 80
	# 	orbit_angle = 300
	# 	size = 25
	# 	has_ring = no

	# 	init_effect = {
	# 		prevent_anomaly = yes
	# 		clear_deposits = yes
	# 		save_event_target_as = graveyard_gas
	# 		set_planet_flag = graveyard_gas
	# 		add_deposit = d_volatile_motes_3
	# 	}
	# }

	# init_effect = {
	# 	create_ambient_object = {
	# 		type = "nebula_L3_entity"
	# 		entity_offset_height = -5
	# 		location = this
	# 	}
	# 	last_created_ambient_object = {
	# 		set_location = {
	# 			target = event_target:graveyard_star
	# 			distance = 0
	# 			angle = random
	# 		}
	# 	}
	# 	create_tiyanki_garrison_country = yes
	# 	save_global_event_target_as = tiyanki_graveyard_system
	# 	create_tiyanki_graveyard_gravekeeper_fleet = yes
	# 	create_tiyanki_graveyard_roaming_fleet_1 = yes
	# 	create_tiyanki_graveyard_roaming_fleet_2 = yes
	# }
# }

