
# Eta Area, Ancient traffic center.
ag_ancient_eta_init = {
	name = "NAME_eta_area"
	class = "sc_black_hole"
	prevent_anomalies = yes
	
	asteroid_belt = {
		type = ag_crystalized_asteroid_red_belt
		radius = 250
	}

	flags = { ag_ancient_system ag_ancient_eta_system guardian hostile_system }
	max_instances = 1
	
	planet = {
		count = 1
		name = "NAME_eta_area"
		class = pc_black_hole
		orbit_angle = 0
		orbit_distance = 0
		size = 21
		has_ring = no

		init_effect = {
			save_global_event_target_as = ag_ancient_eta_star
			create_ambient_object = { type = "ag_eta_damaged_gateway_control_station" }
			last_created_ambient_object = {
				set_location = { target = event_target:ag_ancient_eta_star distance = 16 angle = random }
				set_ambient_object_flag = ag_eta_damaged_gateway_control_station
				create_ambient_object = { type = "small_debris_object" location = this entity_offset_height = { min = -0 max = -3 } }
				last_created_ambient_object = {
					set_ambient_object_flag = ag_eta_gateway_control_station_debris
					set_location = { target = prev distance = 0 angle = random }
				}
				while = {
					count = 2
					create_ambient_object = { type = "small_debris_object" location = this entity_offset_height = { min = -0 max = -3 } }
					last_created_ambient_object = {
						set_ambient_object_flag = ag_eta_gateway_control_station_debris
						random_list = {
							10 = { set_location = { target = prev distance = 4 angle = random } }
							10 = { set_location = { target = prev distance = 8 angle = random } }
							10 = { set_location = { target = prev distance = 12 angle = random } }
						}
						reroll_random = yes
					}
				}
			}
		}
	}
	
	change_orbit = 45
	
	planet = {
		name = "NAME_eta_shielded_world"
		class = "pc_ringworld_tech"
		orbit_angle = 30
		orbit_distance = 0
		size = 5
		
		flags = { ag_ancient_eta_shielded_world ag_ring_habitable_section colony_event }
		
		init_effect = {
			ag_set_ancient_ringworld = {
				ag_color = red
				ag_type = habitable
				ag_surface_type = desert_01
				ag_shield_color = blue
			}
			save_global_event_target_as = ag_ancient_eta_shielded_world
		}
	}
	
	#################### Ringworld Structures #####################
	
	planet = {
		name = "NAME_ring_struct"
		class = "pc_ringworld_tech"
		orbit_angle = 30
		orbit_distance = 0
		flags = { ag_ring_struct_1 }
		
		init_effect = { 
			ag_set_ancient_ringworld = { ag_color = red ag_type = tech }
			save_global_event_target_as = ag_eta_ring_1
			set_planet_flag = ag_ancient_construction_section_0
		}
	}
	
	planet = {
		name = "NAME_ring_struct"
		class = "pc_ringworld_tech"
		orbit_angle = 30
		orbit_distance = 0
		flags = { ag_ring_struct_2 }

		init_effect = {
			ag_set_ancient_ringworld = { ag_color = red ag_type = seam }
			set_planet_flag = ag_ancient_resource_section_0
			save_global_event_target_as = ag_eta_ring_2
		}
	}
	
	planet = {
		name = "NAME_ring_struct"
		class = "pc_ringworld_tech"
		orbit_angle = 30
		orbit_distance = 0
		flags = { ag_ring_struct_3 }

		init_effect = {
			ag_set_ancient_ringworld = { ag_color = red ag_type = tech }
			save_global_event_target_as = ag_eta_ring_3
			set_planet_flag = ag_ancient_construction_section_0
		}
	}
	
	planet = {
		name = "NAME_ring_struct"
		class = "pc_ringworld_seam_damaged"
		orbit_angle = 30
		orbit_distance = 0
		flags = { ag_ring_struct_4 }

		init_effect = {
			ag_set_ancient_ringworld = { ag_color = damaged ag_type = seam }
			save_global_event_target_as = ag_eta_ring_4
		}
	}
	
	planet = {
		name = "NAME_ring_struct"
		class = "pc_ringworld_tech"
		orbit_angle = 30
		orbit_distance = 0
		flags = { ag_ring_struct_5 }

		init_effect = {
			ag_set_ancient_ringworld = { ag_color = red ag_type = tech }
			save_global_event_target_as = ag_eta_ring_5
			set_planet_flag = ag_ancient_construction_section_0
		}
	}
	
	planet = {
		name = "NAME_ring_struct"
		class = "pc_ringworld_tech"
		orbit_angle = 30
		orbit_distance = 0
		flags = { ag_ring_struct_6 }

		init_effect = {
			ag_set_ancient_ringworld = { ag_color = red ag_type = seam }
			set_planet_flag = ag_ancient_resource_section_0
			save_global_event_target_as = ag_eta_ring_6
		}
	}
	
	planet = {
		name = "NAME_ring_struct"
		class = "pc_ringworld_tech"
		orbit_angle = 30
		orbit_distance = 0
		flags = { ag_ring_struct_7 }

		init_effect = {
			ag_set_ancient_ringworld = { ag_color = red ag_type = tech }
			save_global_event_target_as = ag_eta_ring_7
			set_planet_flag = ag_ancient_construction_section_0
		}
	}
	
	planet = {
		name = "NAME_ring_struct"
		class = "pc_ringworld_tech"
		orbit_angle = 30
		orbit_distance = 0
		flags = { ag_ring_struct_8 }

		init_effect = {
			ag_set_ancient_ringworld = { ag_color = red ag_type = seam }
			set_planet_flag = ag_ancient_resource_section_0
			save_global_event_target_as = ag_eta_ring_8
		}
	}
	
	planet = {
		name = "NAME_ring_struct"
		class = "pc_ringworld_tech"
		orbit_angle = 30
		orbit_distance = 0
		flags = { ag_ring_struct_9 }

		init_effect = {
			ag_set_ancient_ringworld = { ag_color = red ag_type = tech }
			save_global_event_target_as = ag_eta_ring_9
			set_planet_flag = ag_ancient_construction_section_0
		}
	}
	
	planet = {
		name = "NAME_ring_struct"
		class = "pc_ringworld_seam_damaged"
		orbit_angle = 30
		orbit_distance = 0
		flags = { ag_ring_struct_4 }

		init_effect = {
			ag_set_ancient_ringworld = { ag_color = damaged ag_type = seam }
			save_global_event_target_as = ag_eta_ring_4
		}
	}
	
	planet = {
		name = "NAME_ring_struct"
		class = "pc_ringworld_tech"
		orbit_angle = 30
		orbit_distance = 0
		flags = { ag_ring_struct_11 }

		init_effect = {
			ag_set_ancient_ringworld = { ag_color = red ag_type = tech }
			save_global_event_target_as = ag_eta_ring_11
			set_planet_flag = ag_ancient_construction_section_0
		}
	}
	
	################################################
	
	change_orbit = 205
	
	planet = {
		class = pc_ice_asteroid
		orbit_distance = 0
		orbit_angle = random
		count = { max = 6 min = 3 }
		size = 4
		
		init_effect = {
			random_list = { 50 = { } 50 = { ag_crystalize_astroid = { ag_color = red } } }
		}
	}
	
	change_orbit = 250
	
	init_effect = {
		set_global_flag = ag_eta_area_spawned
		ag_mod_compatibility_effect = yes
		spawn_megastructure = {
			type = ag_ancient_eta_gateway_megastructure_damaged
			planet = star
			orbit_distance = 285
			orbit_angle = random
			init_effect = {
				create_ambient_object = { type = "large_debris_object" location = this entity_offset_height = { min = -0 max = -3 } }
				last_created_ambient_object = {
					set_ambient_object_flag = ag_eta_gateway_frame_debris
					set_location = { target = prev distance = 0 angle = random }
				}
				while = {
					count = 2
					create_ambient_object = { type = "small_debris_object" location = this entity_offset_height = { min = -0 max = -3 } }
					last_created_ambient_object = {
						set_ambient_object_flag = ag_eta_gateway_frame_debris
						random_list = {
							10 = { set_location = { target = prev distance = 10 angle = random } }
							10 = { set_location = { target = prev distance = 15 angle = random } }
							10 = { set_location = { target = prev distance = 25 angle = random } }
						}
						reroll_random = yes
					}
				}
			}
		}
		while = {
			count = 10
			create_ambient_object = {
				type = "large_debris_object"
				location = solar_system
			}
		}
		while = {
			count = 30
			random_list = {
				50 = {
					create_ambient_object = {
						type = "medium_debris_01_object"
						location = solar_system
					}
				}
				50 = {
					create_ambient_object = {
						type = "medium_debris_02_object"
						location = solar_system
					}
				}
			}
		}
		while = {
			count = 20
			create_ambient_object = {
				type = "small_debris_object"
				location = solar_system
			}
		}
		while = {
			count = 7
			create_ambient_object = {
				type = "derelict_ship_object"
				location = solar_system
			}
			last_created_ambient_object = {
				while = {
					count = 3
					create_ambient_object = {
						type = "medium_debris_01_object"
						location = this
					}
					last_created_ambient_object = {
						set_location = {
							target = prev
							distance = 80
							angle = random
						}
					}
				}
			}
		}
		while = {
			count = 6
			create_ambient_object = {
				type = "abandoned_ship_2_object"
				location = solar_system
			}
			last_created_ambient_object = {
				while = {
					count = 3
					create_ambient_object = {
						type = "medium_debris_01_object"
						location = this
					}
					last_created_ambient_object = {
						set_location = {
							target = prev
							distance = 80
							angle = random
						}
					}
				}
			}
		}
	}
}
