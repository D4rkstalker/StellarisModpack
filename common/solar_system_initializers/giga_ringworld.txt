### Great Ring System
giga_behemoth_ring_system = {
	name = "Great Ring"
	class = "sc_black_hole"
	usage = custom_empire
    flags = { empire_home_system }

	init_effect = {
		set_star_flag = sol_sector ### to stop New Frontiers from overriding 'planet' classes
		every_neighbor_system = {
			set_star_flag = empire_cluster
			every_neighbor_system = {
				set_star_flag = empire_cluster
			}
		}
	}

	planet = {
		class = pc_black_hole
		size = 20
		orbit_distance = 0

		flags = { ignore_startup_effect starting_deposit }
		init_effect = {
			set_name = "Eye of Darkness"
			add_deposit = d_dark_matter_deposit_2
			# spawn debris of the inner ring
			while = {
				count = 20
				create_ambient_object = {
					type = "large_debris_object"
					entity_offset_height = { min = -0 max = -25 }
					location = this
				}
				last_created_ambient_object = {
					set_location = {
						target = prev
						distance = 45
						angle = random
					}
				}
			}
			while = {
				count = 30
				create_ambient_object = {
					type = "medium_debris_01_object"
					entity_offset_height = { min = -0 max = -25 }
					location = this
				}
				last_created_ambient_object = {
					set_location = {
						target = prev
						distance = 45
						angle = random
					}
				}
			}
			while = {
				count = 30
				create_ambient_object = {
					type = "medium_debris_02_object"
					entity_offset_height = { min = -0 max = -25 }
					location = this
				}
				last_created_ambient_object = {
					set_location = {
						target = prev
						distance = 45
						angle = random
					}
				}
			}
		}
	}

	change_orbit = 45

	# 'asteroid' belt : energy 1
	planet = {
		class = pc_ice_asteroid
		size = 2
		orbit_distance = 0
		orbit_angle = 45

		flags = { ignore_startup_effect starting_deposit }
		init_effect = {
			set_name = "Bountiful Debris"
			clear_deposits = yes
			add_deposit = d_energy_3
			add_deposit = d_energy_3

			set_planet_flag = great_ring_mining_target
		}
	}
	# 'asteroid' belt : empty
	planet = {
		class = pc_ice_asteroid
		size = 2
		orbit_distance = 0
		orbit_angle = 30

		flags = { ignore_startup_effect starting_deposit }
		init_effect = {
			set_name = "Bountiful Debris"
			clear_deposits = yes
		}
	}
	# 'asteroid' belt : science
	planet = {
		class = pc_ice_asteroid
		size = 2
		orbit_distance = 0
		orbit_angle = 75

		flags = { ignore_startup_effect starting_deposit }
		init_effect = {
			set_name = "Bountiful Debris"
			clear_deposits = yes
			add_deposit = d_physics_3
			add_deposit = d_society_3
			add_deposit = d_engineering_3

			set_planet_flag = great_ring_research_target
		}
	}
	# 'asteroid' belt : minerals 1
	planet = {
		class = pc_ice_asteroid
		size = 2
		orbit_distance = 0
		orbit_angle = 60

		flags = { ignore_startup_effect starting_deposit }
		init_effect = {
			set_name = "Bountiful Debris"
			clear_deposits = yes
			add_deposit = d_minerals_3
			add_deposit = d_minerals_3
			add_deposit = d_minerals_3

			set_planet_flag = great_ring_mining_target
		}
	}
	# 'asteroid' belt : minerals 2
	planet = {
		class = pc_ice_asteroid
		size = 2
		orbit_distance = 0
		orbit_angle = 60

		flags = { ignore_startup_effect starting_deposit }
		init_effect = {
			set_name = "Bountiful Debris"
			clear_deposits = yes
			add_deposit = d_minerals_3
			add_deposit = d_minerals_3
			add_deposit = d_minerals_3

			set_planet_flag = great_ring_mining_target
		}
	}
	# 'asteroid' belt : energy 2
	planet = {
		class = pc_ice_asteroid
		size = 2
		orbit_distance = 0
		orbit_angle = 90

		flags = { ignore_startup_effect starting_deposit }
		init_effect = {
			set_name = "Bountiful Debris"
			clear_deposits = yes
			add_deposit = d_energy_3
			add_deposit = d_energy_3
			add_deposit = d_energy_3

			set_planet_flag = great_ring_mining_target
		}
	}

	change_orbit = -45
	change_orbit = 135

	### gigastructures / behemoth ringworld section - block 1
	planet = {
		class = "pc_ringworld_tech"
		orbit_angle = 0
		orbit_distance = 0
		has_ring = no

		flags = { ignore_startup_effect starting_deposit }
		init_effect = {
			set_name = "Ring Section"
			set_planet_entity = {
				entity = "behemoth_tech_sector_entity"
				graphical_culture = humanoid_01
			}
			set_planet_flag = megastructure			# Vanilla uses to check if a megastrucure can be built here
			set_planet_flag = has_megastructure		# Vanilla uses to check if an orbital station can be built here
			set_planet_flag = colony_event			# Vanilla uses to prevent unwanted events on planets
			set_planet_flag = giga_ringworld_tit
			set_planet_flag = giga_ringworld_beh
			set_planet_flag = giga_ringworld_gar
		}
	}
	planet = {
		class = pc_ringworld_habitable
		orbit_angle = 30
		orbit_distance = 0
		size = 15
		has_ring = yes

		home_planet = yes

		flags = { ignore_startup_effect megastructure }
		init_effect = {
			set_planet_entity = {
				entity = "behemoth_gaia_habitable_sector_entity"
				graphical_culture = humanoid_01
			}

			save_event_target_as = ring_section
			trigger_megastructure_icon = yes

			set_planet_flag = megastructure			# Vanilla uses to check if a megastrucure can be built here
			set_planet_flag = has_megastructure		# Vanilla uses to check if an orbital station can be built here
			set_planet_flag = colony_event			# Vanilla uses to prevent unwanted events on planets
			set_planet_flag = giga_ringworld_tit
			set_planet_flag = giga_ringworld_beh
			set_planet_flag = giga_ringworld_gar
			add_modifier = { modifier = "giga_behemoth_housing" days = -1 }
		}
	}
	planet = {
		class = "pc_ringworld_tech"
		orbit_angle = 30
		orbit_distance = 0
		has_ring = no

		flags = { ignore_startup_effect starting_deposit }
		init_effect = {
			set_name = "Ring Section"
			set_planet_entity = {
				entity = "behemoth_tech_sector_entity"
				graphical_culture = humanoid_01
			}
			set_planet_flag = megastructure			# Vanilla uses to check if a megastrucure can be built here
			set_planet_flag = has_megastructure		# Vanilla uses to check if an orbital station can be built here
			set_planet_flag = colony_event			# Vanilla uses to prevent unwanted events on planets
			set_planet_flag = giga_ringworld_tit
			set_planet_flag = giga_ringworld_beh
			set_planet_flag = giga_ringworld_gar
		}
	}

	### gigastructures / behemoth ringworld section - block 2
	planet = {
		class = "pc_ringworld_tech"
		orbit_angle = 30
		orbit_distance = 0
		has_ring = no

		flags = { ignore_startup_effect starting_deposit }
		init_effect = {
			set_name = "Ring Section"
			set_planet_entity = {
				entity = "behemoth_tech_sector_entity"
				graphical_culture = humanoid_01
			}
			set_planet_flag = megastructure			# Vanilla uses to check if a megastrucure can be built here
			set_planet_flag = has_megastructure		# Vanilla uses to check if an orbital station can be built here
			set_planet_flag = colony_event			# Vanilla uses to prevent unwanted events on planets
			set_planet_flag = giga_ringworld_tit
			set_planet_flag = giga_ringworld_beh
			set_planet_flag = giga_ringworld_gar
		}
	}
	planet = {
		class = pc_ringworld_habitable
		orbit_angle = 30
		orbit_distance = 0
		size = 15
		has_ring = yes

		flags = { ignore_startup_effect megastructure }
		init_effect = {
			set_name = "Habitable Section B"
			set_planet_entity = {
				entity = "behemoth_gaia_habitable_sector_entity"
				graphical_culture = humanoid_01
			}

			clear_blockers = yes
			prevent_anomaly = yes
			save_event_target_as = ring_section
			trigger_megastructure_icon = yes

			set_planet_flag = megastructure			# Vanilla uses to check if a megastrucure can be built here
			set_planet_flag = has_megastructure		# Vanilla uses to check if an orbital station can be built here
			set_planet_flag = colony_event			# Vanilla uses to prevent unwanted events on planets
			set_planet_flag = giga_ringworld_tit
			set_planet_flag = giga_ringworld_beh
			set_planet_flag = giga_ringworld_gar
			add_modifier = { modifier = "giga_behemoth_housing" days = -1 }
		}
	}
	planet = {
		class = "pc_ringworld_tech"
		orbit_angle = 30
		orbit_distance = 0
		has_ring = no

		flags = { ignore_startup_effect starting_deposit }
		init_effect = {
			set_name = "Ring Section"
			set_planet_entity = {
				entity = "behemoth_tech_sector_entity"
				graphical_culture = humanoid_01
			}
			set_planet_flag = megastructure			# Vanilla uses to check if a megastrucure can be built here
			set_planet_flag = has_megastructure		# Vanilla uses to check if an orbital station can be built here
			set_planet_flag = colony_event			# Vanilla uses to prevent unwanted events on planets
			set_planet_flag = giga_ringworld_tit
			set_planet_flag = giga_ringworld_beh
			set_planet_flag = giga_ringworld_gar
		}
	}

	### gigastructures / behemoth ringworld section - block 3
	planet = {
		class = "pc_ringworld_tech"
		orbit_angle = 30
		orbit_distance = 0
		has_ring = no

		flags = { ignore_startup_effect starting_deposit }
		init_effect = {
			set_name = "Ring Section"
			set_planet_entity = {
				entity = "behemoth_tech_sector_entity"
				graphical_culture = humanoid_01
			}
			set_planet_flag = megastructure			# Vanilla uses to check if a megastrucure can be built here
			set_planet_flag = has_megastructure		# Vanilla uses to check if an orbital station can be built here
			set_planet_flag = colony_event			# Vanilla uses to prevent unwanted events on planets
			set_planet_flag = giga_ringworld_tit
			set_planet_flag = giga_ringworld_beh
			set_planet_flag = giga_ringworld_gar
		}
	}
	planet = {
		class = pc_ringworld_habitable
		orbit_angle = 30
		orbit_distance = 0
		size = 15
		has_ring = yes

		flags = { ignore_startup_effect megastructure }
		init_effect = {
			set_name = "Habitable Section C"
			set_planet_entity = {
				entity = "behemoth_gaia_habitable_sector_entity"
				graphical_culture = humanoid_01
			}

			clear_blockers = yes
			prevent_anomaly = yes
			save_event_target_as = ring_section
			trigger_megastructure_icon = yes

			set_planet_flag = megastructure			# Vanilla uses to check if a megastrucure can be built here
			set_planet_flag = has_megastructure		# Vanilla uses to check if an orbital station can be built here
			set_planet_flag = colony_event			# Vanilla uses to prevent unwanted events on planets
			set_planet_flag = giga_ringworld_tit
			set_planet_flag = giga_ringworld_beh
			set_planet_flag = giga_ringworld_gar
			add_modifier = { modifier = "giga_behemoth_housing" days = -1 }
		}
	}
	planet = {
		class = "pc_ringworld_tech"
		orbit_angle = 30
		orbit_distance = 0
		has_ring = no

		flags = { ignore_startup_effect starting_deposit }
		init_effect = {
			set_name = "Ring Section"
			set_planet_entity = {
				entity = "behemoth_tech_sector_entity"
				graphical_culture = humanoid_01
			}
			set_planet_flag = megastructure			# Vanilla uses to check if a megastrucure can be built here
			set_planet_flag = has_megastructure		# Vanilla uses to check if an orbital station can be built here
			set_planet_flag = colony_event			# Vanilla uses to prevent unwanted events on planets
			set_planet_flag = giga_ringworld_tit
			set_planet_flag = giga_ringworld_beh
			set_planet_flag = giga_ringworld_gar
		}
	}

	### gigastructures / behemoth ringworld section - block 4
	planet = {
		class = "pc_ringworld_tech"
		orbit_angle = 30
		orbit_distance = 0
		has_ring = no

		flags = { ignore_startup_effect starting_deposit }
		init_effect = {
			set_name = "Ring Section"
			set_planet_entity = {
				entity = "behemoth_tech_sector_entity"
				graphical_culture = humanoid_01
			}
			set_planet_flag = megastructure			# Vanilla uses to check if a megastrucure can be built here
			set_planet_flag = has_megastructure		# Vanilla uses to check if an orbital station can be built here
			set_planet_flag = colony_event			# Vanilla uses to prevent unwanted events on planets
			set_planet_flag = giga_ringworld_tit
			set_planet_flag = giga_ringworld_beh
			set_planet_flag = giga_ringworld_gar
		}
	}
	planet = {
		class = pc_ringworld_habitable
		orbit_angle = 30
		orbit_distance = 0
		size = 15
		has_ring = yes

		flags = { ignore_startup_effect megastructure }
		init_effect = {
			set_name = "Habitable Section D"
			set_planet_entity = {
				entity = "behemoth_gaia_habitable_sector_entity"
				graphical_culture = humanoid_01
			}

			clear_blockers = yes
			prevent_anomaly = yes
			save_event_target_as = ring_section
			trigger_megastructure_icon = yes

			set_planet_flag = megastructure			# Vanilla uses to check if a megastrucure can be built here
			set_planet_flag = has_megastructure		# Vanilla uses to check if an orbital station can be built here
			set_planet_flag = colony_event			# Vanilla uses to prevent unwanted events on planets
			set_planet_flag = giga_ringworld_tit
			set_planet_flag = giga_ringworld_beh
			set_planet_flag = giga_ringworld_gar
			add_modifier = { modifier = "giga_behemoth_housing" days = -1 }
		}
	}
	planet = {
		class = "pc_ringworld_tech"
		orbit_angle = 30
		orbit_distance = 0
		has_ring = no

		flags = { ignore_startup_effect starting_deposit }
		init_effect = {
			set_name = "Ring Section"
			set_planet_entity = {
				entity = "behemoth_tech_sector_entity"
				graphical_culture = humanoid_01
			}
			set_planet_flag = megastructure			# Vanilla uses to check if a megastrucure can be built here
			set_planet_flag = has_megastructure		# Vanilla uses to check if an orbital station can be built here
			set_planet_flag = colony_event			# Vanilla uses to prevent unwanted events on planets
			set_planet_flag = giga_ringworld_tit
			set_planet_flag = giga_ringworld_beh
			set_planet_flag = giga_ringworld_gar
		}
	}

	### neighbouring systems : guarantee an A-class star
	neighbor_system = {
		hyperlane_jumps = { min = 1 max = 3 }
		initializer = "giga_sc_a"
	}
}
