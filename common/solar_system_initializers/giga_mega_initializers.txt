
@base_moon_distance = 10

# Singular Brown Dwarf
browndwarf_init = {
	class = "sc_f"
	usage = misc_system_init
	usage_odds = 1.5
	flags = { brown_dwarf_system }

	planet = {
		class = star
		orbit_distance = 0
		orbit_angle = 1
		size = { min = 20 max = 30 }
		has_ring = no
	}

	change_orbit = 45

	planet = {
		count = { min = 2 max = 10 }
		orbit_distance = 20
		orbit_angle = { min = 90 max = 270 }
		change_orbit = @base_moon_distance

		moon = {
			count = { min = 0 max = 1 }
			orbit_angle = { min = 90 max = 270 }
			orbit_distance = 5
		}
	}

	planet = {
		size = { min = 35 max = 40 }
		class = pc_gigabrown_dwarf
		orbit_distance = 50
		orbit_angle = { min = 90 max = 270 }
		change_orbit = @base_moon_distance
		init_effect = { add_modifier = { modifier = "giga_brown_dwarf" days = -1 } }

		moon = {
			class = pc_barren
			size = { min = 15 max = 22 }
			orbit_angle = { min = 90 max = 270 }
			orbit_distance = 10
		}

		moon = {
			class = rl_browndwarf_moon
			size = { min = 15 max = 22 }
			count = { min = 4 max = 6 }
			orbit_angle = { min = 90 max = 270 }
			orbit_distance = { min = 5 max = 7 }
		}
	}
}

# Trinary Brown Dwarves
triplebrowndwarf_init = {
	class = "sc_f"
	usage = misc_system_init
	usage_odds = 100
	scaled_spawn_chance = 3
	max_instances = 1
	flags = { brown_dwarf_system_three }

	planet = {
		class = star
		orbit_distance = 0
		orbit_angle = 1
		size = { min = 20 max = 30 }
		has_ring = no
	}

	planet = {
		size = { min = 35 max = 40 }
		class = pc_gigabrown_dwarf
		orbit_distance = 125
		orbit_angle = { min = 100 max = 140 }
		init_effect = { add_modifier = { modifier = "giga_brown_dwarf" days = -1 } }
		change_orbit = @base_moon_distance

		moon = {
			class = pc_barren
			size = { min = 15 max = 22 }
			orbit_angle = { min = 90 max = 270 }
			orbit_distance = 10
		}

		moon = {
			class = rl_browndwarf_moon
			size = { min = 15 max = 22 }
			count = { min = 4 max = 6 }
			orbit_angle = { min = 90 max = 270 }
			orbit_distance = { min = 5 max = 7 }
		}
	}

	planet = {
		size = { min = 35 max = 40 }
		class = pc_gigabrown_dwarf
		orbit_distance = 50
		orbit_angle = { min = 100 max = 140 }
		change_orbit = @base_moon_distance
		init_effect = { add_modifier = { modifier = "giga_brown_dwarf" days = -1 } }

		moon = {
			class = pc_barren
			size = { min = 15 max = 22 }
			orbit_angle = { min = 90 max = 270 }
			orbit_distance = 10
		}

		moon = {
			class = rl_browndwarf_moon
			size = { min = 15 max = 22 }
			count = { min = 4 max = 6 }
			orbit_angle = { min = 90 max = 270 }
			orbit_distance = { min = 5 max = 7 }
		}
	}

	planet = {
		size = { min = 35 max = 40 }
		class = pc_gigabrown_dwarf
		orbit_distance = 50
		orbit_angle = { min = 100 max = 140 }
		change_orbit = @base_moon_distance
		init_effect = { add_modifier = { modifier = "giga_brown_dwarf" days = -1 } }

		moon = {
			class = pc_barren
			size = { min = 15 max = 22 }
			orbit_angle = { min = 90 max = 270 }
			orbit_distance = 10
		}

		moon = {
			class = rl_browndwarf_moon
			size = { min = 15 max = 22 }
			count = { min = 4 max = 6 }
			orbit_angle = { min = 90 max = 270 }
			orbit_distance = { min = 5 max = 7 }
		}
	}
}

# Interstellar Habitat
spacehabitat_init = {
	class = "sc_habitat"
	name = "Interstellar Habitat"
	flags = { habitat_system }

	planet = {
		class = star
		orbit_distance = 0
	}

	planet = {
		class = "pc_interstellar_habitat"
		orbit_distance = 0
		orbit_angle = 1
		size = 15
		has_ring = no

		init_effect = {
			set_planet_flag = giga_interstellar_hab
			set_planet_flag = megastructure			# Vanilla uses to check if a megastrucure can be built here
			set_planet_flag = has_megastructure		# Vanilla uses to check if an orbital station can be built here
			set_planet_flag = colony_event			# Vanilla uses to prevent unwanted events on planets
			add_modifier = { modifier = "interstellar_habitat" days = -1 }
			giga_create_planet_deposits = yes
		}
	}

	init_effect = { spawn_megastructure = { type = "interstellar_habitat_2" } }
}

#FLAT
flat_primitive_init = {
	class = "rl_standard_stars"
	usage = misc_system_init
	usage_odds = 4.5
	primitive_system = yes
	flags = { primitive_system giga_flat_system }
	max_instances = 1

	planet = {
		class = star
		orbit_distance = 0
		orbit_angle = 1
		size = { min = 20 max = 30 }
		has_ring = no
	}

	change_orbit = 20

	planet = {
		orbit_distance = 20
		count = { min = 0 max = 3 }
	}

	change_orbit = 20

	planet = {
		orbit_distance = 0
		class = "pc_flat_world"
		orbit_angle = { min = 90 max = 270 }
		size = 25
		init_effect = {
			prevent_anomaly = yes
			generate_primitives_on_planet = yes
			clear_blockers = yes
			add_deposit = d_searing_desert
			add_deposit = d_bountiful_plains
			add_deposit = d_veiny_cliffs
			add_deposit = d_mineral_fields
			add_deposit = d_prosperous_mesa
			add_deposit = d_ore_rich_caverns
			add_deposit = d_rugged_woods
			add_deposit = d_tempestous_mountain
		}
		change_orbit = @base_moon_distance
	}

	planet = {
		orbit_distance = 20
		count = { min = 1 max = 4 }

		change_orbit = @base_moon_distance

		moon = {
			count = { min = 0 max = 1 }
			orbit_angle = { min = 90 max = 270 }
			orbit_distance = 5
		}
	}

	planet = {
		orbit_distance = 20
		count = { min = 0 max = 2 }
	}
}