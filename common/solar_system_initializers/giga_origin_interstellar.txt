### Interstellar Ringworld System
giga_interstellar_system = {
	class = "sc_habitat"
	name = "Interstellar Dwelling"
	usage = origin
    flags = { empire_home_system habitat_system }

	init_effect = {
		set_star_flag = sol_sector ### to stop New Frontiers from overriding 'planet' classes
		every_neighbor_system = {
			set_star_flag = empire_cluster
			every_neighbor_system = {
				set_star_flag = empire_cluster
			}
		}

		spawn_megastructure = { type = interstellar_habitat_completed_core }
	}

	### dummy star / hidden by the megastructure hub
	planet = {
		class = star
		orbit_angle = 0
		orbit_distance = 0
		flags = { ignore_startup_effect starting_deposit has_megastructure megastructure }
	}

	change_orbit = 45

	### gigastructures / interstellar ringworld section - block 1
	planet = {
		class = pc_interstellar_ringworld_habitable
		orbit_angle = 0
		orbit_distance = 0
		size = 15
		has_ring = yes

		home_planet = yes

		flags = { ignore_startup_effect megastructure }
		init_effect = {
			set_name = "Interstellar Ringworld Section A"
			set_planet_entity = {
				entity = "interstellar_ringworld_01_entity"
				graphical_culture = owner
			}

			save_event_target_as = interstellar_section
			trigger_megastructure_icon = yes

			set_planet_flag = forbid_guillis_planet_modifiers
			set_planet_flag = hot_zone				# Real Space (Prevents Rings)
			set_planet_flag = megastructure			# Vanilla uses to check if a megastrucure can be built here
			set_planet_flag = has_megastructure		# Vanilla uses to check if an orbital station can be built here
			set_planet_flag = colony_event			# Vanilla uses to prevent unwanted events on planets
			set_planet_flag = giga_interstellar_ring
		}
	}
	### gigastructures / interstellar ringworld section - block 2
	planet = {
		class = pc_interstellar_ringworld_habitable
		orbit_angle = 90
		orbit_distance = 0
		size = 15
		has_ring = yes

		flags = { ignore_startup_effect megastructure }
		init_effect = {
			set_name = "Interstellar Ringworld Section B"
			set_planet_entity = {
				entity = "interstellar_ringworld_01_entity"
				graphical_culture = owner
			}

			clear_blockers = yes
			prevent_anomaly = yes
			save_event_target_as = interstellar_section
			trigger_megastructure_icon = yes

			set_planet_flag = forbid_guillis_planet_modifiers
			set_planet_flag = hot_zone				# Real Space (Prevents Rings)
			set_planet_flag = megastructure			# Vanilla uses to check if a megastrucure can be built here
			set_planet_flag = has_megastructure		# Vanilla uses to check if an orbital station can be built here
			set_planet_flag = colony_event			# Vanilla uses to prevent unwanted events on planets
			set_planet_flag = giga_interstellar_ring
		}
	}
	### gigastructures / interstellar ringworld section - block 3
	planet = {
		class = pc_interstellar_ringworld_habitable
		orbit_angle = 90
		orbit_distance = 0
		size = 15
		has_ring = yes

		flags = { ignore_startup_effect megastructure }
		init_effect = {
			set_name = "Interstellar Ringworld Section C"
			set_planet_entity = {
				entity = "interstellar_ringworld_01_entity"
				graphical_culture = owner
			}

			clear_blockers = yes
			prevent_anomaly = yes
			save_event_target_as = interstellar_section
			trigger_megastructure_icon = yes

			set_planet_flag = forbid_guillis_planet_modifiers
			set_planet_flag = hot_zone				# Real Space (Prevents Rings)
			set_planet_flag = megastructure			# Vanilla uses to check if a megastrucure can be built here
			set_planet_flag = has_megastructure		# Vanilla uses to check if an orbital station can be built here
			set_planet_flag = colony_event			# Vanilla uses to prevent unwanted events on planets
			set_planet_flag = giga_interstellar_ring
		}
	}
	### gigastructures / interstellar ringworld section - block 4
	planet = {
		class = pc_interstellar_ringworld_habitable
		orbit_angle = 90
		orbit_distance = 0
		size = 15
		has_ring = yes

		flags = { ignore_startup_effect megastructure }
		init_effect = {
			set_name = "Interstellar Ringworld Section D"
			set_planet_entity = {
				entity = "interstellar_ringworld_01_entity"
				graphical_culture = owner
			}

			clear_blockers = yes
			prevent_anomaly = yes
			save_event_target_as = interstellar_section
			trigger_megastructure_icon = yes

			set_planet_flag = forbid_guillis_planet_modifiers
			set_planet_flag = hot_zone				# Real Space (Prevents Rings)
			set_planet_flag = megastructure			# Vanilla uses to check if a megastrucure can be built here
			set_planet_flag = has_megastructure		# Vanilla uses to check if an orbital station can be built here
			set_planet_flag = colony_event			# Vanilla uses to prevent unwanted events on planets
			set_planet_flag = giga_interstellar_ring
		}
	}

	### neighbouring systems : guarantee an A-class star
	neighbor_system = {
		hyperlane_jumps = { min = 1 max = 3 }
		initializer = "giga_sc_a"
	}
}