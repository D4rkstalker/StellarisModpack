@base_moon_distance = 10
#### README: On changing and saving file, game must be restarted from desktop to prevent crash.

#####################################################################

######### HOMEWORLD SYSTEM

#####################################################################

sofe_original_homeworld_init = {
    name = "NAME_The_Heart"
    class = "sofe_outer_class"
    flags = { hostile_system outercluster outerclusterhome original_homeworld_system sealed_system }

    usage = misc_system_init
    usage_odds = 0

    planet = {
        name = "NAME_The_Heart"
        class = "pc_invisible_star"
        orbit_distance = 0
		flags = { star_heart outerclusterhome }
		init_effect = {
			remove_deposit = yes
		}
    }

	change_orbit = 45
	
	planet = {
		name = "NAME_Planet_CapitalA"
		class = "pc_omega_ringworld_habitable"
		orbit_angle = 30
		orbit_distance = 0
		deposit_blockers = none
		modifiers = none
		flags = { CapitalA original_empire_world }

		init_effect = {
			set_planet_size = 500
			prevent_anomaly = yes
			trigger_megastructure_icon = yes
			set_planet_flag = megastructure
			set_owner = event_target:sofe_champion_country
			set_controller = event_target:sofe_champion_country

			add_building = building_heaven_sanctuary
			add_building = building_grand_fortress
			add_building = building_omega_fortress
			add_building = building_eden_garden
			add_building = building_eden_garden
			add_building = building_crystal_arch
			add_building = building_crystal_arch
			add_building = building_chamber_of_hope
			add_building = building_chamber_of_hope
			add_building = building_library_of_fate
			add_building = building_library_of_fate
			add_building = building_power_pyramid
			add_building = building_power_pyramid
			add_building = building_super_shelter
			add_building = building_super_shelter
			add_building = building_light_foundry
			while = {
				count = 50
				add_district = district_sofe_omega_city
			}
			while = {
				count = 25
				add_district = district_sofe_omega_logistics
			}
			while = {
				count = 25
				add_district = district_sofe_omega_progression
			}
			while = {
				count = 20
				create_pop = {
					species = owner_main_species
				}
			}		
			create_army = {
				owner = root.owner
				species = owner_main_species
				type = "origin_guardian"
			}
			create_army = {
				owner = root.owner
				species = owner_main_species
				type = "origin_guardian"
			}
			create_army = {
				owner = root.owner
				species = owner_main_species
				type = "origin_guardian"
			}
		}
	}				
	planet = {
		class = "pc_omega_ringworld_habitable"
		name = "NAME_Planet_CapitalB"
		orbit_angle = 30
		orbit_distance = 0
		deposit_blockers = none
		modifiers = none
		flags = { CapitalB original_empire_world }

		init_effect = {
			set_planet_size = 500
			prevent_anomaly = yes
			trigger_megastructure_icon = yes
			set_planet_flag = megastructure
			set_owner = event_target:sofe_champion_country
			set_controller = event_target:sofe_champion_country

			add_building = building_heaven_sanctuary
			add_building = building_grand_fortress
			add_building = building_omega_fortress
			add_building = building_eden_garden
			add_building = building_eden_garden
			add_building = building_crystal_arch
			add_building = building_crystal_arch
			add_building = building_chamber_of_hope
			add_building = building_chamber_of_hope
			add_building = building_library_of_fate
			add_building = building_library_of_fate
			add_building = building_power_pyramid
			add_building = building_power_pyramid
			add_building = building_super_shelter
			add_building = building_super_shelter
			add_building = building_light_foundry
			while = {
				count = 50
				add_district = district_sofe_omega_city
			}
			while = {
				count = 25
				add_district = district_sofe_omega_logistics
			}
			while = {
				count = 25
				add_district = district_sofe_omega_progression
			}
			while = {
				count = 20
				create_pop = {
					species = owner_main_species
				}
			}		
			create_army = {
				owner = root.owner
				species = owner_main_species
				type = "origin_guardian"
			}
			create_army = {
				owner = root.owner
				species = owner_main_species
				type = "origin_guardian"
			}
			create_army = {
				owner = root.owner
				species = owner_main_species
				type = "origin_guardian"
			}
		}	
	}
	planet = {
		class = "pc_omega_ringworld_seam"
		name = "Wymorlus Obelisk"
		orbit_angle = 30
		orbit_distance = 0
		flags = { 
			original_empire_world 
		}
		init_effect = {
			set_planet_size = 500
			prevent_anomaly = yes
			trigger_megastructure_icon = yes
			set_planet_flag = megastructure
			set_owner = event_target:sofe_champion_country
			set_controller = event_target:sofe_champion_country

			add_building = building_heaven_sanctuary
			add_building = building_grand_fortress
			add_building = building_omega_fortress
			add_building = building_eden_garden
			add_building = building_eden_garden
			add_building = building_crystal_arch
			add_building = building_crystal_arch
			add_building = building_chamber_of_hope
			add_building = building_chamber_of_hope
			add_building = building_library_of_fate
			add_building = building_library_of_fate
			add_building = building_power_pyramid
			add_building = building_power_pyramid
			add_building = building_super_shelter
			add_building = building_super_shelter
			add_building = building_light_foundry
			while = {
				count = 50
				add_district = district_sofe_omega_city
			}
			while = {
				count = 25
				add_district = district_sofe_omega_logistics
			}
			while = {
				count = 25
				add_district = district_sofe_omega_progression
			}
			while = {
				count = 20
				create_pop = {
					species = owner_main_species
				}
			}		
			create_army = {
				owner = root.owner
				species = owner_main_species
				type = "origin_guardian"
			}
			create_army = {
				owner = root.owner
				species = owner_main_species
				type = "origin_guardian"
			}
			create_army = {
				owner = root.owner
				species = owner_main_species
				type = "origin_guardian"
			}
		}	
	}
	planet = {
		class = "pc_omega_ringworld_habitable"
		name = "NAME_Planet_CapitalC"
		orbit_angle = 30
		orbit_distance = 0
		deposit_blockers = none
		modifiers = none
		flags = { CapitalC original_empire_world }

		init_effect = {
			set_planet_size = 500
			prevent_anomaly = yes
			trigger_megastructure_icon = yes
			set_planet_flag = megastructure
			set_owner = event_target:sofe_champion_country
			set_controller = event_target:sofe_champion_country

			add_building = building_heaven_sanctuary
			add_building = building_grand_fortress
			add_building = building_omega_fortress
			add_building = building_eden_garden
			add_building = building_eden_garden
			add_building = building_crystal_arch
			add_building = building_crystal_arch
			add_building = building_chamber_of_hope
			add_building = building_chamber_of_hope
			add_building = building_library_of_fate
			add_building = building_library_of_fate
			add_building = building_power_pyramid
			add_building = building_power_pyramid
			add_building = building_super_shelter
			add_building = building_super_shelter
			add_building = building_light_foundry
			while = {
				count = 50
				add_district = district_sofe_omega_city
			}
			while = {
				count = 25
				add_district = district_sofe_omega_logistics
			}
			while = {
				count = 25
				add_district = district_sofe_omega_progression
			}
			while = {
				count = 20
				create_pop = {
					species = owner_main_species
				}
			}		
			create_army = {
				owner = root.owner
				species = owner_main_species
				type = "origin_guardian"
			}
			create_army = {
				owner = root.owner
				species = owner_main_species
				type = "origin_guardian"
			}
			create_army = {
				owner = root.owner
				species = owner_main_species
				type = "origin_guardian"
			}
		}
	}			
	planet = {
		class = "pc_omega_ringworld_habitable"
		name = "NAME_Planet_CapitalD"
		orbit_angle = 30
		orbit_distance = 0
		deposit_blockers = none
		modifiers = none
		flags = { CapitalD original_empire_world }

		init_effect = {
			set_planet_size = 500
			prevent_anomaly = yes
			trigger_megastructure_icon = yes
			set_planet_flag = megastructure
			set_owner = event_target:sofe_champion_country
			set_controller = event_target:sofe_champion_country

			add_building = building_heaven_sanctuary
			add_building = building_grand_fortress
			add_building = building_omega_fortress
			add_building = building_eden_garden
			add_building = building_eden_garden
			add_building = building_crystal_arch
			add_building = building_crystal_arch
			add_building = building_chamber_of_hope
			add_building = building_chamber_of_hope
			add_building = building_library_of_fate
			add_building = building_library_of_fate
			add_building = building_power_pyramid
			add_building = building_power_pyramid
			add_building = building_super_shelter
			add_building = building_super_shelter
			add_building = building_light_foundry
			while = {
				count = 50
				add_district = district_sofe_omega_city
			}
			while = {
				count = 25
				add_district = district_sofe_omega_logistics
			}
			while = {
				count = 25
				add_district = district_sofe_omega_progression
			}
			while = {
				count = 20
				create_pop = {
					species = owner_main_species
				}
			}		
			create_army = {
				owner = root.owner
				species = owner_main_species
				type = "origin_guardian"
			}
			create_army = {
				owner = root.owner
				species = owner_main_species
				type = "origin_guardian"
			}
			create_army = {
				owner = root.owner
				species = owner_main_species
				type = "origin_guardian"
			}
		}	
	}
	planet = {
		class = "pc_omega_ringworld_seam"
		name = "Du'wang Obelisk"
		orbit_angle = 30
		orbit_distance = 0
		flags = { 
			original_empire_world 
		}
		init_effect = {
			set_planet_size = 500
			prevent_anomaly = yes
			trigger_megastructure_icon = yes
			set_planet_flag = megastructure
			set_owner = event_target:sofe_champion_country
			set_controller = event_target:sofe_champion_country

			add_building = building_heaven_sanctuary
			add_building = building_grand_fortress
			add_building = building_omega_fortress
			add_building = building_eden_garden
			add_building = building_eden_garden
			add_building = building_crystal_arch
			add_building = building_crystal_arch
			add_building = building_chamber_of_hope
			add_building = building_chamber_of_hope
			add_building = building_library_of_fate
			add_building = building_library_of_fate
			add_building = building_power_pyramid
			add_building = building_power_pyramid
			add_building = building_super_shelter
			add_building = building_super_shelter
			add_building = building_light_foundry
			while = {
				count = 50
				add_district = district_sofe_omega_city
			}
			while = {
				count = 25
				add_district = district_sofe_omega_logistics
			}
			while = {
				count = 25
				add_district = district_sofe_omega_progression
			}
			while = {
				count = 20
				create_pop = {
					species = owner_main_species
				}
			}		
			create_army = {
				owner = root.owner
				species = owner_main_species
				type = "origin_guardian"
			}
			create_army = {
				owner = root.owner
				species = owner_main_species
				type = "origin_guardian"
			}
			create_army = {
				owner = root.owner
				species = owner_main_species
				type = "origin_guardian"
			}
		}	
	}
	planet = {
		class = "pc_omega_ringworld_habitable"
		name = "NAME_Planet_CapitalE"
		orbit_angle = 30
		orbit_distance = 0
		deposit_blockers = none
		modifiers = none
		flags = { CapitalE original_empire_world }

		init_effect = {
			set_planet_size = 500
			prevent_anomaly = yes
			trigger_megastructure_icon = yes
			set_planet_flag = megastructure
			set_owner = event_target:sofe_champion_country
			set_controller = event_target:sofe_champion_country

			add_building = building_heaven_sanctuary
			add_building = building_grand_fortress
			add_building = building_omega_fortress
			add_building = building_eden_garden
			add_building = building_eden_garden
			add_building = building_crystal_arch
			add_building = building_crystal_arch
			add_building = building_chamber_of_hope
			add_building = building_chamber_of_hope
			add_building = building_library_of_fate
			add_building = building_library_of_fate
			add_building = building_power_pyramid
			add_building = building_power_pyramid
			add_building = building_super_shelter
			add_building = building_super_shelter
			add_building = building_light_foundry
			while = {
				count = 50
				add_district = district_sofe_omega_city
			}
			while = {
				count = 25
				add_district = district_sofe_omega_logistics
			}
			while = {
				count = 25
				add_district = district_sofe_omega_progression
			}
			while = {
				count = 20
				create_pop = {
					species = owner_main_species
				}
			}		
			create_army = {
				owner = root.owner
				species = owner_main_species
				type = "origin_guardian"
			}
			create_army = {
				owner = root.owner
				species = owner_main_species
				type = "origin_guardian"
			}
			create_army = {
				owner = root.owner
				species = owner_main_species
				type = "origin_guardian"
			}
		}		
	}		
	planet = {
		class = "pc_omega_ringworld_habitable"
		name = "NAME_Planet_CapitalF"
		orbit_angle = 30
		orbit_distance = 0
		deposit_blockers = none
		modifiers = none
		flags = { CapitalF original_empire_world }

		init_effect = {
			set_planet_size = 500
			prevent_anomaly = yes
			trigger_megastructure_icon = yes
			set_planet_flag = megastructure
			set_owner = event_target:sofe_champion_country
			set_controller = event_target:sofe_champion_country

			add_building = building_heaven_sanctuary
			add_building = building_grand_fortress
			add_building = building_omega_fortress
			add_building = building_eden_garden
			add_building = building_eden_garden
			add_building = building_crystal_arch
			add_building = building_crystal_arch
			add_building = building_chamber_of_hope
			add_building = building_chamber_of_hope
			add_building = building_library_of_fate
			add_building = building_library_of_fate
			add_building = building_power_pyramid
			add_building = building_power_pyramid
			add_building = building_super_shelter
			add_building = building_super_shelter
			add_building = building_light_foundry
			while = {
				count = 50
				add_district = district_sofe_omega_city
			}
			while = {
				count = 25
				add_district = district_sofe_omega_logistics
			}
			while = {
				count = 25
				add_district = district_sofe_omega_progression
			}
			while = {
				count = 20
				create_pop = {
					species = owner_main_species
				}
			}		
			create_army = {
				owner = root.owner
				species = owner_main_species
				type = "origin_guardian"
			}
			create_army = {
				owner = root.owner
				species = owner_main_species
				type = "origin_guardian"
			}
			create_army = {
				owner = root.owner
				species = owner_main_species
				type = "origin_guardian"
			}
		}
	}
	planet = {
		class = "pc_omega_ringworld_seam"
		name = "Ra'dom Obelisk"
		orbit_angle = 30
		orbit_distance = 0
		flags = { 
			original_empire_world 
		}
		init_effect = {
			set_planet_size = 500
			prevent_anomaly = yes
			trigger_megastructure_icon = yes
			set_planet_flag = megastructure
			set_owner = event_target:sofe_champion_country
			set_controller = event_target:sofe_champion_country

			add_building = building_heaven_sanctuary
			add_building = building_grand_fortress
			add_building = building_omega_fortress
			add_building = building_eden_garden
			add_building = building_eden_garden
			add_building = building_crystal_arch
			add_building = building_crystal_arch
			add_building = building_chamber_of_hope
			add_building = building_chamber_of_hope
			add_building = building_library_of_fate
			add_building = building_library_of_fate
			add_building = building_power_pyramid
			add_building = building_power_pyramid
			add_building = building_super_shelter
			add_building = building_super_shelter
			add_building = building_light_foundry
			while = {
				count = 50
				add_district = district_sofe_omega_city
			}
			while = {
				count = 25
				add_district = district_sofe_omega_logistics
			}
			while = {
				count = 25
				add_district = district_sofe_omega_progression
			}
			while = {
				count = 20
				create_pop = {
					species = owner_main_species
				}
			}		
			create_army = {
				owner = root.owner
				species = owner_main_species
				type = "origin_guardian"
			}
			create_army = {
				owner = root.owner
				species = owner_main_species
				type = "origin_guardian"
			}
			create_army = {
				owner = root.owner
				species = owner_main_species
				type = "origin_guardian"
			}
		}	
	}
	planet = {
		class = "pc_omega_ringworld_habitable"
		name = "NAME_Planet_CapitalG"
		orbit_angle = 30
		orbit_distance = 0
		deposit_blockers = none
		modifiers = none
		flags = { CapitalG original_empire_world }

		init_effect = {
			set_planet_size = 500
			prevent_anomaly = yes
			trigger_megastructure_icon = yes
			set_planet_flag = megastructure
			set_owner = event_target:sofe_champion_country
			set_controller = event_target:sofe_champion_country

			add_building = building_heaven_sanctuary
			add_building = building_grand_fortress
			add_building = building_omega_fortress
			add_building = building_eden_garden
			add_building = building_eden_garden
			add_building = building_crystal_arch
			add_building = building_crystal_arch
			add_building = building_chamber_of_hope
			add_building = building_chamber_of_hope
			add_building = building_library_of_fate
			add_building = building_library_of_fate
			add_building = building_power_pyramid
			add_building = building_power_pyramid
			add_building = building_super_shelter
			add_building = building_super_shelter
			add_building = building_light_foundry
			while = {
				count = 50
				add_district = district_sofe_omega_city
			}
			while = {
				count = 25
				add_district = district_sofe_omega_logistics
			}
			while = {
				count = 25
				add_district = district_sofe_omega_progression
			}
			while = {
				count = 20
				create_pop = {
					species = owner_main_species
				}
			}		
			create_army = {
				owner = root.owner
				species = owner_main_species
				type = "origin_guardian"
			}
			create_army = {
				owner = root.owner
				species = owner_main_species
				type = "origin_guardian"
			}
			create_army = {
				owner = root.owner
				species = owner_main_species
				type = "origin_guardian"
			}
		}
	}					
	planet = {
		class = "pc_omega_ringworld_habitable"
		name = "NAME_Planet_CapitalH"
		orbit_angle = 30
		orbit_distance = 0
		deposit_blockers = none
		modifiers = none
		flags = { CapitalH original_empire_world }

		init_effect = {
			set_planet_size = 500
			prevent_anomaly = yes
			trigger_megastructure_icon = yes
			set_planet_flag = megastructure
			set_owner = event_target:sofe_champion_country
			set_controller = event_target:sofe_champion_country

			add_building = building_heaven_sanctuary
			add_building = building_grand_fortress
			add_building = building_omega_fortress
			add_building = building_eden_garden
			add_building = building_eden_garden
			add_building = building_crystal_arch
			add_building = building_crystal_arch
			add_building = building_chamber_of_hope
			add_building = building_chamber_of_hope
			add_building = building_library_of_fate
			add_building = building_library_of_fate
			add_building = building_power_pyramid
			add_building = building_power_pyramid
			add_building = building_super_shelter
			add_building = building_super_shelter
			add_building = building_light_foundry
			while = {
				count = 50
				add_district = district_sofe_omega_city
			}
			while = {
				count = 25
				add_district = district_sofe_omega_logistics
			}
			while = {
				count = 25
				add_district = district_sofe_omega_progression
			}
			while = {
				count = 20
				create_pop = {
					species = owner_main_species
				}
			}		
			create_army = {
				owner = root.owner
				species = owner_main_species
				type = "origin_guardian"
			}
			create_army = {
				owner = root.owner
				species = owner_main_species
				type = "origin_guardian"
			}
			create_army = {
				owner = root.owner
				species = owner_main_species
				type = "origin_guardian"
			}
		}	
	}
	planet = {
		class = "pc_omega_ringworld_seam"
		name = "Jam'ek Obelisk"
		orbit_angle = 30
		orbit_distance = 0
		flags = { 
			original_empire_world 
		}
		init_effect = {
			set_planet_size = 500
			prevent_anomaly = yes
			trigger_megastructure_icon = yes
			set_planet_flag = megastructure
			set_owner = event_target:sofe_champion_country
			set_controller = event_target:sofe_champion_country

			add_building = building_heaven_sanctuary
			add_building = building_grand_fortress
			add_building = building_omega_fortress
			add_building = building_eden_garden
			add_building = building_eden_garden
			add_building = building_crystal_arch
			add_building = building_crystal_arch
			add_building = building_chamber_of_hope
			add_building = building_chamber_of_hope
			add_building = building_library_of_fate
			add_building = building_library_of_fate
			add_building = building_power_pyramid
			add_building = building_power_pyramid
			add_building = building_super_shelter
			add_building = building_super_shelter
			add_building = building_light_foundry
			while = {
				count = 50
				add_district = district_sofe_omega_city
			}
			while = {
				count = 25
				add_district = district_sofe_omega_logistics
			}
			while = {
				count = 25
				add_district = district_sofe_omega_progression
			}
			while = {
				count = 20
				create_pop = {
					species = owner_main_species
				}
			}		
			create_army = {
				owner = root.owner
				species = owner_main_species
				type = "origin_guardian"
			}
			create_army = {
				owner = root.owner
				species = owner_main_species
				type = "origin_guardian"
			}
			create_army = {
				owner = root.owner
				species = owner_main_species
				type = "origin_guardian"
			}
		}	
	}
	planet = {
		class = "pc_omega_ringworld_tech"
		name = "Alchimo'us Anchorage"
		orbit_angle = 20
		orbit_distance = 22.5
		flags = {
			omega_deposit
		}
		init_effect = {
			add_deposit = sofe_omegaworld_outer_section_deposit
			create_research_station = {
				owner = event_target:sofe_champion_country
			}
			trigger_megastructure_icon = yes
			prevent_anomaly = yes
			set_planet_flag = megastructure
			save_event_target_as = nexus_a
		}
	}
	planet = {
		class = "pc_omega_ringworld_tech"
		name = "Pul's Anchorage"
		orbit_angle = 20
		orbit_distance = 0
		flags = {
			omega_deposit
		}
		init_effect = {
			add_deposit = sofe_omegaworld_outer_section_deposit
			create_research_station = {
				owner = event_target:sofe_champion_country
			}
			trigger_megastructure_icon = yes
			prevent_anomaly = yes
			set_planet_flag = megastructure
		}
	}
	planet = {
		class = "pc_omega_ringworld_tech"
		name = "Spez'Renaz Anchorage"
		orbit_angle = 20
		orbit_distance = 0
		flags = {
			omega_deposit
		}
		init_effect = {
			add_deposit = sofe_omegaworld_outer_section_deposit
			create_research_station = {
				owner = event_target:sofe_champion_country
			}
			trigger_megastructure_icon = yes
			prevent_anomaly = yes
			set_planet_flag = megastructure
		}
	}
	planet = {
		class = "pc_omega_ringworld_tech"
		name = "Twink'ous Anchorage"
		orbit_angle = 20
		orbit_distance = 0
		flags = {
			omega_deposit
		}
		init_effect = {
			add_deposit = sofe_omegaworld_outer_section_deposit
			create_research_station = {
				owner = event_target:sofe_champion_country
			}
			trigger_megastructure_icon = yes
			prevent_anomaly = yes
			set_planet_flag = megastructure
		}
	}
	planet = {
		class = "pc_omega_ringworld_tech"
		name = "Tau'mas Anchorage"
		orbit_angle = 20
		orbit_distance = 0
		flags = {
			omega_deposit
		}
		init_effect = {
			add_deposit = sofe_omegaworld_outer_section_deposit
			create_research_station = {
				owner = event_target:sofe_champion_country
			}
			trigger_megastructure_icon = yes
			prevent_anomaly = yes
			set_planet_flag = megastructure
		}
	}
	planet = {
		class = "pc_omega_ringworld_tech"
		name = "Fro'ot Anchorage"
		orbit_angle = 20
		orbit_distance = 0
		flags = {
			omega_deposit
		}
		init_effect = {
			add_deposit = sofe_omegaworld_outer_section_deposit
			create_research_station = {
				owner = event_target:sofe_champion_country
			}
			trigger_megastructure_icon = yes
			prevent_anomaly = yes
			set_planet_flag = megastructure
		}
	}
	planet = {
		class = "pc_omega_ringworld_tech"
		name = "Omeg'terment Anchorage"
		orbit_angle = 20
		orbit_distance = 0
		flags = {
			omega_deposit
		}
		init_effect = {
			add_deposit = sofe_omegaworld_outer_section_deposit
			create_research_station = {
				owner = event_target:sofe_champion_country
			}
			trigger_megastructure_icon = yes
			prevent_anomaly = yes
			set_planet_flag = megastructure
		}
	}
	planet = {
		class = "pc_omega_ringworld_tech"
		name = "Spidous Anchorage"
		orbit_angle = 20
		orbit_distance = 0
		flags = {
			omega_deposit
		}
		init_effect = {
			add_deposit = sofe_omegaworld_outer_section_deposit
			create_research_station = {
				owner = event_target:sofe_champion_country
			}
			trigger_megastructure_icon = yes
			prevent_anomaly = yes
			set_planet_flag = megastructure
			save_event_target_as = nexus_b
		}
	}
	planet = {
		class = "pc_omega_ringworld_tech"
		name = "War'ngelis Anchorage"
		orbit_angle = 20
		orbit_distance = 0
		flags = {
			omega_deposit
		}
		init_effect = {
			add_deposit = sofe_omegaworld_outer_section_deposit
			create_research_station = {
				owner = event_target:sofe_champion_country
			}
			trigger_megastructure_icon = yes
			prevent_anomaly = yes
			set_planet_flag = megastructure
		}
	}
	planet = {
		class = "pc_omega_ringworld_tech"
		name = "Spencer Anchorage"
		orbit_angle = 20
		orbit_distance = 0
		flags = {
			omega_deposit
		}
		init_effect = {
			add_deposit = sofe_omegaworld_outer_section_deposit
			create_research_station = {
				owner = event_target:sofe_champion_country
			}
			trigger_megastructure_icon = yes
			prevent_anomaly = yes
			set_planet_flag = megastructure
		}
	}
	planet = {
		class = "pc_omega_ringworld_tech"
		name = "Tei'gan Anchorage"
		orbit_angle = 20
		orbit_distance = 0
		flags = {
			omega_deposit
		}
		init_effect = {
			add_deposit = sofe_omegaworld_outer_section_deposit
			create_research_station = {
				owner = event_target:sofe_champion_country
			}
			trigger_megastructure_icon = yes
			prevent_anomaly = yes
			set_planet_flag = megastructure
		}
	}
	planet = {
		class = "pc_omega_ringworld_tech"
		name = "Elowi'nius Anchorage"
		orbit_angle = 20
		orbit_distance = 0
		flags = {
			omega_deposit
		}
		init_effect = {
			add_deposit = sofe_omegaworld_outer_section_deposit
			create_research_station = {
				owner = event_target:sofe_champion_country
			}
			trigger_megastructure_icon = yes
			prevent_anomaly = yes
			set_planet_flag = megastructure
		}
	}
	planet = {
		class = "pc_omega_ringworld_tech"
		name = "Brena'dan Anchorage"
		orbit_angle = 20
		orbit_distance = 0
		flags = {
			omega_deposit
		}
		init_effect = {
			add_deposit = sofe_omegaworld_outer_section_deposit
			create_research_station = {
				owner = event_target:sofe_champion_country
			}
			trigger_megastructure_icon = yes
			prevent_anomaly = yes
			set_planet_flag = megastructure
		}
	}
	planet = {
		class = "pc_omega_ringworld_tech"
		name = "Glavio Anchorage"
		orbit_angle = 20
		orbit_distance = 0
		flags = {
			omega_deposit
		}
		init_effect = {
			add_deposit = sofe_omegaworld_outer_section_deposit
			create_research_station = {
				owner = event_target:sofe_champion_country
			}
			trigger_megastructure_icon = yes
			prevent_anomaly = yes
			set_planet_flag = megastructure
		}
	}
	planet = {
		class = "pc_omega_ringworld_tech"
		name = "Stratos Anchorage"
		orbit_angle = 20
		orbit_distance = 0
		flags = {
			omega_deposit
		}
		init_effect = {
			add_deposit = sofe_omegaworld_outer_section_deposit
			create_research_station = {
				owner = event_target:sofe_champion_country
			}
			trigger_megastructure_icon = yes
			prevent_anomaly = yes
			set_planet_flag = megastructure
		}
	}
	planet = {
		class = "pc_omega_ringworld_tech"
		name = "Ara'ghos Anchorage"
		orbit_angle = 20
		orbit_distance = 0
		flags = {
			omega_deposit
		}
		init_effect = {
			add_deposit = sofe_omegaworld_outer_section_deposit
			create_research_station = {
				owner = event_target:sofe_champion_country
			}
			trigger_megastructure_icon = yes
			prevent_anomaly = yes
			set_planet_flag = megastructure
		}
	}
	planet = {
		class = "pc_omega_ringworld_tech"
		name = "Moa'fin Anchorage"
		orbit_angle = 20
		orbit_distance = 0
		flags = {
			omega_deposit
		}
		init_effect = {
			add_deposit = sofe_omegaworld_outer_section_deposit
			create_research_station = {
				owner = event_target:sofe_champion_country
			}
			trigger_megastructure_icon = yes
			prevent_anomaly = yes
			set_planet_flag = megastructure
		}
	}
	planet = {
		class = "pc_omega_ringworld_tech"
		name = "Rasha'ta Anchorage"
		orbit_angle = 20
		orbit_distance = 0
		flags = {
			omega_deposit
		}
		init_effect = {
			add_deposit = sofe_omegaworld_outer_section_deposit
			create_research_station = {
				owner = event_target:sofe_champion_country
			}
			trigger_megastructure_icon = yes
			prevent_anomaly = yes
			set_planet_flag = megastructure
		}
	}
	
	
	init_effect = {
		spawn_megastructure = { 
		type = "sofe_omega_dyson_sphere"
		orbit_angle = 1
		orbit_distance = 0
		location = solar_system
		}	
		
		spawn_megastructure = { 
			type = "sofe_omega_nexus"												
			orbit_angle = 0
			orbit_distance = 0
			location = event_target:nexus_a
		}

		spawn_megastructure = { 
			type = "sofe_omega_nexus"												
			orbit_angle = 0
			orbit_distance = 0
			location = event_target:nexus_b
		}

		spawn_megastructure = { 
			type = "sofe_omega_spy_orb_center"												
			orbit_angle = 30
			orbit_distance = 90
			location = solar_system
		}

		spawn_megastructure = {
			type = sofe_inner_gate
			orbit_angle = 225
			orbit_distance = 200
			location = solar_system
		}
	}
}

############################################################

sofe_outer_cluster_fortress = {
	name = "NAME_Outer_Home_Fortress"
	class = "sofe_inner_class"	
    flags = { outercluster outerclusterhome original_fortress_system }

	planet = {
		name = "NAME_Outer_Home_Fortress"
		class = "pc_invisible_star"
		orbit_distance = 0
		size = 1
		has_ring = no
		init_effect = {
		}
		flags = {
			star_heart outerclusterhome
		}
	}

	planet = {
		name = "NAME_Planet_Outer_Home_Fortress"
		class = "pc_golden_fortress"
		orbit_distance = 0
		orbit_angle = 0
		size = 500
		has_ring = no
		modifiers = none
		deposit_blockers = none
		init_effect = {
			trigger_megastructure_icon = yes
			set_planet_flag = megastructure
			prevent_anomaly = yes

		
			add_building = building_heaven_sanctuary
			add_building = building_omega_fortress
		}
		flags = {
			CapitalFortress original_empire_world
		}
	}	
	
	init_effect = {
		spawn_megastructure = {
			type = "sofe_inner_gate"
			random_pos = yes
			orbit_angle = 360		# range of the randomization
			orbit_distance = 200
		}
	}
}

#####################################################################

######### OUTER CLUSTER SYSTEMS

#####################################################################


# Entrance
sofe_throne_entrance = {
	class = "sofe_inner_class"
	name = "NAME_Frontier_Egress"
	
	usage = misc_system_init
	usage_odds = 0


	flags = { hostile_system outercluster outercluster1 outercluster_gate }

	planet = {
		name = "NAME_Frontier_Egress"
		class = "pc_invisible_star"
		orbit_distance = 0
		orbit_angle = 1
		size = 1
		has_ring = no
		init_effect = {
		}
	}
	
	
	init_effect = {
		spawn_megastructure = {
			type = sofe_outer_gate
			orbit_angle = 225
			orbit_distance = 0
			location = solar_system
		}

		spawn_megastructure = {
			type = sofe_inner_gate
			orbit_angle = 360
			orbit_distance = 225
			location = solar_system
		}
	}
}


sofe_outer_cluster_a = {
	name = "NAME_Outer_EgressA"
	class = "sofe_inner_class"	

	flags = { hostile_system outercluster outercluster2 }

	planet = {
		name = "NAME_Outer_EgressA"
		class = "pc_invisible_star"
		orbit_distance = 0
		size = 1
		has_ring = no
		init_effect = {
		}
	}

	planet = {
		name = "NAME_Planet_WardenA"
		class = "pc_golden_world"
		orbit_distance = 0
		orbit_angle = 0
		size = 500
		has_ring = no
		modifiers = none
		deposit_blockers = none
		init_effect = {
			trigger_megastructure_icon = yes
			set_planet_flag = megastructure
			prevent_anomaly = yes
		}
		flags = {
			wardena oe_warden_world
		}
	}	
	init_effect = {
		spawn_megastructure = {
			type = "sofe_inner_gate"
			random_pos = yes
			orbit_angle = 360		# range of the randomization
			orbit_distance = 200
		}
	}	
}

sofe_outer_cluster_b = {
	name = "NAME_Outer_EgressB"
	class = "sofe_inner_class"	

	flags = { hostile_system outercluster outercluster3 }

	planet = {
		name = "NAME_Outer_EgressB"
		class = "pc_invisible_star"
		orbit_distance = 0
		size = 1
		has_ring = no
		init_effect = {
		}
	}

	planet = {
		name = "NAME_Planet_WardenB"
		class = "pc_golden_world"
		orbit_distance = 0
		orbit_angle = 0
		size = 500
		has_ring = no
		modifiers = none
		deposit_blockers = none
		init_effect = {
			trigger_megastructure_icon = yes
			set_planet_flag = megastructure
			prevent_anomaly = yes
		}
		flags = {
			wardenb oe_warden_world
		}
	}	
	init_effect = {
		spawn_megastructure = {
			type = "sofe_inner_gate"
			random_pos = yes
			orbit_angle = 360		# range of the randomization
			orbit_distance = 200
		}
	}	
}

sofe_outer_cluster_c = {
	name = "NAME_Outer_EgressC"
	class = "sofe_inner_class"	

	flags = { hostile_system outercluster outercluster4 }

	planet = {
		name = "NAME_Outer_EgressC"
		class = "pc_invisible_star"
		orbit_distance = 0
		size = 1
		has_ring = no
		init_effect = {
		}
	}

	planet = {
		name = "NAME_Planet_WardenC"
		class = "pc_golden_world"
		orbit_distance = 0
		orbit_angle = 0
		size = 500
		has_ring = no
		modifiers = none
		deposit_blockers = none
		init_effect = {
			trigger_megastructure_icon = yes
			set_planet_flag = megastructure
			prevent_anomaly = yes
		}
		flags = {
			wardenc oe_warden_world
		}
	}	
	init_effect = {
		spawn_megastructure = {
			type = "sofe_inner_gate"
			random_pos = yes
			orbit_angle = 360		# range of the randomization
			orbit_distance = 200
		}
	}	
}

sofe_outer_cluster_d = {
	name = "NAME_Outer_EgressD"
	class = "sofe_inner_class"	

	flags = { hostile_system outercluster outercluster5 }

	planet = {
		name = "NAME_Outer_EgressD"
		class = "pc_invisible_star"
		orbit_distance = 0
		size = 1
		has_ring = no
		init_effect = {
		}
	}

	planet = {
		name = "NAME_Planet_WardenD"
		class = "pc_golden_world"
		orbit_distance = 0
		orbit_angle = 0
		size = 500
		has_ring = no
		modifiers = none
		deposit_blockers = none
		init_effect = {
			trigger_megastructure_icon = yes
			set_planet_flag = megastructure
			prevent_anomaly = yes
		}
		flags = {
			 wardend oe_warden_world
		}
	}	
	init_effect = {
		spawn_megastructure = {
			type = "sofe_inner_gate"
			random_pos = yes
			orbit_angle = 360		# range of the randomization
			orbit_distance = 200
		}
	}	
}

#####################################################################

######### OUTER GATE SYSTEMS 

#####################################################################

# OUTER-Gate System
sofe_outergate_init = {
	class = sofe_outer_class

	flags = { hostile_system outergate }
	
	usage = misc_system_init
	usage_odds = {
		base = 5
		modifier = {
			has_distar = yes
			add = 2
		}
		modifier = {
			factor = 0.5
			is_fe_cluster = yes
		}
		modifier = {
			factor = 0
			has_star_flag = empire_cluster
		}
		modifier = {
			factor = 0										# we don't want gateways too close to each other
			any_neighbor_system = {
				has_megastructure = lgate_base
			}
		}
		modifier = {
			factor = 0										# we don't want gateways too close to each other
			any_neighbor_system = {
				has_megastructure = gateway_ruined
			}
		}
		modifier = {
			factor = 0										# we don't want gateways too close to each other
			any_neighbor_system = {
				has_megastructure = sofe_outer_gate
			}
		}
	}

	max_instances = 3
	scaled_spawn_chance = 50
	
	planet = {
		class = "pc_invisible_star"
		orbit_distance = 0
		size = 1
		has_ring = no
		flags = { outergate_star }
		init_effect = {
			remove_deposit = yes
			prevent_anomaly = yes
		}
	}
	
	change_orbit = 30

	init_effect = {
		spawn_megastructure = {
			type = acot_dark_matter_obelisk_core
			orbit_angle = 225
			orbit_distance = 115
			location = solar_system
		}
		if = {
			limit = { NOT = { exists = event_target:sofe_gatekeeper_dormant_country } }
			create_country = {
				type = sofe_sentinel_dormant
				name = "NAME_GATEKEEPER_WARDEN"
				flag = {
					icon = {
						category = "zoological"
						file = "flag_zoological_1.dds"
					}
					background= {
						category = "backgrounds"
						file = "00_solid.dds"
					}
					colors={
						"black"
						"black"
						"null"
						"null"
					}
				}
				ignore_initial_colony_error = yes
			}
			last_created_country = {
				save_global_event_target_as = sofe_gatekeeper_dormant_country
			}
		}
		random_system_megastructure = {
			limit = {
				is_megastructure_type = acot_dark_matter_obelisk_core
			}
			random_list = {
				25 = {
					create_fleet = {
						name = "NAME_GATEKEEPER_WARDEN_FLEET"
						settings = {
							is_boss = yes
							uses_naval_capacity = no
							spawn_debris = yes
						}
						effect = {
							set_owner = event_target:sofe_gatekeeper_dormant_country
							while = {
								count = 1
								create_ship = {
									name = "NAME_WARDEN_MATERIALIST"
									design = "NAME_WARDEN_MATERIALIST"
									graphical_culture = "fallen_empire_01"
								}
							}
							set_location = PREV
							set_fleet_stance = aggressive
							set_aggro_range_measure_from = return_point
							set_aggro_range = 400
							queue_actions = {
								repeat = {
									wait = {
										duration = 999
										random = 10
									}
								}
							}
						}
					}
				}
				25 = {
					create_fleet = {
						name = "NAME_GATEKEEPER_WARDEN_FLEET"
						settings = {
							is_boss = yes
							uses_naval_capacity = no
							spawn_debris = yes
						}
						effect = {
							set_owner = event_target:sofe_gatekeeper_dormant_country
							while = {
								count = 1
								create_ship = {
									name = "NAME_WARDEN_XENOPHOBE"
									design = "NAME_WARDEN_XENOPHOBE"
									graphical_culture = "fallen_empire_02"
								}
							}
							set_location = PREV
							set_fleet_stance = aggressive
							set_aggro_range_measure_from = return_point
							set_aggro_range = 400
							queue_actions = {
								repeat = {
									wait = {
										duration = 999
										random = 10
									}
								}
							}
						}
					}
				}
				25 = {
					create_fleet = {
						name = "NAME_GATEKEEPER_WARDEN_FLEET"
						settings = {
							is_boss = yes
							uses_naval_capacity = no
							spawn_debris = yes
						}
						effect = {
							set_owner = event_target:sofe_gatekeeper_dormant_country
							while = {
								count = 1
								create_ship = {
									name = "NAME_WARDEN_EGALITARIAN"
									design = "NAME_WARDEN_EGALITARIAN"
									graphical_culture = "fallen_empire_03"
								}
							}
							set_location = PREV
							set_fleet_stance = aggressive
							set_aggro_range_measure_from = return_point
							set_aggro_range = 400
							queue_actions = {
								repeat = {
									wait = {
										duration = 999
										random = 10
									}
								}
							}
						}
					}
				}	
				25 = {
					create_fleet = {
						name = "NAME_GATEKEEPER_WARDEN_FLEET"
						settings = {
							is_boss = yes
							uses_naval_capacity = no
							spawn_debris = yes
						}
						effect = {
							set_owner = event_target:sofe_gatekeeper_dormant_country
							while = {
								count = 1
								create_ship = {
									name = "NAME_WARDEN_DEVOUR"
									design = "NAME_WARDEN_DEVOUR"
									graphical_culture = "fallen_empire_04"
								}
							}
							set_location = PREV
							set_fleet_stance = aggressive
							set_aggro_range_measure_from = return_point
							set_aggro_range = 400
							queue_actions = {
								repeat = {
									wait = {
										duration = 999
										random = 10
									}
								}
							}
						}
					}
				}							
			}
		}
		
		spawn_megastructure = {
			type = sofe_outer_gate
			orbit_angle = 225
			orbit_distance = 0
			location = solar_system
		}
		random_system_megastructure = {
			limit = {
				is_megastructure_type = sofe_outer_gate
			}
			create_ambient_object = {
				type = sofe_mem_planet_shield_full
				location = this
			}
			last_created_ambient_object = {
				#set_location = prev
				set_ambient_object_flag = sofe_shield_full
			}
		}
	}
}

# Guaranteed L-Gate spawn
sofe_outergate_init_gar = {
	class = sofe_outer_class

	flags = { hostile_system outergate outergate_guaranteed }
	
	usage = misc_system_init
	usage_odds = {
		base = 100
		modifier = {
			factor = 0.50
			is_fe_cluster = yes
		}
		modifier = {
			factor = 0
			has_star_flag = empire_cluster
		}
		modifier = {
			factor = 0
			has_star_flag = empire_cluster
		}
		modifier = {
			factor = 0										# we don't want gateways too close to each other
			any_neighbor_system = {
				has_megastructure = lgate_base
			}
		}
		modifier = {
			factor = 0										# we don't want gateways too close to each other
			any_neighbor_system = {
				has_megastructure = gateway_ruined
			}
		}
		modifier = {
			factor = 0										# we don't want gateways too close to each other
			any_neighbor_system = {
				has_megastructure = sofe_outer_gate
			}
		}
	}

	max_instances = 1
	spawn_chance = 100
	
	planet = {
		class = "pc_invisible_star"
		orbit_distance = 0
		size = 1
		has_ring = no
		flags = { outergate_star }
		init_effect = {
			remove_deposit = yes
			prevent_anomaly = yes
		}
	}
	
	change_orbit = 30
	

	init_effect = {
		spawn_megastructure = {
			type = acot_dark_matter_obelisk_core
			orbit_angle = 225
			orbit_distance = 115
			location = solar_system
		}
		if = {
			limit = { NOT = { exists = event_target:sofe_gatekeeper_dormant_country } }
			create_country = {
				type = sofe_sentinel_dormant
				name = "NAME_GATEKEEPER_WARDEN"
				flag = {
					icon = {
						category = "zoological"
						file = "flag_zoological_1.dds"
					}
					background= {
						category = "backgrounds"
						file = "00_solid.dds"
					}
					colors={
						"black"
						"black"
						"null"
						"null"
					}
				}
				ignore_initial_colony_error = yes
			}
			last_created_country = {
				save_global_event_target_as = sofe_gatekeeper_dormant_country
			}
		}
		random_system_megastructure = {
			limit = {
				is_megastructure_type = acot_dark_matter_obelisk_core
			}
			random_list = {
				25 = {
					create_fleet = {
						name = "NAME_GATEKEEPER_WARDEN_FLEET"
						settings = {
							is_boss = yes
							uses_naval_capacity = no
							spawn_debris = yes
						}
						effect = {
							set_owner = event_target:sofe_gatekeeper_dormant_country
							while = {
								count = 1
								create_ship = {
									name = "NAME_WARDEN_MATERIALIST"
									design = "NAME_WARDEN_MATERIALIST"
									graphical_culture = "fallen_empire_01"
								}
							}
							set_location = PREV
							set_fleet_stance = aggressive
							set_aggro_range_measure_from = return_point
							set_aggro_range = 400
							queue_actions = {
								repeat = {
									wait = {
										duration = 999
										random = 10
									}
								}
							}
						}
					}
				}
				25 = {
					create_fleet = {
						name = "NAME_GATEKEEPER_WARDEN_FLEET"
						settings = {
							is_boss = yes
							uses_naval_capacity = no
							spawn_debris = yes
						}
						effect = {
							set_owner = event_target:sofe_gatekeeper_dormant_country
							while = {
								count = 1
								create_ship = {
									name = "NAME_WARDEN_XENOPHOBE"
									design = "NAME_WARDEN_XENOPHOBE"
									graphical_culture = "fallen_empire_02"
								}
							}
							set_location = PREV
							set_fleet_stance = aggressive
							set_aggro_range_measure_from = return_point
							set_aggro_range = 400
							queue_actions = {
								repeat = {
									wait = {
										duration = 999
										random = 10
									}
								}
							}
						}
					}
				}
				25 = {
					create_fleet = {
						name = "NAME_GATEKEEPER_WARDEN_FLEET"
						settings = {
							is_boss = yes
							uses_naval_capacity = no
							spawn_debris = yes
						}
						effect = {
							set_owner = event_target:sofe_gatekeeper_dormant_country
							while = {
								count = 1
								create_ship = {
									name = "NAME_WARDEN_EGALITARIAN"
									design = "NAME_WARDEN_EGALITARIAN"
									graphical_culture = "fallen_empire_03"
								}
							}
							set_location = PREV
							set_fleet_stance = aggressive
							set_aggro_range_measure_from = return_point
							set_aggro_range = 400
							queue_actions = {
								repeat = {
									wait = {
										duration = 999
										random = 10
									}
								}
							}
						}
					}
				}	
				25 = {
					create_fleet = {
						name = "NAME_GATEKEEPER_WARDEN_FLEET"
						settings = {
							is_boss = yes
							uses_naval_capacity = no
							spawn_debris = yes
						}
						effect = {
							set_owner = event_target:sofe_gatekeeper_dormant_country
							while = {
								count = 1
								create_ship = {
									name = "NAME_WARDEN_DEVOUR"
									design = "NAME_WARDEN_DEVOUR"
									graphical_culture = "fallen_empire_04"
								}
							}
							set_location = PREV
							set_fleet_stance = aggressive
							set_aggro_range_measure_from = return_point
							set_aggro_range = 400
							queue_actions = {
								repeat = {
									wait = {
										duration = 999
										random = 10
									}
								}
							}
						}
					}
				}							
			}
		}

		spawn_megastructure = {
			type = sofe_outer_gate
			orbit_angle = 225
			orbit_distance = 0
			location = solar_system
		}
		random_system_megastructure = {
			limit = {
				is_megastructure_type = sofe_outer_gate
			}
			create_ambient_object = {
				type = sofe_mem_planet_shield_full
				location = this
			}
			last_created_ambient_object = {
				#set_location = prev
				set_ambient_object_flag = sofe_shield_full
			}
		}
	}
}