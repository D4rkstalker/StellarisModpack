@jumps = 3
@asteroid_min_size = 2
@asteroid_max_size = 4
@frozen_world_min_size = 9
@frozen_world_max_size = 20

# Legendary next Planet Origin
legw_next_start = {
	class = "sc_a"
	flags = { empire_home_system }
	usage = origin
	
	asteroid_belt = {
		type = rocky_asteroid_belt
		radius = 100
	}
	init_effect = {
		every_neighbor_system = { set_star_flag = empire_cluster }
		generate_home_system_resources = yes
		#if = {
		#	limit = {
		#		is_inside_nebula = no
		#	}
		#	create_nebula = {
		#		radius = 25
		#	}
		#	set_star_flag = ocean_paradise_nebula
		#}
	}

	# Star
	planet = {
		class = star
		orbit_distance = 0
		orbit_angle = 0
		size = 28
		has_ring = no
	}

	# Homeworld
	planet = {
		count = 1
		orbit_distance = 40 #20
		home_planet = yes
		class = ideal_planet_class
		orbit_angle = { min = 90 max = 270 }
		size = { min = 17 max = 20 }
		deposit_blockers = none
		modifiers = none

		init_effect = {
			generate_empire_home_planet = yes
			prevent_anomaly = yes
			# add_modifier = { days = -1 modifier = "legw_utopia" }
			
			# add_building = building_class_4_singularity
		}

		change_orbit = @base_moon_distance

		moon = {
			count = { min = 0 max = 1 }
			class = random_non_colonizable
			orbit_angle = { min = 90 max = 270 }
			orbit_distance = 5
		}
	}

	planet = {
		count = { min = 1 max = 3 }
		orbit_distance = 25
		class = random_non_colonizable
		orbit_angle = { min = 90 max = 270 }
	}

	planet = {
		count = { min = 1 max = 2 }
		orbit_distance = 20
		class = pc_gas_giant
		orbit_angle = { min = 90 max = 270 }

		change_orbit = @base_moon_distance

		moon = {
			count = { min = 1 max = 3 }
			class = random_non_colonizable
			orbit_angle = { min = 90 max = 270 }
			orbit_distance = 5
		}
	}

	planet = {
		count = { min = 0 max = 1 }
		orbit_distance = 20
		class = random_non_colonizable
		orbit_angle = { min = 90 max = 270 }
	}

	# Guaranteed habitables
	neighbor_system = {
		trigger = { num_guaranteed_colonies >= 2 }
		hyperlane_jumps = { min = 1 max = @jumps }
		initializer = "neighbor_t1"
	}
	neighbor_system = {
		trigger = { num_guaranteed_colonies >= 1 }
		hyperlane_jumps = { min = 1 max = @jumps }
		initializer = "neighbor_legw_first_colony_rare"
	}
}

legw_lucky_start = {
	class = "rl_standard_stars"
	flags = { empire_home_system }
	usage = origin
	
	init_effect = {
		every_neighbor_system = { set_star_flag = empire_cluster }
		generate_home_system_resources = yes
		#if = {
		#	limit = {
		#		is_inside_nebula = no
		#	}
		#	create_nebula = {
		#		radius = 25
		#	}
		#	set_star_flag = ocean_paradise_nebula
		#}
	}

	# Star
	planet = {
		class = star
		orbit_distance = 0
		orbit_angle = 0
		size = 18
		has_ring = no
	}

	# Homeworld
	planet = {
		count = 1
		orbit_distance = 20
		home_planet = yes
		class = ideal_planet_class
		orbit_angle = { min = 90 max = 270 }
		size = { min = 17 max = 20 }
		deposit_blockers = none
		modifiers = none

		init_effect = {
			generate_empire_home_planet = yes
			prevent_anomaly = yes
			# add_modifier = { days = -1 modifier = "legw_utopia" }
			
			# add_building = building_class_4_singularity
		}

		change_orbit = @base_moon_distance

		moon = {
			count = { min = 0 max = 1 }
			class = random_non_colonizable
			orbit_angle = { min = 90 max = 270 }
			orbit_distance = 5
		}
	}

	planet = {
		count = { min = 1 max = 3 }
		orbit_distance = 25
		class = random_non_colonizable
		orbit_angle = { min = 90 max = 270 }
	}

	planet = {
		count = { min = 1 max = 2 }
		orbit_distance = 20
		class = pc_gas_giant
		orbit_angle = { min = 90 max = 270 }

		change_orbit = @base_moon_distance

		moon = {
			count = { min = 1 max = 3 }
			class = random_non_colonizable
			orbit_angle = { min = 90 max = 270 }
			orbit_distance = 5
		}
	}

	planet = {
		count = { min = 0 max = 1 }
		orbit_distance = 20
		class = random_non_colonizable
		orbit_angle = { min = 90 max = 270 }
	}

	# Guaranteed habitables
	neighbor_system = {
		trigger = { num_guaranteed_colonies >= 2 }
		hyperlane_jumps = { min = 1 max = 1 }
		initializer = "neighbor_legw_second_colony"
	}
	neighbor_system = {
		trigger = { num_guaranteed_colonies >= 1 }
		hyperlane_jumps = { min = 1 max = 1 }
		initializer = "neighbor_legw_first_colony"
	}
}

legw_ancient_start = {
	class = "rl_standard_stars"
	flags = { empire_home_system }
	usage = origin
	
	init_effect = {
		every_neighbor_system = { set_star_flag = empire_cluster }
		generate_home_system_resources = yes
		if = {
			limit = {
				is_inside_nebula = no
			}
			create_nebula = {
				radius = 28
			}
		}
	}

	# Star
	planet = {
		class = star
		orbit_distance = 0
		orbit_angle = 0
		size = 18
		has_ring = no
	}

	# Homeworld
	planet = {
		count = 1
		orbit_distance = 20
		home_planet = yes
		class = ideal_planet_class
		orbit_angle = { min = 90 max = 270 }
		size = { min = 15 max = 15 }
		deposit_blockers = none
		modifiers = none

		init_effect = {
			generate_empire_home_planet = yes
			prevent_anomaly = yes
			add_modifier = { days = -1 modifier = "legw_tombstart_planet_hw" }
			add_modifier = { days = 90 modifier = "legw_tombstart_chaos" }
			
			
			# Everything event based from here
			
			#if = {
			#	limit = {
			#		has_building = "building_commercial_zone"
			#	}
			#	remove_building = yes
			#}
			# add_building = building_hydroponics_farm
			# remove_building = building_commercial_zone
		}

		change_orbit = @base_moon_distance

		moon = {
			count = { min = 0 max = 1 }
			class = random_non_colonizable
			orbit_angle = { min = 90 max = 270 }
			orbit_distance = 5
		}
	}

	planet = {
		count = { min = 1 max = 3 }
		orbit_distance = 25
		class = random_non_colonizable
		orbit_angle = { min = 90 max = 270 }
	}

	planet = {
		count = { min = 1 max = 2 }
		orbit_distance = 20
		class = pc_gas_giant
		orbit_angle = { min = 90 max = 270 }

		change_orbit = @base_moon_distance

		moon = {
			count = { min = 1 max = 3 }
			class = random_non_colonizable
			orbit_angle = { min = 90 max = 270 }
			orbit_distance = 5
		}
	}

	planet = {
		count = { min = 0 max = 1 }
		orbit_distance = 20
		class = random_non_colonizable
		orbit_angle = { min = 90 max = 270 }
	}

	# Guaranteed habitables
	neighbor_system = {
		trigger = { num_guaranteed_colonies >= 2 }
		hyperlane_jumps = { min = 1 max = 1 }
		initializer = "neighbor_legw_tomb_colony2"
	}
	neighbor_system = {
		trigger = { num_guaranteed_colonies >= 1 }
		hyperlane_jumps = { min = 1 max = 1 }
		initializer = "neighbor_legw_tomb_colony1"
	}
}

# altered neighbor_t1

neighbor_legw_first_colony = {
	class = "rl_standard_stars"
	flags = { neighbor_t1_first_colony }

	init_effect = {
		every_neighbor_system = { set_star_flag = empire_cluster }
	}

	planet = {
		count = 1
		class = star
		orbit_distance = 0
		orbit_angle = 1
		size = { min = 20 max = 30 }
		has_ring = no
	}

	change_orbit = 45

	planet = {
		count = { min = 0 max = 2 }
		orbit_distance = 20

		change_orbit = @base_moon_distance

		moon = {
			count = { min = 0 max = 1 }
			orbit_distance = 5
		}
	}

	planet = {
		count = 1
		orbit_distance = 25
		class = ideal_design_class
		modifiers = none

		anomaly = none
		orbit_angle = { min = 90 max = 270 }
		size = { min = 12 max = 25 }

		init_effect = {
			set_planet_flag = prescripted_ideal		# used by code, do not remove
			# set_planet_flag = legw_planet
			
			while = {
				limit = {
					NOT = { has_planet_flag = "legw_planet" }
				}
			legw_add_modifier_true = yes
			legw_add_modifier_rare = yes
			legw_add_modifier_common = yes
			}
			
			# add_building = pre_town #this works here
			
		}
	}

	planet = {
		count = { min = 2 max = 5 }
		orbit_distance = 25

		change_orbit = @base_moon_distance

		moon = {
			count = { min = 0 max = 1 }
			orbit_distance = 5
		}
	}

	neighbor_system = {
		hyperlane_jumps = { min = 1 max = @jumps }
		initializer = "neighbor_t2"
	}
}

neighbor_legw_second_colony = {
	class = "rl_standard_stars"
	flags = { neighbor_t2_second_colony }

	init_effect = {
		every_neighbor_system = { set_star_flag = empire_cluster }
	}

	planet = {
		count = 1
		class = star
		orbit_distance = 0
		orbit_angle = 1
		size = { min = 20 max = 30 }
		has_ring = no
	}

	change_orbit = 25

	planet = {
		count = 2
		orbit_angle = { min = 90 max = 270 }
		orbit_distance = 20
	}

	planet = {
		count = 1
		orbit_distance = 25
		class = ideal_design_class
		modifiers = none
		anomaly = none
		orbit_angle = { min = 90 max = 270 }
		size = { min = 14 max = 24 }

		change_orbit = @base_moon_distance

		init_effect = {
			set_planet_flag = prescripted_ideal		# used by code, do not remove
			
			while = {
				limit = {
					NOT = { has_planet_flag = "legw_planet" }
				}
			legw_add_modifier_true = yes
			legw_add_modifier_rare = yes
			legw_add_modifier_common = yes
			}
		}

		moon = {
			count = { min = 0 max = 1 }
			class = random_non_colonizable
			orbit_angle = { min = 90 max = 270 }
			orbit_distance = 5
		}
	}

	planet = {
		count = 2
		orbit_angle = { min = 90 max = 270 }
		orbit_distance = 20

		change_orbit = @base_moon_distance

		moon = {
			count = { min = 0 max = 1 }
			class = random_non_colonizable
			orbit_angle = { min = 90 max = 270 }
			orbit_distance = 5
		}
	}

	planet = {
		count = { min = 0 max = 2 }
		orbit_angle = { min = 90 max = 270 }
		orbit_distance = 20
	}
}

neighbor_legw_first_colony_rare = {
	class = "rl_standard_stars"
	flags = { neighbor_t1_first_colony }

	init_effect = {
		every_neighbor_system = { set_star_flag = empire_cluster }
	}

	planet = {
		count = 1
		class = star
		orbit_distance = 0
		orbit_angle = 1
		size = { min = 20 max = 30 }
		has_ring = no
	}

	change_orbit = 45

	planet = {
		count = { min = 0 max = 2 }
		orbit_distance = 20

		change_orbit = @base_moon_distance

		moon = {
			count = { min = 0 max = 1 }
			orbit_distance = 5
		}
	}

	planet = {
		count = 1
		orbit_distance = 25
		class = ideal_design_class
		modifiers = none

		anomaly = none
		orbit_angle = { min = 90 max = 270 }
		size = { min = 12 max = 25 }

		init_effect = {
			set_planet_flag = prescripted_ideal		# used by code, do not remove
			# set_planet_flag = legw_planet
			
			while = {
				limit = {
					NOT = { has_planet_flag = "legw_planet" }
				}
			legw_add_modifier_rare = yes
			}
			
			# add_building = pre_town #this works here
			
		}
	}

	planet = {
		count = { min = 2 max = 5 }
		orbit_distance = 25

		change_orbit = @base_moon_distance

		moon = {
			count = { min = 0 max = 1 }
			orbit_distance = 5
		}
	}

	neighbor_system = {
		hyperlane_jumps = { min = 1 max = @jumps }
		initializer = "neighbor_t2"
	}
}

neighbor_legw_tomb_colony1 = {
	class = "rl_standard_stars"
	flags = { neighbor_t1_first_colony }

	init_effect = {
		every_neighbor_system = { set_star_flag = empire_cluster }
	}

	planet = {
		count = 1
		class = star
		orbit_distance = 0
		orbit_angle = 1
		size = { min = 20 max = 30 }
		has_ring = no
	}

	change_orbit = 45

	planet = {
		count = { min = 0 max = 2 }
		orbit_distance = 20

		change_orbit = @base_moon_distance

		moon = {
			count = { min = 0 max = 1 }
			orbit_distance = 5
		}
	}

	planet = {
		count = 1
		orbit_distance = 25
		class = pc_nuked
		modifiers = none

		anomaly = none
		orbit_angle = { min = 90 max = 270 }
		size = { min = 12 max = 25 }

		init_effect = {
			set_planet_flag = prescripted_ideal		# used by code, do not remove
			set_planet_flag = legw_planet #prevents other legendaries here
			
			add_modifier = { days = -1 modifier = "legw_tombstart_planet" }
			
			random_list = {
				50 = {
					add_building = pre_sensor
					add_building = pre_lab
				}
				50 = {
					add_building = pre_lab
					add_building = pre_lab
				}
			}
			
		}
	}

	planet = {
		count = { min = 2 max = 5 }
		orbit_distance = 25

		change_orbit = @base_moon_distance

		moon = {
			count = { min = 0 max = 1 }
			orbit_distance = 5
		}
	}

	neighbor_system = {
		hyperlane_jumps = { min = 1 max = @jumps }
		initializer = "neighbor_t2"
	}
}

neighbor_legw_tomb_colony2 = {
	class = "rl_standard_stars"
	flags = { neighbor_t2_second_colony }

	init_effect = {
		every_neighbor_system = { set_star_flag = empire_cluster }
	}

	planet = {
		count = 1
		class = star
		orbit_distance = 0
		orbit_angle = 1
		size = { min = 20 max = 30 }
		has_ring = no
	}

	change_orbit = 25

	planet = {
		count = 2
		orbit_angle = { min = 90 max = 270 }
		orbit_distance = 20
	}

	planet = {
		count = 1
		orbit_distance = 25
		class = pc_nuked
		modifiers = none
		anomaly = none
		orbit_angle = { min = 90 max = 270 }
		size = { min = 15 max = 19 }

		change_orbit = @base_moon_distance

		init_effect = {
			set_planet_flag = prescripted_ideal		# used by code, do not remove
			set_planet_flag = legw_planet #prevents other legendaries here
			
		add_modifier = { days = -1 modifier = "legw_tombstart_planet" }	

			random_list = {
				50 = {
					add_building = pre_sensor
					add_building = pre_depot
				}
				50 = {
					add_building = pre_sensor
					add_building = pre_depot
					add_building = pre_depot
				}
			}		

		}

		moon = {
			count = { min = 0 max = 1 }
			class = random_non_colonizable
			orbit_angle = { min = 90 max = 270 }
			orbit_distance = 5
		}
	}

	planet = {
		count = 2
		orbit_angle = { min = 90 max = 270 }
		orbit_distance = 20

		change_orbit = @base_moon_distance

		moon = {
			count = { min = 0 max = 1 }
			class = random_non_colonizable
			orbit_angle = { min = 90 max = 270 }
			orbit_distance = 5
		}
	}

	planet = {
		count = { min = 0 max = 2 }
		orbit_angle = { min = 90 max = 270 }
		orbit_distance = 20
	}
}