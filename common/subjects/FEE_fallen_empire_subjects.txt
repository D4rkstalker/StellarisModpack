#--
#--		--------------------------- --------------------------- --------------------------- ---------------------------
#--		Fallen Empire Expanded - Controller for Fallen Empire Subjects
#--		--------------------------- --------------------------- --------------------------- ---------------------------
#--
#--		PREFACE
#--		�	This file handles new custom subject types for Fallen Empires Expanded.
#--		�	Subjects are dependents to their fallen empire overlords.
#--		�	This files adds new subject types for their corresponding custom ethos fallen empires.
#--
#--		SUBJECT TYPES
#--		�	Puppet - Fanatic Militarist
#--		�	Feeding Thrall - Hive Mind
#--		�	Proxy - Fanatic Pacifist
#--
#--		--------------------------- --------------------------- --------------------------- ---------------------------
#--


puppet = {
	can_expand = yes
	can_be_integrated = yse
	joins_overlord_wars = yes
	calls_overlord_to_war = no
	can_do_diplomacy = yes
	gets_sensor = no

	diplo_threat = 0.75

	subject_tax_rate = {
		minerals = 0.35
		energy = 0.35
	}

	potential = {
		is_country_type = default
		from = {
			is_fallen_empire = yes
			has_ethic = ethic_fanatic_militarist
		}
	}

	effect = {
		if = {
			limit = {
				has_global_flag = war_in_heaven_ongoing
			}
			join_war = from
		}
		if = {
			limit = { has_ethic = "ethic_fanatic_materialist" }
			country_remove_ethic = "ethic_fanatic_materialist"
		}
		if = {
			limit = { has_ethic = "ethic_materialist" }
			country_remove_ethic = "ethic_materialist"
		}
		if = {
			limit = { has_ethic = "ethic_fanatic_egalitarian" }
			country_remove_ethic = "ethic_fanatic_egalitarian"
		}
		if = {
			limit = { has_ethic = "ethic_egalitarian" }
			country_remove_ethic = "ethic_egalitarian"
		}
		if = {
			limit = { has_ethic = "ethic_fanatic_pacifist" }
			country_remove_ethic = "ethic_fanatic_pacifist"
		}
		if = {
			limit = { has_ethic = "ethic_pacifist" }
			country_remove_ethic = "ethic_pacifist"
		}
		if = {
			limit = { has_ethic = "ethic_fanatic_militarist" }
			country_remove_ethic = "ethic_fanatic_militarist"
		}
		if = {
			limit = { has_ethic = "ethic_militarist" }
			country_remove_ethic = "ethic_militarist"
		}
		if = {
			limit = { has_ethic = "ethic_fanatic_xenophile" }
			country_remove_ethic = "ethic_fanatic_xenophile"
		}
		if = {
			limit = { has_ethic = "ethic_xenophile" }
			country_remove_ethic = "ethic_xenophile"
		}
		if = {
			limit = { has_ethic = "ethic_fanatic_xenophobe" }
			country_remove_ethic = "ethic_fanatic_xenophobe"
		}
		if = {
			limit = { has_ethic = "ethic_xenophobe" }
			country_remove_ethic = "ethic_xenophobe"
		}
		if = {
			limit = { has_ethic = "ethic_fanatic_spiritualist" }
			country_remove_ethic = "ethic_fanatic_spiritualist"
		}
		if = {
			limit = { has_ethic = "ethic_spiritualist" }
			country_remove_ethic = "ethic_spiritualist"
		}
		#if = {
		#	limit = { has_ethic = "ethic_fanatic_authoritarian" }
		#	country_remove_ethic = "ethic_fanatic_authoritarian"
		#}
		#if = {
		#	limit = { has_ethic = "ethic_authoritarian" }
		#	country_remove_ethic = "ethic_authoritarian"
		#}
		country_add_ethic = "ethic_fanatic_militarist"
		change_government = {
			authority = auth_imperial
			civics = {
				civic = civic_warrior_culture
				civic = civic_distinguished_admiralty
			}
		}
	}
}


feedthrall = {
	can_expand = yes
	can_be_integrated = yse
	joins_overlord_wars = no
	calls_overlord_to_war = no
	can_do_diplomacy = yes
	gets_access = yes

	diplo_threat = 0.75

	subject_tax_rate = {
		food = 0.40
		energy = 0.15
	}

	potential = {
		is_country_type = default
		from = {
			is_country_type = awakened_fallen_empire
			has_authority = auth_hive_mind
		}
	}

	effect = {
		if = {
			limit = {
				has_global_flag = war_in_heaven_ongoing
			}
			join_war = from
		}
		set_country_flag = fallen_empire_hive_feed_thrall
	}
}

holy_order = {
	can_expand = no
	can_be_integrated = yse
	joins_overlord_wars = no
	calls_overlord_to_war = no
	can_do_diplomacy = yes
	
	diplo_threat = 1.25
	
	gets_access = yes
	
}