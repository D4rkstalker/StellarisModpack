@resolution_weight_hated = 3
@resolution_weight_disliked = 4
@resolution_weight_unpopular = 5
@resolution_weight_normal = 6
@resolution_weight_popular = 6.5
@resolution_weight_liked = 6.5
@resolution_weight_loved = 7

@resolution_cost_t1 = 100
@resolution_cost_t2 = 150
@resolution_cost_t3 = 200
@resolution_cost_t4 = 250
@resolution_cost_t5 = 300
@resolution_cost_t6 = 500
@resolution_cost_denounce = 25

@resolution_flag_timer = 360


#NEW - AUTHORITARIAN - STRATIFICATION

#Politics and Culture category

# Modified & improved by Ever Universe


resolution_stratification_repeal_1 = {
	icon = "GFX_resolution_council_veto"			#this is the purple repeal icon

	resources = {
		category = resolutions
		cost = {
			influence = @resolution_cost_t1
		}
	}
	target = no
	fire_and_forget = yes
	effect = {
		custom_tooltip = resolution_stratification_repeal_1_effect_success
		hidden_effect = {
			cancel_resolution = "resolution_enlightened_despotism"
			set_timed_country_flag = { flag = galactic_community_resolution_passed_gce_stratification_repeal days = @resolution_flag_timer }
			add_modifier = {
				modifier = resolution_passed_diplomatic_weight
				days = 2200
			}
		}
	}

	fail_effects = {
		hidden_effect = {
			set_timed_country_flag = { flag = galactic_community_resolution_failed_gce_stratification_repeal days = @resolution_flag_timer }
			add_modifier = {
				modifier = resolution_failed_diplomatic_weight
				days = 2200
			}
		}
	}

	potential = {
		is_active_resolution = "resolution_enlightened_despotism"
	}

	allow = {}

	ai_weight = {
		weight = @resolution_weight_disliked

		modifier = {
			factor = 1.25
			is_egalitarian = yes
			desc = ethic_egalitarian
		}

		modifier = {
			factor = 0.75
			OR = {
				has_valid_civic = civic_aristocratic_elite
				has_valid_civic = civic_police_state
				has_valid_civic = civic_pleasure_seekers
			}
			desc = gal_com_opposing_civics
		}

		modifier = {
			factor = 1.1
			OR = {
				has_valid_civic = civic_agrarian_idyll
				has_valid_civic = civic_free_haven
				has_valid_civic = civic_idealistic_foundation
				has_valid_civic = civic_inwards_perfection
				has_valid_civic = civic_machine_servitor
				has_valid_civic = civic_shared_burden
			}
			desc = gal_com_supporting_civics
		}

		modifier = {
			factor = 0.25
			is_authoritarian = yes
			desc = ethic_authoritarian
		}

		modifier = {
			factor = 0.5
			OR = {
				has_valid_civic = civic_slaver_guilds
				has_valid_civic = civic_indentured_assets
			}
			desc = gal_com_slaver_empire
		}
	}
}

resolution_stratification_repeal_2 = {
	icon = "GFX_resolution_council_veto"

	resources = {
		category = resolutions
		cost = {
			influence = @resolution_cost_t2
		}
	}
	target = no
	fire_and_forget = yes
	effect = {
		custom_tooltip = resolution_stratification_repeal_2_effect_success
	
		hidden_effect = {
			cancel_resolution = "resolution_a_proper_place"
			
			set_timed_country_flag = { flag = galactic_community_resolution_passed_gce_stratification_repeal days = @resolution_flag_timer }
			add_modifier = {
				modifier = resolution_passed_diplomatic_weight
				days = 2200
			}
		}
	}

	fail_effects = {
		hidden_effect = {
			set_timed_country_flag = { flag = galactic_community_resolution_failed_gce_stratification_repeal days = @resolution_flag_timer }
			add_modifier = {
				modifier = resolution_failed_diplomatic_weight
				days = 2200
			}
		}
	}

	potential = {
		is_active_resolution = "resolution_a_proper_place"
	}

	modifier = {
		resolution_enlightened_despotism = 1
	}

	allow = {}

	ai_weight = {
		weight = @resolution_weight_unpopular

		modifier = {
			factor = 1.4
			is_egalitarian = yes
			desc = ethic_egalitarian
		}

		modifier = {
			factor = 0.75
			OR = {
				has_valid_civic = civic_aristocratic_elite
				has_valid_civic = civic_police_state
				has_valid_civic = civic_pleasure_seekers
			}
			desc = gal_com_opposing_civics
		}

		modifier = {
			factor = 1.2
			OR = {
				has_valid_civic = civic_agrarian_idyll
				has_valid_civic = civic_free_haven
				has_valid_civic = civic_idealistic_foundation
				has_valid_civic = civic_inwards_perfection
				has_valid_civic = civic_machine_servitor
				has_valid_civic = civic_shared_burden
			}
			desc = gal_com_supporting_civics
		}

		modifier = {
			factor = 0.25
			is_authoritarian = yes
			desc = ethic_authoritarian
		}

		modifier = {
			factor = 0.5
			OR = {
				has_valid_civic = civic_slaver_guilds
				has_valid_civic = civic_indentured_assets
			}
			desc = gal_com_slaver_empire
		}
	}
}

resolution_stratification_repeal_3 = {
	icon = "GFX_resolution_council_veto"

	resources = {
		category = resolutions
		cost = {
			influence = @resolution_cost_t3
		}
	}
	target = no
	fire_and_forget = yes
	effect = {
		custom_tooltip = resolution_stratification_repeal_3_effect_success
	
		hidden_effect = {
			cancel_resolution = "resolution_natural_hierarchy"
			
			set_timed_country_flag = { flag = galactic_community_resolution_passed_gce_stratification_repeal days = @resolution_flag_timer }
			add_modifier = {
				modifier = resolution_passed_diplomatic_weight
				days = 2200
			}
		}
	}
	
	fail_effects = {
		hidden_effect = {
			set_timed_country_flag = { flag = galactic_community_resolution_failed_gce_stratification_repeal days = @resolution_flag_timer }
			add_modifier = {
				modifier = resolution_failed_diplomatic_weight
				days = 2200
			}
		}
	}	
	
	potential = {
		is_active_resolution = "resolution_natural_hierarchy"
	}

	modifier = {
		resolution_enlightened_despotism = 1
		resolution_a_proper_place = 1
	}

	allow = {}

	ai_weight = {
		weight = @resolution_weight_normal

		modifier = {
			factor = 1.5
			is_egalitarian = yes
			desc = ethic_egalitarian
		}

		modifier = {
			factor = 0.75
			OR = {
				has_valid_civic = civic_aristocratic_elite
				has_valid_civic = civic_police_state
				has_valid_civic = civic_pleasure_seekers
			}
			desc = gal_com_opposing_civics
		}

		modifier = {
			factor = 1.25
			OR = {
				has_valid_civic = civic_agrarian_idyll
				has_valid_civic = civic_free_haven
				has_valid_civic = civic_idealistic_foundation
				has_valid_civic = civic_inwards_perfection
				has_valid_civic = civic_machine_servitor
				has_valid_civic = civic_shared_burden
			}
			desc = gal_com_supporting_civics
		}

		modifier = {
			factor = 0.25
			is_authoritarian = yes
			desc = ethic_authoritarian
		}

		modifier = {
			factor = 0.5
			OR = {
				has_valid_civic = civic_slaver_guilds
				has_valid_civic = civic_indentured_assets
			}
			desc = gal_com_slaver_empire
		}

		modifier = {
			factor = 5
			in_breach_of = resolution_natural_hierarchy
			NOT = { has_ethic = ethic_fanatic_authoritarian } 
			desc = gal_com_in_breach_of_proposed_resolution
		}

		modifier = {
			factor = 1.1
			is_authoritarian = no
			is_gestalt = no
			desc = not_authoritarian_eu
		}
	}
}

resolution_stratification_repeal_4 = {
	icon = "GFX_resolution_council_veto"

	resources = {
		category = resolutions
		cost = {
			influence = @resolution_cost_t4
		}
	}
	target = no
	fire_and_forget = yes
	effect = {
		custom_tooltip = resolution_stratification_repeal_4_effect_success
	
		hidden_effect = {
			cancel_resolution = "resolution_superior_deference"
			
			set_timed_country_flag = { flag = galactic_community_resolution_passed_gce_stratification_repeal days = @resolution_flag_timer }
			add_modifier = {
				modifier = resolution_passed_diplomatic_weight
				days = 2200
			}
		}
	}

	fail_effects = {
		hidden_effect = {
			set_timed_country_flag = { flag = galactic_community_resolution_failed_gce_stratification_repeal days = @resolution_flag_timer }
			add_modifier = {
				modifier = resolution_failed_diplomatic_weight
				days = 2200
			}
		}
	}

	potential = {
		has_federations_dlc = yes
		is_active_resolution = "resolution_superior_deference"
	}

	modifier = {
		resolution_enlightened_despotism = 1
		resolution_a_proper_place = 1
		resolution_natural_hierarchy = 1
	}

	allow = {}

	ai_weight = {
		weight = @resolution_weight_normal

		modifier = {
			factor = 5
			in_breach_of = resolution_superior_deference
			NOT = { has_ethic = ethic_fanatic_authoritarian }
			desc = gal_com_in_breach_of_proposed_resolution
		}

		modifier = {
			factor = 2
			is_egalitarian = yes
			desc = ethic_egalitarian
		}

		modifier = {
			factor = 0.75
			OR = {
				has_valid_civic = civic_aristocratic_elite
				has_valid_civic = civic_police_state
				has_valid_civic = civic_pleasure_seekers
			}
			desc = gal_com_opposing_civics
		}

		modifier = {
			factor = 1.25
			OR = {
				has_valid_civic = civic_agrarian_idyll
				has_valid_civic = civic_free_haven
				has_valid_civic = civic_idealistic_foundation
				has_valid_civic = civic_inwards_perfection
				has_valid_civic = civic_machine_servitor
				has_valid_civic = civic_shared_burden
			}
			desc = gal_com_supporting_civics
		}

		modifier = {
			factor = 0.25
			is_authoritarian = yes
			is_xenophile = no
			desc = ethic_authoritarian
		}

		modifier = {
			factor = 1.4
			is_xenophile = yes
			desc = ethic_xenophile
		}

		modifier = {
			factor = 0.5
			OR = {
				has_valid_civic = civic_slaver_guilds
				has_valid_civic = civic_indentured_assets
			}
			desc = gal_com_slaver_empire
		}

		modifier = {
			factor = 1.25
			is_authoritarian = no
			is_gestalt = no
			desc = not_authoritarian_eu
		}
	}
}

resolution_stratification_repeal_5 = {
	icon = "GFX_resolution_council_veto"

	resources = {
		category = resolutions
		cost = {
			influence = @resolution_cost_t5
		}
	}
	target = no
	fire_and_forget = yes
	effect = {
		custom_tooltip = resolution_stratification_repeal_5_effect_success
	
		hidden_effect = {
			cancel_resolution = "resolution_a_whiff_of_grapeshot"
			
			set_timed_country_flag = { flag = galactic_community_resolution_passed_gce_stratification_repeal days = @resolution_flag_timer }
			add_modifier = {
				modifier = resolution_passed_diplomatic_weight
				days = 2200
			}
		}
	}

	fail_effects = {
		hidden_effect = {
			set_timed_country_flag = { flag = galactic_community_resolution_failed_gce_stratification_repeal days = @resolution_flag_timer }
			add_modifier = {
				modifier = resolution_failed_diplomatic_weight
				days = 2200
			}
		}
	}

	potential = {
		has_federations_dlc = yes
		is_active_resolution = "resolution_a_whiff_of_grapeshot"
	}

	modifier = {
		resolution_enlightened_despotism = 1
		resolution_a_proper_place = 1
		resolution_natural_hierarchy = 1
		resolution_superior_deference = 1
	}

	allow = {}

	ai_weight = {
		weight = @resolution_weight_popular

		modifier = {
			factor = 5
			in_breach_of = resolution_a_whiff_of_grapeshot
			NOT = { has_ethic = ethic_fanatic_authoritarian }
			desc = gal_com_in_breach_of_proposed_resolution
		}

		modifier = {
			factor = 2
			is_egalitarian = yes
			desc = ethic_egalitarian
		}

		modifier = {
			factor = 0.75
			OR = {
				has_valid_civic = civic_aristocratic_elite
				has_valid_civic = civic_police_state
				has_valid_civic = civic_pleasure_seekers
			}
			desc = gal_com_opposing_civics
		}

		modifier = {
			factor = 1.25
			OR = {
				has_valid_civic = civic_agrarian_idyll
				has_valid_civic = civic_free_haven
				has_valid_civic = civic_idealistic_foundation
				has_valid_civic = civic_inwards_perfection
				has_valid_civic = civic_machine_servitor
				has_valid_civic = civic_shared_burden
			}
			desc = gal_com_supporting_civics
		}

		modifier = {
			factor = 0.25
			is_authoritarian = yes
			is_xenophile = no
			desc = ethic_authoritarian
		}

		modifier = {
			factor = 1.4
			is_xenophile = yes
			desc = ethic_xenophile
		}

		modifier = {
			factor = 0.5
			OR = {
				has_valid_civic = civic_slaver_guilds
				has_valid_civic = civic_indentured_assets
			}
			desc = gal_com_slaver_empire
		}

		modifier = {
			factor = 1.4
			is_authoritarian = no
			is_gestalt = no
			desc = not_authoritarian_eu
		}
	}
}

resolution_stratification_repeal_6 = {
	icon = "GFX_resolution_council_veto"

	resources = {
		category = resolutions
		cost = {
			influence = @resolution_cost_t6
		}
	}
	target = no
	fire_and_forget = yes
	effect = {
		custom_tooltip = resolution_stratification_repeal_6_effect_success
	
		hidden_effect = {
			cancel_resolution = "resolution_let_them_eat_cake"
			
			set_timed_country_flag = { flag = galactic_community_resolution_passed_gce_stratification_repeal days = @resolution_flag_timer }
			add_modifier = {
				modifier = resolution_passed_diplomatic_weight
				days = 2200
			}
		}
	}
	
	fail_effects = {
		hidden_effect = {
			set_timed_country_flag = { flag = galactic_community_resolution_failed_gce_stratification_repeal days = @resolution_flag_timer }
			add_modifier = {
				modifier = resolution_failed_diplomatic_weight
				days = 2200
			}
		}
	}

	potential = {
		has_federations_dlc = yes
		is_active_resolution = "resolution_let_them_eat_cake"
	}

	modifier = {
		resolution_enlightened_despotism = 1
		resolution_a_proper_place = 1
		resolution_natural_hierarchy = 1
		resolution_superior_deference = 1
		resolution_a_whiff_of_grapeshot = 1
	}

	allow = {}

	ai_weight = {
		weight = @resolution_weight_popular

		modifier = {
			factor = 5
			in_breach_of = resolution_let_them_eat_cake
			NOT = { has_ethic = ethic_fanatic_authoritarian }
			desc = gal_com_in_breach_of_proposed_resolution
		}

		modifier = {
			factor = 2
			is_egalitarian = yes
			desc = ethic_egalitarian
		}

		modifier = {
			factor = 0.75
			OR = {
				has_valid_civic = civic_aristocratic_elite
				has_valid_civic = civic_police_state
				has_valid_civic = civic_pleasure_seekers
			}
			desc = gal_com_opposing_civics
		}

		modifier = {
			factor = 1.25
			OR = {
				has_valid_civic = civic_agrarian_idyll
				has_valid_civic = civic_free_haven
				has_valid_civic = civic_idealistic_foundation
				has_valid_civic = civic_inwards_perfection
				has_valid_civic = civic_machine_servitor
				has_valid_civic = civic_shared_burden
			}
			desc = gal_com_supporting_civics
		}

		modifier = {
			factor = 0.25
			is_authoritarian = yes
			is_xenophile = no
			desc = ethic_authoritarian
		}

		modifier = {
			factor = 1.4
			is_xenophile = yes
			desc = ethic_xenophile
		}

		modifier = {
			factor = 0.5
			OR = {
				has_valid_civic = civic_slaver_guilds
				has_valid_civic = civic_indentured_assets
			}
			desc = gal_com_slaver_empire
		}

		modifier = {
			factor = 1.6
			is_authoritarian = no
			is_gestalt = no
			desc = not_authoritarian_eu
		}
	}
}

resolution_enlightened_despotism = {
	icon = "GFX_resolution_gce_stratification"

	resources = {
		category = resolutions
		cost = {
			influence = @resolution_cost_t1
		}
	}
	target = no
	level = 1

	modifier = {
		resolution_enlightened_despotism = 1
	}

	effect = {
		hidden_effect = {
			set_global_flag = galactic_community_resolution_passed
			
			set_timed_country_flag = { flag = galactic_community_resolution_passed_gce_stratification days = @resolution_flag_timer }
			add_modifier = {
				modifier = resolution_passed_diplomatic_weight
				days = 2200
			}
		}
	}
	
	fail_effects = {
		hidden_effect = {
			set_timed_country_flag = { flag = galactic_community_resolution_failed_gce_stratification days = @resolution_flag_timer }
			add_modifier = {
				modifier = resolution_failed_diplomatic_weight
				days = 2200
			}
		}
	}
	
	
	allow = {
		custom_tooltip = {
			fail_text = "resolution_already_active"
			NOR = {		
				is_active_resolution = "resolution_enlightened_despotism"
				is_active_resolution = "resolution_a_proper_place"
				is_active_resolution = "resolution_natural_hierarchy"
				is_active_resolution = "resolution_superior_deference"
				is_active_resolution = "resolution_a_whiff_of_grapeshot"
				is_active_resolution = "resolution_let_them_eat_cake"
			}
		}
	}

	ai_weight = {
		weight = @resolution_weight_popular

		modifier = {
			factor = 0.75
			is_egalitarian = yes
			desc = ethic_egalitarian
		}

		modifier = {
			factor = 1.25
			OR = {
				has_valid_civic = civic_aristocratic_elite
				has_valid_civic = civic_police_state
				has_valid_civic = civic_pleasure_seekers
			}
			desc = gal_com_supporting_civics
		}

		modifier = {
			factor = 0.9
			OR = {
				has_valid_civic = civic_agrarian_idyll
				has_valid_civic = civic_free_haven
				has_valid_civic = civic_idealistic_foundation
				has_valid_civic = civic_inwards_perfection
				has_valid_civic = civic_machine_servitor
				has_valid_civic = civic_shared_burden
			}
			desc = gal_com_opposing_civics
		}

		modifier = {
			factor = 2
			has_ethic = ethic_authoritarian
			desc = ethic_authoritarian
		}

		modifier = {
			factor = 4
			OR = {
				has_valid_civic = civic_slaver_guilds
				has_valid_civic = civic_indentured_assets
			}
			desc = gal_com_slaver_empire
		}

		modifier = {
			factor = 3
			has_ethic = ethic_fanatic_authoritarian
			desc = ethic_fanatic_authoritarian
		}
	}
}

resolution_a_proper_place = {
	icon = "GFX_resolution_gce_stratification"

	resources = {
		category = resolutions
		cost = {
			influence = @resolution_cost_t2
		}
	}
	target = no
	level = 2

	effect = {
		hidden_effect = {			
			set_timed_country_flag = { flag = galactic_community_resolution_passed_gce_stratification days = @resolution_flag_timer }
			add_modifier = {
				modifier = resolution_passed_diplomatic_weight
				days = 2200
			}
		}
	}
	
	fail_effects = {
		hidden_effect = {
			set_timed_country_flag = { flag = galactic_community_resolution_failed_gce_stratification days = @resolution_flag_timer }
			add_modifier = {
				modifier = resolution_failed_diplomatic_weight
				days = 2200
			}
		}
	}

	modifier = {
		resolution_enlightened_despotism = 1
		resolution_a_proper_place = 1
	}

	triggered_modifier = {
		potential = {
			is_authoritarian = no
		}
		modifier = {
			authoritarian_attraction_NGS = 1
		}
	}

	allow = {
		is_active_resolution = "resolution_enlightened_despotism"
	}

	ai_weight = {
		weight = @resolution_weight_normal

		modifier = {
			factor = 0.6
			is_egalitarian = yes
			desc = ethic_egalitarian
		}

		modifier = {
			factor = 1.25
			OR = {
				has_valid_civic = civic_aristocratic_elite
				has_valid_civic = civic_police_state
				has_valid_civic = civic_pleasure_seekers
			}
			desc = gal_com_supporting_civics
		}

		modifier = {
			factor = 0.8
			OR = {
				has_valid_civic = civic_agrarian_idyll
				has_valid_civic = civic_free_haven
				has_valid_civic = civic_idealistic_foundation
				has_valid_civic = civic_inwards_perfection
				has_valid_civic = civic_machine_servitor
				has_valid_civic = civic_shared_burden
			}
			desc = gal_com_opposing_civics
		}

		modifier = {
			factor = 2
			has_ethic = ethic_authoritarian
			desc = ethic_authoritarian
		}

		modifier = {
			factor = 4
			OR = {
				has_valid_civic = civic_slaver_guilds
				has_valid_civic = civic_indentured_assets
			}
			desc = gal_com_slaver_empire
		}

		modifier = {
			factor = 3
			has_ethic = ethic_fanatic_authoritarian
			desc = ethic_fanatic_authoritarian
		}
	}
}

resolution_natural_hierarchy = {
	icon = "GFX_resolution_gce_stratification"

	resources = {
		category = resolutions
		cost = {
			influence = @resolution_cost_t3
		}
	}
	target = no
	level = 3

	modifier = {
		resolution_enlightened_despotism = 1
		resolution_a_proper_place = 1
		resolution_natural_hierarchy = 1
	}

	triggered_modifier = {
		potential = {
			is_authoritarian = no
		}
		modifier = {
			authoritarian_attraction_NGS = 2
		}
	}

	effect = {
		custom_tooltip = resolution_natural_hierarchy_effect
		hidden_effect = {
			set_global_flag = resolution_with_breach_effect_passed
			set_timed_country_flag = { flag = galactic_community_resolution_passed_gce_stratification days = @resolution_flag_timer }
			add_modifier = {
				modifier = resolution_passed_diplomatic_weight
				days = 2200
			}
			every_playable_country = {
				limit = {
					is_galactic_community_member = yes
					is_gestalt = no
					in_breach_of = resolution_natural_hierarchy
				}
				country_event = { id = everuniverse.10000 }
			}
		}
	}
	
	fail_effects = {
		hidden_effect = {
			set_timed_country_flag = { flag = galactic_community_resolution_failed_gce_stratification days = @resolution_flag_timer }
			add_modifier = {
				modifier = resolution_failed_diplomatic_weight
				days = 2200
			}
		}
	}

	allow = {
		is_active_resolution = "resolution_a_proper_place"
		NOR = { 
			is_active_resolution = "resolution_greatergood_balance_in_the_middle" 
			is_active_resolution = "resolution_greatergood_universal_prosperity_mandate"
			is_active_resolution = "resolution_greatergood_6"
		}
	}

	breach = {
		AND = {
            NOT = { has_country_flag = constitutional_immunity }
			is_gestalt = no
			any_owned_species = {
				is_sapient = yes
				OR = {
					has_living_standard = { type = living_standard_shared_burden country = prev }
					has_living_standard = { type = living_standard_utopian country = prev }
				}
			}
		}
	}

	ai_weight = {
		weight = @resolution_weight_normal

		modifier = {
			factor = 0
			in_breach_of = resolution_natural_hierarchy
			NOT = { has_ethic = ethic_fanatic_authoritarian }
			desc = gal_com_in_breach_of_proposed_resolution
		}

		modifier = {
			factor = 0.5
			is_egalitarian = yes
			desc = ethic_egalitarian
		}

		modifier = {
			factor = 1.25
			OR = {
				has_valid_civic = civic_aristocratic_elite
				has_valid_civic = civic_police_state
				has_valid_civic = civic_pleasure_seekers
			}
			desc = gal_com_supporting_civics
		}

		modifier = {
			factor = 0.75
			OR = {
				has_valid_civic = civic_agrarian_idyll
				has_valid_civic = civic_free_haven
				has_valid_civic = civic_idealistic_foundation
				has_valid_civic = civic_inwards_perfection
				has_valid_civic = civic_machine_servitor
				has_valid_civic = civic_shared_burden
			}
			desc = gal_com_opposing_civics
		}

		modifier = {
			factor = 2
			has_ethic = ethic_authoritarian
			desc = ethic_authoritarian
		}

		modifier = {
			factor = 4
			OR = {
				has_valid_civic = civic_slaver_guilds
				has_valid_civic = civic_indentured_assets
			}
			desc = gal_com_slaver_empire
		}

		modifier = {
			factor = 3
			has_ethic = ethic_fanatic_authoritarian
			desc = ethic_fanatic_authoritarian
		}

		modifier = {
			factor = 0.9 #This pisses off specialists
			is_authoritarian = no
			is_gestalt = no
			desc = not_authoritarian_eu
		}
	}
}

resolution_superior_deference = {
	icon = "GFX_resolution_gce_stratification"

	potential = {
		has_federations_dlc = yes
	}

	resources = {
		category = resolutions
		cost = {
			influence = @resolution_cost_t4
		}
	}
	target = no
	level = 4

	modifier = {
		resolution_enlightened_despotism = 1
		resolution_a_proper_place = 1
		resolution_natural_hierarchy = 1
		resolution_superior_deference = 1
	}

	triggered_modifier = {
		potential = {
			is_authoritarian = no
		}
		modifier = {
			authoritarian_attraction_NGS = 4
		}
	}

	triggered_modifier = {
		potential = {
			OR = {
				has_authority = auth_democratic
				has_ethic = ethic_egalitarian
			}
			NOT = { has_ethic = ethic_fanatic_egalitarian }
		}
		modifier = {
			reduced_diplo_weight_normal = 1
		}
	}

	triggered_modifier = {
		potential = {
			has_ethic = ethic_fanatic_egalitarian
		}
		modifier = {
			reduced_diplo_weight_fanatic = 1
		}
	}

	effect = {
		custom_tooltip = resolution_superior_deference_effect
		hidden_effect = {
			#set_global_flag = resolution_with_breach_effect_passed	#covered
			cancel_resolution = resolution_greatergood_greater_than_ourselves
			cancel_resolution = resolution_greatergood_balance_in_the_middle
			cancel_resolution = resolution_greatergood_universal_prosperity_mandate
			cancel_resolution = resolution_greatergood_6
			set_timed_country_flag = { flag = galactic_community_resolution_passed_gce_stratification days = @resolution_flag_timer }
			add_modifier = {
				modifier = resolution_passed_diplomatic_weight
				days = 2200
			}	
			every_playable_country = {
				limit = {
					is_galactic_community_member = yes
					is_gestalt = no
					in_breach_of = resolution_superior_deference
				}
				country_event = { id = everuniverse.10010 }
			}		
		}
	}
	
	fail_effects = {
		hidden_effect = {
			set_timed_country_flag = { flag = galactic_community_resolution_failed_gce_stratification days = @resolution_flag_timer }
			add_modifier = {
				modifier = resolution_failed_diplomatic_weight
				days = 2200
			}
		}
	}
	
	allow = {
		is_active_resolution = "resolution_natural_hierarchy"
	}

	breach = {
		AND = {
            NOT = { has_country_flag = constitutional_immunity }
			is_gestalt = no
			OR = {
				any_owned_species = {
					is_sapient = yes
					OR = {
						has_living_standard = { type = living_standard_shared_burden country = prev }
						has_living_standard = { type = living_standard_utopian country = prev }
						has_living_standard = { type = living_standard_good country = prev }
					}
				}
				has_policy_flag = resettlement_not_allowed
				has_policy_flag = population_controls_not_allowed
			}
		}
	}

	ai_weight = {
		weight = @resolution_weight_unpopular

		modifier = {
			factor = 0
			in_breach_of = resolution_superior_deference
			NOT = { has_ethic = ethic_fanatic_authoritarian }
			desc = gal_com_in_breach_of_proposed_resolution
		}

		modifier = {
			factor = 0.25
			is_egalitarian = yes
			desc = ethic_egalitarian
		}

		modifier = {
			factor = 1.25
			OR = {
				has_valid_civic = civic_aristocratic_elite
				has_valid_civic = civic_police_state
				has_valid_civic = civic_pleasure_seekers
			}
			desc = gal_com_supporting_civics
		}

		modifier = {
			factor = 0.75
			OR = {
				has_valid_civic = civic_agrarian_idyll
				has_valid_civic = civic_free_haven
				has_valid_civic = civic_idealistic_foundation
				has_valid_civic = civic_inwards_perfection
				has_valid_civic = civic_machine_servitor
				has_valid_civic = civic_shared_burden
			}
			desc = gal_com_opposing_civics
		}

		modifier = {
			factor = 2
			has_ethic = ethic_authoritarian
			is_xenophile = no
			desc = ethic_authoritarian
		}

		modifier = {
			factor = 4
			OR = {
				has_valid_civic = civic_slaver_guilds
				has_valid_civic = civic_indentured_assets
			}
			desc = gal_com_slaver_empire
		}

		modifier = {
			factor = 3
			has_ethic = ethic_fanatic_authoritarian
			is_xenophile = no
			desc = ethic_fanatic_authoritarian
		}

		modifier = {
			factor = 0.75 #This pisses off specialists... and makes them BAD
			is_authoritarian = no
			is_gestalt = no
			desc = not_authoritarian_eu
		}
	}
}

resolution_a_whiff_of_grapeshot = {
	icon = "GFX_resolution_gce_stratification"

	potential = {
		has_federations_dlc = yes
	}

	resources = {
		category = resolutions
		cost = {
			influence = @resolution_cost_t5
		}
	}
	target = no
	level = 5

	modifier = {
		resolution_enlightened_despotism = 1
		resolution_a_proper_place = 1
		resolution_natural_hierarchy = 1
		resolution_superior_deference = 1
		resolution_a_whiff_of_grapeshot = 1
	}

	triggered_modifier = {
		potential = {
			is_authoritarian = no
		}
		modifier = {
			authoritarian_attraction_NGS = 7
		}
	}

	triggered_modifier = {
		potential = {
			OR = {
				has_authority = auth_dictatorial
				has_authority = auth_imperial
				has_ethic = "ethic_authoritarian"
			}
			NOT = { has_ethic = "ethic_fanatic_authoritarian" }
		}
		modifier = {
			increased_diplo_weight_normal = 1
		}
	}

	triggered_modifier = {
		potential = {
			has_ethic = "ethic_fanatic_authoritarian"
		}
		modifier = {
			increased_diplo_weight_fanatic = 1
		}
	}

	triggered_modifier = {
		potential = {
			OR = {
				has_authority = auth_democratic
				has_ethic = "ethic_egalitarian"
			}
			NOT = { has_ethic = "ethic_fanatic_egalitarian" }
		}
		modifier = {
			reduced_diplo_weight_normal = 1
		}
	}

	triggered_modifier = {
		potential = {
			has_ethic = "ethic_fanatic_egalitarian"
		}
		modifier = {
			reduced_diplo_weight_fanatic = 1
		}
	}

	effect = {
		custom_tooltip = resolution_a_whiff_of_grapeshot_effect
		hidden_effect = {
			#set_global_flag = resolution_with_breach_effect_passed
			
			set_timed_country_flag = { flag = galactic_community_resolution_passed_gce_stratification days = @resolution_flag_timer }
			add_modifier = {
				modifier = resolution_passed_diplomatic_weight
				days = 2200
			}
			every_playable_country = {
				limit = {
					is_galactic_community_member = yes
					is_gestalt = no
					in_breach_of = resolution_a_whiff_of_grapeshot
				}
				country_event = { id = everuniverse.10020 }
			}
		}
	}

	fail_effects = {
		hidden_effect = {
			set_timed_country_flag = { flag = galactic_community_resolution_failed_gce_stratification days = @resolution_flag_timer }
			add_modifier = {
				modifier = resolution_failed_diplomatic_weight
				days = 2200
			}
		}
	}

	allow = {
		is_active_resolution = "resolution_superior_deference"
		NOR = { 
			is_active_resolution = "resolution_greatergood_balance_in_the_middle" 
			is_active_resolution = "resolution_greatergood_universal_prosperity_mandate"
			is_active_resolution = "resolution_greatergood_6"
		}
	}

	breach = {
		AND = {
            NOT = { has_country_flag = constitutional_immunity }
			is_gestalt = no
            OR = {
				any_owned_species = {
					is_sapient = yes
					OR = {
						has_living_standard = { type = living_standard_shared_burden country = prev }
						has_living_standard = { type = living_standard_utopian country = prev }
						has_living_standard = { type = living_standard_good country = prev }
					}
				}	
				has_authority = auth_democratic
				has_policy_flag = resettlement_not_allowed
				has_policy_flag = population_controls_not_allowed
				has_policy_flag = leader_enhancement_natural_selection
            }
		}
	}

	ai_weight = {
		weight = @resolution_weight_unpopular

		modifier = {
			factor = 0
			in_breach_of = resolution_a_whiff_of_grapeshot
			NOT = { has_ethic = ethic_fanatic_authoritarian }
			desc = gal_com_in_breach_of_proposed_resolution
		}
		
		modifier = {
			factor = 0.25
			is_egalitarian = yes
			desc = ethic_egalitarian
		}

		modifier = {
			factor = 1.25
			OR = {
				has_valid_civic = civic_aristocratic_elite
				has_valid_civic = civic_police_state
				has_valid_civic = civic_pleasure_seekers
			}
			desc = gal_com_supporting_civics
		}

		modifier = {
			factor = 0.75
			OR = {
				has_valid_civic = civic_agrarian_idyll
				has_valid_civic = civic_free_haven
				has_valid_civic = civic_idealistic_foundation
				has_valid_civic = civic_inwards_perfection
				has_valid_civic = civic_machine_servitor
				has_valid_civic = civic_shared_burden
			}
			desc = gal_com_opposing_civics
		}

		modifier = {
			factor = 2
			has_ethic = ethic_authoritarian
			is_xenophile = no
			desc = ethic_authoritarian
		}

		modifier = {
			factor = 4
			OR = {
				has_valid_civic = civic_slaver_guilds
				has_valid_civic = civic_indentured_assets
			}
			desc = gal_com_slaver_empire
		}

		modifier = {
			factor = 3
			has_ethic = ethic_fanatic_authoritarian
			is_xenophile = no
			desc = ethic_fanatic_authoritarian
		}

		modifier = {
			factor = 0.6 #This pisses off specialists... and makes them BAD
			is_authoritarian = no
			is_gestalt = no
			desc = not_authoritarian_eu
		}
	}
}

resolution_let_them_eat_cake = {
	icon = "GFX_resolution_gce_stratification"

	potential = {
		has_federations_dlc = yes
	}

	resources = {
		category = resolutions
		cost = {
			influence = @resolution_cost_t6
		}
	}
	target = no
	level = 6

	modifier = {
		resolution_enlightened_despotism = 1
		resolution_a_proper_place = 1
		resolution_natural_hierarchy = 1
		resolution_superior_deference = 1
		resolution_a_whiff_of_grapeshot = 1
		resolution_let_them_eat_cake = 1
	}

	triggered_modifier = {
		potential = {
			is_authoritarian = no
		}
		modifier = {
			authoritarian_attraction_NGS = 10
		}
	}

	effect = {
		custom_tooltip = resolution_let_them_eat_cake_effect
		hidden_effect = {
			#set_global_flag = resolution_with_breach_effect_passed
			
			set_timed_country_flag = { flag = galactic_community_resolution_passed_gce_stratification days = @resolution_flag_timer }
			add_modifier = {
				modifier = resolution_passed_diplomatic_weight
				days = 2200
			}
			every_playable_country = {
				limit = {
					is_galactic_community_member = yes
					is_gestalt = no
					in_breach_of = resolution_let_them_eat_cake
				}
				country_event = { id = everuniverse.10030 }
			}
		}
	}

	triggered_modifier = {
		potential = {
			OR = {
				has_authority = auth_dictatorial
				has_authority = auth_imperial
				has_ethic = "ethic_authoritarian"
			}
			NOT = { has_ethic = "ethic_fanatic_authoritarian" }
		}
		modifier = {
			increased_diplo_weight_normal = 1
		}
	}

	triggered_modifier = {
		potential = {
			has_ethic = "ethic_fanatic_authoritarian"
		}
		modifier = {
			increased_diplo_weight_fanatic = 1
		}
	}

	triggered_modifier = {
		potential = {
			OR = {
				has_authority = auth_democratic
				has_ethic = "ethic_egalitarian"
			}
			NOT = { has_ethic = "ethic_fanatic_egalitarian" }
		}
		modifier = {
			reduced_diplo_weight_normal = 1
		}
	}

	triggered_modifier = {
		potential = {
			has_ethic = "ethic_fanatic_egalitarian"
		}
		modifier = {
			reduced_diplo_weight_fanatic = 1
		}
	}
	
	fail_effects = {
		hidden_effect = {
			set_timed_country_flag = { flag = galactic_community_resolution_failed_gce_stratification days = @resolution_flag_timer }
			add_modifier = {
				modifier = resolution_failed_diplomatic_weight
				days = 2200
			}
		}
	}

	allow = {
		is_active_resolution = "resolution_a_whiff_of_grapeshot"
		NOR = { 
			is_active_resolution = "resolution_greatergood_greater_than_ourselves"
			is_active_resolution = "resolution_greatergood_balance_in_the_middle" 
			is_active_resolution = "resolution_greatergood_universal_prosperity_mandate"
			is_active_resolution = "resolution_greatergood_6"
		}
	}

	breach = {
		AND = {
			is_gestalt = no
            OR = {
				any_owned_species = {
					is_sapient = yes
					OR = {
						has_living_standard = { type = living_standard_shared_burden country = prev }
						has_living_standard = { type = living_standard_utopian country = prev }
						has_living_standard = { type = living_standard_good country = prev }
						AND = {
							has_living_standard = { type = living_standard_normal country = prev }
							NOT = { has_citizenship_type = { type = citizenship_slavery country = prev } }
						}
					}
				}
				has_authority = auth_democratic
            	has_authority = auth_oligarchic
				has_policy_flag = resettlement_not_allowed
				has_policy_flag = population_controls_not_allowed
				has_policy_flag = leader_enhancement_natural_selection
            }
		}
        NOT = { has_country_flag = constitutional_immunity }
	}

	ai_weight = {
		weight = @resolution_weight_disliked

		modifier = {
			factor = 0
			in_breach_of = resolution_let_them_eat_cake
			NOT = { has_ethic = ethic_fanatic_authoritarian }
			desc = gal_com_in_breach_of_proposed_resolution
		}

		modifier = {
			factor = 0.25
			is_egalitarian = yes
			desc = ethic_egalitarian
		}

		modifier = {
			factor = 1.25
			OR = {
				has_valid_civic = civic_aristocratic_elite
				has_valid_civic = civic_police_state
				has_valid_civic = civic_pleasure_seekers
			}
			desc = gal_com_supporting_civics
		}

		modifier = {
			factor = 0.75
			OR = {
				has_valid_civic = civic_agrarian_idyll
				has_valid_civic = civic_free_haven
				has_valid_civic = civic_idealistic_foundation
				has_valid_civic = civic_inwards_perfection
				has_valid_civic = civic_machine_servitor
				has_valid_civic = civic_shared_burden
			}
			desc = gal_com_opposing_civics
		}

		modifier = {
			factor = 2
			has_ethic = ethic_authoritarian
			is_xenophile = no
			desc = ethic_authoritarian
		}

		modifier = {
			factor = 4
			OR = {
				has_valid_civic = civic_slaver_guilds
				has_valid_civic = civic_indentured_assets
			}
			desc = gal_com_slaver_empire
		}

		modifier = {
			factor = 3
			has_ethic = ethic_fanatic_authoritarian
			is_xenophile = no
			desc = ethic_fanatic_authoritarian
		}

		modifier = {
			factor = 0.4 #This pisses off specialists... and makes them BAD
			is_authoritarian = no
			is_gestalt = no
			desc = not_authoritarian_eu
		}
	}
}