@resolution_weight_hated = 3
@resolution_weight_disliked = 4
@resolution_weight_unpopular = 5
@resolution_weight_normal = 6
@resolution_weight_popular = 6.5
@resolution_weight_loved = 7

@resolution_cost_t1 = 100
@resolution_cost_t2 = 150
@resolution_cost_t3 = 200
@resolution_cost_t4 = 250
@resolution_cost_t5 = 300
@resolution_cost_denounce = 25

@resolution_flag_timer = 360
#example_resolution = {
#	icon = "name of the icon key"
#	resources = {} # cost and category
#	target = yes/no # if this resolution requires a target country
#	harmful = yes/no # if the AI should consider this harmful when choosing target
#	modifier = {} # modifier to be applied to all community members if passed
#	triggered_modifier = {} # triggered modifier to be applied, scope is country
#	effect = {} # effect to be applied if passed, scope is proposer unless there is a target country - then scope is target country, with proposer in from scope
#	fail_effects = {} # effect to be applied if failed, scope is proposer unless there is a target country - then scope is target country, with proposer in from scope
#	potential = {} # potential trigger, scope is country
#	allow = {} # allow trigger, scope is country
#	ai_weight = {} # ai weight modifiers, scope is country
#	valid_target = {} # valid targets trigger, scope is country
#}

# NOTE: Remember to add Resolutions to a Resolution Category!

#rewards for fighting the sleeper
resolution_sleeper_strikes = {
	icon = "GFX_resolution_mutual_defense"

	resources = {
		category = resolutions
		cost = {
			influence = @resolution_cost_t1
		}
	}
	target = no

	effect = {
		custom_tooltip = resolution_sleeper_strikes_effect
		hidden_effect = {
			set_timed_country_flag = { flag = galactic_community_resolution_passed_general days = @resolution_flag_timer }
			add_modifier = {
				modifier = resolution_passed_diplomatic_weight
				days = 2200
			}
			every_playable_country = {
				limit = { 
					has_modifier = sleeper_aggressor_marker
					NOT = { has_modifier = sleeper_aggressor_reward }
				}
				add_modifier = { modifier = sleeper_aggressor_reward days = -1 }
				remove_modifier = sleeper_aggressor_sanctions
			}
		}
	}

	fail_effects = {
		hidden_effect = {
			set_timed_country_flag = { flag = galactic_community_resolution_failed_general days = @resolution_flag_timer }
			add_modifier = {
				modifier = resolution_failed_diplomatic_weight
				days = 2200
			}
		}
	}

	potential = {
		NOR = {
			has_global_flag = sleeper_berserker_ongoing
			has_global_flag = sleeper_true_awakening_happened
			has_global_flag = sleeper_dead
		}
		is_homicidal = no
	}

	allow = {
		NOT = {
			is_active_resolution = resolution_sleeper_sanctions
		}
	}

	active = { # Resolution only in effect while this trigger is met
		NOR = {
			has_global_flag = sleeper_berserker_ongoing
			has_global_flag = sleeper_true_awakening_happened
			has_global_flag = sleeper_dead
		}
	}

	ai_weight = {
		weight = @resolution_weight_unpopular

		modifier = {
			factor = 0
			any_neighbor_country = {
				is_country_type = the_sleeper_fallen
			}
			#is_militarist = no
			is_xenophobe = no
			NOT = { has_ascension_perk = ap_defender_of_the_galaxy }
		}

		modifier = {
			factor = 0.2
			OR = {
				has_ai_personality = xenophobic_isolationists
				has_valid_civic = civic_environmentalist
				has_valid_civic = civic_hive_empath
			}
		}

		modifier = {
			factor = 2
			is_militarist = yes
			NOT = { any_neighbor_country = { is_country_type = the_sleeper_fallen } }
		}

		modifier = {
			factor = 3
			is_xenophobe = yes
		}

		modifier = {
			factor = 3
			has_ascension_perk = ap_defender_of_the_galaxy
		}

		modifier = {
			factor = 3
			has_modifier = sleeper_aggressor_marker
		}

		modifier = {
			factor = 0
			is_pacifist = yes
		}

		modifier = {
			factor = 0
			is_xenophile = yes
		}

		modifier = {
			factor = 4
			NOT = {
				any_neighbor_country = {
					is_country_type = the_sleeper_fallen
				}
			}
			any_rival_country = {
				any_neighbor_country = {
					is_country_type = the_sleeper_fallen
				}
			}
		}

		modifier = {
			factor = 0.5
			years_passed < 150
		}

		modifier = {
			factor = 0.2
			event_target:the_sleeper = {
				has_country_flag = sleeper_warning_happened
			}
		}
	}
}

resolution_sleeper_strikes_reapeal = {
	icon = "GFX_repeal_red"

	resources = {
		category = resolutions
		cost = {
			influence = @resolution_cost_denounce
		}
	}
	target = no

	effect = {
		custom_tooltip = resolution_sleeper_strikes_reapeal_effect
		hidden_effect = {
			set_timed_country_flag = { flag = galactic_community_resolution_passed_general days = @resolution_flag_timer }
			add_modifier = {
				modifier = resolution_passed_diplomatic_weight
				days = 2200
			}
			every_playable_country = {
				limit = { 
					has_modifier = sleeper_aggressor_reward
				}
				remove_modifier = sleeper_aggressor_reward
			}
		}
	}

	fail_effects = {
		hidden_effect = {
			set_timed_country_flag = { flag = galactic_community_resolution_failed_general days = @resolution_flag_timer }
			add_modifier = {
				modifier = resolution_failed_diplomatic_weight
				days = 2200
			}
		}
	}

	potential = {
		is_active_resolution = resolution_sleeper_strikes
		NOR = {
			has_global_flag = sleeper_berserker_ongoing
			has_global_flag = sleeper_true_awakening_happened
			has_global_flag = sleeper_dead
		}
		is_homicidal = no
	}

	active = { # Resolution only in effect while this trigger is met
		NOR = {
			has_global_flag = sleeper_berserker_ongoing
			has_global_flag = sleeper_true_awakening_happened
			has_global_flag = sleeper_dead
		}
	}

	ai_weight = {
		weight = @resolution_weight_unpopular

		modifier = {
			factor = 4
			any_neighbor_country = {
				is_country_type = the_sleeper_fallen
			}
			#is_militarist = no
			is_xenophobe = no
			NOT = { has_ascension_perk = ap_defender_of_the_galaxy }
		}

		modifier = {
			factor = 2
			OR = {
				has_ai_personality = xenophobic_isolationists
				has_valid_civic = civic_environmentalist
				has_valid_civic = civic_hive_empath
			}
		}

		modifier = {
			factor = 0.2
			is_militarist = yes
			NOT = { any_neighbor_country = { is_country_type = the_sleeper_fallen } }
		}

		modifier = {
			factor = 0.2
			is_xenophobe = yes
		}

		modifier = {
			factor = 0.2
			has_ascension_perk = ap_defender_of_the_galaxy
		}

		modifier = {
			factor = 0.2
			has_modifier = sleeper_aggressor_marker
		}

		modifier = {
			factor = 4
			is_pacifist = yes
		}

		modifier = {
			factor = 3
			is_xenophile = yes
		}

		modifier = {
			factor = 0.2
			NOT = {
				any_neighbor_country = {
					is_country_type = the_sleeper_fallen
				}
			}
			any_rival_country = {
				any_neighbor_country = {
					is_country_type = the_sleeper_fallen
				}
			}
		}

		modifier = {
			factor = 4
			event_target:the_sleeper = {
				has_country_flag = sleeper_warning_happened
			}
		}
	}
}

#sanctions against attacks on the sleeper
resolution_sleeper_sanctions = {
	icon = "GFX_resolution_mutual_defense"

	resources = {
		category = resolutions
		cost = {
			influence = @resolution_cost_t1
		}
	}
	target = no

	effect = {
		custom_tooltip = resolution_sleeper_sanctions_effect
		hidden_effect = {
			set_timed_country_flag = { flag = galactic_community_resolution_passed_general days = @resolution_flag_timer }
			add_modifier = {
				modifier = resolution_passed_diplomatic_weight
				days = 2200
			}
			every_playable_country = {
				limit = { 
					has_modifier = sleeper_aggressor_marker
					NOT = { has_modifier = sleeper_aggressor_sanctions }
				}
				add_modifier = { modifier = sleeper_aggressor_sanctions days = -1 }
				remove_modifier = sleeper_aggressor_reward
			}
		}
	}

	fail_effects = {
		hidden_effect = {
			set_timed_country_flag = { flag = galactic_community_resolution_failed_general days = @resolution_flag_timer }
			add_modifier = {
				modifier = resolution_failed_diplomatic_weight
				days = 2200
			}
		}
	}

	potential = {
		NOR = {
			has_global_flag = sleeper_berserker_ongoing
			has_global_flag = sleeper_true_awakening_happened
			has_global_flag = sleeper_dead
		}
		is_homicidal = no
	}

	allow = {
		NOT = {
			is_active_resolution = resolution_sleeper_strikes
		}
	}

	active = { # Resolution only in effect while this trigger is met
		NOR = {
			has_global_flag = sleeper_berserker_ongoing
			has_global_flag = sleeper_true_awakening_happened
			has_global_flag = sleeper_dead
		}
	}

	ai_weight = {
		weight = @resolution_weight_normal

		modifier = {
			factor = 3
			any_neighbor_country = { is_country_type = the_sleeper_fallen }
			#is_militarist = no
			is_xenophobe = no
			NOT = { has_ascension_perk = ap_defender_of_the_galaxy }
		}

		modifier = {
			factor = 0.1
			has_ai_personality = xenophobic_isolationists
		}

		modifier = {
			factor = 2
			OR = {
				has_valid_civic = civic_environmentalist
				has_valid_civic = civic_hive_empath
			}
		}

		modifier = {
			factor = 0.2
			is_militarist = yes
			NOT = { any_neighbor_country = { is_country_type = the_sleeper_fallen } }
		}

		modifier = {
			factor = 0.2
			is_xenophobe = yes
		}

		modifier = {
			factor = 3
			has_ascension_perk = ap_defender_of_the_galaxy
		}

		modifier = {
			factor = 3
			is_pacifist = yes
		}

		modifier = {
			factor = 3
			is_xenophile = yes
		}

		modifier = {
			factor = 0
			has_modifier = sleeper_aggressor_marker
		}

		modifier = {
			factor = 0
			NOT = {
				any_neighbor_country = {
					is_country_type = the_sleeper_fallen
				}
			}
			any_rival_country = {
				any_neighbor_country = {
					is_country_type = the_sleeper_fallen
				}
			}
		}

		modifier = {
			factor = 0.5
			years_passed < 150
		}

		modifier = {
			factor = 4
			event_target:the_sleeper = {
				has_country_flag = sleeper_warning_happened
			}
		}
	}
}

resolution_sleeper_sanctions_repeal = {
	icon = "GFX_repeal_red"

	resources = {
		category = resolutions
		cost = {
			influence = @resolution_cost_denounce
		}
	}
	target = no

	effect = {
		custom_tooltip = resolution_sleeper_sanctions_repeal_effect
		hidden_effect = {
			set_timed_country_flag = { flag = galactic_community_resolution_passed_general days = @resolution_flag_timer }
			add_modifier = {
				modifier = resolution_passed_diplomatic_weight
				days = 2200
			}
			every_playable_country = {
				limit = { 
					has_modifier = sleeper_aggressor_sanctions
				}
				remove_modifier = sleeper_aggressor_sanctions
			}
		}
	}

	fail_effects = {
		hidden_effect = {
			set_timed_country_flag = { flag = galactic_community_resolution_failed_general days = @resolution_flag_timer }
			add_modifier = {
				modifier = resolution_failed_diplomatic_weight
				days = 2200
			}
		}
	}

	potential = {
		is_active_resolution = resolution_sleeper_sanctions
		NOR = {
			has_global_flag = sleeper_berserker_ongoing
			has_global_flag = sleeper_true_awakening_happened
			has_global_flag = sleeper_dead
		}
		is_homicidal = no
	}

	active = { # Resolution only in effect while this trigger is met
		NOR = {
			has_global_flag = sleeper_berserker_ongoing
			has_global_flag = sleeper_true_awakening_happened
			has_global_flag = sleeper_dead
		}
	}

	ai_weight = {
		weight = @resolution_weight_unpopular

		modifier = {
			factor = 0.2
			any_neighbor_country = { is_country_type = the_sleeper_fallen }
			#is_militarist = no
			is_xenophobe = no
			NOT = { has_ascension_perk = ap_defender_of_the_galaxy }
		}

		modifier = {
			factor = 2
			has_ai_personality = xenophobic_isolationists
		}

		modifier = {
			factor = 0.2
			OR = {
				has_valid_civic = civic_environmentalist
				has_valid_civic = civic_hive_empath
			}
		}

		modifier = {
			factor = 3
			is_militarist = yes
			NOT = { any_neighbor_country = { is_country_type = the_sleeper_fallen } }
		}

		modifier = {
			factor = 3
			is_xenophobe = yes
		}

		modifier = {
			factor = 0.2
			has_ascension_perk = ap_defender_of_the_galaxy
		}

		modifier = {
			factor = 0
			is_pacifist = yes
		}

		modifier = {
			factor = 0
			is_xenophile = yes
		}

		modifier = {
			factor = 10
			has_modifier = sleeper_aggressor_marker
		}

		modifier = {
			factor = 4
			NOT = {
				any_neighbor_country = {
					is_country_type = the_sleeper_fallen
				}
			}
			any_rival_country = {
				any_neighbor_country = {
					is_country_type = the_sleeper_fallen
				}
			}
		}

		modifier = {
			factor = 0.2
			event_target:the_sleeper = {
				has_country_flag = sleeper_warning_happened
			}
		}
	}
}

#wargoal against attacks on the sleeper
#disabled, since you can already gain wargoals on countries that are in breach of galactic law
#resolution_sleeper_punishment = {
#	icon = "GFX_resolution_mutual_defense"
#
#	resources = {
#		category = resolutions
#		cost = {
#			influence = @resolution_cost_t1
#		}
#	}
#	target = no
#
#	effect = {
#		custom_tooltip = resolution_sleeper_punishment_effect
#		hidden_effect = {
#			set_timed_country_flag = { flag = galactic_community_resolution_passed_general days = @resolution_flag_timer }
#			add_modifier = {
#				modifier = resolution_passed_diplomatic_weight
#				days = 2200
#			}
#			every_playable_country = {
#				limit = { 
#					has_modifier = sleeper_aggressor_marker
#					NOT = { has_modifier = sleeper_aggressor_sanctions }
#				}
#				add_modifier = { modifier = sleeper_aggressor_sanctions days = -1 }
#				remove_modifier = sleeper_aggressor_reward
##			}
#		}
#	}
#
#	fail_effects = {
#		hidden_effect = {
#			set_timed_country_flag = { flag = galactic_community_resolution_failed_general days = @resolution_flag_timer }
#			add_modifier = {
#				modifier = resolution_failed_diplomatic_weight
#				days = 2200
#			}
#		}
#	}
#
#	breach = {
#		has_modifier = sleeper_aggressor_marker
#	}
#
#	potential = {
#		NOR = {
#			has_global_flag = sleeper_berserker_ongoing
#			has_global_flag = sleeper_true_awakening_happened
#			has_global_flag = sleeper_dead
#		}
#		is_homicidal = no
#		is_active_resolution = "resolution_sleeper_sanctions"
#	}
#
#	active = { # Resolution only in effect while this trigger is met
#		NOR = {
#			has_global_flag = sleeper_berserker_ongoing
#			has_global_flag = sleeper_true_awakening_happened
#			has_global_flag = sleeper_dead
#		}
#	}
#
#	ai_weight = {
#		weight = @resolution_weight_unpopular
#
#		modifier = {
#			factor = 3
#			any_neighbor_country = { is_country_type = the_sleeper_fallen }
#			is_xenophobe = no
#			NOT = { has_ascension_perk = ap_defender_of_the_galaxy }
#		}
#
#		modifier = {
#			factor = 0.1
#			has_ai_personality = xenophobic_isolationists
#		}
#
#		modifier = {
#			factor = 2
#			OR = {
#				has_valid_civic = civic_environmentalist
#				has_valid_civic = civic_hive_empath
#			}
#		}
#
#		modifier = {
#			factor = 2
#			is_militarist = yes
#		}
#
#		modifier = {
#			factor = 0.2
#			is_xenophobe = yes
#		}
#
#		modifier = {
#			factor = 3
#			has_ascension_perk = ap_defender_of_the_galaxy
##		}
#
#		modifier = {
#			factor = 0.5
#			is_pacifist = yes
#		}
#
#		modifier = {
#			factor = 3
#			is_xenophile = yes
#		}
#
#		modifier = {
#			factor = 0
#			has_modifier = sleeper_aggressor_marker
#		}
#
#		modifier = {
#			factor = 2
##			NOT = {
#				any_neighbor_country = { is_country_type = the_sleeper_fallen }
#			}
#			any_rival_country = {
#				any_neighbor_country = {
##					is_country_type = the_sleeper_fallen
#				}
#			}
#		}
##
#		modifier = {
#			factor = 10
#			NOT = { has_modifier = sleeper_aggressor_marker }
#			NOT = {
#				any_neighbor_country = { is_country_type = the_sleeper_fallen }
#			}
#			any_rival_country = {
#				has_modifier = sleeper_aggressor_marker
#			}
#		}
#
#		modifier = {
#			factor = 0.5
#			years_passed > 200
#		}
#	}
#}