@resolution_weight_hated = 3
@resolution_weight_disliked = 4
@resolution_weight_unpopular = 5
@resolution_weight_normal = 6
@resolution_weight_popular = 6.5
@resolution_weight_loved = 7

@resolution_cost_t1 = 100
@resolution_cost_t2 = 150
@resolution_cost_t3 = 200
@resolution_cost_t4 = 250
@resolution_cost_t5 = 300
@resolution_cost_denounce = 25

@resolution_flag_timer = 360


resolution_power_runes_ban_arcane = {
	icon = "GFX_resolution_power_runes"

	resources = {
		category = resolutions
		cost = {
			influence = @resolution_cost_t1
		}
	}
	target = no

	potential = {
		is_present_arcane_rune = yes
	}
	
	triggered_modifier = {
		potential = {
				has_country_flag = r_arcane_rune_active
		}
		modifier = {
			arcane_penalties = 1
		}
	}

	effect = {
	custom_tooltip = resolution_power_runes_ban_arcane_tooltip
		hidden_effect = {
			set_global_flag = galactic_community_resolution_passed
			set_timed_country_flag = { flag = galactic_community_resolution_passed_power_runes days = @resolution_flag_timer }
		}
	}

	fail_effects = {
		hidden_effect = {
			set_timed_country_flag = { flag = galactic_community_resolution_failed_power_runes days = @resolution_flag_timer }
		}
	}

	allow = {

	}
	breach = {
		has_country_flag = r_arcane_rune_active
	}
	ai_weight = {
		weight = @resolution_weight_normal

		modifier = {
			factor = -250
			has_relic = r_arcane_rune
		}
		modifier = {
			factor = -1
			any_relation = {
				is_in_federation_with = prev
				has_relic = r_arcane_rune
			}
		}
		modifier = {
			factor = -2
			any_relation = {
				NOT = { has_bad_attitude = yes }
				has_relic = r_arcane_rune
			}
		}
		modifier = {
			factor = 2
			any_relation = {
			OR = {
				 has_bad_attitude = yes
				 is_neutral_to = from
				 }
				has_relic = r_arcane_rune
			}
		}
	}
}

resolution_power_runes_repeal_ban_arcane = {
	icon = "GFX_repeal_blue"

	resources = {
		category = resolutions
		cost = {
			influence = @resolution_cost_t1
		}
	}
	target = no

	effect = {
		custom_tooltip = resolution_power_runes_repeal_ban_arcane_effect_success

		hidden_effect = {
			set_timed_country_flag = { flag = galactic_community_resolution_passed_power_runes_repeal days = @resolution_flag_timer }
		}
	}

	fail_effects = {
		hidden_effect = {
			set_timed_country_flag = { flag = galactic_community_resolution_failed_power_runes_repeal days = @resolution_flag_timer }
		}
	}

	potential = {
		is_active_resolution = "resolution_power_runes_ban_arcane"
	}

	ai_weight = {
		weight = @resolution_weight_disliked

		modifier = {
			factor = 250
			has_relic = r_arcane_rune
		}
		modifier = {
			factor = 2
			any_relation = {
				is_in_federation_with = prev
				has_relic = r_arcane_rune
			}
		}
		modifier = {
			factor = 1
			any_relation = {
				NOT = { has_bad_attitude = yes }
				has_relic = r_arcane_rune
			}
		}

	}
}

resolution_power_runes_ban_illusion = {
	icon = "GFX_resolution_power_runes"

	resources = {
		category = resolutions
		cost = {
			influence = @resolution_cost_t1
		}
	}
	target = no

	potential = {
		is_present_illusion_rune = yes
	}
	
	triggered_modifier = {
		potential = {
				has_country_flag = r_illusion_rune_active
		}
		modifier = {
			illusion_penalties = 1
		}
	}

	effect = {
	custom_tooltip = resolution_power_runes_ban_illusion_tooltip
		hidden_effect = {
			set_global_flag = galactic_community_resolution_passed
			set_timed_country_flag = { flag = galactic_community_resolution_passed_power_runes days = @resolution_flag_timer }
		}
	}

	fail_effects = {
		hidden_effect = {
			set_timed_country_flag = { flag = galactic_community_resolution_failed_power_runes days = @resolution_flag_timer }
		}
	}

	allow = {

	}
	breach = {
		has_country_flag = r_illusion_rune_active
	}
	ai_weight = {
		weight = @resolution_weight_normal

		modifier = {
			factor = -250
			has_relic = r_illusion_rune
		}
		modifier = {
			factor = -1
			any_relation = {
				is_in_federation_with = prev
				has_relic = r_illusion_rune
			}
		}
		modifier = {
			factor = -2
			any_relation = {
				NOT = { has_bad_attitude = yes }
				has_relic = r_illusion_rune
			}
		}
		modifier = {
			factor = 2
			any_relation = {
			OR = {
				 has_bad_attitude = yes
				 is_neutral_to = from
				 }
				has_relic = r_illusion_rune
			}
		}
	}
}

resolution_power_runes_repeal_ban_illusion = {
	icon = "GFX_repeal_blue"

	resources = {
		category = resolutions
		cost = {
			influence = @resolution_cost_t1
		}
	}
	target = no

	effect = {
		custom_tooltip = resolution_power_runes_repeal_ban_illusion_effect_success

		hidden_effect = {
			set_timed_country_flag = { flag = galactic_community_resolution_passed_power_runes_repeal days = @resolution_flag_timer }
		}
	}

	fail_effects = {
		hidden_effect = {
			set_timed_country_flag = { flag = galactic_community_resolution_failed_power_runes_repeal days = @resolution_flag_timer }
		}
	}

	potential = {
		is_active_resolution = "resolution_power_runes_ban_illusion"
	}

	ai_weight = {
		weight = @resolution_weight_disliked

		modifier = {
			factor = 250
			has_relic = r_illusion_rune
		}
		modifier = {
			factor = 2
			any_relation = {
				is_in_federation_with = prev
				has_relic = r_illusion_rune
			}
		}
		modifier = {
			factor = 1
			any_relation = {
				NOT = { has_bad_attitude = yes }
				has_relic = r_illusion_rune
			}
		}

	}
}

resolution_power_runes_ban_mighty = {
	icon = "GFX_resolution_power_runes"

	resources = {
		category = resolutions
		cost = {
			influence = @resolution_cost_t1
		}
	}
	target = no

	potential = {
		is_present_damage_rune = yes
	}
	
	triggered_modifier = {
		potential = {
				has_country_flag = r_damage_rune_active
		}
		modifier = {
			damage_penalties = 1
		}
	}

	effect = {
	custom_tooltip = resolution_power_runes_ban_mighty_tooltip
		hidden_effect = {
			set_global_flag = galactic_community_resolution_passed
			set_timed_country_flag = { flag = galactic_community_resolution_passed_power_runes days = @resolution_flag_timer }
		}
	}

	fail_effects = {
		hidden_effect = {
			set_timed_country_flag = { flag = galactic_community_resolution_failed_power_runes days = @resolution_flag_timer }
		}
	}

	allow = {

	}
	breach = {
		has_country_flag = r_damage_rune_active
	}
	ai_weight = {
		weight = @resolution_weight_normal

		modifier = {
			factor = -250
			has_relic = r_damage_rune
		}
		modifier = {
			factor = -1
			any_relation = {
				is_in_federation_with = prev
				has_relic = r_damage_rune
			}
		}
		modifier = {
			factor = -2
			any_relation = {
				NOT = { has_bad_attitude = yes }
				has_relic = r_damage_rune
			}
		}
		modifier = {
			factor = 2
			any_relation = {
			OR = {
				 has_bad_attitude = yes
				 is_neutral_to = from
				 }
				has_relic = r_damage_rune
			}
		}
	}
}

resolution_power_runes_repeal_ban_mighty = {
	icon = "GFX_repeal_blue"

	resources = {
		category = resolutions
		cost = {
			influence = @resolution_cost_t1
		}
	}
	target = no

	effect = {
		custom_tooltip = resolution_power_runes_repeal_ban_mighty_effect_success

		hidden_effect = {
			set_timed_country_flag = { flag = galactic_community_resolution_passed_power_runes_repeal days = @resolution_flag_timer }
		}
	}

	fail_effects = {
		hidden_effect = {
			set_timed_country_flag = { flag = galactic_community_resolution_failed_power_runes_repeal days = @resolution_flag_timer }
		}
	}

	potential = {
		is_active_resolution = "resolution_power_runes_ban_mighty"
	}

	ai_weight = {
		weight = @resolution_weight_disliked

		modifier = {
			factor = 250
			has_relic = r_damage_rune
		}
		modifier = {
			factor = 2
			any_relation = {
				is_in_federation_with = prev
				has_relic = r_damage_rune
			}
		}
		modifier = {
			factor = 1
			any_relation = {
				NOT = { has_bad_attitude = yes }
				has_relic = r_damage_rune
			}
		}

	}
}

resolution_power_runes_ban_regeneration = {
	icon = "GFX_resolution_power_runes"

	resources = {
		category = resolutions
		cost = {
			influence = @resolution_cost_t1
		}
	}
	target = no

	potential = {
		is_present_regeneration_rune = yes
	}
	
	triggered_modifier = {
		potential = {
				has_country_flag = r_regeneration_rune_active
		}
		modifier = {
			regeneration_penalties = 1
		}
	}

	effect = {
	custom_tooltip = resolution_power_runes_ban_regeneration_tooltip
		hidden_effect = {
			set_global_flag = galactic_community_resolution_passed
			set_timed_country_flag = { flag = galactic_community_resolution_passed_power_runes days = @resolution_flag_timer }
		}
	}

	fail_effects = {
		hidden_effect = {
			set_timed_country_flag = { flag = galactic_community_resolution_failed_power_runes days = @resolution_flag_timer }
		}
	}

	allow = {

	}
	breach = {
		has_country_flag = r_regeneration_rune_active
	}
	ai_weight = {
		weight = @resolution_weight_normal

		modifier = {
			factor = -250
			has_relic = r_regeneration_rune
		}
		modifier = {
			factor = -1
			any_relation = {
				is_in_federation_with = prev
				has_relic = r_regeneration_rune
			}
		}
		modifier = {
			factor = -2
			any_relation = {
				NOT = { has_bad_attitude = yes }
				has_relic = r_regeneration_rune
			}
		}
		modifier = {
			factor = 2
			any_relation = {
			OR = {
				 has_bad_attitude = yes
				 is_neutral_to = from
				 }
				has_relic = r_regeneration_rune
			}
		}
	}
}

resolution_power_runes_repeal_ban_regeneration = {
	icon = "GFX_repeal_blue"

	resources = {
		category = resolutions
		cost = {
			influence = @resolution_cost_t1
		}
	}
	target = no

	effect = {
		custom_tooltip = resolution_power_runes_repeal_ban_regeneration_effect_success

		hidden_effect = {
			set_timed_country_flag = { flag = galactic_community_resolution_passed_power_runes_repeal days = @resolution_flag_timer }
		}
	}

	fail_effects = {
		hidden_effect = {
			set_timed_country_flag = { flag = galactic_community_resolution_failed_power_runes_repeal days = @resolution_flag_timer }
		}
	}

	potential = {
		is_active_resolution = "resolution_power_runes_ban_regeneration"
	}

	ai_weight = {
		weight = @resolution_weight_disliked

		modifier = {
			factor = 250
			has_relic = r_regeneration_rune
		}
		modifier = {
			factor = 2
			any_relation = {
				is_in_federation_with = prev
				has_relic = r_regeneration_rune
			}
		}
		modifier = {
			factor = 1
			any_relation = {
				NOT = { has_bad_attitude = yes }
				has_relic = r_regeneration_rune
			}
		}

	}
}

resolution_power_runes_ban_haste = {
	icon = "GFX_resolution_power_runes"

	resources = {
		category = resolutions
		cost = {
			influence = @resolution_cost_t1
		}
	}
	target = no

	potential = {
		is_present_haste_rune = yes
	}
	
	triggered_modifier = {
		potential = {
				has_country_flag = r_haste_rune_active
		}
		modifier = {
			haste_penalties = 1
		}
	}

	effect = {
	custom_tooltip = resolution_power_runes_ban_haste_tooltip
		hidden_effect = {
			set_global_flag = galactic_community_resolution_passed
			set_timed_country_flag = { flag = galactic_community_resolution_passed_power_runes days = @resolution_flag_timer }
		}
	}

	fail_effects = {
		hidden_effect = {
			set_timed_country_flag = { flag = galactic_community_resolution_failed_power_runes days = @resolution_flag_timer }
		}
	}

	allow = {

	}
	breach = {
		has_country_flag = r_haste_rune_active
	}
	ai_weight = {
		weight = @resolution_weight_normal

		modifier = {
			factor = -250
			has_relic = r_haste_rune
		}
		modifier = {
			factor = -1
			any_relation = {
				is_in_federation_with = prev
				has_relic = r_haste_rune
			}
		}
		modifier = {
			factor = -2
			any_relation = {
				NOT = { has_bad_attitude = yes }
				has_relic = r_haste_rune
			}
		}
		modifier = {
			factor = 2
			any_relation = {
			OR = {
				 has_bad_attitude = yes
				 is_neutral_to = from
				 }
				has_relic = r_haste_rune
			}
		}
	}
}

resolution_power_runes_repeal_ban_haste = {
	icon = "GFX_repeal_blue"

	resources = {
		category = resolutions
		cost = {
			influence = @resolution_cost_t1
		}
	}
	target = no

	effect = {
		custom_tooltip = resolution_power_runes_repeal_ban_haste_effect_success

		hidden_effect = {
			set_timed_country_flag = { flag = galactic_community_resolution_passed_power_runes_repeal days = @resolution_flag_timer }
		}
	}

	fail_effects = {
		hidden_effect = {
			set_timed_country_flag = { flag = galactic_community_resolution_failed_power_runes_repeal days = @resolution_flag_timer }
		}
	}

	potential = {
		is_active_resolution = "resolution_power_runes_ban_haste"
	}

	ai_weight = {
		weight = @resolution_weight_disliked

		modifier = {
			factor = 250
			has_relic = r_haste_rune
		}
		modifier = {
			factor = 2
			any_relation = {
				is_in_federation_with = prev
				has_relic = r_haste_rune
			}
		}
		modifier = {
			factor = 1
			any_relation = {
				NOT = { has_bad_attitude = yes }
				has_relic = r_haste_rune
			}
		}

	}
}

resolution_power_runes_ban_invisibility = {
	icon = "GFX_resolution_power_runes"

	resources = {
		category = resolutions
		cost = {
			influence = @resolution_cost_t1
		}
	}
	target = no

	potential = {
		is_present_invisibility_rune = yes
	}
	
	triggered_modifier = {
		potential = {
				has_country_flag = r_invisibility_rune_active
		}
		modifier = {
			haste_penalties = 1
		}
	}


	effect = {
	custom_tooltip = resolution_power_runes_ban_invisibility_tooltip
		hidden_effect = {
			set_global_flag = galactic_community_resolution_passed
			set_timed_country_flag = { flag = galactic_community_resolution_passed_power_runes days = @resolution_flag_timer }
		}
	}

	fail_effects = {
		hidden_effect = {
			set_timed_country_flag = { flag = galactic_community_resolution_failed_power_runes days = @resolution_flag_timer }
		}
	}

	allow = {

	}
	breach = {
		has_country_flag = r_invisibility_rune_active
	}
	ai_weight = {
		weight = @resolution_weight_normal

		modifier = {
			factor = -250
			has_relic = r_invisibility_rune
		}
		modifier = {
			factor = -1
			any_relation = {
				is_in_federation_with = prev
				has_relic = r_invisibility_rune
			}
		}
		modifier = {
			factor = -2
			any_relation = {
				NOT = { has_bad_attitude = yes }
				has_relic = r_invisibility_rune
			}
		}
		modifier = {
			factor = 2
			any_relation = {
			OR = {
				 has_bad_attitude = yes
				 is_neutral_to = from
				 }
				has_relic = r_invisibility_rune
			}
		}
	}
}

resolution_power_runes_repeal_ban_invisibility = {
	icon = "GFX_repeal_blue"

	resources = {
		category = resolutions
		cost = {
			influence = @resolution_cost_t1
		}
	}
	target = no

	effect = {
		custom_tooltip = resolution_power_runes_repeal_ban_invisibility_effect_success

		hidden_effect = {
			set_timed_country_flag = { flag = galactic_community_resolution_passed_power_runes_repeal days = @resolution_flag_timer }
		}
	}

	fail_effects = {
		hidden_effect = {
			set_timed_country_flag = { flag = galactic_community_resolution_failed_power_runes_repeal days = @resolution_flag_timer }
		}
	}

	potential = {
		is_active_resolution = "resolution_power_runes_ban_invisibility"
	}

	ai_weight = {
		weight = @resolution_weight_disliked

		modifier = {
			factor = 250
			has_relic = r_invisibility_rune
		}
		modifier = {
			factor = 2
			any_relation = {
				is_in_federation_with = prev
				has_relic = r_invisibility_rune
			}
		}
		modifier = {
			factor = 1
			any_relation = {
				NOT = { has_bad_attitude = yes }
				has_relic = r_invisibility_rune
			}
		}

	}
}

