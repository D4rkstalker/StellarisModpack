# Mod by Terak_Lapis

#From Vanilla 
@resolution_weight_hated = 3
@resolution_weight_disliked = 4
@resolution_weight_unpopular = 5
@resolution_weight_normal = 6
@resolution_weight_popular = 6.5
@resolution_weight_loved = 7

@resolution_cost_t1 = 100
@resolution_cost_t2 = 150
@resolution_cost_t3 = 200
@resolution_cost_t4 = 250
@resolution_cost_t5 = 300
@resolution_cost_denounce = 25

@resolution_flag_timer = 360

# Galactic Taxes by Terak_Lapis

resolution_establish_taxes = {
	icon = "GFX_resolution_establish_taxes"

	resources = {
		category = resolutions
		cost = {
			influence = @resolution_cost_t1
		}
	}
	target = no

	modifier = {
		taxes_1_active = 1
	}

	
	
	effect = {
		#custom_tooltip = resolution_establish_taxes_tooltip_success
		#pass_resolution = "resolution_establish_taxes"
		hidden_effect = {
			set_global_flag = galactic_community_resolution_passed
			set_global_flag = taxes_1_active
		}
	}

	#fail_effect = {
	#	hidden_effect = {
	#		set_timed_country_flag = { flag = taxes_repealed days = @resolution_flag_timer }
	#	}
	#}

	allow = { 
		custom_tooltip = {
			fail_text = "resolution_already_active"
			NOR = {
				is_active_resolution = "resolution_establish_taxes"
				is_active_resolution = "resolution_go_closer"
				is_active_resolution = "resolution_cooperation"
				is_active_resolution = "resolution_for_us"
				is_active_resolution = "resolution_become_one"
			}
		}
		
	}

	ai_weight = {
		weight = @resolution_weight_loved

		modifier = { # Companies hate Taxes a lot
			factor = 0.05
			is_megacorp = yes
		}

		modifier = {
			factor = 3
			is_xenophile = yes
			is_egalitarian = yes
		}

		modifier = {
			factor = 0.5
			is_xenophobe = yes
			is_authoritarian = yes
		}

		modifier = {
			factor = 2
			is_hive_empire = yes
			is_machine_empire = yes
		}
	}

}

resolution_go_closer = {
	icon = "GFX_resolution_go_closer"

	resources = {
		category = resolutions
		cost = {
			influence = @resolution_cost_t2
			energy = 50
		}
	}

	target = no

	modifier = {
		taxes_1_active = 1
		taxes_2_active = 1
	}

	effect = {
		hidden_effect = {
			set_global_flag = taxes_2_active
			remove_global_flag = taxes_1_active
		}
	}

	fail_effects = {
		hidden_effect = {
			set_timed_country_flag = { flag = taxes_repealed days = @resolution_flag_timer }
		}
	}

	allow = {
		is_active_resolution = "resolution_establish_taxes"
	}

	ai_weight = { # Custom Weight Tree by Terak_Lapis
		weight = @resolution_weight_popular

		modifier = { # Companies hate Taxes a lot
			factor = 0.01
			is_megacorp = yes
		}

		modifier = {
			factor = 5
			is_xenophile = yes
			is_egalitarian = yes
		}

		modifier = {
			factor = 0.5
			is_xenophobe = yes
			is_authoritarian = yes
		}

		modifier = {
			factor = 1.5
			is_hive_empire = yes
			is_machine_empire = yes
		}

		modifier = {
			factor = 0.1
			OR = {
				has_ai_personality_behaviour = isolationist
				has_ai_personality_behaviour = subjugator
			}
		}

		modifier = {
			factor = 0.1
			has_ai_expansion_plan = yes
		}

		modifier = {
			factor = 2
			OR = {
				has_active_xuracorp_trade = yes
				has_civic = civic_shared_burden
				has_civic = civic_diplomatic_corps
			}
		}

		modifier = {
			factor = 0.2
			OR = {
				has_valid_civic = civic_private_military_companies
				has_valid_civic = civic_private_prospectors
			}
		}

		modifier = {
			factor = 0.1
			OR = {
				any_relation = {
					has_commercial_pact = root 
				}
				any_relation = {
					has_communications = root
					is_subject = no
					is_country_type = default
					relative_power = {
						who = root
						value > superior
						category = economy
					}
				}
			}
			
		}
	}
}

resolution_cooperation = {
	icon = "GFX_resolution_cooperation"

	resources = {
		category = resolutions
		cost = {
			influence = @resolution_cost_t3
			energy = 100
		}
	}

	target = no

	modifier = {
		taxes_1_active = 1
		taxes_2_active = 1
		taxes_3_active = 1
	}

	effect = {
		hidden_effect = {
			set_global_flag = taxes_3_active
			remove_global_flag = taxes_2_active
		}
	}

	fail_effects = {
		hidden_effect = {
			set_timed_country_flag = { flag = taxes_repealed days = @resolution_flag_timer }
		}
	}

	allow = {
		is_active_resolution = "resolution_go_closer"
	}

	ai_weight = { # Custom Weight Tree by Terak_Lapis
		weight = @resolution_weight_unpopular

		modifier = { # Companies hate Taxes a lot
			factor = 0
			is_megacorp = yes
		}

		modifier = {
			factor = 6
			is_xenophile = yes
			is_egalitarian = yes
		}

		modifier = {
			factor = 0.1
			is_xenophobe = yes
			is_authoritarian = yes
		}

		modifier = {
			factor = 1.01
			is_hive_empire = yes
			is_machine_empire = yes
		}

		modifier = {
			factor = 0.1
			OR = {
				has_ai_personality_behaviour = isolationist
				has_ai_personality_behaviour = subjugator
			}
		}

		modifier = {
			factor = 0.1
			has_ai_expansion_plan = yes
		}

		modifier = {
			factor = 2
			OR = {
				has_active_xuracorp_trade = yes
				has_civic = civic_shared_burden
				has_civic = civic_diplomatic_corps
			}
		}

		modifier = {
			factor = 0.2
			OR = {
				has_valid_civic = civic_private_military_companies
				has_valid_civic = civic_private_prospectors
			}
		}

		#modifier = {
		#	factor = 3
		#	any_relation = {
		#		is_tributary = root
		#	}
		#}

		modifier = {
			factor = 0.1
			OR = {
				any_relation = {
					has_commercial_pact = root 
				}
				any_relation = {
					has_communications = root
					is_subject = no
					is_country_type = default
					relative_power = {
						who = root
						value > superior
						category = economy
					}
				}
			}
			
		}
	}
}

resolution_for_us = {
	icon = "GFX_resolution_for_us"

	resources = {
		category = resolutions
		cost = {
			influence = @resolution_cost_t4
			energy = 100
		}
	}

	target = no

	modifier = {
		taxes_1_active = 1
		taxes_2_active = 1
		taxes_3_active = 1
		taxes_4_active = 1
	}

	effect = {
		hidden_effect = {
			set_global_flag = taxes_4_active
			remove_global_flag = taxes_3_active
		}
		#every_playable_country = {
		#	limit = { is_galactic_community_member = yes }
		#	is_country_type = { id = dpboo.900 days = 10 }
		#	is_country_type = { id = dpboo.905 days = 365 }
		#	is_country_type = { id = dpboo.910 days = 1800 }
		#}
	}

	fail_effects = {
		hidden_effect = {
			set_timed_country_flag = { flag = taxes_repealed days = @resolution_flag_timer }
		}
	}

	allow = {
		is_active_resolution = "resolution_cooperation"
	}

	ai_weight = { # Custom Weight Tree by Terak_Lapis
		weight = @resolution_weight_popular

		modifier = { # Companies love taxerefunds
			factor = 1
			is_megacorp = yes
		}

		modifier = {
			factor = 7
			is_xenophile = yes
			is_egalitarian = yes
		}

		modifier = {
			factor = 1
			is_xenophobe = yes
			is_authoritarian = yes
		}

		modifier = {
			factor = 1.5
			is_hive_empire = yes
			is_machine_empire = yes
		}

		modifier = {
			factor = 0
			OR = {
				has_ai_personality_behaviour = isolationist
				has_ai_personality_behaviour = subjugator
			}
		}

		modifier = {
			factor = 1
			has_ai_expansion_plan = yes
		}

		modifier = {
			factor = 4
			OR = {
				has_active_xuracorp_trade = yes
				has_civic = civic_shared_burden
				has_civic = civic_diplomatic_corps
			}
		}

		modifier = {
			factor = 0.1
			OR = {
				has_valid_civic = civic_private_military_companies
				has_valid_civic = civic_private_prospectors
			}
		}

		#modifier = {
		#	factor = 6
		#	any_relation = {
		#		is_tributary = root
		#	}
		#}

		modifier = {
			factor = 1.5
			OR = {
				any_relation = {
					has_commercial_pact = root 
				}
				any_relation = {
					has_communications = root
					is_subject = no
					is_country_type = default
					relative_power = {
						who = root
						value > superior
						category = economy
					}
				}
			}
			
		}
	}
}

resolution_become_one = {
	icon = "GFX_resolution_become_one"

	resources = {
		category = resolutions
		cost = {
			influence = @resolution_cost_t4
			energy = 100
		}
	}

	target = no

	modifier = {
		taxes_1_active = 1
		taxes_2_active = 1
		taxes_3_active = 1
		taxes_4_active = 1
		taxes_5_active = 1
	}

	effect = {
		hidden_effect = {
			set_global_flag = taxes_4_active
			remove_global_flag = taxes_3_active
		}
	}

	fail_effects = {
		hidden_effect = {
			set_timed_country_flag = { flag = taxes_repealed days = @resolution_flag_timer }
		}
	}

	allow = {
		is_active_resolution = "resolution_cooperation"
		is_part_of_galactic_council = yes
		is_active_resolution = "resolution_galacticreforms_council_size_1"
		is_part_of_galactic_council = yes
        is_galactic_community_member = yes
        is_in_breach_of_any = no
        is_permanent_councillor = yes
	}

	ai_weight = { # Custom Weight Tree by Terak_Lapis
		weight = @resolution_weight_hated

		modifier = { # Companies love taxerefunds
			factor = 0
			is_megacorp = yes
		}

		modifier = {
			factor = 0.5
			is_xenophile = yes
			is_egalitarian = yes
		}

		modifier = {
			factor = 0
			is_xenophobe = yes
			is_authoritarian = yes
		}

		modifier = {
			factor = 0.01
			is_hive_empire = yes
			is_machine_empire = yes
		}

		modifier = {
			factor = 0
			OR = {
				has_ai_personality_behaviour = isolationist
				has_ai_personality_behaviour = subjugator
			}
		}

		modifier = {
			factor = 0
			has_ai_expansion_plan = yes
		}

		modifier = {
			factor = 4
			OR = {
				has_active_xuracorp_trade = yes
				has_civic = civic_shared_burden
				has_civic = civic_diplomatic_corps
			}
		}

		modifier = {
			factor = 0
			OR = {
				has_valid_civic = civic_private_military_companies
				has_valid_civic = civic_private_prospectors
			}
		}

		#modifier = {
		#	factor = 1
		#	any_relation = {
		#		is_tributary = root
		#	}
		#}

		modifier = {
			factor = 1.5
			OR = {
				any_relation = {
					has_commercial_pact = root 
				}
				any_relation = {
					has_communications = root
					is_subject = no
					is_country_type = default
					relative_power = {
						who = root
						value > superior
						category = economy
					}
				}
			}
			
		}
	}
}

# Military Action

resolution_mil_1 = {
	icon = "GFX_resolution_mil_1"

	target = no

	resources = {
		category = resolutions
		cost = {
			influence = @resolution_cost_t1
			alloys = 50
		}
	}

	effect = {
		hidden_effect = {
			set_global_flag = galactic_community_resolution_passed
			set_timed_country_flag = {
				flag = passed_mil_action_1
				days = 365
			}
			every_playable_country = {
				limit = { 
					is_galactic_community_member = yes
					is_country_type = default
				}
				country_event = {
					id = dpboo.1000 # Prepare for War and Defense
				}
			}
			set_global_flag = mil_1_active
			#random_ = {# Spawns a Army on every planet
			#	create_army = {
			#		owner = root
			#		type = defense_army
			#	}
			#}
		}
	}

	fail_effects = {
		hidden_effect = {
			set_timed_country_flag = {
				flag = mil_1_failed
				days = 365
			}
		}
	}

	allow = {
		custom_tooltip = {
			fail_text = "resolution_already_active"
			NOR = {
				is_active_resolution = "resolution_mil_1"
				is_active_resolution = "resolution_mil_2"
				is_active_resolution = "resolution_mil_3"
				is_active_resolution = "resolution_mil_final"
			}

		}
	}

	modifier = {
		mil_buff_1 = 1
	}

	ai_weight = { # Custom Tree by Terak_Lapis
		weight = @resolution_weight_loved

		modifier = {
			factor = 10
			has_ethic = ethic_militarist
		}

		modifier = {
			factor = 20
			has_ethic = ethic_fanatic_militarist
		}

		modifier = {
			factor = 0.1
			is_pacifist = yes
		}

		modifier = {
			factor = 3
			OR = {
				has_policy_flag = unrestricted_wars
				has_ai_personality_behaviour = attack_neutrals
				has_ai_personality = honorbound_warriors
			}
		}

		modifier = {
			factor = 3
			is_hive_empire = yes
			is_machine_empire = yes
		}

		modifier = {
			factor = 5
			OR = {
				has_civic = civic_machine_warbots
				has_civic = civic_private_military_companies
				has_civic = civic_warrior_culture
			}
		}

		modifier = {
			factor = 100
			has_origin = origin_churl
			has_origin = origin_doomsday
			has_origin = origin_hegemon
			has_origin = origin_khan_successor
		}

		modifier = {
			factor = 10
			any_relation = {
				has_communications = root
				is_country_type = default
				is_subject = no
				relative_power = {
					who = root
					value > equivalent
					category = fleet 
				}
			}
		}

		modifier = {
			factor = 3
			any_relation = {
				is_subject = yes
				is_subject_type = tributary
			}
			any_pool_leader = {
				has_trait = leader_trait_admiral_chosen
			}
		}

		modifier = {
			factor = 7
			has_policy_flag = diplo_stance_supremacist
			has_policy_flag = diplo_stance_belligerent
			has_policy_flag = diplo_stance_churl
		}

		modifier = {
			factor = 30
			has_policy_flag = diplo_stance_hunger
		}

		modifier = { # We want more bigger guns
			factor = 20
			any_ship = {
				is_ship_size = titan
				is_ship_size = battleship
				is_ship_size = juggernaut
				is_ship_size = colossus
			}
		}

		modifier = {
			factor = 3
			has_policy_flag = orbital_bombardment_indiscriminate
		}

		modifier = {
			factor = 100
			has_policy_flag = orbital_bombardment_armageddon
		}
	}
}

resolution_mil_2 = {
	icon = "GFX_resolution_mil_2"

	target = no

	resources = {
		category = resolutions
		cost = {
			influence = @resolution_cost_t2
			alloys = 50
		}
	}

	effect = {
		hidden_effect = {
			set_global_flag = galactic_community_resolution_passed
			set_timed_country_flag = {
				flag = passed_mil_action_2
				days = 365
			}
			every_playable_country = {
				limit = { 
					is_galactic_community_member = yes
					is_country_type = default
				}
				country_event = {
					id = dpboo.1100 # Prepare for War and Defense - 2 - More Recruitment
				}
			}
			set_global_flag = mil_2_active
			remove_global_flag = mil_1_active
		}
	}

	fail_effects = {
		hidden_effect = {
			set_timed_country_flag = {
				flag = mil_2_failed
				days = 365
			}
		}
	}

	allow = {
		is_active_resolution = "resolution_mil_1"
	}

	modifier = {
		mil_buff_1 = 1
		mil_buff_2 = 1
	}

	ai_weight = { # Custom Tree by Terak_Lapis
		weight = @resolution_weight_popular

		modifier = {
			factor = 10
			has_ethic = ethic_militarist
		}

		modifier = {
			factor = 20
			has_ethic = ethic_fanatic_militarist
		}

		modifier = {
			factor = 0
			is_pacifist = yes
		}

		modifier = {
			factor = 3
			OR = {
				has_policy_flag = unrestricted_wars
				has_ai_personality_behaviour = attack_neutrals
				has_ai_personality = honorbound_warriors
			}
		}

		modifier = {
			factor = 3
			is_hive_empire = yes
			is_machine_empire = yes
		}

		modifier = {
			factor = 5
			OR = {
				has_civic = civic_machine_warbots
				has_civic = civic_private_military_companies
				has_civic = civic_warrior_culture
			}
		}

		modifier = {
			factor = 100
			has_origin = origin_churl
			has_origin = origin_doomsday
			has_origin = origin_hegemon
			has_origin = origin_khan_successor
		}

		modifier = {
			factor = 10
			any_relation = {
				has_communications = root
				is_country_type = default
				is_subject = no
				relative_power = {
					who = root
					value > equivalent
					category = fleet 
				}
			}
		}

		modifier = {
			factor = 3
			any_relation = {
				is_subject = yes
				is_subject_type = tributary
			}
			any_pool_leader = {
				has_trait = leader_trait_admiral_chosen
			}
		}

		modifier = {
			factor = 7
			has_policy_flag = diplo_stance_supremacist
			has_policy_flag = diplo_stance_belligerent
			has_policy_flag = diplo_stance_churl
		}

		modifier = {
			factor = 30
			has_policy_flag = diplo_stance_hunger
		}

		modifier = { # We want more bigger guns
			factor = 20
			any_ship = {
				is_ship_size = titan
				is_ship_size = battleship
				is_ship_size = juggernaut
				is_ship_size = colossus
			}
		}

		modifier = {
			factor = 3
			has_policy_flag = orbital_bombardment_indiscriminate
		}

		modifier = {
			factor = 100
			has_policy_flag = orbital_bombardment_armageddon
		}
	}
}

resolution_mil_3 = {
	icon = "GFX_resolution_mil_3"

	target = no

	resources = {
		category = resolutions
		cost = {
			influence = @resolution_cost_t3
			alloys = 250
		}
	}

	effect = {
		hidden_effect = {
			set_global_flag = galactic_community_resolution_passed
			set_timed_country_flag = {
				flag = passed_mil_action_3
				days = 365
			}
			every_playable_country = {
				limit = { 
					is_galactic_community_member = yes
					is_country_type = default
				}
				country_event = {
					id = dpboo.1200 # Prepare for War and Defense - 3 - Buildup Shipyards
				}
				
			}
			set_global_flag = mil_3_active
			remove_global_flag = mil_2_active
		}
	}

	fail_effects = {
		hidden_effect = {
			set_timed_country_flag = {
				flag = mil_3_failed
				days = 365
			}
		}
	}

	allow = {
		is_active_resolution = "resolution_mil_2"
	}

	modifier = {
		mil_buff_1 = 1
		mil_buff_2 = 1
		mil_buff_3 = 1
	}

	ai_weight = { # Custom Tree by Terak_Lapis
		weight = @resolution_weight_normal

		modifier = {
			factor = 15
			has_ethic = ethic_militarist
		}

		modifier = {
			factor = 25
			has_ethic = ethic_fanatic_militarist
		}

		modifier = {
			factor = 0
			is_pacifist = yes
		}

		modifier = {
			factor = 6
			OR = {
				has_policy_flag = unrestricted_wars
				has_ai_personality_behaviour = attack_neutrals
				has_ai_personality = honorbound_warriors
			}
		}

		modifier = {
			factor = 2.4
			is_hive_empire = yes
			is_machine_empire = yes
		}

		modifier = {
			factor = 6
			OR = {
				has_civic = civic_machine_warbots
				has_civic = civic_private_military_companies
				has_civic = civic_warrior_culture
			}
		}

		modifier = {
			factor = 100
			has_origin = origin_churl
			has_origin = origin_doomsday
			has_origin = origin_hegemon
			has_origin = origin_khan_successor
		}

		modifier = {
			factor = 15
			any_relation = {
				has_communications = root
				is_country_type = default
				is_subject = no
				relative_power = {
					who = root
					value > equivalent
					category = fleet 
				}
			}
		}

		modifier = {
			factor = 4
			any_relation = {
				is_subject = yes
				is_subject_type = tributary
			}
			any_pool_leader = {
				has_trait = leader_trait_admiral_chosen
			}
		}

		modifier = {
			factor = 8
			has_policy_flag = diplo_stance_supremacist
			has_policy_flag = diplo_stance_belligerent
			has_policy_flag = diplo_stance_churl
		}

		modifier = {
			factor = 32
			has_policy_flag = diplo_stance_hunger
		}

		modifier = { # We want more bigger guns
			factor = 25
			any_ship = {
				is_ship_size = titan
				is_ship_size = battleship
				is_ship_size = juggernaut
				is_ship_size = colossus
			}
		}

		modifier = {
			factor = 3
			has_policy_flag = orbital_bombardment_indiscriminate
		}

		modifier = {
			factor = 100
			has_policy_flag = orbital_bombardment_armageddon
		}

		modifier = { # Threat form outside
			factor = 200
			any_neighbor_country = {
				any_ship = {
					is_ship_size = titan
					is_ship_size = battleship
					is_ship_size = juggernaut
					is_ship_size = colossus
				}
			}
		}
	}
}

resolution_mil_final = {
	icon = "GFX_resolution_mil_final"

	target = no

	resources = {
		category = resolutions
		cost = {
			influence = @resolution_cost_t4
			alloys = 250
		}
	}

	effect = {
		hidden_effect = {
			set_global_flag = galactic_community_resolution_passed
			set_timed_country_flag = {
				flag = passed_mil_action_4
				days = 365
			}
			every_playable_country = {
				limit = { 
					is_galactic_community_member = yes
					is_country_type = default
				}
				country_event = {
					id = dpboo.1300 # Prepare for War and Defense - 3 - Prepare for a fight -  Sportevent
				}
			}
			set_global_flag = mil_final_active
			remove_global_flag = mil_3_active
		}
	}

	fail_effects = {
		hidden_effect = {
			set_timed_country_flag = {
				flag = mil_final_failed
				days = 365
			}
		}
	}

	allow = {
		is_active_resolution = "resolution_mil_3"
	}

	modifier = {
		mil_buff_1 = 1
		mil_buff_2 = 1
		mil_buff_3 = 1
		mil_buff_final = 1
	}

	ai_weight = { # Custom Tree by Terak_Lapis
		weight = @resolution_weight_unpopular
		modifier = {
			factor = 20
			has_ethic = ethic_militarist
		}

		modifier = {
			factor = 30
			has_ethic = ethic_fanatic_militarist
		}

		modifier = {
			factor = 0
			is_pacifist = yes
		}

		modifier = {
			factor = 8
			OR = {
				has_policy_flag = unrestricted_wars
				has_ai_personality_behaviour = attack_neutrals
				has_ai_personality = honorbound_warriors
			}
		}

		modifier = {
			factor = 1.2
			is_hive_empire = yes
			is_machine_empire = yes
		}

		modifier = {
			factor = 6
			OR = {
				has_civic = civic_machine_warbots
				has_civic = civic_private_military_companies
				has_civic = civic_warrior_culture
			}
		}

		modifier = {
			factor = 100
			has_origin = origin_churl
			has_origin = origin_doomsday
			has_origin = origin_hegemon
			has_origin = origin_khan_successor
		}

		modifier = {
			factor = 18
			any_relation = {
				has_communications = root
				is_country_type = default
				is_subject = no
				relative_power = {
					who = root
					value > equivalent
					category = fleet 
				}
			}
		}

		modifier = {
			factor = 5
			any_relation = {
				is_subject = yes
				is_subject_type = tributary
			}
			any_pool_leader = {
				has_trait = leader_trait_admiral_chosen
			}
		}

		modifier = {
			factor = 9
			has_policy_flag = diplo_stance_supremacist
			has_policy_flag = diplo_stance_belligerent
			has_policy_flag = diplo_stance_churl
		}

		modifier = {
			factor = 33
			has_policy_flag = diplo_stance_hunger
		}

		modifier = { # We want more bigger guns
			factor = 27
			any_ship = {
				is_ship_size = titan
				is_ship_size = battleship
				is_ship_size = juggernaut
				is_ship_size = colossus
			}
		}

		modifier = {
			factor = 3.5
			has_policy_flag = orbital_bombardment_indiscriminate
		}

		modifier = {
			factor = 100
			has_policy_flag = orbital_bombardment_armageddon
		}

		modifier = { # Threat form outside
			factor = 200
			any_neighbor_country = {
				any_ship = {
					is_ship_size = titan
					is_ship_size = battleship
					is_ship_size = juggernaut
					is_ship_size = colossus
				}
			}
			any_neighbor_country = {
				is_country_type = default
				NOT = { is_fallen_empire = yes }
				relative_power = {
					who = root
					value > superior
				}
			}
		}
	}
} 

# Colonize Space

resolution_expand_borders = { # Allow in scale - less border fric
	icon = "GFX_expand_1"

	target = no

	resources = {
		category = resolutions
		cost = {
			influence = @resolution_cost_t2
		}
	}

	effect = {
		hidden_effect = {
			set_global_flag = galactic_community_resolution_passed
			set_timed_country_flag = {
				flag = passed_expand_1
				days = 365
			}
			set_global_flag = exp_1_active
		}
	}

	fail_effects = {
		hidden_effect = {
			set_timed_country_flag = {
				flag = failed_exp_1
				days = 365
			}
		}
	}

	allow = {
		custom_tooltip = {
			fail_text = "resolution_already_active"
			NOR = {
				is_active_resolution = "resolution_expand_borders"
				is_active_resolution = "resolution_colonize_stars"
				is_active_resolution = "resolution_ensure_prosperity"
				is_active_resolution = "resolution_col_finish"
			}
		}
	}

	modifier = {
		exp_buff_1 = 1
	}

	ai_weight = { # Custom Tree by Terak_Lapis
		weight = @resolution_weight_popular

		modifier = {
			factor = 10
			OR = {
				has_policy_flag = diplo_stance_expansionist
				has_ai_personality_behaviour = uplifter
				has_ai_expansion_plan = yes
				has_origin = origin_galactic_doorstep
			}
		}
		modifier = {
			factor = 0.02
			has_ai_expansion_plan = no
			has_ai_personality = xenophobic_isolationists
			has_policy_flag = diplo_stance_isolationist
		}
		modifier = {
			factor = 3
			has_technology = tech_self_aware_logic
		}
		modifier = {
			factor = 0.2
			is_subject = yes
		}
		modifier = {
			factor = 100
			has_country_flag = has_built_or_repaired_megastructure
		}
	}
}

resolution_colonize_stars = { # Allow colony build up - 
	icon = "GFX_expand_2"

	target = no

	resources = {
		category = resolutions
		cost = {
			influence = @resolution_cost_t3
		}
	}

	effect = {
		hidden_effect = {
			set_global_flag = galactic_community_resolution_passed
			set_timed_country_flag = {
				flag = passed_expand_2
				days = 365
			}
			set_global_flag = exp_2_active
			remove_global_flag = exp_1_active
		}
	}

	fail_effects = {
		hidden_effect = {
			set_timed_country_flag = {
				flag = failed_exp_2
				days = 365
			}
		}
	}

	allow = {
		is_active_resolution = "resolution_expand_borders"
	}

	modifier = {
		exp_buff_1 = 1
		exp_buff_2 = 1
	}

	ai_weight = { # Custom Tree by Terak_Lapis
		weight = @resolution_weight_popular

		modifier = {
			factor = 10
			OR = {
				has_policy_flag = diplo_stance_expansionist
				has_ai_personality_behaviour = uplifter
				has_ai_expansion_plan = yes
				has_origin = origin_galactic_doorstep
			}
		}
		modifier = {
			factor = 0.02
			has_ai_expansion_plan = no
			has_ai_personality = xenophobic_isolationists
			has_policy_flag = diplo_stance_isolationist
		}
		modifier = {
			factor = 3
			has_technology = tech_self_aware_logic
		}
		modifier = {
			factor = 0.2
			is_subject = yes
		}
		modifier = {
			factor = 100
			has_country_flag = has_built_or_repaired_megastructure
		}
	}
}

resolution_ensure_prosperity = { # Boost Stations and power up sco research
	icon = "GFX_expand_3"

	target = no

	resources = {
		category = resolutions
		cost = {
			influence = @resolution_cost_t4
		}
	}

	effect = {
		hidden_effect = {
			set_timed_country_flag = {
				flag = passed_expand_3
				days = 365
			}
			set_global_flag = exp_3_active
			remove_global_flag = exp_2_active
		}
	}

	fail_effects = {
		hidden_effect = {
			set_timed_country_flag = {
				flag = failed_exp_3
				days = 365
			}
		}
	}

	allow = {
		is_active_resolution = "resolution_colonize_stars"
	}

	modifier = {
		exp_buff_1 = 1
		exp_buff_2 = 1
		exp_buff_3 = 1
	}

	ai_weight = { # Custom Tree by Terak_Lapis
		weight = @resolution_weight_popular

		modifier = {
			factor = 10
			OR = {
				has_policy_flag = diplo_stance_expansionist
				has_ai_personality_behaviour = uplifter
				has_ai_expansion_plan = yes
				has_origin = origin_galactic_doorstep
			}
		}
		modifier = {
			factor = 0.02
			has_ai_expansion_plan = no
			has_ai_personality = xenophobic_isolationists
			has_policy_flag = diplo_stance_isolationist
		}
		modifier = {
			factor = 3
			has_technology = tech_self_aware_logic
		}
		modifier = {
			factor = 0.2
			is_subject = yes
		}
		modifier = {
			factor = 100
			has_country_flag = has_built_or_repaired_megastructure
		}
	}
}

resolution_col_finish = { # Boost Stations and power up sco research
	icon = "GFX_col_finish"

	target = no

	resources = {
		category = resolutions
		cost = {
			influence = @resolution_cost_t5
			exotic_gases = 50
			rare_crystals = 50
			diploforce = 5
		}
	}

	effect = {
		hidden_effect = {
			set_timed_country_flag = {
				flag = passed_expand_4
				days = 365
			}
			set_global_flag = exp_4_active
			remove_global_flag = exp_3_active
		}
	}

	fail_effects = {
		hidden_effect = {
			set_timed_country_flag = {
				flag = failed_exp_4
				days = 365
			}
		}
	}

	allow = {
		is_active_resolution = "resolution_ensure_prosperity"
		is_years_since_community_formation >= 50
	}

	modifier = {
		exp_buff_1 = 1
		exp_buff_2 = 1
		exp_buff_3 = 1
		exp_buff_4 = 1
	}

	ai_weight = { # Custom Tree by Terak_Lapis
		weight = @resolution_weight_loved

		modifier = {
			factor = 10
			OR = {
				has_policy_flag = diplo_stance_expansionist
				has_ai_personality_behaviour = uplifter
				has_ai_expansion_plan = yes
				has_origin = origin_galactic_doorstep
			}
		}
		modifier = {
			factor = 0.02
			has_ai_expansion_plan = no
			has_ai_personality = xenophobic_isolationists
			has_policy_flag = diplo_stance_isolationist
		}
		modifier = {
			factor = 3
			has_technology = tech_self_aware_logic
		}
		modifier = {
			factor = 0.2
			is_subject = yes
		}
		modifier = {
			factor = 100
			has_country_flag = has_built_or_repaired_megastructure
		}
	}
}

# L - Gate Policy - under construction - please ignore for the time being :)

#resolution_repeal_proclaim_danger = {
#	icon = "GFX_free_gates"
#
#	target = yes	
#	#harmful = yes
#	valid_target = {
#		is_country_type = default
#		is_galactic_community_member = yes	
#	}	
#	breach = { # Opening or attempting to do so is illegal
#		is_galactic_community_member = yes	
#		NOR = {
#			has_technology = tech_lgate_activation
#			has_technology = tech_repeatable_lcluster_clue
#			has_country_flag = lcluster_opener
#		}
#	}
#
#	resource = {
#		category = resolutions
#		cost = {
#			influence = @resolution_cost_t5
#		}
#	}
#
#	effect = {
#		hidden_effect = { set_global_flag = l_gates_allowed remove_global_flag = l_gates_outlawed }
#	}
#
#	allow = { has_global_flag = galactic_community_resolution_passed }
#
#	ai_weight = {
#		weight = @weight_popular
#
#		modifier = {
#			factor = 100
#			OR = {
#				has_technology = tech_lgate_activation
#				has_technology = tech_repeatable_lcluster_clue
#				has_country_flag = lcluster_opener
#			}
#		}
#
#		modifier = {
#			factor = 0
#			NOR = {
#				has_technology = tech_lgate_activation
#				has_technology = tech_repeatable_lcluster_clue
#				has_country_flag = lcluster_opener
#			}
#		}
#	}
#
#}
#
#resolution_proclaim_danger = {
#	icon = "GFX_banned_gates"
#
#	target = no #yes	
#	harmful = yes	
#	valid_target = {
#		is_country_type = default
#		is_galactic_community_member = yes	
#	}
#	breach = { # Opening or attempting to do so is illegal
#		AND = { 
#			is_galactic_communiy_member = yes
#			OR = {
#				has_technology = tech_lgate_activation
#				has_technology = tech_repeatable_lcluster_clue
#				has_country_flag = lcluster_opener 			
#			}
#		}
#	}
#
#	resource = {
#		category = resolutions
#		cost = {
#			influence = @resolution_cost_t5
#		}
#	}
#
#	effect = {
#		hidden_effect = { set_global_flag = l_gates_outlawed remove_global_flag = l_gates_allowed }
#	}
#
#	allow = { has_global_flag = galactic_community_resolution_passed }
#
#	ai_weight = {
#		weight = @weight_unpopular
#
#		modifier = {
#			factor = 100
#			NOR = {
#				has_technology = tech_lgate_activation
#				has_technology = tech_repeatable_lcluster_clue
#				has_country_flag = lcluster_opener
#			}
#		}
#
#		modifier = {
#			factor = 0
#			OR = {
#				has_technology = tech_lgate_activation
#				has_technology = tech_repeatable_lcluster_clue
#				has_country_flag = lcluster_opener
#			}
#		}
#	}
#
#}