@resolution_flag_timer = 360

resolution_galactic_focus_crisis_ag_ancient_gamma_guardian = {
	icon = "GFX_resolution_emergency_measure"

	resources = {
		category = resolutions
		cost = { influence = 100 }
	}
	target = no

	effect = {
		custom_tooltip = resolution_galactic_focus_crisis_ag_ancient_gamma_guardian_effect_success

		hidden_effect = {
			repeal_all_galactic_focus_resolutions = yes
			ag_repeal_all_crisis_resolutions = yes
			
			set_global_flag = galactic_focus_crisis_ag_ancient_gamma_guardian
			set_global_flag = galactic_community_crisis_fighting

			set_global_flag = galactic_community_resolution_passed
			set_timed_country_flag = { flag = galactic_community_resolution_passed_general days = @resolution_flag_timer }
			add_modifier = { modifier = resolution_passed_diplomatic_weight days = 2200 }
		}
	}
	fail_effects = {
		hidden_effect = {
			set_timed_country_flag = { flag = galactic_community_resolution_failed_general days = @resolution_flag_timer }
			add_modifier = { modifier = resolution_failed_diplomatic_weight days = 2200 }
		}
	}

	potential = {
		ag_gamma_crisis_event_active = yes
		NOT = { has_global_flag = galactic_focus_crisis_ag_ancient_gamma_guardian }
	}

	active = { ag_gamma_crisis_event_active = yes }

	ai_weight = {
		base = 6.5
		modifier = {
			factor = 10
			has_ascension_perk = ap_defender_of_the_galaxy
			desc = ap_defender_of_the_galaxy
		}
		modifier = {
			factor = 1.2
			is_militarist = yes
			desc = ethic_militarist
		}
		modifier = {
			factor = 1.1
			is_xenophile = yes
			desc = ethic_xenophile
		}
		modifier = {
			factor = 0.75
			is_xenophobe = no
			AND = {
				check_variable = { which = ag_num_planets_destroyed_by_gamma_crisis value < 1 }
				check_variable = { which = ag_num_ships_destroyed_by_gamma_crisis value < 1 }
			}
			desc = ag_not_attacked_by_gamma_crisis
		}
		modifier = {
			factor = 0.5
			is_xenophobe = yes
			AND = {
				check_variable = { which = ag_num_planets_destroyed_by_gamma_crisis value < 1 }
				check_variable = { which = ag_num_ships_destroyed_by_gamma_crisis value < 1 }
			}
			desc = ag_not_attacked_by_gamma_crisis
		}
		modifier = {
			factor = 1.5
			check_variable = { which = ag_num_planets_destroyed_by_gamma_crisis value <= 5 }
			check_variable = { which = ag_num_planets_destroyed_by_gamma_crisis value > 0 }
			desc = ag_planets_destroyed_by_gamma_crisis_1
		}
		modifier = {
			factor = 3
			check_variable = { which = ag_num_planets_destroyed_by_gamma_crisis value <= 10 }
			check_variable = { which = ag_num_planets_destroyed_by_gamma_crisis value > 5 }
			desc = ag_planets_destroyed_by_gamma_crisis_2
		}
		modifier = {
			factor = 10
			check_variable = { which = ag_num_planets_destroyed_by_gamma_crisis value > 10 }
			desc = ag_planets_destroyed_by_gamma_crisis_3
		}
		modifier = {
			factor = 1.5
			check_variable = { which = ag_num_ships_destroyed_by_gamma_crisis value <= 100 }
			check_variable = { which = ag_num_ships_destroyed_by_gamma_crisis value > 25 }
			desc = ag_ships_destroyed_by_gamma_crisis_1
		}
		modifier = {
			factor = 2
			check_variable = { which = ag_num_ships_destroyed_by_gamma_crisis value <= 400 }
			check_variable = { which = ag_num_ships_destroyed_by_gamma_crisis value > 100 }
			desc = ag_ships_destroyed_by_gamma_crisis_2
		}
		modifier = {
			factor = 10
			check_variable = { which = ag_num_ships_destroyed_by_gamma_crisis value > 400 }
			desc = ag_ships_destroyed_by_gamma_crisis_3
		}
	}
}
resolution_galactic_focus_crisis_ag_zeta_crisis = {
	icon = "GFX_resolution_emergency_measure"

	resources = {
		category = resolutions
		cost = { influence = 100 }
	}
	target = no

	effect = {
		custom_tooltip = resolution_galactic_focus_crisis_ag_zeta_crisis_effect_success

		hidden_effect = {
			repeal_all_galactic_focus_resolutions = yes
			ag_repeal_all_crisis_resolutions = yes
			
			set_global_flag = galactic_focus_crisis_ag_zeta_crisis
			set_global_flag = galactic_community_crisis_fighting

			set_global_flag = galactic_community_resolution_passed
			set_timed_country_flag = { flag = galactic_community_resolution_passed_general days = @resolution_flag_timer }
			add_modifier = { modifier = resolution_passed_diplomatic_weight days = 2200 }
		}
	}
	fail_effects = {
		hidden_effect = {
			set_timed_country_flag = { flag = galactic_community_resolution_failed_general days = @resolution_flag_timer }
			add_modifier = { modifier = resolution_failed_diplomatic_weight days = 2200 }
		}
	}

	potential = {
		ag_zeta_crisis_event_active = yes
		NOT = { has_global_flag = galactic_focus_crisis_ag_zeta_crisis }
	}

	active = { ag_zeta_crisis_event_active = yes }

	ai_weight = {
		base = 6.5
		modifier = {
			factor = 10
			has_ascension_perk = ap_defender_of_the_galaxy
			desc = ap_defender_of_the_galaxy
		}
		modifier = {
			factor = 1.2
			is_militarist = yes
			desc = ethic_militarist
		}
		modifier = {
			factor = 1.1
			is_xenophile = yes
			desc = ethic_xenophile
		}
		modifier = {
			factor = 0.75
			is_xenophobe = no
			AND = {
				check_variable = { which = ag_num_planets_attacked_by_zeta_crisis value < 1 }
				check_variable = { which = ag_num_planets_destroyed_by_zeta_crisis value < 1 }
				check_variable = { which = ag_num_ships_destroyed_by_zeta_crisis value < 1 }
			}
			desc = ag_not_attacked_by_zeta_crisis
		}
		modifier = {
			factor = 0.5
			is_xenophobe = yes
			AND = {
				check_variable = { which = ag_num_planets_attacked_by_zeta_crisis value < 1 }
				check_variable = { which = ag_num_planets_destroyed_by_gamma_crisis value < 1 }
				check_variable = { which = ag_num_ships_destroyed_by_zeta_crisis value < 1 }
			}
			desc = ag_not_attacked_by_zeta_crisis
		}
		modifier = {
			factor = 1.25
			check_variable = { which = ag_num_planets_attacked_by_zeta_crisis value <= 2 }
			check_variable = { which = ag_num_planets_attacked_by_zeta_crisis value > 1 }
			desc = ag_planets_attacked_by_zeta_crisis_1
		}
		modifier = {
			factor = 1.875
			check_variable = { which = ag_num_planets_attacked_by_zeta_crisis value <= 5 }
			check_variable = { which = ag_num_planets_attacked_by_zeta_crisis value > 2 }
			desc = ag_planets_attacked_by_zeta_crisis_2
		}
		modifier = {
			factor = 9.375
			check_variable = { which = ag_num_planets_attacked_by_zeta_crisis value > 5 }
			desc = ag_planets_attacked_by_zeta_crisis_3
		}
		modifier = {
			factor = 1.5
			check_variable = { which = ag_num_planets_destroyed_by_zeta_crisis value <= 5 }
			check_variable = { which = ag_num_planets_destroyed_by_zeta_crisis value > 0 }
			desc = ag_planets_destroyed_by_zeta_crisis_1
		}
		modifier = {
			factor = 3
			check_variable = { which = ag_num_planets_destroyed_by_zeta_crisis value <= 10 }
			check_variable = { which = ag_num_planets_destroyed_by_zeta_crisis value > 5 }
			desc = ag_planets_destroyed_by_zeta_crisis_2
		}
		modifier = {
			factor = 10
			check_variable = { which = ag_num_planets_destroyed_by_zeta_crisis value > 10 }
			desc = ag_planets_destroyed_by_zeta_crisis_3
		}
		modifier = {
			factor = 1.5
			check_variable = { which = ag_num_ships_destroyed_by_zeta_crisis value <= 200 }
			check_variable = { which = ag_num_ships_destroyed_by_zeta_crisis value > 25 }
			desc = ag_ships_destroyed_by_zeta_crisis_1
		}
		modifier = {
			factor = 3
			check_variable = { which = ag_num_ships_destroyed_by_zeta_crisis value <= 400 }
			check_variable = { which = ag_num_ships_destroyed_by_zeta_crisis value > 100 }
			desc = ag_ships_destroyed_by_zeta_crisis_2
		}
		modifier = {
			factor = 10
			check_variable = { which = ag_num_ships_destroyed_by_zeta_crisis value > 400 }
			desc = ag_ships_destroyed_by_zeta_crisis_3
		}
	}
}