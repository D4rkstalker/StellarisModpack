MZILLI_SHADOW_MOON = {
	desc = "MZILLI_SHADOW_MOON_DESC"
	picture = "GFX_evt_alien_planet"
	level = 2

	spawn_chance = {
		modifier = {
			add = 0
		}
	}

	on_success = mzilli_anomaly_events.1
}

MZILLI_SUPERVOLCANO = {
	desc = {
		trigger = { NOT = { is_planet_class = pc_ocean } }
		text = "MZILLI_SUPERVOLCANO_DESC.not_ocean"
	}
	desc = {
		trigger = { is_planet_class = pc_ocean }
		text = "MZILLI_SUPERVOLCANO_DESC.ocean"
	}
	picture = "GFX_evt_arid"
	level = 3

	max_once_global = yes
	
	spawn_chance = {
		modifier = {
			add = 100
			FROM = { owner = { NOT = { is_ai = yes } } }
			OR = {
				is_planet_class = pc_continental
				is_planet_class = pc_tropical
				is_planet_class = pc_ocean
				is_planet_class = pc_arctic
				is_planet_class = pc_alpine
				is_planet_class = pc_tundra
				is_planet_class = pc_arid
				is_planet_class = pc_desert
				is_planet_class = pc_savannah
				is_planet_class = pc_gaia
				is_planet_class = pc_relic
			}
			NOR = {
				exists = owner
				has_planet_flag = prescripted_ideal
				has_modifier = bleak_planet
				has_modifier = holy_planet
			}
		}
		modifier = {
			factor = 3
			OR = {
				is_planet_class = pc_gaia
				is_planet_class = pc_relic
			}
		}
	}

	on_spawn = {
		save_global_event_target_as = supervolcano_planet
		set_planet_flag = colony_event
		add_modifier = { modifier = mzilli_supervolcano_1 days = -1 }
	}
	on_success = mzilli_anomaly_events.2
}

MZILLI_METEORS = {
	desc = "MZILLI_METEORS_DESC"
	picture = "GFX_evt_tomb_world"
	level = 3

	max_once = yes
	
	spawn_chance = {
		modifier = {
			add = 200
			is_planet_class = pc_nuked
			NOR = {
				solar_system = { has_star_flag = ratling_system }
				solar_system = { has_star_flag = superflare_system }
				solar_system = { has_star_flag = last_baol_system }
				solar_system = { has_star_flag = planet_with_too_many_moons_system }
				exists = owner
			}
		}
	}
	on_spawn = {
		set_planet_flag = colony_event
		while = {
			count = 5
			if = {
				limit = { has_deposit = d_bomb_crater }
				remove_deposit = d_bomb_crater
			}
		}
		add_deposit = d_impact_crater
		add_deposit = d_crater
		add_deposit = d_crater
		add_deposit = d_crater
	}
	on_success = mzilli_anomaly_events.3
}

MZILLI_REVERSE_AGING = {
	desc = "MZILLI_REVERSE_AGING_DESC"
	picture = "GFX_evt_ship_in_orbit"
	level = 8

	max_once_global = yes
	
	spawn_chance = {
		modifier = {
			add = 1
			OR = {
				is_planet_class = pc_barren
				is_planet_class = pc_barren_cold
				is_planet_class = pc_toxic
			}
			planet_size > 9
			planet_size < 26
			has_deposit = no
			#solar_system = { NOT = { any_system_planet = { has_modifier = mzilli_t_tauri_star } } }
		}
	}
	on_success = mzilli_anomaly_events.5
}

MZILLI_ELLIPTICAL_ORBIT = {
	desc = {
		trigger = { NOT = { is_moon = yes } }
		text = "MZILLI_ELLIPTICAL_ORBIT_DESC.planet"
	}
	desc = {
		trigger = { is_moon = yes }
		text = "MZILLI_ELLIPTICAL_ORBIT_DESC.moon"
	}
	picture = "GFX_evt_ship_in_orbit_3"
	level = 3

	max_once_global = yes
	
	spawn_chance = {
		modifier = {
			add = 30
			OR = {
				is_planet_class = pc_arctic
				is_planet_class = pc_ocean
				is_planet_class = pc_savannah
			}
			OR = {
				NOT = { is_moon = yes }
				orbit = {
					num_moons = 1
					OR = {
						is_planet_class = pc_gas_giant
						is_planet_class = pc_ice_giant
					}
				}
			}
			NOR = {
				has_moon = yes
				has_planet_flag = prescripted_ideal
				has_planet_flag = living_planet
				num_modifiers > 1
				solar_system = { has_star_flag = guardian }
			}
		}
	}

	on_spawn = {
		set_planet_flag = mzilli_elliptical_orbit_planet
		if = {
			limit = { is_moon = yes }
			orbit = { prevent_anomaly = yes }
		}
		solar_system = { set_star_flag = mzilli_elliptical_orbit_planet }
		if = {
			limit = {
				OR = {
					has_planet_flag = ab_planet
					has_planet_flag = abc_planet
					AND = {
						OR = {
							NOT = { exists = orbit }
							AND = {
								is_moon = yes
								orbit = { NOT = { exists = orbit } }
							}
						}
						solar_system = {
							count_system_planet = {
								limit = {
									is_star = yes
									NOT = { has_moon = yes }
								}
								count > 1
							}
						}
					}
				}
			}
			set_planet_flag = binary_planet
		}
		if = {
			limit = { is_planet_class = pc_ocean }
			random_list = {
				10 = { set_planet_flag = cooling_down }
				10 = { set_planet_flag = heating_up }
			}
		}
		set_planet_flag = colony_event
		planet_event = { id = mzilli_general_events.2 }
	}

	on_success = mzilli_anomaly_events.8
}

MZILLI_LUNA_TWO = {
	desc = "MZILLI_LUNA_TWO_DESC"
	picture = "GFX_evt_ship_in_orbit"
	level = 1

	max_once_global = yes
	
	spawn_chance = {
		modifier = {
			add = 1
			is_planet_class = pc_barren_cold
			FROM = {
				owner = {
					species_portrait = human
					any_planet_within_border = {
						has_planet_flag = planet_earth
						solar_system = { has_star_flag = sol }
					}
				}
			}
		}
	}

	on_spawn = {
		set_planet_entity = { entity = "cold_barren_planet_luna_entity" }
		random_galaxy_planet = {
			limit = {
				has_planet_flag = planet_earth
				solar_system = { has_star_flag = sol }
			}
			save_global_event_target_as = planet_earth
			random_moon = {
				limit = { NOT = { is_planet_class = pc_habitat } }
				save_global_event_target_as = moon_luna
			}
		}
	}
	on_success = mzilli_anomaly_events.9
}

MZILLI_RETROGRADE_ORBIT = {
	desc = "MZILLI_RETROGRADE_ORBIT_DESC"
	picture = "GFX_evt_ship_in_orbit_3"
	level = 5

	max_once = yes
	
	spawn_chance = {
		modifier = {
			add = 1
			NOR = {
				is_moon = yes
				is_asteroid = yes
				is_star = yes
				is_artificial = yes
				is_planet_class = pc_gas_giant
				is_planet_class = pc_ice_giant
				is_planet_class = pc_bespin
			}
			OR = {
				AND = {
					exists = orbit
					orbit = {
						any_moon = {
							OR = {
								is_planet_class = pc_gas_giant
								is_planet_class = pc_ice_giant
								is_planet_class = pc_bespin
							}
						}
					}
				}
				AND = {
					NOT = { exists = orbit }
					solar_system = {
						any_system_planet = {
							NOT = { exists = orbit }
							OR = {
								is_planet_class = pc_gas_giant
								is_planet_class = pc_ice_giant
								is_planet_class = pc_bespin
							}
						}
					}
				}
			}
		}
	}

	on_spawn = {
		add_modifier = {
			modifier = "mzilli_events_retrograde_orbit"
			days = -1
		}
		if = {
			limit = { exists = orbit }
			orbit = {
				random_moon = {
					limit = {
						OR = {
							is_planet_class = pc_gas_giant
							is_planet_class = pc_ice_giant
							is_planet_class = pc_bespin
						}
					}
					set_planet_flag = slingshot_planet
				}
			}
		}
		else = {
			solar_system = {
				random_system_planet = {
					limit = {
						NOT = { exists = orbit }
						OR = {
							is_planet_class = pc_gas_giant
							is_planet_class = pc_ice_giant
							is_planet_class = pc_bespin
						}
					}
					set_planet_flag = slingshot_planet
				}
			}
		}
	}
	on_success = mzilli_anomaly_events.10
}

MZILLI_LANDLOCKED = {
	desc = "MZILLI_LANDLOCKED_DESC"
	picture = "GFX_evt_city_planet"
	level = 3
	
	spawn_chance = {
		modifier = {
			add = 0
		}
	}

	on_success = mzilli_anomaly_events.12
}

MZILLI_MUSTAFAR = {
	desc = "MZILLI_MUSTAFAR_DESC"
	picture = "GFX_evt_shattered_planet"
	level = 4

	spawn_chance = {
		modifier = {
			add = 0
		}
	}

	on_success = mzilli_anomaly_events.25
}

MZILLI_TOXIC_OCEAN = {
	desc = "MZILLI_TOXIC_OCEAN_DESC"
	picture = "GFX_evt_ocean"
	level = 2

	max_once = yes
	
	spawn_chance = {
		modifier = {
			add = 1
			is_planet_class = pc_toxic
			solar_system = { NOT = { has_star_flag = sol } }
		}
	}

	on_spawn = { set_planet_entity = { entity = "ocean_planet_01_entity" } }
	on_success = mzilli_anomaly_events.26
}

MZILLI_CELESTIAL_PEAKS = {
	desc = "MZILLI_CELESTIAL_PEAKS_DESC"
	picture = "GFX_evt_frozen"
	level = 3

	max_once = yes
	
	spawn_chance = {
		modifier = {
			add = 250
			NOT = { has_modifier = high_gravity }
			OR = {
				has_modifier = low_gravity
				planet_size < 14
			}
			OR = {
				is_planet_class = pc_alpine
				is_planet_class = pc_arctic
				is_planet_class = pc_continental
			}
		}
	}

	on_spawn = {
		if = {
			limit = { NOT = { has_modifier = low_gravity } }
			add_modifier = {
				modifier = low_gravity
				days = -1
			}
		}
	}
	on_success = mzilli_anomaly_events.27
}

MZILLI_BROWN_DWARF = {
	desc = "MZILLI_BROWN_DWARF_DESC"
	picture = "GFX_evt_gas_giant"
	level = 6

	max_once = yes
	
	spawn_chance = {
		modifier = {
			add = 500
			is_planet_class = pc_gas_giant
			planet_size > 25
			solar_system = {
				NOR = {
					has_star_flag = sol
					has_star_flag = deneb_system
				}
			}
			has_moon = yes
			any_moon = {
				OR = {
					is_planet_class = pc_barren
					is_planet_class = pc_barren_cold
				}
				NOR = {
					has_modifier = terraforming_candidate
					has_anomaly = yes
				}
				planet_size < 26
				planet_size > 9
			}
			NOR = {
				has_modifier = gas_giant_civ
				has_modifier = gas_giant_colony
			}
		}
		modifier = {
			factor = 3
			num_moons > 2
		}
	}

	on_spawn = {
		set_planet_entity = { entity = "gas_giant_y_dwarf_entity" }
		every_moon = {
			limit = {
				OR = {
					is_planet_class = pc_barren
					is_planet_class = pc_barren_cold
				}
				NOR = {
					has_modifier = terraforming_candidate
					has_anomaly = yes
				}
				planet_size < 26
				planet_size > 9
			}
			prevent_anomaly = yes
			set_planet_flag = superjovian_tf_candidate
		}
	}
	on_success = mzilli_anomaly_events.28
}

MZILLI_DECAYING_MOON = {
	desc = "MZILLI_DECAYING_MOON_DESC"
	picture = "GFX_evt_ship_in_orbit_3"
	level = 3

	max_once = yes
	
	spawn_chance = {
		modifier = {
			factor = 0
			FROM = { owner = { is_ai = yes } }
		}
		modifier = {
			add = 1000
			is_moon = yes
			is_colonizable = yes
			NOR = {
				has_moon = yes
				is_planet_class = pc_city
				is_planet_class = pc_machine
			}
			orbit = {
				NOR = {
					has_ring = yes
					has_anomaly = yes
					any_moon = {
						orbit = {
							compare_distance = {
								closer_object = prev
								further_object = root
							}
						}
					}
				}
			}
		}
		modifier = {
			factor = 3
			orbit = {
				exists = owner
				owner = { is_country_type = primitive }
			}
		}
		modifier = {
			factor = 3
			has_modifier = mzilli_binary_planet_moon
		}
		modifier = {
			factor = 3
			is_planet_class = pc_gaia
		}
	}

	on_spawn = {
		solar_system = { set_star_flag = decaying_moon }
		add_modifier = {
			modifier = mzilli_decaying_moon_1
			days = -1
		}
		if = {
			limit = { NOT = { has_modifier = unstable_tectonics } }
			add_modifier = {
				modifier = unstable_tectonics
				days = -1
			}
		}
		orbit = {
			prevent_anomaly = yes
			if = {
				limit = {
					NOR = {
						is_planet_class = pc_gas_giant
						is_planet_class = pc_ice_giant
						is_planet_class = pc_bespin
					}
				}
				add_modifier = {
					modifier = mzilli_decaying_moon_planet_1
					days = -1
				}
				if = {
					limit = {
						NOR = {
							is_colonizable = yes
							exists = owner
						}
						planet_size < 25
					}
					set_planet_size = 25
				}
			}
		}
	}
	on_success = mzilli_anomaly_events.31
}

MZILLI_BINARY_SUNSET = {
	desc = {
		trigger = {
			NOR = {
				has_planet_flag = binary_planet
				has_planet_flag = trinary_planet
			}
		}
		text = "MZILLI_BINARY_SUNSET_DESC.1"
	}
	desc = {
		trigger = { has_planet_flag = binary_planet }
		text = "MZILLI_BINARY_SUNSET_DESC.2"
	}
	desc = {
		trigger = { has_planet_flag = trinary_planet }
		text = "MZILLI_BINARY_SUNSET_DESC.3"
	}
	picture = "GFX_evt_binary_stars"
	level = 1

	max_once = yes
	
	spawn_chance = {
		modifier = {
			add = 40
			from = { owner = { NOT = { has_ethic = ethic_gestalt_consciousness } } }
			OR = { 
				is_planet_class = pc_continental
				is_planet_class = pc_tropical
				is_planet_class = pc_ocean
				is_planet_class = pc_arid
				is_planet_class = pc_desert
				is_planet_class = pc_savannah
				is_planet_class = pc_arctic
				is_planet_class = pc_alpine
				is_planet_class = pc_tundra
				is_planet_class = pc_gaia
				is_planet_class = pc_nuked
				is_planet_class = pc_relic
			}
			OR = {
				has_planet_flag = ab_planet
				has_planet_flag = abc_planet
				AND = {
					OR = {
						NOT = { exists = orbit }
						AND = {
							is_moon = yes
							orbit = { NOT = { exists = orbit } }
						}
					}
					solar_system = {
						count_system_planet = {
							limit = {
								is_star = yes
								NOT = { has_moon = yes }
							}
							count > 1
						}
						count_system_planet = {
							limit = {
								is_star = yes
								NOT = { has_moon = yes }
							}
							count < 4
						}
					}
				}
			}
		}
	}

	on_spawn = {
		if = {
			limit = {
				OR = {
					has_planet_flag = abc_planet
					solar_system = {
						count_system_planet = {
							limit = {
								is_star = yes
								NOT = { has_moon = yes }
							}
							count = 3
						}
					}
				}
			}
			set_planet_flag = trinary_planet
		}
		else = { set_planet_flag = binary_planet }
	}
	on_success = mzilli_anomaly_events.39
}

MZILLI_YOUNG_STAR = {
	desc = "MZILLI_YOUNG_STAR_DESC"
	picture = "GFX_evt_unknown_ships"
	level = 4

	max_once = yes
	
	spawn_chance = {
		modifier = {
			add = 40
			is_star = yes
			solar_system = {
				is_inside_nebula = yes
				OR = {
					is_star_class = sc_m
					is_star_class = sc_k
					is_star_class = sc_g
					is_star_class = sc_f
					is_star_class = sc_a
					is_star_class = sc_b
					is_star_class = sc_o
				}
				NOR = {
					any_system_planet = { exists = owner }
					any_system_planet = { is_colonizable = yes }
					any_system_planet = { exists = archaeological_site }
					any_system_planet = { has_modifier = terraforming_candidate }
					any_system_planet = { has_modifier = mzilli_paraterraforming_candidate }
					any_system_planet = { has_modifier = mzilli_tachyon_core }
					any_system_planet = { has_modifier = mzilli_events_retrograde_orbit }
					any_system_planet = { has_modifier = mzilli_greenhouse_effect }
					any_system_planet = { is_planet_class = pc_ringworld_seam }
					any_system_planet = { is_planet_class = pc_ringworld_seam_damaged }
					has_star_flag = low_gravity_system
					has_star_flag = guardian
				}
			}
		}
		modifier = {
			factor = 10
			is_planet_class = pc_o_star
		}
	}

	on_spawn = {
		add_modifier = {
			modifier = mzilli_t_tauri_star
			days = -1
		}
		if = {
			limit = { has_deposit_for = shipclass_mining_station }
			clear_deposits = yes
		}
		solar_system = {
			every_system_planet = {
				limit = { NOT = { has_anomaly = yes } }
				prevent_anomaly = yes
			}
		}
	}
	on_success = mzilli_anomaly_events.42
}

MZILLI_CUTE_PLANET = {
	desc = "MZILLI_CUTE_PLANET_DESC"
	picture = "GFX_evt_alien_planet"
	level = 2

	max_once = yes
	
	spawn_chance = {
		modifier = {
			add = 50
			is_colonizable = yes
			NOR = {
				has_modifier = bleak_planet
				exists = owner
				is_planet_class = pc_nuked
				is_planet_class = pc_relic
				is_planet_class = pc_ringworld_habitable
				is_planet_class = pc_habitat
			}
			from = {
				owner = {
					OR = {
						NOT = { has_ethic = ethic_gestalt_consciousness }
						has_civic = civic_machine_servitor
					}
				}
			}
		}
	}

	on_spawn = {
	}
	on_success = mzilli_anomaly_events.43
}

MZILLI_RINGED_MOON = {
	desc = "MZILLI_RINGED_MOON_DESC"
	picture = "GFX_evt_ship_in_orbit_3"
	level = 4

	max_once = yes
	
	spawn_chance = {
		modifier = {
			add = 10
			is_moon = yes
			is_colonizable = yes
			orbit = { NOT = { has_ring = yes } }
		}
		modifier = {
			factor = 3
			orbit = {
				OR = {
					is_planet_class = pc_gas_giant
					is_planet_class = pc_ice_giant
					is_planet_class = pc_bespin
				}
			}
		}
	}

	on_spawn = { set_ring = yes }
	on_success = mzilli_anomaly_events.44
}

MZILLI_ROCKY_SNOWBALL = {
	desc = "MZILLI_ROCKY_SNOWBALL_DESC"
	picture = "GFX_evt_frozen"
	level = 6

	max_once = yes
	
	spawn_chance = {
		modifier = {
			add = 10
			is_planet_class = pc_frozen
			NOT = { is_moon = yes }
		}
	}

	on_spawn = {
		if = {
			limit = { NOT = { has_modifier = high_gravity } }
			add_modifier = {
				modifier = high_gravity
				days = -1
			}
		}
	}
	on_success = mzilli_anomaly_events.45
}

MZILLI_GREENHOUSE_EFFECT = {
	desc = "MZILLI_GREENHOUSE_EFFECT_DESC"
	picture = "GFX_evt_toxic"
	level = 3

	max_once = yes
	
	spawn_chance = {
		modifier = {
			add = 30
			OR = {
				is_planet_class = pc_barren
				is_planet_class = pc_relic
				is_planet_class = pc_nuked
			}
			planet_size > 13
			planet_size < 26
			NOR = {
				has_deposit = yes
				has_modifier = terraforming_candidate
				has_planet_flag = machine_world_1
				has_planet_flag = utopian_planet
				#solar_system = { any_system_planet = { has_modifier = mzilli_t_tauri_star } }
			}
			solar_system = {
				NOR = {
					is_star_class = sc_black_hole
					is_star_class = sc_neutron_star
					is_star_class = sc_pulsar
					is_star_class = sc_t
					is_star_class = sc_d
				}
				OR = {
					count_system_planet = {
						limit = { is_star = yes }
						count = 1
					}
					any_system_planet = {
						is_star = yes
						any_moon = {
							OR = {
								is_same_value = root
								any_moon = { is_same_value = root }
							}
						}
						NOR = {
							is_planet_class = pc_t_star
							is_planet_class = pc_d_star
							is_planet_class = pc_neutron_star
							is_planet_class = pc_pulsar
							is_planet_class = pc_black_hole
						}
					}
				}
			}
		}
	}

	on_spawn = {
		add_modifier = {
			modifier = mzilli_greenhouse_effect
			days = -1
		}
		set_planet_flag = greenhouse_planet
		solar_system = {
			if = {
				limit = {
					any_system_planet = {
						is_star = yes
						any_moon = {
							OR = {
								is_same_value = root
								any_moon = { is_same_value = root }
							}
						}
					}
				}
				random_system_planet = {
					limit = {
						is_star = yes
						any_moon = {
							OR = {
								is_same_value = root
								any_moon = { is_same_value = root }
							}
						}
					}
					set_planet_flag = greenhouse_sun
				}
			}
			else = {
				random_system_planet = {
					limit = { is_star = yes }
					set_planet_flag = greenhouse_sun
				}
			}
		}
		if = {
			limit = { FROM = { owner = { any_owned_planet = { has_planet_flag = planet_earth } } } }
			if = {
				limit = { NOT = { any_galaxy_planet = { has_planet_flag = planet_venus } } }
				random_galaxy_planet = {
					limit = {
						is_planet_class = pc_toxic
						NOR = {
							is_moon = yes
							has_moon = yes
						}
						solar_system = { has_star_flag = sol }
					}
					set_planet_flag = planet_venus
				}
			}
			random_galaxy_planet = {
				limit = { has_planet_flag = planet_venus }
				save_global_event_target_as = planet_venus
			}
		}
	}
	on_success = mzilli_anomaly_events.46
}

MZILLI_CROOKED = {
	desc = {
		trigger = {
			NOR = {
				is_planet_class = pc_t_star
				is_planet_class = pc_gas_giant
				is_planet_class = pc_ice_giant
				is_planet_class = pc_bespin
			}
		}
		text = "MZILLI_CROOKED_DESC.a"
	}
	desc = {
		trigger = { is_planet_class = pc_t_star }
		text = "MZILLI_CROOKED_DESC.b"
	}
	desc = {
		trigger = {
			OR = {
				is_planet_class = pc_gas_giant
				is_planet_class = pc_ice_giant
				is_planet_class = pc_bespin
			}
		}
		text = "MZILLI_CROOKED_DESC.c"
	}
	picture = "GFX_evt_ship_in_orbit_2"

	max_once = yes

	level = 3
	
	spawn_chance = {
		modifier = {
			add = 100
			has_ring = yes
			OR = {
				is_planet_class = pc_continental
				is_planet_class = pc_tropical
				is_planet_class = pc_ocean
				is_planet_class = pc_arid
				is_planet_class = pc_desert
				is_planet_class = pc_savannah
				is_planet_class = pc_arctic
				is_planet_class = pc_alpine
				is_planet_class = pc_tundra
				is_planet_class = pc_gaia
				is_planet_class = pc_nuked
			}
		}
		modifier = {
			add = 1
			OR = {
				is_planet_class = pc_gas_giant
				is_planet_class = pc_ice_giant
				is_planet_class = pc_bespin
				is_planet_class = pc_t_star
			}
			has_moon = yes
		}
	}

	on_spawn = {
		if = {
			limit = {
				OR = {
					is_planet_class = pc_gas_giant
					is_planet_class = pc_ice_giant
					is_planet_class = pc_bespin
				}
			}
			if = {
				limit = { has_ring = no }
				set_planet_entity = { entity = "gas_giant_mzilli_tilted_entity" }
			}
			else = {
				set_ring = no
				set_planet_entity = { entity = "gas_giant_mzilli_tilted_ringed_entity" }
			}
		}
		else = {
			set_ring = no
			if = {
				limit = { is_planet_class = pc_t_star }
				set_planet_entity = { entity = "t_star_class_star_tilted_entity" }
			}
			else_if = {
				limit = { is_planet_class = pc_continental }
				set_planet_entity = { entity = "continental_planet_mzilli_tilted_entity" }
			}
			else_if = {
				limit = { is_planet_class = pc_tropical }
				set_planet_entity = { entity = "tropical_planet_mzilli_tilted_entity" }
			}
			else_if = {
				limit = { is_planet_class = pc_ocean }
				set_planet_entity = { entity = "ocean_planet_mzilli_tilted_entity" }
			}
			else_if = {
				limit = { is_planet_class = pc_arid }
				set_planet_entity = { entity = "arid_planet_mzilli_tilted_entity" }
			}
			else_if = {
				limit = { is_planet_class = pc_desert }
				set_planet_entity = { entity = "desert_planet_mzilli_tilted_entity" }
			}
			else_if = {
				limit = { is_planet_class = pc_savannah }
				set_planet_entity = { entity = "savannah_planet_mzilli_tilted_entity" }
			}
			else_if = {
				limit = { is_planet_class = pc_alpine }
				set_planet_entity = { entity = "alpine_planet_mzilli_tilted_entity" }
			}
			else_if = {
				limit = { is_planet_class = pc_arctic }
				set_planet_entity = { entity = "arctic_planet_mzilli_tilted_entity" }
			}
			else_if = {
				limit = { is_planet_class = pc_tundra }
				set_planet_entity = { entity = "tundra_planet_mzilli_tilted_entity" }
			}
			else_if = {
				limit = { is_planet_class = pc_gaia }
				set_planet_entity = { entity = "gaia_planet_mzilli_tilted_entity" }
			}
			else_if = {
				limit = { is_planet_class = pc_nuked }
				set_planet_entity = { entity = "nuked_planet_mzilli_tilted_entity" }
			}
		}
		add_modifier = { modifier = mzilli_crooked_planet days = -1 }
		if = {
			limit = { NOT = { any_galaxy_planet = { has_planet_flag = planet_uranus } } }
			random_galaxy_planet = {
				limit = {
					OR = {
						is_planet_class = pc_gas_giant
						is_planet_class = pc_ice_giant
					}
					OR = {
						NOT = { has_moon = yes }
						any_moon = { has_planet_flag = moon_titania }
					}
					solar_system = { has_star_flag = sol }
				}
				set_planet_flag = planet_uranus
				if = {
					limit = { NOT = { has_modifier = mzilli_crooked_planet } }
					add_modifier = { modifier = mzilli_crooked_planet days = -1 }
				}
				set_planet_entity = { entity = "gas_giant_uranus_entity" }
			}
		}
	}
	on_success = mzilli_anomaly_events.49
}

MZILLI_SUPERNOVA_REMNANT = {
	desc = "MZILLI_SUPERNOVA_REMNANT_DESC"
	picture = "GFX_evt_supernova"
	level = 6

	max_once = yes
	
	spawn_chance = {
		modifier = {
			add = 30
			OR = {
				is_planet_class = pc_black_hole
				is_planet_class = pc_neutron_star
				is_planet_class = pc_pulsar
			}
			FROM = { owner = { NOT = { has_ethic = ethic_gestalt_consciousness } } }
			solar_system = {
				NOR = {
					is_star_class = sc_binary_cygnus_x1
					has_star_flag = sagittarius_a
					has_star_flag = mzilli_supernova_system
					has_star_flag = lgate
					has_star_flag = guardians_technosphere_system
					has_star_flag = ruined_matter_decompressor_system
					has_star_flag = ruined_nexus_system
					any_system_planet = {	# Don't want this in the Great Wound system
						is_planet_class = pc_black_hole
						NOT = { is_same_value = root }
					}
				}
			}
		}
		modifier = {
			factor = 10
			solar_system = { has_star_flag = mzilli_real_stars }
		}
	}

	on_spawn = {
	}
	on_success = mzilli_anomaly_events.51
}

MZILLI_FRAIL_FUSION = {
	desc = "MZILLI_FRAIL_FUSION_DESC"

	max_once_global = yes

	picture = "GFX_evt_star_yellow"
	level = 7
	
	spawn_chance = {
		modifier = {
			add = 10
			OR = {
				is_planet_class = pc_m_giant_star
				is_planet_class = pc_k_giant_star
				is_planet_class = pc_k_star
				is_planet_class = pc_g_star
				is_planet_class = pc_f_star
				is_planet_class = pc_a_star
				is_planet_class = pc_b_star
			}
			OR = {
				# Unary system
				solar_system = {
					count_system_planet = {
						limit = { is_star = yes }
						count = 1
					}
					any_system_planet = {
						OR = {
							exists = owner
							is_colonizable = yes
						}
						NOR = {
							is_artificial = yes
							is_planet_class = pc_city
							is_planet_class = pc_machine
						}
					}
				}
				# S-type binary/trinary system
				AND = {
					has_moon = yes
					any_moon = {
						OR = {
							AND = {
								OR = {
									exists = owner
									is_colonizable = yes
								}
								NOR = {
									is_artificial = yes
									is_planet_class = pc_city
									is_planet_class = pc_machine
								}
							}
							AND = {
								has_moon = yes
								any_moon = {
									AND = {
										OR = {
											exists = owner
											is_colonizable = yes
										}
										NOR = {
											is_artificial = yes
											is_planet_class = pc_city
											is_planet_class = pc_machine
										}
									}
								}
							}
						}
					}
				}
			}
			NOR = {
				solar_system = { any_system_planet = { has_planet_flag = sick_plants } }
				solar_system = { has_star_flag = superflare_system }
				solar_system = { has_star_flag = living_planet_system }
				has_deposit_for = shipclass_mining_station
				AND = {
					NOT = { has_moon = yes }
					solar_system = { any_system_planet = { has_modifier = lush_planet } }
				}
				AND = {
					has_moon = yes
					any_moon = {
						OR = {
							has_modifier = lush_planet
							AND = {
								has_moon = yes
								any_moon = { has_modifier = lush_planet }
							}
						}
					}
				}
			}
		}
		modifier = {
			factor = 3
			OR = {
				AND = {
					NOT = { has_moon = yes }
					solar_system = { any_system_planet = { has_modifier = bleak_planet } }
				}
				AND = {
					has_moon = yes
					any_moon = {
						OR = {
							has_modifier = bleak_planet
							AND = {
								has_moon = yes
								any_moon = { has_modifier = bleak_planet }
							}
						}
					}
				}
			}
		}
	}

	on_spawn = {
		if = {
			limit = { has_moon = yes }
			every_moon = {
				apply_frail_fusion_effect = yes
				every_moon = { apply_frail_fusion_effect = yes }
			}
		}
		else = { solar_system = { every_system_planet = { apply_frail_fusion_effect = yes } } }
	}
	on_success = mzilli_anomaly_events.53
}

MZILLI_TIDALLY_LOCKED = {
	desc = "MZILLI_TIDALLY_LOCKED_DESC"
	picture = "GFX_evt_ship_in_orbit_2"
	level = 3

	max_once = yes
	
	spawn_chance = {
		modifier = {
			add = 30
			is_colonizable = yes
			NOR = {
				is_moon = yes
				is_artificial = yes
				is_planet_class = pc_city
				is_planet_class = pc_machine
			}
			solar_system = {
				OR = {
					count_system_planet = {
						limit = { is_star = yes }
						count = 1
					}
					AND = {
						exists = orbit
						orbit = { is_star = yes }
					}
				}
			}
		}
		modifier = {
			factor = 100000
			OR = {
				has_modifier = tidal_locked
				is_planet_class = pc_tidally_locked
				is_planet_class = pc_tidallylocked
			}
		}
		modifier = {
			factor = 3
			OR = {
				solar_system = { is_star_class = sc_m }
				AND = {
					exists = orbit
					orbit = { is_planet_class = pc_m_star }
				}
			}
		}
	}

	on_spawn = {
		if = {
			limit = {
				NOR = {
					has_modifier = tidal_locked
					is_planet_class = pc_tidally_locked
					is_planet_class = pc_tidallylocked
				}
			}
			add_modifier = {
				modifier = tidal_locked
				days = -1
			}
		}
		if = {
			limit = { exists = orbit }
			orbit = { set_planet_flag = tidally_locked_sun }
		}
		else = {
			solar_system = {
				random_system_planet = {
					limit = { is_star = yes }
					set_planet_flag = tidally_locked_sun
				}
			}
		}
		if = {
			limit = { has_global_flag = mzilli_personal }
			set_tidal_locked_entity = yes
		}
	}
	on_success = mzilli_anomaly_events.56
}

MZILLI_BAD_POETRY = {
	desc = "MZILLI_BAD_POETRY_DESC"
	picture = "GFX_evt_mining_station"
	level = 3

	max_once = yes
	
	spawn_chance = {
		modifier = {
			add = 10
			is_asteroid = yes
			NOT = { has_deposit_for = shipclass_mining_station }
		}
	}
	on_success = mzilli_anomaly_events.58
}

MZILLI_LOW_GRAVITY = {
	desc = "MZILLI_LOW_GRAVITY_DESC"
	picture = "GFX_evt_relic_world_building"
	level = 4

	max_once = yes
	
	spawn_chance = {
		modifier = {
			add = 3
			OR = {
				is_planet_class = pc_barren
				is_planet_class = pc_barren_cold
			}
			planet_size < 13
			NOR = {
				has_deposit_for = shipclass_mining_station
				has_modifier = terraforming_candidate
				has_modifier = strong_magnetic_field
				has_modifier = high_gravity
				#solar_system = { any_system_planet = { has_modifier = mzilli_t_tauri_star } }
				solar_system = { is_star_class = sc_black_hole }
				solar_system = { is_star_class = sc_pulsar }
				solar_system = { is_star_class = sc_neutron_star }
				solar_system = {
					any_system_planet = {
						OR = {
							is_planet_class = pc_black_hole
							is_planet_class = pc_pulsar
							is_planet_class = pc_neutron_star
						}
						has_moon = yes
						any_moon = {
							OR = {
								is_same_value = root
								any_moon = { is_same_value = root }
							}
						}
					}
				}
			}
		}
	}
	on_spawn = {
		if = {
			limit = { NOT = { has_modifier = low_gravity } }
			add_modifier = {
				modifier = low_gravity
				days = -1
			}
		}
	}
	on_success = mzilli_anomaly_events.59
}

MZILLI_MOONMOON = {
	desc = "MZILLI_MOONMOON_DESC"
	picture = "GFX_evt_ship_in_orbit_3"
	level = 4

	spawn_chance = {
		modifier = {
			add = 0
		}
	}

	on_success = mzilli_anomaly_events.60
}

MZILLI_SICK_PLANTS = {
	desc = "MZILLI_SICK_PLANTS_DESC"
	picture = "GFX_evt_baol_ruins"
	level = 3

	max_once = yes
	
	spawn_chance = {
		modifier = {
			add = 40
			is_colonizable = yes
			NOR = {
				is_artificial = yes
				is_planet_class = pc_gaia
				is_planet_class = pc_bespin
				is_planet_class = pc_machine
				is_planet_class = pc_city
			}
			solar_system = {
				NOT = { any_system_planet = { has_planet_flag = frail_fusion } }
				OR = {
					is_star_class = sc_d
					is_star_class = sc_b
					is_star_class = sc_a
					is_star_class = sc_f
					is_star_class = sc_g
					is_star_class = sc_k
					is_star_class = sc_k_giant
					is_star_class = sc_m
					is_star_class = sc_m_giant
					any_system_planet = {
						OR = {
							is_planet_class = pc_d_star
							is_planet_class = pc_b_star
							is_planet_class = pc_a_star
							is_planet_class = pc_f_star
							is_planet_class = pc_g_star
							is_planet_class = pc_k_star
							is_planet_class = pc_k_giant_star
							is_planet_class = pc_m_star
							is_planet_class = pc_m_giant_star
						}
						any_moon = {
							OR = {
								is_same_value = root
								any_moon = { is_same_value = root }
							}
						}
					}
				}
			}
		}
		modifier = {
			factor = 3
			has_modifier = bleak_planet
		}
	}
	on_spawn = {
		if = {
			limit = { NOT = { has_modifier = bleak_planet } }
			add_modifier = {
				modifier = bleak_planet
				days = -1
			}
		}
		set_planet_flag = sick_plants
		if = {
			limit = {
				solar_system = {
					OR = {
						is_star_class = sc_m
						is_star_class = sc_m_giant
						any_system_planet = {
							OR = {
								is_planet_class = pc_m_star
								is_planet_class = pc_m_giant_star
							}
							any_moon = {
								OR = {
									is_same_value = root
									any_moon = { is_same_value = root }
								}
							}
						}
					}
				}
			}
			set_planet_flag = red_sun
		}
		else_if = {
			limit = {
				solar_system = {
					OR = {
						is_star_class = sc_k
						is_star_class = sc_k_giant
						any_system_planet = {
							OR = {
								is_planet_class = pc_k_star
								is_planet_class = pc_k_giant_star
							}
							any_moon = {
								OR = {
									is_same_value = root
									any_moon = { is_same_value = root }
								}
							}
						}
					}
				}
			}
			set_planet_flag = orange_sun
		}
		else_if = {
			limit = {
				solar_system = {
					OR = {
						is_star_class = sc_g
						any_system_planet = {
							is_planet_class = pc_g_star
							any_moon = {
								OR = {
									is_same_value = root
									any_moon = { is_same_value = root }
								}
							}
						}
					}
				}
			}
			set_planet_flag = yellow_sun
		}
		else_if = {
			limit = {
				solar_system = {
					OR = {
						is_star_class = sc_f
						is_star_class = sc_d
						any_system_planet = {
							OR = {
								is_planet_class = pc_f_star
								is_planet_class = pc_d_star
							}
							any_moon = {
								OR = {
									is_same_value = root
									any_moon = { is_same_value = root }
								}
							}
						}
					}
				}
			}
			set_planet_flag = white_sun
		}
		else_if = {
			limit = {
				solar_system = {
					OR = {
						is_star_class = sc_a
						is_star_class = sc_b
						any_system_planet = {
							OR = {
								is_planet_class = pc_a_star
								is_planet_class = pc_b_star
							}
							any_moon = {
								OR = {
									is_same_value = root
									any_moon = { is_same_value = root }
								}
							}
						}
					}
				}
			}
			set_planet_flag = blue_sun
		}
	}
	on_success = mzilli_anomaly_events.61
}

MZILLI_EGG_PLANET = {
	desc = "MZILLI_EGG_PLANET_DESC"
	picture = "GFX_evt_gas_giant"
	level = 3

	max_once = yes
	
	spawn_chance = {
		modifier = {
			add = 5
			OR = {
				is_planet_class = pc_gas_giant
				is_planet_class = pc_ice_giant
			}
			solar_system = { NOT = { has_star_flag = sol } }
		}
	}
	on_spawn = {
		if = {
			limit = { NOT = { has_modifier = strong_magnetic_field } }
			add_modifier = {
				modifier = strong_magnetic_field
				days = -1
			}
		}
	}
	on_success = mzilli_anomaly_events.63
}

#MZILLI_POOR_DUMB_PACIFISTS = {
#	desc = "MZILLI_POOR_DUMB_PACIFISTS_DESC"
#	picture = "GFX_evt_ruined_system"
#	level = 2
#	max_once = yes
#	spawn_chance = {
#		modifier = {
#			add = 1
#			NOR = {
#				is_star = yes
#				is_asteroid = yes
#				is_artificial = yes
#			}
#		}
#	}
#	on_spawn = {
#	}
#	on_success = mzilli_anomaly_events.64
#}

MZILLI_SHATTERED_MOUNTAINS = {
	desc = "MZILLI_SHATTERED_MOUNTAINS_DESC"
	picture = "GFX_evt_alien_planet"
	level = 4

	max_once = yes

	spawn_chance = {
		modifier = {
			add = 100
			is_colonizable = yes
			NOR = {
				is_artificial = yes
				exists = owner
				has_modifier = high_gravity
			}
			OR = {
				has_modifier = low_gravity
				planet_size < 14
			}
		}
	}

	on_success = mzilli_anomaly_events.65
}

MZILLI_LAST_OUTPOST = {
	desc = "MZILLI_LAST_OUTPOST_DESC"
	picture = "GFX_evt_habitable_dig_site"
	level = 4

	max_once = yes
	
	spawn_chance = {
		modifier = {
			add = 30
			OR = {
				is_planet_class = pc_barren
				is_planet_class = pc_barren_cold
			}
			NOT = { has_modifier = terraforming_candidate }
			planet_size < 26
			planet_size > 9
			solar_system = {
				NOR = {
					any_system_planet = { exists = owner }
					has_star_flag = last_baol_system
					has_star_flag = planet_with_too_many_moons_system
					has_star_flag = ratling_system
				}
				OR = {
					any_system_planet = {
						is_star = yes
						has_moon = yes
						any_moon = {
							OR = {
								is_same_value = root
								any_moon = { is_same_value = root }
							}
						}
						any_moon = {
							OR = {
								is_planet_class = pc_nuked
								any_moon = { is_planet_class = pc_nuked }
							}
						}
					}
					AND = {
						NOT = {
							any_system_planet = {
								is_star = yes
								has_moon = yes
							}
						}
						any_system_planet = {
							OR = {
								is_planet_class = pc_nuked
								any_moon = { is_planet_class = pc_nuked }
							}
						}
					}
				}
			}
		}
		modifier = {
			factor = 3
			is_moon = yes
			orbit = {
				OR = {
					is_planet_class = pc_nuked
					any_moon = { is_planet_class = pc_nuked }
				}
			}
		}
	}

	on_spawn = {
		solar_system = {
			random_system_planet = {
				limit = { is_planet_class = pc_nuked }
				set_planet_flag = last_outpost_builders
			}
		}
	}

	on_success = mzilli_anomaly_events.66
}

MZILLI_ROGUE_PLANET = {
	desc = "MZILLI_ROGUE_PLANET_DESC"
	picture = "GFX_evt_sabotaged_ship"
	level = 4

	max_once_global = yes
	
	spawn_chance = {
		modifier = {
			add = 1
			OR = {
				is_planet_class = pc_t_star
				NOR = {
					is_star = yes
					is_moon = yes
					is_asteroid = yes
				}
			}
			solar_system = {
				NOR = {
					is_star_class = sc_black_hole
					is_star_class = sc_neutron_star
					is_star_class = sc_pulsar
					is_star_class = sc_t
					is_star_class = sc_o
					any_system_planet = { is_colonizable = yes }
					any_system_planet = { exists = owner }
					any_system_planet = { is_artificial = yes }
					has_megastructure = yes
					has_star_flag = lcluster
				}
			}
			NOT = { any_system = { has_star_flag = rogue_planet_lament } }
		}
	}

	on_success = mzilli_anomaly_events.68
}

MZILLI_DEXTRO_PLANET = {
	desc = "MZILLI_DEXTRO_PLANET_DESC"
	picture = "GFX_evt_alien_planet"
	level = 5

	max_once = yes
	
	spawn_chance = {
		modifier = {
			add = 50
			is_colonizable = yes
			NOR = {
				exists = owner
				has_modifier = titanic_life
				is_artificial = yes
				is_planet_class = pc_city
				is_planet_class = pc_machine
				is_planet_class = pc_bespin
				is_planet_class = pc_gaia
				is_planet_class = pc_dormant
				is_planet_class = pc_dormant_cold
				is_planet_class = pc_dormant_toxic
				is_planet_class = pc_dormant_frozen
			}
		}
	}

	on_spawn = {
		add_modifier = {
			modifier = "mzilli_dextro_protein"
			days = -1
		}
	}
	on_success = mzilli_anomaly_events.71
}

MZILLI_ANTIMATTER_ASTEROID = {
	desc = "MZILLI_ANTIMATTER_ASTEROID_DESC"
	picture = "GFX_evt_asteroid_field"
	level = 3

	max_once = yes
	
	spawn_chance = {
		modifier = {
			add = 10
			is_asteroid = yes
			NOT = { has_deposit = yes }
		}
	}

	on_success = mzilli_anomaly_events.72
}

MZILLI_DAMAGED_RAILGUN = {
	desc = "MZILLI_DAMAGED_RAILGUN_DESC"
	picture = "GFX_evt_space_funeral"
	level = 3

	max_once = yes
	
	spawn_chance = {
		modifier = {
			add = 1
			is_star = yes
			is_inside_nebula = yes
			NOR = {
				is_planet_class = pc_black_hole
				is_planet_class = pc_neutron_star
				is_planet_class = pc_pulsar
				is_planet_class = pc_t_star
				is_planet_class = pc_d_star
			}
		}
	}

	on_success = mzilli_anomaly_events.73
}

MZILLI_POST_APOCALYPSE = {
	desc = "MZILLI_POST_APOCALYPSE_DESC"
	picture = "GFX_evt_tomb_world"
	level = 4

	max_once = yes
	
	spawn_chance = {
		modifier = {
			add = 200
			is_planet_class = pc_nuked
			NOR = {
				exists = owner
				solar_system = { has_star_flag = last_baol_system }
				solar_system = { has_star_flag = superflare_system }
				solar_system = { has_star_flag = planet_with_too_many_moons_system }
			}
		}
	}

	on_success = mzilli_anomaly_events.74
}

MZILLI_RED_GIANT_PLANET = {
	desc = "MZILLI_RED_GIANT_PLANET_DESC"
	picture = "GFX_evt_desert"
	level = 6

	max_once = yes
	
	spawn_chance = {
		modifier = {
			add = 100
			OR = {
				is_planet_class = pc_arid
				is_planet_class = pc_desert
				is_planet_class = pc_savannah
			}
			solar_system = {
				OR = {
					is_star_class = sc_m_giant
					is_star_class = sc_k_giant
					any_system_planet = {
						OR = {
							is_planet_class = pc_m_giant_star
							is_planet_class = pc_k_giant_star
						}
						has_moon = yes
						any_moon = {
							OR = {
								is_same_value = root
								any_moon = { is_same_value = root }
							}
						}
					}
				}
			}
		}
	}

	on_spawn = {
	}

	on_success = mzilli_anomaly_events.75
}

MZILLI_NOT_BROWN_DWARF = {
	desc = "MZILLI_NOT_BROWN_DWARF_DESC"
	picture = "GFX_evt_star_brown_dwarf"
	level = 1

	max_once = yes

	spawn_chance = {
		modifier = {
			add = 50
			OR = {
				is_planet_class = pc_neutron_star
				is_planet_class = pc_pulsar
			}
			FROM = {
				NOR = {
					leader = { has_trait = leader_trait_meticulous }
					owner = { has_ethic = ethic_gestalt_consciousness }
				}
			}
			solar_system = { NOT = { has_star_flag = mzilli_real_stars } }
		}
		modifier = {
			factor = 3
			FROM = {
				leader = {
					OR = {
						has_trait = leader_trait_carefree
						has_trait = leader_trait_substance_abuser
					}
				}
			}
		}
	}

	on_success = mzilli_anomaly_events.77
}

MZILLI_HIGH_GRAVITY = {
	desc = "MZILLI_HIGH_GRAVITY_DESC"
	picture = "GFX_evt_relic_world_street"
	level = 4

	max_once = yes
	
	spawn_chance = {
		modifier = {
			add = 10
			OR = {
				is_planet_class = pc_barren
				is_planet_class = pc_barren_cold
				is_planet_class = pc_toxic
			}
			planet_size > 25
			NOR = {
				has_deposit_for = shipclass_mining_station
				has_modifier = terraforming_candidate
				has_modifier = low_gravity
				has_modifier = mineral_rich
				has_modifier = ultra_rich
				#solar_system = { any_system_planet = { has_modifier = mzilli_t_tauri_star } }
				solar_system = { is_star_class = sc_black_hole }
				solar_system = { is_star_class = sc_pulsar }
				solar_system = { is_star_class = sc_neutron_star }
				solar_system = {
					any_system_planet = {
						OR = {
							is_planet_class = pc_black_hole
							is_planet_class = pc_pulsar
							is_planet_class = pc_neutron_star
						}
						has_moon = yes
						any_moon = {
							OR = {
								is_same_value = root
								any_moon = { is_same_value = root }
							}
						}
					}
				}
			}
		}
	}
	on_spawn = {
		if = {
			limit = { NOT = { has_modifier = high_gravity } }
			add_modifier = {
				modifier = high_gravity
				days = -1
			}
		}
		if = {
			limit = { NOT = { has_modifier = mineral_poor } }
			add_modifier = {
				modifier = mineral_poor
				days = -1
			}
		}
	}
	on_success = mzilli_anomaly_events.78
}

MZILLI_LUNAR_LAUNCH_SITE = {
	desc = "MZILLI_LUNAR_LAUNCH_SITE_DESC"
	picture = "GFX_evt_habitable_dig_site"
	level = 4

	max_once = yes
	
	spawn_chance = {
		modifier = {
			add = 1000
			is_moon = yes
			OR = {
				is_planet_class = pc_barren
				is_planet_class = pc_barren_cold
				is_planet_class = pc_frozen
			}
			planet_size < 11
			orbit = {
				OR = {
					is_planet_class = pc_nuked
					any_moon = { is_planet_class = pc_nuked }
				}
				planet_size > 10
			}
			NOT = { has_deposit_for = shipclass_mining_station }
		}
		modifier = {
			factor = 10
			solar_system = { has_star_flag = sol }
		}
	}

	on_spawn = {
		orbit = {
			if = {
				limit = { NOT = { is_planet_class = pc_nuked } }
				random_moon = {
					limit = { is_planet_class = pc_nuked }
					set_planet_flag = lunar_base_builders
				}
			}
			else = { set_planet_flag = lunar_base_builders }
		}
	}

	on_success = mzilli_anomaly_events.79
}

MZILLI_VEILED_PLANET = {
	desc = "MZILLI_VEILED_PLANET_DESC"
	picture = "GFX_evt_ship_in_orbit"
	level = 3

	spawn_chance = {
		modifier = {
			add = 30
			OR = {
				is_planet_class = pc_tropical
				is_planet_class = pc_ocean
				is_planet_class = pc_savannah
			}
		}
	}

	on_spawn = {
		if = {
			limit = {
				OR = {
					has_planet_flag = ab_planet
					has_planet_flag = abc_planet
					solar_system = {
						count_system_planet = {
							limit = { is_star = yes }
							count > 1
						}
						NOT = {
							any_system_planet = {
								is_star = yes
								any_moon = { NOT = { is_moon = yes } }
							}
						}
					}
				}
			}
			set_planet_flag = binary_planet
		}
		if = {
			limit = { NOT = { has_modifier = hazardous_weather } }
			add_modifier = {
				modifier = hazardous_weather
				days = -1
			}
		}
		add_modifier = {
			modifier = mzilli_veiled
			days = -1
		}
		if = {
			limit = { is_planet_class = pc_ocean }
			set_planet_entity = { entity = "ocean_planet_veiled_entity" }
		}
		else = { set_planet_entity = { entity = "tropical_planet_veiled_entity" } }
	}

	on_success = mzilli_anomaly_events.81
}

MZILLI_STARCHIP = {
	desc = "MZILLI_STARCHIP_DESC"
	picture = "GFX_evt_ship_in_orbit"
	level = 3

	spawn_chance = {
		modifier = {
			add = 150
			OR = {
				is_planet_class = pc_gas_giant
				is_planet_class = pc_ice_giant
				is_planet_class = pc_bespin
				is_planet_class = pc_t_star
			}
			solar_system = {
				any_neighbor_system = {
					any_system_planet = {
						is_planet_class = pc_nuked
						OR = {
							NOT = { exists = owner }
							AND = {
								exists = owner
								owner = { is_country_type = primitive }
							}
						}
					}
				}
			}
		}
	}

	on_spawn = {
		solar_system = {
			random_neighbor_system = {
				limit = {
					any_system_planet = {
						is_planet_class = pc_nuked
						OR = {
							NOT = { exists = owner }
							AND = {
								exists = owner
								owner = { is_country_type = primitive }
							}
						}
					}
				}
				set_star_flag = starchip_origin_for_@root
			}
		}
	}

	on_success = mzilli_anomaly_events.82
}

MZILLI_BIG_MOON = {
	desc = "MZILLI_BIG_MOON_DESC"
	picture = "GFX_evt_ship_in_orbit_3"
	level = 4

	spawn_chance = {
		modifier = {
			add = 9000000
			is_moon = yes
			orbit = {
				NOR = {
					is_planet_class = pc_gas_giant
					is_planet_class = pc_ice_giant
					is_planet_class = pc_bespin
				}
			}
			NOR = {
				has_modifier = high_gravity
				has_modifier = mineral_rich
				has_modifier = ultra_rich
			}
			OR = {
				AND = {
					planet_size > 12
					orbit = { planet_size < 13 }
				}
				AND = {
					planet_size > 13
					orbit = { planet_size < 14 }
				}
				AND = {
					planet_size > 14
					orbit = { planet_size < 15 }
				}
				AND = {
					planet_size > 15
					orbit = { planet_size < 16 }
				}
				AND = {
					planet_size > 16
					orbit = { planet_size < 17 }
				}
				AND = {
					planet_size > 17
					orbit = { planet_size < 18 }
				}
			}
		}
	}

	on_spawn = {
		if = {
			limit = { NOT = { has_modifier = low_gravity } }
			add_modifier = {
				modifier = low_gravity
				days = -1
			}
		}
		if = {
			limit = { NOT = { has_modifier = mineral_poor } }
			add_modifier = {
				modifier = mineral_poor
				days = -1
			}
		}
	}

	on_success = mzilli_anomaly_events.84
}

MZILLI_UNSTABLE_TECTONICS = {
	desc = "MZILLI_UNSTABLE_TECTONICS_DESC"
	picture = "GFX_evt_molten"
	level = 3

	spawn_chance = {
		modifier = {
			add = 1
			OR = {
				is_planet_class = pc_barren
				is_planet_class = pc_barren_cold
				is_planet_class = pc_toxic
			}
		}
		modifier = {
			factor = 10
			has_modifier = unstable_tectonics
		}
		modifier = {
			factor = 0
			OR = {
				has_modifier = mineral_poor
				has_modifier = mineral_rich
			}
		}
	}

	on_spawn = {
		if = {
			limit = { NOT = { has_modifier = unstable_tectonics } }
			add_modifier = {
				modifier = unstable_tectonics
				days = -1
			}
		}
		if = {
			limit = { NOT = { has_modifier = ultra_rich } }
			add_modifier = {
				modifier = ultra_rich
				days = -1
			}
		}
	}

	on_success = mzilli_anomaly_events.85
}

MZILLI_OLD_STAR = {
	desc = "MZILLI_OLD_STAR_DESC"
	picture = "GFX_evt_star_yellow"
	level = 3

	max_once = yes
	
	spawn_chance = {
		modifier = {
			add = 40
			is_planet_class = pc_m_star
			solar_system = {
				is_star_class = sc_m
				is_rim_system = yes
				NOR = {
					any_system_planet = { is_colonizable = yes }
					any_system_planet = { exists = owner }
				}
			}
		}
	}

	on_spawn = {
		add_modifier = {
			modifier = mzilli_ancient_star
			days = -1
		}
	}
	on_success = mzilli_anomaly_events.86
}