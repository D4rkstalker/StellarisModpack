#Country Scope
game_start_colonies = {
	set_variable = { which = exploit_start_colonies value = 4 }
	capital_scope = {
		set_planet_flag = exploit_center
		if = {
			limit = {
				is_moon = no
			}
			log = "Selected Exploit Center is not a Moon"
			every_moon = {
				limit = {
					PREVPREV = { check_variable = { which = exploit_start_colonies value > 0 } }
					NOR = {
						has_modifier = colonized_planet
						is_colony = yes
						is_colonizable = yes
					}
				}
				log = "Colonized a Moon of the capital"
				PREVPREV = { change_variable = { which = exploit_start_colonies value = -1 } }
				add_modifier = { modifier = building_thing }
				if = {
					limit = {
						NOT = { has_modifier = colonized_planet }
					}
					add_modifier = { modifier = colonized_planet }
				}
				set_variable = { which = exploitation_size value = 0 }
				new_colony_setup = yes
				breakdown_deposits = yes
				exploit_size_set = yes
				switch = {
					trigger = is_planet_class
					pc_shattered = {
						planet_event = { id = spaceexploit.202 }
						planet_event = { id = spaceexploit.202 }
						planet_event = { id = spaceexploit.502 }
						planet_event = { id = spaceexploit.502 }
						planet_event = { id = spaceexploit.502 }
						random_list = {
							1 = { planet_event = { id = spaceexploit.502 } }
							1 = { }
						}
						planet_event = { id = spaceexploit.5 }
					}
					pc_frozen = {
						planet_event = { id = spaceexploit.202 }
						planet_event = { id = spaceexploit.202 }
						planet_event = { id = spaceexploit.102 }
						planet_event = { id = spaceexploit.102 }
						planet_event = { id = spaceexploit.102 }
						random_list = {
							1 = { planet_event = { id = spaceexploit.102 } }
							1 = { }
						}
						planet_event = { id = spaceexploit.1 }
					}
					pc_molten = {
						planet_event = { id = spaceexploit.1002 }
						planet_event = { id = spaceexploit.1002 }
						planet_event = { id = spaceexploit.1002 }
						random_list = {
							1 = { planet_event = { id = spaceexploit.1002 } }
							1 = { }
						}
						planet_event = { id = spaceexploit.10 }
					}
					pc_barren = {
						planet_event = { id = spaceexploit.202 }
						planet_event = { id = spaceexploit.202 }
						planet_event = { id = spaceexploit.202 }
						planet_event = { id = spaceexploit.1202 }
						planet_event = { id = spaceexploit.1202 }
						planet_event = { id = spaceexploit.1202 }
						random_list = {
							1 = {
								planet_event = { id = spaceexploit.1202 }
								planet_event = { id = spaceexploit.202 }
							}
							1 = { }
						}
						planet_event = { id = spaceexploit.12 }
					}
					pc_barren_cold = {
						planet_event = { id = spaceexploit.202 }
						planet_event = { id = spaceexploit.202 }
						planet_event = { id = spaceexploit.202 }
						planet_event = { id = spaceexploit.1202 }
						planet_event = { id = spaceexploit.1202 }
						planet_event = { id = spaceexploit.1202 }
						random_list = {
							1 = {
								planet_event = { id = spaceexploit.1202 }
								planet_event = { id = spaceexploit.202 }
							}
							1 = { }
						}
						planet_event = { id = spaceexploit.12 }
					}
					pc_toxic = {
						planet_event = { id = spaceexploit.202 }
						planet_event = { id = spaceexploit.202 }
						planet_event = { id = spaceexploit.202 }
						planet_event = { id = spaceexploit.1202 }
						planet_event = { id = spaceexploit.1202 }
						planet_event = { id = spaceexploit.1202 }
						random_list = {
							1 = {
								planet_event = { id = spaceexploit.1202 }
								planet_event = { id = spaceexploit.202 }
							}
							1 = { }
						}
						planet_event = { id = spaceexploit.12 }
					}
				}
			}
		}
		else_if = {
			limit = {
				is_moon = yes
			}
			log = "Selected Exploit Center is a Moon"
			planet = {
				every_moon = {
					limit = {
						PREVPREVPREV = { check_variable = { which = exploit_start_colonies value > 0 } }
						NOR = {
							has_modifier = colonized_planet
							is_colony = yes
							is_colonizable = yes
						}
					}
					log = "Colonized a sister Moon of the capital"
					PREVPREVPREV = { change_variable = { which = exploit_start_colonies value = -1 } }
					add_modifier = { modifier = building_thing }
					if = {
						limit = {
							NOT = { has_modifier = colonized_planet }
						}
						add_modifier = { modifier = colonized_planet }
					}
					set_variable = { which = exploitation_size value = 0 }
					new_colony_setup = yes
					breakdown_deposits = yes
					exploit_size_set = yes
					switch = {
						trigger = is_planet_class
						pc_shattered = {
							planet_event = { id = spaceexploit.202 }
							planet_event = { id = spaceexploit.202 }
							planet_event = { id = spaceexploit.502 }
							planet_event = { id = spaceexploit.502 }
							planet_event = { id = spaceexploit.502 }
							random_list = {
								1 = { planet_event = { id = spaceexploit.502 } }
								1 = { }
							}
							planet_event = { id = spaceexploit.5 }
						}
						pc_frozen = {
							planet_event = { id = spaceexploit.202 }
							planet_event = { id = spaceexploit.202 }
							planet_event = { id = spaceexploit.102 }
							planet_event = { id = spaceexploit.102 }
							planet_event = { id = spaceexploit.102 }
							random_list = {
								1 = { planet_event = { id = spaceexploit.102 } }
								1 = { }
							}
							planet_event = { id = spaceexploit.1 }
						}
						pc_molten = {
							planet_event = { id = spaceexploit.1002 }
							planet_event = { id = spaceexploit.1002 }
							planet_event = { id = spaceexploit.1002 }
							random_list = {
								1 = { planet_event = { id = spaceexploit.1002 } }
								1 = { }
							}
							planet_event = { id = spaceexploit.10 }
						}
						pc_barren = {
							planet_event = { id = spaceexploit.202 }
							planet_event = { id = spaceexploit.202 }
							planet_event = { id = spaceexploit.202 }
							planet_event = { id = spaceexploit.1202 }
							planet_event = { id = spaceexploit.1202 }
							planet_event = { id = spaceexploit.1202 }
							random_list = {
								1 = {
									planet_event = { id = spaceexploit.1202 }
									planet_event = { id = spaceexploit.202 }
								}
								1 = { }
							}
							planet_event = { id = spaceexploit.12 }
						}
						pc_barren_cold = {
							planet_event = { id = spaceexploit.202 }
							planet_event = { id = spaceexploit.202 }
							planet_event = { id = spaceexploit.202 }
							planet_event = { id = spaceexploit.1202 }
							planet_event = { id = spaceexploit.1202 }
							planet_event = { id = spaceexploit.1202 }
							random_list = {
								1 = {
									planet_event = { id = spaceexploit.1202 }
									planet_event = { id = spaceexploit.202 }
								}
								1 = { }
							}
							planet_event = { id = spaceexploit.12 }
						}
						pc_toxic = {
							planet_event = { id = spaceexploit.202 }
							planet_event = { id = spaceexploit.202 }
							planet_event = { id = spaceexploit.202 }
							planet_event = { id = spaceexploit.1202 }
							planet_event = { id = spaceexploit.1202 }
							planet_event = { id = spaceexploit.1202 }
							random_list = {
								1 = {
									planet_event = { id = spaceexploit.1202 }
									planet_event = { id = spaceexploit.202 }
								}
								1 = { }
							}
							planet_event = { id = spaceexploit.12 }
						}
					}
				}
			}
		}
		if = {
			limit = {
				PREV = { check_variable = { which = exploit_start_colonies value > 0 } }
			}
			while = {
				count = 5
				limit = {
					PREV = { check_variable = { which = exploit_start_colonies value > 0 } }
					solar_system = {
						any_system_planet = {
							limit = {
								NOR = {
									has_modifier = colonized_planet
									is_colony = yes
									is_colonizable = yes
								}
								is_planet_class = pc_asteroid
							}
						}
					}
				}
				solar_system = {
					random_system_planet = {
						limit = {
							PREVPREVPREV = { check_variable = { which = exploit_start_colonies value > 0 } }
							NOR = {
								has_modifier = colonized_planet
								is_colony = yes
								is_colonizable = yes
							}
							is_planet_class = pc_asteroid
						}
						log = "Colonized an Asteroid"
						PREVPREVPREV = { change_variable = { which = exploit_start_colonies value = -1 } }
						add_modifier = { modifier = building_thing }
						if = {
							limit = {
								NOT = { has_modifier = colonized_planet }
							}
							add_modifier = { modifier = colonized_planet }
						}
						new_colony_setup = yes
						breakdown_deposits = yes
						exploit_size_set = yes
						if = {
							limit = {
								OR = {
									is_planet_class = pc_gas_giant
									is_planet_class = pc_asteroid
									is_planet_class = pc_ice_asteroid
								}
							}
							exploit_size_set = yes
						}
						planet_event = { id = spaceexploit.202 }
						planet_event = { id = spaceexploit.202 }
						planet_event = { id = spaceexploit.502 }
						planet_event = { id = spaceexploit.502 }
						random_list = {
							1 = { planet_event = { id = spaceexploit.502 } }
							1 = { }
						}
						planet_event = { id = spaceexploit.5 }
					}
				}
			}
		}
		if = {
			limit = {
				PREV = { check_variable = { which = exploit_start_colonies value > 0 } }
			}
			while = {
				count = 5
				limit = {
					PREV = { check_variable = { which = exploit_start_colonies value > 0 } }
					solar_system = {
						any_system_planet = {
							limit = {
								NOR = {
									has_modifier = colonized_planet
									is_colony = yes
									is_colonizable = yes
								}
								is_planet_class = pc_molten
							}
						}
					}
				}
				solar_system = {
					random_system_planet = {
						limit = {
							PREVPREVPREV = { check_variable = { which = exploit_start_colonies value > 0 } }
							NOR = {
								has_modifier = colonized_planet
								is_colony = yes
								is_colonizable = yes
							}
							is_planet_class = pc_molten
						}
						log = "Colonized a Molten World"
						PREVPREVPREV = { change_variable = { which = exploit_start_colonies value = -1 } }
						add_modifier = { modifier = building_thing }
						if = {
							limit = {
								NOT = { has_modifier = colonized_planet }
							}
							add_modifier = { modifier = colonized_planet }
						}
						new_colony_setup = yes
						breakdown_deposits = yes
						exploit_size_set = yes
						if = {
							limit = {
								OR = {
									is_planet_class = pc_gas_giant
									is_planet_class = pc_asteroid
									is_planet_class = pc_ice_asteroid
								}
							}
							exploit_size_set = yes
						}
						planet_event = { id = spaceexploit.1002 }
						planet_event = { id = spaceexploit.10 }
					}
				}
			}
		}
		if = {
			limit = {
				PREV = { check_variable = { which = exploit_start_colonies value > 0 } }
			}
			while = {
				count = 5
				limit = {
					PREV = { check_variable = { which = exploit_start_colonies value > 0 } }
					solar_system = {
						any_system_planet = {
							limit = {
								NOR = {
									has_modifier = colonized_planet
									is_colony = yes
									is_colonizable = yes
								}
								is_planet_class = pc_barren
							}
						}
					}
				}
				solar_system = {
					random_system_planet = {
						limit = {
							PREVPREVPREV = { check_variable = { which = exploit_start_colonies value > 0 } }
							NOR = {
								has_modifier = colonized_planet
								is_colony = yes
								is_colonizable = yes
								has_deposit_for = shipclass_research_station
							}
							is_planet_class = pc_barren
						}
						log = "Colonized a Barren World"
						PREVPREVPREV = { change_variable = { which = exploit_start_colonies value = -1 } }
						add_modifier = { modifier = building_thing }
						if = {
							limit = {
								NOT = { has_modifier = colonized_planet }
							}
							add_modifier = { modifier = colonized_planet }
						}
						new_colony_setup = yes
						breakdown_deposits = yes
						exploit_size_set = yes
						if = {
							limit = {
								OR = {
									is_planet_class = pc_gas_giant
									is_planet_class = pc_asteroid
									is_planet_class = pc_ice_asteroid
								}
							}
							exploit_size_set = yes
						}
						planet_event = { id = spaceexploit.202 }
						planet_event = { id = spaceexploit.1202 }
						planet_event = { id = spaceexploit.12 }
					}
				}
			}
		}
	}
}

breakdown_deposits = {
	every_deposit = {
		switch = {
			trigger = is_deposit_type
			d_minerals_10 = {
				remove_deposit = yes
				while = {
					count = 10
					PREV = { add_deposit = d_minerals_1 }
				}
			}
			d_minerals_9 = {
				remove_deposit = yes
				while = {
					count = 9
					PREV = { add_deposit = d_minerals_1 }
				}
			}
			d_minerals_8 = {
				remove_deposit = yes
				while = {
					count = 8
					PREV = { add_deposit = d_minerals_1 }
				}
			}
			d_minerals_7 = {
				remove_deposit = yes
				while = {
					count = 7
					PREV = { add_deposit = d_minerals_1 }
				}
			}
			d_minerals_6 = {
				remove_deposit = yes
				while = {
					count = 6
					PREV = { add_deposit = d_minerals_1 }
				}
			}
			d_minerals_5 = {
				remove_deposit = yes
				while = {
					count = 5
					PREV = { add_deposit = d_minerals_1 }
				}
			}
			d_minerals_4 = {
				remove_deposit = yes
				while = {
					count = 4
					PREV = { add_deposit = d_minerals_1 }
				}
			}
			d_minerals_3 = {
				remove_deposit = yes
				while = {
					count = 3
					PREV = { add_deposit = d_minerals_1 }
				}
			}
			d_minerals_2 = {
				remove_deposit = yes
				while = {
					count = 2
					PREV = { add_deposit = d_minerals_1 }
				}
			}
			d_energy_10 = {
				remove_deposit = yes
				while = {
					count = 10
					PREV = { add_deposit = d_energy_1 }
				}
			}
			d_energy_9 = {
				remove_deposit = yes
				while = {
					count = 9
					PREV = { add_deposit = d_energy_1 }
				}
			}
			d_energy_8 = {
				remove_deposit = yes
				while = {
					count = 8
					PREV = { add_deposit = d_energy_1 }
				}
			}
			d_energy_7 = {
				remove_deposit = yes
				while = {
					count = 7
					PREV = { add_deposit = d_energy_1 }
				}
			}
			d_energy_6 = {
				remove_deposit = yes
				while = {
					count = 6
					PREV = { add_deposit = d_energy_1 }
				}
			}
			d_energy_5 = {
				remove_deposit = yes
				while = {
					count = 5
					PREV = { add_deposit = d_energy_1 }
				}
			}
			d_energy_4 = {
				remove_deposit = yes
				while = {
					count = 4
					PREV = { add_deposit = d_energy_1 }
				}
			}
			d_energy_3 = {
				remove_deposit = yes
				while = {
					count = 3
					PREV = { add_deposit = d_energy_1 }
				}
			}
			d_energy_2 = {
				remove_deposit = yes
				while = {
					count = 2
					PREV = { add_deposit = d_energy_1 }
				}
			}
		}
	}
}

exploit_size_set = {
	set_variable = { which = exploitation_size_calc value = 0 }
	switch = {
		trigger = planet_size
		4 = {		
			change_variable = { which = exploitation_size_calc value = 4 }
		}
		5 = {		
			change_variable = { which = exploitation_size_calc value = 5 }
		}
		6 = {		
			change_variable = { which = exploitation_size_calc value = 6 }
		}
		7 = {		
			change_variable = { which = exploitation_size_calc value = 7 }
		}
		8 = {		
			change_variable = { which = exploitation_size_calc value = 8 }
		}
		9 = {		
			change_variable = { which = exploitation_size_calc value = 9 }
		}
		10 = {		
			change_variable = { which = exploitation_size_calc value = 10 }
		}
		11 = {		
			change_variable = { which = exploitation_size_calc value = 11 }
		}
		12 = {		
			change_variable = { which = exploitation_size_calc value = 12 }
		}
		13 = {		
			change_variable = { which = exploitation_size_calc value = 13 }
		}
		14 = {		
			change_variable = { which = exploitation_size_calc value = 14 }
		}
		15 = {		
			change_variable = { which = exploitation_size_calc value = 15 }
		}
		16 = {		
			change_variable = { which = exploitation_size_calc value = 16 }
		}
		17 = {		
			change_variable = { which = exploitation_size_calc value = 17 }
		}
		18 = {		
			change_variable = { which = exploitation_size_calc value = 18 }
		}
		19 = {		
			change_variable = { which = exploitation_size_calc value = 19 }
		}
		20 = {		
			change_variable = { which = exploitation_size_calc value = 20 }
		}
		21 = {		
			change_variable = { which = exploitation_size_calc value = 21 }
		}
		22 = {		
			change_variable = { which = exploitation_size_calc value = 22 }
		}
		23 = {		
			change_variable = { which = exploitation_size_calc value = 23 }
		}
		24 = {		
			change_variable = { which = exploitation_size_calc value = 24 }
		}
		25 = {		
			change_variable = { which = exploitation_size_calc value = 25 }
		}
		26 = {		
			change_variable = { which = exploitation_size_calc value = 26 }
		}
		27 = {		
			change_variable = { which = exploitation_size_calc value = 27 }
		}
		28 = {		
			change_variable = { which = exploitation_size_calc value = 28 }
		}
		29 = {		
			change_variable = { which = exploitation_size_calc value = 29 }
		}
		30 = {		
			change_variable = { which = exploitation_size_calc value = 30 }
		}
		31 = {		
			change_variable = { which = exploitation_size_calc value = 31 }
		}
		32 = {		
			change_variable = { which = exploitation_size_calc value = 32 }
		}
		33 = {		
			change_variable = { which = exploitation_size_calc value = 33 }
		}
		34 = {		
			change_variable = { which = exploitation_size_calc value = 34 }
		}
		35 = {		
			change_variable = { which = exploitation_size_calc value = 35 }
		}
		36 = {		
			change_variable = { which = exploitation_size_calc value = 36 }
		}
		37 = {		
			change_variable = { which = exploitation_size_calc value = 37 }
		}
		38 = {		
			change_variable = { which = exploitation_size_calc value = 38 }
		}
		39 = {		
			change_variable = { which = exploitation_size_calc value = 39 }
		}
		40 = {		
			change_variable = { which = exploitation_size_calc value = 40 }
		}
		41 = {		
			change_variable = { which = exploitation_size_calc value = 41 }
		}
		42 = {		
			change_variable = { which = exploitation_size_calc value = 42 }
		}
		43 = {		
			change_variable = { which = exploitation_size_calc value = 43 }
		}
		44 = {		
			change_variable = { which = exploitation_size_calc value = 44 }
		}
		45 = {		
			change_variable = { which = exploitation_size_calc value = 45 }
		}
		46 = {		
			change_variable = { which = exploitation_size_calc value = 46 }
		}
		47 = {		
			change_variable = { which = exploitation_size_calc value = 47 }
		}
		48 = {		
			change_variable = { which = exploitation_size_calc value = 48 }
		}
		49 = {		
			change_variable = { which = exploitation_size_calc value = 49 }
		}
		50 = {		
			change_variable = { which = exploitation_size_calc value = 50 }
		}
	}
	divide_variable = { which = exploitation_size_calc value = 2 }
	change_variable = { which = exploitation_size value = exploitation_size_calc }
}

upgrade_exploit_size = {
	if = {
		limit = {
			check_variable = { which = exploitation_size value = 0 }
		}
		set_variable = { which = exploitation_size value = 1 }
	}
	else = {
		change_variable = { which = exploitation_size value = 1 }
	}
	if = {
		limit = {
			planet_size > 9
		}
		change_variable = { which = exploitation_size value = 1 }
	}
	if = {
		limit = {
			planet_size > 19
		}
		change_variable = { which = exploitation_size value = 1 }
	}
	if = {
		limit = {
			planet_size > 29
		}
		change_variable = { which = exploitation_size value = 1 }
	}
	if = {
		limit = {
			planet_size > 39
		}
		change_variable = { which = exploitation_size value = 1 }
	}
	if = {
		limit = {
			planet_size > 49
		}
		change_variable = { which = exploitation_size value = 1 }
	}
}

tech_increase_exploit_size = {
	if = {
		limit = {
			check_variable = { which = exploitation_size value = 0 }
		}
		set_variable = { which = exploitation_size value = 1 }
	}
	else = {
		change_variable = { which = exploitation_size value = 1 }
	}
	if = {
		limit = {
			planet_size > 9
		}
		change_variable = { which = exploitation_size value = 1 }
	}
	if = {
		limit = {
			planet_size > 19
		}
		change_variable = { which = exploitation_size value = 1 }
	}
	if = {
		limit = {
			planet_size > 29
		}
		change_variable = { which = exploitation_size value = 1 }
	}
	if = {
		limit = {
			planet_size > 39
		}
		change_variable = { which = exploitation_size value = 1 }
	}
	if = {
		limit = {
			planet_size > 49
		}
		change_variable = { which = exploitation_size value = 1 }
	}
}

new_colony_setup = {
	solar_system = {
		if = {
			limit = {
				any_system_planet = {
					has_planet_flag = exploit_center
				}
			}
			random_system_planet = {
				limit = {
					has_planet_flag = exploit_center
				}
				add_deposit = d_small_colonies
				change_variable = { which = small_colony_count value = 1 }
				change_variable = { which = exploitation_trade value = 1 }
				if = {
					limit = {
						has_global_flag = exploitation_logging
					}
					log = "Minor Colony Count start [This.small_colony_count] on [This.GetName]"
				}
			}
		}
		else = {
			random_system_planet = {
				limit = {
					is_major_colony = yes
				}
				add_deposit = d_small_colonies
				set_planet_flag = exploit_center
				set_variable = { which = small_colony_count value = 1 }
				set_variable = { which = exploitation_trade value = 1 }
			}
		}
	}
}

#has_deposit_for = shipclass_mining_station
ai_colony_switch = {
	if = {
		limit = {
			has_perm_flag = yes
		}
		switch = {
			trigger = has_planet_flag
			exploit_mine_loop = {
				exploit_mine_loop = yes
			}
			exploit_power_loop = {
				exploit_power_loop = yes
			}
			exploit_alloy_mine_loop = {
				exploit_alloy_mine_loop = yes
			}
			exploit_alloy_foundry_loop = {
				exploit_alloy_foundry_loop = yes
			}
			exploit_lava_refinery_loop = {
				exploit_lava_refinery_loop = yes
			}
			exploit_research_loop = {
				exploit_research_loop = yes
			}
			exploit_motes_loop = {
				exploit_motes_loop = yes
			}
			exploit_gases_loop = {
				exploit_gases_loop = yes
			}
			exploit_crystals_loop = {
				exploit_crystals_loop = yes
			}
		}
	}
	else_if = {
		limit = {
			is_planet_class = pc_molten
			NOT = {	has_deposit_for = shipclass_research_station }
			has_exploit_technology = yes
		}
		exploit_lava_refinery_loop = yes
	}
	else_if = {
		limit = {
			has_exploit_technology = yes
			OR = {
				has_deposit_for = shipclass_research_station
				AND = {
					is_planet_class = pc_gas_giant
					space_owner = { has_technology = tech_habitat_1 }
					has_energy_deposit = yes
				}
			}
		}
		exploit_research_loop = yes
	}
	else_if = {
		limit = {
			has_exploit_technology = yes
			has_alloy_deposit = yes
		}
		random_list = {
			10 = {
				modifier = {
					factor = 0
					is_planet_class = pc_asteroid 
				}
				exploit_alloy_foundry_loop = yes
			}
			10 = {
				modifier = {
					factor = 0
					NOT = { is_planet_class = pc_asteroid }
				}
				exploit_alloy_mine_loop = yes
			}
		}
	}
	else_if = {
		limit = {
			has_exploit_technology = yes
			has_deposit = no
		}
		random_list = {
			10 = {
				modifier = {
					factor = 0
					NOT = { is_planet_class = pc_asteroid }
				}
				exploit_alloy_mine_loop = yes
			}
			10 = {
				modifier = {
					factor = 0
					is_planet_class = pc_asteroid
				}
				exploit_research_loop = yes
			}
		}
	}
	else_if = {
		limit = {
			has_exploit_technology = yes
			has_energy_deposit = yes
			has_mineral_deposit = yes
		}
		exploit_alloy_foundry_loop = yes
	}
	else_if = {
		limit = {
			has_exploit_technology = yes
			has_energy_deposit = yes
		}
		random_list = {
			10 = {
				exploit_alloy_foundry_loop = yes
			}
			10 = {
				exploit_research_loop = yes
			}
		}
	}
	else_if = {
		limit = {
			has_exploit_technology = yes
			has_mineral_deposit = yes
		}
		random_list = {
			10 = {
				modifier = {
					factor = 0
					planet_size > 10
				}
				exploit_mine_loop = yes
			}
			10 = {
				exploit_alloy_foundry_loop = yes
			}
		}
	}
}

reset_exploit_variables = {
	set_variable = { which = minor_colonies value = 0 }
	set_variable = { which = minor_colonies_available value = 0 }
	
	set_variable = { which = minor_colony_barren value = 0 }
	set_variable = { which = minor_colony_frozen value = 0 }
	set_variable = { which = minor_colony_asteroid value = 0 }
	set_variable = { which = minor_colony_molten value = 0 }
	set_variable = { which = minor_colony_toxic value = 0 }
	set_variable = { which = minor_colony_gas_giants value = 0 }
	set_variable = { which = minor_colony_ice_asteroid value = 0 }
	
	set_variable = { which = minor_colony_barren_available value = 0 }
	set_variable = { which = minor_colony_frozen_available value = 0 }
	set_variable = { which = minor_colony_asteroid_available value = 0 }
	set_variable = { which = minor_colony_molten_available value = 0 }
	set_variable = { which = minor_colony_toxic_available value = 0 }
	set_variable = { which = minor_colony_gas_giants_available value = 0 }
	set_variable = { which = minor_colony_ice_asteroid_available value = 0 }
	
	set_variable = { which = exploit_energy_available value = 0 }
	set_variable = { which = exploit_minerals_available value = 0 }
	set_variable = { which = exploit_alloy_available value = 0 }
	set_variable = { which = exploit_foundry_available value = 0 }
	set_variable = { which = exploit_research_available value = 0 }
	set_variable = { which = exploit_lava_refinery_available value = 0 }
	set_variable = { which = exploit_motes_available value = 0 }
	set_variable = { which = exploit_gases_available value = 0 }
	set_variable = { which = exploit_crystals_available value = 0 }
	
	set_variable = { which = exploit_energy_colonies value = 0 }
	set_variable = { which = exploit_mineral_mine_colonies value = 0 }
	set_variable = { which = exploit_alloy_mine_colonies value = 0 }
	set_variable = { which = exploit_alloy_foundry_colonies value = 0 }
	set_variable = { which = exploit_research_lab_colonies value = 0 }
	set_variable = { which = exploit_lava_refinery_colonies value = 0 }
	set_variable = { which = exploit_motes_mine_colonies value = 0 }
	set_variable = { which = exploit_gas_well_colonies value = 0 }
	set_variable = { which = exploit_crystal_mine_colonies value = 0 }
	
	set_variable = { which = exploit_energy_building value = 0 }
	set_variable = { which = exploit_mineral_mine_building value = 0 }
	set_variable = { which = exploit_alloy_mine_building value = 0 }
	set_variable = { which = exploit_alloy_foundry_building value = 0 }
	set_variable = { which = exploit_research_lab_building value = 0 }
	set_variable = { which = exploit_lava_refinery_building value = 0 }
	set_variable = { which = exploit_motes_mine_building value = 0 }
	set_variable = { which = exploit_gas_well_building value = 0 }
	set_variable = { which = exploit_crystal_mine_building value = 0 }
}

#Country Scope
document_minor_colonies = {
	reset_exploit_variables = yes
	every_planet_within_border = {
		if = {
			limit = {
				has_modifier = colonized_planet
			}
			log = "Documented Minor Colony on [This.GetName] for [ROOT.GetName]"
			change_variable = { which = minor_colonies value = 1 }
			switch = {
				trigger = has_planet_flag
				exploit_mine_loop = {
					ROOT = { change_variable = { which = exploit_mineral_mine_colonies value = 1 } }
				}
				exploit_power_loop = {
					ROOT = { change_variable = { which = exploit_energy_colonies value = 1 } }
				}
				exploit_alloy_mine_loop = {
					ROOT = { change_variable = { which = exploit_alloy_mine_colonies value = 1 } }
				}
				exploit_alloy_foundry_loop = {
					ROOT = { change_variable = { which = exploit_alloy_foundry_colonies value = 1 } }
				}
				exploit_lava_refinery_loop = {
					ROOT = { change_variable = { which = exploit_lava_refinery_colonies value = 1 } }
				}
				exploit_research_loop = {
					ROOT = { change_variable = { which = exploit_research_lab_colonies value = 1 } }
				}
				exploit_motes_loop = {
					ROOT = { change_variable = { which = exploit_motes_mine_colonies value = 1 } }
				}
				exploit_gases_loop = {
					ROOT = { change_variable = { which = exploit_gas_well_colonies value = 1 } }
				}
				exploit_crystals_loop = {
					ROOT = { change_variable = { which = exploit_crystal_mine_colonies value = 1 } }
				}
			}
			switch = {
				trigger = has_planet_flag
				exploit_building_mines = {
					ROOT = { change_variable = { which = exploit_mineral_mine_building value = 1 } }
				}
				exploit_building_power = {
					ROOT = { change_variable = { which = exploit_energy_building value = 1 } }
				}
				exploit_building_alloys = {
					ROOT = { change_variable = { which = exploit_alloy_mine_building value = 1 } }
				}
				exploit_building_foundry = {
					ROOT = { change_variable = { which = exploit_alloy_foundry_building value = 1 } }
				}
				exploit_building_lava = {
					ROOT = { change_variable = { which = exploit_lava_refinery_building value = 1 } }
				}
				exploit_building_research = {
					ROOT = { change_variable = { which = exploit_research_lab_building value = 1 } }
				}
				exploit_building_motes = {
					ROOT = { change_variable = { which = exploit_motes_mine_building value = 1 } }
				}
				exploit_building_gases = {
					ROOT = { change_variable = { which = exploit_gas_well_building value = 1 } }
				}
				exploit_building_crystals = {
					ROOT = { change_variable = { which = exploit_crystal_mine_building value = 1 } }
				}
			}
			if = {
				limit = {
					OR = {
						is_planet_class = pc_barren
						is_planet_class = pc_barren_cold
					}
				}
				ROOT = { change_variable = { which = minor_colony_barren value = 1 } }
			}
			else_if = {
				limit = {
					is_planet_class = pc_frozen
				}
				ROOT = { change_variable = { which = minor_colony_frozen value = 1 } }
			}
			else_if = {
				limit = {
					is_planet_class = pc_asteroid
				}
				ROOT = { change_variable = { which = minor_colony_asteroid value = 1 } }
			}
			else_if = {
				limit = {
					is_planet_class = pc_molten
				}
				ROOT = { change_variable = { which = minor_colony_molten value = 1 } }
			}
			else_if = {
				limit = {
					is_planet_class = pc_toxic
				}
				ROOT = { change_variable = { which = minor_colony_toxic value = 1 } }
			}
			else_if = {
				limit = {
					is_planet_class = pc_gas_giant
				}
				ROOT = { change_variable = { which = minor_colony_gas_giants value = 1 } }
			}
			else_if = {
				limit = {
					is_planet_class = pc_ice_asteroid
				}
				ROOT = { change_variable = { which = minor_colony_ice_asteroid value = 1 } }
			}
			else_if = {
				limit = {
					is_planet_class = pc_shattered
				}
				ROOT = { change_variable = { which = minor_colony_shattered value = 1 } }
			}
			else_if = {
				limit = {
					is_planet_class = pc_shrouded
				}
				ROOT = { change_variable = { which = minor_colony_shrouded value = 1 } }
			}
		}
		else_if = {
			limit = {
				NOT = { has_modifier = colonized_planet }
			}
			log = "Documented Minor Colony Available on [This.GetName] for [ROOT.GetName]"
			ROOT = { change_variable = { which = minor_colonies_available value = 1 } }
			if = {
				limit = {
					OR = {
						is_planet_class = pc_barren
						is_planet_class = pc_barren_cold
					}
				}
				ROOT = { change_variable = { which = minor_colony_barren_available value = 1 } }
			}
			else_if = {
				limit = {
					is_planet_class = pc_frozen
				}
				ROOT = { change_variable = { which = minor_colony_frozen_available value = 1 } }
			}
			else_if = {
				limit = {
					is_planet_class = pc_asteroid
				}
				ROOT = { change_variable = { which = minor_colony_asteroid_available value = 1 } }
			}
			else_if = {
				limit = {
					is_planet_class = pc_molten
				}
				ROOT = { change_variable = { which = minor_colony_molten_available value = 1 } }
			}
			else_if = {
				limit = {
					is_planet_class = pc_toxic
				}
				ROOT = { change_variable = { which = minor_colony_toxic_available value = 1 } }
			}
			else_if = {
				limit = {
					is_planet_class = pc_gas_giant
				}
				ROOT = { change_variable = { which = minor_colony_gas_giants_available value = 1 } }
			}
			else_if = {
				limit = {
					is_planet_class = pc_ice_asteroid
				}
				ROOT = { change_variable = { which = minor_colony_ice_asteroid_available value = 1 } }
			}
			else_if = {
				limit = {
					is_planet_class = pc_shattered
				}
				ROOT = { change_variable = { which = minor_colony_shattered_available value = 1 } }
			}
			else_if = {
				limit = {
					is_planet_class = pc_shrouded
				}
				ROOT = { change_variable = { which = minor_colony_shrouded_available value = 1 } }
			}
			else_if = {
				limit = {
					is_planet_class = pc_rare_crystal_asteroid
				}
				ROOT = { change_variable = { which = minor_colony_asteroid_available value = 1 } }
				ROOT = { change_variable = { which = exploit_crystals_available value = 1 } }
			}		
		}
	}
	#Energy Available
	change_variable = { which = exploit_energy_available value = minor_colony_gas_giants_available }
	
	#Mining Available
	change_variable = { which = exploit_minerals_available value = minor_colonies_available }
	subtract_variable = { which = exploit_minerals_available value = minor_colony_gas_giants_available }
	
	#Alloy Mining Available
	change_variable = { which = exploit_alloy_available value = minor_colony_asteroid_available }
	
	#Alloy Foundry Available
	change_variable = { which = exploit_foundry_available value = minor_colonies_available }
	
	#Research Labs Available
	change_variable = { which = exploit_research_available value = minor_colonies_available }
	
	#Lava Refinery Available
	change_variable = { which = exploit_lava_refinery_available value = minor_colony_molten_available }
	
	#Motes Mining Available
	change_variable = { which = exploit_motes_available value = minor_colony_molten_available }
	
	#Gas Well Available
	change_variable = { which = exploit_gases_available value = minor_colony_gas_giants_available }
	
	#Crystal Mining Available
	
	#Zro Available
	change_variable = { which = exploit_zro_available value = minor_colony_shrouded_available }
}