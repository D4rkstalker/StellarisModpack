resolution_galactic_exploration_repeal_1 = {
	icon = "GFX_repeal_blue"

	resources = {
		category = resolutions
		cost = {
			influence = @resolution_cost_denounce
		}
	}
	target = no
	fire_and_forget = yes

	effect = {
		custom_tooltip = resolution_galactic_exploration_1_effect_success
		cancel_resolution = "resolution_galactic_exploration_1"
		hidden_effect = {
			set_timed_country_flag = { flag = galactic_community_resolution_passed_general_repeal days = @resolution_flag_timer }
			add_modifier = {
				modifier = resolution_passed_diplomatic_weight
				days = 2200
			}
		}
	}

	fail_effects = {
		hidden_effect = {
			set_timed_country_flag = { flag = galactic_community_resolution_failed_general_repeal days = @resolution_flag_timer }
			add_modifier = {
				modifier = resolution_failed_diplomatic_weight
				days = 2200
			}
		}
	}

	potential = {
		is_active_resolution = "resolution_galactic_exploration_1"
	}

	ai_weight = {
		weight = @resolution_weight_loved

		modifier = {
			factor = 0.85
			is_xenophile = yes
			desc = ethic_xenophile
		}
		
		modifier = {
			factor = 2
			is_xenophobe = yes
			desc = ethic_xenophobe
		}
		
		modifier = {
			factor = 0.9
			is_spiritualist = yes
			desc = ethic_spiritualist
		}
		
		modifier = {
			factor = 1.25
			is_materialist = yes
			desc = ethic_materialist
		}
		
		modifier = {
			factor = 0.5
			OR = {
				has_valid_civic = civic_memorialist
				has_valid_civic = civic_hive_memorialist
				has_valid_civic = civic_machine_memorialist
			}
			desc = gal_com_supporting_civics
		}
		
		modifier = {
			factor = 2
			has_valid_civic = civic_inwards_perfection 
			desc = civic_inwards_perfection
		}
		
		modifier = {
			factor = 0.8
			has_tradition = tr_discovery_adopt
			desc = adopted_disc_traditions_eu
		}
		
		modifier = {
			factor = 1.4
			has_tradition = tr_expansion_adopt
			desc = adopted_exp_traditions_eu
		}
	}
}

resolution_galactic_exploration_1 = {
	icon = "GFX_resolution_NGS_galactic_exploration"

	resources = {
		category = resolutions
		cost = {
			influence = @resolution_cost_denounce
		}
	}
	
	target = no
	level = 1

	modifier = {
		cartography_grants = 1
	}

	effect = {
		hidden_effect = {
			set_global_flag = galactic_community_resolution_passed
			
			set_timed_country_flag = { flag = galactic_community_resolution_passed_general days = @resolution_flag_timer }
			add_modifier = {
				modifier = resolution_passed_diplomatic_weight
				days = 2200
			}
		}
	}

	fail_effects = {
		hidden_effect = {
			set_timed_country_flag = { flag = galactic_community_resolution_failed_general days = @resolution_flag_timer }
			
			add_modifier = {
				modifier = resolution_failed_diplomatic_weight
				days = 2200
			}
		}
	}

	allow = {
		custom_tooltip = {
			fail_text = "resolution_already_active"
			NOR = {
				is_active_resolution = "resolution_galactic_exploration_1"
				is_active_resolution = "resolution_galactic_exploration_2"
			}
		}
	}

	ai_weight = {
		weight = @resolution_weight_disliked

		modifier = {
			factor = 1.25
			is_xenophile = yes
			desc = ethic_xenophile
		}
		modifier = {
			factor = 0.5
			is_xenophobe = yes
			desc = ethic_xenophobe
		}
		
		modifier = {
			factor = 2
			OR = {
				has_valid_civic = civic_memorialist
				has_valid_civic = civic_hive_memorialist
				has_valid_civic = civic_machine_memorialist
			}
			desc = gal_com_supporting_civics
		}
		
		modifier = {
			factor = 0.5
			has_valid_civic = civic_inwards_perfection
			desc = civic_inwards_perfection
		}
		
		modifier = {
			factor = 1.4
			has_tradition = tr_discovery_adopt
			desc = adopted_disc_traditions_eu
		}
		
		modifier = {
			factor = 0.75
			has_tradition = tr_expansion_adopt
			desc = adopted_exp_traditions_eu
		}		

		####################### add modifier for if voter knows there's a normal (non-fallen,etc) empire nearby who's not part of the galactic community and so won't be affected by the survey reduction, so that ais correctly try to avoid letting some non-community member (e.g. a homicidal empire) gobble up their nearby territory?

	}
	
}

resolution_galactic_exploration_repeal_2 = {
	icon = "GFX_repeal_blue"

	resources = {
		category = resolutions
		cost = {
			influence = @resolution_cost_t2
		}
	}
	target = no
	fire_and_forget = yes
	effect = {
		custom_tooltip = resolution_galactic_exploration_repeal_2_effect_success
		hidden_effect = {
			cancel_resolution = "resolution_galactic_exploration_2" 
			
			set_timed_country_flag = { flag = galactic_community_resolution_passed_general_repeal days = @resolution_flag_timer }
			add_modifier = {
				modifier = resolution_passed_diplomatic_weight
				days = 2200
			}
		}
	}

	fail_effects = {
		hidden_effect = {
			set_timed_country_flag = { flag = galactic_community_resolution_failed_general_repeal days = @resolution_flag_timer }
			add_modifier = {
				modifier = resolution_failed_diplomatic_weight
				days = 2200
			}
		}
	}

	potential = {
		is_active_resolution = "resolution_galactic_exploration_2"
	}

	modifier = {
		cartography_grants = 1
	}

	ai_weight = {							#wil, note: TODO
		weight = @resolution_weight_loved

		modifier = {
			factor = 0.75
			is_xenophile = yes
			desc = ethic_xenophile
		}
		modifier = {
			factor = 3
			is_xenophobe = yes
			desc = ethic_xenophobe
		}
		modifier = {
			factor = 0.75
			is_spiritualist = yes
			desc = ethic_spiritualist
			#wil, note: once spiritualists start tomb-raiding, they declare artifacts to be miraculous relics (see their minor artifact option)
		}
		
		modifier = {
			factor = 0	#wil, note: this is their jam and for flavor they should be for it even if it hurts them
			OR = {
				has_valid_civic = civic_memorialist
				has_valid_civic = civic_hive_memorialist
				has_valid_civic = civic_machine_memorialist
			}
			desc = gal_com_supporting_civics
		}
		
		modifier = {
			factor = 1.2
			OR = {
				has_valid_civic = civic_mining_guilds
				has_valid_civic = civic_machine_rockbreakers
			}
			desc = gal_com_supporting_civics
		}
		
		modifier = {			#need lots of minerals
			factor = 1.2
			is_lithoid_empire = yes
			desc = is_lithoid_eu
		}
		
		modifier = {			#have no source of artifacts
			factor = 0.8
			has_country_resource = {
				type = minor_artifacts
				amount < 10
			}
			desc = few_artifacts_eu
		}
		
		modifier = {			#have a use for lots of artifacts
			factor = 0.8
			has_technology = "tech_arcane_deciphering"
			desc = tech_arcane_eu
		}
		
		#would like to add some "make sure this won't crash the voter's economy" code
	}
}

resolution_galactic_exploration_2 = {
	icon = "GFX_resolution_NGS_galactic_exploration"

	resources = {
		category = resolutions
		cost = {
			influence = @resolution_cost_t2
		}
	}
	
	target = no
	level = 2

	modifier = {
		cartography_grants = 1
		excavation_grants = 1
	}

	effect = {
		custom_tooltip = resolution_galactic_exploration_2_tooltip
		hidden_effect = {
			set_timed_country_flag = { flag = galactic_community_resolution_passed_general days = @resolution_flag_timer }
			
			add_modifier = {
				modifier = resolution_passed_diplomatic_weight
				days = 2200
			}
		}
	}

	fail_effects = {
		hidden_effect = {
			set_timed_country_flag = { flag = galactic_community_resolution_failed_general days = @resolution_flag_timer }
			
			add_modifier = {
				modifier = resolution_failed_diplomatic_weight
				days = 2200
			}
		}
	}

	allow = {
		is_active_resolution = "resolution_galactic_exploration_1"
	}

	ai_weight = {							#wil, note: TODO
		weight = @resolution_weight_hated

		modifier = {
			factor = 1.25
			is_xenophile = yes
			desc = ethic_xenophile
		}
		modifier = {
			factor = 0.25
			is_xenophobe = yes
			desc = ethic_xenophobe
		}
		
		modifier = {		#wil, note: this is their jam and for flavor they should be for it even if it hurts them
			factor = 2
			OR = {
				has_valid_civic = civic_memorialist
				has_valid_civic = civic_hive_memorialist
				has_valid_civic = civic_machine_memorialist
			}
			desc = gal_com_supporting_civics
		}
		
		modifier = {
			factor = 0.8
			OR = {
				has_valid_civic = civic_mining_guilds
				has_valid_civic = civic_machine_rockbreakers
			}
			desc = gal_com_opposing_civics
		}
		
		modifier = {	
			factor = 0.8
			is_lithoid_empire = yes
			desc = is_lithoid_eu
			#wil, note: under the assumption that they care more about hits to mineral production; remove/modify if that's not the case
		}
		
		modifier = {
			factor = 1.25
			has_technology = "tech_arcane_deciphering"
			desc = tech_arcane_eu
		}
	}
}